<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Total coverage report</title>
<style>
    body {
        margin: 0;
        padding: 18px 10px;
        font: 0.8125em Verdana, sans-serif;
    }

    h1 {
        font-size: 1.2em;
        margin: 0;
        padding-left: 10px;
        padding-bottom: 5px;
    }

    table {
        border-collapse: collapse;
    }

    .stats {
        width: 100%;
    }

    .stats-header th {
        color: white;
    }

    .stats-header th {
        text-align: right;
    }

    .stats-header th:first-child {
        text-align: left;
    }

    .stats td.statements,
    .stats td.executed,
    .stats td.coverage {
        text-align: right;
    }

    .stats > thead th,
    .stats > thead td,
    .stats > tbody > tr > td {
        padding: 4px 10px;
    }

    .stats > thead th {
        font-size: 0.85em;
    }

    .stats > thead > tr:first-child th {
        background-color: #758691;
    }

    .stats > thead th:first-child,
    .stats > thead td:first-child,
    .stats > tbody > tr > td:first-child {
        border-top-left-radius: 4px;
        border-bottom-left-radius: 4px;
    }

    .stats > thead th:last-child,
    .stats > thead td:last-child,
    .stats > tbody > tr > td:last-child {
        border-top-right-radius: 4px;
        border-bottom-right-radius: 4px;
    }

    .stats > tbody > tr:nth-child(4n + 1) {
        background-color: #e7e8e9;
    }

    .stats > tbody > tr:nth-child(2n + 1) {
        cursor: pointer;
    }

    .stats > tbody > tr:nth-child(2n + 1):hover {
        background-color: #b1c7d4;
    }

    .stats tr.no-statements {
        opacity: 0.6;
    }

    a, a:hover, a:visited, a:active {
        color: black;
        text-decoration: none;
    }

    .bar-container {
        padding: 2px;
        padding-right: 8px;
        width: 15%;
    }

    .bar {
        background-color: #DDD;
        background-color: rgba(0, 0, 0, 0.1);
        border-radius: 8px 8px 8px 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) inset, 0 1px 0 rgba(255, 255, 255, 0.5);
        height: 7px;
        padding: 1px;
        position: relative;
        width: 100%;
    }

    .bar > span {
        background-color: #AEDB4B;
        border-radius: 6px 6px 6px 6px;
        box-shadow: 0 -2px 2px rgba(0, 0, 0, 0.2) inset, 0 1px 0 rgba(255, 255, 255, 0.4) inset, 0 -1px 0 rgba(0, 0, 0, 0.15) inset;
        display: block;
        height: 100%;
    }

    .bar > span:before {
        position: absolute;
        width: 25%;
        height: 100%;
        left: 0;
        top: 0;
        border-right: 1px solid rgba(0,0,0,0.1);
        content: ' ';
    }
    .bar > span:after {
        position: absolute;
        width: 25%;
        height: 100%;
        left: 50%;
        top: 0;
        border-left: 1px solid rgba(0,0,0,0.1);
        border-right: 1px solid rgba(0,0,0,0.1);
        content: ' ';
    }

    /* line by line coverage styles */

    .line-coverage {
        margin: 10px 0px;
    }

    .line-coverage th {
        border-right: 1px solid #758691;
    }

    .line-coverage th div,
    .line-coverage td div {
        text-align: center;
    }

    .line-coverage th div {
        margin: 0px 10px 0px 4px;
    }

    .line-coverage td div {
        padding: 2px 6px 2px 4px;
        margin: 0;
    }

    .line-coverage th,
    .line-coverage td,
    .line-coverage pre {
        padding: 0;
        margin: 0;

        font-size: 1.05em;
        font-weight: normal;
        font-family: Courier New;
    }

    .line-coverage th div, 
    .line-coverage td.times-executed div {
        border-radius: 0 5px 5px 0;
        color: rgba(0, 0, 0, 0.8);
        font-size: 0.9em;
    }

    .line-coverage td pre {
        margin-left: 8px;
    }

    .line-coverage tr.covered td.times-executed div {
        background-color: #aedb4b;
    }

    .line-coverage tr.not-covered td.times-executed div {
        background-color: #ff8134;
    }

    .line-coverage span.keyword {
        color: #000080;
        font-weight: bold;
    }

    .line-coverage span.string {
        color: #008000;
    }

    .line-coverage span.number {
        color: #0000ff;
    }

    .line-coverage a {
        color: black;
    }

    .line-coverage-cell > div {
        color: #FF8134;
    }

    .line-coverage-cell > div > a {
        color: #FF8134;
        font-weight: bold;
        text-decoration: underline;
    }

    .stats > thead td {
        font-weight: bold;
    }

    .footer {
        padding-top: 5px;
        text-align: right;
        font-style: italic;
        font-size: 0.85em;
        opacity: 0.7;
    }

    .footer a {
        text-decoration: underline;
    }
</style>
<script type="text/javascript">
    (function () {
        var reservedKeywords = [
            "break",
            "case",
            "catch",
            "continue",
            "debugger",
            "default",
            "delete",
            "do",
            "else",
            "false",
            "finally",
            "for",
            "function",
            "if",
            "in",
            "instanceof",
            "new",
            "null",
            "return",
            "switch",
            "this",
            "true",
            "throw",
            "try",
            "typeof",
            "var",
            "void",
            "while",
            "with"
        ];

        String.prototype.reverse = function () {
            return this.split('').reverse().join('');
        };

        var reservedKeywordsPattern = new RegExp('\\b(' + reservedKeywords.join('|') + ')\\b', 'g');
        var jsStringPattern = /('(?!\\').*'|"(?!\\").*")/g;
        var jsNumberPattern = /\b(\d+(?:\.\d+)?)\b/g;

        function el(type) {
            return document.createElement(type);
        }

        function withText(node, text) {
            node.innerHTML = text;
            return node;
        }

        function maybeAppendMissedLines(id, frag, missed, data) {
            if (missed.length === 0) {
                return;
            }

            var rangeAnchors = [];
            var range;

            for (var i = 0, len = missed.length; i < len; i++) {
                var start = missed[i];
                var end = start;

                range = [start];

                for (var j = i + 1; j < len; j++) {
                    var missedLineNr = missed[j];
                    var consecutive = false;

                    // consecutive missed lines
                    if (missedLineNr === end + 1) {
                        consecutive = true;
                    } else {
                        // let's check if all lines in between are not executable
                        var dataIdx = end;

                        while (dataIdx < missedLineNr) {
                            if (data[dataIdx][0] > -1) {
                                if (data[dataIdx][0] === 0) {
                                    missedLineNr = dataIdx + 1;
                                    consecutive = true;
                                }

                                break;
                            }

                            dataIdx++;
                        }
                    }

                    if (consecutive) {
                        end = missedLineNr;
                        i = j;
                    }
                }

                range[1] = end;

                var rangeStr = start === end ? start : start + '-' + end;
                rangeAnchors.push('<a href="' + '#' + id + '-' + start + '">' + rangeStr + '</a>');
            }

            frag.appendChild(withText(el('div'), 'Missed lines: ' + rangeAnchors.join(', ')));
        }

        function createSourceTable(id, dataEl) {
            var d = document;

            var data = eval(dataEl.innerHTML);
            var td = dataEl.parentNode;
            td.removeChild(dataEl);

            var frag = d.createDocumentFragment();

            var table = el('table');
            table.className = 'line-coverage';

            var missed = [];

            for (var i = 0, len = data.length; i < len; i++) {
                var tr = el('tr');
                var record = data[i];

                var timesExecuted = record[0];
                var src = record[1];
                var executable = timesExecuted > -1;
                var lineNr = i + 1;

                if (timesExecuted === 0) {
                    missed.push(lineNr);
                }

                tr.className = !executable ? 'not-executable' : timesExecuted > 0 ? 'covered' : 'not-covered';
                table.appendChild(tr);

                var lineNrNode = el('th');

                var anchor = el('a');
                anchor.setAttribute('name', id + '-' + lineNr);
                anchor.appendChild(withText(el('div'), lineNr));

                lineNrNode.appendChild(anchor);
                tr.appendChild(lineNrNode);

                var timesExecutedNode = el('td');
                timesExecutedNode.className = 'times-executed';
                timesExecutedNode.appendChild(withText(el('div'), executable ? (timesExecuted || '!') : '&nbsp;'));
                tr.appendChild(timesExecutedNode);

                var srcNode = el('td');

                var styledSrc = src
                    .reverse().replace(jsStringPattern, '>naps/<$1>"gnirts"=ssalc naps<').reverse()
                    .replace(jsNumberPattern, '<span class="number">$1</span>')
                    .replace(reservedKeywordsPattern, '<span class="keyword">$1</span>');

                srcNode.appendChild(withText(el('pre'), styledSrc));

                tr.appendChild(srcNode);
            }

            maybeAppendMissedLines(id, frag, missed, data);
            frag.appendChild(table);

            td.appendChild(frag.cloneNode(true));
        }

        window.__coverage_toggleSection = function (hash) {
            var d = document;
            var id = hash.indexOf('-') > -1 ? hash.substring(0, hash.indexOf('-')) : hash;

            var srcRow = d.getElementById('__src_' + id);
            if (!srcRow) {
                return;
            }

            var dataEl = d.getElementById('__data_' + id);

            if (dataEl) {
                createSourceTable(id, dataEl);
            }

            var show = srcRow.style.display === 'none';

            if (show) {
                srcRow.style.display = '';
                window.location.hash = "#" + hash;
            } else {
                srcRow.style.display = 'none';
                window.location.hash = '#closed';
            }
        }

        window.onload = function () {
            if (window.location.hash) {
                __coverage_toggleSection(window.location.hash.substr(1));
            }
        };

    })();
</script>
</head>
<body>
    <h1>Total coverage report</h1>
    <table class="stats">
        <thead>
            <tr class="stats-header">
                <th>File</th>
                <th>Statements</th>
                <th>Executed</th>
                <th>Coverage</th>
                <th></th>
            </tr>
            <tr class="stats-header ">
                <td>Total</td>
                <td class="statements">20783</td>
                <td class="executed">731</td>
                <td class="coverage">
                        3&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 3%; background-color: rgb(219, 83, 75);"></span>
                        </div>
                </td>
            </tr>
        </thead>
        <tbody>
            <tr  onclick="__coverage_toggleSection('d64fb1ad32beb7decd63feff9704d4a5'); return false;">
                <td><a href="#">src/<strong>KeyboardPoint.js</strong></a></td>
                <td class="statements">50</td>
                <td class="executed">1</td>
                <td class="coverage">
                        2&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 2%; background-color: rgb(219, 80, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_d64fb1ad32beb7decd63feff9704d4a5" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_d64fb1ad32beb7decd63feff9704d4a5">[[-1,'\/* Copyright (c) 2006-2012 by OpenLayers Contributors (see authors.txt for '],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. '],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * A custom handler that displays a vector point that can be moved using the'],[-1,' * arrow keys of the keyboard. *'],[-1,' * '],[-1,' * @class OpenLayers.Handler.KeyboardPoint'],[-1,' * @requires OpenLayers\/Handler.js'],[-1,' * @requires OpenLayers\/Layer\/Vector.js'],[-1,' * @requires OpenLayers\/StyleMap.js'],[-1,' * @extends OpenLayers.Handler'],[-1,' *\/'],[1,'OpenLayers.Handler.KeyboardPoint = OpenLayers.Class(OpenLayers.Handler, {'],[-1,''],[-1,'\tKEY_EVENTS : [ \&quot;keydown\&quot; ],'],[-1,''],[-1,'\t\/**'],[-1,'\t * @constructor'],[-1,'\t * @param control'],[-1,'\t * @param callbacks'],[-1,'\t * @param options'],[-1,'\t *\/'],[-1,'\tinitialize : function(control, callbacks, options) {'],[0,'\t\tOpenLayers.Handler.prototype.initialize.apply(this, arguments);'],[-1,'\t\t\/\/ cache the bound event listener method so it can be unobserved'],[-1,'\t\t\/\/ later'],[0,'\t\tthis.eventListener = OpenLayers.Function.bindAsEventListener(this.handleKeyEvent, this);'],[-1,'\t},'],[-1,'\t\/**'],[-1,'\t * called on activate.'],[-1,'\t *\/'],[-1,'\tactivate : function() {'],[0,'\t\tif (!OpenLayers.Handler.prototype.activate.apply(this, arguments)) {'],[0,'\t\t\treturn false;'],[-1,'\t\t}'],[0,'\t\tthis.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, {'],[-1,'\t\t\tstyleMap : new OpenLayers.StyleMap({'],[-1,'\t\t\t\texternalGraphic : \'img\/info.png\','],[-1,'\t\t\t\tgraphicHeight : 40,'],[-1,'\t\t\t\tgraphicWidth : 32,'],[-1,'\t\t\t\tgraphicXOffset : -16,'],[-1,'\t\t\t\tgraphicYOffset : -36'],[-1,'\t\t\t})'],[-1,'\t\t});'],[0,'\t\tthis.map.addLayer(this.layer);'],[0,'\t\tthis.observeElement = this.observeElement || document;'],[0,'\t\tfor ( var i = 0, len = this.KEY_EVENTS.length; i &lt; len; i++) {'],[0,'\t\t\tOpenLayers.Event.observe(this.observeElement, this.KEY_EVENTS[i], this.eventListener);'],[-1,'\t\t}'],[0,'\t\tif (!this.point) {'],[0,'\t\t\tthis.createFeature();'],[-1,'\t\t}'],[0,'\t\treturn true;'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * called on deactivate.'],[-1,'\t *\/'],[-1,'\tdeactivate : function() {'],[0,'\t\tif (!OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {'],[0,'\t\t\treturn false;'],[-1,'\t\t}'],[0,'\t\tfor ( var i = 0, len = this.KEY_EVENTS.length; i &lt; len; i++) {'],[0,'\t\t\tOpenLayers.Event.stopObserving(this.observeElement, this.KEY_EVENTS[i], this.eventListener);'],[-1,'\t\t}'],[0,'\t\tthis.map.removeLayer(this.layer);'],[0,'\t\tthis.destroyFeature();'],[0,'\t\treturn true;'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * handles the key events. Moving the selection feature around on the map.'],[-1,'\t * '],[-1,'\t * @param evt'],[-1,'\t *            {OpenLayers.Event} key event'],[-1,'\t *\/'],[-1,'\thandleKeyEvent : function(evt) {'],[0,'\t\tswitch (evt.keyCode) {'],[-1,'\t\tcase OpenLayers.Event.KEY_LEFT:'],[0,'\t\t\tthis.modifyFeature(-3, 0);'],[0,'\t\t\tbreak;'],[-1,'\t\tcase OpenLayers.Event.KEY_RIGHT:'],[0,'\t\t\tthis.modifyFeature(3, 0);'],[0,'\t\t\tbreak;'],[-1,'\t\tcase OpenLayers.Event.KEY_UP:'],[0,'\t\t\tthis.modifyFeature(0, 3);'],[0,'\t\t\tbreak;'],[-1,'\t\tcase OpenLayers.Event.KEY_DOWN:'],[0,'\t\t\tthis.modifyFeature(0, -3);'],[0,'\t\t\tbreak;'],[-1,'\t\tcase OpenLayers.Event.KEY_RETURN:'],[0,'\t\t\tthis.callback(\'done\', [ this.point.geometry.clone() ]);'],[0,'\t\t\tbreak;'],[-1,'\t\tcase OpenLayers.Event.KEY_ESC:'],[0,'\t\t\tthis.callback(\'cancel\');'],[0,'\t\t\tbreak;'],[-1,'\t\t}'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * '],[-1,'\t * @param lon'],[-1,'\t * @param lat'],[-1,'\t *\/'],[-1,'\tmodifyFeature : function(lon, lat) {'],[0,'\t\tif (!this.point) {'],[0,'\t\t\tthis.createFeature();'],[-1,'\t\t}'],[0,'\t\tvar resolution = this.map.getResolution();'],[0,'\t\tthis.point.geometry.x = this.point.geometry.x + lon * resolution;'],[0,'\t\tthis.point.geometry.y = this.point.geometry.y + lat * resolution;'],[0,'\t\tthis.callback(\&quot;modify\&quot;, [ this.point.geometry, this.point, false ]);'],[0,'\t\tthis.point.geometry.clearBounds();'],[0,'\t\tthis.drawFeature();'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * '],[-1,'\t *\/'],[-1,'\tcreateFeature : function() {'],[0,'\t\tvar center = this.map.getCenter();'],[0,'\t\tvar geometry = new OpenLayers.Geometry.Point(center.lon, center.lat);'],[0,'\t\tthis.point = new OpenLayers.Feature.Vector(geometry);'],[0,'\t\tthis.callback(\&quot;create\&quot;, [ this.point.geometry, this.point ]);'],[0,'\t\tthis.point.geometry.clearBounds();'],[0,'\t\tthis.layer.addFeatures([ this.point ], {'],[-1,'\t\t\tsilent : true'],[-1,'\t\t});'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * '],[-1,'\t *\/'],[-1,'\tdestroyFeature : function() {'],[0,'\t\tthis.layer.destroyFeatures([ this.point ]);'],[0,'\t\tthis.point = null;'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * '],[-1,'\t *\/'],[-1,'\tdrawFeature : function() {'],[0,'\t\tthis.layer.drawFeature(this.point);'],[-1,'\t},'],[-1,''],[-1,'\tCLASS_NAME : \'OpenLayers.Handler.KeyboardPoint\''],[-1,'});']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('823b54c06b6bebf05f5c8cf9d59b5859'); return false;">
                <td><a href="#">src/<strong>OverviewMap.js</strong></a></td>
                <td class="statements">50</td>
                <td class="executed">1</td>
                <td class="coverage">
                        2&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 2%; background-color: rgb(219, 80, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_823b54c06b6bebf05f5c8cf9d59b5859" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_823b54c06b6bebf05f5c8cf9d59b5859">[[-1,'\/*'],[-1,' * Copyright (c) 2013, Dienst Landelijk Gebied - Ministerie van Economische Zaken'],[-1,' * '],[-1,' * Gepubliceerd onder de BSD 2-clause licentie, '],[-1,' * zie https:\/\/github.com\/MinELenI\/CBSviewer\/blob\/master\/LICENSE.md voor de volledige licentie. '],[-1,' *\/'],[-1,'\/**'],[-1,' * Overzichtskaart, gebaseerd op OpenLayers.Control.OverviewMap.'],[-1,' * '],[-1,' * @author mprins'],[-1,' * @class {OverviewMap}'],[-1,' * @extends {OpenLayers.Control.OverviewMap}'],[-1,' *\/'],[1,'OverviewMap = OpenLayers.Class(OpenLayers.Control.OverviewMap, {'],[-1,''],[-1,'\t\/** @override *\/'],[-1,'\tmaximized : true,'],[-1,''],[-1,'\t\/** @override *\/'],[-1,'\tmapOptions : {'],[-1,'\t\ttheme : null'],[-1,'\t},'],[-1,''],[-1,'\t\/** @override *\/'],[-1,'\tsize : {'],[-1,'\t\tw : 140,'],[-1,'\t\th : 140'],[-1,'\t},'],[-1,''],[-1,'\t\/** @override *\/'],[-1,'\tautoPan : true,'],[-1,''],[-1,'\t\/**'],[-1,'\t * Constructor: OpenLayers.Control.OverviewMap Create a new overview map'],[-1,'\t * '],[-1,'\t * Parameters: options - {Object} Properties of this object will be set on'],[-1,'\t * the overview map object. Note, to set options on the map object contained'],[-1,'\t * in this control, set &lt;mapOptions&gt; as one of the options properties.'],[-1,'\t * '],[-1,'\t * @override'],[-1,'\t *\/'],[-1,'\tinitialize : function(options) {'],[0,'\t\tthis.layers = [];'],[0,'\t\tthis.handlers = {};'],[0,'\t\tOpenLayers.Control.prototype.initialize.apply(this, [ options ]);'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * Method: draw Render the control in the browser.'],[-1,'\t * '],[-1,'\t * @override'],[-1,'\t *\/'],[-1,'\tdraw : function() {'],[0,'\t\tOpenLayers.Control.prototype.draw.apply(this, arguments);'],[0,'\t\tif (this.layers.length === 0) {'],[0,'\t\t\tif (this.map.baseLayer) {'],[0,'\t\t\t\tvar layer = this.map.baseLayer.clone();'],[0,'\t\t\t\tthis.layers = [ layer ];'],[-1,'\t\t\t} else {'],[0,'\t\t\t\tthis.map.events.register(\&quot;changebaselayer\&quot;, this, this.baseLayerDraw);'],[0,'\t\t\t\treturn this.div;'],[-1,'\t\t\t}'],[-1,'\t\t}'],[-1,''],[-1,'\t\t\/\/ create overview map DOM elements'],[0,'\t\tthis.element = document.createElement(\'div\');'],[0,'\t\tthis.element.className = this.displayClass + \'Element\';'],[0,'\t\tthis.element.style.display = \'none\';'],[-1,''],[0,'\t\tthis.mapDiv = document.createElement(\'div\');'],[0,'\t\tthis.mapDiv.style.width = this.size.w + \'px\';'],[0,'\t\tthis.mapDiv.style.height = this.size.h + \'px\';'],[0,'\t\tthis.mapDiv.style.position = \'relative\';'],[0,'\t\tthis.mapDiv.style.overflow = \'hidden\';'],[0,'\t\tthis.mapDiv.id = OpenLayers.Util.createUniqueID(\'overviewMap\');'],[-1,''],[0,'\t\tthis.extentRectangle = document.createElement(\'div\');'],[0,'\t\tthis.extentRectangle.style.position = \'absolute\';'],[0,'\t\tthis.extentRectangle.style.zIndex = 1000; \/\/ HACK'],[0,'\t\tthis.extentRectangle.className = this.displayClass + \'ExtentRectangle\';'],[-1,''],[0,'\t\tthis.element.appendChild(this.mapDiv);'],[-1,''],[0,'\t\tthis.div.appendChild(this.element);'],[-1,''],[0,'\t\tthis.div.className += \&quot; \&quot; + this.displayClass + \'Container\';'],[-1,''],[-1,'\t\t\/\/ maximize button'],[0,'\t\tvar btn = document.createElement(\&quot;button\&quot;);'],[0,'\t\tbtn.innerHTML = \'+\';'],[-1,'\t\t\/\/ btn.type = \'button\';'],[0,'\t\tbtn.name = \'tonen\';'],[0,'\t\tthis.maximizeDiv = btn;'],[0,'\t\tthis.maximizeDiv.style.display = \'none\';'],[0,'\t\tthis.maximizeDiv.className = this.displayClass + \'MaximizeButton overviewMapButton olButton\';'],[0,'\t\tthis.maximizeDiv.title = OpenLayers.i18n(\'KEY_TOGGLE_OVERVIEW_ON\');'],[0,'\t\tthis.div.appendChild(this.maximizeDiv);'],[-1,''],[-1,'\t\t\/\/ minimize button'],[0,'\t\tbtn = document.createElement(\&quot;button\&quot;);'],[0,'\t\tbtn.innerHTML = \'\u2212\';'],[-1,'\t\t\/\/ btn.type = \'button\';'],[0,'\t\tbtn.name = \'verbergen\';'],[0,'\t\tthis.minimizeDiv = btn;'],[0,'\t\tthis.minimizeDiv.style.display = \'none\';'],[0,'\t\tthis.minimizeDiv.className = this.displayClass + \'MinimizeButton overviewMapButton olButton\';'],[0,'\t\tthis.minimizeDiv.title = OpenLayers.i18n(\'KEY_TOGGLE_OVERVIEW_OFF\');'],[0,'\t\tthis.div.appendChild(this.minimizeDiv);'],[-1,''],[0,'\t\tthis.minimizeControl();'],[-1,''],[0,'\t\tif (this.map.getExtent()) {'],[0,'\t\t\tthis.update();'],[-1,'\t\t}'],[-1,''],[0,'\t\tthis.map.events.on({'],[-1,'\t\t\tbuttonclick : this.onButtonClick,'],[-1,'\t\t\tmoveend : this.update,'],[-1,'\t\t\tscope : this'],[-1,'\t\t});'],[-1,''],[0,'\t\tif (this.maximized) {'],[0,'\t\t\tthis.maximizeControl();'],[-1,'\t\t}'],[0,'\t\treturn this.div;'],[-1,'\t},'],[-1,''],[-1,'\tCLASS_NAME : \'OverviewMap\''],[-1,'});']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('02aca8135ae6d78e6c42829acef8a53a'); return false;">
                <td><a href="#">src/<strong>UpdateLegendControl.js</strong></a></td>
                <td class="statements">34</td>
                <td class="executed">1</td>
                <td class="coverage">
                        2&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 2%; background-color: rgb(219, 80, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_02aca8135ae6d78e6c42829acef8a53a" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_02aca8135ae6d78e6c42829acef8a53a">[[-1,'\/*'],[-1,' * Copyright (c) 2012-2013, Dienst Landelijk Gebied - Ministerie van Economische Zaken'],[-1,' * '],[-1,' * Gepubliceerd onder de BSD 2-clause licentie, '],[-1,' * zie https:\/\/github.com\/MinELenI\/CBSviewer\/blob\/master\/LICENSE.md voor de volledige licentie. '],[-1,' *\/'],[-1,'\/**'],[-1,' * Werkt de legenda bij als de kaart wordt ge-update met een WMS layer.'],[-1,' * '],[-1,' * @author mprins'],[-1,' * @class'],[-1,' * @extends OpenLayers.Control'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Layer\/WMS\/js'],[-1,' * @constructor'],[-1,' *\/'],[1,'UpdateLegendControl = OpenLayers.Class(OpenLayers.Control, {'],[-1,'\t\/**'],[-1,'\t * Activate the control when it is added to a map. Default is true.'],[-1,'\t * '],[-1,'\t * @type{Boolean}'],[-1,'\t *\/'],[-1,'\tautoActivate : true,'],[-1,''],[-1,'\t\/**'],[-1,'\t * Dom element waar de legenda in wordt gevoegd. Moet een container element'],[-1,'\t * zijn zoals P, DIV, SPAN, MAP, LI, ...'],[-1,'\t * '],[-1,'\t * @type {DOMElement}'],[-1,'\t *\/'],[-1,'\telement : null,'],[-1,''],[-1,'\t\/**'],[-1,'\t * destroy this control.'],[-1,'\t *\/'],[-1,'\tdestroy : function() {'],[0,'\t\tthis.deactivate();'],[0,'\t\tOpenLayers.Control.prototype.destroy.apply(this, arguments);'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * activate this control.'],[-1,'\t *\/'],[-1,'\tactivate : function() {'],[0,'\t\tif (OpenLayers.Control.prototype.activate.apply(this, arguments)) {'],[0,'\t\t\tthis.map.events.register(\'addlayer\', this, this.redraw);'],[0,'\t\t\tthis.redraw();'],[0,'\t\t\treturn true;'],[-1,'\t\t} else {'],[0,'\t\t\treturn false;'],[-1,'\t\t}'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * deactivate this control.'],[-1,'\t *\/'],[-1,'\tdeactivate : function() {'],[0,'\t\tif (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {'],[0,'\t\t\tthis.map.events.unregister(\'addlayer\', this, this.redraw);'],[0,'\t\t\tthis.element.innerHTML = \&quot;\&quot;;'],[0,'\t\t\treturn true;'],[-1,'\t\t} else {'],[0,'\t\t\treturn false;'],[-1,'\t\t}'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * draw this control.'],[-1,'\t * '],[-1,'\t * @returns {DOMElement}'],[-1,'\t *\/'],[-1,'\tdraw : function() {'],[0,'\t\tOpenLayers.Control.prototype.draw.apply(this, arguments);'],[0,'\t\tif (!this.element) {'],[0,'\t\t\tthis.div.left = \&quot;\&quot;;'],[0,'\t\t\tthis.div.top = \&quot;\&quot;;'],[0,'\t\t\tthis.element = this.div;'],[-1,'\t\t}'],[0,'\t\treturn this.div;'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * redraw this control.'],[-1,'\t * '],[-1,'\t * @param {OpenLayers.Event}'],[-1,'\t *            evt De addlayer event'],[-1,'\t *\/'],[-1,'\tredraw : function(evt) {'],[-1,'\t\t\/\/ addlayer event - triggered after a layer has been added. The event'],[-1,'\t\t\/\/ object will include a *layer* property that references the added'],[-1,'\t\t\/\/ layer.'],[0,'\t\tif (evt == null) {'],[0,'\t\t\tthis.reset();'],[0,'\t\t\treturn;'],[-1,'\t\t} else {'],[-1,'\t\t\t\/\/ test if layer is WMS'],[0,'\t\t\tif (evt.layer.CLASS_NAME == \&quot;OpenLayers.Layer.WMS\&quot;) {'],[0,'\t\t\t\tvar lyr = evt.layer;'],[0,'\t\t\t\tvar wmsLyrs = (lyr.params.LAYERS).split(\',\');'],[0,'\t\t\t\tvar wmsLyrStyles = (lyr.params.STYLES).split(\',\');'],[0,'\t\t\t\tvar newHtml = \&quot;\&quot;;'],[0,'\t\t\t\tfor (i = 0, l = wmsLyrs.length; i &lt; l; i++) {'],[0,'\t\t\t\t\tvar legendUrl = lyr.url + \'?SERVICE=WMS&amp;REQUEST=GetLegendGraphic\' + \'&amp;FORMAT=image%2Fpng\''],[-1,'\t\t\t\t\t\t\t+ \'&amp;WIDTH=36&amp;HEIGHT=36\' + \'&amp;LAYER=\' + wmsLyrs[i] + \'&amp;STYLE=\' + wmsLyrStyles[i]'],[-1,'\t\t\t\t\t\t\t+ \'&amp;VERSION=1.1.1&amp;EXCEPTIONS=\' + lyr.params.EXCEPTIONS;'],[0,'\t\t\t\t\tnewHtml += \'&lt;img src=\&quot;\' + legendUrl + \'\&quot; alt=\&quot;Legenda voor kaartlaag \' + lyr.name + \' (\''],[-1,'\t\t\t\t\t\t\t+ wmsLyrs[i] + \')\&quot;\/&gt;\';'],[-1,'\t\t\t\t}'],[-1,''],[0,'\t\t\t\tif (newHtml != this.element.innerHTML) {'],[0,'\t\t\t\t\tthis.element.innerHTML = newHtml;'],[-1,'\t\t\t\t}'],[-1,'\t\t\t}'],[-1,'\t\t}'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * reset this control.'],[-1,'\t * '],[-1,'\t * @param {OpenLayers.Event}'],[-1,'\t *            evt De addlayer event'],[-1,'\t *\/'],[-1,'\treset : function(evt) {'],[0,'\t\tif (this.emptyString !== null) {'],[0,'\t\t\tthis.element.innerHTML = this.emptyString;'],[-1,'\t\t}'],[-1,'\t},'],[-1,'        '],[-1,'        CLASS_NAME : \'UpdateLegendControl\''],[-1,'});']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('4994d5a22d9650efe0ad91db41ce1f97'); return false;">
                <td><a href="#">src/<strong>ClickDrawControl.js</strong></a></td>
                <td class="statements">31</td>
                <td class="executed">1</td>
                <td class="coverage">
                        3&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 3%; background-color: rgb(219, 83, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_4994d5a22d9650efe0ad91db41ce1f97" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_4994d5a22d9650efe0ad91db41ce1f97">[[-1,'\/*'],[-1,' * Copyright (c) 2012, Dienst Landelijk Gebied - Ministerie van Economische Zaken'],[-1,' * '],[-1,' * Gepubliceerd onder de BSD 2-clause licentie, '],[-1,' * zie https:\/\/github.com\/MinELenI\/CBSviewer\/blob\/master\/LICENSE.md voor de volledige licentie. '],[-1,' *\/'],[-1,'\/**'],[-1,' * Een control die een ikoontje tekent op de plaats waar geklikt is.'],[-1,' * '],[-1,' * @author mprins'],[-1,' * @class {ClickDrawControl}'],[-1,' * @extends {OpenLayers.Control}'],[-1,' *\/'],[1,'ClickDrawControl = OpenLayers.Class(OpenLayers.Control, {'],[-1,'\t\/** @override *\/'],[-1,'\tautoActivate : true,'],[-1,''],[-1,'\t\/** @override *\/'],[-1,'\tdefaultHandlerOptions : {'],[-1,'\t\t\'single\' : true,'],[-1,'\t\t\'double\' : false,'],[-1,'\t\t\'pixelTolerance\' : 0,'],[-1,'\t\t\'stopSingle\' : false,'],[-1,'\t\t\'stopDouble\' : false'],[-1,'\t},'],[-1,''],[-1,'\t\/** @constructor *\/'],[-1,'\tinitialize : function(options) {'],[0,'\t\tthis.handlerOptions = OpenLayers.Util.extend({}, this.defaultHandlerOptions);'],[0,'\t\tOpenLayers.Control.prototype.initialize.apply(this, arguments);'],[0,'\t\tthis.handler = new OpenLayers.Handler.Click(this, {'],[-1,'\t\t\t\'click\' : this.trigger'],[-1,'\t\t}, this.handlerOptions);'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * Klik event handler.'],[-1,'\t * '],[-1,'\t * @param e'],[-1,'\t *            {OpenLayers.Event} een muisklik event'],[-1,'\t *\/'],[-1,'\ttrigger : function(e) {'],[0,'\t\tif (!this.layer) {'],[0,'\t\t\tthis.makeLayer();'],[-1,'\t\t}'],[0,'\t\tthis.drawOrMove(e);'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * zorgt voor een vector layer om een marker in te tekenen.'],[-1,'\t * '],[-1,'\t * @private'],[-1,'\t *\/'],[-1,'\tmakeLayer : function() {'],[0,'\t\tthis.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, {'],[-1,'\t\t\tstyleMap : new OpenLayers.StyleMap({'],[-1,'\t\t\t\texternalGraphic : \'img\/info.png\','],[-1,'\t\t\t\tgraphicHeight : 40,'],[-1,'\t\t\t\tgraphicWidth : 32,'],[-1,'\t\t\t\tgraphicXOffset : -16,'],[-1,'\t\t\t\tgraphicYOffset : -36'],[-1,'\t\t\t})'],[-1,'\t\t});'],[0,'\t\tthis.map.addLayer(this.layer);'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * teken een ikoontje.'],[-1,'\t * '],[-1,'\t * @param e'],[-1,'\t *            {OpenLayers.Event}'],[-1,'\t * @private'],[-1,'\t *\/'],[-1,'\tdrawOrMove : function(e) {'],[-1,'\t\t\/\/ verplaats naar bovenste'],[0,'\t\tthis.map.setLayerIndex(this.layer, this.map.getNumLayers()-1);'],[0,'\t\tvar lonlat = this.map.getLonLatFromPixel(e.xy);'],[0,'\t\tif (!this.point) {'],[0,'\t\t\tvar geometry = new OpenLayers.Geometry.Point(lonlat.lon, lonlat.lat);'],[0,'\t\t\tthis.point = new OpenLayers.Feature.Vector(geometry);'],[0,'\t\t\tthis.point.geometry.clearBounds();'],[0,'\t\t\tthis.layer.addFeatures([ this.point ], {'],[-1,'\t\t\t\tsilent : true'],[-1,'\t\t\t});'],[-1,'\t\t} else {'],[0,'\t\t\tthis.point.geometry.x = lonlat.lon;'],[0,'\t\t\tthis.point.geometry.y = lonlat.lat;'],[0,'\t\t\tthis.point.geometry.clearBounds();'],[-1,'\t\t}'],[0,'\t\tthis.layer.drawFeature(this.point);'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * activate deze control.'],[-1,'\t * '],[-1,'\t * @returns {Boolean}'],[-1,'\t * @override'],[-1,'\t *\/'],[-1,'\tactivate : function() {'],[0,'\t\tif (!OpenLayers.Control.prototype.activate.apply(this, arguments)) {'],[0,'\t\t\treturn false;'],[-1,'\t\t}'],[0,'\t\treturn true;'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * deactivate deze control, zorgt oa. voor opruimen van resources.'],[-1,'\t * '],[-1,'\t * @returns {Boolean}'],[-1,'\t * @override'],[-1,'\t *\/'],[-1,'\tdeactivate : function() {'],[0,'\t\tif (!OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {'],[0,'\t\t\treturn false;'],[-1,'\t\t}'],[0,'\t\tif (this.layer) {'],[0,'\t\t\tthis.map.removeLayer(this.layer);'],[0,'\t\t\tthis.layer.destroyFeatures([ this.point ]);'],[0,'\t\t\tthis.point = null;'],[0,'\t\t\tthis.layer = null;'],[-1,'\t\t}'],[0,'\t\treturn true;'],[-1,'\t},'],[-1,'        '],[-1,'\tCLASS_NAME : \'ClickDrawControl\''],[-1,'});']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('821ce49910e815e2317b58a031865edd'); return false;">
                <td><a href="#">src/<strong>KeyboardClick.js</strong></a></td>
                <td class="statements">32</td>
                <td class="executed">1</td>
                <td class="coverage">
                        3&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 3%; background-color: rgb(219, 83, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_821ce49910e815e2317b58a031865edd" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_821ce49910e815e2317b58a031865edd">[[-1,'\/* Copyright (c) 2006-2012 by OpenLayers Contributors (see authors.txt for '],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. '],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * A custom control that (a) adds a vector point that can be moved using the'],[-1,' * arrow keys of the keyboard, and (b) displays a browser alert window when the'],[-1,' * RETURN key is pressed. The control can be activated\/deactivated using the \&quot;i\&quot;'],[-1,' * key. When activated the control deactivates any KeyboardDefaults control in'],[-1,' * the map so that the map is not moved when the arrow keys are pressed.'],[-1,' * '],[-1,' * This control relies on the OpenLayers.Handler.KeyboardPoint custom handler.'],[-1,' * '],[-1,' * @class OpenLayers.Control.KeyboardClick'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires KeyboardPoint.js'],[-1,' * @extends OpenLayers.Control'],[-1,' *\/'],[1,'OpenLayers.Control.KeyboardClick = OpenLayers.Class(OpenLayers.Control, {'],[-1,'\t\/** @constructor *\/'],[-1,'\tinitialize : function(options) {'],[0,'\t\tOpenLayers.Control.prototype.initialize.apply(this, [ options ]);'],[0,'\t\tvar observeElement = this.observeElement || document;'],[0,'\t\tthis.handler = new OpenLayers.Handler.KeyboardPoint(this, {'],[-1,'\t\t\tdone : this.onClick,'],[-1,'\t\t\tcancel : this.deactivate'],[-1,'\t\t}, {'],[-1,'\t\t\tobserveElement : observeElement'],[-1,'\t\t});'],[0,'\t\tOpenLayers.Event.observe(observeElement, \&quot;keydown\&quot;, OpenLayers.Function.bindAsEventListener(function(evt) {'],[0,'\t\t\tif (evt.keyCode == 73) { \/\/ \&quot;i\&quot;'],[0,'\t\t\t\tif (this.active) {'],[0,'\t\t\t\t\tthis.deactivate();'],[-1,'\t\t\t\t} else {'],[0,'\t\t\t\t\tthis.activate();'],[-1,'\t\t\t\t}'],[-1,'\t\t\t}'],[-1,'\t\t}, this));'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * Event handler voor click event. Deze handler stuurt de WMSGetFeatureInfo'],[-1,'\t * control aan om een GetFeatureInfo request uit te voeren.'],[-1,'\t * '],[-1,'\t * @param {Openlayers.Geometry}'],[-1,'\t *            geometry met real life co\u00F6rdinaten'],[-1,'\t * '],[-1,'\t *\/'],[-1,'\tonClick : function(geometry) {'],[0,'\t\tvar featureInfoCtl = this.map.getControlsByClass(\'WMSGetFeatureInfo\')[0];'],[0,'\t\tif (featureInfoCtl) {'],[0,'\t\t\tvar lonlat = new OpenLayers.LonLat([ geometry.x, geometry.y ]);'],[0,'\t\t\tvar pixel = this.map.getPixelFromLonLat(lonlat);'],[0,'\t\t\tfeatureInfoCtl.getInfoForClick({'],[-1,'\t\t\t\t\'xy\' : pixel,'],[-1,'\t\t\t\t\'lonlat\' : lonlat'],[-1,'\t\t\t});'],[-1,'\t\t}'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * Activeert deze control en zet de default keyboard handler uit (mits'],[-1,'\t * aanwezig).'],[-1,'\t * '],[-1,'\t * @returns {Boolean}'],[-1,'\t *\/'],[-1,'\tactivate : function() {'],[0,'\t\tif (!OpenLayers.Control.prototype.activate.apply(this, arguments)) {'],[0,'\t\t\treturn false;'],[-1,'\t\t}'],[0,'\t\tvar keyboardDefaults = this.map.getControlsByClass(\'OpenLayers.Control.KeyboardDefaults\')[0];'],[0,'\t\tif (keyboardDefaults) {'],[0,'\t\t\tkeyboardDefaults.deactivate();'],[-1,'\t\t}'],[0,'\t\tvar clickDraw = this.map.getControlsByClass(\'ClickDrawControl\')[0];'],[0,'\t\tif (clickDraw) {'],[0,'\t\t\tclickDraw.deactivate();'],[-1,'\t\t}'],[0,'\t\treturn true;'],[-1,'\t},'],[-1,''],[-1,'\t\/**'],[-1,'\t * Deactiveert deze control en zet de default keyboard handler aan (mits'],[-1,'\t * aanwezig).'],[-1,'\t * '],[-1,'\t * @returns {Boolean}'],[-1,'\t *\/'],[-1,'\tdeactivate : function() {'],[0,'\t\tif (!OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {'],[0,'\t\t\treturn false;'],[-1,'\t\t}'],[0,'\t\tvar keyboardDefaults = this.map.getControlsByClass(\'OpenLayers.Control.KeyboardDefaults\')[0];'],[0,'\t\tif (keyboardDefaults) {'],[0,'\t\t\tkeyboardDefaults.activate();'],[-1,'\t\t}'],[0,'\t\tvar clickDraw = this.map.getControlsByClass(\'ClickDrawControl\')[0];'],[0,'\t\tif (clickDraw) {'],[0,'\t\t\tclickDraw.activate();'],[-1,'\t\t}'],[0,'\t\treturn true;'],[-1,'\t},'],[-1,'\t'],[-1,'\tCLASS_NAME: \'OpenLayers.Control.KeyboardClick\''],[-1,'});']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('f49781399148d271fe3b87ada18205e2'); return false;">
                <td><a href="#">src\test\js\lib/<strong>OpenLayers-test.js</strong></a></td>
                <td class="statements">20416</td>
                <td class="executed">711</td>
                <td class="coverage">
                        3&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 3%; background-color: rgb(219, 83, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_f49781399148d271fe3b87ada18205e2" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_f49781399148d271fe3b87ada18205e2">[[-1,'\/*'],[-1,''],[-1,'  OpenLayers.js -- OpenLayers Map Viewer Library'],[-1,''],[-1,'  Copyright (c) 2006-2013 by OpenLayers Contributors'],[-1,'  Published under the 2-clause BSD license.'],[-1,'  See http:\/\/openlayers.org\/dev\/license.txt for the full text of the license, and http:\/\/openlayers.org\/dev\/authors.txt for full list of contributors.'],[-1,''],[-1,'  Includes compressed code under the following licenses:'],[-1,''],[-1,'  (For uncompressed versions of the code used, please see the'],[-1,'  OpenLayers Github repository: &lt;https:\/\/github.com\/openlayers\/openlayers&gt;)'],[-1,''],[-1,'*\/'],[-1,''],[-1,'\/**'],[-1,' * Contains XMLHttpRequest.js &lt;http:\/\/code.google.com\/p\/xmlhttprequest\/&gt;'],[-1,' * Copyright 2007 Sergey Ilinsky (http:\/\/www.ilinsky.com)'],[-1,' *'],[-1,' * Licensed under the Apache License, Version 2.0 (the \&quot;License\&quot;);'],[-1,' * you may not use this file except in compliance with the License.'],[-1,' * You may obtain a copy of the License at'],[-1,' * http:\/\/www.apache.org\/licenses\/LICENSE-2.0'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * OpenLayers.Util.pagePosition is based on Yahoo\'s getXY method, which is'],[-1,' * Copyright (c) 2006, Yahoo! Inc.'],[-1,' * All rights reserved.'],[-1,' * '],[-1,' * Redistribution and use of this software in source and binary forms, with or'],[-1,' * without modification, are permitted provided that the following conditions'],[-1,' * are met:'],[-1,' * '],[-1,' * * Redistributions of source code must retain the above copyright notice,'],[-1,' *   this list of conditions and the following disclaimer.'],[-1,' * '],[-1,' * * Redistributions in binary form must reproduce the above copyright notice,'],[-1,' *   this list of conditions and the following disclaimer in the documentation'],[-1,' *   and\/or other materials provided with the distribution.'],[-1,' * '],[-1,' * * Neither the name of Yahoo! Inc. nor the names of its contributors may be'],[-1,' *   used to endorse or promote products derived from this software without'],[-1,' *   specific prior written permission of Yahoo! Inc.'],[-1,' * '],[-1,' * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \&quot;AS IS\&quot;'],[-1,' * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE'],[-1,' * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE'],[-1,' * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE'],[-1,' * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR'],[-1,' * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF'],[-1,' * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS'],[-1,' * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN'],[-1,' * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)'],[-1,' * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE '],[-1,' * POSSIBILITY OF SUCH DAMAGE.'],[-1,' *\/'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/SingleFile.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[1,'var OpenLayers = {'],[-1,'    \/**'],[-1,'     * Constant: VERSION_NUMBER'],[-1,'     *\/'],[-1,'    VERSION_NUMBER: \&quot;Release 2.13 dev\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: singleFile'],[-1,'     * TODO: remove this in 3.0 when we stop supporting build profiles that'],[-1,'     * include OpenLayers.js'],[-1,'     *\/'],[-1,'    singleFile: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Method: _getScriptLocation'],[-1,'     * Return the path to this script. This is also implemented in'],[-1,'     * OpenLayers.js'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} Path to this script'],[-1,'     *\/'],[-1,'    _getScriptLocation: (function() {'],[1,'        var r = new RegExp(\&quot;(^|(.*?\\\\\/))(OpenLayers[^\\\\\/]*?\\\\.js)(\\\\?|$)\&quot;),'],[-1,'            s = document.getElementsByTagName(\'script\'),'],[-1,'            src, m, l = \&quot;\&quot;;'],[1,'        for(var i=0, len=s.length; i&lt;len; i++) {'],[5,'            src = s[i].getAttribute(\'src\');'],[5,'            if(src) {'],[3,'                m = src.match(r);'],[3,'                if(m) {'],[1,'                    l = m[1];'],[1,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[1,'        return (function() { return l; });'],[-1,'    })(),'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: ImgPath'],[-1,'     * {String} Set this to the path where control images are stored, a path  '],[-1,'     * given here must end with a slash. If set to \'\' (which is the default) '],[-1,'     * OpenLayers will use its script location + \&quot;img\/\&quot;.'],[-1,'     * '],[-1,'     * You will need to set this property when you have a singlefile build of '],[-1,'     * OpenLayers that either is not named \&quot;OpenLayers.js\&quot; or if you move'],[-1,'     * the file in a way such that the image directory cannot be derived from '],[-1,'     * the script location.'],[-1,'     * '],[-1,'     * If your custom OpenLayers build is named \&quot;my-custom-ol.js\&quot; and the images'],[-1,'     * of OpenLayers are in a folder \&quot;\/resources\/external\/images\/ol\&quot; a correct'],[-1,'     * way of including OpenLayers in your HTML would be:'],[-1,'     * '],[-1,'     * (code)'],[-1,'     *   &lt;script src=\&quot;\/path\/to\/my-custom-ol.js\&quot; type=\&quot;text\/javascript\&quot;&gt;&lt;\/script&gt;'],[-1,'     *   &lt;script type=\&quot;text\/javascript\&quot;&gt;'],[-1,'     *      \/\/ tell OpenLayers where the control images are'],[-1,'     *      \/\/ remember the trailing slash'],[-1,'     *      OpenLayers.ImgPath = \&quot;\/resources\/external\/images\/ol\/\&quot;;'],[-1,'     *   &lt;\/script&gt;'],[-1,'     * (end code)'],[-1,'     * '],[-1,'     * Please remember that when your OpenLayers script is not named '],[-1,'     * \&quot;OpenLayers.js\&quot; you will have to make sure that the default theme is '],[-1,'     * loaded into the page by including an appropriate &lt;link&gt;-tag, '],[-1,'     * e.g.:'],[-1,'     * '],[-1,'     * (code)'],[-1,'     *   &lt;link rel=\&quot;stylesheet\&quot; href=\&quot;\/path\/to\/default\/style.css\&quot;  type=\&quot;text\/css\&quot;&gt;'],[-1,'     * (end code)'],[-1,'     *\/'],[-1,'    ImgPath : \'\''],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/BaseTypes\/Class.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/SingleFile.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Constructor: OpenLayers.Class'],[-1,' * Base class used to construct all other classes. Includes support for '],[-1,' *     multiple inheritance. '],[-1,' *     '],[-1,' * This constructor is new in OpenLayers 2.5.  At OpenLayers 3.0, the old '],[-1,' *     syntax for creating classes and dealing with inheritance '],[-1,' *     will be removed.'],[-1,' * '],[-1,' * To create a new OpenLayers-style class, use the following syntax:'],[-1,' * (code)'],[-1,' *     var MyClass = OpenLayers.Class(prototype);'],[-1,' * (end)'],[-1,' *'],[-1,' * To create a new OpenLayers-style class with multiple inheritance, use the'],[-1,' *     following syntax:'],[-1,' * (code)'],[-1,' *     var MyClass = OpenLayers.Class(Class1, Class2, prototype);'],[-1,' * (end)'],[-1,' * '],[-1,' * Note that instanceof reflection will only reveal Class1 as superclass.'],[-1,' *'],[-1,' *\/'],[1,'OpenLayers.Class = function() {'],[257,'    var len = arguments.length;'],[257,'    var P = arguments[0];'],[257,'    var F = arguments[len-1];'],[-1,''],[257,'    var C = typeof F.initialize == \&quot;function\&quot; ?'],[-1,'        F.initialize :'],[0,'        function(){ P.prototype.initialize.apply(this, arguments); };'],[-1,''],[257,'    if (len &gt; 1) {'],[218,'        var newArgs = [C, P].concat('],[-1,'                Array.prototype.slice.call(arguments).slice(1, len-1), F);'],[218,'        OpenLayers.inherit.apply(null, newArgs);'],[-1,'    } else {'],[39,'        C.prototype = F;'],[-1,'    }'],[257,'    return C;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: OpenLayers.inherit'],[-1,' *'],[-1,' * Parameters:'],[-1,' * C - {Object} the class that inherits'],[-1,' * P - {Object} the superclass to inherit from'],[-1,' *'],[-1,' * In addition to the mandatory C and P parameters, an arbitrary number of'],[-1,' * objects can be passed, which will extend C.'],[-1,' *\/'],[1,'OpenLayers.inherit = function(C, P) {'],[218,'   var F = function() {};'],[218,'   F.prototype = P.prototype;'],[218,'   C.prototype = new F;'],[218,'   var i, l, o;'],[218,'   for(i=2, l=arguments.length; i&lt;l; i++) {'],[224,'       o = arguments[i];'],[224,'       if(typeof o === \&quot;function\&quot;) {'],[6,'           o = o.prototype;'],[-1,'       }'],[224,'       OpenLayers.Util.extend(C.prototype, o);'],[-1,'   }'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * APIFunction: extend'],[-1,' * Copy all properties of a source object to a destination object.  Modifies'],[-1,' *     the passed in destination object.  Any properties on the source object'],[-1,' *     that are set to undefined will not be (re)set on the destination object.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * destination - {Object} The object that will be modified'],[-1,' * source - {Object} The object with properties to be set on the destination'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Object} The destination object.'],[-1,' *\/'],[1,'OpenLayers.Util = OpenLayers.Util || {};'],[1,'OpenLayers.Util.extend = function(destination, source) {'],[233,'    destination = destination || {};'],[233,'    if (source) {'],[227,'        for (var property in source) {'],[3145,'            var value = source[property];'],[3145,'            if (value !== undefined) {'],[3145,'                destination[property] = value;'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/**'],[-1,'         * IE doesn\'t include the toString property when iterating over an object\'s'],[-1,'         * properties with the for(property in object) syntax.  Explicitly check if'],[-1,'         * the source has its own toString property.'],[-1,'         *\/'],[-1,''],[-1,'        \/*'],[-1,'         * FF\/Windows &lt; 2.0.0.13 reports \&quot;Illegal operation on WrappedNative'],[-1,'         * prototype object\&quot; when calling hawOwnProperty if the source object'],[-1,'         * is an instance of window.Event.'],[-1,'         *\/'],[-1,''],[227,'        var sourceIsEvt = typeof window.Event == \&quot;function\&quot;'],[-1,'                          &amp;&amp; source instanceof window.Event;'],[-1,''],[227,'        if (!sourceIsEvt'],[-1,'           &amp;&amp; source.hasOwnProperty &amp;&amp; source.hasOwnProperty(\&quot;toString\&quot;)) {'],[0,'            destination.toString = source.toString;'],[-1,'        }'],[-1,'    }'],[233,'    return destination;'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/BaseTypes.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/SingleFile.js'],[-1,' *\/'],[-1,''],[-1,'\/** '],[-1,' * Header: OpenLayers Base Types'],[-1,' * OpenLayers custom string, number and function functions are described here.'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.String'],[-1,' * Contains convenience functions for string manipulation.'],[-1,' *\/'],[1,'OpenLayers.String = {'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: startsWith'],[-1,'     * Test whether a string starts with another string. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * str - {String} The string to test.'],[-1,'     * sub - {String} The substring to look for.'],[-1,'     *  '],[-1,'     * Returns:'],[-1,'     * {Boolean} The first string starts with the second.'],[-1,'     *\/'],[-1,'    startsWith: function(str, sub) {'],[0,'        return (str.indexOf(sub) == 0);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: contains'],[-1,'     * Test whether a string contains another string.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * str - {String} The string to test.'],[-1,'     * sub - {String} The substring to look for.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The first string contains the second.'],[-1,'     *\/'],[-1,'    contains: function(str, sub) {'],[0,'        return (str.indexOf(sub) != -1);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: trim'],[-1,'     * Removes leading and trailing whitespace characters from a string.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * str - {String} The (potentially) space padded string.  This string is not'],[-1,'     *     modified.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} A trimmed version of the string with all leading and '],[-1,'     *     trailing spaces removed.'],[-1,'     *\/'],[-1,'    trim: function(str) {'],[0,'        return str.replace(\/^\\s\\s*\/, \'\').replace(\/\\s\\s*$\/, \'\');'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: camelize'],[-1,'     * Camel-case a hyphenated string. '],[-1,'     *     Ex. \&quot;chicken-head\&quot; becomes \&quot;chickenHead\&quot;, and'],[-1,'     *     \&quot;-chicken-head\&quot; becomes \&quot;ChickenHead\&quot;.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * str - {String} The string to be camelized.  The original is not modified.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} The string, camelized'],[-1,'     *\/'],[-1,'    camelize: function(str) {'],[0,'        var oStringList = str.split(\'-\');'],[0,'        var camelizedString = oStringList[0];'],[0,'        for (var i=1, len=oStringList.length; i&lt;len; i++) {'],[0,'            var s = oStringList[i];'],[0,'            camelizedString += s.charAt(0).toUpperCase() + s.substring(1);'],[-1,'        }'],[0,'        return camelizedString;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: format'],[-1,'     * Given a string with tokens in the form ${token}, return a string'],[-1,'     *     with tokens replaced with properties from the given context'],[-1,'     *     object.  Represent a literal \&quot;${\&quot; by doubling it, e.g. \&quot;${${\&quot;.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * template - {String} A string with tokens to be replaced.  A template'],[-1,'     *     has the form \&quot;literal ${token}\&quot; where the token will be replaced'],[-1,'     *     by the value of context[\&quot;token\&quot;].'],[-1,'     * context - {Object} An optional object with properties corresponding'],[-1,'     *     to the tokens in the format string.  If no context is sent, the'],[-1,'     *     window object will be used.'],[-1,'     * args - {Array} Optional arguments to pass to any functions found in'],[-1,'     *     the context.  If a context property is a function, the token'],[-1,'     *     will be replaced by the return from the function called with'],[-1,'     *     these arguments.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string with tokens replaced from the context object.'],[-1,'     *\/'],[-1,'    format: function(template, context, args) {'],[0,'        if(!context) {'],[0,'            context = window;'],[-1,'        }'],[-1,''],[-1,'        \/\/ Example matching: '],[-1,'        \/\/ str   = ${foo.bar}'],[-1,'        \/\/ match = foo.bar'],[0,'        var replacer = function(str, match) {'],[0,'            var replacement;'],[-1,''],[-1,'            \/\/ Loop through all subs. Example: ${a.b.c}'],[-1,'            \/\/ 0 -&gt; replacement = context[a];'],[-1,'            \/\/ 1 -&gt; replacement = context[a][b];'],[-1,'            \/\/ 2 -&gt; replacement = context[a][b][c];'],[0,'            var subs = match.split(\/\\.+\/);'],[0,'            for (var i=0; i&lt; subs.length; i++) {'],[0,'                if (i == 0) {'],[0,'                    replacement = context;'],[-1,'                }'],[-1,''],[0,'                replacement = replacement[subs[i]];'],[-1,'            }'],[-1,''],[0,'            if(typeof replacement == \&quot;function\&quot;) {'],[0,'                replacement = args ?'],[-1,'                    replacement.apply(null, args) :'],[-1,'                    replacement();'],[-1,'            }'],[-1,''],[-1,'            \/\/ If replacement is undefined, return the string \'undefined\'.'],[-1,'            \/\/ This is a workaround for a bugs in browsers not properly '],[-1,'            \/\/ dealing with non-participating groups in regular expressions:'],[-1,'            \/\/ http:\/\/blog.stevenlevithan.com\/archives\/npcg-javascript'],[0,'            if (typeof replacement == \'undefined\') {'],[0,'                return \'undefined\';'],[-1,'            } else {'],[0,'                return replacement; '],[-1,'            }'],[-1,'        };'],[-1,''],[0,'        return template.replace(OpenLayers.String.tokenRegEx, replacer);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: tokenRegEx'],[-1,'     * Used to find tokens in a string.'],[-1,'     * Examples: ${a}, ${a.b.c}, ${a-b}, ${5}'],[-1,'     *\/'],[-1,'    tokenRegEx:  \/\\$\\{([\\w.]+?)\\}\/g,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: numberRegEx'],[-1,'     * Used to test strings as numbers.'],[-1,'     *\/'],[-1,'    numberRegEx: \/^([+-]?)(?=\\d|\\.\\d)\\d*(\\.\\d*)?([Ee]([+-]?\\d+))?$\/,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: isNumeric'],[-1,'     * Determine whether a string contains only a numeric value.'],[-1,'     *'],[-1,'     * Examples:'],[-1,'     * (code)'],[-1,'     * OpenLayers.String.isNumeric(\&quot;6.02e23\&quot;) \/\/ true'],[-1,'     * OpenLayers.String.isNumeric(\&quot;12 dozen\&quot;) \/\/ false'],[-1,'     * OpenLayers.String.isNumeric(\&quot;4\&quot;) \/\/ true'],[-1,'     * OpenLayers.String.isNumeric(\&quot; 4 \&quot;) \/\/ false'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} String contains only a number.'],[-1,'     *\/'],[-1,'    isNumeric: function(value) {'],[0,'        return OpenLayers.String.numberRegEx.test(value);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: numericIf'],[-1,'     * Converts a string that appears to be a numeric value into a number.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * value - {String}'],[-1,'     * trimWhitespace - {Boolean}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number|String} a Number if the passed value is a number, a String'],[-1,'     *     otherwise. '],[-1,'     *\/'],[-1,'    numericIf: function(value, trimWhitespace) {'],[0,'        var originalValue = value;'],[0,'        if (trimWhitespace === true &amp;&amp; value != null &amp;&amp; value.replace) {'],[0,'            value = value.replace(\/^\\s*|\\s*$\/g, \&quot;\&quot;);'],[-1,'        }'],[0,'        return OpenLayers.String.isNumeric(value) ? parseFloat(value) : originalValue;'],[-1,'    }'],[-1,''],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Number'],[-1,' * Contains convenience functions for manipulating numbers.'],[-1,' *\/'],[1,'OpenLayers.Number = {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: decimalSeparator'],[-1,'     * Decimal separator to use when formatting numbers.'],[-1,'     *\/'],[-1,'    decimalSeparator: \&quot;.\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: thousandsSeparator'],[-1,'     * Thousands separator to use when formatting numbers.'],[-1,'     *\/'],[-1,'    thousandsSeparator: \&quot;,\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: limitSigDigs'],[-1,'     * Limit the number of significant digits on a float.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * num - {Float}'],[-1,'     * sig - {Integer}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The number, rounded to the specified number of significant'],[-1,'     *     digits.'],[-1,'     *\/'],[-1,'    limitSigDigs: function(num, sig) {'],[0,'        var fig = 0;'],[0,'        if (sig &gt; 0) {'],[0,'            fig = parseFloat(num.toPrecision(sig));'],[-1,'        }'],[0,'        return fig;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: format'],[-1,'     * Formats a number for output.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * num  - {Float}'],[-1,'     * dec  - {Integer} Number of decimal places to round to.'],[-1,'     *        Defaults to 0. Set to null to leave decimal places unchanged.'],[-1,'     * tsep - {String} Thousands separator.'],[-1,'     *        Default is \&quot;,\&quot;.'],[-1,'     * dsep - {String} Decimal separator.'],[-1,'     *        Default is \&quot;.\&quot;.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string representing the formatted number.'],[-1,'     *\/'],[-1,'    format: function(num, dec, tsep, dsep) {'],[0,'        dec = (typeof dec != \&quot;undefined\&quot;) ? dec : 0; '],[0,'        tsep = (typeof tsep != \&quot;undefined\&quot;) ? tsep :'],[-1,'            OpenLayers.Number.thousandsSeparator; '],[0,'        dsep = (typeof dsep != \&quot;undefined\&quot;) ? dsep :'],[-1,'            OpenLayers.Number.decimalSeparator;'],[-1,''],[0,'        if (dec != null) {'],[0,'            num = parseFloat(num.toFixed(dec));'],[-1,'        }'],[-1,''],[0,'        var parts = num.toString().split(\&quot;.\&quot;);'],[0,'        if (parts.length == 1 &amp;&amp; dec == null) {'],[-1,'            \/\/ integer where we do not want to touch the decimals'],[0,'            dec = 0;'],[-1,'        }'],[-1,'        '],[0,'        var integer = parts[0];'],[0,'        if (tsep) {'],[0,'            var thousands = \/(-?[0-9]+)([0-9]{3})\/; '],[0,'            while(thousands.test(integer)) { '],[0,'                integer = integer.replace(thousands, \&quot;$1\&quot; + tsep + \&quot;$2\&quot;); '],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        var str;'],[0,'        if (dec == 0) {'],[0,'            str = integer;'],[-1,'        } else {'],[0,'            var rem = parts.length &gt; 1 ? parts[1] : \&quot;0\&quot;;'],[0,'            if (dec != null) {'],[0,'                rem = rem + new Array(dec - rem.length + 1).join(\&quot;0\&quot;);'],[-1,'            }'],[0,'            str = integer + dsep + rem;'],[-1,'        }'],[0,'        return str;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: zeroPad'],[-1,'     * Create a zero padded string optionally with a radix for casting numbers.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * num - {Number} The number to be zero padded.'],[-1,'     * len - {Number} The length of the string to be returned.'],[-1,'     * radix - {Number} An integer between 2 and 36 specifying the base to use'],[-1,'     *     for representing numeric values.'],[-1,'     *\/'],[-1,'    zeroPad: function(num, len, radix) {'],[0,'        var str = num.toString(radix || 10);'],[0,'        while (str.length &lt; len) {'],[0,'            str = \&quot;0\&quot; + str;'],[-1,'        }'],[0,'        return str;'],[-1,'    }    '],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Function'],[-1,' * Contains convenience functions for function manipulation.'],[-1,' *\/'],[1,'OpenLayers.Function = {'],[-1,'    \/**'],[-1,'     * APIFunction: bind'],[-1,'     * Bind a function to an object.  Method to easily create closures with'],[-1,'     *     \'this\' altered.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * func - {Function} Input function.'],[-1,'     * object - {Object} The object to bind to the input function (as this).'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Function} A closure with \'this\' set to the passed in object.'],[-1,'     *\/'],[-1,'    bind: function(func, object) {'],[-1,'        \/\/ create a reference to all arguments past the second one'],[1,'        var args = Array.prototype.slice.apply(arguments, [2]);'],[1,'        return function() {'],[-1,'            \/\/ Push on any additional arguments from the actual function call.'],[-1,'            \/\/ These will come after those sent to the bind call.'],[0,'            var newArgs = args.concat('],[-1,'                Array.prototype.slice.apply(arguments, [0])'],[-1,'            );'],[0,'            return func.apply(object, newArgs);'],[-1,'        };'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: bindAsEventListener'],[-1,'     * Bind a function to an object, and configure it to receive the event'],[-1,'     *     object as first parameter when called. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * func - {Function} Input function to serve as an event listener.'],[-1,'     * object - {Object} A reference to this.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Function}'],[-1,'     *\/'],[-1,'    bindAsEventListener: function(func, object) {'],[0,'        return function(event) {'],[0,'            return func.call(object, event || window.event);'],[-1,'        };'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: False'],[-1,'     * A simple function to that just does \&quot;return false\&quot;. We use this to '],[-1,'     * avoid attaching anonymous functions to DOM event handlers, which '],[-1,'     * causes \&quot;issues\&quot; on IE&lt;8.'],[-1,'     * '],[-1,'     * Usage:'],[-1,'     * document.onclick = OpenLayers.Function.False;'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    False : function() {'],[0,'        return false;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: True'],[-1,'     * A simple function to that just does \&quot;return true\&quot;. We use this to '],[-1,'     * avoid attaching anonymous functions to DOM event handlers, which '],[-1,'     * causes \&quot;issues\&quot; on IE&lt;8.'],[-1,'     * '],[-1,'     * Usage:'],[-1,'     * document.onclick = OpenLayers.Function.True;'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    True : function() {'],[0,'        return true;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: Void'],[-1,'     * A reusable function that returns ``undefined``.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {undefined}'],[-1,'     *\/'],[-1,'    Void: function() {}'],[-1,''],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Array'],[-1,' * Contains convenience functions for array manipulation.'],[-1,' *\/'],[1,'OpenLayers.Array = {'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: filter'],[-1,'     * Filter an array.  Provides the functionality of the'],[-1,'     *     Array.prototype.filter extension to the ECMA-262 standard.  Where'],[-1,'     *     available, Array.prototype.filter will be used.'],[-1,'     *'],[-1,'     * Based on well known example from http:\/\/developer.mozilla.org\/en\/Core_JavaScript_1.5_Reference\/Global_Objects\/Array\/filter'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * array - {Array} The array to be filtered.  This array is not mutated.'],[-1,'     *     Elements added to this array by the callback will not be visited.'],[-1,'     * callback - {Function} A function that is called for each element in'],[-1,'     *     the array.  If this function returns true, the element will be'],[-1,'     *     included in the return.  The function will be called with three'],[-1,'     *     arguments: the element in the array, the index of that element, and'],[-1,'     *     the array itself.  If the optional caller parameter is specified'],[-1,'     *     the callback will be called with this set to caller.'],[-1,'     * caller - {Object} Optional object to be set as this when the callback'],[-1,'     *     is called.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} An array of elements from the passed in array for which the'],[-1,'     *     callback returns true.'],[-1,'     *\/'],[-1,'    filter: function(array, callback, caller) {'],[0,'        var selected = [];'],[0,'        if (Array.prototype.filter) {'],[0,'            selected = array.filter(callback, caller);'],[-1,'        } else {'],[0,'            var len = array.length;'],[0,'            if (typeof callback != \&quot;function\&quot;) {'],[0,'                throw new TypeError();'],[-1,'            }'],[0,'            for(var i=0; i&lt;len; i++) {'],[0,'                if (i in array) {'],[0,'                    var val = array[i];'],[0,'                    if (callback.call(caller, val, i, array)) {'],[0,'                        selected.push(val);'],[-1,'                    }'],[-1,'                }'],[-1,'            }        '],[-1,'        }'],[0,'        return selected;'],[-1,'    }'],[-1,'    '],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/BaseTypes\/Bounds.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Bounds'],[-1,' * Instances of this class represent bounding boxes.  Data stored as left,'],[-1,' * bottom, right, top floats. All values are initialized to null, however,'],[-1,' * you should make sure you set them before using the bounds for anything.'],[-1,' * '],[-1,' * Possible use case:'],[-1,' * (code)'],[-1,' *     bounds = new OpenLayers.Bounds();'],[-1,' *     bounds.extend(new OpenLayers.LonLat(4,5));'],[-1,' *     bounds.extend(new OpenLayers.LonLat(5,6));'],[-1,' *     bounds.toBBOX(); \/\/ returns 4,5,5,6'],[-1,' * (end)'],[-1,' *\/'],[1,'OpenLayers.Bounds = OpenLayers.Class({'],[-1,''],[-1,'    \/**'],[-1,'     * Property: left'],[-1,'     * {Number} Minimum horizontal coordinate.'],[-1,'     *\/'],[-1,'    left: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: bottom'],[-1,'     * {Number} Minimum vertical coordinate.'],[-1,'     *\/'],[-1,'    bottom: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: right'],[-1,'     * {Number} Maximum horizontal coordinate.'],[-1,'     *\/'],[-1,'    right: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: top'],[-1,'     * {Number} Maximum vertical coordinate.'],[-1,'     *\/'],[-1,'    top: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: centerLonLat'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} A cached center location.  This should not be'],[-1,'     *     accessed directly.  Use &lt;getCenterLonLat&gt; instead.'],[-1,'     *\/'],[-1,'    centerLonLat: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Bounds'],[-1,'     * Construct a new bounds object. Coordinates can either be passed as four'],[-1,'     * arguments, or as a single argument.'],[-1,'     *'],[-1,'     * Parameters (four arguments):'],[-1,'     * left - {Number} The left bounds of the box.  Note that for width'],[-1,'     *        calculations, this is assumed to be less than the right value.'],[-1,'     * bottom - {Number} The bottom bounds of the box.  Note that for height'],[-1,'     *          calculations, this is assumed to be less than the top value.'],[-1,'     * right - {Number} The right bounds.'],[-1,'     * top - {Number} The top bounds.'],[-1,'     *'],[-1,'     * Parameters (single argument):'],[-1,'     * bounds - {Array(Number)} [left, bottom, right, top]'],[-1,'     *\/'],[-1,'    initialize: function(left, bottom, right, top) {'],[25,'        if (OpenLayers.Util.isArray(left)) {'],[0,'            top = left[3];'],[0,'            right = left[2];'],[0,'            bottom = left[1];'],[0,'            left = left[0];'],[-1,'        }'],[25,'        if (left != null) {'],[15,'            this.left = OpenLayers.Util.toFloat(left);'],[-1,'        }'],[25,'        if (bottom != null) {'],[23,'            this.bottom = OpenLayers.Util.toFloat(bottom);'],[-1,'        }'],[25,'        if (right != null) {'],[23,'            this.right = OpenLayers.Util.toFloat(right);'],[-1,'        }'],[25,'        if (top != null) {'],[15,'            this.top = OpenLayers.Util.toFloat(top);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clone'],[-1,'     * Create a cloned instance of this bounds.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} A fresh copy of the bounds'],[-1,'     *\/'],[-1,'    clone:function() {'],[0,'        return new OpenLayers.Bounds(this.left, this.bottom, '],[-1,'                                     this.right, this.top);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: equals'],[-1,'     * Test a two bounds for equivalence.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The passed-in bounds object has the same left,'],[-1,'     *           right, top, bottom components as this.  Note that if bounds '],[-1,'     *           passed in is null, returns false.'],[-1,'     *\/'],[-1,'    equals:function(bounds) {'],[0,'        var equals = false;'],[0,'        if (bounds != null) {'],[0,'            equals = ((this.left == bounds.left) &amp;&amp; '],[-1,'                      (this.right == bounds.right) &amp;&amp;'],[-1,'                      (this.top == bounds.top) &amp;&amp; '],[-1,'                      (this.bottom == bounds.bottom));'],[-1,'        }'],[0,'        return equals;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: toString'],[-1,'     * Returns a string representation of the bounds object.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} String representation of bounds object. '],[-1,'     *\/'],[-1,'    toString:function() {'],[0,'        return [this.left, this.bottom, this.right, this.top].join(\&quot;,\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: toArray'],[-1,'     * Returns an array representation of the bounds object.'],[-1,'     *'],[-1,'     * Returns an array of left, bottom, right, top properties, or -- when the'],[-1,'     *     optional parameter is true -- an array of the  bottom, left, top,'],[-1,'     *     right properties.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * reverseAxisOrder - {Boolean} Should we reverse the axis order?'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} array of left, bottom, right, top'],[-1,'     *\/'],[-1,'    toArray: function(reverseAxisOrder) {'],[0,'        if (reverseAxisOrder === true) {'],[0,'            return [this.bottom, this.left, this.top, this.right];'],[-1,'        } else {'],[0,'            return [this.left, this.bottom, this.right, this.top];'],[-1,'        }'],[-1,'    },    '],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: toBBOX'],[-1,'     * Returns a boundingbox-string representation of the bounds object.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * decimal - {Integer} How many significant digits in the bbox coords?'],[-1,'     *                     Default is 6'],[-1,'     * reverseAxisOrder - {Boolean} Should we reverse the axis order?'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} Simple String representation of bounds object.'],[-1,'     *          (e.g. \&quot;5,42,10,45\&quot;)'],[-1,'     *\/'],[-1,'    toBBOX:function(decimal, reverseAxisOrder) {'],[0,'        if (decimal== null) {'],[0,'            decimal = 6; '],[-1,'        }'],[0,'        var mult = Math.pow(10, decimal);'],[0,'        var xmin = Math.round(this.left * mult) \/ mult;'],[0,'        var ymin = Math.round(this.bottom * mult) \/ mult;'],[0,'        var xmax = Math.round(this.right * mult) \/ mult;'],[0,'        var ymax = Math.round(this.top * mult) \/ mult;'],[0,'        if (reverseAxisOrder === true) {'],[0,'            return ymin + \&quot;,\&quot; + xmin + \&quot;,\&quot; + ymax + \&quot;,\&quot; + xmax;'],[-1,'        } else {'],[0,'            return xmin + \&quot;,\&quot; + ymin + \&quot;,\&quot; + xmax + \&quot;,\&quot; + ymax;'],[-1,'        }'],[-1,'    },'],[-1,' '],[-1,'    \/**'],[-1,'     * APIMethod: toGeometry'],[-1,'     * Create a new polygon geometry based on this bounds.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry.Polygon&gt;} A new polygon with the coordinates'],[-1,'     *     of this bounds.'],[-1,'     *\/'],[-1,'    toGeometry: function() {'],[0,'        return new OpenLayers.Geometry.Polygon(['],[-1,'            new OpenLayers.Geometry.LinearRing(['],[-1,'                new OpenLayers.Geometry.Point(this.left, this.bottom),'],[-1,'                new OpenLayers.Geometry.Point(this.right, this.bottom),'],[-1,'                new OpenLayers.Geometry.Point(this.right, this.top),'],[-1,'                new OpenLayers.Geometry.Point(this.left, this.top)'],[-1,'            ])'],[-1,'        ]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getWidth'],[-1,'     * Returns the width of the bounds.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The width of the bounds (right minus left).'],[-1,'     *\/'],[-1,'    getWidth:function() {'],[0,'        return (this.right - this.left);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getHeight'],[-1,'     * Returns the height of the bounds.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The height of the bounds (top minus bottom).'],[-1,'     *\/'],[-1,'    getHeight:function() {'],[0,'        return (this.top - this.bottom);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getSize'],[-1,'     * Returns an &lt;OpenLayers.Size&gt; object of the bounds.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Size&gt;} The size of the bounds.'],[-1,'     *\/'],[-1,'    getSize:function() {'],[0,'        return new OpenLayers.Size(this.getWidth(), this.getHeight());'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getCenterPixel'],[-1,'     * Returns the &lt;OpenLayers.Pixel&gt; object which represents the center of the'],[-1,'     *     bounds.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} The center of the bounds in pixel space.'],[-1,'     *\/'],[-1,'    getCenterPixel:function() {'],[0,'        return new OpenLayers.Pixel( (this.left + this.right) \/ 2,'],[-1,'                                     (this.bottom + this.top) \/ 2);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getCenterLonLat'],[-1,'     * Returns the &lt;OpenLayers.LonLat&gt; object which represents the center of the'],[-1,'     *     bounds.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} The center of the bounds in map space.'],[-1,'     *\/'],[-1,'    getCenterLonLat:function() {'],[0,'        if(!this.centerLonLat) {'],[0,'            this.centerLonLat = new OpenLayers.LonLat('],[-1,'                (this.left + this.right) \/ 2, (this.bottom + this.top) \/ 2'],[-1,'            );'],[-1,'        }'],[0,'        return this.centerLonLat;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: scale'],[-1,'     * Scales the bounds around a pixel or lonlat. Note that the new '],[-1,'     *     bounds may return non-integer properties, even if a pixel'],[-1,'     *     is passed. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * ratio - {Float} '],[-1,'     * origin - {&lt;OpenLayers.Pixel&gt; or &lt;OpenLayers.LonLat&gt;}'],[-1,'     *          Default is center.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} A new bounds that is scaled by ratio'],[-1,'     *                      from origin.'],[-1,'     *\/'],[-1,'    scale: function(ratio, origin){'],[0,'        if(origin == null){'],[0,'            origin = this.getCenterLonLat();'],[-1,'        }'],[-1,'        '],[0,'        var origx,origy;'],[-1,''],[-1,'        \/\/ get origin coordinates'],[0,'        if(origin.CLASS_NAME == \&quot;OpenLayers.LonLat\&quot;){'],[0,'            origx = origin.lon;'],[0,'            origy = origin.lat;'],[-1,'        } else {'],[0,'            origx = origin.x;'],[0,'            origy = origin.y;'],[-1,'        }'],[-1,''],[0,'        var left = (this.left - origx) * ratio + origx;'],[0,'        var bottom = (this.bottom - origy) * ratio + origy;'],[0,'        var right = (this.right - origx) * ratio + origx;'],[0,'        var top = (this.top - origy) * ratio + origy;'],[-1,'        '],[0,'        return new OpenLayers.Bounds(left, bottom, right, top);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: add'],[-1,'     * Shifts the coordinates of the bound by the given horizontal and vertical'],[-1,'     *     deltas.'],[-1,'     *'],[-1,'     * (start code)'],[-1,'     * var bounds = new OpenLayers.Bounds(0, 0, 10, 10);'],[-1,'     * bounds.toString();'],[-1,'     * \/\/ =&gt; \&quot;0,0,10,10\&quot;'],[-1,'     *'],[-1,'     * bounds.add(-1.5, 4).toString();'],[-1,'     * \/\/ =&gt; \&quot;-1.5,4,8.5,14\&quot;'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * This method will throw a TypeError if it is passed null as an argument.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x - {Float} horizontal delta'],[-1,'     * y - {Float} vertical delta'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} A new bounds whose coordinates are the same as'],[-1,'     *     this, but shifted by the passed-in x and y values.'],[-1,'     *\/'],[-1,'    add:function(x, y) {'],[0,'        if ( (x == null) || (y == null) ) {'],[0,'            throw new TypeError(\'Bounds.add cannot receive null values\');'],[-1,'        }'],[0,'        return new OpenLayers.Bounds(this.left + x, this.bottom + y,'],[-1,'                                     this.right + x, this.top + y);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: extend'],[-1,'     * Extend the bounds to include the &lt;OpenLayers.LonLat&gt;,'],[-1,'     *     &lt;OpenLayers.Geometry.Point&gt; or &lt;OpenLayers.Bounds&gt; specified.'],[-1,'     *'],[-1,'     * Please note that this function assumes that left &lt; right and'],[-1,'     *     bottom &lt; top.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * object - {&lt;OpenLayers.LonLat&gt;, &lt;OpenLayers.Geometry.Point&gt; or'],[-1,'     *     &lt;OpenLayers.Bounds&gt;} The object to be included in the new bounds'],[-1,'     *     object.'],[-1,'     *\/'],[-1,'    extend:function(object) {'],[0,'        if (object) {'],[0,'            switch(object.CLASS_NAME) {'],[-1,'                case \&quot;OpenLayers.LonLat\&quot;:'],[0,'                    this.extendXY(object.lon, object.lat);'],[0,'                    break;'],[-1,'                case \&quot;OpenLayers.Geometry.Point\&quot;:'],[0,'                    this.extendXY(object.x, object.y);'],[0,'                    break;'],[-1,''],[-1,'                case \&quot;OpenLayers.Bounds\&quot;:'],[-1,'                    \/\/ clear cached center location'],[0,'                    this.centerLonLat = null;'],[-1,''],[0,'                    if ( (this.left == null) || (object.left &lt; this.left)) {'],[0,'                        this.left = object.left;'],[-1,'                    }'],[0,'                    if ( (this.bottom == null) || (object.bottom &lt; this.bottom) ) {'],[0,'                        this.bottom = object.bottom;'],[-1,'                    }'],[0,'                    if ( (this.right == null) || (object.right &gt; this.right) ) {'],[0,'                        this.right = object.right;'],[-1,'                    }'],[0,'                    if ( (this.top == null) || (object.top &gt; this.top) ) {'],[0,'                        this.top = object.top;'],[-1,'                    }'],[0,'                    break;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: extendXY'],[-1,'     * Extend the bounds to include the XY coordinate specified.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x - {number} The X part of the the coordinate.'],[-1,'     * y - {number} The Y part of the the coordinate.'],[-1,'     *\/'],[-1,'    extendXY:function(x, y) {'],[-1,'        \/\/ clear cached center location'],[0,'        this.centerLonLat = null;'],[-1,''],[0,'        if ((this.left == null) || (x &lt; this.left)) {'],[0,'            this.left = x;'],[-1,'        }'],[0,'        if ((this.bottom == null) || (y &lt; this.bottom)) {'],[0,'            this.bottom = y;'],[-1,'        }'],[0,'        if ((this.right == null) || (x &gt; this.right)) {'],[0,'            this.right = x;'],[-1,'        }'],[0,'        if ((this.top == null) || (y &gt; this.top)) {'],[0,'            this.top = y;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: containsLonLat'],[-1,'     * Returns whether the bounds object contains the given &lt;OpenLayers.LonLat&gt;.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * ll - {&lt;OpenLayers.LonLat&gt;|Object} OpenLayers.LonLat or an'],[-1,'     *     object with a \'lon\' and \'lat\' properties.'],[-1,'     * options - {Object} Optional parameters'],[-1,'     *'],[-1,'     * Acceptable options:'],[-1,'     * inclusive - {Boolean} Whether or not to include the border.'],[-1,'     *     Default is true.'],[-1,'     * worldBounds - {&lt;OpenLayers.Bounds&gt;} If a worldBounds is provided, the'],[-1,'     *     ll will be considered as contained if it exceeds the world bounds,'],[-1,'     *     but can be wrapped around the dateline so it is contained by this'],[-1,'     *     bounds.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The passed-in lonlat is within this bounds.'],[-1,'     *\/'],[-1,'    containsLonLat: function(ll, options) {'],[0,'        if (typeof options === \&quot;boolean\&quot;) {'],[0,'            options =  {inclusive: options};'],[-1,'        }'],[0,'        options = options || {};'],[0,'        var contains = this.contains(ll.lon, ll.lat, options.inclusive),'],[-1,'            worldBounds = options.worldBounds;'],[0,'        if (worldBounds &amp;&amp; !contains) {'],[0,'            var worldWidth = worldBounds.getWidth();'],[0,'            var worldCenterX = (worldBounds.left + worldBounds.right) \/ 2;'],[0,'            var worldsAway = Math.round((ll.lon - worldCenterX) \/ worldWidth);'],[0,'            contains = this.containsLonLat({'],[-1,'                lon: ll.lon - worldsAway * worldWidth,'],[-1,'                lat: ll.lat'],[-1,'            }, {inclusive: options.inclusive});'],[-1,'        }'],[0,'        return contains;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: containsPixel'],[-1,'     * Returns whether the bounds object contains the given &lt;OpenLayers.Pixel&gt;.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     * inclusive - {Boolean} Whether or not to include the border. Default is'],[-1,'     *     true.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The passed-in pixel is within this bounds.'],[-1,'     *\/'],[-1,'    containsPixel:function(px, inclusive) {'],[0,'        return this.contains(px.x, px.y, inclusive);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: contains'],[-1,'     * Returns whether the bounds object contains the given x and y.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * x - {Float}'],[-1,'     * y - {Float}'],[-1,'     * inclusive - {Boolean} Whether or not to include the border. Default is'],[-1,'     *     true.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the passed-in coordinates are within this'],[-1,'     *     bounds.'],[-1,'     *\/'],[-1,'    contains:function(x, y, inclusive) {'],[-1,'        \/\/set default'],[0,'        if (inclusive == null) {'],[0,'            inclusive = true;'],[-1,'        }'],[-1,''],[0,'        if (x == null || y == null) {'],[0,'            return false;'],[-1,'        }'],[-1,''],[0,'        x = OpenLayers.Util.toFloat(x);'],[0,'        y = OpenLayers.Util.toFloat(y);'],[-1,''],[0,'        var contains = false;'],[0,'        if (inclusive) {'],[0,'            contains = ((x &gt;= this.left) &amp;&amp; (x &lt;= this.right) &amp;&amp; '],[-1,'                        (y &gt;= this.bottom) &amp;&amp; (y &lt;= this.top));'],[-1,'        } else {'],[0,'            contains = ((x &gt; this.left) &amp;&amp; (x &lt; this.right) &amp;&amp; '],[-1,'                        (y &gt; this.bottom) &amp;&amp; (y &lt; this.top));'],[-1,'        }              '],[0,'        return contains;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: intersectsBounds'],[-1,'     * Determine whether the target bounds intersects this bounds.  Bounds are'],[-1,'     *     considered intersecting if any of their edges intersect or if one'],[-1,'     *     bounds contains the other.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} The target bounds.'],[-1,'     * options - {Object} Optional parameters.'],[-1,'     * '],[-1,'     * Acceptable options:'],[-1,'     * inclusive - {Boolean} Treat coincident borders as intersecting.  Default'],[-1,'     *     is true.  If false, bounds that do not overlap but only touch at the'],[-1,'     *     border will not be considered as intersecting.'],[-1,'     * worldBounds - {&lt;OpenLayers.Bounds&gt;} If a worldBounds is provided, two'],[-1,'     *     bounds will be considered as intersecting if they intersect when '],[-1,'     *     shifted to within the world bounds.  This applies only to bounds that'],[-1,'     *     cross or are completely outside the world bounds.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The passed-in bounds object intersects this bounds.'],[-1,'     *\/'],[-1,'    intersectsBounds:function(bounds, options) {'],[0,'        if (typeof options === \&quot;boolean\&quot;) {'],[0,'            options =  {inclusive: options};'],[-1,'        }'],[0,'        options = options || {};'],[0,'        if (options.worldBounds) {'],[0,'            var self = this.wrapDateLine(options.worldBounds);'],[0,'            bounds = bounds.wrapDateLine(options.worldBounds);'],[-1,'        } else {'],[0,'            self = this;'],[-1,'        }'],[0,'        if (options.inclusive == null) {'],[0,'            options.inclusive = true;'],[-1,'        }'],[0,'        var intersects = false;'],[0,'        var mightTouch = ('],[-1,'            self.left == bounds.right ||'],[-1,'            self.right == bounds.left ||'],[-1,'            self.top == bounds.bottom ||'],[-1,'            self.bottom == bounds.top'],[-1,'        );'],[-1,'        '],[-1,'        \/\/ if the two bounds only touch at an edge, and inclusive is false,'],[-1,'        \/\/ then the bounds don\'t *really* intersect.'],[0,'        if (options.inclusive || !mightTouch) {'],[-1,'            \/\/ otherwise, if one of the boundaries even partially contains another,'],[-1,'            \/\/ inclusive of the edges, then they do intersect.'],[0,'            var inBottom = ('],[-1,'                ((bounds.bottom &gt;= self.bottom) &amp;&amp; (bounds.bottom &lt;= self.top)) ||'],[-1,'                ((self.bottom &gt;= bounds.bottom) &amp;&amp; (self.bottom &lt;= bounds.top))'],[-1,'            );'],[0,'            var inTop = ('],[-1,'                ((bounds.top &gt;= self.bottom) &amp;&amp; (bounds.top &lt;= self.top)) ||'],[-1,'                ((self.top &gt; bounds.bottom) &amp;&amp; (self.top &lt; bounds.top))'],[-1,'            );'],[0,'            var inLeft = ('],[-1,'                ((bounds.left &gt;= self.left) &amp;&amp; (bounds.left &lt;= self.right)) ||'],[-1,'                ((self.left &gt;= bounds.left) &amp;&amp; (self.left &lt;= bounds.right))'],[-1,'            );'],[0,'            var inRight = ('],[-1,'                ((bounds.right &gt;= self.left) &amp;&amp; (bounds.right &lt;= self.right)) ||'],[-1,'                ((self.right &gt;= bounds.left) &amp;&amp; (self.right &lt;= bounds.right))'],[-1,'            );'],[0,'            intersects = ((inBottom || inTop) &amp;&amp; (inLeft || inRight));'],[-1,'        }'],[-1,'        \/\/ document me'],[0,'        if (options.worldBounds &amp;&amp; !intersects) {'],[0,'            var world = options.worldBounds;'],[0,'            var width = world.getWidth();'],[0,'            var selfCrosses = !world.containsBounds(self);'],[0,'            var boundsCrosses = !world.containsBounds(bounds);'],[0,'            if (selfCrosses &amp;&amp; !boundsCrosses) {'],[0,'                bounds = bounds.add(-width, 0);'],[0,'                intersects = self.intersectsBounds(bounds, {inclusive: options.inclusive});'],[0,'            } else if (boundsCrosses &amp;&amp; !selfCrosses) {'],[0,'                self = self.add(-width, 0);'],[0,'                intersects = bounds.intersectsBounds(self, {inclusive: options.inclusive});                '],[-1,'            }'],[-1,'        }'],[0,'        return intersects;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: containsBounds'],[-1,'     * Returns whether the bounds object contains the given &lt;OpenLayers.Bounds&gt;.'],[-1,'     * '],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} The target bounds.'],[-1,'     * partial - {Boolean} If any of the target corners is within this bounds'],[-1,'     *     consider the bounds contained.  Default is false.  If false, the'],[-1,'     *     entire target bounds must be contained within this bounds.'],[-1,'     * inclusive - {Boolean} Treat shared edges as contained.  Default is'],[-1,'     *     true.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The passed-in bounds object is contained within this bounds. '],[-1,'     *\/'],[-1,'    containsBounds:function(bounds, partial, inclusive) {'],[0,'        if (partial == null) {'],[0,'            partial = false;'],[-1,'        }'],[0,'        if (inclusive == null) {'],[0,'            inclusive = true;'],[-1,'        }'],[0,'        var bottomLeft  = this.contains(bounds.left, bounds.bottom, inclusive);'],[0,'        var bottomRight = this.contains(bounds.right, bounds.bottom, inclusive);'],[0,'        var topLeft  = this.contains(bounds.left, bounds.top, inclusive);'],[0,'        var topRight = this.contains(bounds.right, bounds.top, inclusive);'],[-1,'        '],[0,'        return (partial) ? (bottomLeft || bottomRight || topLeft || topRight)'],[-1,'                         : (bottomLeft &amp;&amp; bottomRight &amp;&amp; topLeft &amp;&amp; topRight);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: determineQuadrant'],[-1,'     * Returns the the quadrant (\&quot;br\&quot;, \&quot;tr\&quot;, \&quot;tl\&quot;, \&quot;bl\&quot;) in which the given'],[-1,'     *     &lt;OpenLayers.LonLat&gt; lies.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The quadrant (\&quot;br\&quot; \&quot;tr\&quot; \&quot;tl\&quot; \&quot;bl\&quot;) of the bounds in which the'],[-1,'     *     coordinate lies.'],[-1,'     *\/'],[-1,'    determineQuadrant: function(lonlat) {'],[-1,'    '],[0,'        var quadrant = \&quot;\&quot;;'],[0,'        var center = this.getCenterLonLat();'],[-1,'        '],[0,'        quadrant += (lonlat.lat &lt; center.lat) ? \&quot;b\&quot; : \&quot;t\&quot;;'],[0,'        quadrant += (lonlat.lon &lt; center.lon) ? \&quot;l\&quot; : \&quot;r\&quot;;'],[-1,'    '],[0,'        return quadrant; '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: transform'],[-1,'     * Transform the Bounds object from source to dest. '],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * source - {&lt;OpenLayers.Projection&gt;} Source projection. '],[-1,'     * dest   - {&lt;OpenLayers.Projection&gt;} Destination projection. '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} Itself, for use in chaining operations.'],[-1,'     *\/'],[-1,'    transform: function(source, dest) {'],[-1,'        \/\/ clear cached center location'],[0,'        this.centerLonLat = null;'],[0,'        var ll = OpenLayers.Projection.transform('],[-1,'            {\'x\': this.left, \'y\': this.bottom}, source, dest);'],[0,'        var lr = OpenLayers.Projection.transform('],[-1,'            {\'x\': this.right, \'y\': this.bottom}, source, dest);'],[0,'        var ul = OpenLayers.Projection.transform('],[-1,'            {\'x\': this.left, \'y\': this.top}, source, dest);'],[0,'        var ur = OpenLayers.Projection.transform('],[-1,'            {\'x\': this.right, \'y\': this.top}, source, dest);'],[0,'        this.left   = Math.min(ll.x, ul.x);'],[0,'        this.bottom = Math.min(ll.y, lr.y);'],[0,'        this.right  = Math.max(lr.x, ur.x);'],[0,'        this.top    = Math.max(ul.y, ur.y);'],[0,'        return this;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: wrapDateLine'],[-1,'     * Wraps the bounds object around the dateline.'],[-1,'     *  '],[-1,'     * Parameters:'],[-1,'     * maxExtent - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * options - {Object} Some possible options are:'],[-1,'     *'],[-1,'     * Allowed Options:'],[-1,'     *                    leftTolerance - {float} Allow for a margin of error '],[-1,'     *                                            with the \'left\' value of this '],[-1,'     *                                            bound.'],[-1,'     *                                            Default is 0.'],[-1,'     *                    rightTolerance - {float} Allow for a margin of error '],[-1,'     *                                             with the \'right\' value of '],[-1,'     *                                             this bound.'],[-1,'     *                                             Default is 0.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} A copy of this bounds, but wrapped around the '],[-1,'     *                       \&quot;dateline\&quot; (as specified by the borders of '],[-1,'     *                       maxExtent). Note that this function only returns '],[-1,'     *                       a different bounds value if this bounds is '],[-1,'     *                       *entirely* outside of the maxExtent. If this '],[-1,'     *                       bounds straddles the dateline (is part in\/part '],[-1,'     *                       out of maxExtent), the returned bounds will always '],[-1,'     *                       cross the left edge of the given maxExtent.'],[-1,'     *.'],[-1,'     *\/'],[-1,'    wrapDateLine: function(maxExtent, options) {    '],[0,'        options = options || {};'],[-1,'        '],[0,'        var leftTolerance = options.leftTolerance || 0;'],[0,'        var rightTolerance = options.rightTolerance || 0;'],[-1,''],[0,'        var newBounds = this.clone();'],[-1,'    '],[0,'        if (maxExtent) {'],[0,'            var width = maxExtent.getWidth();'],[-1,''],[-1,'            \/\/shift right?'],[0,'            while (newBounds.left &lt; maxExtent.left &amp;&amp; '],[-1,'                   newBounds.right - rightTolerance &lt;= maxExtent.left ) { '],[0,'                newBounds = newBounds.add(width, 0);'],[-1,'            }'],[-1,''],[-1,'            \/\/shift left?'],[0,'            while (newBounds.left + leftTolerance &gt;= maxExtent.right &amp;&amp; '],[-1,'                   newBounds.right &gt; maxExtent.right ) { '],[0,'                newBounds = newBounds.add(-width, 0);'],[-1,'            }'],[-1,'           '],[-1,'            \/\/ crosses right only? force left'],[0,'            var newLeft = newBounds.left + leftTolerance;'],[0,'            if (newLeft &lt; maxExtent.right &amp;&amp; newLeft &gt; maxExtent.left &amp;&amp; '],[-1,'                   newBounds.right - rightTolerance &gt; maxExtent.right) {'],[0,'                newBounds = newBounds.add(-width, 0);'],[-1,'            }'],[-1,'        }'],[-1,'                '],[0,'        return newBounds;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Bounds\&quot;'],[-1,'});'],[-1,''],[-1,'\/** '],[-1,' * APIFunction: fromString'],[-1,' * Alternative constructor that builds a new OpenLayers.Bounds from a '],[-1,' *     parameter string.'],[-1,' *'],[-1,' * (begin code)'],[-1,' * OpenLayers.Bounds.fromString(\&quot;5,42,10,45\&quot;);'],[-1,' * \/\/ =&gt; equivalent to ...'],[-1,' * new OpenLayers.Bounds(5, 42, 10, 45);'],[-1,' * (end)'],[-1,' *'],[-1,' * Parameters: '],[-1,' * str - {String} Comma-separated bounds string. (e.g. \&quot;5,42,10,45\&quot;)'],[-1,' * reverseAxisOrder - {Boolean} Does the string use reverse axis order?'],[-1,' *'],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.Bounds&gt;} New bounds object built from the '],[-1,' *                       passed-in String.'],[-1,' *\/'],[1,'OpenLayers.Bounds.fromString = function(str, reverseAxisOrder) {'],[0,'    var bounds = str.split(\&quot;,\&quot;);'],[0,'    return OpenLayers.Bounds.fromArray(bounds, reverseAxisOrder);'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * APIFunction: fromArray'],[-1,' * Alternative constructor that builds a new OpenLayers.Bounds from an array.'],[-1,' *'],[-1,' * (begin code)'],[-1,' * OpenLayers.Bounds.fromArray( [5, 42, 10, 45] );'],[-1,' * \/\/ =&gt; equivalent to ...'],[-1,' * new OpenLayers.Bounds(5, 42, 10, 45);'],[-1,' * (end)'],[-1,' *'],[-1,' * Parameters:'],[-1,' * bbox - {Array(Float)} Array of bounds values (e.g. [5,42,10,45])'],[-1,' * reverseAxisOrder - {Boolean} Does the array use reverse axis order?'],[-1,' *'],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.Bounds&gt;} New bounds object built from the passed-in Array.'],[-1,' *\/'],[1,'OpenLayers.Bounds.fromArray = function(bbox, reverseAxisOrder) {'],[0,'    return reverseAxisOrder === true ?'],[-1,'           new OpenLayers.Bounds(bbox[1], bbox[0], bbox[3], bbox[2]) :'],[-1,'           new OpenLayers.Bounds(bbox[0], bbox[1], bbox[2], bbox[3]);'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * APIFunction: fromSize'],[-1,' * Alternative constructor that builds a new OpenLayers.Bounds from a size.'],[-1,' *'],[-1,' * (begin code)'],[-1,' * OpenLayers.Bounds.fromSize( new OpenLayers.Size(10, 20) );'],[-1,' * \/\/ =&gt; equivalent to ...'],[-1,' * new OpenLayers.Bounds(0, 20, 10, 0);'],[-1,' * (end)'],[-1,' *'],[-1,' * Parameters:'],[-1,' * size - {&lt;OpenLayers.Size&gt; or Object} &lt;OpenLayers.Size&gt; or an object with'],[-1,' *     both \'w\' and \'h\' properties.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.Bounds&gt;} New bounds object built from the passed-in size.'],[-1,' *\/'],[1,'OpenLayers.Bounds.fromSize = function(size) {'],[0,'    return new OpenLayers.Bounds(0,'],[-1,'                                 size.h,'],[-1,'                                 size.w,'],[-1,'                                 0);'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: oppositeQuadrant'],[-1,' * Get the opposite quadrant for a given quadrant string.'],[-1,' *'],[-1,' * (begin code)'],[-1,' * OpenLayers.Bounds.oppositeQuadrant( \&quot;tl\&quot; );'],[-1,' * \/\/ =&gt; \&quot;br\&quot;'],[-1,' *'],[-1,' * OpenLayers.Bounds.oppositeQuadrant( \&quot;tr\&quot; );'],[-1,' * \/\/ =&gt; \&quot;bl\&quot;'],[-1,' * (end)'],[-1,' *'],[-1,' * Parameters:'],[-1,' * quadrant - {String} two character quadrant shortstring'],[-1,' *'],[-1,' * Returns:'],[-1,' * {String} The opposing quadrant (\&quot;br\&quot; \&quot;tr\&quot; \&quot;tl\&quot; \&quot;bl\&quot;). For Example, if '],[-1,' *          you pass in \&quot;bl\&quot; it returns \&quot;tr\&quot;, if you pass in \&quot;br\&quot; it '],[-1,' *          returns \&quot;tl\&quot;, etc.'],[-1,' *\/'],[1,'OpenLayers.Bounds.oppositeQuadrant = function(quadrant) {'],[0,'    var opp = \&quot;\&quot;;'],[-1,'    '],[0,'    opp += (quadrant.charAt(0) == \'t\') ? \'b\' : \'t\';'],[0,'    opp += (quadrant.charAt(1) == \'l\') ? \'r\' : \'l\';'],[-1,'    '],[0,'    return opp;'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/BaseTypes\/Element.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' * @requires OpenLayers\/BaseTypes.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Element'],[-1,' *\/'],[1,'OpenLayers.Element = {'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: visible'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * element - {DOMElement}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Is the element visible?'],[-1,'     *\/'],[-1,'    visible: function(element) {'],[0,'        return OpenLayers.Util.getElement(element).style.display != \'none\';'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: toggle'],[-1,'     * Toggle the visibility of element(s) passed in'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * element - {DOMElement} Actually user can pass any number of elements'],[-1,'     *\/'],[-1,'    toggle: function() {'],[0,'        for (var i=0, len=arguments.length; i&lt;len; i++) {'],[0,'            var element = OpenLayers.Util.getElement(arguments[i]);'],[0,'            var display = OpenLayers.Element.visible(element) ? \'none\' '],[-1,'                                                              : \'\';'],[0,'            element.style.display = display;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: remove'],[-1,'     * Remove the specified element from the DOM.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * element - {DOMElement}'],[-1,'     *\/'],[-1,'    remove: function(element) {'],[0,'        element = OpenLayers.Util.getElement(element);'],[0,'        element.parentNode.removeChild(element);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: getHeight'],[-1,'     *  '],[-1,'     * Parameters:'],[-1,'     * element - {DOMElement}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer} The offset height of the element passed in'],[-1,'     *\/'],[-1,'    getHeight: function(element) {'],[0,'        element = OpenLayers.Util.getElement(element);'],[0,'        return element.offsetHeight;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Function: hasClass'],[-1,'     * Tests if an element has the given CSS class name.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * element - {DOMElement} A DOM element node.'],[-1,'     * name - {String} The CSS class name to search for.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The element has the given class name.'],[-1,'     *\/'],[-1,'    hasClass: function(element, name) {'],[0,'        var names = element.className;'],[0,'        return (!!names &amp;&amp; new RegExp(\&quot;(^|\\\\s)\&quot; + name + \&quot;(\\\\s|$)\&quot;).test(names));'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: addClass'],[-1,'     * Add a CSS class name to an element.  Safe where element already has'],[-1,'     *     the class name.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * element - {DOMElement} A DOM element node.'],[-1,'     * name - {String} The CSS class name to add.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The element.'],[-1,'     *\/'],[-1,'    addClass: function(element, name) {'],[0,'        if(!OpenLayers.Element.hasClass(element, name)) {'],[0,'            element.className += (element.className ? \&quot; \&quot; : \&quot;\&quot;) + name;'],[-1,'        }'],[0,'        return element;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Function: removeClass'],[-1,'     * Remove a CSS class name from an element.  Safe where element does not'],[-1,'     *     have the class name.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * element - {DOMElement} A DOM element node.'],[-1,'     * name - {String} The CSS class name to remove.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The element.'],[-1,'     *\/'],[-1,'    removeClass: function(element, name) {'],[0,'        var names = element.className;'],[0,'        if(names) {'],[0,'            element.className = OpenLayers.String.trim('],[-1,'                names.replace('],[-1,'                    new RegExp(\&quot;(^|\\\\s+)\&quot; + name + \&quot;(\\\\s+|$)\&quot;), \&quot; \&quot;'],[-1,'                )'],[-1,'            );'],[-1,'        }'],[0,'        return element;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Function: toggleClass'],[-1,'     * Remove a CSS class name from an element if it exists.  Add the class name'],[-1,'     *     if it doesn\'t exist.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * element - {DOMElement} A DOM element node.'],[-1,'     * name - {String} The CSS class name to toggle.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The element.'],[-1,'     *\/'],[-1,'    toggleClass: function(element, name) {'],[0,'        if(OpenLayers.Element.hasClass(element, name)) {'],[0,'            OpenLayers.Element.removeClass(element, name);'],[-1,'        } else {'],[0,'            OpenLayers.Element.addClass(element, name);'],[-1,'        }'],[0,'        return element;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: getStyle'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * element - {DOMElement}'],[-1,'     * style - {?}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {?}'],[-1,'     *\/'],[-1,'    getStyle: function(element, style) {'],[0,'        element = OpenLayers.Util.getElement(element);'],[-1,''],[0,'        var value = null;'],[0,'        if (element &amp;&amp; element.style) {'],[0,'            value = element.style[OpenLayers.String.camelize(style)];'],[0,'            if (!value) {'],[0,'                if (document.defaultView &amp;&amp; '],[-1,'                    document.defaultView.getComputedStyle) {'],[-1,'                    '],[0,'                    var css = document.defaultView.getComputedStyle(element, null);'],[0,'                    value = css ? css.getPropertyValue(style) : null;'],[0,'                } else if (element.currentStyle) {'],[0,'                    value = element.currentStyle[OpenLayers.String.camelize(style)];'],[-1,'                }'],[-1,'            }'],[-1,'        '],[0,'            var positions = [\'left\', \'top\', \'right\', \'bottom\'];'],[0,'            if (window.opera &amp;&amp;'],[-1,'                (OpenLayers.Util.indexOf(positions,style) != -1) &amp;&amp;'],[-1,'                (OpenLayers.Element.getStyle(element, \'position\') == \'static\')) { '],[0,'                value = \'auto\';'],[-1,'            }'],[-1,'        }'],[-1,'    '],[0,'        return value == \'auto\' ? null : value;'],[-1,'    }'],[-1,''],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/BaseTypes\/LonLat.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.LonLat'],[-1,' * This class represents a longitude and latitude pair'],[-1,' *\/'],[1,'OpenLayers.LonLat = OpenLayers.Class({'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: lon'],[-1,'     * {Float} The x-axis coodinate in map units'],[-1,'     *\/'],[-1,'    lon: 0.0,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: lat'],[-1,'     * {Float} The y-axis coordinate in map units'],[-1,'     *\/'],[-1,'    lat: 0.0,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.LonLat'],[-1,'     * Create a new map location. Coordinates can be passed either as two'],[-1,'     * arguments, or as a single argument.'],[-1,'     *'],[-1,'     * Parameters (two arguments):'],[-1,'     * lon - {Number} The x-axis coordinate in map units.  If your map is in'],[-1,'     *     a geographic projection, this will be the Longitude.  Otherwise,'],[-1,'     *     it will be the x coordinate of the map location in your map units.'],[-1,'     * lat - {Number} The y-axis coordinate in map units.  If your map is in'],[-1,'     *     a geographic projection, this will be the Latitude.  Otherwise,'],[-1,'     *     it will be the y coordinate of the map location in your map units.'],[-1,'     *'],[-1,'     * Parameters (single argument):'],[-1,'     * location - {Array(Float)} [lon, lat]'],[-1,'     *\/'],[-1,'    initialize: function(lon, lat) {'],[0,'        if (OpenLayers.Util.isArray(lon)) {'],[0,'            lat = lon[1];'],[0,'            lon = lon[0];'],[-1,'        }'],[0,'        this.lon = OpenLayers.Util.toFloat(lon);'],[0,'        this.lat = OpenLayers.Util.toFloat(lat);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: toString'],[-1,'     * Return a readable string version of the lonlat'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} String representation of OpenLayers.LonLat object. '],[-1,'     *           (e.g. &lt;i&gt;\&quot;lon=5,lat=42\&quot;&lt;\/i&gt;)'],[-1,'     *\/'],[-1,'    toString:function() {'],[0,'        return (\&quot;lon=\&quot; + this.lon + \&quot;,lat=\&quot; + this.lat);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: toShortString'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} Shortened String representation of OpenLayers.LonLat object. '],[-1,'     *         (e.g. &lt;i&gt;\&quot;5, 42\&quot;&lt;\/i&gt;)'],[-1,'     *\/'],[-1,'    toShortString:function() {'],[0,'        return (this.lon + \&quot;, \&quot; + this.lat);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: clone'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} New OpenLayers.LonLat object with the same lon '],[-1,'     *                       and lat values'],[-1,'     *\/'],[-1,'    clone:function() {'],[0,'        return new OpenLayers.LonLat(this.lon, this.lat);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: add'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * lon - {Float}'],[-1,'     * lat - {Float}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} A new OpenLayers.LonLat object with the lon and '],[-1,'     *                       lat passed-in added to this\'s. '],[-1,'     *\/'],[-1,'    add:function(lon, lat) {'],[0,'        if ( (lon == null) || (lat == null) ) {'],[0,'            throw new TypeError(\'LonLat.add cannot receive null values\');'],[-1,'        }'],[0,'        return new OpenLayers.LonLat(this.lon + OpenLayers.Util.toFloat(lon), '],[-1,'                                     this.lat + OpenLayers.Util.toFloat(lat));'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: equals'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * ll - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Boolean value indicating whether the passed-in '],[-1,'     *           &lt;OpenLayers.LonLat&gt; object has the same lon and lat '],[-1,'     *           components as this.'],[-1,'     *           Note: if ll passed in is null, returns false'],[-1,'     *\/'],[-1,'    equals:function(ll) {'],[0,'        var equals = false;'],[0,'        if (ll != null) {'],[0,'            equals = ((this.lon == ll.lon &amp;&amp; this.lat == ll.lat) ||'],[-1,'                      (isNaN(this.lon) &amp;&amp; isNaN(this.lat) &amp;&amp; isNaN(ll.lon) &amp;&amp; isNaN(ll.lat)));'],[-1,'        }'],[0,'        return equals;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: transform'],[-1,'     * Transform the LonLat object from source to dest. This transformation is'],[-1,'     *    *in place*: if you want a *new* lonlat, use .clone() first.'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * source - {&lt;OpenLayers.Projection&gt;} Source projection. '],[-1,'     * dest   - {&lt;OpenLayers.Projection&gt;} Destination projection. '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} Itself, for use in chaining operations.'],[-1,'     *\/'],[-1,'    transform: function(source, dest) {'],[0,'        var point = OpenLayers.Projection.transform('],[-1,'            {\'x\': this.lon, \'y\': this.lat}, source, dest);'],[0,'        this.lon = point.x;'],[0,'        this.lat = point.y;'],[0,'        return this;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: wrapDateLine'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * maxExtent - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} A copy of this lonlat, but wrapped around the '],[-1,'     *                       \&quot;dateline\&quot; (as specified by the borders of '],[-1,'     *                       maxExtent)'],[-1,'     *\/'],[-1,'    wrapDateLine: function(maxExtent) {    '],[-1,''],[0,'        var newLonLat = this.clone();'],[-1,'    '],[0,'        if (maxExtent) {'],[-1,'            \/\/shift right?'],[0,'            while (newLonLat.lon &lt; maxExtent.left) {'],[0,'                newLonLat.lon +=  maxExtent.getWidth();'],[-1,'            }    '],[-1,'           '],[-1,'            \/\/shift left?'],[0,'            while (newLonLat.lon &gt; maxExtent.right) {'],[0,'                newLonLat.lon -= maxExtent.getWidth();'],[-1,'            }    '],[-1,'        }'],[-1,'                '],[0,'        return newLonLat;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.LonLat\&quot;'],[-1,'});'],[-1,''],[-1,'\/** '],[-1,' * Function: fromString'],[-1,' * Alternative constructor that builds a new &lt;OpenLayers.LonLat&gt; from a '],[-1,' *     parameter string'],[-1,' * '],[-1,' * Parameters:'],[-1,' * str - {String} Comma-separated Lon,Lat coordinate string. '],[-1,' *                 (e.g. &lt;i&gt;\&quot;5,40\&quot;&lt;\/i&gt;)'],[-1,' * '],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.LonLat&gt;} New &lt;OpenLayers.LonLat&gt; object built from the '],[-1,' *                       passed-in String.'],[-1,' *\/'],[1,'OpenLayers.LonLat.fromString = function(str) {'],[0,'    var pair = str.split(\&quot;,\&quot;);'],[0,'    return new OpenLayers.LonLat(pair[0], pair[1]);'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * Function: fromArray'],[-1,' * Alternative constructor that builds a new &lt;OpenLayers.LonLat&gt; from an '],[-1,' *     array of two numbers that represent lon- and lat-values.'],[-1,' * '],[-1,' * Parameters:'],[-1,' * arr - {Array(Float)} Array of lon\/lat values (e.g. [5,-42])'],[-1,' * '],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.LonLat&gt;} New &lt;OpenLayers.LonLat&gt; object built from the '],[-1,' *                       passed-in array.'],[-1,' *\/'],[1,'OpenLayers.LonLat.fromArray = function(arr) {'],[0,'    var gotArr = OpenLayers.Util.isArray(arr),'],[-1,'        lon = gotArr &amp;&amp; arr[0],'],[-1,'        lat = gotArr &amp;&amp; arr[1];'],[0,'    return new OpenLayers.LonLat(lon, lat);'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/BaseTypes\/Pixel.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Pixel'],[-1,' * This class represents a screen coordinate, in x and y coordinates'],[-1,' *\/'],[1,'OpenLayers.Pixel = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: x'],[-1,'     * {Number} The x coordinate'],[-1,'     *\/'],[-1,'    x: 0.0,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: y'],[-1,'     * {Number} The y coordinate'],[-1,'     *\/'],[-1,'    y: 0.0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Pixel'],[-1,'     * Create a new OpenLayers.Pixel instance'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x - {Number} The x coordinate'],[-1,'     * y - {Number} The y coordinate'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * An instance of OpenLayers.Pixel'],[-1,'     *\/'],[-1,'    initialize: function(x, y) {'],[24,'        this.x = parseFloat(x);'],[24,'        this.y = parseFloat(y);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: toString'],[-1,'     * Cast this object into a string'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The string representation of Pixel. ex: \&quot;x=200.4,y=242.2\&quot;'],[-1,'     *\/'],[-1,'    toString:function() {'],[0,'        return (\&quot;x=\&quot; + this.x + \&quot;,y=\&quot; + this.y);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Return a clone of this pixel object'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} A clone pixel'],[-1,'     *\/'],[-1,'    clone:function() {'],[0,'        return new OpenLayers.Pixel(this.x, this.y); '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: equals'],[-1,'     * Determine whether one pixel is equivalent to another'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;|Object} An OpenLayers.Pixel or an object with'],[-1,'     *                                  a \'x\' and \'y\' properties.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The point passed in as parameter is equal to this. Note that'],[-1,'     * if px passed in is null, returns false.'],[-1,'     *\/'],[-1,'    equals:function(px) {'],[0,'        var equals = false;'],[0,'        if (px != null) {'],[0,'            equals = ((this.x == px.x &amp;&amp; this.y == px.y) ||'],[-1,'                      (isNaN(this.x) &amp;&amp; isNaN(this.y) &amp;&amp; isNaN(px.x) &amp;&amp; isNaN(px.y)));'],[-1,'        }'],[0,'        return equals;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: distanceTo'],[-1,'     * Returns the distance to the pixel point passed in as a parameter.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float} The pixel point passed in as parameter to calculate the'],[-1,'     *     distance to.'],[-1,'     *\/'],[-1,'    distanceTo:function(px) {'],[0,'        return Math.sqrt('],[-1,'            Math.pow(this.x - px.x, 2) +'],[-1,'            Math.pow(this.y - px.y, 2)'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: add'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x - {Integer}'],[-1,'     * y - {Integer}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} A new Pixel with this pixel\'s x&amp;y augmented by the '],[-1,'     * values passed in.'],[-1,'     *\/'],[-1,'    add:function(x, y) {'],[0,'        if ( (x == null) || (y == null) ) {'],[0,'            throw new TypeError(\'Pixel.add cannot receive null values\');'],[-1,'        }'],[0,'        return new OpenLayers.Pixel(this.x + x, this.y + y);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'    * APIMethod: offset'],[-1,'    * '],[-1,'    * Parameters'],[-1,'    * px - {&lt;OpenLayers.Pixel&gt;|Object} An OpenLayers.Pixel or an object with'],[-1,'    *                                  a \'x\' and \'y\' properties.'],[-1,'    * '],[-1,'    * Returns:'],[-1,'    * {&lt;OpenLayers.Pixel&gt;} A new Pixel with this pixel\'s x&amp;y augmented by the '],[-1,'    *                      x&amp;y values of the pixel passed in.'],[-1,'    *\/'],[-1,'    offset:function(px) {'],[0,'        var newPx = this.clone();'],[0,'        if (px) {'],[0,'            newPx = this.add(px.x, px.y);'],[-1,'        }'],[0,'        return newPx;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Pixel\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/BaseTypes\/Size.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Size'],[-1,' * Instances of this class represent a width\/height pair'],[-1,' *\/'],[1,'OpenLayers.Size = OpenLayers.Class({'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: w'],[-1,'     * {Number} width'],[-1,'     *\/'],[-1,'    w: 0.0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: h'],[-1,'     * {Number} height'],[-1,'     *\/'],[-1,'    h: 0.0,'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Size'],[-1,'     * Create an instance of OpenLayers.Size'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * w - {Number} width'],[-1,'     * h - {Number} height'],[-1,'     *\/'],[-1,'    initialize: function(w, h) {'],[26,'        this.w = parseFloat(w);'],[26,'        this.h = parseFloat(h);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: toString'],[-1,'     * Return the string representation of a size object'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The string representation of OpenLayers.Size object. '],[-1,'     * (e.g. &lt;i&gt;\&quot;w=55,h=66\&quot;&lt;\/i&gt;)'],[-1,'     *\/'],[-1,'    toString:function() {'],[0,'        return (\&quot;w=\&quot; + this.w + \&quot;,h=\&quot; + this.h);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Create a clone of this size object'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Size&gt;} A new OpenLayers.Size object with the same w and h'],[-1,'     * values'],[-1,'     *\/'],[-1,'    clone:function() {'],[0,'        return new OpenLayers.Size(this.w, this.h);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     *'],[-1,'     * APIMethod: equals'],[-1,'     * Determine where this size is equal to another'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * sz - {&lt;OpenLayers.Size&gt;|Object} An OpenLayers.Size or an object with'],[-1,'     *                                  a \'w\' and \'h\' properties.'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} The passed in size has the same h and w properties as this one.'],[-1,'     * Note that if sz passed in is null, returns false.'],[-1,'     *\/'],[-1,'    equals:function(sz) {'],[0,'        var equals = false;'],[0,'        if (sz != null) {'],[0,'            equals = ((this.w == sz.w &amp;&amp; this.h == sz.h) ||'],[-1,'                      (isNaN(this.w) &amp;&amp; isNaN(this.h) &amp;&amp; isNaN(sz.w) &amp;&amp; isNaN(sz.h)));'],[-1,'        }'],[0,'        return equals;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Size\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Console.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Console'],[-1,' * The OpenLayers.Console namespace is used for debugging and error logging.'],[-1,' * If the Firebug Lite (..\/Firebug\/firebug.js) is included before this script,'],[-1,' * calls to OpenLayers.Console methods will get redirected to window.console.'],[-1,' * This makes use of the Firebug extension where available and allows for'],[-1,' * cross-browser debugging Firebug style.'],[-1,' *'],[-1,' * Note:'],[-1,' * Note that behavior will differ with the Firebug extention and Firebug Lite.'],[-1,' * Most notably, the Firebug Lite console does not currently allow for'],[-1,' * hyperlinks to code or for clicking on object to explore their properties.'],[-1,' * '],[-1,' *\/'],[1,'OpenLayers.Console = {'],[-1,'    \/**'],[-1,'     * Create empty functions for all console methods.  The real value of these'],[-1,'     * properties will be set if Firebug Lite (..\/Firebug\/firebug.js script) is'],[-1,'     * included.  We explicitly require the Firebug Lite script to trigger'],[-1,'     * functionality of the OpenLayers.Console methods.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: log'],[-1,'     * Log an object in the console.  The Firebug Lite console logs string'],[-1,'     * representation of objects.  Given multiple arguments, they will'],[-1,'     * be cast to strings and logged with a space delimiter.  If the first'],[-1,'     * argument is a string with printf-like formatting, subsequent arguments'],[-1,'     * will be used in string substitution.  Any additional arguments (beyond'],[-1,'     * the number substituted in a format string) will be appended in a space-'],[-1,'     * delimited line.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * object - {Object}'],[-1,'     *\/'],[-1,'    log: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: debug'],[-1,'     * Writes a message to the console, including a hyperlink to the line'],[-1,'     * where it was called.'],[-1,'     *'],[-1,'     * May be called with multiple arguments as with OpenLayers.Console.log().'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * object - {Object}'],[-1,'     *\/'],[-1,'    debug: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: info'],[-1,'     * Writes a message to the console with the visual \&quot;info\&quot; icon and color'],[-1,'     * coding and a hyperlink to the line where it was called.'],[-1,'     *'],[-1,'     * May be called with multiple arguments as with OpenLayers.Console.log().'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * object - {Object}'],[-1,'     *\/'],[-1,'    info: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: warn'],[-1,'     * Writes a message to the console with the visual \&quot;warning\&quot; icon and'],[-1,'     * color coding and a hyperlink to the line where it was called.'],[-1,'     *'],[-1,'     * May be called with multiple arguments as with OpenLayers.Console.log().'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * object - {Object}'],[-1,'     *\/'],[-1,'    warn: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: error'],[-1,'     * Writes a message to the console with the visual \&quot;error\&quot; icon and color'],[-1,'     * coding and a hyperlink to the line where it was called.'],[-1,'     *'],[-1,'     * May be called with multiple arguments as with OpenLayers.Console.log().'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * object - {Object}'],[-1,'     *\/'],[-1,'    error: function() {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: userError'],[-1,'     * A single interface for showing error messages to the user. The default'],[-1,'     * behavior is a Javascript alert, though this can be overridden by'],[-1,'     * reassigning OpenLayers.Console.userError to a different function.'],[-1,'     *'],[-1,'     * Expects a single error message'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * error - {Object}'],[-1,'     *\/'],[-1,'    userError: function(error) {'],[0,'        alert(error);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: assert'],[-1,'     * Tests that an expression is true. If not, it will write a message to'],[-1,'     * the console and throw an exception.'],[-1,'     *'],[-1,'     * May be called with multiple arguments as with OpenLayers.Console.log().'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * object - {Object}'],[-1,'     *\/'],[-1,'    assert: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: dir'],[-1,'     * Prints an interactive listing of all properties of the object. This'],[-1,'     * looks identical to the view that you would see in the DOM tab.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * object - {Object}'],[-1,'     *\/'],[-1,'    dir: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: dirxml'],[-1,'     * Prints the XML source tree of an HTML or XML element. This looks'],[-1,'     * identical to the view that you would see in the HTML tab. You can click'],[-1,'     * on any node to inspect it in the HTML tab.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * object - {Object}'],[-1,'     *\/'],[-1,'    dirxml: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: trace'],[-1,'     * Prints an interactive stack trace of JavaScript execution at the point'],[-1,'     * where it is called.  The stack trace details the functions on the stack,'],[-1,'     * as well as the values that were passed as arguments to each function.'],[-1,'     * You can click each function to take you to its source in the Script tab,'],[-1,'     * and click each argument value to inspect it in the DOM or HTML tabs.'],[-1,'     * '],[-1,'     *\/'],[-1,'    trace: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: group'],[-1,'     * Writes a message to the console and opens a nested block to indent all'],[-1,'     * future messages sent to the console. Call OpenLayers.Console.groupEnd()'],[-1,'     * to close the block.'],[-1,'     *'],[-1,'     * May be called with multiple arguments as with OpenLayers.Console.log().'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * object - {Object}'],[-1,'     *\/'],[-1,'    group: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: groupEnd'],[-1,'     * Closes the most recently opened block created by a call to'],[-1,'     * OpenLayers.Console.group'],[-1,'     *\/'],[-1,'    groupEnd: function() {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: time'],[-1,'     * Creates a new timer under the given name. Call'],[-1,'     * OpenLayers.Console.timeEnd(name)'],[-1,'     * with the same name to stop the timer and print the time elapsed.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String}'],[-1,'     *\/'],[-1,'    time: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: timeEnd'],[-1,'     * Stops a timer created by a call to OpenLayers.Console.time(name) and'],[-1,'     * writes the time elapsed.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String}'],[-1,'     *\/'],[-1,'    timeEnd: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: profile'],[-1,'     * Turns on the JavaScript profiler. The optional argument title would'],[-1,'     * contain the text to be printed in the header of the profile report.'],[-1,'     *'],[-1,'     * This function is not currently implemented in Firebug Lite.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * title - {String} Optional title for the profiler'],[-1,'     *\/'],[-1,'    profile: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: profileEnd'],[-1,'     * Turns off the JavaScript profiler and prints its report.'],[-1,'     * '],[-1,'     * This function is not currently implemented in Firebug Lite.'],[-1,'     *\/'],[-1,'    profileEnd: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIFunction: count'],[-1,'     * Writes the number of times that the line of code where count was called'],[-1,'     * was executed. The optional argument title will print a message in'],[-1,'     * addition to the number of the count.'],[-1,'     *'],[-1,'     * This function is not currently implemented in Firebug Lite.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * title - {String} Optional title to be printed with count'],[-1,'     *\/'],[-1,'    count: function() {},'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Console\&quot;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Execute an anonymous function to extend the OpenLayers.Console namespace'],[-1,' * if the firebug.js script is included.  This closure is used so that the'],[-1,' * \&quot;scripts\&quot; and \&quot;i\&quot; variables don\'t pollute the global namespace.'],[-1,' *\/'],[1,'(function() {'],[-1,'    \/**'],[-1,'     * If Firebug Lite is included (before this script), re-route all'],[-1,'     * OpenLayers.Console calls to the console object.'],[-1,'     *\/'],[1,'    var scripts = document.getElementsByTagName(\&quot;script\&quot;);'],[1,'    for(var i=0, len=scripts.length; i&lt;len; ++i) {'],[5,'        if(scripts[i].src.indexOf(\&quot;firebug.js\&quot;) != -1) {'],[0,'            if(console) {'],[0,'                OpenLayers.Util.extend(OpenLayers.Console, console);'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[-1,'    }'],[-1,'})();'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Lang.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes.js'],[-1,' * @requires OpenLayers\/Console.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Lang'],[-1,' * Internationalization namespace.  Contains dictionaries in various languages'],[-1,' *     and methods to set and get the current language.'],[-1,' *\/'],[1,'OpenLayers.Lang = {'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: code'],[-1,'     * {String}  Current language code to use in OpenLayers.  Use the'],[-1,'     *     &lt;setCode&gt; method to set this value and the &lt;getCode&gt; method to'],[-1,'     *     retrieve it.'],[-1,'     *\/'],[-1,'    code: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: defaultCode'],[-1,'     * {String} Default language to use when a specific language can\'t be'],[-1,'     *     found.  Default is \&quot;en\&quot;.'],[-1,'     *\/'],[-1,'    defaultCode: \&quot;en\&quot;,'],[-1,'        '],[-1,'    \/**'],[-1,'     * APIFunction: getCode'],[-1,'     * Get the current language code.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The current language code.'],[-1,'     *\/'],[-1,'    getCode: function() {'],[0,'        if(!OpenLayers.Lang.code) {'],[0,'            OpenLayers.Lang.setCode();'],[-1,'        }'],[0,'        return OpenLayers.Lang.code;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIFunction: setCode'],[-1,'     * Set the language code for string translation.  This code is used by'],[-1,'     *     the &lt;OpenLayers.Lang.translate&gt; method.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * code - {String} These codes follow the IETF recommendations at'],[-1,'     *     http:\/\/www.ietf.org\/rfc\/rfc3066.txt.  If no value is set, the'],[-1,'     *     browser\'s language setting will be tested.  If no &lt;OpenLayers.Lang&gt;'],[-1,'     *     dictionary exists for the code, the &lt;OpenLayers.String.defaultLang&gt;'],[-1,'     *     will be used.'],[-1,'     *\/'],[-1,'    setCode: function(code) {'],[0,'        var lang;'],[0,'        if(!code) {'],[0,'            code = (OpenLayers.BROWSER_NAME == \&quot;msie\&quot;) ?'],[-1,'                navigator.userLanguage : navigator.language;'],[-1,'        }'],[0,'        var parts = code.split(\'-\');'],[0,'        parts[0] = parts[0].toLowerCase();'],[0,'        if(typeof OpenLayers.Lang[parts[0]] == \&quot;object\&quot;) {'],[0,'            lang = parts[0];'],[-1,'        }'],[-1,''],[-1,'        \/\/ check for regional extensions'],[0,'        if(parts[1]) {'],[0,'            var testLang = parts[0] + \'-\' + parts[1].toUpperCase();'],[0,'            if(typeof OpenLayers.Lang[testLang] == \&quot;object\&quot;) {'],[0,'                lang = testLang;'],[-1,'            }'],[-1,'        }'],[0,'        if(!lang) {'],[0,'            OpenLayers.Console.warn('],[-1,'                \'Failed to find OpenLayers.Lang.\' + parts.join(\&quot;-\&quot;) +'],[-1,'                \' dictionary, falling back to default language\''],[-1,'            );'],[0,'            lang = OpenLayers.Lang.defaultCode;'],[-1,'        }'],[-1,'        '],[0,'        OpenLayers.Lang.code = lang;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: translate'],[-1,'     * Looks up a key from a dictionary based on the current language string.'],[-1,'     *     The value of &lt;getCode&gt; will be used to determine the appropriate'],[-1,'     *     dictionary.  Dictionaries are stored in &lt;OpenLayers.Lang&gt;.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * key - {String} The key for an i18n string value in the dictionary.'],[-1,'     * context - {Object} Optional context to be used with'],[-1,'     *     &lt;OpenLayers.String.format&gt;.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} A internationalized string.'],[-1,'     *\/'],[-1,'    translate: function(key, context) {'],[0,'        var dictionary = OpenLayers.Lang[OpenLayers.Lang.getCode()];'],[0,'        var message = dictionary &amp;&amp; dictionary[key];'],[0,'        if(!message) {'],[-1,'            \/\/ Message not found, fall back to message key'],[0,'            message = key;'],[-1,'        }'],[0,'        if(context) {'],[0,'            message = OpenLayers.String.format(message, context);'],[-1,'        }'],[0,'        return message;'],[-1,'    }'],[-1,'    '],[-1,'};'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * APIMethod: OpenLayers.i18n'],[-1,' * Alias for &lt;OpenLayers.Lang.translate&gt;.  Looks up a key from a dictionary'],[-1,' *     based on the current language string. The value of'],[-1,' *     &lt;OpenLayers.Lang.getCode&gt; will be used to determine the appropriate'],[-1,' *     dictionary.  Dictionaries are stored in &lt;OpenLayers.Lang&gt;.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * key - {String} The key for an i18n string value in the dictionary.'],[-1,' * context - {Object} Optional context to be used with'],[-1,' *     &lt;OpenLayers.String.format&gt;.'],[-1,' * '],[-1,' * Returns:'],[-1,' * {String} A internationalized string.'],[-1,' *\/'],[1,'OpenLayers.i18n = OpenLayers.Lang.translate;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Util.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes.js'],[-1,' * @requires OpenLayers\/BaseTypes\/Bounds.js'],[-1,' * @requires OpenLayers\/BaseTypes\/Element.js'],[-1,' * @requires OpenLayers\/BaseTypes\/LonLat.js'],[-1,' * @requires OpenLayers\/BaseTypes\/Pixel.js'],[-1,' * @requires OpenLayers\/BaseTypes\/Size.js'],[-1,' * @requires OpenLayers\/Lang.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Namespace: Util'],[-1,' *\/'],[1,'OpenLayers.Util = OpenLayers.Util || {};'],[-1,''],[-1,'\/** '],[-1,' * Function: getElement'],[-1,' * This is the old $() from prototype'],[-1,' *'],[-1,' * Parameters:'],[-1,' * e - {String or DOMElement or Window}'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Array(DOMElement) or DOMElement}'],[-1,' *\/'],[1,'OpenLayers.Util.getElement = function() {'],[1,'    var elements = [];'],[-1,''],[1,'    for (var i=0, len=arguments.length; i&lt;len; i++) {'],[1,'        var element = arguments[i];'],[1,'        if (typeof element == \'string\') {'],[0,'            element = document.getElementById(element);'],[-1,'        }'],[1,'        if (arguments.length == 1) {'],[1,'            return element;'],[-1,'        }'],[0,'        elements.push(element);'],[-1,'    }'],[0,'    return elements;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: isElement'],[-1,' * A cross-browser implementation of \&quot;e instanceof Element\&quot;.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * o - {Object} The object to test.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Boolean}'],[-1,' *\/'],[1,'OpenLayers.Util.isElement = function(o) {'],[0,'    return !!(o &amp;&amp; o.nodeType === 1);'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: isArray'],[-1,' * Tests that the provided object is an array.'],[-1,' * This test handles the cross-IFRAME case not caught'],[-1,' * by \&quot;a instanceof Array\&quot; and should be used instead.'],[-1,' * '],[-1,' * Parameters:'],[-1,' * a - {Object} the object test.'],[-1,' * '],[-1,' * Returns:'],[-1,' * {Boolean} true if the object is an array.'],[-1,' *\/'],[1,'OpenLayers.Util.isArray = function(a) {'],[25,'    return (Object.prototype.toString.call(a) === \'[object Array]\');'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * Function: removeItem'],[-1,' * Remove an object from an array. Iterates through the array'],[-1,' *     to find the item, then removes it.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * array - {Array}'],[-1,' * item - {Object}'],[-1,' * '],[-1,' * Returns:'],[-1,' * {Array} A reference to the array'],[-1,' *\/'],[1,'OpenLayers.Util.removeItem = function(array, item) {'],[0,'    for(var i = array.length - 1; i &gt;= 0; i--) {'],[0,'        if(array[i] == item) {'],[0,'            array.splice(i,1);'],[-1,'            \/\/break;more than once??'],[-1,'        }'],[-1,'    }'],[0,'    return array;'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * Function: indexOf'],[-1,' * Seems to exist already in FF, but not in MOZ.'],[-1,' * '],[-1,' * Parameters:'],[-1,' * array - {Array}'],[-1,' * obj - {*}'],[-1,' * '],[-1,' * Returns:'],[-1,' * {Integer} The index at which the first object was found in the array.'],[-1,' *           If not found, returns -1.'],[-1,' *\/'],[1,'OpenLayers.Util.indexOf = function(array, obj) {'],[-1,'    \/\/ use the build-in function if available.'],[0,'    if (typeof array.indexOf == \&quot;function\&quot;) {'],[0,'        return array.indexOf(obj);'],[-1,'    } else {'],[0,'        for (var i = 0, len = array.length; i &lt; len; i++) {'],[0,'            if (array[i] == obj) {'],[0,'                return i;'],[-1,'            }'],[-1,'        }'],[0,'        return -1;   '],[-1,'    }'],[-1,'};'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * Property: dotless'],[-1,' * {RegExp}'],[-1,' * Compiled regular expression to match dots (\&quot;.\&quot;).  This is used for replacing'],[-1,' *     dots in identifiers.  Because object identifiers are frequently used for'],[-1,' *     DOM element identifiers by the library, we avoid using dots to make for'],[-1,' *     more sensible CSS selectors.'],[-1,' *'],[-1,' * TODO: Use a module pattern to avoid bloating the API with stuff like this.'],[-1,' *\/'],[1,'OpenLayers.Util.dotless = \/\\.\/g;'],[-1,''],[-1,'\/**'],[-1,' * Function: modifyDOMElement'],[-1,' * '],[-1,' * Modifies many properties of a DOM element all at once.  Passing in '],[-1,' * null to an individual parameter will avoid setting the attribute.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * element - {DOMElement} DOM element to modify.'],[-1,' * id - {String} The element id attribute to set.  Note that dots (\&quot;.\&quot;) will be'],[-1,' *     replaced with underscore (\&quot;_\&quot;) in setting the element id.'],[-1,' * px - {&lt;OpenLayers.Pixel&gt;|Object} The element left and top position,'],[-1,' *                                  OpenLayers.Pixel or an object with'],[-1,' *                                  a \'x\' and \'y\' properties.'],[-1,' * sz - {&lt;OpenLayers.Size&gt;|Object} The element width and height,'],[-1,' *                                 OpenLayers.Size or an object with a'],[-1,' *                                 \'w\' and \'h\' properties.'],[-1,' * position - {String}       The position attribute.  eg: absolute, '],[-1,' *                           relative, etc.'],[-1,' * border - {String}         The style.border attribute.  eg:'],[-1,' *                           solid black 2px'],[-1,' * overflow - {String}       The style.overview attribute.  '],[-1,' * opacity - {Float}         Fractional value (0.0 - 1.0)'],[-1,' *\/'],[1,'OpenLayers.Util.modifyDOMElement = function(element, id, px, sz, position, '],[-1,'                                            border, overflow, opacity) {'],[-1,''],[0,'    if (id) {'],[0,'        element.id = id.replace(OpenLayers.Util.dotless, \&quot;_\&quot;);'],[-1,'    }'],[0,'    if (px) {'],[0,'        element.style.left = px.x + \&quot;px\&quot;;'],[0,'        element.style.top = px.y + \&quot;px\&quot;;'],[-1,'    }'],[0,'    if (sz) {'],[0,'        element.style.width = sz.w + \&quot;px\&quot;;'],[0,'        element.style.height = sz.h + \&quot;px\&quot;;'],[-1,'    }'],[0,'    if (position) {'],[0,'        element.style.position = position;'],[-1,'    }'],[0,'    if (border) {'],[0,'        element.style.border = border;'],[-1,'    }'],[0,'    if (overflow) {'],[0,'        element.style.overflow = overflow;'],[-1,'    }'],[0,'    if (parseFloat(opacity) &gt;= 0.0 &amp;&amp; parseFloat(opacity) &lt; 1.0) {'],[0,'        element.style.filter = \'alpha(opacity=\' + (opacity * 100) + \')\';'],[0,'        element.style.opacity = opacity;'],[0,'    } else if (parseFloat(opacity) == 1.0) {'],[0,'        element.style.filter = \'\';'],[0,'        element.style.opacity = \'\';'],[-1,'    }'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * Function: createDiv'],[-1,' * Creates a new div and optionally set some standard attributes.'],[-1,' * Null may be passed to each parameter if you do not wish to'],[-1,' * set a particular attribute.'],[-1,' * Note - zIndex is NOT set on the resulting div.'],[-1,' * '],[-1,' * Parameters:'],[-1,' * id - {String} An identifier for this element.  If no id is'],[-1,' *               passed an identifier will be created '],[-1,' *               automatically.  Note that dots (\&quot;.\&quot;) will be replaced with'],[-1,' *               underscore (\&quot;_\&quot;) when generating ids.'],[-1,' * px - {&lt;OpenLayers.Pixel&gt;|Object} The element left and top position,'],[-1,' *                                  OpenLayers.Pixel or an object with'],[-1,' *                                  a \'x\' and \'y\' properties.'],[-1,' * sz - {&lt;OpenLayers.Size&gt;|Object} The element width and height,'],[-1,' *                                 OpenLayers.Size or an object with a'],[-1,' *                                 \'w\' and \'h\' properties.'],[-1,' * imgURL - {String} A url pointing to an image to use as a '],[-1,' *                   background image.'],[-1,' * position - {String} The style.position value. eg: absolute,'],[-1,' *                     relative etc.'],[-1,' * border - {String} The the style.border value. '],[-1,' *                   eg: 2px solid black'],[-1,' * overflow - {String} The style.overflow value. Eg. hidden'],[-1,' * opacity - {Float} Fractional value (0.0 - 1.0)'],[-1,' * '],[-1,' * Returns: '],[-1,' * {DOMElement} A DOM Div created with the specified attributes.'],[-1,' *\/'],[1,'OpenLayers.Util.createDiv = function(id, px, sz, imgURL, position, '],[-1,'                                     border, overflow, opacity) {'],[-1,''],[0,'    var dom = document.createElement(\'div\');'],[-1,''],[0,'    if (imgURL) {'],[0,'        dom.style.backgroundImage = \'url(\' + imgURL + \')\';'],[-1,'    }'],[-1,''],[-1,'    \/\/set generic properties'],[0,'    if (!id) {'],[0,'        id = OpenLayers.Util.createUniqueID(\&quot;OpenLayersDiv\&quot;);'],[-1,'    }'],[0,'    if (!position) {'],[0,'        position = \&quot;absolute\&quot;;'],[-1,'    }'],[0,'    OpenLayers.Util.modifyDOMElement(dom, id, px, sz, position, '],[-1,'                                     border, overflow, opacity);'],[-1,''],[0,'    return dom;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: createImage'],[-1,' * Creates an img element with specific attribute values.'],[-1,' *  '],[-1,' * Parameters:'],[-1,' * id - {String} The id field for the img.  If none assigned one will be'],[-1,' *               automatically generated.'],[-1,' * px - {&lt;OpenLayers.Pixel&gt;|Object} The element left and top position,'],[-1,' *                                  OpenLayers.Pixel or an object with'],[-1,' *                                  a \'x\' and \'y\' properties.'],[-1,' * sz - {&lt;OpenLayers.Size&gt;|Object} The element width and height,'],[-1,' *                                 OpenLayers.Size or an object with a'],[-1,' *                                 \'w\' and \'h\' properties.'],[-1,' * imgURL - {String} The url to use as the image source.'],[-1,' * position - {String} The style.position value.'],[-1,' * border - {String} The border to place around the image.'],[-1,' * opacity - {Float} Fractional value (0.0 - 1.0)'],[-1,' * delayDisplay - {Boolean} If true waits until the image has been'],[-1,' *                          loaded.'],[-1,' * '],[-1,' * Returns:'],[-1,' * {DOMElement} A DOM Image created with the specified attributes.'],[-1,' *\/'],[1,'OpenLayers.Util.createImage = function(id, px, sz, imgURL, position, border,'],[-1,'                                       opacity, delayDisplay) {'],[-1,''],[0,'    var image = document.createElement(\&quot;img\&quot;);'],[-1,''],[-1,'    \/\/set generic properties'],[0,'    if (!id) {'],[0,'        id = OpenLayers.Util.createUniqueID(\&quot;OpenLayersDiv\&quot;);'],[-1,'    }'],[0,'    if (!position) {'],[0,'        position = \&quot;relative\&quot;;'],[-1,'    }'],[0,'    OpenLayers.Util.modifyDOMElement(image, id, px, sz, position, '],[-1,'                                     border, null, opacity);'],[-1,''],[0,'    if (delayDisplay) {'],[0,'        image.style.display = \&quot;none\&quot;;'],[0,'        function display() {'],[0,'            image.style.display = \&quot;\&quot;;'],[0,'            OpenLayers.Event.stopObservingElement(image);'],[-1,'        }'],[0,'        OpenLayers.Event.observe(image, \&quot;load\&quot;, display);'],[0,'        OpenLayers.Event.observe(image, \&quot;error\&quot;, display);'],[-1,'    }'],[-1,'    '],[-1,'    \/\/set special properties'],[0,'    image.style.alt = id;'],[0,'    image.galleryImg = \&quot;no\&quot;;'],[0,'    if (imgURL) {'],[0,'        image.src = imgURL;'],[-1,'    }'],[-1,'        '],[0,'    return image;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Property: IMAGE_RELOAD_ATTEMPTS'],[-1,' * {Integer} How many times should we try to reload an image before giving up?'],[-1,' *           Default is 0'],[-1,' *\/'],[1,'OpenLayers.IMAGE_RELOAD_ATTEMPTS = 0;'],[-1,''],[-1,'\/**'],[-1,' * Property: alphaHackNeeded'],[-1,' * {Boolean} true if the png alpha hack is necessary and possible, false otherwise.'],[-1,' *\/'],[1,'OpenLayers.Util.alphaHackNeeded = null;'],[-1,''],[-1,'\/**'],[-1,' * Function: alphaHack'],[-1,' * Checks whether it\'s necessary (and possible) to use the png alpha'],[-1,' * hack which allows alpha transparency for png images under Internet'],[-1,' * Explorer.'],[-1,' * '],[-1,' * Returns:'],[-1,' * {Boolean} true if the png alpha hack is necessary and possible, false otherwise.'],[-1,' *\/'],[1,'OpenLayers.Util.alphaHack = function() {'],[0,'    if (OpenLayers.Util.alphaHackNeeded == null) {'],[0,'        var arVersion = navigator.appVersion.split(\&quot;MSIE\&quot;);'],[0,'        var version = parseFloat(arVersion[1]);'],[0,'        var filter = false;'],[-1,'    '],[-1,'        \/\/ IEs4Lin dies when trying to access document.body.filters, because '],[-1,'        \/\/ the property is there, but requires a DLL that can\'t be provided. This'],[-1,'        \/\/ means that we need to wrap this in a try\/catch so that this can'],[-1,'        \/\/ continue.'],[-1,'    '],[0,'        try { '],[0,'            filter = !!(document.body.filters);'],[-1,'        } catch (e) {}    '],[-1,'    '],[0,'        OpenLayers.Util.alphaHackNeeded = (filter &amp;&amp; '],[-1,'                                           (version &gt;= 5.5) &amp;&amp; (version &lt; 7));'],[-1,'    }'],[0,'    return OpenLayers.Util.alphaHackNeeded;'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * Function: modifyAlphaImageDiv'],[-1,' * '],[-1,' * Parameters:'],[-1,' * div - {DOMElement} Div containing Alpha-adjusted Image'],[-1,' * id - {String}'],[-1,' * px - {&lt;OpenLayers.Pixel&gt;|Object} OpenLayers.Pixel or an object with'],[-1,' *                                  a \'x\' and \'y\' properties.'],[-1,' * sz - {&lt;OpenLayers.Size&gt;|Object} OpenLayers.Size or an object with'],[-1,' *                                 a \'w\' and \'h\' properties.'],[-1,' * imgURL - {String}'],[-1,' * position - {String}'],[-1,' * border - {String}'],[-1,' * sizing - {String} \'crop\', \'scale\', or \'image\'. Default is \&quot;scale\&quot;'],[-1,' * opacity - {Float} Fractional value (0.0 - 1.0)'],[-1,' *\/ '],[1,'OpenLayers.Util.modifyAlphaImageDiv = function(div, id, px, sz, imgURL, '],[-1,'                                               position, border, sizing, '],[-1,'                                               opacity) {'],[-1,''],[0,'    OpenLayers.Util.modifyDOMElement(div, id, px, sz, position,'],[-1,'                                     null, null, opacity);'],[-1,''],[0,'    var img = div.childNodes[0];'],[-1,''],[0,'    if (imgURL) {'],[0,'        img.src = imgURL;'],[-1,'    }'],[0,'    OpenLayers.Util.modifyDOMElement(img, div.id + \&quot;_innerImage\&quot;, null, sz, '],[-1,'                                     \&quot;relative\&quot;, border);'],[-1,'    '],[0,'    if (OpenLayers.Util.alphaHack()) {'],[0,'        if(div.style.display != \&quot;none\&quot;) {'],[0,'            div.style.display = \&quot;inline-block\&quot;;'],[-1,'        }'],[0,'        if (sizing == null) {'],[0,'            sizing = \&quot;scale\&quot;;'],[-1,'        }'],[-1,'        '],[0,'        div.style.filter = \&quot;progid:DXImageTransform.Microsoft\&quot; +'],[-1,'                           \&quot;.AlphaImageLoader(src=\'\&quot; + img.src + \&quot;\', \&quot; +'],[-1,'                           \&quot;sizingMethod=\'\&quot; + sizing + \&quot;\')\&quot;;'],[0,'        if (parseFloat(div.style.opacity) &gt;= 0.0 &amp;&amp; '],[-1,'            parseFloat(div.style.opacity) &lt; 1.0) {'],[0,'            div.style.filter += \&quot; alpha(opacity=\&quot; + div.style.opacity * 100 + \&quot;)\&quot;;'],[-1,'        }'],[-1,''],[0,'        img.style.filter = \&quot;alpha(opacity=0)\&quot;;'],[-1,'    }'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * Function: createAlphaImageDiv'],[-1,' * '],[-1,' * Parameters:'],[-1,' * id - {String}'],[-1,' * px - {&lt;OpenLayers.Pixel&gt;|Object} OpenLayers.Pixel or an object with'],[-1,' *                                  a \'x\' and \'y\' properties.'],[-1,' * sz - {&lt;OpenLayers.Size&gt;|Object} OpenLayers.Size or an object with'],[-1,' *                                 a \'w\' and \'h\' properties.'],[-1,' * imgURL - {String}'],[-1,' * position - {String}'],[-1,' * border - {String}'],[-1,' * sizing - {String} \'crop\', \'scale\', or \'image\'. Default is \&quot;scale\&quot;'],[-1,' * opacity - {Float} Fractional value (0.0 - 1.0)'],[-1,' * delayDisplay - {Boolean} If true waits until the image has been'],[-1,' *                          loaded.'],[-1,' * '],[-1,' * Returns:'],[-1,' * {DOMElement} A DOM Div created with a DOM Image inside it. If the hack is '],[-1,' *              needed for transparency in IE, it is added.'],[-1,' *\/ '],[1,'OpenLayers.Util.createAlphaImageDiv = function(id, px, sz, imgURL, '],[-1,'                                               position, border, sizing, '],[-1,'                                               opacity, delayDisplay) {'],[-1,'    '],[0,'    var div = OpenLayers.Util.createDiv();'],[0,'    var img = OpenLayers.Util.createImage(null, null, null, null, null, null, '],[-1,'                                          null, delayDisplay);'],[0,'    img.className = \&quot;olAlphaImg\&quot;;'],[0,'    div.appendChild(img);'],[-1,''],[0,'    OpenLayers.Util.modifyAlphaImageDiv(div, id, px, sz, imgURL, position, '],[-1,'                                        border, sizing, opacity);'],[-1,'    '],[0,'    return div;'],[-1,'};'],[-1,''],[-1,''],[-1,'\/** '],[-1,' * Function: upperCaseObject'],[-1,' * Creates a new hashtable and copies over all the keys from the '],[-1,' *     passed-in object, but storing them under an uppercased'],[-1,' *     version of the key at which they were stored.'],[-1,' * '],[-1,' * Parameters: '],[-1,' * object - {Object}'],[-1,' * '],[-1,' * Returns: '],[-1,' * {Object} A new Object with all the same keys but uppercased'],[-1,' *\/'],[1,'OpenLayers.Util.upperCaseObject = function (object) {'],[0,'    var uObject = {};'],[0,'    for (var key in object) {'],[0,'        uObject[key.toUpperCase()] = object[key];'],[-1,'    }'],[0,'    return uObject;'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * Function: applyDefaults'],[-1,' * Takes an object and copies any properties that don\'t exist from'],[-1,' *     another properties, by analogy with OpenLayers.Util.extend() from'],[-1,' *     Prototype.js.'],[-1,' * '],[-1,' * Parameters:'],[-1,' * to - {Object} The destination object.'],[-1,' * from - {Object} The source object.  Any properties of this object that'],[-1,' *     are undefined in the to object will be set on the to object.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Object} A reference to the to object.  Note that the to argument is modified'],[-1,' *     in place and returned by this function.'],[-1,' *\/'],[1,'OpenLayers.Util.applyDefaults = function (to, from) {'],[34,'    to = to || {};'],[-1,'    \/*'],[-1,'     * FF\/Windows &lt; 2.0.0.13 reports \&quot;Illegal operation on WrappedNative'],[-1,'     * prototype object\&quot; when calling hawOwnProperty if the source object is an'],[-1,'     * instance of window.Event.'],[-1,'     *\/'],[34,'    var fromIsEvt = typeof window.Event == \&quot;function\&quot;'],[-1,'                    &amp;&amp; from instanceof window.Event;'],[-1,''],[34,'    for (var key in from) {'],[841,'        if (to[key] === undefined ||'],[-1,'            (!fromIsEvt &amp;&amp; from.hasOwnProperty'],[-1,'             &amp;&amp; from.hasOwnProperty(key) &amp;&amp; !to.hasOwnProperty(key))) {'],[821,'            to[key] = from[key];'],[-1,'        }'],[-1,'    }'],[-1,'    \/**'],[-1,'     * IE doesn\'t include the toString property when iterating over an object\'s'],[-1,'     * properties with the for(property in object) syntax.  Explicitly check if'],[-1,'     * the source has its own toString property.'],[-1,'     *\/'],[34,'    if(!fromIsEvt &amp;&amp; from &amp;&amp; from.hasOwnProperty'],[-1,'       &amp;&amp; from.hasOwnProperty(\'toString\') &amp;&amp; !to.hasOwnProperty(\'toString\')) {'],[0,'        to.toString = from.toString;'],[-1,'    }'],[-1,'    '],[34,'    return to;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: getParameterString'],[-1,' * '],[-1,' * Parameters:'],[-1,' * params - {Object}'],[-1,' * '],[-1,' * Returns:'],[-1,' * {String} A concatenation of the properties of an object in '],[-1,' *          http parameter notation. '],[-1,' *          (ex. &lt;i&gt;\&quot;key1=value1&amp;key2=value2&amp;key3=value3\&quot;&lt;\/i&gt;)'],[-1,' *          If a parameter is actually a list, that parameter will then'],[-1,' *          be set to a comma-seperated list of values (foo,bar) instead'],[-1,' *          of being URL escaped (foo%3Abar). '],[-1,' *\/'],[1,'OpenLayers.Util.getParameterString = function(params) {'],[0,'    var paramsArray = [];'],[-1,'    '],[0,'    for (var key in params) {'],[0,'      var value = params[key];'],[0,'      if ((value != null) &amp;&amp; (typeof value != \'function\')) {'],[0,'        var encodedValue;'],[0,'        if (typeof value == \'object\' &amp;&amp; value.constructor == Array) {'],[-1,'          \/* value is an array; encode items and separate with \&quot;,\&quot; *\/'],[0,'          var encodedItemArray = [];'],[0,'          var item;'],[0,'          for (var itemIndex=0, len=value.length; itemIndex&lt;len; itemIndex++) {'],[0,'            item = value[itemIndex];'],[0,'            encodedItemArray.push(encodeURIComponent('],[-1,'                (item === null || item === undefined) ? \&quot;\&quot; : item)'],[-1,'            );'],[-1,'          }'],[0,'          encodedValue = encodedItemArray.join(\&quot;,\&quot;);'],[-1,'        }'],[-1,'        else {'],[-1,'          \/* value is a string; simply encode *\/'],[0,'          encodedValue = encodeURIComponent(value);'],[-1,'        }'],[0,'        paramsArray.push(encodeURIComponent(key) + \&quot;=\&quot; + encodedValue);'],[-1,'      }'],[-1,'    }'],[-1,'    '],[0,'    return paramsArray.join(\&quot;&amp;\&quot;);'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: urlAppend'],[-1,' * Appends a parameter string to a url. This function includes the logic for'],[-1,' * using the appropriate character (none, &amp; or ?) to append to the url before'],[-1,' * appending the param string.'],[-1,' * '],[-1,' * Parameters:'],[-1,' * url - {String} The url to append to'],[-1,' * paramStr - {String} The param string to append'],[-1,' * '],[-1,' * Returns:'],[-1,' * {String} The new url'],[-1,' *\/'],[1,'OpenLayers.Util.urlAppend = function(url, paramStr) {'],[0,'    var newUrl = url;'],[0,'    if(paramStr) {'],[0,'        var parts = (url + \&quot; \&quot;).split(\/[?&amp;]\/);'],[0,'        newUrl += (parts.pop() === \&quot; \&quot; ?'],[-1,'            paramStr :'],[-1,'            parts.length ? \&quot;&amp;\&quot; + paramStr : \&quot;?\&quot; + paramStr);'],[-1,'    }'],[0,'    return newUrl;'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * Function: getImagesLocation'],[-1,' * '],[-1,' * Returns:'],[-1,' * {String} The fully formatted image location string'],[-1,' *\/'],[1,'OpenLayers.Util.getImagesLocation = function() {'],[0,'    return OpenLayers.ImgPath || (OpenLayers._getScriptLocation() + \&quot;img\/\&quot;);'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * Function: getImageLocation'],[-1,' * '],[-1,' * Returns:'],[-1,' * {String} The fully formatted location string for a specified image'],[-1,' *\/'],[1,'OpenLayers.Util.getImageLocation = function(image) {'],[0,'    return OpenLayers.Util.getImagesLocation() + image;'],[-1,'};'],[-1,''],[-1,''],[-1,'\/** '],[-1,' * Function: Try'],[-1,' * Execute functions until one of them doesn\'t throw an error. '],[-1,' *     Capitalized because \&quot;try\&quot; is a reserved word in JavaScript.'],[-1,' *     Taken directly from OpenLayers.Util.Try()'],[-1,' * '],[-1,' * Parameters:'],[-1,' * [*] - {Function} Any number of parameters may be passed to Try()'],[-1,' *    It will attempt to execute each of them until one of them '],[-1,' *    successfully executes. '],[-1,' *    If none executes successfully, returns null.'],[-1,' * '],[-1,' * Returns:'],[-1,' * {*} The value returned by the first successfully executed function.'],[-1,' *\/'],[1,'OpenLayers.Util.Try = function() {'],[0,'    var returnValue = null;'],[-1,''],[0,'    for (var i=0, len=arguments.length; i&lt;len; i++) {'],[0,'      var lambda = arguments[i];'],[0,'      try {'],[0,'        returnValue = lambda();'],[0,'        break;'],[-1,'      } catch (e) {}'],[-1,'    }'],[-1,''],[0,'    return returnValue;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: getXmlNodeValue'],[-1,' * '],[-1,' * Parameters:'],[-1,' * node - {XMLNode}'],[-1,' * '],[-1,' * Returns:'],[-1,' * {String} The text value of the given node, without breaking in firefox or IE'],[-1,' *\/'],[1,'OpenLayers.Util.getXmlNodeValue = function(node) {'],[0,'    var val = null;'],[0,'    OpenLayers.Util.Try( '],[-1,'        function() {'],[0,'            val = node.text;'],[0,'            if (!val) {'],[0,'                val = node.textContent;'],[-1,'            }'],[0,'            if (!val) {'],[0,'                val = node.firstChild.nodeValue;'],[-1,'            }'],[-1,'        }, '],[-1,'        function() {'],[0,'            val = node.textContent;'],[-1,'        }); '],[0,'    return val;'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * Function: mouseLeft'],[-1,' * '],[-1,' * Parameters:'],[-1,' * evt - {Event}'],[-1,' * div - {HTMLDivElement}'],[-1,' * '],[-1,' * Returns:'],[-1,' * {Boolean}'],[-1,' *\/'],[1,'OpenLayers.Util.mouseLeft = function (evt, div) {'],[-1,'    \/\/ start with the element to which the mouse has moved'],[0,'    var target = (evt.relatedTarget) ? evt.relatedTarget : evt.toElement;'],[-1,'    \/\/ walk up the DOM tree.'],[0,'    while (target != div &amp;&amp; target != null) {'],[0,'        target = target.parentNode;'],[-1,'    }'],[-1,'    \/\/ if the target we stop at isn\'t the div, then we\'ve left the div.'],[0,'    return (target != div);'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Property: precision'],[-1,' * {Number} The number of significant digits to retain to avoid'],[-1,' * floating point precision errors.'],[-1,' *'],[-1,' * We use 14 as a \&quot;safe\&quot; default because, although IEEE 754 double floats'],[-1,' * (standard on most modern operating systems) support up to about 16'],[-1,' * significant digits, 14 significant digits are sufficient to represent'],[-1,' * sub-millimeter accuracy in any coordinate system that anyone is likely to'],[-1,' * use with OpenLayers.'],[-1,' *'],[-1,' * If DEFAULT_PRECISION is set to 0, the original non-truncating behavior'],[-1,' * of OpenLayers &lt;2.8 is preserved. Be aware that this will cause problems'],[-1,' * with certain projections, e.g. spherical Mercator.'],[-1,' *'],[-1,' *\/'],[1,'OpenLayers.Util.DEFAULT_PRECISION = 14;'],[-1,''],[-1,'\/**'],[-1,' * Function: toFloat'],[-1,' * Convenience method to cast an object to a Number, rounded to the'],[-1,' * desired floating point precision.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * number    - {Number} The number to cast and round.'],[-1,' * precision - {Number} An integer suitable for use with'],[-1,' *      Number.toPrecision(). Defaults to OpenLayers.Util.DEFAULT_PRECISION.'],[-1,' *      If set to 0, no rounding is performed.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Number} The cast, rounded number.'],[-1,' *\/'],[1,'OpenLayers.Util.toFloat = function (number, precision) {'],[76,'    if (precision == null) {'],[76,'        precision = OpenLayers.Util.DEFAULT_PRECISION;'],[-1,'    }'],[76,'    if (typeof number !== \&quot;number\&quot;) {'],[0,'        number = parseFloat(number);'],[-1,'    }'],[76,'    return precision === 0 ? number :'],[-1,'                             parseFloat(number.toPrecision(precision));'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: rad'],[-1,' * '],[-1,' * Parameters:'],[-1,' * x - {Float}'],[-1,' * '],[-1,' * Returns:'],[-1,' * {Float}'],[-1,' *\/'],[1,'OpenLayers.Util.rad = function(x) {return x*Math.PI\/180;};'],[-1,''],[-1,'\/**'],[-1,' * Function: deg'],[-1,' *'],[-1,' * Parameters:'],[-1,' * x - {Float}'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Float}'],[-1,' *\/'],[1,'OpenLayers.Util.deg = function(x) {return x*180\/Math.PI;};'],[-1,''],[-1,'\/**'],[-1,' * Property: VincentyConstants'],[-1,' * {Object} Constants for Vincenty functions.'],[-1,' *\/'],[1,'OpenLayers.Util.VincentyConstants = {'],[-1,'    a: 6378137,'],[-1,'    b: 6356752.3142,'],[-1,'    f: 1\/298.257223563'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * APIFunction: distVincenty'],[-1,' * Given two objects representing points with geographic coordinates, this'],[-1,' *     calculates the distance between those points on the surface of an'],[-1,' *     ellipsoid.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * p1 - {&lt;OpenLayers.LonLat&gt;} (or any object with both .lat, .lon properties)'],[-1,' * p2 - {&lt;OpenLayers.LonLat&gt;} (or any object with both .lat, .lon properties)'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Float} The distance (in km) between the two input points as measured on an'],[-1,' *     ellipsoid.  Note that the input point objects must be in geographic'],[-1,' *     coordinates (decimal degrees) and the return distance is in kilometers.'],[-1,' *\/'],[1,'OpenLayers.Util.distVincenty = function(p1, p2) {'],[0,'    var ct = OpenLayers.Util.VincentyConstants;'],[0,'    var a = ct.a, b = ct.b, f = ct.f;'],[-1,''],[0,'    var L = OpenLayers.Util.rad(p2.lon - p1.lon);'],[0,'    var U1 = Math.atan((1-f) * Math.tan(OpenLayers.Util.rad(p1.lat)));'],[0,'    var U2 = Math.atan((1-f) * Math.tan(OpenLayers.Util.rad(p2.lat)));'],[0,'    var sinU1 = Math.sin(U1), cosU1 = Math.cos(U1);'],[0,'    var sinU2 = Math.sin(U2), cosU2 = Math.cos(U2);'],[0,'    var lambda = L, lambdaP = 2*Math.PI;'],[0,'    var iterLimit = 20;'],[0,'    while (Math.abs(lambda-lambdaP) &gt; 1e-12 &amp;&amp; --iterLimit&gt;0) {'],[0,'        var sinLambda = Math.sin(lambda), cosLambda = Math.cos(lambda);'],[0,'        var sinSigma = Math.sqrt((cosU2*sinLambda) * (cosU2*sinLambda) +'],[-1,'        (cosU1*sinU2-sinU1*cosU2*cosLambda) * (cosU1*sinU2-sinU1*cosU2*cosLambda));'],[0,'        if (sinSigma==0) {'],[0,'            return 0;  \/\/ co-incident points'],[-1,'        }'],[0,'        var cosSigma = sinU1*sinU2 + cosU1*cosU2*cosLambda;'],[0,'        var sigma = Math.atan2(sinSigma, cosSigma);'],[0,'        var alpha = Math.asin(cosU1 * cosU2 * sinLambda \/ sinSigma);'],[0,'        var cosSqAlpha = Math.cos(alpha) * Math.cos(alpha);'],[0,'        var cos2SigmaM = cosSigma - 2*sinU1*sinU2\/cosSqAlpha;'],[0,'        var C = f\/16*cosSqAlpha*(4+f*(4-3*cosSqAlpha));'],[0,'        lambdaP = lambda;'],[0,'        lambda = L + (1-C) * f * Math.sin(alpha) *'],[-1,'        (sigma + C*sinSigma*(cos2SigmaM+C*cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)));'],[-1,'    }'],[0,'    if (iterLimit==0) {'],[0,'        return NaN;  \/\/ formula failed to converge'],[-1,'    }'],[0,'    var uSq = cosSqAlpha * (a*a - b*b) \/ (b*b);'],[0,'    var A = 1 + uSq\/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));'],[0,'    var B = uSq\/1024 * (256+uSq*(-128+uSq*(74-47*uSq)));'],[0,'    var deltaSigma = B*sinSigma*(cos2SigmaM+B\/4*(cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)-'],[-1,'        B\/6*cos2SigmaM*(-3+4*sinSigma*sinSigma)*(-3+4*cos2SigmaM*cos2SigmaM)));'],[0,'    var s = b*A*(sigma-deltaSigma);'],[0,'    var d = s.toFixed(3)\/1000; \/\/ round to 1mm precision'],[0,'    return d;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * APIFunction: destinationVincenty'],[-1,' * Calculate destination point given start point lat\/long (numeric degrees),'],[-1,' * bearing (numeric degrees) &amp; distance (in m).'],[-1,' * Adapted from Chris Veness work, see'],[-1,' * http:\/\/www.movable-type.co.uk\/scripts\/latlong-vincenty-direct.html'],[-1,' *'],[-1,' * Parameters:'],[-1,' * lonlat  - {&lt;OpenLayers.LonLat&gt;} (or any object with both .lat, .lon'],[-1,' *     properties) The start point.'],[-1,' * brng     - {Float} The bearing (degrees).'],[-1,' * dist     - {Float} The ground distance (meters).'],[-1,' *'],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.LonLat&gt;} The destination point.'],[-1,' *\/'],[1,'OpenLayers.Util.destinationVincenty = function(lonlat, brng, dist) {'],[0,'    var u = OpenLayers.Util;'],[0,'    var ct = u.VincentyConstants;'],[0,'    var a = ct.a, b = ct.b, f = ct.f;'],[-1,''],[0,'    var lon1 = lonlat.lon;'],[0,'    var lat1 = lonlat.lat;'],[-1,''],[0,'    var s = dist;'],[0,'    var alpha1 = u.rad(brng);'],[0,'    var sinAlpha1 = Math.sin(alpha1);'],[0,'    var cosAlpha1 = Math.cos(alpha1);'],[-1,''],[0,'    var tanU1 = (1-f) * Math.tan(u.rad(lat1));'],[0,'    var cosU1 = 1 \/ Math.sqrt((1 + tanU1*tanU1)), sinU1 = tanU1*cosU1;'],[0,'    var sigma1 = Math.atan2(tanU1, cosAlpha1);'],[0,'    var sinAlpha = cosU1 * sinAlpha1;'],[0,'    var cosSqAlpha = 1 - sinAlpha*sinAlpha;'],[0,'    var uSq = cosSqAlpha * (a*a - b*b) \/ (b*b);'],[0,'    var A = 1 + uSq\/16384*(4096+uSq*(-768+uSq*(320-175*uSq)));'],[0,'    var B = uSq\/1024 * (256+uSq*(-128+uSq*(74-47*uSq)));'],[-1,''],[0,'    var sigma = s \/ (b*A), sigmaP = 2*Math.PI;'],[0,'    while (Math.abs(sigma-sigmaP) &gt; 1e-12) {'],[0,'        var cos2SigmaM = Math.cos(2*sigma1 + sigma);'],[0,'        var sinSigma = Math.sin(sigma);'],[0,'        var cosSigma = Math.cos(sigma);'],[0,'        var deltaSigma = B*sinSigma*(cos2SigmaM+B\/4*(cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)-'],[-1,'            B\/6*cos2SigmaM*(-3+4*sinSigma*sinSigma)*(-3+4*cos2SigmaM*cos2SigmaM)));'],[0,'        sigmaP = sigma;'],[0,'        sigma = s \/ (b*A) + deltaSigma;'],[-1,'    }'],[-1,''],[0,'    var tmp = sinU1*sinSigma - cosU1*cosSigma*cosAlpha1;'],[0,'    var lat2 = Math.atan2(sinU1*cosSigma + cosU1*sinSigma*cosAlpha1,'],[-1,'        (1-f)*Math.sqrt(sinAlpha*sinAlpha + tmp*tmp));'],[0,'    var lambda = Math.atan2(sinSigma*sinAlpha1, cosU1*cosSigma - sinU1*sinSigma*cosAlpha1);'],[0,'    var C = f\/16*cosSqAlpha*(4+f*(4-3*cosSqAlpha));'],[0,'    var L = lambda - (1-C) * f * sinAlpha *'],[-1,'        (sigma + C*sinSigma*(cos2SigmaM+C*cosSigma*(-1+2*cos2SigmaM*cos2SigmaM)));'],[-1,''],[0,'    var revAz = Math.atan2(sinAlpha, -tmp);  \/\/ final bearing'],[-1,''],[0,'    return new OpenLayers.LonLat(lon1+u.deg(L), u.deg(lat2));'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: getParameters'],[-1,' * Parse the parameters from a URL or from the current page itself into a '],[-1,' *     JavaScript Object. Note that parameter values with commas are separated'],[-1,' *     out into an Array.'],[-1,' * '],[-1,' * Parameters:'],[-1,' * url - {String} Optional url used to extract the query string.'],[-1,' *                If url is null or is not supplied, query string is taken '],[-1,' *                from the page location.'],[-1,' * '],[-1,' * Returns:'],[-1,' * {Object} An object of key\/value pairs from the query string.'],[-1,' *\/'],[1,'OpenLayers.Util.getParameters = function(url) {'],[-1,'    \/\/ if no url specified, take it from the location bar'],[0,'    url = (url === null || url === undefined) ? window.location.href : url;'],[-1,''],[-1,'    \/\/parse out parameters portion of url string'],[0,'    var paramsString = \&quot;\&quot;;'],[0,'    if (OpenLayers.String.contains(url, \'?\')) {'],[0,'        var start = url.indexOf(\'?\') + 1;'],[0,'        var end = OpenLayers.String.contains(url, \&quot;#\&quot;) ?'],[-1,'                    url.indexOf(\'#\') : url.length;'],[0,'        paramsString = url.substring(start, end);'],[-1,'    }'],[-1,''],[0,'    var parameters = {};'],[0,'    var pairs = paramsString.split(\/[&amp;;]\/);'],[0,'    for(var i=0, len=pairs.length; i&lt;len; ++i) {'],[0,'        var keyValue = pairs[i].split(\'=\');'],[0,'        if (keyValue[0]) {'],[-1,''],[0,'            var key = keyValue[0];'],[0,'            try {'],[0,'                key = decodeURIComponent(key);'],[-1,'            } catch (err) {'],[0,'                key = unescape(key);'],[-1,'            }'],[-1,'            '],[-1,'            \/\/ being liberal by replacing \&quot;+\&quot; with \&quot; \&quot;'],[0,'            var value = (keyValue[1] || \'\').replace(\/\\+\/g, \&quot; \&quot;);'],[-1,''],[0,'            try {'],[0,'                value = decodeURIComponent(value);'],[-1,'            } catch (err) {'],[0,'                value = unescape(value);'],[-1,'            }'],[-1,'            '],[-1,'            \/\/ follow OGC convention of comma delimited values'],[0,'            value = value.split(\&quot;,\&quot;);'],[-1,''],[-1,'            \/\/if there\'s only one value, do not return as array                    '],[0,'            if (value.length == 1) {'],[0,'                value = value[0];'],[-1,'            }                '],[-1,'            '],[0,'            parameters[key] = value;'],[-1,'         }'],[-1,'     }'],[0,'    return parameters;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Property: lastSeqID'],[-1,' * {Integer} The ever-incrementing count variable.'],[-1,' *           Used for generating unique ids.'],[-1,' *\/'],[1,'OpenLayers.Util.lastSeqID = 0;'],[-1,''],[-1,'\/**'],[-1,' * Function: createUniqueID'],[-1,' * Create a unique identifier for this session.  Each time this function'],[-1,' *     is called, a counter is incremented.  The return will be the optional'],[-1,' *     prefix (defaults to \&quot;id_\&quot;) appended with the counter value.'],[-1,' * '],[-1,' * Parameters:'],[-1,' * prefix - {String} Optional string to prefix unique id. Default is \&quot;id_\&quot;.'],[-1,' *     Note that dots (\&quot;.\&quot;) in the prefix will be replaced with underscore (\&quot;_\&quot;).'],[-1,' * '],[-1,' * Returns:'],[-1,' * {String} A unique id string, built on the passed in prefix.'],[-1,' *\/'],[1,'OpenLayers.Util.createUniqueID = function(prefix) {'],[1,'    if (prefix == null) {'],[0,'        prefix = \&quot;id_\&quot;;'],[-1,'    } else {'],[1,'        prefix = prefix.replace(OpenLayers.Util.dotless, \&quot;_\&quot;);'],[-1,'    }'],[1,'    OpenLayers.Util.lastSeqID += 1; '],[1,'    return prefix + OpenLayers.Util.lastSeqID;        '],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Constant: INCHES_PER_UNIT'],[-1,' * {Object} Constant inches per unit -- borrowed from MapServer mapscale.c'],[-1,' * derivation of nautical miles from http:\/\/en.wikipedia.org\/wiki\/Nautical_mile'],[-1,' * Includes the full set of units supported by CS-MAP (http:\/\/trac.osgeo.org\/csmap\/)'],[-1,' * and PROJ.4 (http:\/\/trac.osgeo.org\/proj\/)'],[-1,' * The hardcoded table is maintain in a CS-MAP source code module named CSdataU.c'],[-1,' * The hardcoded table of PROJ.4 units are in pj_units.c.'],[-1,' *\/'],[1,'OpenLayers.INCHES_PER_UNIT = { '],[-1,'    \'inches\': 1.0,'],[-1,'    \'ft\': 12.0,'],[-1,'    \'mi\': 63360.0,'],[-1,'    \'m\': 39.37,'],[-1,'    \'km\': 39370,'],[-1,'    \'dd\': 4374754,'],[-1,'    \'yd\': 36'],[-1,'};'],[1,'OpenLayers.INCHES_PER_UNIT[\&quot;in\&quot;]= OpenLayers.INCHES_PER_UNIT.inches;'],[1,'OpenLayers.INCHES_PER_UNIT[\&quot;degrees\&quot;] = OpenLayers.INCHES_PER_UNIT.dd;'],[1,'OpenLayers.INCHES_PER_UNIT[\&quot;nmi\&quot;] = 1852 * OpenLayers.INCHES_PER_UNIT.m;'],[-1,''],[-1,'\/\/ Units from CS-Map'],[1,'OpenLayers.METERS_PER_INCH = 0.02540005080010160020;'],[1,'OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT, {'],[-1,'    \&quot;Inch\&quot;: OpenLayers.INCHES_PER_UNIT.inches,'],[-1,'    \&quot;Meter\&quot;: 1.0 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9001'],[-1,'    \&quot;Foot\&quot;: 0.30480060960121920243 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9003'],[-1,'    \&quot;IFoot\&quot;: 0.30480000000000000000 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9002'],[-1,'    \&quot;ClarkeFoot\&quot;: 0.3047972651151 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9005'],[-1,'    \&quot;SearsFoot\&quot;: 0.30479947153867624624 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9041'],[-1,'    \&quot;GoldCoastFoot\&quot;: 0.30479971018150881758 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9094'],[-1,'    \&quot;IInch\&quot;: 0.02540000000000000000 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;MicroInch\&quot;: 0.00002540000000000000 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Mil\&quot;: 0.00000002540000000000 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Centimeter\&quot;: 0.01000000000000000000 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Kilometer\&quot;: 1000.00000000000000000000 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9036'],[-1,'    \&quot;Yard\&quot;: 0.91440182880365760731 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;SearsYard\&quot;: 0.914398414616029 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9040'],[-1,'    \&quot;IndianYard\&quot;: 0.91439853074444079983 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9084'],[-1,'    \&quot;IndianYd37\&quot;: 0.91439523 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9085'],[-1,'    \&quot;IndianYd62\&quot;: 0.9143988 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9086'],[-1,'    \&quot;IndianYd75\&quot;: 0.9143985 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9087'],[-1,'    \&quot;IndianFoot\&quot;: 0.30479951 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9080'],[-1,'    \&quot;IndianFt37\&quot;: 0.30479841 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9081'],[-1,'    \&quot;IndianFt62\&quot;: 0.3047996 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9082'],[-1,'    \&quot;IndianFt75\&quot;: 0.3047995 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9083'],[-1,'    \&quot;Mile\&quot;: 1609.34721869443738887477 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;IYard\&quot;: 0.91440000000000000000 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9096'],[-1,'    \&quot;IMile\&quot;: 1609.34400000000000000000 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9093'],[-1,'    \&quot;NautM\&quot;: 1852.00000000000000000000 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9030'],[-1,'    \&quot;Lat-66\&quot;: 110943.316488932731 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Lat-83\&quot;: 110946.25736872234125 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Decimeter\&quot;: 0.10000000000000000000 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Millimeter\&quot;: 0.00100000000000000000 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Dekameter\&quot;: 10.00000000000000000000 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Decameter\&quot;: 10.00000000000000000000 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Hectometer\&quot;: 100.00000000000000000000 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;GermanMeter\&quot;: 1.0000135965 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9031'],[-1,'    \&quot;CaGrid\&quot;: 0.999738 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;ClarkeChain\&quot;: 20.1166194976 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9038'],[-1,'    \&quot;GunterChain\&quot;: 20.11684023368047 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9033'],[-1,'    \&quot;BenoitChain\&quot;: 20.116782494375872 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9062'],[-1,'    \&quot;SearsChain\&quot;: 20.11676512155 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9042'],[-1,'    \&quot;ClarkeLink\&quot;: 0.201166194976 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9039'],[-1,'    \&quot;GunterLink\&quot;: 0.2011684023368047 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9034'],[-1,'    \&quot;BenoitLink\&quot;: 0.20116782494375872 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9063'],[-1,'    \&quot;SearsLink\&quot;: 0.2011676512155 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9043'],[-1,'    \&quot;Rod\&quot;: 5.02921005842012 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;IntnlChain\&quot;: 20.1168 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9097'],[-1,'    \&quot;IntnlLink\&quot;: 0.201168 \/ OpenLayers.METERS_PER_INCH,   \/\/EPSG:9098'],[-1,'    \&quot;Perch\&quot;: 5.02921005842012 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Pole\&quot;: 5.02921005842012 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Furlong\&quot;: 201.1684023368046 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Rood\&quot;: 3.778266898 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;CapeFoot\&quot;: 0.3047972615 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Brealey\&quot;: 375.00000000000000000000 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;ModAmFt\&quot;: 0.304812252984505969011938 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;Fathom\&quot;: 1.8288 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;NautM-UK\&quot;: 1853.184 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;50kilometers\&quot;: 50000.0 \/ OpenLayers.METERS_PER_INCH,'],[-1,'    \&quot;150kilometers\&quot;: 150000.0 \/ OpenLayers.METERS_PER_INCH'],[-1,'});'],[-1,''],[-1,'\/\/unit abbreviations supported by PROJ.4'],[1,'OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT, {'],[-1,'    \&quot;mm\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;Meter\&quot;] \/ 1000.0,'],[-1,'    \&quot;cm\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;Meter\&quot;] \/ 100.0,'],[-1,'    \&quot;dm\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;Meter\&quot;] * 100.0,'],[-1,'    \&quot;km\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;Meter\&quot;] * 1000.0,'],[-1,'    \&quot;kmi\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;nmi\&quot;],    \/\/International Nautical Mile'],[-1,'    \&quot;fath\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;Fathom\&quot;], \/\/International Fathom'],[-1,'    \&quot;ch\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;IntnlChain\&quot;],  \/\/International Chain'],[-1,'    \&quot;link\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;IntnlLink\&quot;], \/\/International Link'],[-1,'    \&quot;us-in\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;inches\&quot;], \/\/U.S. Surveyor\'s Inch'],[-1,'    \&quot;us-ft\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;Foot\&quot;], \/\/U.S. Surveyor\'s Foot'],[-1,'    \&quot;us-yd\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;Yard\&quot;], \/\/U.S. Surveyor\'s Yard'],[-1,'    \&quot;us-ch\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;GunterChain\&quot;], \/\/U.S. Surveyor\'s Chain'],[-1,'    \&quot;us-mi\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;Mile\&quot;],   \/\/U.S. Surveyor\'s Statute Mile'],[-1,'    \&quot;ind-yd\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;IndianYd37\&quot;],  \/\/Indian Yard'],[-1,'    \&quot;ind-ft\&quot;: OpenLayers.INCHES_PER_UNIT[\&quot;IndianFt37\&quot;],  \/\/Indian Foot'],[-1,'    \&quot;ind-ch\&quot;: 20.11669506 \/ OpenLayers.METERS_PER_INCH  \/\/Indian Chain'],[-1,'});'],[-1,''],[-1,'\/** '],[-1,' * Constant: DOTS_PER_INCH'],[-1,' * {Integer} 72 (A sensible default)'],[-1,' *\/'],[1,'OpenLayers.DOTS_PER_INCH = 72;'],[-1,''],[-1,'\/**'],[-1,' * Function: normalizeScale'],[-1,' * '],[-1,' * Parameters:'],[-1,' * scale - {float}'],[-1,' * '],[-1,' * Returns:'],[-1,' * {Float} A normalized scale value, in 1 \/ X format. '],[-1,' *         This means that if a value less than one ( already 1\/x) is passed'],[-1,' *         in, it just returns scale directly. Otherwise, it returns '],[-1,' *         1 \/ scale'],[-1,' *\/'],[1,'OpenLayers.Util.normalizeScale = function (scale) {'],[0,'    var normScale = (scale &gt; 1.0) ? (1.0 \/ scale) '],[-1,'                                  : scale;'],[0,'    return normScale;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: getResolutionFromScale'],[-1,' * '],[-1,' * Parameters:'],[-1,' * scale - {Float}'],[-1,' * units - {String} Index into OpenLayers.INCHES_PER_UNIT hashtable.'],[-1,' *                  Default is degrees'],[-1,' * '],[-1,' * Returns:'],[-1,' * {Float} The corresponding resolution given passed-in scale and unit '],[-1,' *     parameters.  If the given scale is falsey, the returned resolution will'],[-1,' *     be undefined.'],[-1,' *\/'],[1,'OpenLayers.Util.getResolutionFromScale = function (scale, units) {'],[0,'    var resolution;'],[0,'    if (scale) {'],[0,'        if (units == null) {'],[0,'            units = \&quot;degrees\&quot;;'],[-1,'        }'],[0,'        var normScale = OpenLayers.Util.normalizeScale(scale);'],[0,'        resolution = 1 \/ (normScale * OpenLayers.INCHES_PER_UNIT[units]'],[-1,'                                        * OpenLayers.DOTS_PER_INCH);        '],[-1,'    }'],[0,'    return resolution;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: getScaleFromResolution'],[-1,' * '],[-1,' * Parameters:'],[-1,' * resolution - {Float}'],[-1,' * units - {String} Index into OpenLayers.INCHES_PER_UNIT hashtable.'],[-1,' *                  Default is degrees'],[-1,' * '],[-1,' * Returns:'],[-1,' * {Float} The corresponding scale given passed-in resolution and unit '],[-1,' *         parameters.'],[-1,' *\/'],[1,'OpenLayers.Util.getScaleFromResolution = function (resolution, units) {'],[-1,''],[0,'    if (units == null) {'],[0,'        units = \&quot;degrees\&quot;;'],[-1,'    }'],[-1,''],[0,'    var scale = resolution * OpenLayers.INCHES_PER_UNIT[units] *'],[-1,'                    OpenLayers.DOTS_PER_INCH;'],[0,'    return scale;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: pagePosition'],[-1,' * Calculates the position of an element on the page (see'],[-1,' * http:\/\/code.google.com\/p\/doctype\/wiki\/ArticlePageOffset)'],[-1,' *'],[-1,' * OpenLayers.Util.pagePosition is based on Yahoo\'s getXY method, which is'],[-1,' * Copyright (c) 2006, Yahoo! Inc.'],[-1,' * All rights reserved.'],[-1,' * '],[-1,' * Redistribution and use of this software in source and binary forms, with or'],[-1,' * without modification, are permitted provided that the following conditions'],[-1,' * are met:'],[-1,' * '],[-1,' * * Redistributions of source code must retain the above copyright notice,'],[-1,' *   this list of conditions and the following disclaimer.'],[-1,' * '],[-1,' * * Redistributions in binary form must reproduce the above copyright notice,'],[-1,' *   this list of conditions and the following disclaimer in the documentation'],[-1,' *   and\/or other materials provided with the distribution.'],[-1,' * '],[-1,' * * Neither the name of Yahoo! Inc. nor the names of its contributors may be'],[-1,' *   used to endorse or promote products derived from this software without'],[-1,' *   specific prior written permission of Yahoo! Inc.'],[-1,' * '],[-1,' * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \&quot;AS IS\&quot;'],[-1,' * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE'],[-1,' * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE'],[-1,' * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE'],[-1,' * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR'],[-1,' * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF'],[-1,' * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS'],[-1,' * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN'],[-1,' * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)'],[-1,' * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE '],[-1,' * POSSIBILITY OF SUCH DAMAGE.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * forElement - {DOMElement}'],[-1,' * '],[-1,' * Returns:'],[-1,' * {Array} two item array, Left value then Top value.'],[-1,' *\/'],[1,'OpenLayers.Util.pagePosition =  function(forElement) {'],[-1,'    \/\/ NOTE: If element is hidden (display none or disconnected or any the'],[-1,'    \/\/ ancestors are hidden) we get (0,0) by default but we still do the'],[-1,'    \/\/ accumulation of scroll position.'],[-1,''],[0,'    var pos = [0, 0];'],[0,'    var viewportElement = OpenLayers.Util.getViewportElement();'],[0,'    if (!forElement || forElement == window || forElement == viewportElement) {'],[-1,'        \/\/ viewport is always at 0,0 as that defined the coordinate system for'],[-1,'        \/\/ this function - this avoids special case checks in the code below'],[0,'        return pos;'],[-1,'    }'],[-1,''],[-1,'    \/\/ Gecko browsers normally use getBoxObjectFor to calculate the position.'],[-1,'    \/\/ When invoked for an element with an implicit absolute position though it'],[-1,'    \/\/ can be off by one. Therefore the recursive implementation is used in'],[-1,'    \/\/ those (relatively rare) cases.'],[0,'    var BUGGY_GECKO_BOX_OBJECT ='],[-1,'        OpenLayers.IS_GECKO &amp;&amp; document.getBoxObjectFor &amp;&amp;'],[-1,'        OpenLayers.Element.getStyle(forElement, \'position\') == \'absolute\' &amp;&amp;'],[-1,'        (forElement.style.top == \'\' || forElement.style.left == \'\');'],[-1,''],[0,'    var parent = null;'],[0,'    var box;'],[-1,''],[0,'    if (forElement.getBoundingClientRect) { \/\/ IE'],[0,'        box = forElement.getBoundingClientRect();'],[0,'        var scrollTop = window.pageYOffset || viewportElement.scrollTop;'],[0,'        var scrollLeft = window.pageXOffset || viewportElement.scrollLeft;'],[-1,'        '],[0,'        pos[0] = box.left + scrollLeft;'],[0,'        pos[1] = box.top + scrollTop;'],[-1,''],[0,'    } else if (document.getBoxObjectFor &amp;&amp; !BUGGY_GECKO_BOX_OBJECT) { \/\/ gecko'],[-1,'        \/\/ Gecko ignores the scroll values for ancestors, up to 1.9.  See:'],[-1,'        \/\/ https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=328881 and'],[-1,'        \/\/ https:\/\/bugzilla.mozilla.org\/show_bug.cgi?id=330619'],[-1,''],[0,'        box = document.getBoxObjectFor(forElement);'],[0,'        var vpBox = document.getBoxObjectFor(viewportElement);'],[0,'        pos[0] = box.screenX - vpBox.screenX;'],[0,'        pos[1] = box.screenY - vpBox.screenY;'],[-1,''],[-1,'    } else { \/\/ safari\/opera'],[0,'        pos[0] = forElement.offsetLeft;'],[0,'        pos[1] = forElement.offsetTop;'],[0,'        parent = forElement.offsetParent;'],[0,'        if (parent != forElement) {'],[0,'            while (parent) {'],[0,'                pos[0] += parent.offsetLeft;'],[0,'                pos[1] += parent.offsetTop;'],[0,'                parent = parent.offsetParent;'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        var browser = OpenLayers.BROWSER_NAME;'],[-1,''],[-1,'        \/\/ opera &amp; (safari absolute) incorrectly account for body offsetTop'],[0,'        if (browser == \&quot;opera\&quot; || (browser == \&quot;safari\&quot; &amp;&amp;'],[-1,'              OpenLayers.Element.getStyle(forElement, \'position\') == \'absolute\')) {'],[0,'            pos[1] -= document.body.offsetTop;'],[-1,'        }'],[-1,''],[-1,'        \/\/ accumulate the scroll positions for everything but the body element'],[0,'        parent = forElement.offsetParent;'],[0,'        while (parent &amp;&amp; parent != document.body) {'],[0,'            pos[0] -= parent.scrollLeft;'],[-1,'            \/\/ see https:\/\/bugs.opera.com\/show_bug.cgi?id=249965'],[0,'            if (browser != \&quot;opera\&quot; || parent.tagName != \'TR\') {'],[0,'                pos[1] -= parent.scrollTop;'],[-1,'            }'],[0,'            parent = parent.offsetParent;'],[-1,'        }'],[-1,'    }'],[-1,'    '],[0,'    return pos;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: getViewportElement'],[-1,' * Returns die viewport element of the document. The viewport element is'],[-1,' * usually document.documentElement, except in IE,where it is either'],[-1,' * document.body or document.documentElement, depending on the document\'s'],[-1,' * compatibility mode (see'],[-1,' * http:\/\/code.google.com\/p\/doctype\/wiki\/ArticleClientViewportElement)'],[-1,' *'],[-1,' * Returns:'],[-1,' * {DOMElement}'],[-1,' *\/'],[1,'OpenLayers.Util.getViewportElement = function() {'],[0,'    var viewportElement = arguments.callee.viewportElement;'],[0,'    if (viewportElement == undefined) {'],[0,'        viewportElement = (OpenLayers.BROWSER_NAME == \&quot;msie\&quot; &amp;&amp;'],[-1,'            document.compatMode != \'CSS1Compat\') ? document.body :'],[-1,'            document.documentElement;'],[0,'        arguments.callee.viewportElement = viewportElement;'],[-1,'    }'],[0,'    return viewportElement;'],[-1,'};'],[-1,''],[-1,'\/** '],[-1,' * Function: isEquivalentUrl'],[-1,' * Test two URLs for equivalence. '],[-1,' * '],[-1,' * Setting \'ignoreCase\' allows for case-independent comparison.'],[-1,' * '],[-1,' * Comparison is based on: '],[-1,' *  - Protocol'],[-1,' *  - Host (evaluated without the port)'],[-1,' *  - Port (set \'ignorePort80\' to ignore \&quot;80\&quot; values)'],[-1,' *  - Hash ( set \'ignoreHash\' to disable)'],[-1,' *  - Pathname (for relative &lt;-&gt; absolute comparison) '],[-1,' *  - Arguments (so they can be out of order)'],[-1,' *  '],[-1,' * Parameters:'],[-1,' * url1 - {String}'],[-1,' * url2 - {String}'],[-1,' * options - {Object} Allows for customization of comparison:'],[-1,' *                    \'ignoreCase\' - Default is True'],[-1,' *                    \'ignorePort80\' - Default is True'],[-1,' *                    \'ignoreHash\' - Default is True'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Boolean} Whether or not the two URLs are equivalent'],[-1,' *\/'],[1,'OpenLayers.Util.isEquivalentUrl = function(url1, url2, options) {'],[0,'    options = options || {};'],[-1,''],[0,'    OpenLayers.Util.applyDefaults(options, {'],[-1,'        ignoreCase: true,'],[-1,'        ignorePort80: true,'],[-1,'        ignoreHash: true'],[-1,'    });'],[-1,''],[0,'    var urlObj1 = OpenLayers.Util.createUrlObject(url1, options);'],[0,'    var urlObj2 = OpenLayers.Util.createUrlObject(url2, options);'],[-1,''],[-1,'    \/\/compare all keys except for \&quot;args\&quot; (treated below)'],[0,'    for(var key in urlObj1) {'],[0,'        if(key !== \&quot;args\&quot;) {'],[0,'            if(urlObj1[key] != urlObj2[key]) {'],[0,'                return false;'],[-1,'            }'],[-1,'        }'],[-1,'    }'],[-1,''],[-1,'    \/\/ compare search args - irrespective of order'],[0,'    for(var key in urlObj1.args) {'],[0,'        if(urlObj1.args[key] != urlObj2.args[key]) {'],[0,'            return false;'],[-1,'        }'],[0,'        delete urlObj2.args[key];'],[-1,'    }'],[-1,'    \/\/ urlObj2 shouldn\'t have any args left'],[0,'    for(var key in urlObj2.args) {'],[0,'        return false;'],[-1,'    }'],[-1,'    '],[0,'    return true;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: createUrlObject'],[-1,' * '],[-1,' * Parameters:'],[-1,' * url - {String}'],[-1,' * options - {Object} A hash of options.'],[-1,' *'],[-1,' * Valid options:'],[-1,' *   ignoreCase - {Boolean} lowercase url,'],[-1,' *   ignorePort80 - {Boolean} don\'t include explicit port if port is 80,'],[-1,' *   ignoreHash - {Boolean} Don\'t include part of url after the hash (#).'],[-1,' * '],[-1,' * Returns:'],[-1,' * {Object} An object with separate url, a, port, host, and args parsed out '],[-1,' *          and ready for comparison'],[-1,' *\/'],[1,'OpenLayers.Util.createUrlObject = function(url, options) {'],[0,'    options = options || {};'],[-1,''],[-1,'    \/\/ deal with relative urls first'],[0,'    if(!(\/^\\w+:\\\/\\\/\/).test(url)) {'],[0,'        var loc = window.location;'],[0,'        var port = loc.port ? \&quot;:\&quot; + loc.port : \&quot;\&quot;;'],[0,'        var fullUrl = loc.protocol + \&quot;\/\/\&quot; + loc.host.split(\&quot;:\&quot;).shift() + port;'],[0,'        if(url.indexOf(\&quot;\/\&quot;) === 0) {'],[-1,'            \/\/ full pathname'],[0,'            url = fullUrl + url;'],[-1,'        } else {'],[-1,'            \/\/ relative to current path'],[0,'            var parts = loc.pathname.split(\&quot;\/\&quot;);'],[0,'            parts.pop();'],[0,'            url = fullUrl + parts.join(\&quot;\/\&quot;) + \&quot;\/\&quot; + url;'],[-1,'        }'],[-1,'    }'],[-1,'  '],[0,'    if (options.ignoreCase) {'],[0,'        url = url.toLowerCase(); '],[-1,'    }'],[-1,''],[0,'    var a = document.createElement(\'a\');'],[0,'    a.href = url;'],[-1,'    '],[0,'    var urlObject = {};'],[-1,'    '],[-1,'    \/\/host (without port)'],[0,'    urlObject.host = a.host.split(\&quot;:\&quot;).shift();'],[-1,''],[-1,'    \/\/protocol'],[0,'    urlObject.protocol = a.protocol;  '],[-1,''],[-1,'    \/\/port (get uniform browser behavior with port 80 here)'],[0,'    if(options.ignorePort80) {'],[0,'        urlObject.port = (a.port == \&quot;80\&quot; || a.port == \&quot;0\&quot;) ? \&quot;\&quot; : a.port;'],[-1,'    } else {'],[0,'        urlObject.port = (a.port == \&quot;\&quot; || a.port == \&quot;0\&quot;) ? \&quot;80\&quot; : a.port;'],[-1,'    }'],[-1,''],[-1,'    \/\/hash'],[0,'    urlObject.hash = (options.ignoreHash || a.hash === \&quot;#\&quot;) ? \&quot;\&quot; : a.hash;  '],[-1,'    '],[-1,'    \/\/args'],[0,'    var queryString = a.search;'],[0,'    if (!queryString) {'],[0,'        var qMark = url.indexOf(\&quot;?\&quot;);'],[0,'        queryString = (qMark != -1) ? url.substr(qMark) : \&quot;\&quot;;'],[-1,'    }'],[0,'    urlObject.args = OpenLayers.Util.getParameters(queryString);'],[-1,''],[-1,'    \/\/ pathname'],[-1,'    \/\/'],[-1,'    \/\/ This is a workaround for Internet Explorer where'],[-1,'    \/\/ window.location.pathname has a leading \&quot;\/\&quot;, but'],[-1,'    \/\/ a.pathname has no leading \&quot;\/\&quot;.'],[0,'    urlObject.pathname = (a.pathname.charAt(0) == \&quot;\/\&quot;) ? a.pathname : \&quot;\/\&quot; + a.pathname;'],[-1,'    '],[0,'    return urlObject; '],[-1,'};'],[-1,' '],[-1,'\/**'],[-1,' * Function: removeTail'],[-1,' * Takes a url and removes everything after the ? and #'],[-1,' * '],[-1,' * Parameters:'],[-1,' * url - {String} The url to process'],[-1,' * '],[-1,' * Returns:'],[-1,' * {String} The string with all queryString and Hash removed'],[-1,' *\/'],[1,'OpenLayers.Util.removeTail = function(url) {'],[0,'    var head = null;'],[-1,'    '],[0,'    var qMark = url.indexOf(\&quot;?\&quot;);'],[0,'    var hashMark = url.indexOf(\&quot;#\&quot;);'],[-1,''],[0,'    if (qMark == -1) {'],[0,'        head = (hashMark != -1) ? url.substr(0,hashMark) : url;'],[-1,'    } else {'],[0,'        head = (hashMark != -1) ? url.substr(0,Math.min(qMark, hashMark)) '],[-1,'                                  : url.substr(0, qMark);'],[-1,'    }'],[0,'    return head;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Constant: IS_GECKO'],[-1,' * {Boolean} True if the userAgent reports the browser to use the Gecko engine'],[-1,' *\/'],[1,'OpenLayers.IS_GECKO = (function() {'],[1,'    var ua = navigator.userAgent.toLowerCase();'],[1,'    return ua.indexOf(\&quot;webkit\&quot;) == -1 &amp;&amp; ua.indexOf(\&quot;gecko\&quot;) != -1;'],[-1,'})();'],[-1,''],[-1,'\/**'],[-1,' * Constant: CANVAS_SUPPORTED'],[-1,' * {Boolean} True if canvas 2d is supported.'],[-1,' *\/'],[1,'OpenLayers.CANVAS_SUPPORTED = (function() {'],[1,'    var elem = document.createElement(\'canvas\');'],[1,'    return !!(elem.getContext &amp;&amp; elem.getContext(\'2d\'));'],[-1,'})();'],[-1,''],[-1,'\/**'],[-1,' * Constant: BROWSER_NAME'],[-1,' * {String}'],[-1,' * A substring of the navigator.userAgent property.  Depending on the userAgent'],[-1,' *     property, this will be the empty string or one of the following:'],[-1,' *     * \&quot;opera\&quot; -- Opera'],[-1,' *     * \&quot;msie\&quot;  -- Internet Explorer'],[-1,' *     * \&quot;safari\&quot; -- Safari'],[-1,' *     * \&quot;firefox\&quot; -- Firefox'],[-1,' *     * \&quot;mozilla\&quot; -- Mozilla'],[-1,' *\/'],[1,'OpenLayers.BROWSER_NAME = (function() {'],[1,'    var name = \&quot;\&quot;;'],[1,'    var ua = navigator.userAgent.toLowerCase();'],[1,'    if (ua.indexOf(\&quot;opera\&quot;) != -1) {'],[0,'        name = \&quot;opera\&quot;;'],[1,'    } else if (ua.indexOf(\&quot;msie\&quot;) != -1) {'],[0,'        name = \&quot;msie\&quot;;'],[1,'    } else if (ua.indexOf(\&quot;safari\&quot;) != -1) {'],[1,'        name = \&quot;safari\&quot;;'],[0,'    } else if (ua.indexOf(\&quot;mozilla\&quot;) != -1) {'],[0,'        if (ua.indexOf(\&quot;firefox\&quot;) != -1) {'],[0,'            name = \&quot;firefox\&quot;;'],[-1,'        } else {'],[0,'            name = \&quot;mozilla\&quot;;'],[-1,'        }'],[-1,'    }'],[1,'    return name;'],[-1,'})();'],[-1,''],[-1,'\/**'],[-1,' * Function: getBrowserName'],[-1,' * '],[-1,' * Returns:'],[-1,' * {String} A string which specifies which is the current '],[-1,' *          browser in which we are running. '],[-1,' * '],[-1,' *          Currently-supported browser detection and codes:'],[-1,' *           * \'opera\' -- Opera'],[-1,' *           * \'msie\'  -- Internet Explorer'],[-1,' *           * \'safari\' -- Safari'],[-1,' *           * \'firefox\' -- Firefox'],[-1,' *           * \'mozilla\' -- Mozilla'],[-1,' * '],[-1,' *          If we are unable to property identify the browser, we '],[-1,' *           return an empty string.'],[-1,' *\/'],[1,'OpenLayers.Util.getBrowserName = function() {'],[0,'    return OpenLayers.BROWSER_NAME;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Method: getRenderedDimensions'],[-1,' * Renders the contentHTML offscreen to determine actual dimensions for'],[-1,' *     popup sizing. As we need layout to determine dimensions the content'],[-1,' *     is rendered -9999px to the left and absolute to ensure the '],[-1,' *     scrollbars do not flicker'],[-1,' *     '],[-1,' * Parameters:'],[-1,' * contentHTML'],[-1,' * size - {&lt;OpenLayers.Size&gt;} If either the \'w\' or \'h\' properties is '],[-1,' *     specified, we fix that dimension of the div to be measured. This is '],[-1,' *     useful in the case where we have a limit in one dimension and must '],[-1,' *     therefore meaure the flow in the other dimension.'],[-1,' * options - {Object}'],[-1,' *'],[-1,' * Allowed Options:'],[-1,' *     displayClass - {String} Optional parameter.  A CSS class name(s) string'],[-1,' *         to provide the CSS context of the rendered content.'],[-1,' *     containerElement - {DOMElement} Optional parameter. Insert the HTML to '],[-1,' *         this node instead of the body root when calculating dimensions. '],[-1,' * '],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.Size&gt;}'],[-1,' *\/'],[1,'OpenLayers.Util.getRenderedDimensions = function(contentHTML, size, options) {'],[-1,'    '],[0,'    var w, h;'],[-1,'    '],[-1,'    \/\/ create temp container div with restricted size'],[0,'    var container = document.createElement(\&quot;div\&quot;);'],[0,'    container.style.visibility = \&quot;hidden\&quot;;'],[-1,'        '],[0,'    var containerElement = (options &amp;&amp; options.containerElement) '],[-1,'        ? options.containerElement : document.body;'],[-1,'    '],[-1,'    \/\/ Opera and IE7 can\'t handle a node with position:aboslute if it inherits'],[-1,'    \/\/ position:absolute from a parent.'],[0,'    var parentHasPositionAbsolute = false;'],[0,'    var superContainer = null;'],[0,'    var parent = containerElement;'],[0,'    while (parent &amp;&amp; parent.tagName.toLowerCase()!=\&quot;body\&quot;) {'],[0,'        var parentPosition = OpenLayers.Element.getStyle(parent, \&quot;position\&quot;);'],[0,'        if(parentPosition == \&quot;absolute\&quot;) {'],[0,'            parentHasPositionAbsolute = true;'],[0,'            break;'],[0,'        } else if (parentPosition &amp;&amp; parentPosition != \&quot;static\&quot;) {'],[0,'            break;'],[-1,'        }'],[0,'        parent = parent.parentNode;'],[-1,'    }'],[0,'    if(parentHasPositionAbsolute &amp;&amp; (containerElement.clientHeight === 0 || '],[-1,'                                     containerElement.clientWidth === 0) ){'],[0,'        superContainer = document.createElement(\&quot;div\&quot;);'],[0,'        superContainer.style.visibility = \&quot;hidden\&quot;;'],[0,'        superContainer.style.position = \&quot;absolute\&quot;;'],[0,'        superContainer.style.overflow = \&quot;visible\&quot;;'],[0,'        superContainer.style.width = document.body.clientWidth + \&quot;px\&quot;;'],[0,'        superContainer.style.height = document.body.clientHeight + \&quot;px\&quot;;'],[0,'        superContainer.appendChild(container);'],[-1,'    }'],[0,'    container.style.position = \&quot;absolute\&quot;;'],[-1,''],[-1,'    \/\/fix a dimension, if specified.'],[0,'    if (size) {'],[0,'        if (size.w) {'],[0,'            w = size.w;'],[0,'            container.style.width = w + \&quot;px\&quot;;'],[0,'        } else if (size.h) {'],[0,'            h = size.h;'],[0,'            container.style.height = h + \&quot;px\&quot;;'],[-1,'        }'],[-1,'    }'],[-1,''],[-1,'    \/\/add css classes, if specified'],[0,'    if (options &amp;&amp; options.displayClass) {'],[0,'        container.className = options.displayClass;'],[-1,'    }'],[-1,'    '],[-1,'    \/\/ create temp content div and assign content'],[0,'    var content = document.createElement(\&quot;div\&quot;);'],[0,'    content.innerHTML = contentHTML;'],[-1,'    '],[-1,'    \/\/ we need overflow visible when calculating the size'],[0,'    content.style.overflow = \&quot;visible\&quot;;'],[0,'    if (content.childNodes) {'],[0,'        for (var i=0, l=content.childNodes.length; i&lt;l; i++) {'],[0,'            if (!content.childNodes[i].style) continue;'],[0,'            content.childNodes[i].style.overflow = \&quot;visible\&quot;;'],[-1,'        }'],[-1,'    }'],[-1,'    '],[-1,'    \/\/ add content to restricted container '],[0,'    container.appendChild(content);'],[-1,'    '],[-1,'    \/\/ append container to body for rendering'],[0,'    if (superContainer) {'],[0,'        containerElement.appendChild(superContainer);'],[-1,'    } else {'],[0,'        containerElement.appendChild(container);'],[-1,'    }'],[-1,'    '],[-1,'    \/\/ calculate scroll width of content and add corners and shadow width'],[0,'    if (!w) {'],[0,'        w = parseInt(content.scrollWidth);'],[-1,'    '],[-1,'        \/\/ update container width to allow height to adjust'],[0,'        container.style.width = w + \&quot;px\&quot;;'],[-1,'    }        '],[-1,'    \/\/ capture height and add shadow and corner image widths'],[0,'    if (!h) {'],[0,'        h = parseInt(content.scrollHeight);'],[-1,'    }'],[-1,''],[-1,'    \/\/ remove elements'],[0,'    container.removeChild(content);'],[0,'    if (superContainer) {'],[0,'        superContainer.removeChild(container);'],[0,'        containerElement.removeChild(superContainer);'],[-1,'    } else {'],[0,'        containerElement.removeChild(container);'],[-1,'    }'],[-1,'    '],[0,'    return new OpenLayers.Size(w, h);'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * APIFunction: getScrollbarWidth'],[-1,' * This function has been modified by the OpenLayers from the original version,'],[-1,' *     written by Matthew Eernisse and released under the Apache 2 '],[-1,' *     license here:'],[-1,' * '],[-1,' *     http:\/\/www.fleegix.org\/articles\/2006\/05\/30\/getting-the-scrollbar-width-in-pixels'],[-1,' * '],[-1,' *     It has been modified simply to cache its value, since it is physically '],[-1,' *     impossible that this code could ever run in more than one browser at '],[-1,' *     once. '],[-1,' * '],[-1,' * Returns:'],[-1,' * {Integer}'],[-1,' *\/'],[1,'OpenLayers.Util.getScrollbarWidth = function() {'],[-1,'    '],[0,'    var scrollbarWidth = OpenLayers.Util._scrollbarWidth;'],[-1,'    '],[0,'    if (scrollbarWidth == null) {'],[0,'        var scr = null;'],[0,'        var inn = null;'],[0,'        var wNoScroll = 0;'],[0,'        var wScroll = 0;'],[-1,'    '],[-1,'        \/\/ Outer scrolling div'],[0,'        scr = document.createElement(\'div\');'],[0,'        scr.style.position = \'absolute\';'],[0,'        scr.style.top = \'-1000px\';'],[0,'        scr.style.left = \'-1000px\';'],[0,'        scr.style.width = \'100px\';'],[0,'        scr.style.height = \'50px\';'],[-1,'        \/\/ Start with no scrollbar'],[0,'        scr.style.overflow = \'hidden\';'],[-1,'    '],[-1,'        \/\/ Inner content div'],[0,'        inn = document.createElement(\'div\');'],[0,'        inn.style.width = \'100%\';'],[0,'        inn.style.height = \'200px\';'],[-1,'    '],[-1,'        \/\/ Put the inner div in the scrolling div'],[0,'        scr.appendChild(inn);'],[-1,'        \/\/ Append the scrolling div to the doc'],[0,'        document.body.appendChild(scr);'],[-1,'    '],[-1,'        \/\/ Width of the inner div sans scrollbar'],[0,'        wNoScroll = inn.offsetWidth;'],[-1,'    '],[-1,'        \/\/ Add the scrollbar'],[0,'        scr.style.overflow = \'scroll\';'],[-1,'        \/\/ Width of the inner div width scrollbar'],[0,'        wScroll = inn.offsetWidth;'],[-1,'    '],[-1,'        \/\/ Remove the scrolling div from the doc'],[0,'        document.body.removeChild(document.body.lastChild);'],[-1,'    '],[-1,'        \/\/ Pixel width of the scroller'],[0,'        OpenLayers.Util._scrollbarWidth = (wNoScroll - wScroll);'],[0,'        scrollbarWidth = OpenLayers.Util._scrollbarWidth;'],[-1,'    }'],[-1,''],[0,'    return scrollbarWidth;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * APIFunction: getFormattedLonLat'],[-1,' * This function will return latitude or longitude value formatted as '],[-1,' *'],[-1,' * Parameters:'],[-1,' * coordinate - {Float} the coordinate value to be formatted'],[-1,' * axis - {String} value of either \'lat\' or \'lon\' to indicate which axis is to'],[-1,' *          to be formatted (default = lat)'],[-1,' * dmsOption - {String} specify the precision of the output can be one of:'],[-1,' *           \'dms\' show degrees minutes and seconds'],[-1,' *           \'dm\' show only degrees and minutes'],[-1,' *           \'d\' show only degrees'],[-1,' * '],[-1,' * Returns:'],[-1,' * {String} the coordinate value formatted as a string'],[-1,' *\/'],[1,'OpenLayers.Util.getFormattedLonLat = function(coordinate, axis, dmsOption) {'],[0,'    if (!dmsOption) {'],[0,'        dmsOption = \'dms\';    \/\/default to show degree, minutes, seconds'],[-1,'    }'],[-1,''],[0,'    coordinate = (coordinate+540)%360 - 180; \/\/ normalize for sphere being round'],[-1,''],[0,'    var abscoordinate = Math.abs(coordinate);'],[0,'    var coordinatedegrees = Math.floor(abscoordinate);'],[-1,''],[0,'    var coordinateminutes = (abscoordinate - coordinatedegrees)\/(1\/60);'],[0,'    var tempcoordinateminutes = coordinateminutes;'],[0,'    coordinateminutes = Math.floor(coordinateminutes);'],[0,'    var coordinateseconds = (tempcoordinateminutes - coordinateminutes)\/(1\/60);'],[0,'    coordinateseconds =  Math.round(coordinateseconds*10);'],[0,'    coordinateseconds \/= 10;'],[-1,''],[0,'    if( coordinateseconds &gt;= 60) { '],[0,'        coordinateseconds -= 60; '],[0,'        coordinateminutes += 1; '],[0,'        if( coordinateminutes &gt;= 60) { '],[0,'            coordinateminutes -= 60; '],[0,'            coordinatedegrees += 1; '],[-1,'        } '],[-1,'    }'],[-1,'    '],[0,'    if( coordinatedegrees &lt; 10 ) {'],[0,'        coordinatedegrees = \&quot;0\&quot; + coordinatedegrees;'],[-1,'    }'],[0,'    var str = coordinatedegrees + \&quot;\\u00B0\&quot;;'],[-1,''],[0,'    if (dmsOption.indexOf(\'dm\') &gt;= 0) {'],[0,'        if( coordinateminutes &lt; 10 ) {'],[0,'            coordinateminutes = \&quot;0\&quot; + coordinateminutes;'],[-1,'        }'],[0,'        str += coordinateminutes + \&quot;\'\&quot;;'],[-1,'  '],[0,'        if (dmsOption.indexOf(\'dms\') &gt;= 0) {'],[0,'            if( coordinateseconds &lt; 10 ) {'],[0,'                coordinateseconds = \&quot;0\&quot; + coordinateseconds;'],[-1,'            }'],[0,'            str += coordinateseconds + \'\&quot;\';'],[-1,'        }'],[-1,'    }'],[-1,'    '],[0,'    if (axis == \&quot;lon\&quot;) {'],[0,'        str += coordinate &lt; 0 ? OpenLayers.i18n(\&quot;W\&quot;) : OpenLayers.i18n(\&quot;E\&quot;);'],[-1,'    } else {'],[0,'        str += coordinate &lt; 0 ? OpenLayers.i18n(\&quot;S\&quot;) : OpenLayers.i18n(\&quot;N\&quot;);'],[-1,'    }'],[0,'    return str;'],[-1,'};'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format'],[-1,' * Base class for format reading\/writing a variety of formats.  Subclasses'],[-1,' *     of OpenLayers.Format are expected to have read and write methods.'],[-1,' *\/'],[1,'OpenLayers.Format = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: options'],[-1,'     * {Object} A reference to options passed to the constructor.'],[-1,'     *\/'],[-1,'    options: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: externalProjection'],[-1,'     * {&lt;OpenLayers.Projection&gt;} When passed a externalProjection and'],[-1,'     *     internalProjection, the format will reproject the geometries it'],[-1,'     *     reads or writes. The externalProjection is the projection used by'],[-1,'     *     the content which is passed into read or which comes out of write.'],[-1,'     *     In order to reproject, a projection transformation function for the'],[-1,'     *     specified projections must be available. This support may be '],[-1,'     *     provided via proj4js or via a custom transformation function. See'],[-1,'     *     {&lt;OpenLayers.Projection.addTransform&gt;} for more information on'],[-1,'     *     custom transformations.'],[-1,'     *\/'],[-1,'    externalProjection: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: internalProjection'],[-1,'     * {&lt;OpenLayers.Projection&gt;} When passed a externalProjection and'],[-1,'     *     internalProjection, the format will reproject the geometries it'],[-1,'     *     reads or writes. The internalProjection is the projection used by'],[-1,'     *     the geometries which are returned by read or which are passed into'],[-1,'     *     write.  In order to reproject, a projection transformation function'],[-1,'     *     for the specified projections must be available. This support may be'],[-1,'     *     provided via proj4js or via a custom transformation function. See'],[-1,'     *     {&lt;OpenLayers.Projection.addTransform&gt;} for more information on'],[-1,'     *     custom transformations.'],[-1,'     *\/'],[-1,'    internalProjection: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: data'],[-1,'     * {Object} When &lt;keepData&gt; is true, this is the parsed string sent to'],[-1,'     *     &lt;read&gt;.'],[-1,'     *\/'],[-1,'    data: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: keepData'],[-1,'     * {Object} Maintain a reference (&lt;data&gt;) to the most recently read data.'],[-1,'     *     Default is false.'],[-1,'     *\/'],[-1,'    keepData: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format'],[-1,'     * Instances of this class are not useful.  See one of the subclasses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object with properties to set on the'],[-1,'     *           format'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * keepData - {Boolean} If true, upon &lt;read&gt;, the data property will be'],[-1,'     *     set to the parsed object (e.g. the json or xml object).'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * An instance of OpenLayers.Format'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Util.extend(this, options);'],[0,'        this.options = options;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Clean up.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read'],[-1,'     * Read data from a string, and return an object whose type depends on the'],[-1,'     * subclass. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * data - {string} Data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * Depends on the subclass'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        throw new Error(\'Read not implemented.\');'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: write'],[-1,'     * Accept an object, and return a string. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * object - {Object} Object to be serialized'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string representation of the object.'],[-1,'     *\/'],[-1,'    write: function(object) {'],[0,'        throw new Error(\'Write not implemented.\');'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format\&quot;'],[-1,'});     '],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/XML.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.XML'],[-1,' * Read and write XML.  For cross-browser XML generation, use methods on an'],[-1,' *     instance of the XML format class instead of on &lt;code&gt;document&lt;end&gt;.'],[-1,' *     The DOM creation and traversing methods exposed here all mimic the'],[-1,' *     W3C XML DOM methods.  Create a new parser with the'],[-1,' *     &lt;OpenLayers.Format.XML&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.XML = OpenLayers.Class(OpenLayers.Format, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.  Properties'],[-1,'     *     of this object should not be set individually.  Read-only.  All'],[-1,'     *     XML subclasses should have their own namespaces object.  Use'],[-1,'     *     &lt;setNamespace&gt; to add or set a namespace alias after construction.'],[-1,'     *\/'],[-1,'    namespaces: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaceAlias'],[-1,'     * {Object} Mapping of namespace URI to namespace alias.  This object'],[-1,'     *     is read-only.  Use &lt;setNamespace&gt; to add or set a namespace alias.'],[-1,'     *\/'],[-1,'    namespaceAlias: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     * {String} The default namespace alias for creating element nodes.'],[-1,'     *\/'],[-1,'    defaultPrefix: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the &lt;readers&gt; property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {},'],[-1,''],[-1,'    \/**'],[-1,'     * Property: xmldom'],[-1,'     * {XMLDom} If this browser uses ActiveX, this will be set to a XMLDOM'],[-1,'     *     object.  It is not intended to be a browser sniffing property.'],[-1,'     *     Instead, the xmldom property is used instead of &lt;code&gt;document&lt;end&gt;'],[-1,'     *     where namespaced node creation methods are not supported. In all'],[-1,'     *     other browsers, this remains null.'],[-1,'     *\/'],[-1,'    xmldom: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.XML'],[-1,'     * Construct an XML parser.  The parser is used to read and write XML.'],[-1,'     *     Reading XML from a string returns a DOM element.  Writing XML from'],[-1,'     *     a DOM element returns a string.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on'],[-1,'     *     the object.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        if(window.ActiveXObject) {'],[0,'            this.xmldom = new ActiveXObject(\&quot;Microsoft.XMLDOM\&quot;);'],[-1,'        }'],[0,'        OpenLayers.Format.prototype.initialize.apply(this, [options]);'],[-1,'        \/\/ clone the namespace object and set all namespace aliases'],[0,'        this.namespaces = OpenLayers.Util.extend({}, this.namespaces);'],[0,'        this.namespaceAlias = {};'],[0,'        for(var alias in this.namespaces) {'],[0,'            this.namespaceAlias[this.namespaces[alias]] = alias;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Clean up.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.xmldom = null;'],[0,'        OpenLayers.Format.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setNamespace'],[-1,'     * Set a namespace alias and URI for the format.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * alias - {String} The namespace alias (prefix).'],[-1,'     * uri - {String} The namespace URI.'],[-1,'     *\/'],[-1,'    setNamespace: function(alias, uri) {'],[0,'        this.namespaces[alias] = uri;'],[0,'        this.namespaceAlias[uri] = alias;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Deserialize a XML string and return a DOM node.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * text - {String} A XML string'],[-1,'     '],[-1,'     * Returns:'],[-1,'     * {DOMElement} A DOM node'],[-1,'     *\/'],[-1,'    read: function(text) {'],[0,'        var index = text.indexOf(\'&lt;\');'],[0,'        if(index &gt; 0) {'],[0,'            text = text.substring(index);'],[-1,'        }'],[0,'        var node = OpenLayers.Util.Try('],[-1,'            OpenLayers.Function.bind(('],[-1,'                function() {'],[0,'                    var xmldom;'],[-1,'                    \/**'],[-1,'                     * Since we want to be able to call this method on the prototype'],[-1,'                     * itself, this.xmldom may not exist even if in IE.'],[-1,'                     *\/'],[0,'                    if(window.ActiveXObject &amp;&amp; !this.xmldom) {'],[0,'                        xmldom = new ActiveXObject(\&quot;Microsoft.XMLDOM\&quot;);'],[-1,'                    } else {'],[0,'                        xmldom = this.xmldom;'],[-1,'                        '],[-1,'                    }'],[0,'                    xmldom.loadXML(text);'],[0,'                    return xmldom;'],[-1,'                }'],[-1,'            ), this),'],[-1,'            function() {'],[0,'                return new DOMParser().parseFromString(text, \'text\/xml\');'],[-1,'            },'],[-1,'            function() {'],[0,'                var req = new XMLHttpRequest();'],[0,'                req.open(\&quot;GET\&quot;, \&quot;data:\&quot; + \&quot;text\/xml\&quot; +'],[-1,'                         \&quot;;charset=utf-8,\&quot; + encodeURIComponent(text), false);'],[0,'                if(req.overrideMimeType) {'],[0,'                    req.overrideMimeType(\&quot;text\/xml\&quot;);'],[-1,'                }'],[0,'                req.send(null);'],[0,'                return req.responseXML;'],[-1,'            }'],[-1,'        );'],[-1,''],[0,'        if(this.keepData) {'],[0,'            this.data = node;'],[-1,'        }'],[-1,''],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Serialize a DOM node into a XML string.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} A DOM node.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The XML string representation of the input node.'],[-1,'     *\/'],[-1,'    write: function(node) {'],[0,'        var data;'],[0,'        if(this.xmldom) {'],[0,'            data = node.xml;'],[-1,'        } else {'],[0,'            var serializer = new XMLSerializer();'],[0,'            if (node.nodeType == 1) {'],[-1,'                \/\/ Add nodes to a document before serializing. Everything else'],[-1,'                \/\/ is serialized as is. This may need more work. See #1218 .'],[0,'                var doc = document.implementation.createDocument(\&quot;\&quot;, \&quot;\&quot;, null);'],[0,'                if (doc.importNode) {'],[0,'                    node = doc.importNode(node, true);'],[-1,'                }'],[0,'                doc.appendChild(node);'],[0,'                data = serializer.serializeToString(doc);'],[-1,'            } else {'],[0,'                data = serializer.serializeToString(node);'],[-1,'            }'],[-1,'        }'],[0,'        return data;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: createElementNS'],[-1,'     * Create a new element with namespace.  This node can be appended to'],[-1,'     *     another node with the standard node.appendChild method.  For'],[-1,'     *     cross-browser support, this method must be used instead of'],[-1,'     *     document.createElementNS.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * uri - {String} Namespace URI for the element.'],[-1,'     * name - {String} The qualified name of the element (prefix:localname).'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Element} A DOM element with namespace.'],[-1,'     *\/'],[-1,'    createElementNS: function(uri, name) {'],[0,'        var element;'],[0,'        if(this.xmldom) {'],[0,'            if(typeof uri == \&quot;string\&quot;) {'],[0,'                element = this.xmldom.createNode(1, name, uri);'],[-1,'            } else {'],[0,'                element = this.xmldom.createNode(1, name, \&quot;\&quot;);'],[-1,'            }'],[-1,'        } else {'],[0,'            element = document.createElementNS(uri, name);'],[-1,'        }'],[0,'        return element;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: createDocumentFragment'],[-1,'     * Create a document fragment node that can be appended to another node'],[-1,'     *     created by createElementNS.  This will call '],[-1,'     *     document.createDocumentFragment outside of IE.  In IE, the ActiveX'],[-1,'     *     object\'s createDocumentFragment method is used.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A document fragment.'],[-1,'     *\/'],[-1,'    createDocumentFragment: function() {'],[0,'        var element;'],[0,'        if (this.xmldom) {'],[0,'            element = this.xmldom.createDocumentFragment();'],[-1,'        } else {'],[0,'            element = document.createDocumentFragment();'],[-1,'        }'],[0,'        return element;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: createTextNode'],[-1,'     * Create a text node.  This node can be appended to another node with'],[-1,'     *     the standard node.appendChild method.  For cross-browser support,'],[-1,'     *     this method must be used instead of document.createTextNode.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * text - {String} The text of the node.'],[-1,'     * '],[-1,'     * Returns: '],[-1,'     * {DOMElement} A DOM text node.'],[-1,'     *\/'],[-1,'    createTextNode: function(text) {'],[0,'        var node;'],[0,'        if (typeof text !== \&quot;string\&quot;) {'],[0,'            text = String(text);'],[-1,'        }'],[0,'        if(this.xmldom) {'],[0,'            node = this.xmldom.createTextNode(text);'],[-1,'        } else {'],[0,'            node = document.createTextNode(text);'],[-1,'        }'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getElementsByTagNameNS'],[-1,'     * Get a list of elements on a node given the namespace URI and local name.'],[-1,'     *     To return all nodes in a given namespace, use \'*\' for the name'],[-1,'     *     argument.  To return all nodes of a given (local) name, regardless'],[-1,'     *     of namespace, use \'*\' for the uri argument.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {Element} Node on which to search for other nodes.'],[-1,'     * uri - {String} Namespace URI.'],[-1,'     * name - {String} Local name of the tag (without the prefix).'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {NodeList} A node list or array of elements.'],[-1,'     *\/'],[-1,'    getElementsByTagNameNS: function(node, uri, name) {'],[0,'        var elements = [];'],[0,'        if(node.getElementsByTagNameNS) {'],[0,'            elements = node.getElementsByTagNameNS(uri, name);'],[-1,'        } else {'],[-1,'            \/\/ brute force method'],[0,'            var allNodes = node.getElementsByTagName(\&quot;*\&quot;);'],[0,'            var potentialNode, fullName;'],[0,'            for(var i=0, len=allNodes.length; i&lt;len; ++i) {'],[0,'                potentialNode = allNodes[i];'],[0,'                fullName = (potentialNode.prefix) ?'],[-1,'                           (potentialNode.prefix + \&quot;:\&quot; + name) : name;'],[0,'                if((name == \&quot;*\&quot;) || (fullName == potentialNode.nodeName)) {'],[0,'                    if((uri == \&quot;*\&quot;) || (uri == potentialNode.namespaceURI)) {'],[0,'                        elements.push(potentialNode);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return elements;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getAttributeNodeNS'],[-1,'     * Get an attribute node given the namespace URI and local name.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {Element} Node on which to search for attribute nodes.'],[-1,'     * uri - {String} Namespace URI.'],[-1,'     * name - {String} Local name of the attribute (without the prefix).'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} An attribute node or null if none found.'],[-1,'     *\/'],[-1,'    getAttributeNodeNS: function(node, uri, name) {'],[0,'        var attributeNode = null;'],[0,'        if(node.getAttributeNodeNS) {'],[0,'            attributeNode = node.getAttributeNodeNS(uri, name);'],[-1,'        } else {'],[0,'            var attributes = node.attributes;'],[0,'            var potentialNode, fullName;'],[0,'            for(var i=0, len=attributes.length; i&lt;len; ++i) {'],[0,'                potentialNode = attributes[i];'],[0,'                if(potentialNode.namespaceURI == uri) {'],[0,'                    fullName = (potentialNode.prefix) ?'],[-1,'                               (potentialNode.prefix + \&quot;:\&quot; + name) : name;'],[0,'                    if(fullName == potentialNode.nodeName) {'],[0,'                        attributeNode = potentialNode;'],[0,'                        break;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return attributeNode;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getAttributeNS'],[-1,'     * Get an attribute value given the namespace URI and local name.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {Element} Node on which to search for an attribute.'],[-1,'     * uri - {String} Namespace URI.'],[-1,'     * name - {String} Local name of the attribute (without the prefix).'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} An attribute value or and empty string if none found.'],[-1,'     *\/'],[-1,'    getAttributeNS: function(node, uri, name) {'],[0,'        var attributeValue = \&quot;\&quot;;'],[0,'        if(node.getAttributeNS) {'],[0,'            attributeValue = node.getAttributeNS(uri, name) || \&quot;\&quot;;'],[-1,'        } else {'],[0,'            var attributeNode = this.getAttributeNodeNS(node, uri, name);'],[0,'            if(attributeNode) {'],[0,'                attributeValue = attributeNode.nodeValue;'],[-1,'            }'],[-1,'        }'],[0,'        return attributeValue;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getChildValue'],[-1,'     * Get the textual value of the node if it exists, or return an'],[-1,'     *     optional default string.  Returns an empty string if no first child'],[-1,'     *     exists and no default value is supplied.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The element used to look for a first child value.'],[-1,'     * def - {String} Optional string to return in the event that no'],[-1,'     *     first child value exists.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The value of the first child of the given node.'],[-1,'     *\/'],[-1,'    getChildValue: function(node, def) {'],[0,'        var value = def || \&quot;\&quot;;'],[0,'        if(node) {'],[0,'            for(var child=node.firstChild; child; child=child.nextSibling) {'],[0,'                switch(child.nodeType) {'],[-1,'                    case 3: \/\/ text node'],[-1,'                    case 4: \/\/ cdata section'],[0,'                        value += child.nodeValue;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return value;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: isSimpleContent'],[-1,'     * Test if the given node has only simple content (i.e. no child element'],[-1,'     *     nodes).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} An element node.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The node has no child element nodes (nodes of type 1). '],[-1,'     *\/'],[-1,'    isSimpleContent: function(node) {'],[0,'        var simple = true;'],[0,'        for(var child=node.firstChild; child; child=child.nextSibling) {'],[0,'            if(child.nodeType === 1) {'],[0,'                simple = false;'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        return simple;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: contentType'],[-1,'     * Determine the content type for a given node.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Integer} One of OpenLayers.Format.XML.CONTENT_TYPE.{EMPTY,SIMPLE,COMPLEX,MIXED}'],[-1,'     *     if the node has no, simple, complex, or mixed content.'],[-1,'     *\/'],[-1,'    contentType: function(node) {'],[0,'        var simple = false,'],[-1,'            complex = false;'],[-1,'            '],[0,'        var type = OpenLayers.Format.XML.CONTENT_TYPE.EMPTY;'],[-1,''],[0,'        for(var child=node.firstChild; child; child=child.nextSibling) {'],[0,'            switch(child.nodeType) {'],[-1,'                case 1: \/\/ element'],[0,'                    complex = true;'],[0,'                    break;'],[-1,'                case 8: \/\/ comment'],[0,'                    break;'],[-1,'                default:'],[0,'                    simple = true;'],[-1,'            }'],[0,'            if(complex &amp;&amp; simple) {'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        if(complex &amp;&amp; simple) {'],[0,'            type = OpenLayers.Format.XML.CONTENT_TYPE.MIXED;'],[0,'        } else if(complex) {'],[0,'            return OpenLayers.Format.XML.CONTENT_TYPE.COMPLEX;'],[0,'        } else if(simple) {'],[0,'            return OpenLayers.Format.XML.CONTENT_TYPE.SIMPLE;'],[-1,'        }'],[0,'        return type;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: hasAttributeNS'],[-1,'     * Determine whether a node has a particular attribute matching the given'],[-1,'     *     name and namespace.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {Element} Node on which to search for an attribute.'],[-1,'     * uri - {String} Namespace URI.'],[-1,'     * name - {String} Local name of the attribute (without the prefix).'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The node has an attribute matching the name and namespace.'],[-1,'     *\/'],[-1,'    hasAttributeNS: function(node, uri, name) {'],[0,'        var found = false;'],[0,'        if(node.hasAttributeNS) {'],[0,'            found = node.hasAttributeNS(uri, name);'],[-1,'        } else {'],[0,'            found = !!this.getAttributeNodeNS(node, uri, name);'],[-1,'        }'],[0,'        return found;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setAttributeNS'],[-1,'     * Adds a new attribute or changes the value of an attribute with the given'],[-1,'     *     namespace and name.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {Element} Element node on which to set the attribute.'],[-1,'     * uri - {String} Namespace URI for the attribute.'],[-1,'     * name - {String} Qualified name (prefix:localname) for the attribute.'],[-1,'     * value - {String} Attribute value.'],[-1,'     *\/'],[-1,'    setAttributeNS: function(node, uri, name, value) {'],[0,'        if(node.setAttributeNS) {'],[0,'            node.setAttributeNS(uri, name, value);'],[-1,'        } else {'],[0,'            if(this.xmldom) {'],[0,'                if(uri) {'],[0,'                    var attribute = node.ownerDocument.createNode('],[-1,'                        2, name, uri'],[-1,'                    );'],[0,'                    attribute.nodeValue = value;'],[0,'                    node.setAttributeNode(attribute);'],[-1,'                } else {'],[0,'                    node.setAttribute(name, value);'],[-1,'                }'],[-1,'            } else {'],[0,'                throw \&quot;setAttributeNS not implemented\&quot;;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createElementNSPlus'],[-1,'     * Shorthand for creating namespaced elements with optional attributes and'],[-1,'     *     child text nodes.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} The qualified node name.'],[-1,'     * options - {Object} Optional object for node configuration.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * uri - {String} Optional namespace uri for the element - supply a prefix'],[-1,'     *     instead if the namespace uri is a property of the format\'s namespace'],[-1,'     *     object.'],[-1,'     * attributes - {Object} Optional attributes to be set using the'],[-1,'     *     &lt;setAttributes&gt; method.'],[-1,'     * value - {String} Optional text to be appended as a text node.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} An element node.'],[-1,'     *\/'],[-1,'    createElementNSPlus: function(name, options) {'],[0,'        options = options || {};'],[-1,'        \/\/ order of prefix preference'],[-1,'        \/\/ 1. in the uri option'],[-1,'        \/\/ 2. in the prefix option'],[-1,'        \/\/ 3. in the qualified name'],[-1,'        \/\/ 4. from the defaultPrefix'],[0,'        var uri = options.uri || this.namespaces[options.prefix];'],[0,'        if(!uri) {'],[0,'            var loc = name.indexOf(\&quot;:\&quot;);'],[0,'            uri = this.namespaces[name.substring(0, loc)];'],[-1,'        }'],[0,'        if(!uri) {'],[0,'            uri = this.namespaces[this.defaultPrefix];'],[-1,'        }'],[0,'        var node = this.createElementNS(uri, name);'],[0,'        if(options.attributes) {'],[0,'            this.setAttributes(node, options.attributes);'],[-1,'        }'],[0,'        var value = options.value;'],[0,'        if(value != null) {'],[0,'            node.appendChild(this.createTextNode(value));'],[-1,'        }'],[0,'        return node;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setAttributes'],[-1,'     * Set multiple attributes given key value pairs from an object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {Element} An element node.'],[-1,'     * obj - {Object || Array} An object whose properties represent attribute'],[-1,'     *     names and values represent attribute values.  If an attribute name'],[-1,'     *     is a qualified name (\&quot;prefix:local\&quot;), the prefix will be looked up'],[-1,'     *     in the parsers {namespaces} object.  If the prefix is found,'],[-1,'     *     setAttributeNS will be used instead of setAttribute.'],[-1,'     *\/'],[-1,'    setAttributes: function(node, obj) {'],[0,'        var value, uri;'],[0,'        for(var name in obj) {'],[0,'            if(obj[name] != null &amp;&amp; obj[name].toString) {'],[0,'                value = obj[name].toString();'],[-1,'                \/\/ check for qualified attribute name (\&quot;prefix:local\&quot;)'],[0,'                uri = this.namespaces[name.substring(0, name.indexOf(\&quot;:\&quot;))] || null;'],[0,'                this.setAttributeNS(node, uri, name, value);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: readNode'],[-1,'     * Shorthand for applying one of the named readers given the node'],[-1,'     *     namespace and local name.  Readers take two args (node, obj) and'],[-1,'     *     generally extend or modify the second.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The node to be read (required).'],[-1,'     * obj - {Object} The object to be modified (optional).'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} The input object, modified (or a new one if none was provided).'],[-1,'     *\/'],[-1,'    readNode: function(node, obj) {'],[0,'        if(!obj) {'],[0,'            obj = {};'],[-1,'        }'],[0,'        var group = this.readers[node.namespaceURI ? this.namespaceAlias[node.namespaceURI]: this.defaultPrefix];'],[0,'        if(group) {'],[0,'            var local = node.localName || node.nodeName.split(\&quot;:\&quot;).pop();'],[0,'            var reader = group[local] || group[\&quot;*\&quot;];'],[0,'            if(reader) {'],[0,'                reader.apply(this, [node, obj]);'],[-1,'            }'],[-1,'        }'],[0,'        return obj;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: readChildNodes'],[-1,'     * Shorthand for applying the named readers to all children of a node.'],[-1,'     *     For each child of type 1 (element), &lt;readSelf&gt; is called.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The node to be read (required).'],[-1,'     * obj - {Object} The object to be modified (optional).'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} The input object, modified.'],[-1,'     *\/'],[-1,'    readChildNodes: function(node, obj) {'],[0,'        if(!obj) {'],[0,'            obj = {};'],[-1,'        }'],[0,'        var children = node.childNodes;'],[0,'        var child;'],[0,'        for(var i=0, len=children.length; i&lt;len; ++i) {'],[0,'            child = children[i];'],[0,'            if(child.nodeType == 1) {'],[0,'                this.readNode(child, obj);'],[-1,'            }'],[-1,'        }'],[0,'        return obj;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: writeNode'],[-1,'     * Shorthand for applying one of the named writers and appending the'],[-1,'     *     results to a node.  If a qualified name is not provided for the'],[-1,'     *     second argument (and a local name is used instead), the namespace'],[-1,'     *     of the parent node will be assumed.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} The name of a node to generate.  If a qualified name'],[-1,'     *     (e.g. \&quot;pre:Name\&quot;) is used, the namespace prefix is assumed to be'],[-1,'     *     in the &lt;writers&gt; group.  If a local name is used (e.g. \&quot;Name\&quot;) then'],[-1,'     *     the namespace of the parent is assumed.  If a local name is used'],[-1,'     *     and no parent is supplied, then the default namespace is assumed.'],[-1,'     * obj - {Object} Structure containing data for the writer.'],[-1,'     * parent - {DOMElement} Result will be appended to this node.  If no parent'],[-1,'     *     is supplied, the node will not be appended to anything.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The child node.'],[-1,'     *\/'],[-1,'    writeNode: function(name, obj, parent) {'],[0,'        var prefix, local;'],[0,'        var split = name.indexOf(\&quot;:\&quot;);'],[0,'        if(split &gt; 0) {'],[0,'            prefix = name.substring(0, split);'],[0,'            local = name.substring(split + 1);'],[-1,'        } else {'],[0,'            if(parent) {'],[0,'                prefix = this.namespaceAlias[parent.namespaceURI];'],[-1,'            } else {'],[0,'                prefix = this.defaultPrefix;'],[-1,'            }'],[0,'            local = name;'],[-1,'        }'],[0,'        var child = this.writers[prefix][local].apply(this, [obj]);'],[0,'        if(parent) {'],[0,'            parent.appendChild(child);'],[-1,'        }'],[0,'        return child;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getChildEl'],[-1,'     * Get the first child element.  Optionally only return the first child'],[-1,'     *     if it matches the given name and namespace URI.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The parent node.'],[-1,'     * name - {String} Optional node name (local) to search for.'],[-1,'     * uri - {String} Optional namespace URI to search for.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The first child.  Returns null if no element is found, if'],[-1,'     *     something significant besides an element is found, or if the element'],[-1,'     *     found does not match the optional name and uri.'],[-1,'     *\/'],[-1,'    getChildEl: function(node, name, uri) {'],[0,'        return node &amp;&amp; this.getThisOrNextEl(node.firstChild, name, uri);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getNextEl'],[-1,'     * Get the next sibling element.  Optionally get the first sibling only'],[-1,'     *     if it matches the given local name and namespace URI.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The node.'],[-1,'     * name - {String} Optional local name of the sibling to search for.'],[-1,'     * uri - {String} Optional namespace URI of the sibling to search for.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The next sibling element.  Returns null if no element is'],[-1,'     *     found, something significant besides an element is found, or the'],[-1,'     *     found element does not match the optional name and uri.'],[-1,'     *\/'],[-1,'    getNextEl: function(node, name, uri) {'],[0,'        return node &amp;&amp; this.getThisOrNextEl(node.nextSibling, name, uri);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getThisOrNextEl'],[-1,'     * Return this node or the next element node.  Optionally get the first'],[-1,'     *     sibling with the given local name or namespace URI.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The node.'],[-1,'     * name - {String} Optional local name of the sibling to search for.'],[-1,'     * uri - {String} Optional namespace URI of the sibling to search for.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The next sibling element.  Returns null if no element is'],[-1,'     *     found, something significant besides an element is found, or the'],[-1,'     *     found element does not match the query.'],[-1,'     *\/'],[-1,'    getThisOrNextEl: function(node, name, uri) {'],[0,'        outer: for(var sibling=node; sibling; sibling=sibling.nextSibling) {'],[0,'            switch(sibling.nodeType) {'],[-1,'                case 1: \/\/ Element'],[0,'                    if((!name || name === (sibling.localName || sibling.nodeName.split(\&quot;:\&quot;).pop())) &amp;&amp;'],[-1,'                       (!uri || uri === sibling.namespaceURI)) {'],[-1,'                        \/\/ matches'],[0,'                        break outer;'],[-1,'                    }'],[0,'                    sibling = null;'],[0,'                    break outer;'],[-1,'                case 3: \/\/ Text'],[0,'                    if(\/^\\s*$\/.test(sibling.nodeValue)) {'],[0,'                        break;'],[-1,'                    }'],[-1,'                case 4: \/\/ CDATA'],[-1,'                case 6: \/\/ ENTITY_NODE'],[-1,'                case 12: \/\/ NOTATION_NODE'],[-1,'                case 10: \/\/ DOCUMENT_TYPE_NODE'],[-1,'                case 11: \/\/ DOCUMENT_FRAGMENT_NODE'],[0,'                    sibling = null;'],[0,'                    break outer;'],[-1,'            } \/\/ ignore comments and processing instructions'],[-1,'        }'],[0,'        return sibling || null;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: lookupNamespaceURI'],[-1,'     * Takes a prefix and returns the namespace URI associated with it on the given'],[-1,'     *     node if found (and null if not). Supplying null for the prefix will'],[-1,'     *     return the default namespace.'],[-1,'     *'],[-1,'     * For browsers that support it, this calls the native lookupNamesapceURI'],[-1,'     *     function.  In other browsers, this is an implementation of'],[-1,'     *     http:\/\/www.w3.org\/TR\/DOM-Level-3-Core\/core.html#Node3-lookupNamespaceURI.'],[-1,'     *'],[-1,'     * For browsers that don\'t support the attribute.ownerElement property, this'],[-1,'     *     method cannot be called on attribute nodes.'],[-1,'     *     '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The node from which to start looking.'],[-1,'     * prefix - {String} The prefix to lookup or null to lookup the default namespace.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} The namespace URI for the given prefix.  Returns null if the prefix'],[-1,'     *     cannot be found or the node is the wrong type.'],[-1,'     *\/'],[-1,'    lookupNamespaceURI: function(node, prefix) {'],[0,'        var uri = null;'],[0,'        if(node) {'],[0,'            if(node.lookupNamespaceURI) {'],[0,'                uri = node.lookupNamespaceURI(prefix);'],[-1,'            } else {'],[0,'                outer: switch(node.nodeType) {'],[-1,'                    case 1: \/\/ ELEMENT_NODE'],[0,'                        if(node.namespaceURI !== null &amp;&amp; node.prefix === prefix) {'],[0,'                            uri = node.namespaceURI;'],[0,'                            break outer;'],[-1,'                        }'],[0,'                        var len = node.attributes.length;'],[0,'                        if(len) {'],[0,'                            var attr;'],[0,'                            for(var i=0; i&lt;len; ++i) {'],[0,'                                attr = node.attributes[i];'],[0,'                                if(attr.prefix === \&quot;xmlns\&quot; &amp;&amp; attr.name === \&quot;xmlns:\&quot; + prefix) {'],[0,'                                    uri = attr.value || null;'],[0,'                                    break outer;'],[0,'                                } else if(attr.name === \&quot;xmlns\&quot; &amp;&amp; prefix === null) {'],[0,'                                    uri = attr.value || null;'],[0,'                                    break outer;'],[-1,'                                }'],[-1,'                            }'],[-1,'                        }'],[0,'                        uri = this.lookupNamespaceURI(node.parentNode, prefix);'],[0,'                        break outer;'],[-1,'                    case 2: \/\/ ATTRIBUTE_NODE'],[0,'                        uri = this.lookupNamespaceURI(node.ownerElement, prefix);'],[0,'                        break outer;'],[-1,'                    case 9: \/\/ DOCUMENT_NODE'],[0,'                        uri = this.lookupNamespaceURI(node.documentElement, prefix);'],[0,'                        break outer;'],[-1,'                    case 6: \/\/ ENTITY_NODE'],[-1,'                    case 12: \/\/ NOTATION_NODE'],[-1,'                    case 10: \/\/ DOCUMENT_TYPE_NODE'],[-1,'                    case 11: \/\/ DOCUMENT_FRAGMENT_NODE'],[0,'                        break outer;'],[-1,'                    default: '],[-1,'                        \/\/ TEXT_NODE (3), CDATA_SECTION_NODE (4), ENTITY_REFERENCE_NODE (5),'],[-1,'                        \/\/ PROCESSING_INSTRUCTION_NODE (7), COMMENT_NODE (8)'],[0,'                        uri =  this.lookupNamespaceURI(node.parentNode, prefix);'],[0,'                        break outer;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return uri;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getXMLDoc'],[-1,'     * Get an XML document for nodes that are not supported in HTML (e.g.'],[-1,'     * createCDATASection). On IE, this will either return an existing or'],[-1,'     * create a new &lt;xmldom&gt; on the instance. On other browsers, this will'],[-1,'     * either return an existing or create a new shared document (see'],[-1,'     * &lt;OpenLayers.Format.XML.document&gt;).'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {XMLDocument}'],[-1,'     *\/'],[-1,'    getXMLDoc: function() {'],[0,'        if (!OpenLayers.Format.XML.document &amp;&amp; !this.xmldom) {'],[0,'            if (document.implementation &amp;&amp; document.implementation.createDocument) {'],[0,'                OpenLayers.Format.XML.document ='],[-1,'                    document.implementation.createDocument(\&quot;\&quot;, \&quot;\&quot;, null);'],[0,'            } else if (!this.xmldom &amp;&amp; window.ActiveXObject) {'],[0,'                this.xmldom = new ActiveXObject(\&quot;Microsoft.XMLDOM\&quot;);'],[-1,'            }'],[-1,'        }'],[0,'        return OpenLayers.Format.XML.document || this.xmldom;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.XML\&quot; '],[-1,''],[-1,'});     '],[-1,''],[1,'OpenLayers.Format.XML.CONTENT_TYPE = {EMPTY: 0, SIMPLE: 1, COMPLEX: 2, MIXED: 3};'],[-1,''],[-1,'\/**'],[-1,' * APIFunction: OpenLayers.Format.XML.lookupNamespaceURI'],[-1,' * Takes a prefix and returns the namespace URI associated with it on the given'],[-1,' *     node if found (and null if not). Supplying null for the prefix will'],[-1,' *     return the default namespace.'],[-1,' *'],[-1,' * For browsers that support it, this calls the native lookupNamesapceURI'],[-1,' *     function.  In other browsers, this is an implementation of'],[-1,' *     http:\/\/www.w3.org\/TR\/DOM-Level-3-Core\/core.html#Node3-lookupNamespaceURI.'],[-1,' *'],[-1,' * For browsers that don\'t support the attribute.ownerElement property, this'],[-1,' *     method cannot be called on attribute nodes.'],[-1,' *     '],[-1,' * Parameters:'],[-1,' * node - {DOMElement} The node from which to start looking.'],[-1,' * prefix - {String} The prefix to lookup or null to lookup the default namespace.'],[-1,' * '],[-1,' * Returns:'],[-1,' * {String} The namespace URI for the given prefix.  Returns null if the prefix'],[-1,' *     cannot be found or the node is the wrong type.'],[-1,' *\/'],[1,'OpenLayers.Format.XML.lookupNamespaceURI = OpenLayers.Function.bind('],[-1,'    OpenLayers.Format.XML.prototype.lookupNamespaceURI,'],[-1,'    OpenLayers.Format.XML.prototype'],[-1,');'],[-1,''],[-1,'\/**'],[-1,' * Property: OpenLayers.Format.XML.document'],[-1,' * {XMLDocument} XML document to reuse for creating non-HTML compliant nodes,'],[-1,' * like document.createCDATASection.'],[-1,' *\/'],[1,'OpenLayers.Format.XML.document = null;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/BaseTypes\/Date.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/SingleFile.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Date'],[-1,' * Contains implementations of Date.parse and date.toISOString that match the'],[-1,' *     ECMAScript 5 specification for parsing RFC 3339 dates.'],[-1,' *     http:\/\/tools.ietf.org\/html\/rfc3339'],[-1,' *\/'],[1,'OpenLayers.Date = {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: dateRegEx'],[-1,'     * The regex to be used for validating dates. You can provide your own'],[-1,'     * regex for instance for adding support for years before BC. Default'],[-1,'     * value is: \/^(?:(\\d{4})(?:-(\\d{2})(?:-(\\d{2}))?)?)?(?:(?:T(\\d{1,2}):(\\d{2}):(\\d{2}(?:\\.\\d+)?)(Z|(?:[+-]\\d{1,2}(?::(\\d{2}))?)))|Z)?$\/'],[-1,'     *\/'],[-1,'    dateRegEx: \/^(?:(\\d{4})(?:-(\\d{2})(?:-(\\d{2}))?)?)?(?:(?:T(\\d{1,2}):(\\d{2}):(\\d{2}(?:\\.\\d+)?)(Z|(?:[+-]\\d{1,2}(?::(\\d{2}))?)))|Z)?$\/,'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: toISOString'],[-1,'     * Generates a string representing a date.  The format of the string follows'],[-1,'     *     the profile of ISO 8601 for date and time on the Internet (see'],[-1,'     *     http:\/\/tools.ietf.org\/html\/rfc3339).  If the toISOString method is'],[-1,'     *     available on the Date prototype, that is used.  The toISOString'],[-1,'     *     method for Date instances is defined in ECMA-262.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * date - {Date} A date object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string representing the date (e.g.'],[-1,'     *     \&quot;2010-08-07T16:58:23.123Z\&quot;).  If the date does not have a valid time'],[-1,'     *     (i.e. isNaN(date.getTime())) this method returns the string \&quot;Invalid'],[-1,'     *     Date\&quot;.  The ECMA standard says the toISOString method should throw'],[-1,'     *     RangeError in this case, but Firefox returns a string instead.  For'],[-1,'     *     best results, use isNaN(date.getTime()) to determine date validity'],[-1,'     *     before generating date strings.'],[-1,'     *\/'],[-1,'    toISOString: (function() {'],[1,'        if (\&quot;toISOString\&quot; in Date.prototype) {'],[1,'            return function(date) {'],[0,'                return date.toISOString();'],[-1,'            };'],[-1,'        } else {'],[0,'            return function(date) {'],[0,'                var str;'],[0,'                if (isNaN(date.getTime())) {'],[-1,'                    \/\/ ECMA-262 says throw RangeError, Firefox returns'],[-1,'                    \/\/ \&quot;Invalid Date\&quot;'],[0,'                    str = \&quot;Invalid Date\&quot;;'],[-1,'                } else {'],[0,'                    str ='],[-1,'                        date.getUTCFullYear() + \&quot;-\&quot; +'],[-1,'                        OpenLayers.Number.zeroPad(date.getUTCMonth() + 1, 2) + \&quot;-\&quot; +'],[-1,'                        OpenLayers.Number.zeroPad(date.getUTCDate(), 2) + \&quot;T\&quot; +'],[-1,'                        OpenLayers.Number.zeroPad(date.getUTCHours(), 2) + \&quot;:\&quot; +'],[-1,'                        OpenLayers.Number.zeroPad(date.getUTCMinutes(), 2) + \&quot;:\&quot; +'],[-1,'                        OpenLayers.Number.zeroPad(date.getUTCSeconds(), 2) + \&quot;.\&quot; +'],[-1,'                        OpenLayers.Number.zeroPad(date.getUTCMilliseconds(), 3) + \&quot;Z\&quot;;'],[-1,'                }'],[0,'                return str;'],[-1,'            };'],[-1,'        }'],[-1,''],[-1,'    })(),'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: parse'],[-1,'     * Generate a date object from a string.  The format for the string follows'],[-1,'     *     the profile of ISO 8601 for date and time on the Internet (see'],[-1,'     *     http:\/\/tools.ietf.org\/html\/rfc3339).  We don\'t call the native'],[-1,'     *     Date.parse because of inconsistency between implmentations.  In'],[-1,'     *     Chrome, calling Date.parse with a string that doesn\'t contain any'],[-1,'     *     indication of the timezone (e.g. \&quot;2011\&quot;), the date is interpreted'],[-1,'     *     in local time.  On Firefox, the assumption is UTC.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * str - {String} A string representing the date (e.g.'],[-1,'     *     \&quot;2010\&quot;, \&quot;2010-08\&quot;, \&quot;2010-08-07\&quot;, \&quot;2010-08-07T16:58:23.123Z\&quot;,'],[-1,'     *     \&quot;2010-08-07T11:58:23.123-06\&quot;).'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Date} A date object.  If the string could not be parsed, an invalid'],[-1,'     *     date is returned (i.e. isNaN(date.getTime())).'],[-1,'     *\/'],[-1,'    parse: function(str) {'],[0,'        var date;'],[0,'        var match = str.match(this.dateRegEx);'],[0,'        if (match &amp;&amp; (match[1] || match[7])) { \/\/ must have at least year or time'],[0,'            var year = parseInt(match[1], 10) || 0;'],[0,'            var month = (parseInt(match[2], 10) - 1) || 0;'],[0,'            var day = parseInt(match[3], 10) || 1;'],[0,'            date = new Date(Date.UTC(year, month, day));'],[-1,'            \/\/ optional time'],[0,'            var type = match[7];'],[0,'            if (type) {'],[0,'                var hours = parseInt(match[4], 10);'],[0,'                var minutes = parseInt(match[5], 10);'],[0,'                var secFrac = parseFloat(match[6]);'],[0,'                var seconds = secFrac | 0;'],[0,'                var milliseconds = Math.round(1000 * (secFrac - seconds));'],[0,'                date.setUTCHours(hours, minutes, seconds, milliseconds);'],[-1,'                \/\/ check offset'],[0,'                if (type !== \&quot;Z\&quot;) {'],[0,'                    var hoursOffset = parseInt(type, 10);'],[0,'                    var minutesOffset = parseInt(match[8], 10) || 0;'],[0,'                    var offset = -1000 * (60 * (hoursOffset * 60) + minutesOffset * 60);'],[0,'                    date = new Date(date.getTime() + offset);'],[-1,'                }'],[-1,'            }'],[-1,'        } else {'],[0,'            date = new Date(\&quot;invalid\&quot;);'],[-1,'        }'],[0,'        return date;'],[-1,'    }'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Feature.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Feature'],[-1,' * Features are combinations of geography and attributes. The OpenLayers.Feature'],[-1,' *     class specifically combines a marker and a lonlat.'],[-1,' *\/'],[1,'OpenLayers.Feature = OpenLayers.Class({'],[-1,''],[-1,'    \/** '],[-1,'     * Property: layer '],[-1,'     * {&lt;OpenLayers.Layer&gt;} '],[-1,'     *\/'],[-1,'    layer: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: id '],[-1,'     * {String} '],[-1,'     *\/'],[-1,'    id: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: lonlat '],[-1,'     * {&lt;OpenLayers.LonLat&gt;} '],[-1,'     *\/'],[-1,'    lonlat: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: data '],[-1,'     * {Object} '],[-1,'     *\/'],[-1,'    data: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: marker '],[-1,'     * {&lt;OpenLayers.Marker&gt;} '],[-1,'     *\/'],[-1,'    marker: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: popupClass'],[-1,'     * {&lt;OpenLayers.Class&gt;} The class which will be used to instantiate'],[-1,'     *     a new Popup. Default is &lt;OpenLayers.Popup.Anchored&gt;.'],[-1,'     *\/'],[-1,'    popupClass: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: popup '],[-1,'     * {&lt;OpenLayers.Popup&gt;} '],[-1,'     *\/'],[-1,'    popup: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Feature'],[-1,'     * Constructor for features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer&gt;} '],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;} '],[-1,'     * data - {Object} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature&gt;}'],[-1,'     *\/'],[-1,'    initialize: function(layer, lonlat, data) {'],[0,'        this.layer = layer;'],[0,'        this.lonlat = lonlat;'],[0,'        this.data = (data != null) ? data : {};'],[0,'        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \&quot;_\&quot;); '],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: destroy'],[-1,'     * nullify references to prevent circular references and memory leaks'],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,''],[-1,'        \/\/remove the popup from the map'],[0,'        if ((this.layer != null) &amp;&amp; (this.layer.map != null)) {'],[0,'            if (this.popup != null) {'],[0,'                this.layer.map.removePopup(this.popup);'],[-1,'            }'],[-1,'        }'],[-1,'        \/\/ remove the marker from the layer'],[0,'        if (this.layer != null &amp;&amp; this.marker != null) {'],[0,'            this.layer.removeMarker(this.marker);'],[-1,'        }'],[-1,''],[0,'        this.layer = null;'],[0,'        this.id = null;'],[0,'        this.lonlat = null;'],[0,'        this.data = null;'],[0,'        if (this.marker != null) {'],[0,'            this.destroyMarker(this.marker);'],[0,'            this.marker = null;'],[-1,'        }'],[0,'        if (this.popup != null) {'],[0,'            this.destroyPopup(this.popup);'],[0,'            this.popup = null;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onScreen'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the feature is currently visible on screen'],[-1,'     *           (based on its \'lonlat\' property)'],[-1,'     *\/'],[-1,'    onScreen:function() {'],[-1,'        '],[0,'        var onScreen = false;'],[0,'        if ((this.layer != null) &amp;&amp; (this.layer.map != null)) {'],[0,'            var screenBounds = this.layer.map.getExtent();'],[0,'            onScreen = screenBounds.containsLonLat(this.lonlat);'],[-1,'        }    '],[0,'        return onScreen;'],[-1,'    },'],[-1,'    '],[-1,''],[-1,'    \/**'],[-1,'     * Method: createMarker'],[-1,'     * Based on the data associated with the Feature, create and return a marker object.'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {&lt;OpenLayers.Marker&gt;} A Marker Object created from the \'lonlat\' and \'icon\' properties'],[-1,'     *          set in this.data. If no \'lonlat\' is set, returns null. If no'],[-1,'     *          \'icon\' is set, OpenLayers.Marker() will load the default image.'],[-1,'     *          '],[-1,'     *          Note - this.marker is set to return value'],[-1,'     * '],[-1,'     *\/'],[-1,'    createMarker: function() {'],[-1,''],[0,'        if (this.lonlat != null) {'],[0,'            this.marker = new OpenLayers.Marker(this.lonlat, this.data.icon);'],[-1,'        }'],[0,'        return this.marker;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroyMarker'],[-1,'     * Destroys marker.'],[-1,'     * If user overrides the createMarker() function, s\/he should be able'],[-1,'     *   to also specify an alternative function for destroying it'],[-1,'     *\/'],[-1,'    destroyMarker: function() {'],[0,'        this.marker.destroy();  '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createPopup'],[-1,'     * Creates a popup object created from the \'lonlat\', \'popupSize\','],[-1,'     *     and \'popupContentHTML\' properties set in this.data. It uses'],[-1,'     *     this.marker.icon as default anchor. '],[-1,'     *  '],[-1,'     *  If no \'lonlat\' is set, returns null. '],[-1,'     *  If no this.marker has been created, no anchor is sent.'],[-1,'     *'],[-1,'     *  Note - the returned popup object is \'owned\' by the feature, so you'],[-1,'     *      cannot use the popup\'s destroy method to discard the popup.'],[-1,'     *      Instead, you must use the feature\'s destroyPopup'],[-1,'     * '],[-1,'     *  Note - this.popup is set to return value'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * closeBox - {Boolean} create popup with closebox or not'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Popup&gt;} Returns the created popup, which is also set'],[-1,'     *     as \'popup\' property of this feature. Will be of whatever type'],[-1,'     *     specified by this feature\'s \'popupClass\' property, but must be'],[-1,'     *     of type &lt;OpenLayers.Popup&gt;.'],[-1,'     * '],[-1,'     *\/'],[-1,'    createPopup: function(closeBox) {'],[-1,''],[0,'        if (this.lonlat != null) {'],[0,'            if (!this.popup) {'],[0,'                var anchor = (this.marker) ? this.marker.icon : null;'],[0,'                var popupClass = this.popupClass ? '],[-1,'                    this.popupClass : OpenLayers.Popup.Anchored;'],[0,'                this.popup = new popupClass(this.id + \&quot;_popup\&quot;, '],[-1,'                                            this.lonlat,'],[-1,'                                            this.data.popupSize,'],[-1,'                                            this.data.popupContentHTML,'],[-1,'                                            anchor, '],[-1,'                                            closeBox); '],[-1,'            }    '],[0,'            if (this.data.overflow != null) {'],[0,'                this.popup.contentDiv.style.overflow = this.data.overflow;'],[-1,'            }    '],[-1,'            '],[0,'            this.popup.feature = this;'],[-1,'        }        '],[0,'        return this.popup;'],[-1,'    },'],[-1,''],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroyPopup'],[-1,'     * Destroys the popup created via createPopup.'],[-1,'     *'],[-1,'     * As with the marker, if user overrides the createPopup() function, s\/he '],[-1,'     *   should also be able to override the destruction'],[-1,'     *\/'],[-1,'    destroyPopup: function() {'],[0,'        if (this.popup) {'],[0,'            this.popup.feature = null;'],[0,'            this.popup.destroy();'],[0,'            this.popup = null;'],[-1,'        }    '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Feature\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Feature\/Vector.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/\/ TRASH THIS'],[1,'OpenLayers.State = {'],[-1,'    \/** states *\/'],[-1,'    UNKNOWN: \'Unknown\','],[-1,'    INSERT: \'Insert\','],[-1,'    UPDATE: \'Update\','],[-1,'    DELETE: \'Delete\''],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Feature.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Feature.Vector'],[-1,' * Vector features use the OpenLayers.Geometry classes as geometry description.'],[-1,' * They have an \'attributes\' property, which is the data object, and a \'style\''],[-1,' * property, the default values of which are defined in the '],[-1,' * &lt;OpenLayers.Feature.Vector.style&gt; objects.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Feature&gt;'],[-1,' *\/'],[1,'OpenLayers.Feature.Vector = OpenLayers.Class(OpenLayers.Feature, {'],[-1,''],[-1,'    \/** '],[-1,'     * Property: fid '],[-1,'     * {String} '],[-1,'     *\/'],[-1,'    fid: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: geometry '],[-1,'     * {&lt;OpenLayers.Geometry&gt;} '],[-1,'     *\/'],[-1,'    geometry: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: attributes '],[-1,'     * {Object} This object holds arbitrary, serializable properties that'],[-1,'     *     describe the feature.'],[-1,'     *\/'],[-1,'    attributes: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: bounds'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} The box bounding that feature\'s geometry, that'],[-1,'     *     property can be set by an &lt;OpenLayers.Format&gt; object when'],[-1,'     *     deserializing the feature, so in most cases it represents an'],[-1,'     *     information set by the server. '],[-1,'     *\/'],[-1,'    bounds: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: state '],[-1,'     * {String} '],[-1,'     *\/'],[-1,'    state: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: style '],[-1,'     * {Object} '],[-1,'     *\/'],[-1,'    style: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: url'],[-1,'     * {String} If this property is set it will be taken into account by'],[-1,'     *     {&lt;OpenLayers.HTTP&gt;} when upadting or deleting the feature.'],[-1,'     *\/'],[-1,'    url: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: renderIntent'],[-1,'     * {String} rendering intent currently being used'],[-1,'     *\/'],[-1,'    renderIntent: \&quot;default\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: modified'],[-1,'     * {Object} An object with the originals of the geometry and attributes of'],[-1,'     * the feature, if they were changed. Currently this property is only read'],[-1,'     * by &lt;OpenLayers.Format.WFST.v1&gt;, and written by'],[-1,'     * &lt;OpenLayers.Control.ModifyFeature&gt;, which sets the geometry property.'],[-1,'     * Applications can set the originals of modified attributes in the'],[-1,'     * attributes property. Note that applications have to check if this'],[-1,'     * object and the attributes property is already created before using it.'],[-1,'     * After a change made with ModifyFeature, this object could look like'],[-1,'     *'],[-1,'     * (code)'],[-1,'     * {'],[-1,'     *     geometry: &gt;Object'],[-1,'     * }'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * When an application has made changes to feature attributes, it could'],[-1,'     * have set the attributes to something like this:'],[-1,'     *'],[-1,'     * (code)'],[-1,'     * {'],[-1,'     *     attributes: {'],[-1,'     *         myAttribute: \&quot;original\&quot;'],[-1,'     *     }'],[-1,'     * }'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Note that &lt;OpenLayers.Format.WFST.v1&gt; only checks for truthy values in'],[-1,'     * *modified.geometry* and the attribute names in *modified.attributes*,'],[-1,'     * but it is recommended to set the original values (and not just true) as'],[-1,'     * attribute value, so applications could use this information to undo'],[-1,'     * changes.'],[-1,'     *\/'],[-1,'    modified: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Feature.Vector'],[-1,'     * Create a vector feature. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} The geometry that this feature'],[-1,'     *     represents.'],[-1,'     * attributes - {Object} An optional object that will be mapped to the'],[-1,'     *     &lt;attributes&gt; property. '],[-1,'     * style - {Object} An optional style object.'],[-1,'     *\/'],[-1,'    initialize: function(geometry, attributes, style) {'],[0,'        OpenLayers.Feature.prototype.initialize.apply(this,'],[-1,'                                                      [null, null, attributes]);'],[0,'        this.lonlat = null;'],[0,'        this.geometry = geometry ? geometry : null;'],[0,'        this.state = null;'],[0,'        this.attributes = {};'],[0,'        if (attributes) {'],[0,'            this.attributes = OpenLayers.Util.extend(this.attributes,'],[-1,'                                                     attributes);'],[-1,'        }'],[0,'        this.style = style ? style : null; '],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: destroy'],[-1,'     * nullify references to prevent circular references and memory leaks'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if (this.layer) {'],[0,'            this.layer.removeFeatures(this);'],[0,'            this.layer = null;'],[-1,'        }'],[-1,'            '],[0,'        this.geometry = null;'],[0,'        this.modified = null;'],[0,'        OpenLayers.Feature.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: clone'],[-1,'     * Create a clone of this vector feature.  Does not set any non-standard'],[-1,'     *     properties.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} An exact clone of this vector feature.'],[-1,'     *\/'],[-1,'    clone: function () {'],[0,'        return new OpenLayers.Feature.Vector('],[-1,'            this.geometry ? this.geometry.clone() : null,'],[-1,'            this.attributes,'],[-1,'            this.style);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: onScreen'],[-1,'     * Determine whether the feature is within the map viewport.  This method'],[-1,'     *     tests for an intersection between the geometry and the viewport'],[-1,'     *     bounds.  If a more effecient but less precise geometry bounds'],[-1,'     *     intersection is desired, call the method with the boundsOnly'],[-1,'     *     parameter true.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * boundsOnly - {Boolean} Only test whether a feature\'s bounds intersects'],[-1,'     *     the viewport bounds.  Default is false.  If false, the feature\'s'],[-1,'     *     geometry must intersect the viewport for onScreen to return true.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The feature is currently visible on screen (optionally'],[-1,'     *     based on its bounds if boundsOnly is true).'],[-1,'     *\/'],[-1,'    onScreen:function(boundsOnly) {'],[0,'        var onScreen = false;'],[0,'        if(this.layer &amp;&amp; this.layer.map) {'],[0,'            var screenBounds = this.layer.map.getExtent();'],[0,'            if(boundsOnly) {'],[0,'                var featureBounds = this.geometry.getBounds();'],[0,'                onScreen = screenBounds.intersectsBounds(featureBounds);'],[-1,'            } else {'],[0,'                var screenPoly = screenBounds.toGeometry();'],[0,'                onScreen = screenPoly.intersects(this.geometry);'],[-1,'            }'],[-1,'        }    '],[0,'        return onScreen;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getVisibility'],[-1,'     * Determine whether the feature is displayed or not. It may not displayed'],[-1,'     *     because:'],[-1,'     *     - its style display property is set to \'none\','],[-1,'     *     - it doesn\'t belong to any layer,'],[-1,'     *     - the styleMap creates a symbolizer with display property set to \'none\''],[-1,'     *          for it,'],[-1,'     *     - the layer which it belongs to is not visible.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The feature is currently displayed.'],[-1,'     *\/'],[-1,'    getVisibility: function() {'],[0,'        return !(this.style &amp;&amp; this.style.display == \'none\' ||'],[-1,'                 !this.layer ||'],[-1,'                 this.layer &amp;&amp; this.layer.styleMap &amp;&amp;'],[-1,'                 this.layer.styleMap.createSymbolizer(this, this.renderIntent).display == \'none\' ||'],[-1,'                 this.layer &amp;&amp; !this.layer.getVisibility());'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createMarker'],[-1,'     * HACK - we need to decide if all vector features should be able to'],[-1,'     *     create markers'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Marker&gt;} For now just returns null'],[-1,'     *\/'],[-1,'    createMarker: function() {'],[0,'        return null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroyMarker'],[-1,'     * HACK - we need to decide if all vector features should be able to'],[-1,'     *     delete markers'],[-1,'     * '],[-1,'     * If user overrides the createMarker() function, s\/he should be able'],[-1,'     *   to also specify an alternative function for destroying it'],[-1,'     *\/'],[-1,'    destroyMarker: function() {'],[-1,'        \/\/ pass'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createPopup'],[-1,'     * HACK - we need to decide if all vector features should be able to'],[-1,'     *     create popups'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Popup&gt;} For now just returns null'],[-1,'     *\/'],[-1,'    createPopup: function() {'],[0,'        return null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: atPoint'],[-1,'     * Determins whether the feature intersects with the specified location.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;|Object} OpenLayers.LonLat or an'],[-1,'     *     object with a \'lon\' and \'lat\' properties.'],[-1,'     * toleranceLon - {float} Optional tolerance in Geometric Coords'],[-1,'     * toleranceLat - {float} Optional tolerance in Geographic Coords'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the feature is at the specified location'],[-1,'     *\/'],[-1,'    atPoint: function(lonlat, toleranceLon, toleranceLat) {'],[0,'        var atPoint = false;'],[0,'        if(this.geometry) {'],[0,'            atPoint = this.geometry.atPoint(lonlat, toleranceLon, '],[-1,'                                                    toleranceLat);'],[-1,'        }'],[0,'        return atPoint;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroyPopup'],[-1,'     * HACK - we need to decide if all vector features should be able to'],[-1,'     * delete popups'],[-1,'     *\/'],[-1,'    destroyPopup: function() {'],[-1,'        \/\/ pass'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: move'],[-1,'     * Moves the feature and redraws it at its new location'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * location - {&lt;OpenLayers.LonLat&gt; or &lt;OpenLayers.Pixel&gt;} the'],[-1,'     *         location to which to move the feature.'],[-1,'     *\/'],[-1,'    move: function(location) {'],[-1,''],[0,'        if(!this.layer || !this.geometry.move){'],[-1,'            \/\/do nothing if no layer or immoveable geometry'],[0,'            return undefined;'],[-1,'        }'],[-1,''],[0,'        var pixel;'],[0,'        if (location.CLASS_NAME == \&quot;OpenLayers.LonLat\&quot;) {'],[0,'            pixel = this.layer.getViewPortPxFromLonLat(location);'],[-1,'        } else {'],[0,'            pixel = location;'],[-1,'        }'],[-1,'        '],[0,'        var lastPixel = this.layer.getViewPortPxFromLonLat(this.geometry.getBounds().getCenterLonLat());'],[0,'        var res = this.layer.map.getResolution();'],[0,'        this.geometry.move(res * (pixel.x - lastPixel.x),'],[-1,'                           res * (lastPixel.y - pixel.y));'],[0,'        this.layer.drawFeature(this);'],[0,'        return lastPixel;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: toState'],[-1,'     * Sets the new state'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * state - {String} '],[-1,'     *\/'],[-1,'    toState: function(state) {'],[0,'        if (state == OpenLayers.State.UPDATE) {'],[0,'            switch (this.state) {'],[-1,'                case OpenLayers.State.UNKNOWN:'],[-1,'                case OpenLayers.State.DELETE:'],[0,'                    this.state = state;'],[0,'                    break;'],[-1,'                case OpenLayers.State.UPDATE:'],[-1,'                case OpenLayers.State.INSERT:'],[0,'                    break;'],[-1,'            }'],[0,'        } else if (state == OpenLayers.State.INSERT) {'],[0,'            switch (this.state) {'],[-1,'                case OpenLayers.State.UNKNOWN:'],[0,'                    break;'],[-1,'                default:'],[0,'                    this.state = state;'],[0,'                    break;'],[-1,'            }'],[0,'        } else if (state == OpenLayers.State.DELETE) {'],[0,'            switch (this.state) {'],[-1,'                case OpenLayers.State.INSERT:'],[-1,'                    \/\/ the feature should be destroyed'],[0,'                    break;'],[-1,'                case OpenLayers.State.DELETE:'],[0,'                    break;'],[-1,'                case OpenLayers.State.UNKNOWN:'],[-1,'                case OpenLayers.State.UPDATE:'],[0,'                    this.state = state;'],[0,'                    break;'],[-1,'            }'],[0,'        } else if (state == OpenLayers.State.UNKNOWN) {'],[0,'            this.state = state;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Feature.Vector\&quot;'],[-1,'});'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Feature.Vector.style'],[-1,' * OpenLayers features can have a number of style attributes. The \'default\' '],[-1,' *     style will typically be used if no other style is specified. These'],[-1,' *     styles correspond for the most part, to the styling properties defined'],[-1,' *     by the SVG standard. '],[-1,' *     Information on fill properties: http:\/\/www.w3.org\/TR\/SVG\/painting.html#FillProperties'],[-1,' *     Information on stroke properties: http:\/\/www.w3.org\/TR\/SVG\/painting.html#StrokeProperties'],[-1,' *'],[-1,' * Symbolizer properties:'],[-1,' * fill - {Boolean} Set to false if no fill is desired.'],[-1,' * fillColor - {String} Hex fill color.  Default is \&quot;#ee9900\&quot;.'],[-1,' * fillOpacity - {Number} Fill opacity (0-1).  Default is 0.4 '],[-1,' * stroke - {Boolean} Set to false if no stroke is desired.'],[-1,' * strokeColor - {String} Hex stroke color.  Default is \&quot;#ee9900\&quot;.'],[-1,' * strokeOpacity - {Number} Stroke opacity (0-1).  Default is 1.'],[-1,' * strokeWidth - {Number} Pixel stroke width.  Default is 1.'],[-1,' * strokeLinecap - {String} Stroke cap type.  Default is \&quot;round\&quot;.  [butt | round | square]'],[-1,' * strokeDashstyle - {String} Stroke dash style.  Default is \&quot;solid\&quot;. [dot | dash | dashdot | longdash | longdashdot | solid]'],[-1,' * graphic - {Boolean} Set to false if no graphic is desired.'],[-1,' * pointRadius - {Number} Pixel point radius.  Default is 6.'],[-1,' * pointerEvents - {String}  Default is \&quot;visiblePainted\&quot;.'],[-1,' * cursor - {String} Default is \&quot;\&quot;.'],[-1,' * externalGraphic - {String} Url to an external graphic that will be used for rendering points.'],[-1,' * graphicWidth - {Number} Pixel width for sizing an external graphic.'],[-1,' * graphicHeight - {Number} Pixel height for sizing an external graphic.'],[-1,' * graphicOpacity - {Number} Opacity (0-1) for an external graphic.'],[-1,' * graphicXOffset - {Number} Pixel offset along the positive x axis for displacing an external graphic.'],[-1,' * graphicYOffset - {Number} Pixel offset along the positive y axis for displacing an external graphic.'],[-1,' * rotation - {Number} For point symbolizers, this is the rotation of a graphic in the clockwise direction about its center point (or any point off center as specified by graphicXOffset and graphicYOffset).'],[-1,' * graphicZIndex - {Number} The integer z-index value to use in rendering.'],[-1,' * graphicName - {String} Named graphic to use when rendering points.  Supported values include \&quot;circle\&quot; (default),'],[-1,' *     \&quot;square\&quot;, \&quot;star\&quot;, \&quot;x\&quot;, \&quot;cross\&quot;, \&quot;triangle\&quot;.'],[-1,' * graphicTitle - {String} Tooltip when hovering over a feature. *deprecated*, use title instead'],[-1,' * title - {String} Tooltip when hovering over a feature. Not supported by the canvas renderer.'],[-1,' * backgroundGraphic - {String} Url to a graphic to be used as the background under an externalGraphic.'],[-1,' * backgroundGraphicZIndex - {Number} The integer z-index value to use in rendering the background graphic.'],[-1,' * backgroundXOffset - {Number} The x offset (in pixels) for the background graphic.'],[-1,' * backgroundYOffset - {Number} The y offset (in pixels) for the background graphic.'],[-1,' * backgroundHeight - {Number} The height of the background graphic.  If not provided, the graphicHeight will be used.'],[-1,' * backgroundWidth - {Number} The width of the background width.  If not provided, the graphicWidth will be used.'],[-1,' * label - {String} The text for an optional label. For browsers that use the canvas renderer, this requires either'],[-1,' *     fillText or mozDrawText to be available.'],[-1,' * labelAlign - {String} Label alignment. This specifies the insertion point relative to the text. It is a string'],[-1,' *     composed of two characters. The first character is for the horizontal alignment, the second for the vertical'],[-1,' *     alignment. Valid values for horizontal alignment: \&quot;l\&quot;=left, \&quot;c\&quot;=center, \&quot;r\&quot;=right. Valid values for vertical'],[-1,' *     alignment: \&quot;t\&quot;=top, \&quot;m\&quot;=middle, \&quot;b\&quot;=bottom. Example values: \&quot;lt\&quot;, \&quot;cm\&quot;, \&quot;rb\&quot;. Default is \&quot;cm\&quot;.'],[-1,' * labelXOffset - {Number} Pixel offset along the positive x axis for displacing the label. Not supported by the canvas renderer.'],[-1,' * labelYOffset - {Number} Pixel offset along the positive y axis for displacing the label. Not supported by the canvas renderer.'],[-1,' * labelSelect - {Boolean} If set to true, labels will be selectable using SelectFeature or similar controls.'],[-1,' *     Default is false.'],[-1,' * labelOutlineColor - {String} The color of the label outline. Default is \'white\'. Only supported by the canvas &amp; SVG renderers.'],[-1,' * labelOutlineWidth - {Number} The width of the label outline. Default is 3, set to 0 or null to disable. Only supported by the canvas &amp; SVG renderers.'],[-1,' * fontColor - {String} The font color for the label, to be provided like CSS.'],[-1,' * fontOpacity - {Number} Opacity (0-1) for the label'],[-1,' * fontFamily - {String} The font family for the label, to be provided like in CSS.'],[-1,' * fontSize - {String} The font size for the label, to be provided like in CSS.'],[-1,' * fontStyle - {String} The font style for the label, to be provided like in CSS.'],[-1,' * fontWeight - {String} The font weight for the label, to be provided like in CSS.'],[-1,' * display - {String} Symbolizers will have no effect if display is set to \&quot;none\&quot;.  All other values have no effect.'],[-1,' *\/ '],[1,'OpenLayers.Feature.Vector.style = {'],[-1,'    \'default\': {'],[-1,'        fillColor: \&quot;#ee9900\&quot;,'],[-1,'        fillOpacity: 0.4, '],[-1,'        hoverFillColor: \&quot;white\&quot;,'],[-1,'        hoverFillOpacity: 0.8,'],[-1,'        strokeColor: \&quot;#ee9900\&quot;,'],[-1,'        strokeOpacity: 1,'],[-1,'        strokeWidth: 1,'],[-1,'        strokeLinecap: \&quot;round\&quot;,'],[-1,'        strokeDashstyle: \&quot;solid\&quot;,'],[-1,'        hoverStrokeColor: \&quot;red\&quot;,'],[-1,'        hoverStrokeOpacity: 1,'],[-1,'        hoverStrokeWidth: 0.2,'],[-1,'        pointRadius: 6,'],[-1,'        hoverPointRadius: 1,'],[-1,'        hoverPointUnit: \&quot;%\&quot;,'],[-1,'        pointerEvents: \&quot;visiblePainted\&quot;,'],[-1,'        cursor: \&quot;inherit\&quot;,'],[-1,'        fontColor: \&quot;#000000\&quot;,'],[-1,'        labelAlign: \&quot;cm\&quot;,'],[-1,'        labelOutlineColor: \&quot;white\&quot;,'],[-1,'        labelOutlineWidth: 3'],[-1,'    },'],[-1,'    \'select\': {'],[-1,'        fillColor: \&quot;blue\&quot;,'],[-1,'        fillOpacity: 0.4, '],[-1,'        hoverFillColor: \&quot;white\&quot;,'],[-1,'        hoverFillOpacity: 0.8,'],[-1,'        strokeColor: \&quot;blue\&quot;,'],[-1,'        strokeOpacity: 1,'],[-1,'        strokeWidth: 2,'],[-1,'        strokeLinecap: \&quot;round\&quot;,'],[-1,'        strokeDashstyle: \&quot;solid\&quot;,'],[-1,'        hoverStrokeColor: \&quot;red\&quot;,'],[-1,'        hoverStrokeOpacity: 1,'],[-1,'        hoverStrokeWidth: 0.2,'],[-1,'        pointRadius: 6,'],[-1,'        hoverPointRadius: 1,'],[-1,'        hoverPointUnit: \&quot;%\&quot;,'],[-1,'        pointerEvents: \&quot;visiblePainted\&quot;,'],[-1,'        cursor: \&quot;pointer\&quot;,'],[-1,'        fontColor: \&quot;#000000\&quot;,'],[-1,'        labelAlign: \&quot;cm\&quot;,'],[-1,'        labelOutlineColor: \&quot;white\&quot;,'],[-1,'        labelOutlineWidth: 3'],[-1,''],[-1,'    },'],[-1,'    \'temporary\': {'],[-1,'        fillColor: \&quot;#66cccc\&quot;,'],[-1,'        fillOpacity: 0.2, '],[-1,'        hoverFillColor: \&quot;white\&quot;,'],[-1,'        hoverFillOpacity: 0.8,'],[-1,'        strokeColor: \&quot;#66cccc\&quot;,'],[-1,'        strokeOpacity: 1,'],[-1,'        strokeLinecap: \&quot;round\&quot;,'],[-1,'        strokeWidth: 2,'],[-1,'        strokeDashstyle: \&quot;solid\&quot;,'],[-1,'        hoverStrokeColor: \&quot;red\&quot;,'],[-1,'        hoverStrokeOpacity: 1,'],[-1,'        hoverStrokeWidth: 0.2,'],[-1,'        pointRadius: 6,'],[-1,'        hoverPointRadius: 1,'],[-1,'        hoverPointUnit: \&quot;%\&quot;,'],[-1,'        pointerEvents: \&quot;visiblePainted\&quot;,'],[-1,'        cursor: \&quot;inherit\&quot;,'],[-1,'        fontColor: \&quot;#000000\&quot;,'],[-1,'        labelAlign: \&quot;cm\&quot;,'],[-1,'        labelOutlineColor: \&quot;white\&quot;,'],[-1,'        labelOutlineWidth: 3'],[-1,''],[-1,'    },'],[-1,'    \'delete\': {'],[-1,'        display: \&quot;none\&quot;'],[-1,'    }'],[-1,'};    '],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Geometry.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,' '],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Geometry'],[-1,' * A Geometry is a description of a geographic object.  Create an instance of'],[-1,' * this class with the &lt;OpenLayers.Geometry&gt; constructor.  This is a base class,'],[-1,' * typical geometry types are described by subclasses of this class.'],[-1,' *'],[-1,' * Note that if you use the &lt;OpenLayers.Geometry.fromWKT&gt; method, you must'],[-1,' * explicitly include the OpenLayers.Format.WKT in your build.'],[-1,' *\/'],[1,'OpenLayers.Geometry = OpenLayers.Class({'],[-1,''],[-1,'    \/**'],[-1,'     * Property: id'],[-1,'     * {String} A unique identifier for this geometry.'],[-1,'     *\/'],[-1,'    id: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: parent'],[-1,'     * {&lt;OpenLayers.Geometry&gt;}This is set when a Geometry is added as component'],[-1,'     * of another geometry'],[-1,'     *\/'],[-1,'    parent: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: bounds '],[-1,'     * {&lt;OpenLayers.Bounds&gt;} The bounds of this geometry'],[-1,'     *\/'],[-1,'    bounds: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Geometry'],[-1,'     * Creates a geometry object.  '],[-1,'     *\/'],[-1,'    initialize: function() {'],[0,'        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME+ \&quot;_\&quot;);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     * Destroy this geometry.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.id = null;'],[0,'        this.bounds = null;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Create a clone of this geometry.  Does not set any non-standard'],[-1,'     *     properties of the cloned geometry.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry&gt;} An exact clone of this geometry.'],[-1,'     *\/'],[-1,'    clone: function() {'],[0,'        return new OpenLayers.Geometry();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setBounds'],[-1,'     * Set the bounds for this Geometry.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} '],[-1,'     *\/'],[-1,'    setBounds: function(bounds) {'],[0,'        if (bounds) {'],[0,'            this.bounds = bounds.clone();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: clearBounds'],[-1,'     * Nullify this components bounds and that of its parent as well.'],[-1,'     *\/'],[-1,'    clearBounds: function() {'],[0,'        this.bounds = null;'],[0,'        if (this.parent) {'],[0,'            this.parent.clearBounds();'],[-1,'        }    '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: extendBounds'],[-1,'     * Extend the existing bounds to include the new bounds. '],[-1,'     * If geometry\'s bounds is not yet set, then set a new Bounds.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * newBounds - {&lt;OpenLayers.Bounds&gt;} '],[-1,'     *\/'],[-1,'    extendBounds: function(newBounds){'],[0,'        var bounds = this.getBounds();'],[0,'        if (!bounds) {'],[0,'            this.setBounds(newBounds);'],[-1,'        } else {'],[0,'            this.bounds.extend(newBounds);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getBounds'],[-1,'     * Get the bounds for this Geometry. If bounds is not set, it '],[-1,'     * is calculated again, this makes queries faster.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    getBounds: function() {'],[0,'        if (this.bounds == null) {'],[0,'            this.calculateBounds();'],[-1,'        }'],[0,'        return this.bounds;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: calculateBounds'],[-1,'     * Recalculate the bounds for the geometry. '],[-1,'     *\/'],[-1,'    calculateBounds: function() {'],[-1,'        \/\/'],[-1,'        \/\/ This should be overridden by subclasses.'],[-1,'        \/\/'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: distanceTo'],[-1,'     * Calculate the closest distance between two geometries (on the x-y plane).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} The target geometry.'],[-1,'     * options - {Object} Optional properties for configuring the distance'],[-1,'     *     calculation.'],[-1,'     *'],[-1,'     * Valid options depend on the specific geometry type.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Number | Object} The distance between this geometry and the target.'],[-1,'     *     If details is true, the return will be an object with distance,'],[-1,'     *     x0, y0, x1, and x2 properties.  The x0 and y0 properties represent'],[-1,'     *     the coordinates of the closest point on this geometry. The x1 and y1'],[-1,'     *     properties represent the coordinates of the closest point on the'],[-1,'     *     target geometry.'],[-1,'     *\/'],[-1,'    distanceTo: function(geometry, options) {'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getVertices'],[-1,'     * Return a list of all points in this geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * nodes - {Boolean} For lines, only return vertices that are'],[-1,'     *     endpoints.  If false, for lines, only vertices that are not'],[-1,'     *     endpoints will be returned.  If not provided, all vertices will'],[-1,'     *     be returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} A list of all vertices in the geometry.'],[-1,'     *\/'],[-1,'    getVertices: function(nodes) {'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: atPoint'],[-1,'     * Note - This is only an approximation based on the bounds of the '],[-1,'     * geometry.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;|Object} OpenLayers.LonLat or an'],[-1,'     *     object with a \'lon\' and \'lat\' properties.'],[-1,'     * toleranceLon - {float} Optional tolerance in Geometric Coords'],[-1,'     * toleranceLat - {float} Optional tolerance in Geographic Coords'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the geometry is at the specified location'],[-1,'     *\/'],[-1,'    atPoint: function(lonlat, toleranceLon, toleranceLat) {'],[0,'        var atPoint = false;'],[0,'        var bounds = this.getBounds();'],[0,'        if ((bounds != null) &amp;&amp; (lonlat != null)) {'],[-1,''],[0,'            var dX = (toleranceLon != null) ? toleranceLon : 0;'],[0,'            var dY = (toleranceLat != null) ? toleranceLat : 0;'],[-1,'    '],[0,'            var toleranceBounds = '],[-1,'                new OpenLayers.Bounds(this.bounds.left - dX,'],[-1,'                                      this.bounds.bottom - dY,'],[-1,'                                      this.bounds.right + dX,'],[-1,'                                      this.bounds.top + dY);'],[-1,''],[0,'            atPoint = toleranceBounds.containsLonLat(lonlat);'],[-1,'        }'],[0,'        return atPoint;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getLength'],[-1,'     * Calculate the length of this geometry. This method is defined in'],[-1,'     * subclasses.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The length of the collection by summing its parts'],[-1,'     *\/'],[-1,'    getLength: function() {'],[-1,'        \/\/to be overridden by geometries that actually have a length'],[-1,'        \/\/'],[0,'        return 0.0;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getArea'],[-1,'     * Calculate the area of this geometry. This method is defined in subclasses.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The area of the collection by summing its parts'],[-1,'     *\/'],[-1,'    getArea: function() {'],[-1,'        \/\/to be overridden by geometries that actually have an area'],[-1,'        \/\/'],[0,'        return 0.0;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getCentroid'],[-1,'     * Calculate the centroid of this geometry. This method is defined in subclasses.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry.Point&gt;} The centroid of the collection'],[-1,'     *\/'],[-1,'    getCentroid: function() {'],[0,'        return null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: toString'],[-1,'     * Returns a text representation of the geometry.  If the WKT format is'],[-1,'     *     included in a build, this will be the Well-Known Text '],[-1,'     *     representation.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} String representation of this geometry.'],[-1,'     *\/'],[-1,'    toString: function() {'],[0,'        var string;'],[0,'        if (OpenLayers.Format &amp;&amp; OpenLayers.Format.WKT) {'],[0,'            string = OpenLayers.Format.WKT.prototype.write('],[-1,'                new OpenLayers.Feature.Vector(this)'],[-1,'            );'],[-1,'        } else {'],[0,'            string = Object.prototype.toString.call(this);'],[-1,'        }'],[0,'        return string;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Geometry\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Function: OpenLayers.Geometry.fromWKT'],[-1,' * Generate a geometry given a Well-Known Text string.  For this method to'],[-1,' *     work, you must include the OpenLayers.Format.WKT in your build '],[-1,' *     explicitly.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * wkt - {String} A string representing the geometry in Well-Known Text.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.Geometry&gt;} A geometry of the appropriate class.'],[-1,' *\/'],[1,'OpenLayers.Geometry.fromWKT = function(wkt) {'],[0,'    var geom;'],[0,'    if (OpenLayers.Format &amp;&amp; OpenLayers.Format.WKT) {'],[0,'        var format = OpenLayers.Geometry.fromWKT.format;'],[0,'        if (!format) {'],[0,'            format = new OpenLayers.Format.WKT();'],[0,'            OpenLayers.Geometry.fromWKT.format = format;'],[-1,'        }'],[0,'        var result = format.read(wkt);'],[0,'        if (result instanceof OpenLayers.Feature.Vector) {'],[0,'            geom = result.geometry;'],[0,'        } else if (OpenLayers.Util.isArray(result)) {'],[0,'            var len = result.length;'],[0,'            var components = new Array(len);'],[0,'            for (var i=0; i&lt;len; ++i) {'],[0,'                components[i] = result[i].geometry;'],[-1,'            }'],[0,'            geom = new OpenLayers.Geometry.Collection(components);'],[-1,'        }'],[-1,'    }'],[0,'    return geom;'],[-1,'};'],[-1,'    '],[-1,'\/**'],[-1,' * Method: OpenLayers.Geometry.segmentsIntersect'],[-1,' * Determine whether two line segments intersect.  Optionally calculates'],[-1,' *     and returns the intersection point.  This function is optimized for'],[-1,' *     cases where seg1.x2 &gt;= seg2.x1 || seg2.x2 &gt;= seg1.x1.  In those'],[-1,' *     obvious cases where there is no intersection, the function should'],[-1,' *     not be called.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * seg1 - {Object} Object representing a segment with properties x1, y1, x2,'],[-1,' *     and y2.  The start point is represented by x1 and y1.  The end point'],[-1,' *     is represented by x2 and y2.  Start and end are ordered so that x1 &lt; x2.'],[-1,' * seg2 - {Object} Object representing a segment with properties x1, y1, x2,'],[-1,' *     and y2.  The start point is represented by x1 and y1.  The end point'],[-1,' *     is represented by x2 and y2.  Start and end are ordered so that x1 &lt; x2.'],[-1,' * options - {Object} Optional properties for calculating the intersection.'],[-1,' *'],[-1,' * Valid options:'],[-1,' * point - {Boolean} Return the intersection point.  If false, the actual'],[-1,' *     intersection point will not be calculated.  If true and the segments'],[-1,' *     intersect, the intersection point will be returned.  If true and'],[-1,' *     the segments do not intersect, false will be returned.  If true and'],[-1,' *     the segments are coincident, true will be returned.'],[-1,' * tolerance - {Number} If a non-null value is provided, if the segments are'],[-1,' *     within the tolerance distance, this will be considered an intersection.'],[-1,' *     In addition, if the point option is true and the calculated intersection'],[-1,' *     is within the tolerance distance of an end point, the endpoint will be'],[-1,' *     returned instead of the calculated intersection.  Further, if the'],[-1,' *     intersection is within the tolerance of endpoints on both segments, or'],[-1,' *     if two segment endpoints are within the tolerance distance of eachother'],[-1,' *     (but no intersection is otherwise calculated), an endpoint on the'],[-1,' *     first segment provided will be returned.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Boolean | &lt;OpenLayers.Geometry.Point&gt;}  The two segments intersect.'],[-1,' *     If the point argument is true, the return will be the intersection'],[-1,' *     point or false if none exists.  If point is true and the segments'],[-1,' *     are coincident, return will be true (and the instersection is equal'],[-1,' *     to the shorter segment).'],[-1,' *\/'],[1,'OpenLayers.Geometry.segmentsIntersect = function(seg1, seg2, options) {'],[0,'    var point = options &amp;&amp; options.point;'],[0,'    var tolerance = options &amp;&amp; options.tolerance;'],[0,'    var intersection = false;'],[0,'    var x11_21 = seg1.x1 - seg2.x1;'],[0,'    var y11_21 = seg1.y1 - seg2.y1;'],[0,'    var x12_11 = seg1.x2 - seg1.x1;'],[0,'    var y12_11 = seg1.y2 - seg1.y1;'],[0,'    var y22_21 = seg2.y2 - seg2.y1;'],[0,'    var x22_21 = seg2.x2 - seg2.x1;'],[0,'    var d = (y22_21 * x12_11) - (x22_21 * y12_11);'],[0,'    var n1 = (x22_21 * y11_21) - (y22_21 * x11_21);'],[0,'    var n2 = (x12_11 * y11_21) - (y12_11 * x11_21);'],[0,'    if(d == 0) {'],[-1,'        \/\/ parallel'],[0,'        if(n1 == 0 &amp;&amp; n2 == 0) {'],[-1,'            \/\/ coincident'],[0,'            intersection = true;'],[-1,'        }'],[-1,'    } else {'],[0,'        var along1 = n1 \/ d;'],[0,'        var along2 = n2 \/ d;'],[0,'        if(along1 &gt;= 0 &amp;&amp; along1 &lt;= 1 &amp;&amp; along2 &gt;=0 &amp;&amp; along2 &lt;= 1) {'],[-1,'            \/\/ intersect'],[0,'            if(!point) {'],[0,'                intersection = true;'],[-1,'            } else {'],[-1,'                \/\/ calculate the intersection point'],[0,'                var x = seg1.x1 + (along1 * x12_11);'],[0,'                var y = seg1.y1 + (along1 * y12_11);'],[0,'                intersection = new OpenLayers.Geometry.Point(x, y);'],[-1,'            }'],[-1,'        }'],[-1,'    }'],[0,'    if(tolerance) {'],[0,'        var dist;'],[0,'        if(intersection) {'],[0,'            if(point) {'],[0,'                var segs = [seg1, seg2];'],[0,'                var seg, x, y;'],[-1,'                \/\/ check segment endpoints for proximity to intersection'],[-1,'                \/\/ set intersection to first endpoint within the tolerance'],[0,'                outer: for(var i=0; i&lt;2; ++i) {'],[0,'                    seg = segs[i];'],[0,'                    for(var j=1; j&lt;3; ++j) {'],[0,'                        x = seg[\&quot;x\&quot; + j];'],[0,'                        y = seg[\&quot;y\&quot; + j];'],[0,'                        dist = Math.sqrt('],[-1,'                            Math.pow(x - intersection.x, 2) +'],[-1,'                            Math.pow(y - intersection.y, 2)'],[-1,'                        );'],[0,'                        if(dist &lt; tolerance) {'],[0,'                            intersection.x = x;'],[0,'                            intersection.y = y;'],[0,'                            break outer;'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'                '],[-1,'            }'],[-1,'        } else {'],[-1,'            \/\/ no calculated intersection, but segments could be within'],[-1,'            \/\/ the tolerance of one another'],[0,'            var segs = [seg1, seg2];'],[0,'            var source, target, x, y, p, result;'],[-1,'            \/\/ check segment endpoints for proximity to intersection'],[-1,'            \/\/ set intersection to first endpoint within the tolerance'],[0,'            outer: for(var i=0; i&lt;2; ++i) {'],[0,'                source = segs[i];'],[0,'                target = segs[(i+1)%2];'],[0,'                for(var j=1; j&lt;3; ++j) {'],[0,'                    p = {x: source[\&quot;x\&quot;+j], y: source[\&quot;y\&quot;+j]};'],[0,'                    result = OpenLayers.Geometry.distanceToSegment(p, target);'],[0,'                    if(result.distance &lt; tolerance) {'],[0,'                        if(point) {'],[0,'                            intersection = new OpenLayers.Geometry.Point(p.x, p.y);'],[-1,'                        } else {'],[0,'                            intersection = true;'],[-1,'                        }'],[0,'                        break outer;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    }'],[0,'    return intersection;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: OpenLayers.Geometry.distanceToSegment'],[-1,' *'],[-1,' * Parameters:'],[-1,' * point - {Object} An object with x and y properties representing the'],[-1,' *     point coordinates.'],[-1,' * segment - {Object} An object with x1, y1, x2, and y2 properties'],[-1,' *     representing endpoint coordinates.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Object} An object with distance, along, x, and y properties.  The distance'],[-1,' *     will be the shortest distance between the input point and segment.'],[-1,' *     The x and y properties represent the coordinates along the segment'],[-1,' *     where the shortest distance meets the segment. The along attribute'],[-1,' *     describes how far between the two segment points the given point is.'],[-1,' *\/'],[1,'OpenLayers.Geometry.distanceToSegment = function(point, segment) {'],[0,'    var result = OpenLayers.Geometry.distanceSquaredToSegment(point, segment);'],[0,'    result.distance = Math.sqrt(result.distance);'],[0,'    return result;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: OpenLayers.Geometry.distanceSquaredToSegment'],[-1,' *'],[-1,' * Usually the distanceToSegment function should be used. This variant however'],[-1,' * can be used for comparisons where the exact distance is not important.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * point - {Object} An object with x and y properties representing the'],[-1,' *     point coordinates.'],[-1,' * segment - {Object} An object with x1, y1, x2, and y2 properties'],[-1,' *     representing endpoint coordinates.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Object} An object with squared distance, along, x, and y properties.'],[-1,' *     The distance will be the shortest distance between the input point and'],[-1,' *     segment. The x and y properties represent the coordinates along the'],[-1,' *     segment where the shortest distance meets the segment. The along'],[-1,' *     attribute describes how far between the two segment points the given'],[-1,' *     point is.'],[-1,' *\/'],[1,'OpenLayers.Geometry.distanceSquaredToSegment = function(point, segment) {'],[0,'    var x0 = point.x;'],[0,'    var y0 = point.y;'],[0,'    var x1 = segment.x1;'],[0,'    var y1 = segment.y1;'],[0,'    var x2 = segment.x2;'],[0,'    var y2 = segment.y2;'],[0,'    var dx = x2 - x1;'],[0,'    var dy = y2 - y1;'],[0,'    var along = ((dx * (x0 - x1)) + (dy * (y0 - y1))) \/'],[-1,'                (Math.pow(dx, 2) + Math.pow(dy, 2));'],[0,'    var x, y;'],[0,'    if(along &lt;= 0.0) {'],[0,'        x = x1;'],[0,'        y = y1;'],[0,'    } else if(along &gt;= 1.0) {'],[0,'        x = x2;'],[0,'        y = y2;'],[-1,'    } else {'],[0,'        x = x1 + along * dx;'],[0,'        y = y1 + along * dy;'],[-1,'    }'],[0,'    return {'],[-1,'        distance: Math.pow(x - x0, 2) + Math.pow(y - y0, 2),'],[-1,'        x: x, y: y,'],[-1,'        along: along'],[-1,'    };'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Geometry\/Point.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Geometry.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Geometry.Point'],[-1,' * Point geometry class. '],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Geometry&gt; '],[-1,' *\/'],[1,'OpenLayers.Geometry.Point = OpenLayers.Class(OpenLayers.Geometry, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: x '],[-1,'     * {float} '],[-1,'     *\/'],[-1,'    x: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: y '],[-1,'     * {float} '],[-1,'     *\/'],[-1,'    y: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Geometry.Point'],[-1,'     * Construct a point geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x - {float} '],[-1,'     * y - {float}'],[-1,'     * '],[-1,'     *\/'],[-1,'    initialize: function(x, y) {'],[0,'        OpenLayers.Geometry.prototype.initialize.apply(this, arguments);'],[-1,'        '],[0,'        this.x = parseFloat(x);'],[0,'        this.y = parseFloat(y);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry.Point&gt;} An exact clone of this OpenLayers.Geometry.Point'],[-1,'     *\/'],[-1,'    clone: function(obj) {'],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Geometry.Point(this.x, this.y);'],[-1,'        }'],[-1,''],[-1,'        \/\/ catch any randomly tagged-on properties'],[0,'        OpenLayers.Util.applyDefaults(obj, this);'],[-1,''],[0,'        return obj;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: calculateBounds'],[-1,'     * Create a new Bounds based on the lon\/lat'],[-1,'     *\/'],[-1,'    calculateBounds: function () {'],[0,'        this.bounds = new OpenLayers.Bounds(this.x, this.y,'],[-1,'                                            this.x, this.y);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: distanceTo'],[-1,'     * Calculate the closest distance between two geometries (on the x-y plane).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} The target geometry.'],[-1,'     * options - {Object} Optional properties for configuring the distance'],[-1,'     *     calculation.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * details - {Boolean} Return details from the distance calculation.'],[-1,'     *     Default is false.'],[-1,'     * edge - {Boolean} Calculate the distance from this geometry to the'],[-1,'     *     nearest edge of the target geometry.  Default is true.  If true,'],[-1,'     *     calling distanceTo from a geometry that is wholly contained within'],[-1,'     *     the target will result in a non-zero distance.  If false, whenever'],[-1,'     *     geometries intersect, calling distanceTo will return 0.  If false,'],[-1,'     *     details cannot be returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number | Object} The distance between this geometry and the target.'],[-1,'     *     If details is true, the return will be an object with distance,'],[-1,'     *     x0, y0, x1, and x2 properties.  The x0 and y0 properties represent'],[-1,'     *     the coordinates of the closest point on this geometry. The x1 and y1'],[-1,'     *     properties represent the coordinates of the closest point on the'],[-1,'     *     target geometry.'],[-1,'     *\/'],[-1,'    distanceTo: function(geometry, options) {'],[0,'        var edge = !(options &amp;&amp; options.edge === false);'],[0,'        var details = edge &amp;&amp; options &amp;&amp; options.details;'],[0,'        var distance, x0, y0, x1, y1, result;'],[0,'        if(geometry instanceof OpenLayers.Geometry.Point) {'],[0,'            x0 = this.x;'],[0,'            y0 = this.y;'],[0,'            x1 = geometry.x;'],[0,'            y1 = geometry.y;'],[0,'            distance = Math.sqrt(Math.pow(x0 - x1, 2) + Math.pow(y0 - y1, 2));'],[0,'            result = !details ?'],[-1,'                distance : {x0: x0, y0: y0, x1: x1, y1: y1, distance: distance};'],[-1,'        } else {'],[0,'            result = geometry.distanceTo(this, options);'],[0,'            if(details) {'],[-1,'                \/\/ switch coord order since this geom is target'],[0,'                result = {'],[-1,'                    x0: result.x1, y0: result.y1,'],[-1,'                    x1: result.x0, y1: result.y0,'],[-1,'                    distance: result.distance'],[-1,'                };'],[-1,'            }'],[-1,'        }'],[0,'        return result;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: equals'],[-1,'     * Determine whether another geometry is equivalent to this one.  Geometries'],[-1,'     *     are considered equivalent if all components have the same coordinates.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geom - {&lt;OpenLayers.Geometry.Point&gt;} The geometry to test. '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The supplied geometry is equivalent to this geometry.'],[-1,'     *\/'],[-1,'    equals: function(geom) {'],[0,'        var equals = false;'],[0,'        if (geom != null) {'],[0,'            equals = ((this.x == geom.x &amp;&amp; this.y == geom.y) ||'],[-1,'                      (isNaN(this.x) &amp;&amp; isNaN(this.y) &amp;&amp; isNaN(geom.x) &amp;&amp; isNaN(geom.y)));'],[-1,'        }'],[0,'        return equals;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: toShortString'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} Shortened String representation of Point object. '],[-1,'     *         (ex. &lt;i&gt;\&quot;5, 42\&quot;&lt;\/i&gt;)'],[-1,'     *\/'],[-1,'    toShortString: function() {'],[0,'        return (this.x + \&quot;, \&quot; + this.y);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: move'],[-1,'     * Moves a geometry by the given displacement along positive x and y axes.'],[-1,'     *     This modifies the position of the geometry and clears the cached'],[-1,'     *     bounds.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x - {Float} Distance to move geometry in positive x direction. '],[-1,'     * y - {Float} Distance to move geometry in positive y direction.'],[-1,'     *\/'],[-1,'    move: function(x, y) {'],[0,'        this.x = this.x + x;'],[0,'        this.y = this.y + y;'],[0,'        this.clearBounds();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: rotate'],[-1,'     * Rotate a point around another.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * angle - {Float} Rotation angle in degrees (measured counterclockwise'],[-1,'     *                 from the positive x-axis)'],[-1,'     * origin - {&lt;OpenLayers.Geometry.Point&gt;} Center point for the rotation'],[-1,'     *\/'],[-1,'    rotate: function(angle, origin) {'],[0,'        angle *= Math.PI \/ 180;'],[0,'        var radius = this.distanceTo(origin);'],[0,'        var theta = angle + Math.atan2(this.y - origin.y, this.x - origin.x);'],[0,'        this.x = origin.x + (radius * Math.cos(theta));'],[0,'        this.y = origin.y + (radius * Math.sin(theta));'],[0,'        this.clearBounds();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getCentroid'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry.Point&gt;} The centroid of the collection'],[-1,'     *\/'],[-1,'    getCentroid: function() {'],[0,'        return new OpenLayers.Geometry.Point(this.x, this.y);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: resize'],[-1,'     * Resize a point relative to some origin.  For points, this has the effect'],[-1,'     *     of scaling a vector (from the origin to the point).  This method is'],[-1,'     *     more useful on geometry collection subclasses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * scale - {Float} Ratio of the new distance from the origin to the old'],[-1,'     *                 distance from the origin.  A scale of 2 doubles the'],[-1,'     *                 distance between the point and origin.'],[-1,'     * origin - {&lt;OpenLayers.Geometry.Point&gt;} Point of origin for resizing'],[-1,'     * ratio - {Float} Optional x:y ratio for resizing.  Default ratio is 1.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry&gt;} - The current geometry. '],[-1,'     *\/'],[-1,'    resize: function(scale, origin, ratio) {'],[0,'        ratio = (ratio == undefined) ? 1 : ratio;'],[0,'        this.x = origin.x + (scale * ratio * (this.x - origin.x));'],[0,'        this.y = origin.y + (scale * (this.y - origin.y));'],[0,'        this.clearBounds();'],[0,'        return this;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: intersects'],[-1,'     * Determine if the input geometry intersects this one.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} Any type of geometry.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The input geometry intersects this one.'],[-1,'     *\/'],[-1,'    intersects: function(geometry) {'],[0,'        var intersect = false;'],[0,'        if(geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'            intersect = this.equals(geometry);'],[-1,'        } else {'],[0,'            intersect = geometry.intersects(this);'],[-1,'        }'],[0,'        return intersect;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: transform'],[-1,'     * Translate the x,y properties of the point from source to dest.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * source - {&lt;OpenLayers.Projection&gt;} '],[-1,'     * dest - {&lt;OpenLayers.Projection&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry&gt;} '],[-1,'     *\/'],[-1,'    transform: function(source, dest) {'],[0,'        if ((source &amp;&amp; dest)) {'],[0,'            OpenLayers.Projection.transform('],[-1,'                this, source, dest); '],[0,'            this.bounds = null;'],[-1,'        }       '],[0,'        return this;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getVertices'],[-1,'     * Return a list of all points in this geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * nodes - {Boolean} For lines, only return vertices that are'],[-1,'     *     endpoints.  If false, for lines, only vertices that are not'],[-1,'     *     endpoints will be returned.  If not provided, all vertices will'],[-1,'     *     be returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} A list of all vertices in the geometry.'],[-1,'     *\/'],[-1,'    getVertices: function(nodes) {'],[0,'        return [this];'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Geometry.Point\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Geometry\/Collection.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Geometry.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Geometry.Collection'],[-1,' * A Collection is exactly what it sounds like: A collection of different '],[-1,' * Geometries. These are stored in the local parameter &lt;components&gt; (which'],[-1,' * can be passed as a parameter to the constructor). '],[-1,' * '],[-1,' * As new geometries are added to the collection, they are NOT cloned. '],[-1,' * When removing geometries, they need to be specified by reference (ie you '],[-1,' * have to pass in the *exact* geometry to be removed).'],[-1,' * '],[-1,' * The &lt;getArea&gt; and &lt;getLength&gt; functions here merely iterate through'],[-1,' * the components, summing their respective areas and lengths.'],[-1,' *'],[-1,' * Create a new instance with the &lt;OpenLayers.Geometry.Collection&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Geometry&gt; '],[-1,' *\/'],[1,'OpenLayers.Geometry.Collection = OpenLayers.Class(OpenLayers.Geometry, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: components'],[-1,'     * {Array(&lt;OpenLayers.Geometry&gt;)} The component parts of this geometry'],[-1,'     *\/'],[-1,'    components: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: componentTypes'],[-1,'     * {Array(String)} An array of class names representing the types of'],[-1,'     * components that the collection can include.  A null value means the'],[-1,'     * component types are not restricted.'],[-1,'     *\/'],[-1,'    componentTypes: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Geometry.Collection'],[-1,'     * Creates a Geometry Collection -- a list of geoms.'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * components - {Array(&lt;OpenLayers.Geometry&gt;)} Optional array of geometries'],[-1,'     *'],[-1,'     *\/'],[-1,'    initialize: function (components) {'],[0,'        OpenLayers.Geometry.prototype.initialize.apply(this, arguments);'],[0,'        this.components = [];'],[0,'        if (components != null) {'],[0,'            this.addComponents(components);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Destroy this geometry.'],[-1,'     *\/'],[-1,'    destroy: function () {'],[0,'        this.components.length = 0;'],[0,'        this.components = null;'],[0,'        OpenLayers.Geometry.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Clone this geometry.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry.Collection&gt;} An exact clone of this collection'],[-1,'     *\/'],[-1,'    clone: function() {'],[0,'        var geometry = eval(\&quot;new \&quot; + this.CLASS_NAME + \&quot;()\&quot;);'],[0,'        for(var i=0, len=this.components.length; i&lt;len; i++) {'],[0,'            geometry.addComponent(this.components[i].clone());'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ catch any randomly tagged-on properties'],[0,'        OpenLayers.Util.applyDefaults(geometry, this);'],[-1,'        '],[0,'        return geometry;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getComponentsString'],[-1,'     * Get a string representing the components for this collection'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} A string representation of the components of this geometry'],[-1,'     *\/'],[-1,'    getComponentsString: function(){'],[0,'        var strings = [];'],[0,'        for(var i=0, len=this.components.length; i&lt;len; i++) {'],[0,'            strings.push(this.components[i].toShortString()); '],[-1,'        }'],[0,'        return strings.join(\&quot;,\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: calculateBounds'],[-1,'     * Recalculate the bounds by iterating through the components and '],[-1,'     * calling calling extendBounds() on each item.'],[-1,'     *\/'],[-1,'    calculateBounds: function() {'],[0,'        this.bounds = null;'],[0,'        var bounds = new OpenLayers.Bounds();'],[0,'        var components = this.components;'],[0,'        if (components) {'],[0,'            for (var i=0, len=components.length; i&lt;len; i++) {'],[0,'                bounds.extend(components[i].getBounds());'],[-1,'            }'],[-1,'        }'],[-1,'        \/\/ to preserve old behavior, we only set bounds if non-null'],[-1,'        \/\/ in the future, we could add bounds.isEmpty()'],[0,'        if (bounds.left != null &amp;&amp; bounds.bottom != null &amp;&amp; '],[-1,'            bounds.right != null &amp;&amp; bounds.top != null) {'],[0,'            this.setBounds(bounds);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: addComponents'],[-1,'     * Add components to this geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * components - {Array(&lt;OpenLayers.Geometry&gt;)} An array of geometries to add'],[-1,'     *\/'],[-1,'    addComponents: function(components){'],[0,'        if(!(OpenLayers.Util.isArray(components))) {'],[0,'            components = [components];'],[-1,'        }'],[0,'        for(var i=0, len=components.length; i&lt;len; i++) {'],[0,'            this.addComponent(components[i]);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: addComponent'],[-1,'     * Add a new component (geometry) to the collection.  If this.componentTypes'],[-1,'     * is set, then the component class name must be in the componentTypes array.'],[-1,'     *'],[-1,'     * The bounds cache is reset.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * component - {&lt;OpenLayers.Geometry&gt;} A geometry to add'],[-1,'     * index - {int} Optional index into the array to insert the component'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The component geometry was successfully added'],[-1,'     *\/    '],[-1,'    addComponent: function(component, index) {'],[0,'        var added = false;'],[0,'        if(component) {'],[0,'            if(this.componentTypes == null ||'],[-1,'               (OpenLayers.Util.indexOf(this.componentTypes,'],[-1,'                                        component.CLASS_NAME) &gt; -1)) {'],[-1,''],[0,'                if(index != null &amp;&amp; (index &lt; this.components.length)) {'],[0,'                    var components1 = this.components.slice(0, index);'],[0,'                    var components2 = this.components.slice(index, '],[-1,'                                                           this.components.length);'],[0,'                    components1.push(component);'],[0,'                    this.components = components1.concat(components2);'],[-1,'                } else {'],[0,'                    this.components.push(component);'],[-1,'                }'],[0,'                component.parent = this;'],[0,'                this.clearBounds();'],[0,'                added = true;'],[-1,'            }'],[-1,'        }'],[0,'        return added;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: removeComponents'],[-1,'     * Remove components from this geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * components - {Array(&lt;OpenLayers.Geometry&gt;)} The components to be removed'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} A component was removed.'],[-1,'     *\/'],[-1,'    removeComponents: function(components) {'],[0,'        var removed = false;'],[-1,''],[0,'        if(!(OpenLayers.Util.isArray(components))) {'],[0,'            components = [components];'],[-1,'        }'],[0,'        for(var i=components.length-1; i&gt;=0; --i) {'],[0,'            removed = this.removeComponent(components[i]) || removed;'],[-1,'        }'],[0,'        return removed;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: removeComponent'],[-1,'     * Remove a component from this geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * component - {&lt;OpenLayers.Geometry&gt;} '],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} The component was removed.'],[-1,'     *\/'],[-1,'    removeComponent: function(component) {'],[-1,'        '],[0,'        OpenLayers.Util.removeItem(this.components, component);'],[-1,'        '],[-1,'        \/\/ clearBounds() so that it gets recalculated on the next call'],[-1,'        \/\/ to this.getBounds();'],[0,'        this.clearBounds();'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getLength'],[-1,'     * Calculate the length of this geometry'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float} The length of the geometry'],[-1,'     *\/'],[-1,'    getLength: function() {'],[0,'        var length = 0.0;'],[0,'        for (var i=0, len=this.components.length; i&lt;len; i++) {'],[0,'            length += this.components[i].getLength();'],[-1,'        }'],[0,'        return length;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getArea'],[-1,'     * Calculate the area of this geometry. Note how this function is overridden'],[-1,'     * in &lt;OpenLayers.Geometry.Polygon&gt;.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float} The area of the collection by summing its parts'],[-1,'     *\/'],[-1,'    getArea: function() {'],[0,'        var area = 0.0;'],[0,'        for (var i=0, len=this.components.length; i&lt;len; i++) {'],[0,'            area += this.components[i].getArea();'],[-1,'        }'],[0,'        return area;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: getGeodesicArea'],[-1,'     * Calculate the approximate area of the polygon were it projected onto'],[-1,'     *     the earth.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * projection - {&lt;OpenLayers.Projection&gt;} The spatial reference system'],[-1,'     *     for the geometry coordinates.  If not provided, Geographic\/WGS84 is'],[-1,'     *     assumed.'],[-1,'     * '],[-1,'     * Reference:'],[-1,'     * Robert. G. Chamberlain and William H. Duquette, \&quot;Some Algorithms for'],[-1,'     *     Polygons on a Sphere\&quot;, JPL Publication 07-03, Jet Propulsion'],[-1,'     *     Laboratory, Pasadena, CA, June 2007 http:\/\/trs-new.jpl.nasa.gov\/dspace\/handle\/2014\/40409'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {float} The approximate geodesic area of the geometry in square meters.'],[-1,'     *\/'],[-1,'    getGeodesicArea: function(projection) {'],[0,'        var area = 0.0;'],[0,'        for(var i=0, len=this.components.length; i&lt;len; i++) {'],[0,'            area += this.components[i].getGeodesicArea(projection);'],[-1,'        }'],[0,'        return area;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getCentroid'],[-1,'     *'],[-1,'     * Compute the centroid for this geometry collection.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * weighted - {Boolean} Perform the getCentroid computation recursively,'],[-1,'     * returning an area weighted average of all geometries in this collection.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry.Point&gt;} The centroid of the collection'],[-1,'     *\/'],[-1,'    getCentroid: function(weighted) {'],[0,'        if (!weighted) {'],[0,'            return this.components.length &amp;&amp; this.components[0].getCentroid();'],[-1,'        }'],[0,'        var len = this.components.length;'],[0,'        if (!len) {'],[0,'            return false;'],[-1,'        }'],[-1,'        '],[0,'        var areas = [];'],[0,'        var centroids = [];'],[0,'        var areaSum = 0;'],[0,'        var minArea = Number.MAX_VALUE;'],[0,'        var component;'],[0,'        for (var i=0; i&lt;len; ++i) {'],[0,'            component = this.components[i];'],[0,'            var area = component.getArea();'],[0,'            var centroid = component.getCentroid(true);'],[0,'            if (isNaN(area) || isNaN(centroid.x) || isNaN(centroid.y)) {'],[0,'                continue;'],[-1,'            }'],[0,'            areas.push(area);'],[0,'            areaSum += area;'],[0,'            minArea = (area &lt; minArea &amp;&amp; area &gt; 0) ? area : minArea;'],[0,'            centroids.push(centroid);'],[-1,'        }'],[0,'        len = areas.length;'],[0,'        if (areaSum === 0) {'],[-1,'            \/\/ all the components in this collection have 0 area'],[-1,'            \/\/ probably a collection of points -- weight all the points the same'],[0,'            for (var i=0; i&lt;len; ++i) {'],[0,'                areas[i] = 1;'],[-1,'            }'],[0,'            areaSum = areas.length;'],[-1,'        } else {'],[-1,'            \/\/ normalize all the areas where the smallest area will get'],[-1,'            \/\/ a value of 1'],[0,'            for (var i=0; i&lt;len; ++i) {'],[0,'                areas[i] \/= minArea;'],[-1,'            }'],[0,'            areaSum \/= minArea;'],[-1,'        }'],[-1,'        '],[0,'        var xSum = 0, ySum = 0, centroid, area;'],[0,'        for (var i=0; i&lt;len; ++i) {'],[0,'            centroid = centroids[i];'],[0,'            area = areas[i];'],[0,'            xSum += centroid.x * area;'],[0,'            ySum += centroid.y * area;'],[-1,'        }'],[-1,'        '],[0,'        return new OpenLayers.Geometry.Point(xSum\/areaSum, ySum\/areaSum);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getGeodesicLength'],[-1,'     * Calculate the approximate length of the geometry were it projected onto'],[-1,'     *     the earth.'],[-1,'     *'],[-1,'     * projection - {&lt;OpenLayers.Projection&gt;} The spatial reference system'],[-1,'     *     for the geometry coordinates.  If not provided, Geographic\/WGS84 is'],[-1,'     *     assumed.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The appoximate geodesic length of the geometry in meters.'],[-1,'     *\/'],[-1,'    getGeodesicLength: function(projection) {'],[0,'        var length = 0.0;'],[0,'        for(var i=0, len=this.components.length; i&lt;len; i++) {'],[0,'            length += this.components[i].getGeodesicLength(projection);'],[-1,'        }'],[0,'        return length;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: move'],[-1,'     * Moves a geometry by the given displacement along positive x and y axes.'],[-1,'     *     This modifies the position of the geometry and clears the cached'],[-1,'     *     bounds.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x - {Float} Distance to move geometry in positive x direction. '],[-1,'     * y - {Float} Distance to move geometry in positive y direction.'],[-1,'     *\/'],[-1,'    move: function(x, y) {'],[0,'        for(var i=0, len=this.components.length; i&lt;len; i++) {'],[0,'            this.components[i].move(x, y);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: rotate'],[-1,'     * Rotate a geometry around some origin'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * angle - {Float} Rotation angle in degrees (measured counterclockwise'],[-1,'     *                 from the positive x-axis)'],[-1,'     * origin - {&lt;OpenLayers.Geometry.Point&gt;} Center point for the rotation'],[-1,'     *\/'],[-1,'    rotate: function(angle, origin) {'],[0,'        for(var i=0, len=this.components.length; i&lt;len; ++i) {'],[0,'            this.components[i].rotate(angle, origin);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: resize'],[-1,'     * Resize a geometry relative to some origin.  Use this method to apply'],[-1,'     *     a uniform scaling to a geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * scale - {Float} Factor by which to scale the geometry.  A scale of 2'],[-1,'     *                 doubles the size of the geometry in each dimension'],[-1,'     *                 (lines, for example, will be twice as long, and polygons'],[-1,'     *                 will have four times the area).'],[-1,'     * origin - {&lt;OpenLayers.Geometry.Point&gt;} Point of origin for resizing'],[-1,'     * ratio - {Float} Optional x:y ratio for resizing.  Default ratio is 1.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry&gt;} - The current geometry. '],[-1,'     *\/'],[-1,'    resize: function(scale, origin, ratio) {'],[0,'        for(var i=0; i&lt;this.components.length; ++i) {'],[0,'            this.components[i].resize(scale, origin, ratio);'],[-1,'        }'],[0,'        return this;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: distanceTo'],[-1,'     * Calculate the closest distance between two geometries (on the x-y plane).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} The target geometry.'],[-1,'     * options - {Object} Optional properties for configuring the distance'],[-1,'     *     calculation.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * details - {Boolean} Return details from the distance calculation.'],[-1,'     *     Default is false.'],[-1,'     * edge - {Boolean} Calculate the distance from this geometry to the'],[-1,'     *     nearest edge of the target geometry.  Default is true.  If true,'],[-1,'     *     calling distanceTo from a geometry that is wholly contained within'],[-1,'     *     the target will result in a non-zero distance.  If false, whenever'],[-1,'     *     geometries intersect, calling distanceTo will return 0.  If false,'],[-1,'     *     details cannot be returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number | Object} The distance between this geometry and the target.'],[-1,'     *     If details is true, the return will be an object with distance,'],[-1,'     *     x0, y0, x1, and y1 properties.  The x0 and y0 properties represent'],[-1,'     *     the coordinates of the closest point on this geometry. The x1 and y1'],[-1,'     *     properties represent the coordinates of the closest point on the'],[-1,'     *     target geometry.'],[-1,'     *\/'],[-1,'    distanceTo: function(geometry, options) {'],[0,'        var edge = !(options &amp;&amp; options.edge === false);'],[0,'        var details = edge &amp;&amp; options &amp;&amp; options.details;'],[0,'        var result, best, distance;'],[0,'        var min = Number.POSITIVE_INFINITY;'],[0,'        for(var i=0, len=this.components.length; i&lt;len; ++i) {'],[0,'            result = this.components[i].distanceTo(geometry, options);'],[0,'            distance = details ? result.distance : result;'],[0,'            if(distance &lt; min) {'],[0,'                min = distance;'],[0,'                best = result;'],[0,'                if(min == 0) {'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return best;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: equals'],[-1,'     * Determine whether another geometry is equivalent to this one.  Geometries'],[-1,'     *     are considered equivalent if all components have the same coordinates.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} The geometry to test. '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The supplied geometry is equivalent to this geometry.'],[-1,'     *\/'],[-1,'    equals: function(geometry) {'],[0,'        var equivalent = true;'],[0,'        if(!geometry || !geometry.CLASS_NAME ||'],[-1,'           (this.CLASS_NAME != geometry.CLASS_NAME)) {'],[0,'            equivalent = false;'],[0,'        } else if(!(OpenLayers.Util.isArray(geometry.components)) ||'],[-1,'                  (geometry.components.length != this.components.length)) {'],[0,'            equivalent = false;'],[-1,'        } else {'],[0,'            for(var i=0, len=this.components.length; i&lt;len; ++i) {'],[0,'                if(!this.components[i].equals(geometry.components[i])) {'],[0,'                    equivalent = false;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return equivalent;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: transform'],[-1,'     * Reproject the components geometry from source to dest.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * source - {&lt;OpenLayers.Projection&gt;} '],[-1,'     * dest - {&lt;OpenLayers.Projection&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry&gt;} '],[-1,'     *\/'],[-1,'    transform: function(source, dest) {'],[0,'        if (source &amp;&amp; dest) {'],[0,'            for (var i=0, len=this.components.length; i&lt;len; i++) {  '],[0,'                var component = this.components[i];'],[0,'                component.transform(source, dest);'],[-1,'            }'],[0,'            this.bounds = null;'],[-1,'        }'],[0,'        return this;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: intersects'],[-1,'     * Determine if the input geometry intersects this one.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} Any type of geometry.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The input geometry intersects this one.'],[-1,'     *\/'],[-1,'    intersects: function(geometry) {'],[0,'        var intersect = false;'],[0,'        for(var i=0, len=this.components.length; i&lt;len; ++ i) {'],[0,'            intersect = geometry.intersects(this.components[i]);'],[0,'            if(intersect) {'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        return intersect;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getVertices'],[-1,'     * Return a list of all points in this geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * nodes - {Boolean} For lines, only return vertices that are'],[-1,'     *     endpoints.  If false, for lines, only vertices that are not'],[-1,'     *     endpoints will be returned.  If not provided, all vertices will'],[-1,'     *     be returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} A list of all vertices in the geometry.'],[-1,'     *\/'],[-1,'    getVertices: function(nodes) {'],[0,'        var vertices = [];'],[0,'        for(var i=0, len=this.components.length; i&lt;len; ++i) {'],[0,'            Array.prototype.push.apply('],[-1,'                vertices, this.components[i].getVertices(nodes)'],[-1,'            );'],[-1,'        }'],[0,'        return vertices;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Geometry.Collection\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Geometry\/MultiPoint.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Geometry\/Collection.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Geometry.MultiPoint'],[-1,' * MultiPoint is a collection of Points.  Create a new instance with the'],[-1,' * &lt;OpenLayers.Geometry.MultiPoint&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Geometry.Collection&gt;'],[-1,' *  - &lt;OpenLayers.Geometry&gt;'],[-1,' *\/'],[1,'OpenLayers.Geometry.MultiPoint = OpenLayers.Class('],[-1,'  OpenLayers.Geometry.Collection, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: componentTypes'],[-1,'     * {Array(String)} An array of class names representing the types of'],[-1,'     * components that the collection can include.  A null value means the'],[-1,'     * component types are not restricted.'],[-1,'     *\/'],[-1,'    componentTypes: [\&quot;OpenLayers.Geometry.Point\&quot;],'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Geometry.MultiPoint'],[-1,'     * Create a new MultiPoint Geometry'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * components - {Array(&lt;OpenLayers.Geometry.Point&gt;)} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry.MultiPoint&gt;}'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: addPoint'],[-1,'     * Wrapper for &lt;OpenLayers.Geometry.Collection.addComponent&gt;'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;} Point to be added'],[-1,'     * index - {Integer} Optional index'],[-1,'     *\/'],[-1,'    addPoint: function(point, index) {'],[0,'        this.addComponent(point, index);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: removePoint'],[-1,'     * Wrapper for &lt;OpenLayers.Geometry.Collection.removeComponent&gt;'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;} Point to be removed'],[-1,'     *\/'],[-1,'    removePoint: function(point){'],[0,'        this.removeComponent(point);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Geometry.MultiPoint\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Geometry\/Curve.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Geometry\/MultiPoint.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Geometry.Curve'],[-1,' * A Curve is a MultiPoint, whose points are assumed to be connected. To '],[-1,' * this end, we provide a \&quot;getLength()\&quot; function, which iterates through '],[-1,' * the points, summing the distances between them. '],[-1,' * '],[-1,' * Inherits: '],[-1,' *  - &lt;OpenLayers.Geometry.MultiPoint&gt;'],[-1,' *\/'],[1,'OpenLayers.Geometry.Curve = OpenLayers.Class(OpenLayers.Geometry.MultiPoint, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: componentTypes'],[-1,'     * {Array(String)} An array of class names representing the types of '],[-1,'     *                 components that the collection can include.  A null '],[-1,'     *                 value means the component types are not restricted.'],[-1,'     *\/'],[-1,'    componentTypes: [\&quot;OpenLayers.Geometry.Point\&quot;],'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Geometry.Curve'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * point - {Array(&lt;OpenLayers.Geometry.Point&gt;)}'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getLength'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The length of the curve'],[-1,'     *\/'],[-1,'    getLength: function() {'],[0,'        var length = 0.0;'],[0,'        if ( this.components &amp;&amp; (this.components.length &gt; 1)) {'],[0,'            for(var i=1, len=this.components.length; i&lt;len; i++) {'],[0,'                length += this.components[i-1].distanceTo(this.components[i]);'],[-1,'            }'],[-1,'        }'],[0,'        return length;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getGeodesicLength'],[-1,'     * Calculate the approximate length of the geometry were it projected onto'],[-1,'     *     the earth.'],[-1,'     *'],[-1,'     * projection - {&lt;OpenLayers.Projection&gt;} The spatial reference system'],[-1,'     *     for the geometry coordinates.  If not provided, Geographic\/WGS84 is'],[-1,'     *     assumed.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The appoximate geodesic length of the geometry in meters.'],[-1,'     *\/'],[-1,'    getGeodesicLength: function(projection) {'],[0,'        var geom = this;  \/\/ so we can work with a clone if needed'],[0,'        if(projection) {'],[0,'            var gg = new OpenLayers.Projection(\&quot;EPSG:4326\&quot;);'],[0,'            if(!gg.equals(projection)) {'],[0,'                geom = this.clone().transform(projection, gg);'],[-1,'            }'],[-1,'        }'],[0,'        var length = 0.0;'],[0,'        if(geom.components &amp;&amp; (geom.components.length &gt; 1)) {'],[0,'            var p1, p2;'],[0,'            for(var i=1, len=geom.components.length; i&lt;len; i++) {'],[0,'                p1 = geom.components[i-1];'],[0,'                p2 = geom.components[i];'],[-1,'                \/\/ this returns km and requires lon\/lat properties'],[0,'                length += OpenLayers.Util.distVincenty('],[-1,'                    {lon: p1.x, lat: p1.y}, {lon: p2.x, lat: p2.y}'],[-1,'                );'],[-1,'            }'],[-1,'        }'],[-1,'        \/\/ convert to m'],[0,'        return length * 1000;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Geometry.Curve\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Geometry\/LineString.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Geometry\/Curve.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Geometry.LineString'],[-1,' * A LineString is a Curve which, once two points have been added to it, can '],[-1,' * never be less than two points long.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Geometry.Curve&gt;'],[-1,' *\/'],[1,'OpenLayers.Geometry.LineString = OpenLayers.Class(OpenLayers.Geometry.Curve, {'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Geometry.LineString'],[-1,'     * Create a new LineString geometry'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * points - {Array(&lt;OpenLayers.Geometry.Point&gt;)} An array of points used to'],[-1,'     *          generate the linestring'],[-1,'     *'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: removeComponent'],[-1,'     * Only allows removal of a point if there are three or more points in '],[-1,'     * the linestring. (otherwise the result would be just a single point)'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;} The point to be removed'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} The component was removed.'],[-1,'     *\/'],[-1,'    removeComponent: function(point) {'],[0,'        var removed = this.components &amp;&amp; (this.components.length &gt; 2);'],[0,'        if (removed) {'],[0,'            OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, '],[-1,'                                                                  arguments);'],[-1,'        }'],[0,'        return removed;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: intersects'],[-1,'     * Test for instersection between two geometries.  This is a cheapo'],[-1,'     *     implementation of the Bently-Ottmann algorigithm.  It doesn\'t'],[-1,'     *     really keep track of a sweep line data structure.  It is closer'],[-1,'     *     to the brute force method, except that segments are sorted and'],[-1,'     *     potential intersections are only calculated when bounding boxes'],[-1,'     *     intersect.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The input geometry intersects this geometry.'],[-1,'     *\/'],[-1,'    intersects: function(geometry) {'],[0,'        var intersect = false;'],[0,'        var type = geometry.CLASS_NAME;'],[0,'        if(type == \&quot;OpenLayers.Geometry.LineString\&quot; ||'],[-1,'           type == \&quot;OpenLayers.Geometry.LinearRing\&quot; ||'],[-1,'           type == \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'            var segs1 = this.getSortedSegments();'],[0,'            var segs2;'],[0,'            if(type == \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'                segs2 = [{'],[-1,'                    x1: geometry.x, y1: geometry.y,'],[-1,'                    x2: geometry.x, y2: geometry.y'],[-1,'                }];'],[-1,'            } else {'],[0,'                segs2 = geometry.getSortedSegments();'],[-1,'            }'],[0,'            var seg1, seg1x1, seg1x2, seg1y1, seg1y2,'],[-1,'                seg2, seg2y1, seg2y2;'],[-1,'            \/\/ sweep right'],[0,'            outer: for(var i=0, len=segs1.length; i&lt;len; ++i) {'],[0,'                seg1 = segs1[i];'],[0,'                seg1x1 = seg1.x1;'],[0,'                seg1x2 = seg1.x2;'],[0,'                seg1y1 = seg1.y1;'],[0,'                seg1y2 = seg1.y2;'],[0,'                inner: for(var j=0, jlen=segs2.length; j&lt;jlen; ++j) {'],[0,'                    seg2 = segs2[j];'],[0,'                    if(seg2.x1 &gt; seg1x2) {'],[-1,'                        \/\/ seg1 still left of seg2'],[0,'                        break;'],[-1,'                    }'],[0,'                    if(seg2.x2 &lt; seg1x1) {'],[-1,'                        \/\/ seg2 still left of seg1'],[0,'                        continue;'],[-1,'                    }'],[0,'                    seg2y1 = seg2.y1;'],[0,'                    seg2y2 = seg2.y2;'],[0,'                    if(Math.min(seg2y1, seg2y2) &gt; Math.max(seg1y1, seg1y2)) {'],[-1,'                        \/\/ seg2 above seg1'],[0,'                        continue;'],[-1,'                    }'],[0,'                    if(Math.max(seg2y1, seg2y2) &lt; Math.min(seg1y1, seg1y2)) {'],[-1,'                        \/\/ seg2 below seg1'],[0,'                        continue;'],[-1,'                    }'],[0,'                    if(OpenLayers.Geometry.segmentsIntersect(seg1, seg2)) {'],[0,'                        intersect = true;'],[0,'                        break outer;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        } else {'],[0,'            intersect = geometry.intersects(this);'],[-1,'        }'],[0,'        return intersect;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getSortedSegments'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} An array of segment objects.  Segment objects have properties'],[-1,'     *     x1, y1, x2, and y2.  The start point is represented by x1 and y1.'],[-1,'     *     The end point is represented by x2 and y2.  Start and end are'],[-1,'     *     ordered so that x1 &lt; x2.'],[-1,'     *\/'],[-1,'    getSortedSegments: function() {'],[0,'        var numSeg = this.components.length - 1;'],[0,'        var segments = new Array(numSeg), point1, point2;'],[0,'        for(var i=0; i&lt;numSeg; ++i) {'],[0,'            point1 = this.components[i];'],[0,'            point2 = this.components[i + 1];'],[0,'            if(point1.x &lt; point2.x) {'],[0,'                segments[i] = {'],[-1,'                    x1: point1.x,'],[-1,'                    y1: point1.y,'],[-1,'                    x2: point2.x,'],[-1,'                    y2: point2.y'],[-1,'                };'],[-1,'            } else {'],[0,'                segments[i] = {'],[-1,'                    x1: point2.x,'],[-1,'                    y1: point2.y,'],[-1,'                    x2: point1.x,'],[-1,'                    y2: point1.y'],[-1,'                };'],[-1,'            }'],[-1,'        }'],[-1,'        \/\/ more efficient to define this somewhere static'],[0,'        function byX1(seg1, seg2) {'],[0,'            return seg1.x1 - seg2.x1;'],[-1,'        }'],[0,'        return segments.sort(byX1);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: splitWithSegment'],[-1,'     * Split this geometry with the given segment.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * seg - {Object} An object with x1, y1, x2, and y2 properties referencing'],[-1,'     *     segment endpoint coordinates.'],[-1,'     * options - {Object} Properties of this object will be used to determine'],[-1,'     *     how the split is conducted.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * edge - {Boolean} Allow splitting when only edges intersect.  Default is'],[-1,'     *     true.  If false, a vertex on the source segment must be within the'],[-1,'     *     tolerance distance of the intersection to be considered a split.'],[-1,'     * tolerance - {Number} If a non-null value is provided, intersections'],[-1,'     *     within the tolerance distance of one of the source segment\'s'],[-1,'     *     endpoints will be assumed to occur at the endpoint.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object with *lines* and *points* properties.  If the given'],[-1,'     *     segment intersects this linestring, the lines array will reference'],[-1,'     *     geometries that result from the split.  The points array will contain'],[-1,'     *     all intersection points.  Intersection points are sorted along the'],[-1,'     *     segment (in order from x1,y1 to x2,y2).'],[-1,'     *\/'],[-1,'    splitWithSegment: function(seg, options) {'],[0,'        var edge = !(options &amp;&amp; options.edge === false);'],[0,'        var tolerance = options &amp;&amp; options.tolerance;'],[0,'        var lines = [];'],[0,'        var verts = this.getVertices();'],[0,'        var points = [];'],[0,'        var intersections = [];'],[0,'        var split = false;'],[0,'        var vert1, vert2, point;'],[0,'        var node, vertex, target;'],[0,'        var interOptions = {point: true, tolerance: tolerance};'],[0,'        var result = null;'],[0,'        for(var i=0, stop=verts.length-2; i&lt;=stop; ++i) {'],[0,'            vert1 = verts[i];'],[0,'            points.push(vert1.clone());'],[0,'            vert2 = verts[i+1];'],[0,'            target = {x1: vert1.x, y1: vert1.y, x2: vert2.x, y2: vert2.y};'],[0,'            point = OpenLayers.Geometry.segmentsIntersect('],[-1,'                seg, target, interOptions'],[-1,'            );'],[0,'            if(point instanceof OpenLayers.Geometry.Point) {'],[0,'                if((point.x === seg.x1 &amp;&amp; point.y === seg.y1) ||'],[-1,'                   (point.x === seg.x2 &amp;&amp; point.y === seg.y2) ||'],[-1,'                   point.equals(vert1) || point.equals(vert2)) {'],[0,'                    vertex = true;'],[-1,'                } else {'],[0,'                    vertex = false;'],[-1,'                }'],[0,'                if(vertex || edge) {'],[-1,'                    \/\/ push intersections different than the previous'],[0,'                    if(!point.equals(intersections[intersections.length-1])) {'],[0,'                        intersections.push(point.clone());'],[-1,'                    }'],[0,'                    if(i === 0) {'],[0,'                        if(point.equals(vert1)) {'],[0,'                            continue;'],[-1,'                        }'],[-1,'                    }'],[0,'                    if(point.equals(vert2)) {'],[0,'                        continue;'],[-1,'                    }'],[0,'                    split = true;'],[0,'                    if(!point.equals(vert1)) {'],[0,'                        points.push(point);'],[-1,'                    }'],[0,'                    lines.push(new OpenLayers.Geometry.LineString(points));'],[0,'                    points = [point.clone()];'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        if(split) {'],[0,'            points.push(vert2.clone());'],[0,'            lines.push(new OpenLayers.Geometry.LineString(points));'],[-1,'        }'],[0,'        if(intersections.length &gt; 0) {'],[-1,'            \/\/ sort intersections along segment'],[0,'            var xDir = seg.x1 &lt; seg.x2 ? 1 : -1;'],[0,'            var yDir = seg.y1 &lt; seg.y2 ? 1 : -1;'],[0,'            result = {'],[-1,'                lines: lines,'],[-1,'                points: intersections.sort(function(p1, p2) {'],[0,'                    return (xDir * p1.x - xDir * p2.x) || (yDir * p1.y - yDir * p2.y);'],[-1,'                })'],[-1,'            };'],[-1,'        }'],[0,'        return result;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: split'],[-1,'     * Use this geometry (the source) to attempt to split a target geometry.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * target - {&lt;OpenLayers.Geometry&gt;} The target geometry.'],[-1,'     * options - {Object} Properties of this object will be used to determine'],[-1,'     *     how the split is conducted.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * mutual - {Boolean} Split the source geometry in addition to the target'],[-1,'     *     geometry.  Default is false.'],[-1,'     * edge - {Boolean} Allow splitting when only edges intersect.  Default is'],[-1,'     *     true.  If false, a vertex on the source must be within the tolerance'],[-1,'     *     distance of the intersection to be considered a split.'],[-1,'     * tolerance - {Number} If a non-null value is provided, intersections'],[-1,'     *     within the tolerance distance of an existing vertex on the source'],[-1,'     *     will be assumed to occur at the vertex.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Array} A list of geometries (of this same type as the target) that'],[-1,'     *     result from splitting the target with the source geometry.  The'],[-1,'     *     source and target geometry will remain unmodified.  If no split'],[-1,'     *     results, null will be returned.  If mutual is true and a split'],[-1,'     *     results, return will be an array of two arrays - the first will be'],[-1,'     *     all geometries that result from splitting the source geometry and'],[-1,'     *     the second will be all geometries that result from splitting the'],[-1,'     *     target geometry.'],[-1,'     *\/'],[-1,'    split: function(target, options) {'],[0,'        var results = null;'],[0,'        var mutual = options &amp;&amp; options.mutual;'],[0,'        var sourceSplit, targetSplit, sourceParts, targetParts;'],[0,'        if(target instanceof OpenLayers.Geometry.LineString) {'],[0,'            var verts = this.getVertices();'],[0,'            var vert1, vert2, seg, splits, lines, point;'],[0,'            var points = [];'],[0,'            sourceParts = [];'],[0,'            for(var i=0, stop=verts.length-2; i&lt;=stop; ++i) {'],[0,'                vert1 = verts[i];'],[0,'                vert2 = verts[i+1];'],[0,'                seg = {'],[-1,'                    x1: vert1.x, y1: vert1.y,'],[-1,'                    x2: vert2.x, y2: vert2.y'],[-1,'                };'],[0,'                targetParts = targetParts || [target];'],[0,'                if(mutual) {'],[0,'                    points.push(vert1.clone());'],[-1,'                }'],[0,'                for(var j=0; j&lt;targetParts.length; ++j) {'],[0,'                    splits = targetParts[j].splitWithSegment(seg, options);'],[0,'                    if(splits) {'],[-1,'                        \/\/ splice in new features'],[0,'                        lines = splits.lines;'],[0,'                        if(lines.length &gt; 0) {'],[0,'                            lines.unshift(j, 1);'],[0,'                            Array.prototype.splice.apply(targetParts, lines);'],[0,'                            j += lines.length - 2;'],[-1,'                        }'],[0,'                        if(mutual) {'],[0,'                            for(var k=0, len=splits.points.length; k&lt;len; ++k) {'],[0,'                                point = splits.points[k];'],[0,'                                if(!point.equals(vert1)) {'],[0,'                                    points.push(point);'],[0,'                                    sourceParts.push(new OpenLayers.Geometry.LineString(points));'],[0,'                                    if(point.equals(vert2)) {'],[0,'                                        points = [];'],[-1,'                                    } else {'],[0,'                                        points = [point.clone()];'],[-1,'                                    }'],[-1,'                                }'],[-1,'                            }'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            if(mutual &amp;&amp; sourceParts.length &gt; 0 &amp;&amp; points.length &gt; 0) {'],[0,'                points.push(vert2.clone());'],[0,'                sourceParts.push(new OpenLayers.Geometry.LineString(points));'],[-1,'            }'],[-1,'        } else {'],[0,'            results = target.splitWith(this, options);'],[-1,'        }'],[0,'        if(targetParts &amp;&amp; targetParts.length &gt; 1) {'],[0,'            targetSplit = true;'],[-1,'        } else {'],[0,'            targetParts = [];'],[-1,'        }'],[0,'        if(sourceParts &amp;&amp; sourceParts.length &gt; 1) {'],[0,'            sourceSplit = true;'],[-1,'        } else {'],[0,'            sourceParts = [];'],[-1,'        }'],[0,'        if(targetSplit || sourceSplit) {'],[0,'            if(mutual) {'],[0,'                results = [sourceParts, targetParts];'],[-1,'            } else {'],[0,'                results = targetParts;'],[-1,'            }'],[-1,'        }'],[0,'        return results;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: splitWith'],[-1,'     * Split this geometry (the target) with the given geometry (the source).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} A geometry used to split this'],[-1,'     *     geometry (the source).'],[-1,'     * options - {Object} Properties of this object will be used to determine'],[-1,'     *     how the split is conducted.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * mutual - {Boolean} Split the source geometry in addition to the target'],[-1,'     *     geometry.  Default is false.'],[-1,'     * edge - {Boolean} Allow splitting when only edges intersect.  Default is'],[-1,'     *     true.  If false, a vertex on the source must be within the tolerance'],[-1,'     *     distance of the intersection to be considered a split.'],[-1,'     * tolerance - {Number} If a non-null value is provided, intersections'],[-1,'     *     within the tolerance distance of an existing vertex on the source'],[-1,'     *     will be assumed to occur at the vertex.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Array} A list of geometries (of this same type as the target) that'],[-1,'     *     result from splitting the target with the source geometry.  The'],[-1,'     *     source and target geometry will remain unmodified.  If no split'],[-1,'     *     results, null will be returned.  If mutual is true and a split'],[-1,'     *     results, return will be an array of two arrays - the first will be'],[-1,'     *     all geometries that result from splitting the source geometry and'],[-1,'     *     the second will be all geometries that result from splitting the'],[-1,'     *     target geometry.'],[-1,'     *\/'],[-1,'    splitWith: function(geometry, options) {'],[0,'        return geometry.split(this, options);'],[-1,''],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getVertices'],[-1,'     * Return a list of all points in this geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * nodes - {Boolean} For lines, only return vertices that are'],[-1,'     *     endpoints.  If false, for lines, only vertices that are not'],[-1,'     *     endpoints will be returned.  If not provided, all vertices will'],[-1,'     *     be returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} A list of all vertices in the geometry.'],[-1,'     *\/'],[-1,'    getVertices: function(nodes) {'],[0,'        var vertices;'],[0,'        if(nodes === true) {'],[0,'            vertices = ['],[-1,'                this.components[0],'],[-1,'                this.components[this.components.length-1]'],[-1,'            ];'],[0,'        } else if (nodes === false) {'],[0,'            vertices = this.components.slice(1, this.components.length-1);'],[-1,'        } else {'],[0,'            vertices = this.components.slice();'],[-1,'        }'],[0,'        return vertices;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: distanceTo'],[-1,'     * Calculate the closest distance between two geometries (on the x-y plane).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} The target geometry.'],[-1,'     * options - {Object} Optional properties for configuring the distance'],[-1,'     *     calculation.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * details - {Boolean} Return details from the distance calculation.'],[-1,'     *     Default is false.'],[-1,'     * edge - {Boolean} Calculate the distance from this geometry to the'],[-1,'     *     nearest edge of the target geometry.  Default is true.  If true,'],[-1,'     *     calling distanceTo from a geometry that is wholly contained within'],[-1,'     *     the target will result in a non-zero distance.  If false, whenever'],[-1,'     *     geometries intersect, calling distanceTo will return 0.  If false,'],[-1,'     *     details cannot be returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number | Object} The distance between this geometry and the target.'],[-1,'     *     If details is true, the return will be an object with distance,'],[-1,'     *     x0, y0, x1, and x2 properties.  The x0 and y0 properties represent'],[-1,'     *     the coordinates of the closest point on this geometry. The x1 and y1'],[-1,'     *     properties represent the coordinates of the closest point on the'],[-1,'     *     target geometry.'],[-1,'     *\/'],[-1,'    distanceTo: function(geometry, options) {'],[0,'        var edge = !(options &amp;&amp; options.edge === false);'],[0,'        var details = edge &amp;&amp; options &amp;&amp; options.details;'],[0,'        var result, best = {};'],[0,'        var min = Number.POSITIVE_INFINITY;'],[0,'        if(geometry instanceof OpenLayers.Geometry.Point) {'],[0,'            var segs = this.getSortedSegments();'],[0,'            var x = geometry.x;'],[0,'            var y = geometry.y;'],[0,'            var seg;'],[0,'            for(var i=0, len=segs.length; i&lt;len; ++i) {'],[0,'                seg = segs[i];'],[0,'                result = OpenLayers.Geometry.distanceToSegment(geometry, seg);'],[0,'                if(result.distance &lt; min) {'],[0,'                    min = result.distance;'],[0,'                    best = result;'],[0,'                    if(min === 0) {'],[0,'                        break;'],[-1,'                    }'],[-1,'                } else {'],[-1,'                    \/\/ if distance increases and we cross y0 to the right of x0, no need to keep looking.'],[0,'                    if(seg.x2 &gt; x &amp;&amp; ((y &gt; seg.y1 &amp;&amp; y &lt; seg.y2) || (y &lt; seg.y1 &amp;&amp; y &gt; seg.y2))) {'],[0,'                        break;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            if(details) {'],[0,'                best = {'],[-1,'                    distance: best.distance,'],[-1,'                    x0: best.x, y0: best.y,'],[-1,'                    x1: x, y1: y'],[-1,'                };'],[-1,'            } else {'],[0,'                best = best.distance;'],[-1,'            }'],[0,'        } else if(geometry instanceof OpenLayers.Geometry.LineString) { '],[0,'            var segs0 = this.getSortedSegments();'],[0,'            var segs1 = geometry.getSortedSegments();'],[0,'            var seg0, seg1, intersection, x0, y0;'],[0,'            var len1 = segs1.length;'],[0,'            var interOptions = {point: true};'],[0,'            outer: for(var i=0, len=segs0.length; i&lt;len; ++i) {'],[0,'                seg0 = segs0[i];'],[0,'                x0 = seg0.x1;'],[0,'                y0 = seg0.y1;'],[0,'                for(var j=0; j&lt;len1; ++j) {'],[0,'                    seg1 = segs1[j];'],[0,'                    intersection = OpenLayers.Geometry.segmentsIntersect(seg0, seg1, interOptions);'],[0,'                    if(intersection) {'],[0,'                        min = 0;'],[0,'                        best = {'],[-1,'                            distance: 0,'],[-1,'                            x0: intersection.x, y0: intersection.y,'],[-1,'                            x1: intersection.x, y1: intersection.y'],[-1,'                        };'],[0,'                        break outer;'],[-1,'                    } else {'],[0,'                        result = OpenLayers.Geometry.distanceToSegment({x: x0, y: y0}, seg1);'],[0,'                        if(result.distance &lt; min) {'],[0,'                            min = result.distance;'],[0,'                            best = {'],[-1,'                                distance: min,'],[-1,'                                x0: x0, y0: y0,'],[-1,'                                x1: result.x, y1: result.y'],[-1,'                            };'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            if(!details) {'],[0,'                best = best.distance;'],[-1,'            }'],[0,'            if(min !== 0) {'],[-1,'                \/\/ check the final vertex in this line\'s sorted segments'],[0,'                if(seg0) {'],[0,'                    result = geometry.distanceTo('],[-1,'                        new OpenLayers.Geometry.Point(seg0.x2, seg0.y2),'],[-1,'                        options'],[-1,'                    );'],[0,'                    var dist = details ? result.distance : result;'],[0,'                    if(dist &lt; min) {'],[0,'                        if(details) {'],[0,'                            best = {'],[-1,'                                distance: min,'],[-1,'                                x0: result.x1, y0: result.y1,'],[-1,'                                x1: result.x0, y1: result.y0'],[-1,'                            };'],[-1,'                        } else {'],[0,'                            best = dist;'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        } else {'],[0,'            best = geometry.distanceTo(this, options);'],[-1,'            \/\/ swap since target comes from this line'],[0,'            if(details) {'],[0,'                best = {'],[-1,'                    distance: best.distance,'],[-1,'                    x0: best.x1, y0: best.y1,'],[-1,'                    x1: best.x0, y1: best.y0'],[-1,'                };'],[-1,'            }'],[-1,'        }'],[0,'        return best;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: simplify'],[-1,'     * This function will return a simplified LineString.'],[-1,'     * Simplification is based on the Douglas-Peucker algorithm.'],[-1,'     *'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * tolerance - {number} threshhold for simplification in map units'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {OpenLayers.Geometry.LineString} the simplified LineString'],[-1,'     *\/'],[-1,'    simplify: function(tolerance){'],[0,'        if (this &amp;&amp; this !== null) {'],[0,'            var points = this.getVertices();'],[0,'            if (points.length &lt; 3) {'],[0,'                return this;'],[-1,'            }'],[-1,'    '],[0,'            var compareNumbers = function(a, b){'],[0,'                return (a-b);'],[-1,'            };'],[-1,'    '],[-1,'            \/**'],[-1,'             * Private function doing the Douglas-Peucker reduction'],[-1,'             *\/'],[0,'            var douglasPeuckerReduction = function(points, firstPoint, lastPoint, tolerance){'],[0,'                var maxDistance = 0;'],[0,'                var indexFarthest = 0;'],[-1,'    '],[0,'                for (var index = firstPoint, distance; index &lt; lastPoint; index++) {'],[0,'                    distance = perpendicularDistance(points[firstPoint], points[lastPoint], points[index]);'],[0,'                    if (distance &gt; maxDistance) {'],[0,'                        maxDistance = distance;'],[0,'                        indexFarthest = index;'],[-1,'                    }'],[-1,'                }'],[-1,'    '],[0,'                if (maxDistance &gt; tolerance &amp;&amp; indexFarthest != firstPoint) {'],[-1,'                    \/\/Add the largest point that exceeds the tolerance'],[0,'                    pointIndexsToKeep.push(indexFarthest);'],[0,'                    douglasPeuckerReduction(points, firstPoint, indexFarthest, tolerance);'],[0,'                    douglasPeuckerReduction(points, indexFarthest, lastPoint, tolerance);'],[-1,'                }'],[-1,'            };'],[-1,'    '],[-1,'            \/**'],[-1,'             * Private function calculating the perpendicular distance'],[-1,'             * TODO: check whether OpenLayers.Geometry.LineString::distanceTo() is faster or slower'],[-1,'             *\/'],[0,'            var perpendicularDistance = function(point1, point2, point){'],[-1,'                \/\/Area = |(1\/2)(x1y2 + x2y3 + x3y1 - x2y1 - x3y2 - x1y3)|   *Area of triangle'],[-1,'                \/\/Base = v((x1-x2)\u00B2+(x1-x2)\u00B2)                               *Base of Triangle*'],[-1,'                \/\/Area = .5*Base*H                                          *Solve for height'],[-1,'                \/\/Height = Area\/.5\/Base'],[-1,'    '],[0,'                var area = Math.abs(0.5 * (point1.x * point2.y + point2.x * point.y + point.x * point1.y - point2.x * point1.y - point.x * point2.y - point1.x * point.y));'],[0,'                var bottom = Math.sqrt(Math.pow(point1.x - point2.x, 2) + Math.pow(point1.y - point2.y, 2));'],[0,'                var height = area \/ bottom * 2;'],[-1,'    '],[0,'                return height;'],[-1,'            };'],[-1,'    '],[0,'            var firstPoint = 0;'],[0,'            var lastPoint = points.length - 1;'],[0,'            var pointIndexsToKeep = [];'],[-1,'    '],[-1,'            \/\/Add the first and last index to the keepers'],[0,'            pointIndexsToKeep.push(firstPoint);'],[0,'            pointIndexsToKeep.push(lastPoint);'],[-1,'    '],[-1,'            \/\/The first and the last point cannot be the same'],[0,'            while (points[firstPoint].equals(points[lastPoint])) {'],[0,'                lastPoint--;'],[-1,'                \/\/Addition: the first point not equal to first point in the LineString is kept as well'],[0,'                pointIndexsToKeep.push(lastPoint);'],[-1,'            }'],[-1,'    '],[0,'            douglasPeuckerReduction(points, firstPoint, lastPoint, tolerance);'],[0,'            var returnPoints = [];'],[0,'            pointIndexsToKeep.sort(compareNumbers);'],[0,'            for (var index = 0; index &lt; pointIndexsToKeep.length; index++) {'],[0,'                returnPoints.push(points[pointIndexsToKeep[index]]);'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.LineString(returnPoints);'],[-1,'    '],[-1,'        }'],[-1,'        else {'],[0,'            return this;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Geometry.LineString\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Geometry\/LinearRing.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Geometry\/LineString.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Geometry.LinearRing'],[-1,' * '],[-1,' * A Linear Ring is a special LineString which is closed. It closes itself '],[-1,' * automatically on every addPoint\/removePoint by adding a copy of the first'],[-1,' * point as the last point. '],[-1,' * '],[-1,' * Also, as it is the first in the line family to close itself, a getArea()'],[-1,' * function is defined to calculate the enclosed area of the linearRing'],[-1,' * '],[-1,' * Inherits:'],[-1,' *  - &lt;OpenLayers.Geometry.LineString&gt;'],[-1,' *\/'],[1,'OpenLayers.Geometry.LinearRing = OpenLayers.Class('],[-1,'  OpenLayers.Geometry.LineString, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: componentTypes'],[-1,'     * {Array(String)} An array of class names representing the types of '],[-1,'     *                 components that the collection can include.  A null '],[-1,'     *                 value means the component types are not restricted.'],[-1,'     *\/'],[-1,'    componentTypes: [\&quot;OpenLayers.Geometry.Point\&quot;],'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Geometry.LinearRing'],[-1,'     * Linear rings are constructed with an array of points.  This array'],[-1,'     *     can represent a closed or open ring.  If the ring is open (the last'],[-1,'     *     point does not equal the first point), the constructor will close'],[-1,'     *     the ring.  If the ring is already closed (the last point does equal'],[-1,'     *     the first point), it will be left closed.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * points - {Array(&lt;OpenLayers.Geometry.Point&gt;)} points'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: addComponent'],[-1,'     * Adds a point to geometry components.  If the point is to be added to'],[-1,'     *     the end of the components array and it is the same as the last point'],[-1,'     *     already in that array, the duplicate point is not added.  This has '],[-1,'     *     the effect of closing the ring if it is not already closed, and '],[-1,'     *     doing the right thing if it is already closed.  This behavior can '],[-1,'     *     be overridden by calling the method with a non-null index as the '],[-1,'     *     second argument.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     * index - {Integer} Index into the array to insert the component'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Was the Point successfully added?'],[-1,'     *\/'],[-1,'    addComponent: function(point, index) {'],[0,'        var added = false;'],[-1,''],[-1,'        \/\/remove last point'],[0,'        var lastPoint = this.components.pop();'],[-1,''],[-1,'        \/\/ given an index, add the point'],[-1,'        \/\/ without an index only add non-duplicate points'],[0,'        if(index != null || !point.equals(lastPoint)) {'],[0,'            added = OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, '],[-1,'                                                                    arguments);'],[-1,'        }'],[-1,''],[-1,'        \/\/append copy of first point'],[0,'        var firstPoint = this.components[0];'],[0,'        OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, '],[-1,'                                                                [firstPoint]);'],[-1,'        '],[0,'        return added;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: removeComponent'],[-1,'     * Removes a point from geometry components.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} The component was removed.'],[-1,'     *\/'],[-1,'    removeComponent: function(point) {'],[0,'        var removed = this.components &amp;&amp; (this.components.length &gt; 3);'],[0,'        if (removed) {'],[-1,'            \/\/remove last point'],[0,'            this.components.pop();'],[-1,'            '],[-1,'            \/\/remove our point'],[0,'            OpenLayers.Geometry.Collection.prototype.removeComponent.apply(this, '],[-1,'                                                                    arguments);'],[-1,'            \/\/append copy of first point'],[0,'            var firstPoint = this.components[0];'],[0,'            OpenLayers.Geometry.Collection.prototype.addComponent.apply(this, '],[-1,'                                                                [firstPoint]);'],[-1,'        }'],[0,'        return removed;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: move'],[-1,'     * Moves a geometry by the given displacement along positive x and y axes.'],[-1,'     *     This modifies the position of the geometry and clears the cached'],[-1,'     *     bounds.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x - {Float} Distance to move geometry in positive x direction. '],[-1,'     * y - {Float} Distance to move geometry in positive y direction.'],[-1,'     *\/'],[-1,'    move: function(x, y) {'],[0,'        for(var i = 0, len=this.components.length; i&lt;len - 1; i++) {'],[0,'            this.components[i].move(x, y);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: rotate'],[-1,'     * Rotate a geometry around some origin'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * angle - {Float} Rotation angle in degrees (measured counterclockwise'],[-1,'     *                 from the positive x-axis)'],[-1,'     * origin - {&lt;OpenLayers.Geometry.Point&gt;} Center point for the rotation'],[-1,'     *\/'],[-1,'    rotate: function(angle, origin) {'],[0,'        for(var i=0, len=this.components.length; i&lt;len - 1; ++i) {'],[0,'            this.components[i].rotate(angle, origin);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: resize'],[-1,'     * Resize a geometry relative to some origin.  Use this method to apply'],[-1,'     *     a uniform scaling to a geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * scale - {Float} Factor by which to scale the geometry.  A scale of 2'],[-1,'     *                 doubles the size of the geometry in each dimension'],[-1,'     *                 (lines, for example, will be twice as long, and polygons'],[-1,'     *                 will have four times the area).'],[-1,'     * origin - {&lt;OpenLayers.Geometry.Point&gt;} Point of origin for resizing'],[-1,'     * ratio - {Float} Optional x:y ratio for resizing.  Default ratio is 1.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry&gt;} - The current geometry. '],[-1,'     *\/'],[-1,'    resize: function(scale, origin, ratio) {'],[0,'        for(var i=0, len=this.components.length; i&lt;len - 1; ++i) {'],[0,'            this.components[i].resize(scale, origin, ratio);'],[-1,'        }'],[0,'        return this;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: transform'],[-1,'     * Reproject the components geometry from source to dest.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * source - {&lt;OpenLayers.Projection&gt;}'],[-1,'     * dest - {&lt;OpenLayers.Projection&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry&gt;} '],[-1,'     *\/'],[-1,'    transform: function(source, dest) {'],[0,'        if (source &amp;&amp; dest) {'],[0,'            for (var i=0, len=this.components.length; i&lt;len - 1; i++) {'],[0,'                var component = this.components[i];'],[0,'                component.transform(source, dest);'],[-1,'            }'],[0,'            this.bounds = null;'],[-1,'        }'],[0,'        return this;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getCentroid'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry.Point&gt;} The centroid of the collection'],[-1,'     *\/'],[-1,'    getCentroid: function() {'],[0,'        if (this.components) {'],[0,'            var len = this.components.length;'],[0,'            if (len &gt; 0 &amp;&amp; len &lt;= 2) {'],[0,'                return this.components[0].clone();'],[0,'            } else if (len &gt; 2) {'],[0,'                var sumX = 0.0;'],[0,'                var sumY = 0.0;'],[0,'                var x0 = this.components[0].x;'],[0,'                var y0 = this.components[0].y;'],[0,'                var area = -1 * this.getArea();'],[0,'                if (area != 0) {'],[0,'                    for (var i = 0; i &lt; len - 1; i++) {'],[0,'                        var b = this.components[i];'],[0,'                        var c = this.components[i+1];'],[0,'                        sumX += (b.x + c.x - 2 * x0) * ((b.x - x0) * (c.y - y0) - (c.x - x0) * (b.y - y0));'],[0,'                        sumY += (b.y + c.y - 2 * y0) * ((b.x - x0) * (c.y - y0) - (c.x - x0) * (b.y - y0));'],[-1,'                    }'],[0,'                    var x = x0 + sumX \/ (6 * area);'],[0,'                    var y = y0 + sumY \/ (6 * area);'],[-1,'                } else {'],[0,'                    for (var i = 0; i &lt; len - 1; i++) {'],[0,'                        sumX += this.components[i].x;'],[0,'                        sumY += this.components[i].y;'],[-1,'                    }'],[0,'                    var x = sumX \/ (len - 1);'],[0,'                    var y = sumY \/ (len - 1);'],[-1,'                }'],[0,'                return new OpenLayers.Geometry.Point(x, y);'],[-1,'            } else {'],[0,'                return null;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getArea'],[-1,'     * Note - The area is positive if the ring is oriented CW, otherwise'],[-1,'     *         it will be negative.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The signed area for a ring.'],[-1,'     *\/'],[-1,'    getArea: function() {'],[0,'        var area = 0.0;'],[0,'        if ( this.components &amp;&amp; (this.components.length &gt; 2)) {'],[0,'            var sum = 0.0;'],[0,'            for (var i=0, len=this.components.length; i&lt;len - 1; i++) {'],[0,'                var b = this.components[i];'],[0,'                var c = this.components[i+1];'],[0,'                sum += (b.x + c.x) * (c.y - b.y);'],[-1,'            }'],[0,'            area = - sum \/ 2.0;'],[-1,'        }'],[0,'        return area;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getGeodesicArea'],[-1,'     * Calculate the approximate area of the polygon were it projected onto'],[-1,'     *     the earth.  Note that this area will be positive if ring is oriented'],[-1,'     *     clockwise, otherwise it will be negative.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * projection - {&lt;OpenLayers.Projection&gt;} The spatial reference system'],[-1,'     *     for the geometry coordinates.  If not provided, Geographic\/WGS84 is'],[-1,'     *     assumed.'],[-1,'     * '],[-1,'     * Reference:'],[-1,'     * Robert. G. Chamberlain and William H. Duquette, \&quot;Some Algorithms for'],[-1,'     *     Polygons on a Sphere\&quot;, JPL Publication 07-03, Jet Propulsion'],[-1,'     *     Laboratory, Pasadena, CA, June 2007 http:\/\/trs-new.jpl.nasa.gov\/dspace\/handle\/2014\/40409'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {float} The approximate signed geodesic area of the polygon in square'],[-1,'     *     meters.'],[-1,'     *\/'],[-1,'    getGeodesicArea: function(projection) {'],[0,'        var ring = this;  \/\/ so we can work with a clone if needed'],[0,'        if(projection) {'],[0,'            var gg = new OpenLayers.Projection(\&quot;EPSG:4326\&quot;);'],[0,'            if(!gg.equals(projection)) {'],[0,'                ring = this.clone().transform(projection, gg);'],[-1,'            }'],[-1,'        }'],[0,'        var area = 0.0;'],[0,'        var len = ring.components &amp;&amp; ring.components.length;'],[0,'        if(len &gt; 2) {'],[0,'            var p1, p2;'],[0,'            for(var i=0; i&lt;len-1; i++) {'],[0,'                p1 = ring.components[i];'],[0,'                p2 = ring.components[i+1];'],[0,'                area += OpenLayers.Util.rad(p2.x - p1.x) *'],[-1,'                        (2 + Math.sin(OpenLayers.Util.rad(p1.y)) +'],[-1,'                        Math.sin(OpenLayers.Util.rad(p2.y)));'],[-1,'            }'],[0,'            area = area * 6378137.0 * 6378137.0 \/ 2.0;'],[-1,'        }'],[0,'        return area;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: containsPoint'],[-1,'     * Test if a point is inside a linear ring.  For the case where a point'],[-1,'     *     is coincident with a linear ring edge, returns 1.  Otherwise,'],[-1,'     *     returns boolean.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean | Number} The point is inside the linear ring.  Returns 1 if'],[-1,'     *     the point is coincident with an edge.  Returns boolean otherwise.'],[-1,'     *\/'],[-1,'    containsPoint: function(point) {'],[0,'        var approx = OpenLayers.Number.limitSigDigs;'],[0,'        var digs = 14;'],[0,'        var px = approx(point.x, digs);'],[0,'        var py = approx(point.y, digs);'],[0,'        function getX(y, x1, y1, x2, y2) {'],[0,'            return (y - y2) * ((x2 - x1) \/ (y2 - y1)) + x2;'],[-1,'        }'],[0,'        var numSeg = this.components.length - 1;'],[0,'        var start, end, x1, y1, x2, y2, cx, cy;'],[0,'        var crosses = 0;'],[0,'        for(var i=0; i&lt;numSeg; ++i) {'],[0,'            start = this.components[i];'],[0,'            x1 = approx(start.x, digs);'],[0,'            y1 = approx(start.y, digs);'],[0,'            end = this.components[i + 1];'],[0,'            x2 = approx(end.x, digs);'],[0,'            y2 = approx(end.y, digs);'],[-1,'            '],[-1,'            \/**'],[-1,'             * The following conditions enforce five edge-crossing rules:'],[-1,'             *    1. points coincident with edges are considered contained;'],[-1,'             *    2. an upward edge includes its starting endpoint, and'],[-1,'             *    excludes its final endpoint;'],[-1,'             *    3. a downward edge excludes its starting endpoint, and'],[-1,'             *    includes its final endpoint;'],[-1,'             *    4. horizontal edges are excluded; and'],[-1,'             *    5. the edge-ray intersection point must be strictly right'],[-1,'             *    of the point P.'],[-1,'             *\/'],[0,'            if(y1 == y2) {'],[-1,'                \/\/ horizontal edge'],[0,'                if(py == y1) {'],[-1,'                    \/\/ point on horizontal line'],[0,'                    if(x1 &lt;= x2 &amp;&amp; (px &gt;= x1 &amp;&amp; px &lt;= x2) || \/\/ right or vert'],[-1,'                       x1 &gt;= x2 &amp;&amp; (px &lt;= x1 &amp;&amp; px &gt;= x2)) { \/\/ left or vert'],[-1,'                        \/\/ point on edge'],[0,'                        crosses = -1;'],[0,'                        break;'],[-1,'                    }'],[-1,'                }'],[-1,'                \/\/ ignore other horizontal edges'],[0,'                continue;'],[-1,'            }'],[0,'            cx = approx(getX(py, x1, y1, x2, y2), digs);'],[0,'            if(cx == px) {'],[-1,'                \/\/ point on line'],[0,'                if(y1 &lt; y2 &amp;&amp; (py &gt;= y1 &amp;&amp; py &lt;= y2) || \/\/ upward'],[-1,'                   y1 &gt; y2 &amp;&amp; (py &lt;= y1 &amp;&amp; py &gt;= y2)) { \/\/ downward'],[-1,'                    \/\/ point on edge'],[0,'                    crosses = -1;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[0,'            if(cx &lt;= px) {'],[-1,'                \/\/ no crossing to the right'],[0,'                continue;'],[-1,'            }'],[0,'            if(x1 != x2 &amp;&amp; (cx &lt; Math.min(x1, x2) || cx &gt; Math.max(x1, x2))) {'],[-1,'                \/\/ no crossing'],[0,'                continue;'],[-1,'            }'],[0,'            if(y1 &lt; y2 &amp;&amp; (py &gt;= y1 &amp;&amp; py &lt; y2) || \/\/ upward'],[-1,'               y1 &gt; y2 &amp;&amp; (py &lt; y1 &amp;&amp; py &gt;= y2)) { \/\/ downward'],[0,'                ++crosses;'],[-1,'            }'],[-1,'        }'],[0,'        var contained = (crosses == -1) ?'],[-1,'            \/\/ on edge'],[-1,'            1 :'],[-1,'            \/\/ even (out) or odd (in)'],[-1,'            !!(crosses &amp; 1);'],[-1,''],[0,'        return contained;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: intersects'],[-1,'     * Determine if the input geometry intersects this one.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} Any type of geometry.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The input geometry intersects this one.'],[-1,'     *\/'],[-1,'    intersects: function(geometry) {'],[0,'        var intersect = false;'],[0,'        if(geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'            intersect = this.containsPoint(geometry);'],[0,'        } else if(geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.LineString\&quot;) {'],[0,'            intersect = geometry.intersects(this);'],[0,'        } else if(geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.LinearRing\&quot;) {'],[0,'            intersect = OpenLayers.Geometry.LineString.prototype.intersects.apply('],[-1,'                this, [geometry]'],[-1,'            );'],[-1,'        } else {'],[-1,'            \/\/ check for component intersections'],[0,'            for(var i=0, len=geometry.components.length; i&lt;len; ++ i) {'],[0,'                intersect = geometry.components[i].intersects(this);'],[0,'                if(intersect) {'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return intersect;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getVertices'],[-1,'     * Return a list of all points in this geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * nodes - {Boolean} For lines, only return vertices that are'],[-1,'     *     endpoints.  If false, for lines, only vertices that are not'],[-1,'     *     endpoints will be returned.  If not provided, all vertices will'],[-1,'     *     be returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} A list of all vertices in the geometry.'],[-1,'     *\/'],[-1,'    getVertices: function(nodes) {'],[0,'        return (nodes === true) ? [] : this.components.slice(0, this.components.length-1);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Geometry.LinearRing\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Geometry\/Polygon.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Geometry\/Collection.js'],[-1,' * @requires OpenLayers\/Geometry\/LinearRing.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Geometry.Polygon '],[-1,' * Polygon is a collection of Geometry.LinearRings. '],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Geometry.Collection&gt; '],[-1,' *  - &lt;OpenLayers.Geometry&gt; '],[-1,' *\/'],[1,'OpenLayers.Geometry.Polygon = OpenLayers.Class('],[-1,'  OpenLayers.Geometry.Collection, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: componentTypes'],[-1,'     * {Array(String)} An array of class names representing the types of'],[-1,'     * components that the collection can include.  A null value means the'],[-1,'     * component types are not restricted.'],[-1,'     *\/'],[-1,'    componentTypes: [\&quot;OpenLayers.Geometry.LinearRing\&quot;],'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Geometry.Polygon'],[-1,'     * Constructor for a Polygon geometry. '],[-1,'     * The first ring (this.component[0])is the outer bounds of the polygon and '],[-1,'     * all subsequent rings (this.component[1-n]) are internal holes.'],[-1,'     *'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * components - {Array(&lt;OpenLayers.Geometry.LinearRing&gt;)} '],[-1,'     *\/'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: getArea'],[-1,'     * Calculated by subtracting the areas of the internal holes from the '],[-1,'     *   area of the outer hole.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {float} The area of the geometry'],[-1,'     *\/'],[-1,'    getArea: function() {'],[0,'        var area = 0.0;'],[0,'        if ( this.components &amp;&amp; (this.components.length &gt; 0)) {'],[0,'            area += Math.abs(this.components[0].getArea());'],[0,'            for (var i=1, len=this.components.length; i&lt;len; i++) {'],[0,'                area -= Math.abs(this.components[i].getArea());'],[-1,'            }'],[-1,'        }'],[0,'        return area;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: getGeodesicArea'],[-1,'     * Calculate the approximate area of the polygon were it projected onto'],[-1,'     *     the earth.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * projection - {&lt;OpenLayers.Projection&gt;} The spatial reference system'],[-1,'     *     for the geometry coordinates.  If not provided, Geographic\/WGS84 is'],[-1,'     *     assumed.'],[-1,'     * '],[-1,'     * Reference:'],[-1,'     * Robert. G. Chamberlain and William H. Duquette, \&quot;Some Algorithms for'],[-1,'     *     Polygons on a Sphere\&quot;, JPL Publication 07-03, Jet Propulsion'],[-1,'     *     Laboratory, Pasadena, CA, June 2007 http:\/\/trs-new.jpl.nasa.gov\/dspace\/handle\/2014\/40409'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {float} The approximate geodesic area of the polygon in square meters.'],[-1,'     *\/'],[-1,'    getGeodesicArea: function(projection) {'],[0,'        var area = 0.0;'],[0,'        if(this.components &amp;&amp; (this.components.length &gt; 0)) {'],[0,'            area += Math.abs(this.components[0].getGeodesicArea(projection));'],[0,'            for(var i=1, len=this.components.length; i&lt;len; i++) {'],[0,'                area -= Math.abs(this.components[i].getGeodesicArea(projection));'],[-1,'            }'],[-1,'        }'],[0,'        return area;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: containsPoint'],[-1,'     * Test if a point is inside a polygon.  Points on a polygon edge are'],[-1,'     *     considered inside.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean | Number} The point is inside the polygon.  Returns 1 if the'],[-1,'     *     point is on an edge.  Returns boolean otherwise.'],[-1,'     *\/'],[-1,'    containsPoint: function(point) {'],[0,'        var numRings = this.components.length;'],[0,'        var contained = false;'],[0,'        if(numRings &gt; 0) {'],[-1,'            \/\/ check exterior ring - 1 means on edge, boolean otherwise'],[0,'            contained = this.components[0].containsPoint(point);'],[0,'            if(contained !== 1) {'],[0,'                if(contained &amp;&amp; numRings &gt; 1) {'],[-1,'                    \/\/ check interior rings'],[0,'                    var hole;'],[0,'                    for(var i=1; i&lt;numRings; ++i) {'],[0,'                        hole = this.components[i].containsPoint(point);'],[0,'                        if(hole) {'],[0,'                            if(hole === 1) {'],[-1,'                                \/\/ on edge'],[0,'                                contained = 1;'],[-1,'                            } else {'],[-1,'                                \/\/ in hole'],[0,'                                contained = false;'],[-1,'                            }                            '],[0,'                            break;'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return contained;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: intersects'],[-1,'     * Determine if the input geometry intersects this one.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} Any type of geometry.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The input geometry intersects this one.'],[-1,'     *\/'],[-1,'    intersects: function(geometry) {'],[0,'        var intersect = false;'],[0,'        var i, len;'],[0,'        if(geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'            intersect = this.containsPoint(geometry);'],[0,'        } else if(geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.LineString\&quot; ||'],[-1,'                  geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.LinearRing\&quot;) {'],[-1,'            \/\/ check if rings\/linestrings intersect'],[0,'            for(i=0, len=this.components.length; i&lt;len; ++i) {'],[0,'                intersect = geometry.intersects(this.components[i]);'],[0,'                if(intersect) {'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[0,'            if(!intersect) {'],[-1,'                \/\/ check if this poly contains points of the ring\/linestring'],[0,'                for(i=0, len=geometry.components.length; i&lt;len; ++i) {'],[0,'                    intersect = this.containsPoint(geometry.components[i]);'],[0,'                    if(intersect) {'],[0,'                        break;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        } else {'],[0,'            for(i=0, len=geometry.components.length; i&lt;len; ++ i) {'],[0,'                intersect = this.intersects(geometry.components[i]);'],[0,'                if(intersect) {'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'        \/\/ check case where this poly is wholly contained by another'],[0,'        if(!intersect &amp;&amp; geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.Polygon\&quot;) {'],[-1,'            \/\/ exterior ring points will be contained in the other geometry'],[0,'            var ring = this.components[0];'],[0,'            for(i=0, len=ring.components.length; i&lt;len; ++i) {'],[0,'                intersect = geometry.containsPoint(ring.components[i]);'],[0,'                if(intersect) {'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return intersect;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: distanceTo'],[-1,'     * Calculate the closest distance between two geometries (on the x-y plane).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} The target geometry.'],[-1,'     * options - {Object} Optional properties for configuring the distance'],[-1,'     *     calculation.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * details - {Boolean} Return details from the distance calculation.'],[-1,'     *     Default is false.'],[-1,'     * edge - {Boolean} Calculate the distance from this geometry to the'],[-1,'     *     nearest edge of the target geometry.  Default is true.  If true,'],[-1,'     *     calling distanceTo from a geometry that is wholly contained within'],[-1,'     *     the target will result in a non-zero distance.  If false, whenever'],[-1,'     *     geometries intersect, calling distanceTo will return 0.  If false,'],[-1,'     *     details cannot be returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number | Object} The distance between this geometry and the target.'],[-1,'     *     If details is true, the return will be an object with distance,'],[-1,'     *     x0, y0, x1, and y1 properties.  The x0 and y0 properties represent'],[-1,'     *     the coordinates of the closest point on this geometry. The x1 and y1'],[-1,'     *     properties represent the coordinates of the closest point on the'],[-1,'     *     target geometry.'],[-1,'     *\/'],[-1,'    distanceTo: function(geometry, options) {'],[0,'        var edge = !(options &amp;&amp; options.edge === false);'],[0,'        var result;'],[-1,'        \/\/ this is the case where we might not be looking for distance to edge'],[0,'        if(!edge &amp;&amp; this.intersects(geometry)) {'],[0,'            result = 0;'],[-1,'        } else {'],[0,'            result = OpenLayers.Geometry.Collection.prototype.distanceTo.apply('],[-1,'                this, [geometry, options]'],[-1,'            );'],[-1,'        }'],[0,'        return result;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Geometry.Polygon\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * APIMethod: createRegularPolygon'],[-1,' * Create a regular polygon around a radius. Useful for creating circles '],[-1,' * and the like.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * origin - {&lt;OpenLayers.Geometry.Point&gt;} center of polygon.'],[-1,' * radius - {Float} distance to vertex, in map units.'],[-1,' * sides - {Integer} Number of sides. 20 approximates a circle.'],[-1,' * rotation - {Float} original angle of rotation, in degrees.'],[-1,' *\/'],[1,'OpenLayers.Geometry.Polygon.createRegularPolygon = function(origin, radius, sides, rotation) {  '],[0,'    var angle = Math.PI * ((1\/sides) - (1\/2));'],[0,'    if(rotation) {'],[0,'        angle += (rotation \/ 180) * Math.PI;'],[-1,'    }'],[0,'    var rotatedAngle, x, y;'],[0,'    var points = [];'],[0,'    for(var i=0; i&lt;sides; ++i) {'],[0,'        rotatedAngle = angle + (i * 2 * Math.PI \/ sides);'],[0,'        x = origin.x + (radius * Math.cos(rotatedAngle));'],[0,'        y = origin.y + (radius * Math.sin(rotatedAngle));'],[0,'        points.push(new OpenLayers.Geometry.Point(x, y));'],[-1,'    }'],[0,'    var ring = new OpenLayers.Geometry.LinearRing(points);'],[0,'    return new OpenLayers.Geometry.Polygon([ring]);'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Events.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Event'],[-1,' * Utility functions for event handling.'],[-1,' *\/'],[1,'OpenLayers.Event = {'],[-1,''],[-1,'    \/** '],[-1,'     * Property: observers '],[-1,'     * {Object} A hashtable cache of the event observers. Keyed by'],[-1,'     * element._eventCacheID '],[-1,'     *\/'],[-1,'    observers: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: KEY_SPACE'],[-1,'     * {int}'],[-1,'     *\/'],[-1,'    KEY_SPACE: 32,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constant: KEY_BACKSPACE '],[-1,'     * {int} '],[-1,'     *\/'],[-1,'    KEY_BACKSPACE: 8,'],[-1,''],[-1,'    \/** '],[-1,'     * Constant: KEY_TAB '],[-1,'     * {int} '],[-1,'     *\/'],[-1,'    KEY_TAB: 9,'],[-1,''],[-1,'    \/** '],[-1,'     * Constant: KEY_RETURN '],[-1,'     * {int} '],[-1,'     *\/'],[-1,'    KEY_RETURN: 13,'],[-1,''],[-1,'    \/** '],[-1,'     * Constant: KEY_ESC '],[-1,'     * {int} '],[-1,'     *\/'],[-1,'    KEY_ESC: 27,'],[-1,''],[-1,'    \/** '],[-1,'     * Constant: KEY_LEFT '],[-1,'     * {int} '],[-1,'     *\/'],[-1,'    KEY_LEFT: 37,'],[-1,''],[-1,'    \/** '],[-1,'     * Constant: KEY_UP '],[-1,'     * {int} '],[-1,'     *\/'],[-1,'    KEY_UP: 38,'],[-1,''],[-1,'    \/** '],[-1,'     * Constant: KEY_RIGHT '],[-1,'     * {int} '],[-1,'     *\/'],[-1,'    KEY_RIGHT: 39,'],[-1,''],[-1,'    \/** '],[-1,'     * Constant: KEY_DOWN '],[-1,'     * {int} '],[-1,'     *\/'],[-1,'    KEY_DOWN: 40,'],[-1,''],[-1,'    \/** '],[-1,'     * Constant: KEY_DELETE '],[-1,'     * {int} '],[-1,'     *\/'],[-1,'    KEY_DELETE: 46,'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: element'],[-1,'     * Cross browser event element detection.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * event - {Event} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} The element that caused the event '],[-1,'     *\/'],[-1,'    element: function(event) {'],[0,'        return event.target || event.srcElement;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: isSingleTouch'],[-1,'     * Determine whether event was caused by a single touch'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    isSingleTouch: function(event) {'],[0,'        return event.touches &amp;&amp; event.touches.length == 1;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: isMultiTouch'],[-1,'     * Determine whether event was caused by a multi touch'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    isMultiTouch: function(event) {'],[0,'        return event.touches &amp;&amp; event.touches.length &gt; 1;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: isLeftClick'],[-1,'     * Determine whether event was caused by a left click. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Event} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    isLeftClick: function(event) {'],[0,'        return (((event.which) &amp;&amp; (event.which == 1)) ||'],[-1,'                ((event.button) &amp;&amp; (event.button == 1)));'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: isRightClick'],[-1,'     * Determine whether event was caused by a right mouse click. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Event} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'     isRightClick: function(event) {'],[0,'        return (((event.which) &amp;&amp; (event.which == 3)) ||'],[-1,'                ((event.button) &amp;&amp; (event.button == 2)));'],[-1,'    },'],[-1,'     '],[-1,'    \/**'],[-1,'     * Method: stop'],[-1,'     * Stops an event from propagating. '],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * event - {Event} '],[-1,'     * allowDefault - {Boolean} If true, we stop the event chain but '],[-1,'     *     still allow the default browser behaviour (text selection,'],[-1,'     *     radio-button clicking, etc).  Default is false.'],[-1,'     *\/'],[-1,'    stop: function(event, allowDefault) {'],[-1,'        '],[0,'        if (!allowDefault) { '],[0,'            OpenLayers.Event.preventDefault(event);'],[-1,'        }'],[-1,'                '],[0,'        if (event.stopPropagation) {'],[0,'            event.stopPropagation();'],[-1,'        } else {'],[0,'            event.cancelBubble = true;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: preventDefault'],[-1,'     * Cancels the event if it is cancelable, without stopping further'],[-1,'     * propagation of the event.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Event}'],[-1,'     *\/'],[-1,'    preventDefault: function(event) {'],[0,'        if (event.preventDefault) {'],[0,'            event.preventDefault();'],[-1,'        } else {'],[0,'            event.returnValue = false;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: findElement'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * event - {Event} '],[-1,'     * tagName - {String} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} The first node with the given tagName, starting from the'],[-1,'     * node the event was triggered on and traversing the DOM upwards'],[-1,'     *\/'],[-1,'    findElement: function(event, tagName) {'],[0,'        var element = OpenLayers.Event.element(event);'],[0,'        while (element.parentNode &amp;&amp; (!element.tagName ||'],[-1,'              (element.tagName.toUpperCase() != tagName.toUpperCase()))){'],[0,'            element = element.parentNode;'],[-1,'        }'],[0,'        return element;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: observe'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * elementParam - {DOMElement || String} '],[-1,'     * name - {String} '],[-1,'     * observer - {function} '],[-1,'     * useCapture - {Boolean} '],[-1,'     *\/'],[-1,'    observe: function(elementParam, name, observer, useCapture) {'],[1,'        var element = OpenLayers.Util.getElement(elementParam);'],[1,'        useCapture = useCapture || false;'],[-1,''],[1,'        if (name == \'keypress\' &amp;&amp;'],[-1,'           (navigator.appVersion.match(\/Konqueror|Safari|KHTML\/)'],[-1,'           || element.attachEvent)) {'],[0,'            name = \'keydown\';'],[-1,'        }'],[-1,''],[-1,'        \/\/if observers cache has not yet been created, create it'],[1,'        if (!this.observers) {'],[1,'            this.observers = {};'],[-1,'        }'],[-1,''],[-1,'        \/\/if not already assigned, make a new unique cache ID'],[1,'        if (!element._eventCacheID) {'],[1,'            var idPrefix = \&quot;eventCacheID_\&quot;;'],[1,'            if (element.id) {'],[0,'                idPrefix = element.id + \&quot;_\&quot; + idPrefix;'],[-1,'            }'],[1,'            element._eventCacheID = OpenLayers.Util.createUniqueID(idPrefix);'],[-1,'        }'],[-1,''],[1,'        var cacheID = element._eventCacheID;'],[-1,''],[-1,'        \/\/if there is not yet a hash entry for this element, add one'],[1,'        if (!this.observers[cacheID]) {'],[1,'            this.observers[cacheID] = [];'],[-1,'        }'],[-1,''],[-1,'        \/\/add a new observer to this element\'s list'],[1,'        this.observers[cacheID].push({'],[-1,'            \'element\': element,'],[-1,'            \'name\': name,'],[-1,'            \'observer\': observer,'],[-1,'            \'useCapture\': useCapture'],[-1,'        });'],[-1,''],[-1,'        \/\/add the actual browser event listener'],[1,'        if (element.addEventListener) {'],[0,'            element.addEventListener(name, observer, useCapture);'],[1,'        } else if (element.attachEvent) {'],[0,'            element.attachEvent(\'on\' + name, observer);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: stopObservingElement'],[-1,'     * Given the id of an element to stop observing, cycle through the '],[-1,'     *   element\'s cached observers, calling stopObserving on each one, '],[-1,'     *   skipping those entries which can no longer be removed.'],[-1,'     * '],[-1,'     * parameters:'],[-1,'     * elementParam - {DOMElement || String} '],[-1,'     *\/'],[-1,'    stopObservingElement: function(elementParam) {'],[0,'        var element = OpenLayers.Util.getElement(elementParam);'],[0,'        var cacheID = element._eventCacheID;'],[-1,''],[0,'        this._removeElementObservers(OpenLayers.Event.observers[cacheID]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: _removeElementObservers'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * elementObservers - {Array(Object)} Array of (element, name, '],[-1,'     *                                         observer, usecapture) objects, '],[-1,'     *                                         taken directly from hashtable'],[-1,'     *\/'],[-1,'    _removeElementObservers: function(elementObservers) {'],[0,'        if (elementObservers) {'],[0,'            for(var i = elementObservers.length-1; i &gt;= 0; i--) {'],[0,'                var entry = elementObservers[i];'],[0,'                OpenLayers.Event.stopObserving.apply(this, ['],[-1,'                    entry.element, entry.name, entry.observer, entry.useCapture'],[-1,'                ]);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: stopObserving'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * elementParam - {DOMElement || String} '],[-1,'     * name - {String} '],[-1,'     * observer - {function} '],[-1,'     * useCapture - {Boolean} '],[-1,'     *  '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the event observer was removed'],[-1,'     *\/'],[-1,'    stopObserving: function(elementParam, name, observer, useCapture) {'],[0,'        useCapture = useCapture || false;'],[-1,'    '],[0,'        var element = OpenLayers.Util.getElement(elementParam);'],[0,'        var cacheID = element._eventCacheID;'],[-1,''],[0,'        if (name == \'keypress\') {'],[0,'            if ( navigator.appVersion.match(\/Konqueror|Safari|KHTML\/) || '],[-1,'                 element.detachEvent) {'],[0,'              name = \'keydown\';'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ find element\'s entry in this.observers cache and remove it'],[0,'        var foundEntry = false;'],[0,'        var elementObservers = OpenLayers.Event.observers[cacheID];'],[0,'        if (elementObservers) {'],[-1,'    '],[-1,'            \/\/ find the specific event type in the element\'s list'],[0,'            var i=0;'],[0,'            while(!foundEntry &amp;&amp; i &lt; elementObservers.length) {'],[0,'                var cacheEntry = elementObservers[i];'],[-1,'    '],[0,'                if ((cacheEntry.name == name) &amp;&amp;'],[-1,'                    (cacheEntry.observer == observer) &amp;&amp;'],[-1,'                    (cacheEntry.useCapture == useCapture)) {'],[-1,'    '],[0,'                    elementObservers.splice(i, 1);'],[0,'                    if (elementObservers.length == 0) {'],[0,'                        delete OpenLayers.Event.observers[cacheID];'],[-1,'                    }'],[0,'                    foundEntry = true;'],[0,'                    break; '],[-1,'                }'],[0,'                i++;           '],[-1,'            }'],[-1,'        }'],[-1,'    '],[-1,'        \/\/actually remove the event listener from browser'],[0,'        if (foundEntry) {'],[0,'            if (element.removeEventListener) {'],[0,'                element.removeEventListener(name, observer, useCapture);'],[0,'            } else if (element &amp;&amp; element.detachEvent) {'],[0,'                element.detachEvent(\'on\' + name, observer);'],[-1,'            }'],[-1,'        }'],[0,'        return foundEntry;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: unloadCache'],[-1,'     * Cycle through all the element entries in the events cache and call'],[-1,'     *   stopObservingElement on each. '],[-1,'     *\/'],[-1,'    unloadCache: function() {'],[-1,'        \/\/ check for OpenLayers.Event before checking for observers, because'],[-1,'        \/\/ OpenLayers.Event may be undefined in IE if no map instance was'],[-1,'        \/\/ created'],[0,'        if (OpenLayers.Event &amp;&amp; OpenLayers.Event.observers) {'],[0,'            for (var cacheID in OpenLayers.Event.observers) {'],[0,'                var elementObservers = OpenLayers.Event.observers[cacheID];'],[0,'                OpenLayers.Event._removeElementObservers.apply(this, '],[-1,'                                                           [elementObservers]);'],[-1,'            }'],[0,'            OpenLayers.Event.observers = false;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Event\&quot;'],[-1,'};'],[-1,''],[-1,'\/* prevent memory leaks in IE *\/'],[1,'OpenLayers.Event.observe(window, \'unload\', OpenLayers.Event.unloadCache, false);'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Events'],[-1,' *\/'],[1,'OpenLayers.Events = OpenLayers.Class({'],[-1,''],[-1,'    \/** '],[-1,'     * Constant: BROWSER_EVENTS'],[-1,'     * {Array(String)} supported events '],[-1,'     *\/'],[-1,'    BROWSER_EVENTS: ['],[-1,'        \&quot;mouseover\&quot;, \&quot;mouseout\&quot;,'],[-1,'        \&quot;mousedown\&quot;, \&quot;mouseup\&quot;, \&quot;mousemove\&quot;, '],[-1,'        \&quot;click\&quot;, \&quot;dblclick\&quot;, \&quot;rightclick\&quot;, \&quot;dblrightclick\&quot;,'],[-1,'        \&quot;resize\&quot;, \&quot;focus\&quot;, \&quot;blur\&quot;,'],[-1,'        \&quot;touchstart\&quot;, \&quot;touchmove\&quot;, \&quot;touchend\&quot;,'],[-1,'        \&quot;keydown\&quot;'],[-1,'    ],'],[-1,''],[-1,'    \/** '],[-1,'     * Property: listeners '],[-1,'     * {Object} Hashtable of Array(Function): events listener functions  '],[-1,'     *\/'],[-1,'    listeners: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: object '],[-1,'     * {Object}  the code object issuing application events '],[-1,'     *\/'],[-1,'    object: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: element '],[-1,'     * {DOMElement}  the DOM element receiving browser events '],[-1,'     *\/'],[-1,'    element: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: eventHandler '],[-1,'     * {Function}  bound event handler attached to elements '],[-1,'     *\/'],[-1,'    eventHandler: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: fallThrough '],[-1,'     * {Boolean} '],[-1,'     *\/'],[-1,'    fallThrough: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: includeXY'],[-1,'     * {Boolean} Should the .xy property automatically be created for browser'],[-1,'     *    mouse events? In general, this should be false. If it is true, then'],[-1,'     *    mouse events will automatically generate a \'.xy\' property on the '],[-1,'     *    event object that is passed. (Prior to OpenLayers 2.7, this was true'],[-1,'     *    by default.) Otherwise, you can call the getMousePosition on the'],[-1,'     *    relevant events handler on the object available via the \'evt.object\''],[-1,'     *    property of the evt object. So, for most events, you can call:'],[-1,'     *    function named(evt) { '],[-1,'     *        this.xy = this.object.events.getMousePosition(evt) '],[-1,'     *    } '],[-1,'     *'],[-1,'     *    This option typically defaults to false for performance reasons:'],[-1,'     *    when creating an events object whose primary purpose is to manage'],[-1,'     *    relatively positioned mouse events within a div, it may make'],[-1,'     *    sense to set it to true.'],[-1,'     *'],[-1,'     *    This option is also used to control whether the events object caches'],[-1,'     *    offsets. If this is false, it will not: the reason for this is that'],[-1,'     *    it is only expected to be called many times if the includeXY property'],[-1,'     *    is set to true. If you set this to true, you are expected to clear '],[-1,'     *    the offset cache manually (using this.clearMouseCache()) if:'],[-1,'     *        the border of the element changes'],[-1,'     *        the location of the element in the page changes'],[-1,'    *\/'],[-1,'    includeXY: false,      '],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: extensions'],[-1,'     * {Object} Event extensions registered with this instance. Keys are'],[-1,'     *     event types, values are {OpenLayers.Events.*} extension instances or'],[-1,'     *     {Boolean} for events that an instantiated extension provides in'],[-1,'     *     addition to the one it was created for.'],[-1,'     *'],[-1,'     * Extensions create an event in addition to browser events, which usually'],[-1,'     * fires when a sequence of browser events is completed. Extensions are'],[-1,'     * automatically instantiated when a listener is registered for an event'],[-1,'     * provided by an extension.'],[-1,'     *'],[-1,'     * Extensions are created in the &lt;OpenLayers.Events&gt; namespace using'],[-1,'     * &lt;OpenLayers.Class&gt;, and named after the event they provide.'],[-1,'     * The constructor receives the target &lt;OpenLayers.Events&gt; instance as'],[-1,'     * argument. Extensions that need to capture browser events before they'],[-1,'     * propagate can register their listeners events using &lt;register&gt;, with'],[-1,'     * {extension: true} as 4th argument.'],[-1,'     *'],[-1,'     * If an extension creates more than one event, an alias for each event'],[-1,'     * type should be created and reference the same class. The constructor'],[-1,'     * should set a reference in the target\'s extensions registry to itself.'],[-1,'     *'],[-1,'     * Below is a minimal extension that provides the \&quot;foostart\&quot; and \&quot;fooend\&quot;'],[-1,'     * event types, which replace the native \&quot;click\&quot; event type if clicked on'],[-1,'     * an element with the css class \&quot;foo\&quot;:'],[-1,'     *'],[-1,'     * (code)'],[-1,'     *   OpenLayers.Events.foostart = OpenLayers.Class({'],[-1,'     *       initialize: function(target) {'],[-1,'     *           this.target = target;'],[-1,'     *           this.target.register(\&quot;click\&quot;, this, this.doStuff, {extension: true});'],[-1,'     *           \/\/ only required if extension provides more than one event type'],[-1,'     *           this.target.extensions[\&quot;foostart\&quot;] = true;'],[-1,'     *           this.target.extensions[\&quot;fooend\&quot;] = true;'],[-1,'     *       },'],[-1,'     *       destroy: function() {'],[-1,'     *           var target = this.target;'],[-1,'     *           target.unregister(\&quot;click\&quot;, this, this.doStuff);'],[-1,'     *           delete this.target;'],[-1,'     *           \/\/ only required if extension provides more than one event type'],[-1,'     *           delete target.extensions[\&quot;foostart\&quot;];'],[-1,'     *           delete target.extensions[\&quot;fooend\&quot;];'],[-1,'     *       },'],[-1,'     *       doStuff: function(evt) {'],[-1,'     *           var propagate = true;'],[-1,'     *           if (OpenLayers.Event.element(evt).className === \&quot;foo\&quot;) {'],[-1,'     *               propagate = false;'],[-1,'     *               var target = this.target;'],[-1,'     *               target.triggerEvent(\&quot;foostart\&quot;);'],[-1,'     *               window.setTimeout(function() {'],[-1,'     *                   target.triggerEvent(\&quot;fooend\&quot;);'],[-1,'     *               }, 1000);'],[-1,'     *           }'],[-1,'     *           return propagate;'],[-1,'     *       }'],[-1,'     *   });'],[-1,'     *   \/\/ only required if extension provides more than one event type'],[-1,'     *   OpenLayers.Events.fooend = OpenLayers.Events.foostart;'],[-1,'     * (end)'],[-1,'     * '],[-1,'     *\/'],[-1,'    extensions: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: extensionCount'],[-1,'     * {Object} Keys are event types (like in &lt;listeners&gt;), values are the'],[-1,'     *     number of extension listeners for each event type.'],[-1,'     *\/'],[-1,'    extensionCount: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clearMouseListener'],[-1,'     * A version of &lt;clearMouseCache&gt; that is bound to this instance so that'],[-1,'     *     it can be used with &lt;OpenLayers.Event.observe&gt; and'],[-1,'     *     &lt;OpenLayers.Event.stopObserving&gt;.'],[-1,'     *\/'],[-1,'    clearMouseListener: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Events'],[-1,'     * Construct an OpenLayers.Events object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * object - {Object} The js object to which this Events object  is being added'],[-1,'     * element - {DOMElement} A dom element to respond to browser events'],[-1,'     * eventTypes - {Array(String)} Deprecated.  Array of custom application'],[-1,'     *     events.  A listener may be registered for any named event, regardless'],[-1,'     *     of the values provided here.'],[-1,'     * fallThrough - {Boolean} Allow events to fall through after these have'],[-1,'     *                         been handled?'],[-1,'     * options - {Object} Options for the events object.'],[-1,'     *\/'],[-1,'    initialize: function (object, element, eventTypes, fallThrough, options) {'],[1,'        OpenLayers.Util.extend(this, options);'],[1,'        this.object     = object;'],[1,'        this.fallThrough = fallThrough;'],[1,'        this.listeners  = {};'],[1,'        this.extensions = {};'],[1,'        this.extensionCount = {};'],[-1,'        '],[-1,'        \/\/ if a dom element is specified, add a listeners list '],[-1,'        \/\/ for browser events on the element and register them'],[1,'        if (element != null) {'],[0,'            this.attachToElement(element);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     *\/'],[-1,'    destroy: function () {'],[0,'        for (var e in this.extensions) {'],[0,'            if (typeof this.extensions[e] !== \&quot;boolean\&quot;) {'],[0,'                this.extensions[e].destroy();'],[-1,'            }'],[-1,'        }'],[0,'        this.extensions = null;'],[0,'        if (this.element) {'],[0,'            OpenLayers.Event.stopObservingElement(this.element);'],[0,'            if(this.element.hasScrollEvent) {'],[0,'                OpenLayers.Event.stopObserving('],[-1,'                    window, \&quot;scroll\&quot;, this.clearMouseListener'],[-1,'                );'],[-1,'            }'],[-1,'        }'],[0,'        this.element = null;'],[-1,''],[0,'        this.listeners = null;'],[0,'        this.object = null;'],[0,'        this.fallThrough = null;'],[0,'        this.eventHandler = null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: addEventType'],[-1,'     * Deprecated.  Any event can be triggered without adding it first.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * eventName - {String}'],[-1,'     *\/'],[-1,'    addEventType: function(eventName) {'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: attachToElement'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * element - {HTMLDOMElement} a DOM element to attach browser events to'],[-1,'     *\/'],[-1,'    attachToElement: function (element) {'],[0,'        if (this.element) {'],[0,'            OpenLayers.Event.stopObservingElement(this.element);'],[-1,'        } else {'],[-1,'            \/\/ keep a bound copy of handleBrowserEvent() so that we can'],[-1,'            \/\/ pass the same function to both Event.observe() and .stopObserving()'],[0,'            this.eventHandler = OpenLayers.Function.bindAsEventListener('],[-1,'                this.handleBrowserEvent, this'],[-1,'            );'],[-1,'            '],[-1,'            \/\/ to be used with observe and stopObserving'],[0,'            this.clearMouseListener = OpenLayers.Function.bind('],[-1,'                this.clearMouseCache, this'],[-1,'            );'],[-1,'        }'],[0,'        this.element = element;'],[0,'        for (var i = 0, len = this.BROWSER_EVENTS.length; i &lt; len; i++) {'],[-1,'            \/\/ register the event cross-browser'],[0,'            OpenLayers.Event.observe('],[-1,'                element, this.BROWSER_EVENTS[i], this.eventHandler'],[-1,'            );'],[-1,'        }'],[-1,'        \/\/ disable dragstart in IE so that mousedown\/move\/up works normally'],[0,'        OpenLayers.Event.observe(element, \&quot;dragstart\&quot;, OpenLayers.Event.stop);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: on'],[-1,'     * Convenience method for registering listeners with a common scope.'],[-1,'     *     Internally, this method calls &lt;register&gt; as shown in the examples'],[-1,'     *     below.'],[-1,'     *'],[-1,'     * Example use:'],[-1,'     * (code)'],[-1,'     * \/\/ register a single listener for the \&quot;loadstart\&quot; event'],[-1,'     * events.on({\&quot;loadstart\&quot;: loadStartListener});'],[-1,'     *'],[-1,'     * \/\/ this is equivalent to the following'],[-1,'     * events.register(\&quot;loadstart\&quot;, undefined, loadStartListener);'],[-1,'     *'],[-1,'     * \/\/ register multiple listeners to be called with the same `this` object'],[-1,'     * events.on({'],[-1,'     *     \&quot;loadstart\&quot;: loadStartListener,'],[-1,'     *     \&quot;loadend\&quot;: loadEndListener,'],[-1,'     *     scope: object'],[-1,'     * });'],[-1,'     *'],[-1,'     * \/\/ this is equivalent to the following'],[-1,'     * events.register(\&quot;loadstart\&quot;, object, loadStartListener);'],[-1,'     * events.register(\&quot;loadend\&quot;, object, loadEndListener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     *  object - {Object}     '],[-1,'     *\/'],[-1,'    on: function(object) {'],[0,'        for(var type in object) {'],[0,'            if(type != \&quot;scope\&quot; &amp;&amp; object.hasOwnProperty(type)) {'],[0,'                this.register(type, object.scope, object[type]);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: register'],[-1,'     * Register an event on the events object.'],[-1,'     *'],[-1,'     * When the event is triggered, the \'func\' function will be called, in the'],[-1,'     * context of \'obj\'. Imagine we were to register an event, specifying an '],[-1,'     * OpenLayers.Bounds Object as \'obj\'. When the event is triggered, the '],[-1,'     * context in the callback function will be our Bounds object. This means'],[-1,'     * that within our callback function, we can access the properties and '],[-1,'     * methods of the Bounds object through the \&quot;this\&quot; variable. So our '],[-1,'     * callback could execute something like: '],[-1,'     * :    leftStr = \&quot;Left: \&quot; + this.left;'],[-1,'     *   '],[-1,'     *                   or'],[-1,'     *  '],[-1,'     * :    centerStr = \&quot;Center: \&quot; + this.getCenterLonLat();'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * type - {String} Name of the event to register'],[-1,'     * obj - {Object} The object to bind the context to for the callback#.'],[-1,'     *     If no object is specified, default is the Events\'s \'object\' property.'],[-1,'     * func - {Function} The callback function. If no callback is '],[-1,'     *     specified, this function does nothing.'],[-1,'     * priority - {Boolean|Object} If true, adds the new listener to the'],[-1,'     *     *front* of the events queue instead of to the end.'],[-1,'     *'],[-1,'     * Valid options for priority:'],[-1,'     * extension - {Boolean} If true, then the event will be registered as'],[-1,'     *     extension event. Extension events are handled before all other'],[-1,'     *     events.'],[-1,'     *\/'],[-1,'    register: function (type, obj, func, priority) {'],[0,'        if (type in OpenLayers.Events &amp;&amp; !this.extensions[type]) {'],[0,'            this.extensions[type] = new OpenLayers.Events[type](this);'],[-1,'        }'],[0,'        if (func != null) {'],[0,'            if (obj == null)  {'],[0,'                obj = this.object;'],[-1,'            }'],[0,'            var listeners = this.listeners[type];'],[0,'            if (!listeners) {'],[0,'                listeners = [];'],[0,'                this.listeners[type] = listeners;'],[0,'                this.extensionCount[type] = 0;'],[-1,'            }'],[0,'            var listener = {obj: obj, func: func};'],[0,'            if (priority) {'],[0,'                listeners.splice(this.extensionCount[type], 0, listener);'],[0,'                if (typeof priority === \&quot;object\&quot; &amp;&amp; priority.extension) {'],[0,'                    this.extensionCount[type]++;'],[-1,'                }'],[-1,'            } else {'],[0,'                listeners.push(listener);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: registerPriority'],[-1,'     * Same as register() but adds the new listener to the *front* of the'],[-1,'     *     events queue instead of to the end.'],[-1,'     *    '],[-1,'     *     TODO: get rid of this in 3.0 - Decide whether listeners should be '],[-1,'     *     called in the order they were registered or in reverse order.'],[-1,'     *'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * type - {String} Name of the event to register'],[-1,'     * obj - {Object} The object to bind the context to for the callback#.'],[-1,'     *                If no object is specified, default is the Events\'s '],[-1,'     *                \'object\' property.'],[-1,'     * func - {Function} The callback function. If no callback is '],[-1,'     *                   specified, this function does nothing.'],[-1,'     *\/'],[-1,'    registerPriority: function (type, obj, func) {'],[0,'        this.register(type, obj, func, true);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: un'],[-1,'     * Convenience method for unregistering listeners with a common scope.'],[-1,'     *     Internally, this method calls &lt;unregister&gt; as shown in the examples'],[-1,'     *     below.'],[-1,'     *'],[-1,'     * Example use:'],[-1,'     * (code)'],[-1,'     * \/\/ unregister a single listener for the \&quot;loadstart\&quot; event'],[-1,'     * events.un({\&quot;loadstart\&quot;: loadStartListener});'],[-1,'     *'],[-1,'     * \/\/ this is equivalent to the following'],[-1,'     * events.unregister(\&quot;loadstart\&quot;, undefined, loadStartListener);'],[-1,'     *'],[-1,'     * \/\/ unregister multiple listeners with the same `this` object'],[-1,'     * events.un({'],[-1,'     *     \&quot;loadstart\&quot;: loadStartListener,'],[-1,'     *     \&quot;loadend\&quot;: loadEndListener,'],[-1,'     *     scope: object'],[-1,'     * });'],[-1,'     *'],[-1,'     * \/\/ this is equivalent to the following'],[-1,'     * events.unregister(\&quot;loadstart\&quot;, object, loadStartListener);'],[-1,'     * events.unregister(\&quot;loadend\&quot;, object, loadEndListener);'],[-1,'     * (end)'],[-1,'     *\/'],[-1,'    un: function(object) {'],[0,'        for(var type in object) {'],[0,'            if(type != \&quot;scope\&quot; &amp;&amp; object.hasOwnProperty(type)) {'],[0,'                this.unregister(type, object.scope, object[type]);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: unregister'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * type - {String} '],[-1,'     * obj - {Object} If none specified, defaults to this.object'],[-1,'     * func - {Function} '],[-1,'     *\/'],[-1,'    unregister: function (type, obj, func) {'],[0,'        if (obj == null)  {'],[0,'            obj = this.object;'],[-1,'        }'],[0,'        var listeners = this.listeners[type];'],[0,'        if (listeners != null) {'],[0,'            for (var i=0, len=listeners.length; i&lt;len; i++) {'],[0,'                if (listeners[i].obj == obj &amp;&amp; listeners[i].func == func) {'],[0,'                    listeners.splice(i, 1);'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: remove'],[-1,'     * Remove all listeners for a given event type. If type is not registered,'],[-1,'     *     does nothing.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * type - {String} '],[-1,'     *\/'],[-1,'    remove: function(type) {'],[0,'        if (this.listeners[type] != null) {'],[0,'            this.listeners[type] = [];'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: triggerEvent'],[-1,'     * Trigger a specified registered event.  '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * type - {String} '],[-1,'     * evt - {Event || Object} will be passed to the listeners.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The last listener return.  If a listener returns false, the'],[-1,'     *     chain of listeners will stop getting called.'],[-1,'     *\/'],[-1,'    triggerEvent: function (type, evt) {'],[0,'        var listeners = this.listeners[type];'],[-1,''],[-1,'        \/\/ fast path'],[0,'        if(!listeners || listeners.length == 0) {'],[0,'            return undefined;'],[-1,'        }'],[-1,''],[-1,'        \/\/ prep evt object with object &amp; div references'],[0,'        if (evt == null) {'],[0,'            evt = {};'],[-1,'        }'],[0,'        evt.object = this.object;'],[0,'        evt.element = this.element;'],[0,'        if(!evt.type) {'],[0,'            evt.type = type;'],[-1,'        }'],[-1,'    '],[-1,'        \/\/ execute all callbacks registered for specified type'],[-1,'        \/\/ get a clone of the listeners array to'],[-1,'        \/\/ allow for splicing during callbacks'],[0,'        listeners = listeners.slice();'],[0,'        var continueChain;'],[0,'        for (var i=0, len=listeners.length; i&lt;len; i++) {'],[0,'            var callback = listeners[i];'],[-1,'            \/\/ bind the context to callback.obj'],[0,'            continueChain = callback.func.apply(callback.obj, [evt]);'],[-1,''],[0,'            if ((continueChain != undefined) &amp;&amp; (continueChain == false)) {'],[-1,'                \/\/ if callback returns false, execute no more callbacks.'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[-1,'        \/\/ don\'t fall through to other DOM elements'],[0,'        if (!this.fallThrough) {           '],[0,'            OpenLayers.Event.stop(evt, true);'],[-1,'        }'],[0,'        return continueChain;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleBrowserEvent'],[-1,'     * Basically just a wrapper to the triggerEvent() function, but takes '],[-1,'     *     care to set a property \'xy\' on the event with the current mouse '],[-1,'     *     position.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    handleBrowserEvent: function (evt) {'],[0,'        var type = evt.type, listeners = this.listeners[type];'],[0,'        if(!listeners || listeners.length == 0) {'],[-1,'            \/\/ noone\'s listening, bail out'],[0,'            return;'],[-1,'        }'],[-1,'        \/\/ add clientX &amp; clientY to all events - corresponds to average x, y'],[0,'        var touches = evt.touches;'],[0,'        if (touches &amp;&amp; touches[0]) {'],[0,'            var x = 0;'],[0,'            var y = 0;'],[0,'            var num = touches.length;'],[0,'            var touch;'],[0,'            for (var i=0; i&lt;num; ++i) {'],[0,'                touch = this.getTouchClientXY(touches[i]);'],[0,'                x += touch.clientX;'],[0,'                y += touch.clientY;'],[-1,'            }'],[0,'            evt.clientX = x \/ num;'],[0,'            evt.clientY = y \/ num;'],[-1,'        }'],[0,'        if (this.includeXY) {'],[0,'            evt.xy = this.getMousePosition(evt);'],[-1,'        } '],[0,'        this.triggerEvent(type, evt);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getTouchClientXY'],[-1,'     * WebKit has a few bugs for clientX\/clientY. This method detects them'],[-1,'     * and calculate the correct values.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Touch} a Touch object from a TouchEvent'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} An object with only clientX and clientY properties with the'],[-1,'     * calculated values.'],[-1,'     *\/'],[-1,'    getTouchClientXY: function (evt) {'],[-1,'        \/\/ olMochWin is to override window, used for testing'],[0,'        var win = window.olMockWin || window,'],[-1,'            winPageX = win.pageXOffset,'],[-1,'            winPageY = win.pageYOffset,'],[-1,'            x = evt.clientX,'],[-1,'            y = evt.clientY;'],[-1,'        '],[0,'        if (evt.pageY === 0 &amp;&amp; Math.floor(y) &gt; Math.floor(evt.pageY) ||'],[-1,'            evt.pageX === 0 &amp;&amp; Math.floor(x) &gt; Math.floor(evt.pageX)) {'],[-1,'            \/\/ iOS4 include scroll offset in clientX\/Y'],[0,'            x = x - winPageX;'],[0,'            y = y - winPageY;'],[0,'        } else if (y &lt; (evt.pageY - winPageY) || x &lt; (evt.pageX - winPageX) ) {'],[-1,'            \/\/ Some Android browsers have totally bogus values for clientX\/Y'],[-1,'            \/\/ when scrolling\/zooming a page'],[0,'            x = evt.pageX - winPageX;'],[0,'            y = evt.pageY - winPageY;'],[-1,'        }'],[-1,'        '],[0,'        evt.olClientX = x;'],[0,'        evt.olClientY = y;'],[-1,'        '],[0,'        return {'],[-1,'            clientX: x,'],[-1,'            clientY: y'],[-1,'        };'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clearMouseCache'],[-1,'     * Clear cached data about the mouse position. This should be called any '],[-1,'     *     time the element that events are registered on changes position '],[-1,'     *     within the page.'],[-1,'     *\/'],[-1,'    clearMouseCache: function() { '],[0,'        this.element.scrolls = null;'],[0,'        this.element.lefttop = null;'],[0,'        this.element.offsets = null;'],[-1,'    },      '],[-1,''],[-1,'    \/**'],[-1,'     * Method: getMousePosition'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} The current xy coordinate of the mouse, adjusted'],[-1,'     *                      for offsets'],[-1,'     *\/'],[-1,'    getMousePosition: function (evt) {'],[0,'        if (!this.includeXY) {'],[0,'            this.clearMouseCache();'],[0,'        } else if (!this.element.hasScrollEvent) {'],[0,'            OpenLayers.Event.observe(window, \&quot;scroll\&quot;, this.clearMouseListener);'],[0,'            this.element.hasScrollEvent = true;'],[-1,'        }'],[-1,'        '],[0,'        if (!this.element.scrolls) {'],[0,'            var viewportElement = OpenLayers.Util.getViewportElement();'],[0,'            this.element.scrolls = ['],[-1,'                window.pageXOffset || viewportElement.scrollLeft,'],[-1,'                window.pageYOffset || viewportElement.scrollTop'],[-1,'            ];'],[-1,'        }'],[-1,''],[0,'        if (!this.element.lefttop) {'],[0,'            this.element.lefttop = ['],[-1,'                (document.documentElement.clientLeft || 0),'],[-1,'                (document.documentElement.clientTop  || 0)'],[-1,'            ];'],[-1,'        }'],[-1,'        '],[0,'        if (!this.element.offsets) {'],[0,'            this.element.offsets = OpenLayers.Util.pagePosition(this.element);'],[-1,'        }'],[-1,''],[0,'        return new OpenLayers.Pixel('],[-1,'            (evt.clientX + this.element.scrolls[0]) - this.element.offsets[0]'],[-1,'                         - this.element.lefttop[0], '],[-1,'            (evt.clientY + this.element.scrolls[1]) - this.element.offsets[1]'],[-1,'                         - this.element.lefttop[1]'],[-1,'        ); '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Events\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Request.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Events.js'],[-1,' * @requires OpenLayers\/Request\/XMLHttpRequest.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * TODO: deprecate me'],[-1,' * Use OpenLayers.Request.proxy instead.'],[-1,' *\/'],[1,'OpenLayers.ProxyHost = \&quot;\&quot;;'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Request'],[-1,' * The OpenLayers.Request namespace contains convenience methods for working'],[-1,' *     with XMLHttpRequests.  These methods work with a cross-browser'],[-1,' *     W3C compliant &lt;OpenLayers.Request.XMLHttpRequest&gt; class.'],[-1,' *\/'],[1,'if (!OpenLayers.Request) {'],[-1,'    \/**'],[-1,'     * This allows for OpenLayers\/Request\/XMLHttpRequest.js to be included'],[-1,'     * before or after this script.'],[-1,'     *\/'],[1,'    OpenLayers.Request = {};'],[-1,'}'],[1,'OpenLayers.Util.extend(OpenLayers.Request, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: DEFAULT_CONFIG'],[-1,'     * {Object} Default configuration for all requests.'],[-1,'     *\/'],[-1,'    DEFAULT_CONFIG: {'],[-1,'        method: \&quot;GET\&quot;,'],[-1,'        url: window.location.href,'],[-1,'        async: true,'],[-1,'        user: undefined,'],[-1,'        password: undefined,'],[-1,'        params: null,'],[-1,'        proxy: OpenLayers.ProxyHost,'],[-1,'        headers: {},'],[-1,'        data: null,'],[-1,'        callback: function() {},'],[-1,'        success: null,'],[-1,'        failure: null,'],[-1,'        scope: null'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: URL_SPLIT_REGEX'],[-1,'     *\/'],[-1,'    URL_SPLIT_REGEX: \/([^:]*:)\\\/\\\/([^:]*:?[^@]*@)?([^:\\\/\\?]*):?([^\\\/\\?]*)\/,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} An events object that handles all '],[-1,'     *     events on the {&lt;OpenLayers.Request&gt;} object.'],[-1,'     *'],[-1,'     * All event listeners will receive an event object with three properties:'],[-1,'     * request - {&lt;OpenLayers.Request.XMLHttpRequest&gt;} The request object.'],[-1,'     * config - {Object} The config object sent to the specific request method.'],[-1,'     * requestUrl - {String} The request url.'],[-1,'     * '],[-1,'     * Supported event types:'],[-1,'     * complete - Triggered when we have a response from the request, if a'],[-1,'     *     listener returns false, no further response processing will take'],[-1,'     *     place.'],[-1,'     * success - Triggered when the HTTP response has a success code (200-299).'],[-1,'     * failure - Triggered when the HTTP response does not have a success code.'],[-1,'     *\/'],[-1,'    events: new OpenLayers.Events(this),'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: makeSameOrigin'],[-1,'     * Using the specified proxy, returns a same origin url of the provided url.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * url - {String} An arbitrary url'],[-1,'     * proxy {String|Function} The proxy to use to make the provided url a'],[-1,'     *     same origin url.'],[-1,'     *'],[-1,'     * Returns'],[-1,'     * {String} the same origin url. If no proxy is provided, the returned url'],[-1,'     *     will be the same as the provided url.'],[-1,'     *\/'],[-1,'    makeSameOrigin: function(url, proxy) {'],[0,'        var sameOrigin = url.indexOf(\&quot;http\&quot;) !== 0;'],[0,'        var urlParts = !sameOrigin &amp;&amp; url.match(this.URL_SPLIT_REGEX);'],[0,'        if (urlParts) {'],[0,'            var location = window.location;'],[0,'            sameOrigin ='],[-1,'                urlParts[1] == location.protocol &amp;&amp;'],[-1,'                urlParts[3] == location.hostname;'],[0,'            var uPort = urlParts[4], lPort = location.port;'],[0,'            if (uPort != 80 &amp;&amp; uPort != \&quot;\&quot; || lPort != \&quot;80\&quot; &amp;&amp; lPort != \&quot;\&quot;) {'],[0,'                sameOrigin = sameOrigin &amp;&amp; uPort == lPort;'],[-1,'            }'],[-1,'        }'],[0,'        if (!sameOrigin) {'],[0,'            if (proxy) {'],[0,'                if (typeof proxy == \&quot;function\&quot;) {'],[0,'                    url = proxy(url);'],[-1,'                } else {'],[0,'                    url = proxy + encodeURIComponent(url);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return url;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: issue'],[-1,'     * Create a new XMLHttpRequest object, open it, set any headers, bind'],[-1,'     *     a callback to done state, and send any data.  It is recommended that'],[-1,'     *     you use one &lt;GET&gt;, &lt;POST&gt;, &lt;PUT&gt;, &lt;DELETE&gt;, &lt;OPTIONS&gt;, or &lt;HEAD&gt;.'],[-1,'     *     This method is only documented to provide detail on the configuration'],[-1,'     *     options available to all request methods.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} Object containing properties for configuring the'],[-1,'     *     request.  Allowed configuration properties are described below.'],[-1,'     *     This object is modified and should not be reused.'],[-1,'     *'],[-1,'     * Allowed config properties:'],[-1,'     * method - {String} One of GET, POST, PUT, DELETE, HEAD, or'],[-1,'     *     OPTIONS.  Default is GET.'],[-1,'     * url - {String} URL for the request.'],[-1,'     * async - {Boolean} Open an asynchronous request.  Default is true.'],[-1,'     * user - {String} User for relevant authentication scheme.  Set'],[-1,'     *     to null to clear current user.'],[-1,'     * password - {String} Password for relevant authentication scheme.'],[-1,'     *     Set to null to clear current password.'],[-1,'     * proxy - {String} Optional proxy.  Defaults to'],[-1,'     *     &lt;OpenLayers.ProxyHost&gt;.'],[-1,'     * params - {Object} Any key:value pairs to be appended to the'],[-1,'     *     url as a query string.  Assumes url doesn\'t already include a query'],[-1,'     *     string or hash.  Typically, this is only appropriate for &lt;GET&gt;'],[-1,'     *     requests where the query string will be appended to the url.'],[-1,'     *     Parameter values that are arrays will be'],[-1,'     *     concatenated with a comma (note that this goes against form-encoding)'],[-1,'     *     as is done with &lt;OpenLayers.Util.getParameterString&gt;.'],[-1,'     * headers - {Object} Object with header:value pairs to be set on'],[-1,'     *     the request.'],[-1,'     * data - {String | Document} Optional data to send with the request.'],[-1,'     *     Typically, this is only used with &lt;POST&gt; and &lt;PUT&gt; requests.'],[-1,'     *     Make sure to provide the appropriate \&quot;Content-Type\&quot; header for your'],[-1,'     *     data.  For &lt;POST&gt; and &lt;PUT&gt; requests, the content type defaults to'],[-1,'     *     \&quot;application-xml\&quot;.  If your data is a different content type, or'],[-1,'     *     if you are using a different HTTP method, set the \&quot;Content-Type\&quot;'],[-1,'     *     header to match your data type.'],[-1,'     * callback - {Function} Function to call when request is done.'],[-1,'     *     To determine if the request failed, check request.status (200'],[-1,'     *     indicates success).'],[-1,'     * success - {Function} Optional function to call if request status is in'],[-1,'     *     the 200s.  This will be called in addition to callback above and'],[-1,'     *     would typically only be used as an alternative.'],[-1,'     * failure - {Function} Optional function to call if request status is not'],[-1,'     *     in the 200s.  This will be called in addition to callback above and'],[-1,'     *     would typically only be used as an alternative.'],[-1,'     * scope - {Object} If callback is a public method on some object,'],[-1,'     *     set the scope to that object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {XMLHttpRequest} Request object.  To abort the request before a response'],[-1,'     *     is received, call abort() on the request object.'],[-1,'     *\/'],[-1,'    issue: function(config) {        '],[-1,'        \/\/ apply default config - proxy host may have changed'],[0,'        var defaultConfig = OpenLayers.Util.extend('],[-1,'            this.DEFAULT_CONFIG,'],[-1,'            {proxy: OpenLayers.ProxyHost}'],[-1,'        );'],[0,'        config = config || {};'],[0,'        config.headers = config.headers || {};'],[0,'        config = OpenLayers.Util.applyDefaults(config, defaultConfig);'],[0,'        config.headers = OpenLayers.Util.applyDefaults(config.headers, defaultConfig.headers);'],[-1,'        \/\/ Always set the \&quot;X-Requested-With\&quot; header to signal that this request'],[-1,'        \/\/ was issued through the XHR-object. Since header keys are case '],[-1,'        \/\/ insensitive and we want to allow overriding of the \&quot;X-Requested-With\&quot;'],[-1,'        \/\/ header through the user we cannot use applyDefaults, but have to '],[-1,'        \/\/ check manually whether we were called with a \&quot;X-Requested-With\&quot;'],[-1,'        \/\/ header.'],[0,'        var customRequestedWithHeader = false,'],[-1,'            headerKey;'],[0,'        for(headerKey in config.headers) {'],[0,'            if (config.headers.hasOwnProperty( headerKey )) {'],[0,'                if (headerKey.toLowerCase() === \'x-requested-with\') {'],[0,'                    customRequestedWithHeader = true;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        if (customRequestedWithHeader === false) {'],[-1,'            \/\/ we did not have a custom \&quot;X-Requested-With\&quot; header'],[0,'            config.headers[\'X-Requested-With\'] = \'XMLHttpRequest\';'],[-1,'        }'],[-1,''],[-1,'        \/\/ create request, open, and set headers'],[0,'        var request = new OpenLayers.Request.XMLHttpRequest();'],[0,'        var url = OpenLayers.Util.urlAppend(config.url, '],[-1,'            OpenLayers.Util.getParameterString(config.params || {}));'],[0,'        url = OpenLayers.Request.makeSameOrigin(url, config.proxy);'],[0,'        request.open('],[-1,'            config.method, url, config.async, config.user, config.password'],[-1,'        );'],[0,'        for(var header in config.headers) {'],[0,'            request.setRequestHeader(header, config.headers[header]);'],[-1,'        }'],[-1,''],[0,'        var events = this.events;'],[-1,''],[-1,'        \/\/ we want to execute runCallbacks with \&quot;this\&quot; as the'],[-1,'        \/\/ execution scope'],[0,'        var self = this;'],[-1,'        '],[0,'        request.onreadystatechange = function() {'],[0,'            if(request.readyState == OpenLayers.Request.XMLHttpRequest.DONE) {'],[0,'                var proceed = events.triggerEvent('],[-1,'                    \&quot;complete\&quot;,'],[-1,'                    {request: request, config: config, requestUrl: url}'],[-1,'                );'],[0,'                if(proceed !== false) {'],[0,'                    self.runCallbacks('],[-1,'                        {request: request, config: config, requestUrl: url}'],[-1,'                    );'],[-1,'                }'],[-1,'            }'],[-1,'        };'],[-1,'        '],[-1,'        \/\/ send request (optionally with data) and return'],[-1,'        \/\/ call in a timeout for asynchronous requests so the return is'],[-1,'        \/\/ available before readyState == 4 for cached docs'],[0,'        if(config.async === false) {'],[0,'            request.send(config.data);'],[-1,'        } else {'],[0,'            window.setTimeout(function(){'],[0,'                if (request.readyState !== 0) { \/\/ W3C: 0-UNSENT'],[0,'                    request.send(config.data);'],[-1,'                }'],[-1,'            }, 0);'],[-1,'        }'],[0,'        return request;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: runCallbacks'],[-1,'     * Calls the complete, success and failure callbacks. Application'],[-1,'     *    can listen to the \&quot;complete\&quot; event, have the listener '],[-1,'     *    display a confirm window and always return false, and'],[-1,'     *    execute OpenLayers.Request.runCallbacks if the user'],[-1,'     *    hits \&quot;yes\&quot; in the confirm window.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Hash containing request, config and requestUrl keys'],[-1,'     *\/'],[-1,'    runCallbacks: function(options) {'],[0,'        var request = options.request;'],[0,'        var config = options.config;'],[-1,'        '],[-1,'        \/\/ bind callbacks to readyState 4 (done)'],[0,'        var complete = (config.scope) ?'],[-1,'            OpenLayers.Function.bind(config.callback, config.scope) :'],[-1,'            config.callback;'],[-1,'        '],[-1,'        \/\/ optional success callback'],[0,'        var success;'],[0,'        if(config.success) {'],[0,'            success = (config.scope) ?'],[-1,'                OpenLayers.Function.bind(config.success, config.scope) :'],[-1,'                config.success;'],[-1,'        }'],[-1,''],[-1,'        \/\/ optional failure callback'],[0,'        var failure;'],[0,'        if(config.failure) {'],[0,'            failure = (config.scope) ?'],[-1,'                OpenLayers.Function.bind(config.failure, config.scope) :'],[-1,'                config.failure;'],[-1,'        }'],[-1,''],[0,'        if (OpenLayers.Util.createUrlObject(config.url).protocol == \&quot;file:\&quot; &amp;&amp;'],[-1,'                                                        request.responseText) {'],[0,'            request.status = 200;'],[-1,'        }'],[0,'        complete(request);'],[-1,''],[0,'        if (!request.status || (request.status &gt;= 200 &amp;&amp; request.status &lt; 300)) {'],[0,'            this.events.triggerEvent(\&quot;success\&quot;, options);'],[0,'            if(success) {'],[0,'                success(request);'],[-1,'            }'],[-1,'        }'],[0,'        if(request.status &amp;&amp; (request.status &lt; 200 || request.status &gt;= 300)) {                    '],[0,'            this.events.triggerEvent(\&quot;failure\&quot;, options);'],[0,'            if(failure) {'],[0,'                failure(request);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: GET'],[-1,'     * Send an HTTP GET request.  Additional configuration properties are'],[-1,'     *     documented in the &lt;issue&gt; method, with the method property set'],[-1,'     *     to GET.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} Object with properties for configuring the request.'],[-1,'     *     See the &lt;issue&gt; method for documentation of allowed properties.'],[-1,'     *     This object is modified and should not be reused.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {XMLHttpRequest} Request object.'],[-1,'     *\/'],[-1,'    GET: function(config) {'],[0,'        config = OpenLayers.Util.extend(config, {method: \&quot;GET\&quot;});'],[0,'        return OpenLayers.Request.issue(config);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: POST'],[-1,'     * Send a POST request.  Additional configuration properties are'],[-1,'     *     documented in the &lt;issue&gt; method, with the method property set'],[-1,'     *     to POST and \&quot;Content-Type\&quot; header set to \&quot;application\/xml\&quot;.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} Object with properties for configuring the request.'],[-1,'     *     See the &lt;issue&gt; method for documentation of allowed properties.  The'],[-1,'     *     default \&quot;Content-Type\&quot; header will be set to \&quot;application-xml\&quot; if'],[-1,'     *     none is provided.  This object is modified and should not be reused.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {XMLHttpRequest} Request object.'],[-1,'     *\/'],[-1,'    POST: function(config) {'],[0,'        config = OpenLayers.Util.extend(config, {method: \&quot;POST\&quot;});'],[-1,'        \/\/ set content type to application\/xml if it isn\'t already set'],[0,'        config.headers = config.headers ? config.headers : {};'],[0,'        if(!(\&quot;CONTENT-TYPE\&quot; in OpenLayers.Util.upperCaseObject(config.headers))) {'],[0,'            config.headers[\&quot;Content-Type\&quot;] = \&quot;application\/xml\&quot;;'],[-1,'        }'],[0,'        return OpenLayers.Request.issue(config);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: PUT'],[-1,'     * Send an HTTP PUT request.  Additional configuration properties are'],[-1,'     *     documented in the &lt;issue&gt; method, with the method property set'],[-1,'     *     to PUT and \&quot;Content-Type\&quot; header set to \&quot;application\/xml\&quot;.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} Object with properties for configuring the request.'],[-1,'     *     See the &lt;issue&gt; method for documentation of allowed properties.  The'],[-1,'     *     default \&quot;Content-Type\&quot; header will be set to \&quot;application-xml\&quot; if'],[-1,'     *     none is provided.  This object is modified and should not be reused.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {XMLHttpRequest} Request object.'],[-1,'     *\/'],[-1,'    PUT: function(config) {'],[0,'        config = OpenLayers.Util.extend(config, {method: \&quot;PUT\&quot;});'],[-1,'        \/\/ set content type to application\/xml if it isn\'t already set'],[0,'        config.headers = config.headers ? config.headers : {};'],[0,'        if(!(\&quot;CONTENT-TYPE\&quot; in OpenLayers.Util.upperCaseObject(config.headers))) {'],[0,'            config.headers[\&quot;Content-Type\&quot;] = \&quot;application\/xml\&quot;;'],[-1,'        }'],[0,'        return OpenLayers.Request.issue(config);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: DELETE'],[-1,'     * Send an HTTP DELETE request.  Additional configuration properties are'],[-1,'     *     documented in the &lt;issue&gt; method, with the method property set'],[-1,'     *     to DELETE.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} Object with properties for configuring the request.'],[-1,'     *     See the &lt;issue&gt; method for documentation of allowed properties.'],[-1,'     *     This object is modified and should not be reused.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {XMLHttpRequest} Request object.'],[-1,'     *\/'],[-1,'    DELETE: function(config) {'],[0,'        config = OpenLayers.Util.extend(config, {method: \&quot;DELETE\&quot;});'],[0,'        return OpenLayers.Request.issue(config);'],[-1,'    },'],[-1,'  '],[-1,'    \/**'],[-1,'     * APIMethod: HEAD'],[-1,'     * Send an HTTP HEAD request.  Additional configuration properties are'],[-1,'     *     documented in the &lt;issue&gt; method, with the method property set'],[-1,'     *     to HEAD.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} Object with properties for configuring the request.'],[-1,'     *     See the &lt;issue&gt; method for documentation of allowed properties.'],[-1,'     *     This object is modified and should not be reused.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {XMLHttpRequest} Request object.'],[-1,'     *\/'],[-1,'    HEAD: function(config) {'],[0,'        config = OpenLayers.Util.extend(config, {method: \&quot;HEAD\&quot;});'],[0,'        return OpenLayers.Request.issue(config);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: OPTIONS'],[-1,'     * Send an HTTP OPTIONS request.  Additional configuration properties are'],[-1,'     *     documented in the &lt;issue&gt; method, with the method property set'],[-1,'     *     to OPTIONS.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} Object with properties for configuring the request.'],[-1,'     *     See the &lt;issue&gt; method for documentation of allowed properties.'],[-1,'     *     This object is modified and should not be reused.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {XMLHttpRequest} Request object.'],[-1,'     *\/'],[-1,'    OPTIONS: function(config) {'],[0,'        config = OpenLayers.Util.extend(config, {method: \&quot;OPTIONS\&quot;});'],[0,'        return OpenLayers.Request.issue(config);'],[-1,'    }'],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Request\/XMLHttpRequest.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/\/ XMLHttpRequest.js Copyright (C) 2010 Sergey Ilinsky (http:\/\/www.ilinsky.com)'],[-1,'\/\/'],[-1,'\/\/ Licensed under the Apache License, Version 2.0 (the \&quot;License\&quot;);'],[-1,'\/\/ you may not use this file except in compliance with the License.'],[-1,'\/\/ You may obtain a copy of the License at'],[-1,'\/\/'],[-1,'\/\/   http:\/\/www.apache.org\/licenses\/LICENSE-2.0'],[-1,'\/\/'],[-1,'\/\/ Unless required by applicable law or agreed to in writing, software'],[-1,'\/\/ distributed under the License is distributed on an \&quot;AS IS\&quot; BASIS,'],[-1,'\/\/ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.'],[-1,'\/\/ See the License for the specific language governing permissions and'],[-1,'\/\/ limitations under the License.'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Request.js'],[-1,' *\/'],[-1,''],[1,'(function () {'],[-1,''],[-1,'    \/\/ Save reference to earlier defined object implementation (if any)'],[1,'    var oXMLHttpRequest    = window.XMLHttpRequest;'],[-1,''],[-1,'    \/\/ Define on browser type'],[1,'    var bGecko    = !!window.controllers,'],[-1,'        bIE        = window.document.all &amp;&amp; !window.opera,'],[-1,'        bIE7    = bIE &amp;&amp; window.navigator.userAgent.match(\/MSIE 7.0\/);'],[-1,''],[-1,'    \/\/ Enables \&quot;XMLHttpRequest()\&quot; call next to \&quot;new XMLHttpReques()\&quot;'],[1,'    function fXMLHttpRequest() {'],[0,'        this._object    = oXMLHttpRequest &amp;&amp; !bIE7 ? new oXMLHttpRequest : new window.ActiveXObject(\&quot;Microsoft.XMLHTTP\&quot;);'],[0,'        this._listeners    = [];'],[-1,'    };'],[-1,''],[-1,'    \/\/ Constructor'],[1,'    function cXMLHttpRequest() {'],[0,'        return new fXMLHttpRequest;'],[-1,'    };'],[1,'    cXMLHttpRequest.prototype    = fXMLHttpRequest.prototype;'],[-1,''],[-1,'    \/\/ BUGFIX: Firefox with Firebug installed would break pages if not executed'],[1,'    if (bGecko &amp;&amp; oXMLHttpRequest.wrapped)'],[0,'        cXMLHttpRequest.wrapped    = oXMLHttpRequest.wrapped;'],[-1,''],[-1,'    \/\/ Constants'],[1,'    cXMLHttpRequest.UNSENT                = 0;'],[1,'    cXMLHttpRequest.OPENED                = 1;'],[1,'    cXMLHttpRequest.HEADERS_RECEIVED    = 2;'],[1,'    cXMLHttpRequest.LOADING                = 3;'],[1,'    cXMLHttpRequest.DONE                = 4;'],[-1,''],[-1,'    \/\/ Public Properties'],[1,'    cXMLHttpRequest.prototype.readyState    = cXMLHttpRequest.UNSENT;'],[1,'    cXMLHttpRequest.prototype.responseText    = \'\';'],[1,'    cXMLHttpRequest.prototype.responseXML    = null;'],[1,'    cXMLHttpRequest.prototype.status        = 0;'],[1,'    cXMLHttpRequest.prototype.statusText    = \'\';'],[-1,''],[-1,'    \/\/ Priority proposal'],[1,'    cXMLHttpRequest.prototype.priority        = \&quot;NORMAL\&quot;;'],[-1,''],[-1,'    \/\/ Instance-level Events Handlers'],[1,'    cXMLHttpRequest.prototype.onreadystatechange    = null;'],[-1,''],[-1,'    \/\/ Class-level Events Handlers'],[1,'    cXMLHttpRequest.onreadystatechange    = null;'],[1,'    cXMLHttpRequest.onopen                = null;'],[1,'    cXMLHttpRequest.onsend                = null;'],[1,'    cXMLHttpRequest.onabort                = null;'],[-1,''],[-1,'    \/\/ Public Methods'],[1,'    cXMLHttpRequest.prototype.open    = function(sMethod, sUrl, bAsync, sUser, sPassword) {'],[-1,'        \/\/ Delete headers, required when object is reused'],[0,'        delete this._headers;'],[-1,''],[-1,'        \/\/ When bAsync parameter value is omitted, use true as default'],[0,'        if (arguments.length &lt; 3)'],[0,'            bAsync    = true;'],[-1,''],[-1,'        \/\/ Save async parameter for fixing Gecko bug with missing readystatechange in synchronous requests'],[0,'        this._async        = bAsync;'],[-1,''],[-1,'        \/\/ Set the onreadystatechange handler'],[0,'        var oRequest    = this,'],[-1,'            nState        = this.readyState,'],[-1,'            fOnUnload;'],[-1,''],[-1,'        \/\/ BUGFIX: IE - memory leak on page unload (inter-page leak)'],[0,'        if (bIE &amp;&amp; bAsync) {'],[0,'            fOnUnload = function() {'],[0,'                if (nState != cXMLHttpRequest.DONE) {'],[0,'                    fCleanTransport(oRequest);'],[-1,'                    \/\/ Safe to abort here since onreadystatechange handler removed'],[0,'                    oRequest.abort();'],[-1,'                }'],[-1,'            };'],[0,'            window.attachEvent(\&quot;onunload\&quot;, fOnUnload);'],[-1,'        }'],[-1,''],[-1,'        \/\/ Add method sniffer'],[0,'        if (cXMLHttpRequest.onopen)'],[0,'            cXMLHttpRequest.onopen.apply(this, arguments);'],[-1,''],[0,'        if (arguments.length &gt; 4)'],[0,'            this._object.open(sMethod, sUrl, bAsync, sUser, sPassword);'],[-1,'        else'],[0,'        if (arguments.length &gt; 3)'],[0,'            this._object.open(sMethod, sUrl, bAsync, sUser);'],[-1,'        else'],[0,'            this._object.open(sMethod, sUrl, bAsync);'],[-1,''],[0,'        this.readyState    = cXMLHttpRequest.OPENED;'],[0,'        fReadyStateChange(this);'],[-1,''],[0,'        this._object.onreadystatechange    = function() {'],[0,'            if (bGecko &amp;&amp; !bAsync)'],[0,'                return;'],[-1,''],[-1,'            \/\/ Synchronize state'],[0,'            oRequest.readyState        = oRequest._object.readyState;'],[-1,''],[-1,'            \/\/'],[0,'            fSynchronizeValues(oRequest);'],[-1,''],[-1,'            \/\/ BUGFIX: Firefox fires unnecessary DONE when aborting'],[0,'            if (oRequest._aborted) {'],[-1,'                \/\/ Reset readyState to UNSENT'],[0,'                oRequest.readyState    = cXMLHttpRequest.UNSENT;'],[-1,''],[-1,'                \/\/ Return now'],[0,'                return;'],[-1,'            }'],[-1,''],[0,'            if (oRequest.readyState == cXMLHttpRequest.DONE) {'],[-1,'                \/\/ Free up queue'],[0,'                delete oRequest._data;'],[-1,'\/*                if (bAsync)'],[-1,'                    fQueue_remove(oRequest);*\/'],[-1,'                \/\/'],[0,'                fCleanTransport(oRequest);'],[-1,'\/\/ Uncomment this block if you need a fix for IE cache'],[-1,'\/*'],[-1,'                \/\/ BUGFIX: IE - cache issue'],[-1,'                if (!oRequest._object.getResponseHeader(\&quot;Date\&quot;)) {'],[-1,'                    \/\/ Save object to cache'],[-1,'                    oRequest._cached    = oRequest._object;'],[-1,''],[-1,'                    \/\/ Instantiate a new transport object'],[-1,'                    cXMLHttpRequest.call(oRequest);'],[-1,''],[-1,'                    \/\/ Re-send request'],[-1,'                    if (sUser) {'],[-1,'                         if (sPassword)'],[-1,'                            oRequest._object.open(sMethod, sUrl, bAsync, sUser, sPassword);'],[-1,'                        else'],[-1,'                            oRequest._object.open(sMethod, sUrl, bAsync, sUser);'],[-1,'                    }'],[-1,'                    else'],[-1,'                        oRequest._object.open(sMethod, sUrl, bAsync);'],[-1,'                    oRequest._object.setRequestHeader(\&quot;If-Modified-Since\&quot;, oRequest._cached.getResponseHeader(\&quot;Last-Modified\&quot;) || new window.Date(0));'],[-1,'                    \/\/ Copy headers set'],[-1,'                    if (oRequest._headers)'],[-1,'                        for (var sHeader in oRequest._headers)'],[-1,'                            if (typeof oRequest._headers[sHeader] == \&quot;string\&quot;)    \/\/ Some frameworks prototype objects with functions'],[-1,'                                oRequest._object.setRequestHeader(sHeader, oRequest._headers[sHeader]);'],[-1,''],[-1,'                    oRequest._object.onreadystatechange    = function() {'],[-1,'                        \/\/ Synchronize state'],[-1,'                        oRequest.readyState        = oRequest._object.readyState;'],[-1,''],[-1,'                        if (oRequest._aborted) {'],[-1,'                            \/\/'],[-1,'                            oRequest.readyState    = cXMLHttpRequest.UNSENT;'],[-1,''],[-1,'                            \/\/ Return'],[-1,'                            return;'],[-1,'                        }'],[-1,''],[-1,'                        if (oRequest.readyState == cXMLHttpRequest.DONE) {'],[-1,'                            \/\/ Clean Object'],[-1,'                            fCleanTransport(oRequest);'],[-1,''],[-1,'                            \/\/ get cached request'],[-1,'                            if (oRequest.status == 304)'],[-1,'                                oRequest._object    = oRequest._cached;'],[-1,''],[-1,'                            \/\/'],[-1,'                            delete oRequest._cached;'],[-1,''],[-1,'                            \/\/'],[-1,'                            fSynchronizeValues(oRequest);'],[-1,''],[-1,'                            \/\/'],[-1,'                            fReadyStateChange(oRequest);'],[-1,''],[-1,'                            \/\/ BUGFIX: IE - memory leak in interrupted'],[-1,'                            if (bIE &amp;&amp; bAsync)'],[-1,'                                window.detachEvent(\&quot;onunload\&quot;, fOnUnload);'],[-1,'                        }'],[-1,'                    };'],[-1,'                    oRequest._object.send(null);'],[-1,''],[-1,'                    \/\/ Return now - wait until re-sent request is finished'],[-1,'                    return;'],[-1,'                };'],[-1,'*\/'],[-1,'                \/\/ BUGFIX: IE - memory leak in interrupted'],[0,'                if (bIE &amp;&amp; bAsync)'],[0,'                    window.detachEvent(\&quot;onunload\&quot;, fOnUnload);'],[-1,'            }'],[-1,''],[-1,'            \/\/ BUGFIX: Some browsers (Internet Explorer, Gecko) fire OPEN readystate twice'],[0,'            if (nState != oRequest.readyState)'],[0,'                fReadyStateChange(oRequest);'],[-1,''],[0,'            nState    = oRequest.readyState;'],[-1,'        }'],[-1,'    };'],[1,'    function fXMLHttpRequest_send(oRequest) {'],[0,'        oRequest._object.send(oRequest._data);'],[-1,''],[-1,'        \/\/ BUGFIX: Gecko - missing readystatechange calls in synchronous requests'],[0,'        if (bGecko &amp;&amp; !oRequest._async) {'],[0,'            oRequest.readyState    = cXMLHttpRequest.OPENED;'],[-1,''],[-1,'            \/\/ Synchronize state'],[0,'            fSynchronizeValues(oRequest);'],[-1,''],[-1,'            \/\/ Simulate missing states'],[0,'            while (oRequest.readyState &lt; cXMLHttpRequest.DONE) {'],[0,'                oRequest.readyState++;'],[0,'                fReadyStateChange(oRequest);'],[-1,'                \/\/ Check if we are aborted'],[0,'                if (oRequest._aborted)'],[0,'                    return;'],[-1,'            }'],[-1,'        }'],[-1,'    };'],[1,'    cXMLHttpRequest.prototype.send    = function(vData) {'],[-1,'        \/\/ Add method sniffer'],[0,'        if (cXMLHttpRequest.onsend)'],[0,'            cXMLHttpRequest.onsend.apply(this, arguments);'],[-1,''],[0,'        if (!arguments.length)'],[0,'            vData    = null;'],[-1,''],[-1,'        \/\/ BUGFIX: Safari - fails sending documents created\/modified dynamically, so an explicit serialization required'],[-1,'        \/\/ BUGFIX: IE - rewrites any custom mime-type to \&quot;text\/xml\&quot; in case an XMLNode is sent'],[-1,'        \/\/ BUGFIX: Gecko - fails sending Element (this is up to the implementation either to standard)'],[0,'        if (vData &amp;&amp; vData.nodeType) {'],[0,'            vData    = window.XMLSerializer ? new window.XMLSerializer().serializeToString(vData) : vData.xml;'],[0,'            if (!this._headers[\&quot;Content-Type\&quot;])'],[0,'                this._object.setRequestHeader(\&quot;Content-Type\&quot;, \&quot;application\/xml\&quot;);'],[-1,'        }'],[-1,''],[0,'        this._data    = vData;'],[-1,'\/*'],[-1,'        \/\/ Add to queue'],[-1,'        if (this._async)'],[-1,'            fQueue_add(this);'],[-1,'        else*\/'],[0,'            fXMLHttpRequest_send(this);'],[-1,'    };'],[1,'    cXMLHttpRequest.prototype.abort    = function() {'],[-1,'        \/\/ Add method sniffer'],[0,'        if (cXMLHttpRequest.onabort)'],[0,'            cXMLHttpRequest.onabort.apply(this, arguments);'],[-1,''],[-1,'        \/\/ BUGFIX: Gecko - unnecessary DONE when aborting'],[0,'        if (this.readyState &gt; cXMLHttpRequest.UNSENT)'],[0,'            this._aborted    = true;'],[-1,''],[0,'        this._object.abort();'],[-1,''],[-1,'        \/\/ BUGFIX: IE - memory leak'],[0,'        fCleanTransport(this);'],[-1,''],[0,'        this.readyState    = cXMLHttpRequest.UNSENT;'],[-1,''],[0,'        delete this._data;'],[-1,'\/*        if (this._async)'],[-1,'            fQueue_remove(this);*\/'],[-1,'    };'],[1,'    cXMLHttpRequest.prototype.getAllResponseHeaders    = function() {'],[0,'        return this._object.getAllResponseHeaders();'],[-1,'    };'],[1,'    cXMLHttpRequest.prototype.getResponseHeader    = function(sName) {'],[0,'        return this._object.getResponseHeader(sName);'],[-1,'    };'],[1,'    cXMLHttpRequest.prototype.setRequestHeader    = function(sName, sValue) {'],[-1,'        \/\/ BUGFIX: IE - cache issue'],[0,'        if (!this._headers)'],[0,'            this._headers    = {};'],[0,'        this._headers[sName]    = sValue;'],[-1,''],[0,'        return this._object.setRequestHeader(sName, sValue);'],[-1,'    };'],[-1,''],[-1,'    \/\/ EventTarget interface implementation'],[1,'    cXMLHttpRequest.prototype.addEventListener    = function(sName, fHandler, bUseCapture) {'],[0,'        for (var nIndex = 0, oListener; oListener = this._listeners[nIndex]; nIndex++)'],[0,'            if (oListener[0] == sName &amp;&amp; oListener[1] == fHandler &amp;&amp; oListener[2] == bUseCapture)'],[0,'                return;'],[-1,'        \/\/ Add listener'],[0,'        this._listeners.push([sName, fHandler, bUseCapture]);'],[-1,'    };'],[-1,''],[1,'    cXMLHttpRequest.prototype.removeEventListener    = function(sName, fHandler, bUseCapture) {'],[0,'        for (var nIndex = 0, oListener; oListener = this._listeners[nIndex]; nIndex++)'],[0,'            if (oListener[0] == sName &amp;&amp; oListener[1] == fHandler &amp;&amp; oListener[2] == bUseCapture)'],[0,'                break;'],[-1,'        \/\/ Remove listener'],[0,'        if (oListener)'],[0,'            this._listeners.splice(nIndex, 1);'],[-1,'    };'],[-1,''],[1,'    cXMLHttpRequest.prototype.dispatchEvent    = function(oEvent) {'],[0,'        var oEventPseudo    = {'],[-1,'            \'type\':            oEvent.type,'],[-1,'            \'target\':        this,'],[-1,'            \'currentTarget\':this,'],[-1,'            \'eventPhase\':    2,'],[-1,'            \'bubbles\':        oEvent.bubbles,'],[-1,'            \'cancelable\':    oEvent.cancelable,'],[-1,'            \'timeStamp\':    oEvent.timeStamp,'],[-1,'            \'stopPropagation\':    function() {},    \/\/ There is no flow'],[-1,'            \'preventDefault\':    function() {},    \/\/ There is no default action'],[-1,'            \'initEvent\':        function() {}    \/\/ Original event object should be initialized'],[-1,'        };'],[-1,''],[-1,'        \/\/ Execute onreadystatechange'],[0,'        if (oEventPseudo.type == \&quot;readystatechange\&quot; &amp;&amp; this.onreadystatechange)'],[0,'            (this.onreadystatechange.handleEvent || this.onreadystatechange).apply(this, [oEventPseudo]);'],[-1,''],[-1,'        \/\/ Execute listeners'],[0,'        for (var nIndex = 0, oListener; oListener = this._listeners[nIndex]; nIndex++)'],[0,'            if (oListener[0] == oEventPseudo.type &amp;&amp; !oListener[2])'],[0,'                (oListener[1].handleEvent || oListener[1]).apply(this, [oEventPseudo]);'],[-1,'    };'],[-1,''],[-1,'    \/\/'],[1,'    cXMLHttpRequest.prototype.toString    = function() {'],[0,'        return \'[\' + \&quot;object\&quot; + \' \' + \&quot;XMLHttpRequest\&quot; + \']\';'],[-1,'    };'],[-1,''],[1,'    cXMLHttpRequest.toString    = function() {'],[0,'        return \'[\' + \&quot;XMLHttpRequest\&quot; + \']\';'],[-1,'    };'],[-1,''],[-1,'    \/\/ Helper function'],[1,'    function fReadyStateChange(oRequest) {'],[-1,'        \/\/ Sniffing code'],[0,'        if (cXMLHttpRequest.onreadystatechange)'],[0,'            cXMLHttpRequest.onreadystatechange.apply(oRequest);'],[-1,''],[-1,'        \/\/ Fake event'],[0,'        oRequest.dispatchEvent({'],[-1,'            \'type\':            \&quot;readystatechange\&quot;,'],[-1,'            \'bubbles\':        false,'],[-1,'            \'cancelable\':    false,'],[-1,'            \'timeStamp\':    new Date + 0'],[-1,'        });'],[-1,'    };'],[-1,''],[1,'    function fGetDocument(oRequest) {'],[0,'        var oDocument    = oRequest.responseXML,'],[-1,'            sResponse    = oRequest.responseText;'],[-1,'        \/\/ Try parsing responseText'],[0,'        if (bIE &amp;&amp; sResponse &amp;&amp; oDocument &amp;&amp; !oDocument.documentElement &amp;&amp; oRequest.getResponseHeader(\&quot;Content-Type\&quot;).match(\/[^\\\/]+\\\/[^\\+]+\\+xml\/)) {'],[0,'            oDocument    = new window.ActiveXObject(\&quot;Microsoft.XMLDOM\&quot;);'],[0,'            oDocument.async                = false;'],[0,'            oDocument.validateOnParse    = false;'],[0,'            oDocument.loadXML(sResponse);'],[-1,'        }'],[-1,'        \/\/ Check if there is no error in document'],[0,'        if (oDocument)'],[-1,'            if ((bIE &amp;&amp; oDocument.parseError != 0) || !oDocument.documentElement || (oDocument.documentElement &amp;&amp; oDocument.documentElement.tagName == \&quot;parsererror\&quot;))'],[0,'                return null;'],[0,'        return oDocument;'],[-1,'    };'],[-1,''],[1,'    function fSynchronizeValues(oRequest) {'],[0,'        try {    oRequest.responseText    = oRequest._object.responseText;    } catch (e) {}'],[0,'        try {    oRequest.responseXML    = fGetDocument(oRequest._object);    } catch (e) {}'],[0,'        try {    oRequest.status            = oRequest._object.status;            } catch (e) {}'],[0,'        try {    oRequest.statusText        = oRequest._object.statusText;        } catch (e) {}'],[-1,'    };'],[-1,''],[1,'    function fCleanTransport(oRequest) {'],[-1,'        \/\/ BUGFIX: IE - memory leak (on-page leak)'],[0,'        oRequest._object.onreadystatechange    = new window.Function;'],[-1,'    };'],[-1,'\/*'],[-1,'    \/\/ Queue manager'],[-1,'    var oQueuePending    = {\&quot;CRITICAL\&quot;:[],\&quot;HIGH\&quot;:[],\&quot;NORMAL\&quot;:[],\&quot;LOW\&quot;:[],\&quot;LOWEST\&quot;:[]},'],[-1,'        aQueueRunning    = [];'],[-1,'    function fQueue_add(oRequest) {'],[-1,'        oQueuePending[oRequest.priority in oQueuePending ? oRequest.priority : \&quot;NORMAL\&quot;].push(oRequest);'],[-1,'        \/\/'],[-1,'        setTimeout(fQueue_process);'],[-1,'    };'],[-1,''],[-1,'    function fQueue_remove(oRequest) {'],[-1,'        for (var nIndex = 0, bFound    = false; nIndex &lt; aQueueRunning.length; nIndex++)'],[-1,'            if (bFound)'],[-1,'                aQueueRunning[nIndex - 1]    = aQueueRunning[nIndex];'],[-1,'            else'],[-1,'            if (aQueueRunning[nIndex] == oRequest)'],[-1,'                bFound    = true;'],[-1,'        if (bFound)'],[-1,'            aQueueRunning.length--;'],[-1,'        \/\/'],[-1,'        setTimeout(fQueue_process);'],[-1,'    };'],[-1,''],[-1,'    function fQueue_process() {'],[-1,'        if (aQueueRunning.length &lt; 6) {'],[-1,'            for (var sPriority in oQueuePending) {'],[-1,'                if (oQueuePending[sPriority].length) {'],[-1,'                    var oRequest    = oQueuePending[sPriority][0];'],[-1,'                    oQueuePending[sPriority]    = oQueuePending[sPriority].slice(1);'],[-1,'                    \/\/'],[-1,'                    aQueueRunning.push(oRequest);'],[-1,'                    \/\/ Send request'],[-1,'                    fXMLHttpRequest_send(oRequest);'],[-1,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    };'],[-1,'*\/'],[-1,'    \/\/ Internet Explorer 5.0 (missing apply)'],[1,'    if (!window.Function.prototype.apply) {'],[0,'        window.Function.prototype.apply    = function(oRequest, oArguments) {'],[0,'            if (!oArguments)'],[0,'                oArguments    = [];'],[0,'            oRequest.__func    = this;'],[0,'            oRequest.__func(oArguments[0], oArguments[1], oArguments[2], oArguments[3], oArguments[4]);'],[0,'            delete oRequest.__func;'],[-1,'        };'],[-1,'    };'],[-1,''],[-1,'    \/\/ Register new object with window'],[-1,'    \/**'],[-1,'     * Class: OpenLayers.Request.XMLHttpRequest'],[-1,'     * Standard-compliant (W3C) cross-browser implementation of the'],[-1,'     *     XMLHttpRequest object.  From'],[-1,'     *     http:\/\/code.google.com\/p\/xmlhttprequest\/.'],[-1,'     *\/'],[1,'    if (!OpenLayers.Request) {'],[-1,'        \/**'],[-1,'         * This allows for OpenLayers\/Request.js to be included'],[-1,'         * before or after this script.'],[-1,'         *\/'],[0,'        OpenLayers.Request = {};'],[-1,'    }'],[1,'    OpenLayers.Request.XMLHttpRequest = cXMLHttpRequest;'],[-1,'})();'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Projection.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Projection'],[-1,' * Methods for coordinate transforms between coordinate systems.  By default,'],[-1,' *     OpenLayers ships with the ability to transform coordinates between'],[-1,' *     geographic (EPSG:4326) and web or spherical mercator (EPSG:900913 et al.)'],[-1,' *     coordinate reference systems.  See the &lt;transform&gt; method for details'],[-1,' *     on usage.'],[-1,' *'],[-1,' * Additional transforms may be added by using the &lt;proj4js at http:\/\/proj4js.org\/&gt;'],[-1,' *     library.  If the proj4js library is included, the &lt;transform&gt; method '],[-1,' *     will work between any two coordinate reference systems with proj4js '],[-1,' *     definitions.'],[-1,' *'],[-1,' * If the proj4js library is not included, or if you wish to allow transforms'],[-1,' *     between arbitrary coordinate reference systems, use the &lt;addTransform&gt;'],[-1,' *     method to register a custom transform method.'],[-1,' *\/'],[1,'OpenLayers.Projection = OpenLayers.Class({'],[-1,''],[-1,'    \/**'],[-1,'     * Property: proj'],[-1,'     * {Object} Proj4js.Proj instance.'],[-1,'     *\/'],[-1,'    proj: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: projCode'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    projCode: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: titleRegEx'],[-1,'     * {RegExp} regular expression to strip the title from a proj4js definition'],[-1,'     *\/'],[-1,'    titleRegEx: \/\\+title=[^\\+]*\/,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Projection'],[-1,'     * This class offers several methods for interacting with a wrapped '],[-1,'     *     pro4js projection object. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * projCode - {String} A string identifying the Well Known Identifier for'],[-1,'     *    the projection.'],[-1,'     * options - {Object} An optional object to set additional properties'],[-1,'     *     on the projection.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Projection&gt;} A projection object.'],[-1,'     *\/'],[-1,'    initialize: function(projCode, options) {'],[5,'        OpenLayers.Util.extend(this, options);'],[5,'        this.projCode = projCode;'],[5,'        if (typeof Proj4js == \&quot;object\&quot;) {'],[0,'            this.proj = new Proj4js.Proj(projCode);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getCode'],[-1,'     * Get the string SRS code.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The SRS code.'],[-1,'     *\/'],[-1,'    getCode: function() {'],[0,'        return this.proj ? this.proj.srsCode : this.projCode;'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * APIMethod: getUnits'],[-1,'     * Get the units string for the projection -- returns null if '],[-1,'     *     proj4js is not available.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The units abbreviation.'],[-1,'     *\/'],[-1,'    getUnits: function() {'],[0,'        return this.proj ? this.proj.units : null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: toString'],[-1,'     * Convert projection to string (getCode wrapper).'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The projection code.'],[-1,'     *\/'],[-1,'    toString: function() {'],[0,'        return this.getCode();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: equals'],[-1,'     * Test equality of two projection instances.  Determines equality based'],[-1,'     *     soley on the projection code.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The two projections are equivalent.'],[-1,'     *\/'],[-1,'    equals: function(projection) {'],[0,'        var p = projection, equals = false;'],[0,'        if (p) {'],[0,'            if (!(p instanceof OpenLayers.Projection)) {'],[0,'                p = new OpenLayers.Projection(p);'],[-1,'            }'],[0,'            if ((typeof Proj4js == \&quot;object\&quot;) &amp;&amp; this.proj.defData &amp;&amp; p.proj.defData) {'],[0,'                equals = this.proj.defData.replace(this.titleRegEx, \&quot;\&quot;) =='],[-1,'                    p.proj.defData.replace(this.titleRegEx, \&quot;\&quot;);'],[0,'            } else if (p.getCode) {'],[0,'                var source = this.getCode(), target = p.getCode();'],[0,'                equals = source == target ||'],[-1,'                    !!OpenLayers.Projection.transforms[source] &amp;&amp;'],[-1,'                    OpenLayers.Projection.transforms[source][target] ==='],[-1,'                        OpenLayers.Projection.nullTransform;'],[-1,'            }'],[-1,'        }'],[0,'        return equals;   '],[-1,'    },'],[-1,''],[-1,'    \/* Method: destroy'],[-1,'     * Destroy projection object.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        delete this.proj;'],[0,'        delete this.projCode;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Projection\&quot; '],[-1,'});     '],[-1,''],[-1,'\/**'],[-1,' * Property: transforms'],[-1,' * {Object} Transforms is an object, with from properties, each of which may'],[-1,' * have a to property. This allows you to define projections without '],[-1,' * requiring support for proj4js to be included.'],[-1,' *'],[-1,' * This object has keys which correspond to a \'source\' projection object.  The'],[-1,' * keys should be strings, corresponding to the projection.getCode() value.'],[-1,' * Each source projection object should have a set of destination projection'],[-1,' * keys included in the object. '],[-1,' * '],[-1,' * Each value in the destination object should be a transformation function,'],[-1,' * where the function is expected to be passed an object with a .x and a .y'],[-1,' * property.  The function should return the object, with the .x and .y'],[-1,' * transformed according to the transformation function.'],[-1,' *'],[-1,' * Note - Properties on this object should not be set directly.  To add a'],[-1,' *     transform method to this object, use the &lt;addTransform&gt; method.  For an'],[-1,' *     example of usage, see the OpenLayers.Layer.SphericalMercator file.'],[-1,' *\/'],[1,'OpenLayers.Projection.transforms = {};'],[-1,''],[-1,'\/**'],[-1,' * APIProperty: defaults'],[-1,' * {Object} Defaults for the SRS codes known to OpenLayers (currently'],[-1,' * EPSG:4326, CRS:84, urn:ogc:def:crs:EPSG:6.6:4326, EPSG:900913, EPSG:3857,'],[-1,' * EPSG:102113 and EPSG:102100). Keys are the SRS code, values are units,'],[-1,' * maxExtent (the validity extent for the SRS) and yx (true if this SRS is'],[-1,' * known to have a reverse axis order).'],[-1,' *\/'],[1,'OpenLayers.Projection.defaults = {'],[-1,'    \&quot;EPSG:4326\&quot;: {'],[-1,'        units: \&quot;degrees\&quot;,'],[-1,'        maxExtent: [-180, -90, 180, 90],'],[-1,'        yx: true'],[-1,'    },'],[-1,'    \&quot;CRS:84\&quot;: {'],[-1,'        units: \&quot;degrees\&quot;,'],[-1,'        maxExtent: [-180, -90, 180, 90]'],[-1,'    },'],[-1,'    \&quot;EPSG:900913\&quot;: {'],[-1,'        units: \&quot;m\&quot;,'],[-1,'        maxExtent: [-20037508.34, -20037508.34, 20037508.34, 20037508.34]'],[-1,'    }'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * APIMethod: addTransform'],[-1,' * Set a custom transform method between two projections.  Use this method in'],[-1,' *     cases where the proj4js lib is not available or where custom projections'],[-1,' *     need to be handled.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * from - {String} The code for the source projection'],[-1,' * to - {String} the code for the destination projection'],[-1,' * method - {Function} A function that takes a point as an argument and'],[-1,' *     transforms that point from the source to the destination projection'],[-1,' *     in place.  The original point should be modified.'],[-1,' *\/'],[1,'OpenLayers.Projection.addTransform = function(from, to, method) {'],[108,'    if (method === OpenLayers.Projection.nullTransform) {'],[60,'        var defaults = OpenLayers.Projection.defaults[from];'],[60,'        if (defaults &amp;&amp; !OpenLayers.Projection.defaults[to]) {'],[4,'            OpenLayers.Projection.defaults[to] = defaults;'],[-1,'        }'],[-1,'    }'],[108,'    if(!OpenLayers.Projection.transforms[from]) {'],[7,'        OpenLayers.Projection.transforms[from] = {};'],[-1,'    }'],[108,'    OpenLayers.Projection.transforms[from][to] = method;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * APIMethod: transform'],[-1,' * Transform a point coordinate from one projection to another.  Note that'],[-1,' *     the input point is transformed in place.'],[-1,' * '],[-1,' * Parameters:'],[-1,' * point - {&lt;OpenLayers.Geometry.Point&gt; | Object} An object with x and y'],[-1,' *     properties representing coordinates in those dimensions.'],[-1,' * source - {OpenLayers.Projection} Source map coordinate system'],[-1,' * dest - {OpenLayers.Projection} Destination map coordinate system'],[-1,' *'],[-1,' * Returns:'],[-1,' * point - {object} A transformed coordinate.  The original point is modified.'],[-1,' *\/'],[1,'OpenLayers.Projection.transform = function(point, source, dest) {'],[0,'    if (source &amp;&amp; dest) {'],[0,'        if (!(source instanceof OpenLayers.Projection)) {'],[0,'            source = new OpenLayers.Projection(source);'],[-1,'        }'],[0,'        if (!(dest instanceof OpenLayers.Projection)) {'],[0,'            dest = new OpenLayers.Projection(dest);'],[-1,'        }'],[0,'        if (source.proj &amp;&amp; dest.proj) {'],[0,'            point = Proj4js.transform(source.proj, dest.proj, point);'],[-1,'        } else {'],[0,'            var sourceCode = source.getCode();'],[0,'            var destCode = dest.getCode();'],[0,'            var transforms = OpenLayers.Projection.transforms;'],[0,'            if (transforms[sourceCode] &amp;&amp; transforms[sourceCode][destCode]) {'],[0,'                transforms[sourceCode][destCode](point);'],[-1,'            }'],[-1,'        }'],[-1,'    }'],[0,'    return point;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * APIFunction: nullTransform'],[-1,' * A null transformation - useful for defining projection aliases when'],[-1,' * proj4js is not available:'],[-1,' *'],[-1,' * (code)'],[-1,' * OpenLayers.Projection.addTransform(\&quot;EPSG:3857\&quot;, \&quot;EPSG:900913\&quot;,'],[-1,' *     OpenLayers.Projection.nullTransform);'],[-1,' * OpenLayers.Projection.addTransform(\&quot;EPSG:900913\&quot;, \&quot;EPSG:3857\&quot;,'],[-1,' *     OpenLayers.Projection.nullTransform);'],[-1,' * (end)'],[-1,' *\/'],[1,'OpenLayers.Projection.nullTransform = function(point) {'],[0,'    return point;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Note: Transforms for web mercator &lt;-&gt; geographic'],[-1,' * OpenLayers recognizes EPSG:3857, EPSG:900913, EPSG:102113 and EPSG:102100.'],[-1,' * OpenLayers originally started referring to EPSG:900913 as web mercator.'],[-1,' * The EPSG has declared EPSG:3857 to be web mercator.'],[-1,' * ArcGIS 10 recognizes the EPSG:3857, EPSG:102113, and EPSG:102100 as'],[-1,' * equivalent.  See http:\/\/blogs.esri.com\/Dev\/blogs\/arcgisserver\/archive\/2009\/11\/20\/ArcGIS-Online-moving-to-Google-_2F00_-Bing-tiling-scheme_3A00_-What-does-this-mean-for-you_3F00_.aspx#12084.'],[-1,' * For geographic, OpenLayers recognizes EPSG:4326, CRS:84 and'],[-1,' * urn:ogc:def:crs:EPSG:6.6:4326. OpenLayers also knows about the reverse axis'],[-1,' * order for EPSG:4326. '],[-1,' *\/'],[1,'(function() {'],[-1,''],[1,'    var pole = 20037508.34;'],[-1,''],[1,'    function inverseMercator(xy) {'],[0,'        xy.x = 180 * xy.x \/ pole;'],[0,'        xy.y = 180 \/ Math.PI * (2 * Math.atan(Math.exp((xy.y \/ pole) * Math.PI)) - Math.PI \/ 2);'],[0,'        return xy;'],[-1,'    }'],[-1,''],[1,'    function forwardMercator(xy) {'],[0,'        xy.x = xy.x * pole \/ 180;'],[0,'        var y = Math.log(Math.tan((90 + xy.y) * Math.PI \/ 360)) \/ Math.PI * pole;'],[0,'        xy.y = Math.max(-20037508.34, Math.min(y, 20037508.34));'],[0,'        return xy;'],[-1,'    }'],[-1,''],[1,'    function map(base, codes) {'],[7,'        var add = OpenLayers.Projection.addTransform;'],[7,'        var same = OpenLayers.Projection.nullTransform;'],[7,'        var i, len, code, other, j;'],[7,'        for (i=0, len=codes.length; i&lt;len; ++i) {'],[24,'            code = codes[i];'],[24,'            add(base, code, forwardMercator);'],[24,'            add(code, base, inverseMercator);'],[24,'            for (j=i+1; j&lt;len; ++j) {'],[30,'                other = codes[j];'],[30,'                add(code, other, same);'],[30,'                add(other, code, same);'],[-1,'            }'],[-1,'        }'],[-1,'    }'],[-1,'    '],[-1,'    \/\/ list of equivalent codes for web mercator'],[1,'    var mercator = [\&quot;EPSG:900913\&quot;, \&quot;EPSG:3857\&quot;, \&quot;EPSG:102113\&quot;, \&quot;EPSG:102100\&quot;],'],[-1,'        geographic = [\&quot;CRS:84\&quot;, \&quot;urn:ogc:def:crs:EPSG:6.6:4326\&quot;, \&quot;EPSG:4326\&quot;],'],[-1,'        i;'],[1,'    for (i=mercator.length-1; i&gt;=0; --i) {'],[4,'        map(mercator[i], geographic);'],[-1,'    }'],[1,'    for (i=geographic.length-1; i&gt;=0; --i) {'],[3,'        map(geographic[i], mercator);'],[-1,'    }'],[-1,''],[-1,'})();'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/KML.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Date.js'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' * @requires OpenLayers\/Geometry\/LineString.js'],[-1,' * @requires OpenLayers\/Geometry\/Polygon.js'],[-1,' * @requires OpenLayers\/Geometry\/Collection.js'],[-1,' * @requires OpenLayers\/Request\/XMLHttpRequest.js'],[-1,' * @requires OpenLayers\/Projection.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.KML'],[-1,' * Read\/Write KML. Create a new instance with the &lt;OpenLayers.Format.KML&gt;'],[-1,' *     constructor. '],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.KML = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        kml: \&quot;http:\/\/www.opengis.net\/kml\/2.2\&quot;,'],[-1,'        gx: \&quot;http:\/\/www.google.com\/kml\/ext\/2.2\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: kmlns'],[-1,'     * {String} KML Namespace to use. Defaults to 2.0 namespace.'],[-1,'     *\/'],[-1,'    kmlns: \&quot;http:\/\/earth.google.com\/kml\/2.0\&quot;,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: placemarksDesc'],[-1,'     * {String} Name of the placemarks.  Default is \&quot;No description available\&quot;.'],[-1,'     *\/'],[-1,'    placemarksDesc: \&quot;No description available\&quot;,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: foldersName'],[-1,'     * {String} Name of the folders.  Default is \&quot;OpenLayers export\&quot;.'],[-1,'     *          If set to null, no name element will be created.'],[-1,'     *\/'],[-1,'    foldersName: \&quot;OpenLayers export\&quot;,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: foldersDesc'],[-1,'     * {String} Description of the folders. Default is \&quot;Exported on [date].\&quot;'],[-1,'     *          If set to null, no description element will be created.'],[-1,'     *\/'],[-1,'    foldersDesc: \&quot;Exported on \&quot; + new Date(),'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: extractAttributes'],[-1,'     * {Boolean} Extract attributes from KML.  Default is true.'],[-1,'     *           Extracting styleUrls requires this to be set to true'],[-1,'     *           Note that currently only Data and SimpleData '],[-1,'     *           elements are handled.'],[-1,'     *\/'],[-1,'    extractAttributes: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: kvpAttributes'],[-1,'     * {Boolean} Only used if extractAttributes is true.'],[-1,'     *           If set to true, attributes will be simple'],[-1,'     *           key-value pairs, compatible with other formats,'],[-1,'     *           Any displayName elements will be ignored.'],[-1,'     *           If set to false, attributes will be objects,'],[-1,'     *           retaining any displayName elements, but not'],[-1,'     *           compatible with other formats. Any CDATA in'],[-1,'     *           displayName will be read in as a string value.'],[-1,'     *           Default is false.'],[-1,'     *\/'],[-1,'    kvpAttributes: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: extractStyles'],[-1,'     * {Boolean} Extract styles from KML.  Default is false.'],[-1,'     *           Extracting styleUrls also requires extractAttributes to be'],[-1,'     *           set to true'],[-1,'     *\/'],[-1,'    extractStyles: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: extractTracks'],[-1,'     * {Boolean} Extract gx:Track elements from Placemark elements.  Default'],[-1,'     *     is false.  If true, features will be generated for all points in'],[-1,'     *     all gx:Track elements.  Features will have a when (Date) attribute'],[-1,'     *     based on when elements in the track.  If tracks include angle'],[-1,'     *     elements, features will have heading, tilt, and roll attributes.'],[-1,'     *     If track point coordinates have three values, features will have'],[-1,'     *     an altitude attribute with the third coordinate value.'],[-1,'     *\/'],[-1,'    extractTracks: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: trackAttributes'],[-1,'     * {Array} If &lt;extractTracks&gt; is true, points within gx:Track elements will '],[-1,'     *     be parsed as features with when, heading, tilt, and roll attributes.'],[-1,'     *     Any additional attribute names can be provided in &lt;trackAttributes&gt;.'],[-1,'     *\/'],[-1,'    trackAttributes: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: internalns'],[-1,'     * {String} KML Namespace to use -- defaults to the namespace of the'],[-1,'     *     Placemark node being parsed, but falls back to kmlns. '],[-1,'     *\/'],[-1,'    internalns: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: features'],[-1,'     * {Array} Array of features'],[-1,'     *     '],[-1,'     *\/'],[-1,'    features: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: styles'],[-1,'     * {Object} Storage of style objects'],[-1,'     *     '],[-1,'     *\/'],[-1,'    styles: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: styleBaseUrl'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    styleBaseUrl: \&quot;\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: fetched'],[-1,'     * {Object} Storage of KML URLs that have been fetched before'],[-1,'     *     in order to prevent reloading them.'],[-1,'     *\/'],[-1,'    fetched: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxDepth'],[-1,'     * {Integer} Maximum depth for recursive loading external KML URLs '],[-1,'     *           Defaults to 0: do no external fetching'],[-1,'     *\/'],[-1,'    maxDepth: 0,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.KML'],[-1,'     * Create a new parser for KML.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[-1,'        \/\/ compile regular expressions once instead of every time they are used'],[0,'        this.regExes = {'],[-1,'            trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'            removeSpace: (\/\\s*\/g),'],[-1,'            splitSpace: (\/\\s+\/),'],[-1,'            trimComma: (\/\\s*,\\s*\/g),'],[-1,'            kmlColor: (\/(\\w{2})(\\w{2})(\\w{2})(\\w{2})\/),'],[-1,'            kmlIconPalette: (\/root:\\\/\\\/icons\\\/palette-(\\d+)(\\.\\w+)\/),'],[-1,'            straightBracket: (\/\\$\\[(.*?)\\]\/g)'],[-1,'        };'],[-1,'        \/\/ KML coordinates are always in longlat WGS84'],[0,'        this.externalProjection = new OpenLayers.Projection(\&quot;EPSG:4326\&quot;);'],[-1,''],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read data from a string, and return a list of features. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data    - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} List of features.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        this.features = [];'],[0,'        this.styles   = {};'],[0,'        this.fetched  = {};'],[-1,''],[-1,'        \/\/ Set default options '],[0,'        var options = {'],[-1,'            depth: 0,'],[-1,'            styleBaseUrl: this.styleBaseUrl'],[-1,'        };'],[-1,''],[0,'        return this.parseData(data, options);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseData'],[-1,'     * Read data from a string, and return a list of features. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data    - {String} or {DOMElement} data to read\/parse.'],[-1,'     * options - {Object} Hash of options'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} List of features.'],[-1,'     *\/'],[-1,'    parseData: function(data, options) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[-1,''],[-1,'        \/\/ Loop throught the following node types in this order and'],[-1,'        \/\/ process the nodes found '],[0,'        var types = [\&quot;Link\&quot;, \&quot;NetworkLink\&quot;, \&quot;Style\&quot;, \&quot;StyleMap\&quot;, \&quot;Placemark\&quot;];'],[0,'        for(var i=0, len=types.length; i&lt;len; ++i) {'],[0,'            var type = types[i];'],[-1,''],[0,'            var nodes = this.getElementsByTagNameNS(data, \&quot;*\&quot;, type);'],[-1,''],[-1,'            \/\/ skip to next type if no nodes are found'],[0,'            if(nodes.length == 0) { '],[0,'                continue;'],[-1,'            }'],[-1,''],[0,'            switch (type.toLowerCase()) {'],[-1,''],[-1,'                \/\/ Fetch external links '],[-1,'                case \&quot;link\&quot;:'],[-1,'                case \&quot;networklink\&quot;:'],[0,'                    this.parseLinks(nodes, options);'],[0,'                    break;'],[-1,''],[-1,'                \/\/ parse style information'],[-1,'                case \&quot;style\&quot;:'],[0,'                    if (this.extractStyles) {'],[0,'                        this.parseStyles(nodes, options);'],[-1,'                    }'],[0,'                    break;'],[-1,'                case \&quot;stylemap\&quot;:'],[0,'                    if (this.extractStyles) {'],[0,'                        this.parseStyleMaps(nodes, options);'],[-1,'                    }'],[0,'                    break;'],[-1,''],[-1,'                \/\/ parse features'],[-1,'                case \&quot;placemark\&quot;:'],[0,'                    this.parseFeatures(nodes, options);'],[0,'                    break;'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        return this.features;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseLinks'],[-1,'     * Finds URLs of linked KML documents and fetches them'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * nodes   - {Array} of {DOMElement} data to read\/parse.'],[-1,'     * options - {Object} Hash of options'],[-1,'     * '],[-1,'     *\/'],[-1,'    parseLinks: function(nodes, options) {'],[-1,'        '],[-1,'        \/\/ Fetch external links &lt;NetworkLink&gt; and &lt;Link&gt;'],[-1,'        \/\/ Don\'t do anything if we have reached our maximum depth for recursion'],[0,'        if (options.depth &gt;= this.maxDepth) {'],[0,'            return false;'],[-1,'        }'],[-1,''],[-1,'        \/\/ increase depth'],[0,'        var newOptions = OpenLayers.Util.extend({}, options);'],[0,'        newOptions.depth++;'],[-1,''],[0,'        for(var i=0, len=nodes.length; i&lt;len; i++) {'],[0,'            var href = this.parseProperty(nodes[i], \&quot;*\&quot;, \&quot;href\&quot;);'],[0,'            if(href &amp;&amp; !this.fetched[href]) {'],[0,'                this.fetched[href] = true; \/\/ prevent reloading the same urls'],[0,'                var data = this.fetchLink(href);'],[0,'                if (data) {'],[0,'                    this.parseData(data, newOptions);'],[-1,'                }'],[-1,'            } '],[-1,'        }'],[-1,''],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: fetchLink'],[-1,'     * Fetches a URL and returns the result'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * href  - {String} url to be fetched'],[-1,'     * '],[-1,'     *\/'],[-1,'    fetchLink: function(href) {'],[0,'        var request = OpenLayers.Request.GET({url: href, async: false});'],[0,'        if (request) {'],[0,'            return request.responseText;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseStyles'],[-1,'     * Parses &lt;Style&gt; nodes'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * nodes    - {Array} of {DOMElement} data to read\/parse.'],[-1,'     * options  - {Object} Hash of options'],[-1,'     * '],[-1,'     *\/'],[-1,'    parseStyles: function(nodes, options) {'],[0,'        for(var i=0, len=nodes.length; i&lt;len; i++) {'],[0,'            var style = this.parseStyle(nodes[i]);'],[0,'            if(style) {'],[0,'                var styleName = (options.styleBaseUrl || \&quot;\&quot;) + \&quot;#\&quot; + style.id;'],[-1,'                '],[0,'                this.styles[styleName] = style;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseKmlColor'],[-1,'     * Parses a kml color (in \'aabbggrr\' format) and returns the corresponding '],[-1,'     * color and opacity or null if the color is invalid.'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * kmlColor - {String} a kml formated color'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object}'],[-1,'     *\/'],[-1,'    parseKmlColor: function(kmlColor) {'],[0,'        var color = null;'],[0,'        if (kmlColor) {'],[0,'            var matches = kmlColor.match(this.regExes.kmlColor);'],[0,'            if (matches) {'],[0,'                color = {'],[-1,'                    color: \'#\' + matches[4] + matches[3] + matches[2],'],[-1,'                    opacity: parseInt(matches[1], 16) \/ 255'],[-1,'                };'],[-1,'            }'],[-1,'        }'],[0,'        return color;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseStyle'],[-1,'     * Parses the children of a &lt;Style&gt; node and builds the style hash'],[-1,'     * accordingly'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement} &lt;Style&gt; node'],[-1,'     * '],[-1,'     *\/'],[-1,'    parseStyle: function(node) {'],[0,'        var style = {};'],[-1,'        '],[0,'        var types = [\&quot;LineStyle\&quot;, \&quot;PolyStyle\&quot;, \&quot;IconStyle\&quot;, \&quot;BalloonStyle\&quot;, '],[-1,'                     \&quot;LabelStyle\&quot;];'],[0,'        var type, styleTypeNode, nodeList, geometry, parser;'],[0,'        for(var i=0, len=types.length; i&lt;len; ++i) {'],[0,'            type = types[i];'],[0,'            styleTypeNode = this.getElementsByTagNameNS(node, \&quot;*\&quot;, type)[0];'],[0,'            if(!styleTypeNode) { '],[0,'                continue;'],[-1,'            }'],[-1,''],[-1,'            \/\/ only deal with first geometry of this type'],[0,'            switch (type.toLowerCase()) {'],[-1,'                case \&quot;linestyle\&quot;:'],[0,'                    var kmlColor = this.parseProperty(styleTypeNode, \&quot;*\&quot;, \&quot;color\&quot;);'],[0,'                    var color = this.parseKmlColor(kmlColor);'],[0,'                    if (color) {'],[0,'                        style[\&quot;strokeColor\&quot;] = color.color;'],[0,'                        style[\&quot;strokeOpacity\&quot;] = color.opacity;'],[-1,'                    }'],[-1,'                    '],[0,'                    var width = this.parseProperty(styleTypeNode, \&quot;*\&quot;, \&quot;width\&quot;);'],[0,'                    if (width) {'],[0,'                        style[\&quot;strokeWidth\&quot;] = width;'],[-1,'                    }'],[0,'                    break;'],[-1,''],[-1,'                case \&quot;polystyle\&quot;:'],[0,'                    var kmlColor = this.parseProperty(styleTypeNode, \&quot;*\&quot;, \&quot;color\&quot;);'],[0,'                    var color = this.parseKmlColor(kmlColor);'],[0,'                    if (color) {'],[0,'                        style[\&quot;fillOpacity\&quot;] = color.opacity;'],[0,'                        style[\&quot;fillColor\&quot;] = color.color;'],[-1,'                    }'],[-1,'                    \/\/ Check if fill is disabled'],[0,'                    var fill = this.parseProperty(styleTypeNode, \&quot;*\&quot;, \&quot;fill\&quot;);'],[0,'                    if (fill == \&quot;0\&quot;) {'],[0,'                        style[\&quot;fillColor\&quot;] = \&quot;none\&quot;;'],[-1,'                    }'],[-1,'                    \/\/ Check if outline is disabled'],[0,'                    var outline = this.parseProperty(styleTypeNode, \&quot;*\&quot;, \&quot;outline\&quot;);'],[0,'                    if (outline == \&quot;0\&quot;) {'],[0,'                        style[\&quot;strokeWidth\&quot;] = \&quot;0\&quot;;'],[-1,'                    }'],[-1,'                   '],[0,'                    break;'],[-1,''],[-1,'                case \&quot;iconstyle\&quot;:'],[-1,'                    \/\/ set scale'],[0,'                    var scale = parseFloat(this.parseProperty(styleTypeNode, '],[-1,'                                                          \&quot;*\&quot;, \&quot;scale\&quot;) || 1);'],[-1,'  '],[-1,'                    \/\/ set default width and height of icon'],[0,'                    var width = 32 * scale;'],[0,'                    var height = 32 * scale;'],[-1,''],[0,'                    var iconNode = this.getElementsByTagNameNS(styleTypeNode, '],[-1,'                                               \&quot;*\&quot;, '],[-1,'                                               \&quot;Icon\&quot;)[0];'],[0,'                    if (iconNode) {'],[0,'                        var href = this.parseProperty(iconNode, \&quot;*\&quot;, \&quot;href\&quot;);'],[0,'                        if (href) {                                                   '],[-1,''],[0,'                            var w = this.parseProperty(iconNode, \&quot;*\&quot;, \&quot;w\&quot;);'],[0,'                            var h = this.parseProperty(iconNode, \&quot;*\&quot;, \&quot;h\&quot;);'],[-1,''],[-1,'                            \/\/ Settings for Google specific icons that are 64x64'],[-1,'                            \/\/ We set the width and height to 64 and halve the'],[-1,'                            \/\/ scale to prevent icons from being too big'],[0,'                            var google = \&quot;http:\/\/maps.google.com\/mapfiles\/kml\&quot;;'],[0,'                            if (OpenLayers.String.startsWith('],[-1,'                                                 href, google) &amp;&amp; !w &amp;&amp; !h) {'],[0,'                                w = 64;'],[0,'                                h = 64;'],[0,'                                scale = scale \/ 2;'],[-1,'                            }'],[-1,'                                '],[-1,'                            \/\/ if only dimension is defined, make sure the'],[-1,'                            \/\/ other one has the same value'],[0,'                            w = w || h;'],[0,'                            h = h || w;'],[-1,''],[0,'                            if (w) {'],[0,'                                width = parseInt(w) * scale;'],[-1,'                            }'],[-1,''],[0,'                            if (h) {'],[0,'                                height = parseInt(h) * scale;'],[-1,'                            }'],[-1,''],[-1,'                            \/\/ support for internal icons '],[-1,'                            \/\/    (\/root:\/\/icons\/palette-x.png)'],[-1,'                            \/\/ x and y tell the position on the palette:'],[-1,'                            \/\/ - in pixels'],[-1,'                            \/\/ - starting from the left bottom'],[-1,'                            \/\/ We translate that to a position in the list '],[-1,'                            \/\/ and request the appropriate icon from the '],[-1,'                            \/\/ google maps website'],[0,'                            var matches = href.match(this.regExes.kmlIconPalette);'],[0,'                            if (matches)  {'],[0,'                                var palette = matches[1];'],[0,'                                var file_extension = matches[2];'],[-1,''],[0,'                                var x = this.parseProperty(iconNode, \&quot;*\&quot;, \&quot;x\&quot;);'],[0,'                                var y = this.parseProperty(iconNode, \&quot;*\&quot;, \&quot;y\&quot;);'],[-1,''],[0,'                                var posX = x ? x\/32 : 0;'],[0,'                                var posY = y ? (7 - y\/32) : 7;'],[-1,''],[0,'                                var pos = posY * 8 + posX;'],[0,'                                href = \&quot;http:\/\/maps.google.com\/mapfiles\/kml\/pal\&quot; '],[-1,'                                     + palette + \&quot;\/icon\&quot; + pos + file_extension;'],[-1,'                            }'],[-1,''],[0,'                            style[\&quot;graphicOpacity\&quot;] = 1; \/\/ fully opaque'],[0,'                            style[\&quot;externalGraphic\&quot;] = href;'],[-1,'                        }'],[-1,''],[-1,'                    }'],[-1,''],[-1,''],[-1,'                    \/\/ hotSpots define the offset for an Icon'],[0,'                    var hotSpotNode = this.getElementsByTagNameNS(styleTypeNode, '],[-1,'                                               \&quot;*\&quot;, '],[-1,'                                               \&quot;hotSpot\&quot;)[0];'],[0,'                    if (hotSpotNode) {'],[0,'                        var x = parseFloat(hotSpotNode.getAttribute(\&quot;x\&quot;));'],[0,'                        var y = parseFloat(hotSpotNode.getAttribute(\&quot;y\&quot;));'],[-1,''],[0,'                        var xUnits = hotSpotNode.getAttribute(\&quot;xunits\&quot;);'],[0,'                        if (xUnits == \&quot;pixels\&quot;) {'],[0,'                            style[\&quot;graphicXOffset\&quot;] = -x * scale;'],[-1,'                        }'],[0,'                        else if (xUnits == \&quot;insetPixels\&quot;) {'],[0,'                            style[\&quot;graphicXOffset\&quot;] = -width + (x * scale);'],[-1,'                        }'],[0,'                        else if (xUnits == \&quot;fraction\&quot;) {'],[0,'                            style[\&quot;graphicXOffset\&quot;] = -width * x;'],[-1,'                        }'],[-1,''],[0,'                        var yUnits = hotSpotNode.getAttribute(\&quot;yunits\&quot;);'],[0,'                        if (yUnits == \&quot;pixels\&quot;) {'],[0,'                            style[\&quot;graphicYOffset\&quot;] = -height + (y * scale) + 1;'],[-1,'                        }'],[0,'                        else if (yUnits == \&quot;insetPixels\&quot;) {'],[0,'                            style[\&quot;graphicYOffset\&quot;] = -(y * scale) + 1;'],[-1,'                        }'],[0,'                        else if (yUnits == \&quot;fraction\&quot;) {'],[0,'                            style[\&quot;graphicYOffset\&quot;] =  -height * (1 - y) + 1;'],[-1,'                        }'],[-1,'                    }'],[-1,''],[0,'                    style[\&quot;graphicWidth\&quot;] = width;'],[0,'                    style[\&quot;graphicHeight\&quot;] = height;'],[0,'                    break;'],[-1,''],[-1,'                case \&quot;balloonstyle\&quot;:'],[0,'                    var balloonStyle = OpenLayers.Util.getXmlNodeValue('],[-1,'                                            styleTypeNode);'],[0,'                    if (balloonStyle) {'],[0,'                        style[\&quot;balloonStyle\&quot;] = balloonStyle.replace('],[-1,'                                       this.regExes.straightBracket, \&quot;${$1}\&quot;);'],[-1,'                    }'],[0,'                    break;'],[-1,'                case \&quot;labelstyle\&quot;:'],[0,'                    var kmlColor = this.parseProperty(styleTypeNode, \&quot;*\&quot;, \&quot;color\&quot;);'],[0,'                    var color = this.parseKmlColor(kmlColor);'],[0,'                    if (color) {'],[0,'                        style[\&quot;fontColor\&quot;] = color.color;'],[0,'                        style[\&quot;fontOpacity\&quot;] = color.opacity;'],[-1,'                    }'],[0,'                    break;'],[-1,''],[-1,'                default:'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ Some polygons have no line color, so we use the fillColor for that'],[0,'        if (!style[\&quot;strokeColor\&quot;] &amp;&amp; style[\&quot;fillColor\&quot;]) {'],[0,'            style[\&quot;strokeColor\&quot;] = style[\&quot;fillColor\&quot;];'],[-1,'        }'],[-1,''],[0,'        var id = node.getAttribute(\&quot;id\&quot;);'],[0,'        if (id &amp;&amp; style) {'],[0,'            style.id = id;'],[-1,'        }'],[-1,''],[0,'        return style;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseStyleMaps'],[-1,'     * Parses &lt;StyleMap&gt; nodes, but only uses the \'normal\' key'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * nodes    - {Array} of {DOMElement} data to read\/parse.'],[-1,'     * options  - {Object} Hash of options'],[-1,'     * '],[-1,'     *\/'],[-1,'    parseStyleMaps: function(nodes, options) {'],[-1,'        \/\/ Only the default or \&quot;normal\&quot; part of the StyleMap is processed now'],[-1,'        \/\/ To do the select or \&quot;highlight\&quot; bit, we\'d need to change lots more'],[-1,''],[0,'        for(var i=0, len=nodes.length; i&lt;len; i++) {'],[0,'            var node = nodes[i];'],[0,'            var pairs = this.getElementsByTagNameNS(node, \&quot;*\&quot;, '],[-1,'                            \&quot;Pair\&quot;);'],[-1,''],[0,'            var id = node.getAttribute(\&quot;id\&quot;);'],[0,'            for (var j=0, jlen=pairs.length; j&lt;jlen; j++) {'],[0,'                var pair = pairs[j];'],[-1,'                \/\/ Use the shortcut in the SLD format to quickly retrieve the '],[-1,'                \/\/ value of a node. Maybe it\'s good to have a method in '],[-1,'                \/\/ Format.XML to do this'],[0,'                var key = this.parseProperty(pair, \&quot;*\&quot;, \&quot;key\&quot;);'],[0,'                var styleUrl = this.parseProperty(pair, \&quot;*\&quot;, \&quot;styleUrl\&quot;);'],[-1,''],[0,'                if (styleUrl &amp;&amp; key == \&quot;normal\&quot;) {'],[0,'                    this.styles[(options.styleBaseUrl || \&quot;\&quot;) + \&quot;#\&quot; + id] ='],[-1,'                        this.styles[(options.styleBaseUrl || \&quot;\&quot;) + styleUrl];'],[-1,'                }'],[-1,''],[-1,'                \/\/ TODO: implement the \&quot;select\&quot; part'],[-1,'                \/\/if (styleUrl &amp;&amp; key == \&quot;highlight\&quot;) {'],[-1,'                \/\/}'],[-1,''],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseFeatures'],[-1,'     * Loop through all Placemark nodes and parse them.'],[-1,'     * Will create a list of features'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * nodes    - {Array} of {DOMElement} data to read\/parse.'],[-1,'     * options  - {Object} Hash of options'],[-1,'     * '],[-1,'     *\/'],[-1,'    parseFeatures: function(nodes, options) {'],[0,'        var features = [];'],[0,'        for(var i=0, len=nodes.length; i&lt;len; i++) {'],[0,'            var featureNode = nodes[i];'],[0,'            var feature = this.parseFeature.apply(this,[featureNode]) ;'],[0,'            if(feature) {'],[-1,''],[-1,'                \/\/ Create reference to styleUrl '],[0,'                if (this.extractStyles &amp;&amp; feature.attributes &amp;&amp;'],[-1,'                    feature.attributes.styleUrl) {'],[0,'                    feature.style = this.getStyle(feature.attributes.styleUrl, options);'],[-1,'                }'],[-1,''],[0,'                if (this.extractStyles) {'],[-1,'                    \/\/ Make sure that &lt;Style&gt; nodes within a placemark are '],[-1,'                    \/\/ processed as well'],[0,'                    var inlineStyleNode = this.getElementsByTagNameNS(featureNode,'],[-1,'                                                        \&quot;*\&quot;,'],[-1,'                                                        \&quot;Style\&quot;)[0];'],[0,'                    if (inlineStyleNode) {'],[0,'                        var inlineStyle= this.parseStyle(inlineStyleNode);'],[0,'                        if (inlineStyle) {'],[0,'                            feature.style = OpenLayers.Util.extend('],[-1,'                                feature.style, inlineStyle'],[-1,'                            );'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,''],[-1,'                \/\/ check if gx:Track elements should be parsed'],[0,'                if (this.extractTracks) {'],[0,'                    var tracks = this.getElementsByTagNameNS('],[-1,'                        featureNode, this.namespaces.gx, \&quot;Track\&quot;'],[-1,'                    );'],[0,'                    if (tracks &amp;&amp; tracks.length &gt; 0) {'],[0,'                        var track = tracks[0];'],[0,'                        var container = {'],[-1,'                            features: [],'],[-1,'                            feature: feature'],[-1,'                        };'],[0,'                        this.readNode(track, container);'],[0,'                        if (container.features.length &gt; 0) {'],[0,'                            features.push.apply(features, container.features);'],[-1,'                        }'],[-1,'                    }'],[-1,'                } else {'],[-1,'                    \/\/ add feature to list of features'],[0,'                    features.push(feature);                    '],[-1,'                }'],[-1,'            } else {'],[0,'                throw \&quot;Bad Placemark: \&quot; + i;'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ add new features to existing feature list'],[0,'        this.features = this.features.concat(features);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;kml\&quot;: {'],[-1,'            \&quot;when\&quot;: function(node, container) {'],[0,'                container.whens.push(OpenLayers.Date.parse('],[-1,'                    this.getChildValue(node)'],[-1,'                ));'],[-1,'            },'],[-1,'            \&quot;_trackPointAttribute\&quot;: function(node, container) {'],[0,'                var name = node.nodeName.split(\&quot;:\&quot;).pop();'],[0,'                container.attributes[name].push(this.getChildValue(node));'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;gx\&quot;: {'],[-1,'            \&quot;Track\&quot;: function(node, container) {'],[0,'                var obj = {'],[-1,'                    whens: [],'],[-1,'                    points: [],'],[-1,'                    angles: []'],[-1,'                };'],[0,'                if (this.trackAttributes) {'],[0,'                    var name;'],[0,'                    obj.attributes = {};'],[0,'                    for (var i=0, ii=this.trackAttributes.length; i&lt;ii; ++i) {'],[0,'                        name = this.trackAttributes[i];'],[0,'                        obj.attributes[name] = [];'],[0,'                        if (!(name in this.readers.kml)) {'],[0,'                            this.readers.kml[name] = this.readers.kml._trackPointAttribute;'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[0,'                this.readChildNodes(node, obj);'],[0,'                if (obj.whens.length !== obj.points.length) {'],[0,'                    throw new Error(\&quot;gx:Track with unequal number of when (\&quot; +'],[-1,'                                    obj.whens.length + \&quot;) and gx:coord (\&quot; +'],[-1,'                                    obj.points.length + \&quot;) elements.\&quot;);'],[-1,'                }'],[0,'                var hasAngles = obj.angles.length &gt; 0;'],[0,'                if (hasAngles &amp;&amp; obj.whens.length !== obj.angles.length) {'],[0,'                    throw new Error(\&quot;gx:Track with unequal number of when (\&quot; +'],[-1,'                                    obj.whens.length + \&quot;) and gx:angles (\&quot; +'],[-1,'                                    obj.angles.length + \&quot;) elements.\&quot;);'],[-1,'                }'],[0,'                var feature, point, angles;'],[0,'                for (var i=0, ii=obj.whens.length; i&lt;ii; ++i) {'],[0,'                    feature = container.feature.clone();'],[0,'                    feature.fid = container.feature.fid || container.feature.id;'],[0,'                    point = obj.points[i];'],[0,'                    feature.geometry = point;'],[0,'                    if (\&quot;z\&quot; in point) {'],[0,'                        feature.attributes.altitude = point.z;'],[-1,'                    }'],[0,'                    if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'                        feature.geometry.transform('],[-1,'                            this.externalProjection, this.internalProjection'],[-1,'                        ); '],[-1,'                    }'],[0,'                    if (this.trackAttributes) {'],[0,'                        for (var j=0, jj=this.trackAttributes.length; j&lt;jj; ++j) {'],[0,'                            var name = this.trackAttributes[j];'],[0,'                            feature.attributes[name] = obj.attributes[name][i];'],[-1,'                        }'],[-1,'                    }'],[0,'                    feature.attributes.when = obj.whens[i];'],[0,'                    feature.attributes.trackId = container.feature.id;'],[0,'                    if (hasAngles) {'],[0,'                        angles = obj.angles[i];'],[0,'                        feature.attributes.heading = parseFloat(angles[0]);'],[0,'                        feature.attributes.tilt = parseFloat(angles[1]);'],[0,'                        feature.attributes.roll = parseFloat(angles[2]);'],[-1,'                    }'],[0,'                    container.features.push(feature);'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;coord\&quot;: function(node, container) {'],[0,'                var str = this.getChildValue(node);'],[0,'                var coords = str.replace(this.regExes.trimSpace, \&quot;\&quot;).split(\/\\s+\/);'],[0,'                var point = new OpenLayers.Geometry.Point(coords[0], coords[1]);'],[0,'                if (coords.length &gt; 2) {'],[0,'                    point.z = parseFloat(coords[2]);'],[-1,'                }'],[0,'                container.points.push(point);'],[-1,'            },'],[-1,'            \&quot;angles\&quot;: function(node, container) {'],[0,'                var str = this.getChildValue(node);'],[0,'                var parts = str.replace(this.regExes.trimSpace, \&quot;\&quot;).split(\/\\s+\/);'],[0,'                container.angles.push(parts);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseFeature'],[-1,'     * This function is the core of the KML parsing code in OpenLayers.'],[-1,'     *     It creates the geometries that are then attached to the returned'],[-1,'     *     feature, and calls parseAttributes() to get attribute data out.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} A vector feature.'],[-1,'     *\/'],[-1,'    parseFeature: function(node) {'],[-1,'        \/\/ only accept one geometry per feature - look for highest \&quot;order\&quot;'],[0,'        var order = [\&quot;MultiGeometry\&quot;, \&quot;Polygon\&quot;, \&quot;LineString\&quot;, \&quot;Point\&quot;];'],[0,'        var type, nodeList, geometry, parser;'],[0,'        for(var i=0, len=order.length; i&lt;len; ++i) {'],[0,'            type = order[i];'],[0,'            this.internalns = node.namespaceURI ? '],[-1,'                    node.namespaceURI : this.kmlns;'],[0,'            nodeList = this.getElementsByTagNameNS(node, '],[-1,'                                                   this.internalns, type);'],[0,'            if(nodeList.length &gt; 0) {'],[-1,'                \/\/ only deal with first geometry of this type'],[0,'                var parser = this.parseGeometry[type.toLowerCase()];'],[0,'                if(parser) {'],[0,'                    geometry = parser.apply(this, [nodeList[0]]);'],[0,'                    if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'                        geometry.transform(this.externalProjection, '],[-1,'                                           this.internalProjection); '],[-1,'                    }                       '],[-1,'                } else {'],[0,'                    throw new TypeError(\&quot;Unsupported geometry type: \&quot; + type);'],[-1,'                }'],[-1,'                \/\/ stop looking for different geometry types'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ construct feature (optionally with attributes)'],[0,'        var attributes;'],[0,'        if(this.extractAttributes) {'],[0,'            attributes = this.parseAttributes(node);'],[-1,'        }'],[0,'        var feature = new OpenLayers.Feature.Vector(geometry, attributes);'],[-1,''],[0,'        var fid = node.getAttribute(\&quot;id\&quot;) || node.getAttribute(\&quot;name\&quot;);'],[0,'        if(fid != null) {'],[0,'            feature.fid = fid;'],[-1,'        }'],[-1,''],[0,'        return feature;'],[-1,'    },        '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getStyle'],[-1,'     * Retrieves a style from a style hash using styleUrl as the key'],[-1,'     * If the styleUrl doesn\'t exist yet, we try to fetch it '],[-1,'     * Internet'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * styleUrl  - {String} URL of style'],[-1,'     * options   - {Object} Hash of options '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object}  - (reference to) Style hash'],[-1,'     *\/'],[-1,'    getStyle: function(styleUrl, options) {'],[-1,''],[0,'        var styleBaseUrl = OpenLayers.Util.removeTail(styleUrl);'],[-1,''],[0,'        var newOptions = OpenLayers.Util.extend({}, options);'],[0,'        newOptions.depth++;'],[0,'        newOptions.styleBaseUrl = styleBaseUrl;'],[-1,''],[-1,'        \/\/ Fetch remote Style URLs (if not fetched before) '],[0,'        if (!this.styles[styleUrl] '],[-1,'                &amp;&amp; !OpenLayers.String.startsWith(styleUrl, \&quot;#\&quot;) '],[-1,'                &amp;&amp; newOptions.depth &lt;= this.maxDepth'],[-1,'                &amp;&amp; !this.fetched[styleBaseUrl] ) {'],[-1,''],[0,'            var data = this.fetchLink(styleBaseUrl);'],[0,'            if (data) {'],[0,'                this.parseData(data, newOptions);'],[-1,'            }'],[-1,''],[-1,'        }'],[-1,''],[-1,'        \/\/ return requested style'],[0,'        var style = OpenLayers.Util.extend({}, this.styles[styleUrl]);'],[0,'        return style;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: parseGeometry'],[-1,'     * Properties of this object are the functions that parse geometries based'],[-1,'     *     on their type.'],[-1,'     *\/'],[-1,'    parseGeometry: {'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseGeometry.point'],[-1,'         * Given a KML node representing a point geometry, create an OpenLayers'],[-1,'         *     point geometry.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * node - {DOMElement} A KML Point node.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry.Point&gt;} A point geometry.'],[-1,'         *\/'],[-1,'        point: function(node) {'],[0,'            var nodeList = this.getElementsByTagNameNS(node, this.internalns,'],[-1,'                                                       \&quot;coordinates\&quot;);'],[0,'            var coords = [];'],[0,'            if(nodeList.length &gt; 0) {'],[0,'                var coordString = nodeList[0].firstChild.nodeValue;'],[0,'                coordString = coordString.replace(this.regExes.removeSpace, \&quot;\&quot;);'],[0,'                coords = coordString.split(\&quot;,\&quot;);'],[-1,'            }'],[-1,''],[0,'            var point = null;'],[0,'            if(coords.length &gt; 1) {'],[-1,'                \/\/ preserve third dimension'],[0,'                if(coords.length == 2) {'],[0,'                    coords[2] = null;'],[-1,'                }'],[0,'                point = new OpenLayers.Geometry.Point(coords[0], coords[1],'],[-1,'                                                      coords[2]);'],[-1,'            } else {'],[0,'                throw \&quot;Bad coordinate string: \&quot; + coordString;'],[-1,'            }'],[0,'            return point;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseGeometry.linestring'],[-1,'         * Given a KML node representing a linestring geometry, create an'],[-1,'         *     OpenLayers linestring geometry.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * node - {DOMElement} A KML LineString node.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry.LineString&gt;} A linestring geometry.'],[-1,'         *\/'],[-1,'        linestring: function(node, ring) {'],[0,'            var nodeList = this.getElementsByTagNameNS(node, this.internalns,'],[-1,'                                                       \&quot;coordinates\&quot;);'],[0,'            var line = null;'],[0,'            if(nodeList.length &gt; 0) {'],[0,'                var coordString = this.getChildValue(nodeList[0]);'],[-1,''],[0,'                coordString = coordString.replace(this.regExes.trimSpace,'],[-1,'                                                  \&quot;\&quot;);'],[0,'                coordString = coordString.replace(this.regExes.trimComma,'],[-1,'                                                  \&quot;,\&quot;);'],[0,'                var pointList = coordString.split(this.regExes.splitSpace);'],[0,'                var numPoints = pointList.length;'],[0,'                var points = new Array(numPoints);'],[0,'                var coords, numCoords;'],[0,'                for(var i=0; i&lt;numPoints; ++i) {'],[0,'                    coords = pointList[i].split(\&quot;,\&quot;);'],[0,'                    numCoords = coords.length;'],[0,'                    if(numCoords &gt; 1) {'],[0,'                        if(coords.length == 2) {'],[0,'                            coords[2] = null;'],[-1,'                        }'],[0,'                        points[i] = new OpenLayers.Geometry.Point(coords[0],'],[-1,'                                                                  coords[1],'],[-1,'                                                                  coords[2]);'],[-1,'                    } else {'],[0,'                        throw \&quot;Bad LineString point coordinates: \&quot; +'],[-1,'                              pointList[i];'],[-1,'                    }'],[-1,'                }'],[0,'                if(numPoints) {'],[0,'                    if(ring) {'],[0,'                        line = new OpenLayers.Geometry.LinearRing(points);'],[-1,'                    } else {'],[0,'                        line = new OpenLayers.Geometry.LineString(points);'],[-1,'                    }'],[-1,'                } else {'],[0,'                    throw \&quot;Bad LineString coordinates: \&quot; + coordString;'],[-1,'                }'],[-1,'            }'],[-1,''],[0,'            return line;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseGeometry.polygon'],[-1,'         * Given a KML node representing a polygon geometry, create an'],[-1,'         *     OpenLayers polygon geometry.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * node - {DOMElement} A KML Polygon node.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry.Polygon&gt;} A polygon geometry.'],[-1,'         *\/'],[-1,'        polygon: function(node) {'],[0,'            var nodeList = this.getElementsByTagNameNS(node, this.internalns,'],[-1,'                                                       \&quot;LinearRing\&quot;);'],[0,'            var numRings = nodeList.length;'],[0,'            var components = new Array(numRings);'],[0,'            if(numRings &gt; 0) {'],[-1,'                \/\/ this assumes exterior ring first, inner rings after'],[0,'                var ring;'],[0,'                for(var i=0, len=nodeList.length; i&lt;len; ++i) {'],[0,'                    ring = this.parseGeometry.linestring.apply(this,'],[-1,'                                                        [nodeList[i], true]);'],[0,'                    if(ring) {'],[0,'                        components[i] = ring;'],[-1,'                    } else {'],[0,'                        throw \&quot;Bad LinearRing geometry: \&quot; + i;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.Polygon(components);'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseGeometry.multigeometry'],[-1,'         * Given a KML node representing a multigeometry, create an'],[-1,'         *     OpenLayers geometry collection.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * node - {DOMElement} A KML MultiGeometry node.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry.Collection&gt;} A geometry collection.'],[-1,'         *\/'],[-1,'        multigeometry: function(node) {'],[0,'            var child, parser;'],[0,'            var parts = [];'],[0,'            var children = node.childNodes;'],[0,'            for(var i=0, len=children.length; i&lt;len; ++i ) {'],[0,'                child = children[i];'],[0,'                if(child.nodeType == 1) {'],[0,'                    var type = (child.prefix) ?'],[-1,'                            child.nodeName.split(\&quot;:\&quot;)[1] :'],[-1,'                            child.nodeName;'],[0,'                    var parser = this.parseGeometry[type.toLowerCase()];'],[0,'                    if(parser) {'],[0,'                        parts.push(parser.apply(this, [child]));'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.Collection(parts);'],[-1,'        }'],[-1,'        '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseAttributes'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An attributes object.'],[-1,'     *\/'],[-1,'    parseAttributes: function(node) {'],[0,'        var attributes = {};'],[-1,'       '],[-1,'        \/\/ Extended Data is parsed first.'],[0,'        var edNodes = node.getElementsByTagName(\&quot;ExtendedData\&quot;);'],[0,'        if (edNodes.length) {'],[0,'            attributes = this.parseExtendedData(edNodes[0]);'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ assume attribute nodes are type 1 children with a type 3 or 4 child'],[0,'        var child, grandchildren, grandchild;'],[0,'        var children = node.childNodes;'],[-1,''],[0,'        for(var i=0, len=children.length; i&lt;len; ++i) {'],[0,'            child = children[i];'],[0,'            if(child.nodeType == 1) {'],[0,'                grandchildren = child.childNodes;'],[0,'                if(grandchildren.length &gt;= 1 &amp;&amp; grandchildren.length &lt;= 3) {'],[0,'                    var grandchild;'],[0,'                    switch (grandchildren.length) {'],[-1,'                        case 1:'],[0,'                            grandchild = grandchildren[0];'],[0,'                            break;'],[-1,'                        case 2:'],[0,'                            var c1 = grandchildren[0];'],[0,'                            var c2 = grandchildren[1];'],[0,'                            grandchild = (c1.nodeType == 3 || c1.nodeType == 4) ?'],[-1,'                                c1 : c2;'],[0,'                            break;'],[-1,'                        case 3:'],[-1,'                        default:'],[0,'                            grandchild = grandchildren[1];'],[0,'                            break;'],[-1,'                    }'],[0,'                    if(grandchild.nodeType == 3 || grandchild.nodeType == 4) {'],[0,'                        var name = (child.prefix) ?'],[-1,'                                child.nodeName.split(\&quot;:\&quot;)[1] :'],[-1,'                                child.nodeName;'],[0,'                        var value = OpenLayers.Util.getXmlNodeValue(grandchild);'],[0,'                        if (value) {'],[0,'                            value = value.replace(this.regExes.trimSpace, \&quot;\&quot;);'],[0,'                            attributes[name] = value;'],[-1,'                        }'],[-1,'                    }'],[-1,'                } '],[-1,'            }'],[-1,'        }'],[0,'        return attributes;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseExtendedData'],[-1,'     * Parse ExtendedData from KML. Limited support for schemas\/datatypes.'],[-1,'     *     See http:\/\/code.google.com\/apis\/kml\/documentation\/kmlreference.html#extendeddata'],[-1,'     *     for more information on extendeddata.'],[-1,'     *\/'],[-1,'    parseExtendedData: function(node) {'],[0,'        var attributes = {};'],[0,'        var i, len, data, key;'],[0,'        var dataNodes = node.getElementsByTagName(\&quot;Data\&quot;);'],[0,'        for (i = 0, len = dataNodes.length; i &lt; len; i++) {'],[0,'            data = dataNodes[i];'],[0,'            key = data.getAttribute(\&quot;name\&quot;);'],[0,'            var ed = {};'],[0,'            var valueNode = data.getElementsByTagName(\&quot;value\&quot;);'],[0,'            if (valueNode.length) {'],[0,'                ed[\'value\'] = this.getChildValue(valueNode[0]);'],[-1,'            }'],[0,'            if (this.kvpAttributes) {'],[0,'                attributes[key] = ed[\'value\'];'],[-1,'            } else {'],[0,'                var nameNode = data.getElementsByTagName(\&quot;displayName\&quot;);'],[0,'                if (nameNode.length) {'],[0,'                    ed[\'displayName\'] = this.getChildValue(nameNode[0]);'],[-1,'                }'],[0,'                attributes[key] = ed;'],[-1,'            } '],[-1,'        }'],[0,'        var simpleDataNodes = node.getElementsByTagName(\&quot;SimpleData\&quot;);'],[0,'        for (i = 0, len = simpleDataNodes.length; i &lt; len; i++) {'],[0,'            var ed = {};'],[0,'            data = simpleDataNodes[i];'],[0,'            key = data.getAttribute(\&quot;name\&quot;);'],[0,'            ed[\'value\'] = this.getChildValue(data);'],[0,'            if (this.kvpAttributes) {'],[0,'                attributes[key] = ed[\'value\'];'],[-1,'            } else {'],[0,'                ed[\'displayName\'] = key;'],[0,'                attributes[key] = ed;'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        return attributes;    '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseProperty'],[-1,'     * Convenience method to find a node and return its value'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * xmlNode    - {&lt;DOMElement&gt;}'],[-1,'     * namespace  - {String} namespace of the node to find'],[-1,'     * tagName    - {String} name of the property to parse'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} The value for the requested property (defaults to null)'],[-1,'     *\/    '],[-1,'    parseProperty: function(xmlNode, namespace, tagName) {'],[0,'        var value;'],[0,'        var nodeList = this.getElementsByTagNameNS(xmlNode, namespace, tagName);'],[0,'        try {'],[0,'            value = OpenLayers.Util.getXmlNodeValue(nodeList[0]);'],[-1,'        } catch(e) {'],[0,'            value = null;'],[-1,'        }'],[-1,'     '],[0,'        return value;'],[-1,'    },                                                              '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Accept Feature Collection, and return a string. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} An array of features.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A KML string.'],[-1,'     *\/'],[-1,'    write: function(features) {'],[0,'        if(!(OpenLayers.Util.isArray(features))) {'],[0,'            features = [features];'],[-1,'        }'],[0,'        var kml = this.createElementNS(this.kmlns, \&quot;kml\&quot;);'],[0,'        var folder = this.createFolderXML();'],[0,'        for(var i=0, len=features.length; i&lt;len; ++i) {'],[0,'            folder.appendChild(this.createPlacemarkXML(features[i]));'],[-1,'        }'],[0,'        kml.appendChild(folder);'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [kml]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createFolderXML'],[-1,'     * Creates and returns a KML folder node'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    createFolderXML: function() {'],[-1,'        \/\/ Folder'],[0,'        var folder = this.createElementNS(this.kmlns, \&quot;Folder\&quot;);'],[-1,''],[-1,'        \/\/ Folder name'],[0,'        if (this.foldersName) {'],[0,'            var folderName = this.createElementNS(this.kmlns, \&quot;name\&quot;);'],[0,'            var folderNameText = this.createTextNode(this.foldersName); '],[0,'            folderName.appendChild(folderNameText);'],[0,'            folder.appendChild(folderName);'],[-1,'        }'],[-1,''],[-1,'        \/\/ Folder description'],[0,'        if (this.foldersDesc) {'],[0,'            var folderDesc = this.createElementNS(this.kmlns, \&quot;description\&quot;);        '],[0,'            var folderDescText = this.createTextNode(this.foldersDesc); '],[0,'            folderDesc.appendChild(folderDescText);'],[0,'            folder.appendChild(folderDesc);'],[-1,'        }'],[-1,''],[0,'        return folder;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createPlacemarkXML'],[-1,'     * Creates and returns a KML placemark node representing the given feature. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    createPlacemarkXML: function(feature) {        '],[-1,'        \/\/ Placemark name'],[0,'        var placemarkName = this.createElementNS(this.kmlns, \&quot;name\&quot;);'],[0,'        var label = (feature.style &amp;&amp; feature.style.label) ? feature.style.label : feature.id;'],[0,'        var name = feature.attributes.name || label;'],[0,'        placemarkName.appendChild(this.createTextNode(name));'],[-1,''],[-1,'        \/\/ Placemark description'],[0,'        var placemarkDesc = this.createElementNS(this.kmlns, \&quot;description\&quot;);'],[0,'        var desc = feature.attributes.description || this.placemarksDesc;'],[0,'        placemarkDesc.appendChild(this.createTextNode(desc));'],[-1,'        '],[-1,'        \/\/ Placemark'],[0,'        var placemarkNode = this.createElementNS(this.kmlns, \&quot;Placemark\&quot;);'],[0,'        if(feature.fid != null) {'],[0,'            placemarkNode.setAttribute(\&quot;id\&quot;, feature.fid);'],[-1,'        }'],[0,'        placemarkNode.appendChild(placemarkName);'],[0,'        placemarkNode.appendChild(placemarkDesc);'],[-1,''],[-1,'        \/\/ Geometry node (Point, LineString, etc. nodes)'],[0,'        var geometryNode = this.buildGeometryNode(feature.geometry);'],[0,'        placemarkNode.appendChild(geometryNode);        '],[-1,'        '],[-1,'        \/\/ output attributes as extendedData'],[0,'        if (feature.attributes) {'],[0,'            var edNode = this.buildExtendedData(feature.attributes);'],[0,'            if (edNode) {'],[0,'                placemarkNode.appendChild(edNode);'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        return placemarkNode;'],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'     * Method: buildGeometryNode'],[-1,'     * Builds and returns a KML geometry node with the given geometry.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    buildGeometryNode: function(geometry) {'],[0,'        var className = geometry.CLASS_NAME;'],[0,'        var type = className.substring(className.lastIndexOf(\&quot;.\&quot;) + 1);'],[0,'        var builder = this.buildGeometry[type.toLowerCase()];'],[0,'        var node = null;'],[0,'        if(builder) {'],[0,'            node = builder.apply(this, [geometry]);'],[-1,'        }'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: buildGeometry'],[-1,'     * Object containing methods to do the actual geometry node building'],[-1,'     *     based on geometry type.'],[-1,'     *\/'],[-1,'    buildGeometry: {'],[-1,'        \/\/ TBD: Anybody care about namespace aliases here (these nodes have'],[-1,'        \/\/    no prefixes)?'],[-1,''],[-1,'        \/**'],[-1,'         * Method: buildGeometry.point'],[-1,'         * Given an OpenLayers point geometry, create a KML point.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.Point&gt;} A point geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A KML point node.'],[-1,'         *\/'],[-1,'        point: function(geometry) {'],[0,'            var kml = this.createElementNS(this.kmlns, \&quot;Point\&quot;);'],[0,'            kml.appendChild(this.buildCoordinatesNode(geometry));'],[0,'            return kml;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: buildGeometry.multipoint'],[-1,'         * Given an OpenLayers multipoint geometry, create a KML'],[-1,'         *     GeometryCollection.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.Point&gt;} A multipoint geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A KML GeometryCollection node.'],[-1,'         *\/'],[-1,'        multipoint: function(geometry) {'],[0,'            return this.buildGeometry.collection.apply(this, [geometry]);'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Method: buildGeometry.linestring'],[-1,'         * Given an OpenLayers linestring geometry, create a KML linestring.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.LineString&gt;} A linestring geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A KML linestring node.'],[-1,'         *\/'],[-1,'        linestring: function(geometry) {'],[0,'            var kml = this.createElementNS(this.kmlns, \&quot;LineString\&quot;);'],[0,'            kml.appendChild(this.buildCoordinatesNode(geometry));'],[0,'            return kml;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: buildGeometry.multilinestring'],[-1,'         * Given an OpenLayers multilinestring geometry, create a KML'],[-1,'         *     GeometryCollection.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.Point&gt;} A multilinestring geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A KML GeometryCollection node.'],[-1,'         *\/'],[-1,'        multilinestring: function(geometry) {'],[0,'            return this.buildGeometry.collection.apply(this, [geometry]);'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Method: buildGeometry.linearring'],[-1,'         * Given an OpenLayers linearring geometry, create a KML linearring.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.LinearRing&gt;} A linearring geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A KML linearring node.'],[-1,'         *\/'],[-1,'        linearring: function(geometry) {'],[0,'            var kml = this.createElementNS(this.kmlns, \&quot;LinearRing\&quot;);'],[0,'            kml.appendChild(this.buildCoordinatesNode(geometry));'],[0,'            return kml;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: buildGeometry.polygon'],[-1,'         * Given an OpenLayers polygon geometry, create a KML polygon.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.Polygon&gt;} A polygon geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A KML polygon node.'],[-1,'         *\/'],[-1,'        polygon: function(geometry) {'],[0,'            var kml = this.createElementNS(this.kmlns, \&quot;Polygon\&quot;);'],[0,'            var rings = geometry.components;'],[0,'            var ringMember, ringGeom, type;'],[0,'            for(var i=0, len=rings.length; i&lt;len; ++i) {'],[0,'                type = (i==0) ? \&quot;outerBoundaryIs\&quot; : \&quot;innerBoundaryIs\&quot;;'],[0,'                ringMember = this.createElementNS(this.kmlns, type);'],[0,'                ringGeom = this.buildGeometry.linearring.apply(this,'],[-1,'                                                               [rings[i]]);'],[0,'                ringMember.appendChild(ringGeom);'],[0,'                kml.appendChild(ringMember);'],[-1,'            }'],[0,'            return kml;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: buildGeometry.multipolygon'],[-1,'         * Given an OpenLayers multipolygon geometry, create a KML'],[-1,'         *     GeometryCollection.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.Point&gt;} A multipolygon geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A KML GeometryCollection node.'],[-1,'         *\/'],[-1,'        multipolygon: function(geometry) {'],[0,'            return this.buildGeometry.collection.apply(this, [geometry]);'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Method: buildGeometry.collection'],[-1,'         * Given an OpenLayers geometry collection, create a KML MultiGeometry.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.Collection&gt;} A geometry collection.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A KML MultiGeometry node.'],[-1,'         *\/'],[-1,'        collection: function(geometry) {'],[0,'            var kml = this.createElementNS(this.kmlns, \&quot;MultiGeometry\&quot;);'],[0,'            var child;'],[0,'            for(var i=0, len=geometry.components.length; i&lt;len; ++i) {'],[0,'                child = this.buildGeometryNode.apply(this,'],[-1,'                                                     [geometry.components[i]]);'],[0,'                if(child) {'],[0,'                    kml.appendChild(child);'],[-1,'                }'],[-1,'            }'],[0,'            return kml;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: buildCoordinatesNode'],[-1,'     * Builds and returns the KML coordinates node with the given geometry'],[-1,'     * &lt;coordinates&gt;...&lt;\/coordinates&gt;'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/     '],[-1,'    buildCoordinatesNode: function(geometry) {'],[0,'        var coordinatesNode = this.createElementNS(this.kmlns, \&quot;coordinates\&quot;);'],[-1,'        '],[0,'        var path;'],[0,'        var points = geometry.components;'],[0,'        if(points) {'],[-1,'            \/\/ LineString or LinearRing'],[0,'            var point;'],[0,'            var numPoints = points.length;'],[0,'            var parts = new Array(numPoints);'],[0,'            for(var i=0; i&lt;numPoints; ++i) {'],[0,'                point = points[i];'],[0,'                parts[i] = this.buildCoordinates(point);'],[-1,'            }'],[0,'            path = parts.join(\&quot; \&quot;);'],[-1,'        } else {'],[-1,'            \/\/ Point'],[0,'            path = this.buildCoordinates(geometry);'],[-1,'        }'],[-1,'        '],[0,'        var txtNode = this.createTextNode(path);'],[0,'        coordinatesNode.appendChild(txtNode);'],[-1,'        '],[0,'        return coordinatesNode;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: buildCoordinates'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     *'],[-1,'     * Returns'],[-1,'     * {String} a coordinate pair'],[-1,'     *\/'],[-1,'    buildCoordinates: function(point) {'],[0,'        if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'            point = point.clone();'],[0,'            point.transform(this.internalProjection, '],[-1,'                               this.externalProjection);'],[-1,'        }'],[0,'        return point.x + \&quot;,\&quot; + point.y;                     '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: buildExtendedData'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * attributes - {Object}'],[-1,'     *'],[-1,'     * Returns'],[-1,'     * {DOMElement} A KML ExtendedData node or {null} if no attributes.'],[-1,'     *\/'],[-1,'    buildExtendedData: function(attributes) {'],[0,'        var extendedData = this.createElementNS(this.kmlns, \&quot;ExtendedData\&quot;);'],[0,'        for (var attributeName in attributes) {'],[-1,'            \/\/ empty, name, description, styleUrl attributes ignored'],[0,'            if (attributes[attributeName] &amp;&amp; attributeName != \&quot;name\&quot; &amp;&amp; attributeName != \&quot;description\&quot; &amp;&amp; attributeName != \&quot;styleUrl\&quot;) {'],[0,'                var data = this.createElementNS(this.kmlns, \&quot;Data\&quot;);'],[0,'                data.setAttribute(\&quot;name\&quot;, attributeName);'],[0,'                var value = this.createElementNS(this.kmlns, \&quot;value\&quot;);'],[0,'                if (typeof attributes[attributeName] == \&quot;object\&quot;) {'],[-1,'                    \/\/ cater for object attributes with \'value\' properties'],[-1,'                    \/\/ other object properties will output an empty node'],[0,'                    if (attributes[attributeName].value) {'],[0,'                        value.appendChild(this.createTextNode(attributes[attributeName].value));'],[-1,'                    }'],[0,'                    if (attributes[attributeName].displayName) {'],[0,'                        var displayName = this.createElementNS(this.kmlns, \&quot;displayName\&quot;);'],[-1,'                        \/\/ displayName always written as CDATA'],[0,'                        displayName.appendChild(this.getXMLDoc().createCDATASection(attributes[attributeName].displayName));'],[0,'                        data.appendChild(displayName);'],[-1,'                    }'],[-1,'                } else {'],[0,'                    value.appendChild(this.createTextNode(attributes[attributeName]));'],[-1,'                }'],[0,'                data.appendChild(value);'],[0,'                extendedData.appendChild(data);'],[-1,'            }'],[-1,'        }'],[0,'        if (this.isSimpleContent(extendedData)) {'],[0,'            return null;'],[-1,'        } else {'],[0,'            return extendedData;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.KML\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Geometry\/MultiLineString.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Geometry\/Collection.js'],[-1,' * @requires OpenLayers\/Geometry\/LineString.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Geometry.MultiLineString'],[-1,' * A MultiLineString is a geometry with multiple &lt;OpenLayers.Geometry.LineString&gt;'],[-1,' * components.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Geometry.Collection&gt;'],[-1,' *  - &lt;OpenLayers.Geometry&gt; '],[-1,' *\/'],[1,'OpenLayers.Geometry.MultiLineString = OpenLayers.Class('],[-1,'  OpenLayers.Geometry.Collection, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: componentTypes'],[-1,'     * {Array(String)} An array of class names representing the types of'],[-1,'     * components that the collection can include.  A null value means the'],[-1,'     * component types are not restricted.'],[-1,'     *\/'],[-1,'    componentTypes: [\&quot;OpenLayers.Geometry.LineString\&quot;],'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Geometry.MultiLineString'],[-1,'     * Constructor for a MultiLineString Geometry.'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * components - {Array(&lt;OpenLayers.Geometry.LineString&gt;)} '],[-1,'     *'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: split'],[-1,'     * Use this geometry (the source) to attempt to split a target geometry.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} The target geometry.'],[-1,'     * options - {Object} Properties of this object will be used to determine'],[-1,'     *     how the split is conducted.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * mutual - {Boolean} Split the source geometry in addition to the target'],[-1,'     *     geometry.  Default is false.'],[-1,'     * edge - {Boolean} Allow splitting when only edges intersect.  Default is'],[-1,'     *     true.  If false, a vertex on the source must be within the tolerance'],[-1,'     *     distance of the intersection to be considered a split.'],[-1,'     * tolerance - {Number} If a non-null value is provided, intersections'],[-1,'     *     within the tolerance distance of an existing vertex on the source'],[-1,'     *     will be assumed to occur at the vertex.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Array} A list of geometries (of this same type as the target) that'],[-1,'     *     result from splitting the target with the source geometry.  The'],[-1,'     *     source and target geometry will remain unmodified.  If no split'],[-1,'     *     results, null will be returned.  If mutual is true and a split'],[-1,'     *     results, return will be an array of two arrays - the first will be'],[-1,'     *     all geometries that result from splitting the source geometry and'],[-1,'     *     the second will be all geometries that result from splitting the'],[-1,'     *     target geometry.'],[-1,'     *\/'],[-1,'    split: function(geometry, options) {'],[0,'        var results = null;'],[0,'        var mutual = options &amp;&amp; options.mutual;'],[0,'        var splits, sourceLine, sourceLines, sourceSplit, targetSplit;'],[0,'        var sourceParts = [];'],[0,'        var targetParts = [geometry];'],[0,'        for(var i=0, len=this.components.length; i&lt;len; ++i) {'],[0,'            sourceLine = this.components[i];'],[0,'            sourceSplit = false;'],[0,'            for(var j=0; j &lt; targetParts.length; ++j) { '],[0,'                splits = sourceLine.split(targetParts[j], options);'],[0,'                if(splits) {'],[0,'                    if(mutual) {'],[0,'                        sourceLines = splits[0];'],[0,'                        for(var k=0, klen=sourceLines.length; k&lt;klen; ++k) {'],[0,'                            if(k===0 &amp;&amp; sourceParts.length) {'],[0,'                                sourceParts[sourceParts.length-1].addComponent('],[-1,'                                    sourceLines[k]'],[-1,'                                );'],[-1,'                            } else {'],[0,'                                sourceParts.push('],[-1,'                                    new OpenLayers.Geometry.MultiLineString(['],[-1,'                                        sourceLines[k]'],[-1,'                                    ])'],[-1,'                                );'],[-1,'                            }'],[-1,'                        }'],[0,'                        sourceSplit = true;'],[0,'                        splits = splits[1];'],[-1,'                    }'],[0,'                    if(splits.length) {'],[-1,'                        \/\/ splice in new target parts'],[0,'                        splits.unshift(j, 1);'],[0,'                        Array.prototype.splice.apply(targetParts, splits);'],[0,'                        break;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            if(!sourceSplit) {'],[-1,'                \/\/ source line was not hit'],[0,'                if(sourceParts.length) {'],[-1,'                    \/\/ add line to existing multi'],[0,'                    sourceParts[sourceParts.length-1].addComponent('],[-1,'                        sourceLine.clone()'],[-1,'                    );'],[-1,'                } else {'],[-1,'                    \/\/ create a fresh multi'],[0,'                    sourceParts = ['],[-1,'                        new OpenLayers.Geometry.MultiLineString('],[-1,'                            sourceLine.clone()'],[-1,'                        )'],[-1,'                    ];'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        if(sourceParts &amp;&amp; sourceParts.length &gt; 1) {'],[0,'            sourceSplit = true;'],[-1,'        } else {'],[0,'            sourceParts = [];'],[-1,'        }'],[0,'        if(targetParts &amp;&amp; targetParts.length &gt; 1) {'],[0,'            targetSplit = true;'],[-1,'        } else {'],[0,'            targetParts = [];'],[-1,'        }'],[0,'        if(sourceSplit || targetSplit) {'],[0,'            if(mutual) {'],[0,'                results = [sourceParts, targetParts];'],[-1,'            } else {'],[0,'                results = targetParts;'],[-1,'            }'],[-1,'        }'],[0,'        return results;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: splitWith'],[-1,'     * Split this geometry (the target) with the given geometry (the source).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} A geometry used to split this'],[-1,'     *     geometry (the source).'],[-1,'     * options - {Object} Properties of this object will be used to determine'],[-1,'     *     how the split is conducted.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * mutual - {Boolean} Split the source geometry in addition to the target'],[-1,'     *     geometry.  Default is false.'],[-1,'     * edge - {Boolean} Allow splitting when only edges intersect.  Default is'],[-1,'     *     true.  If false, a vertex on the source must be within the tolerance'],[-1,'     *     distance of the intersection to be considered a split.'],[-1,'     * tolerance - {Number} If a non-null value is provided, intersections'],[-1,'     *     within the tolerance distance of an existing vertex on the source'],[-1,'     *     will be assumed to occur at the vertex.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Array} A list of geometries (of this same type as the target) that'],[-1,'     *     result from splitting the target with the source geometry.  The'],[-1,'     *     source and target geometry will remain unmodified.  If no split'],[-1,'     *     results, null will be returned.  If mutual is true and a split'],[-1,'     *     results, return will be an array of two arrays - the first will be'],[-1,'     *     all geometries that result from splitting the source geometry and'],[-1,'     *     the second will be all geometries that result from splitting the'],[-1,'     *     target geometry.'],[-1,'     *\/'],[-1,'    splitWith: function(geometry, options) {'],[0,'        var results = null;'],[0,'        var mutual = options &amp;&amp; options.mutual;'],[0,'        var splits, targetLine, sourceLines, sourceSplit, targetSplit, sourceParts, targetParts;'],[0,'        if(geometry instanceof OpenLayers.Geometry.LineString) {'],[0,'            targetParts = [];'],[0,'            sourceParts = [geometry];'],[0,'            for(var i=0, len=this.components.length; i&lt;len; ++i) {'],[0,'                targetSplit = false;'],[0,'                targetLine = this.components[i];'],[0,'                for(var j=0; j&lt;sourceParts.length; ++j) {'],[0,'                    splits = sourceParts[j].split(targetLine, options);'],[0,'                    if(splits) {'],[0,'                        if(mutual) {'],[0,'                            sourceLines = splits[0];'],[0,'                            if(sourceLines.length) {'],[-1,'                                \/\/ splice in new source parts'],[0,'                                sourceLines.unshift(j, 1);'],[0,'                                Array.prototype.splice.apply(sourceParts, sourceLines);'],[0,'                                j += sourceLines.length - 2;'],[-1,'                            }'],[0,'                            splits = splits[1];'],[0,'                            if(splits.length === 0) {'],[0,'                                splits = [targetLine.clone()];'],[-1,'                            }'],[-1,'                        }'],[0,'                        for(var k=0, klen=splits.length; k&lt;klen; ++k) {'],[0,'                            if(k===0 &amp;&amp; targetParts.length) {'],[0,'                                targetParts[targetParts.length-1].addComponent('],[-1,'                                    splits[k]'],[-1,'                                );'],[-1,'                            } else {'],[0,'                                targetParts.push('],[-1,'                                    new OpenLayers.Geometry.MultiLineString(['],[-1,'                                        splits[k]'],[-1,'                                    ])'],[-1,'                                );'],[-1,'                            }'],[-1,'                        }'],[0,'                        targetSplit = true;                    '],[-1,'                    }'],[-1,'                }'],[0,'                if(!targetSplit) {'],[-1,'                    \/\/ target component was not hit'],[0,'                    if(targetParts.length) {'],[-1,'                        \/\/ add it to any existing multi-line'],[0,'                        targetParts[targetParts.length-1].addComponent('],[-1,'                            targetLine.clone()'],[-1,'                        );'],[-1,'                    } else {'],[-1,'                        \/\/ or start with a fresh multi-line'],[0,'                        targetParts = ['],[-1,'                            new OpenLayers.Geometry.MultiLineString(['],[-1,'                                targetLine.clone()'],[-1,'                            ])'],[-1,'                        ];'],[-1,'                    }'],[-1,'                    '],[-1,'                }'],[-1,'            }'],[-1,'        } else {'],[0,'            results = geometry.split(this);'],[-1,'        }'],[0,'        if(sourceParts &amp;&amp; sourceParts.length &gt; 1) {'],[0,'            sourceSplit = true;'],[-1,'        } else {'],[0,'            sourceParts = [];'],[-1,'        }'],[0,'        if(targetParts &amp;&amp; targetParts.length &gt; 1) {'],[0,'            targetSplit = true;'],[-1,'        } else {'],[0,'            targetParts = [];'],[-1,'        }'],[0,'        if(sourceSplit || targetSplit) {'],[0,'            if(mutual) {'],[0,'                results = [sourceParts, targetParts];'],[-1,'            } else {'],[0,'                results = targetParts;'],[-1,'            }'],[-1,'        }'],[0,'        return results;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Geometry.MultiLineString\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Geometry\/MultiPolygon.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Geometry\/Collection.js'],[-1,' * @requires OpenLayers\/Geometry\/Polygon.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Geometry.MultiPolygon'],[-1,' * MultiPolygon is a geometry with multiple &lt;OpenLayers.Geometry.Polygon&gt;'],[-1,' * components.  Create a new instance with the &lt;OpenLayers.Geometry.MultiPolygon&gt;'],[-1,' * constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Geometry.Collection&gt;'],[-1,' *\/'],[1,'OpenLayers.Geometry.MultiPolygon = OpenLayers.Class('],[-1,'  OpenLayers.Geometry.Collection, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: componentTypes'],[-1,'     * {Array(String)} An array of class names representing the types of'],[-1,'     * components that the collection can include.  A null value means the'],[-1,'     * component types are not restricted.'],[-1,'     *\/'],[-1,'    componentTypes: [\&quot;OpenLayers.Geometry.Polygon\&quot;],'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Geometry.MultiPolygon'],[-1,'     * Create a new MultiPolygon geometry'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * components - {Array(&lt;OpenLayers.Geometry.Polygon&gt;)} An array of polygons'],[-1,'     *              used to generate the MultiPolygon'],[-1,'     *'],[-1,'     *\/'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Geometry.MultiPolygon\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/GML.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' * @requires OpenLayers\/Geometry\/MultiPoint.js'],[-1,' * @requires OpenLayers\/Geometry\/LineString.js'],[-1,' * @requires OpenLayers\/Geometry\/MultiLineString.js'],[-1,' * @requires OpenLayers\/Geometry\/Polygon.js'],[-1,' * @requires OpenLayers\/Geometry\/MultiPolygon.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.GML'],[-1,' * Read\/Write GML. Create a new instance with the &lt;OpenLayers.Format.GML&gt;'],[-1,' *     constructor.  Supports the GML simple features profile.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.GML = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: featureNS'],[-1,'     * {String} Namespace used for feature attributes.  Default is'],[-1,'     *     \&quot;http:\/\/mapserver.gis.umn.edu\/mapserver\&quot;.'],[-1,'     *\/'],[-1,'    featureNS: \&quot;http:\/\/mapserver.gis.umn.edu\/mapserver\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: featurePrefix'],[-1,'     * {String} Namespace alias (or prefix) for feature nodes.  Default is'],[-1,'     *     \&quot;feature\&quot;.'],[-1,'     *\/'],[-1,'    featurePrefix: \&quot;feature\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: featureName'],[-1,'     * {String} Element name for features. Default is \&quot;featureMember\&quot;.'],[-1,'     *\/'],[-1,'    featureName: \&quot;featureMember\&quot;, '],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: layerName'],[-1,'     * {String} Name of data layer. Default is \&quot;features\&quot;.'],[-1,'     *\/'],[-1,'    layerName: \&quot;features\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: geometryName'],[-1,'     * {String} Name of geometry element.  Defaults to \&quot;geometry\&quot;.'],[-1,'     *\/'],[-1,'    geometryName: \&quot;geometry\&quot;,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: collectionName'],[-1,'     * {String} Name of featureCollection element.'],[-1,'     *\/'],[-1,'    collectionName: \&quot;FeatureCollection\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: gmlns'],[-1,'     * {String} GML Namespace.'],[-1,'     *\/'],[-1,'    gmlns: \&quot;http:\/\/www.opengis.net\/gml\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: extractAttributes'],[-1,'     * {Boolean} Extract attributes from GML.'],[-1,'     *\/'],[-1,'    extractAttributes: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: xy'],[-1,'     * {Boolean} Order of the GML coordinate true:(x,y) or false:(y,x)'],[-1,'     * Changing is not recommended, a new Format should be instantiated.'],[-1,'     *\/ '],[-1,'    xy: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.GML'],[-1,'     * Create a new parser for GML.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[-1,'        \/\/ compile regular expressions once instead of every time they are used'],[0,'        this.regExes = {'],[-1,'            trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'            removeSpace: (\/\\s*\/g),'],[-1,'            splitSpace: (\/\\s+\/),'],[-1,'            trimComma: (\/\\s*,\\s*\/g)'],[-1,'        };'],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read data from a string, and return a list of features. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} An array of features.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) { '],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        var featureNodes = this.getElementsByTagNameNS(data.documentElement,'],[-1,'                                                       this.gmlns,'],[-1,'                                                       this.featureName);'],[0,'        var features = [];'],[0,'        for(var i=0; i&lt;featureNodes.length; i++) {'],[0,'            var feature = this.parseFeature(featureNodes[i]);'],[0,'            if(feature) {'],[0,'                features.push(feature);'],[-1,'            }'],[-1,'        }'],[0,'        return features;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseFeature'],[-1,'     * This function is the core of the GML parsing code in OpenLayers.'],[-1,'     *    It creates the geometries that are then attached to the returned'],[-1,'     *    feature, and calls parseAttributes() to get attribute data out.'],[-1,'     *    '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} A GML feature node. '],[-1,'     *\/'],[-1,'    parseFeature: function(node) {'],[-1,'        \/\/ only accept one geometry per feature - look for highest \&quot;order\&quot;'],[0,'        var order = [\&quot;MultiPolygon\&quot;, \&quot;Polygon\&quot;,'],[-1,'                     \&quot;MultiLineString\&quot;, \&quot;LineString\&quot;,'],[-1,'                     \&quot;MultiPoint\&quot;, \&quot;Point\&quot;, \&quot;Envelope\&quot;];'],[-1,'        \/\/ FIXME: In case we parse a feature with no geometry, but boundedBy an Envelope,'],[-1,'        \/\/ this code creates a geometry derived from the Envelope. This is not correct.'],[0,'        var type, nodeList, geometry, parser;'],[0,'        for(var i=0; i&lt;order.length; ++i) {'],[0,'            type = order[i];'],[0,'            nodeList = this.getElementsByTagNameNS(node, this.gmlns, type);'],[0,'            if(nodeList.length &gt; 0) {'],[-1,'                \/\/ only deal with first geometry of this type'],[0,'                parser = this.parseGeometry[type.toLowerCase()];'],[0,'                if(parser) {'],[0,'                    geometry = parser.apply(this, [nodeList[0]]);'],[0,'                    if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'                        geometry.transform(this.externalProjection, '],[-1,'                                           this.internalProjection); '],[-1,'                    }                       '],[-1,'                } else {'],[0,'                    throw new TypeError(\&quot;Unsupported geometry type: \&quot; + type);'],[-1,'                }'],[-1,'                \/\/ stop looking for different geometry types'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        var bounds;'],[0,'        var boxNodes = this.getElementsByTagNameNS(node, this.gmlns, \&quot;Box\&quot;);'],[0,'        for(i=0; i&lt;boxNodes.length; ++i) {'],[0,'            var boxNode = boxNodes[i];'],[0,'            var box = this.parseGeometry[\&quot;box\&quot;].apply(this, [boxNode]);'],[0,'            var parentNode = boxNode.parentNode;'],[0,'            var parentName = parentNode.localName ||'],[-1,'                             parentNode.nodeName.split(\&quot;:\&quot;).pop();'],[0,'            if(parentName === \&quot;boundedBy\&quot;) {'],[0,'                bounds = box;'],[-1,'            } else {'],[0,'                geometry = box.toGeometry();'],[-1,'            }'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ construct feature (optionally with attributes)'],[0,'        var attributes;'],[0,'        if(this.extractAttributes) {'],[0,'            attributes = this.parseAttributes(node);'],[-1,'        }'],[0,'        var feature = new OpenLayers.Feature.Vector(geometry, attributes);'],[0,'        feature.bounds = bounds;'],[-1,'        '],[0,'        feature.gml = {'],[-1,'            featureType: node.firstChild.nodeName.split(\&quot;:\&quot;)[1],'],[-1,'            featureNS: node.firstChild.namespaceURI,'],[-1,'            featureNSPrefix: node.firstChild.prefix'],[-1,'        };'],[-1,'                '],[-1,'        \/\/ assign fid - this can come from a \&quot;fid\&quot; or \&quot;id\&quot; attribute'],[0,'        var childNode = node.firstChild;'],[0,'        var fid;'],[0,'        while(childNode) {'],[0,'            if(childNode.nodeType == 1) {'],[0,'                fid = childNode.getAttribute(\&quot;fid\&quot;) ||'],[-1,'                      childNode.getAttribute(\&quot;id\&quot;);'],[0,'                if(fid) {'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[0,'            childNode = childNode.nextSibling;'],[-1,'        }'],[0,'        feature.fid = fid;'],[0,'        return feature;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: parseGeometry'],[-1,'     * Properties of this object are the functions that parse geometries based'],[-1,'     *     on their type.'],[-1,'     *\/'],[-1,'    parseGeometry: {'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseGeometry.point'],[-1,'         * Given a GML node representing a point geometry, create an OpenLayers'],[-1,'         *     point geometry.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * node - {DOMElement} A GML node.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry.Point&gt;} A point geometry.'],[-1,'         *\/'],[-1,'        point: function(node) {'],[-1,'            \/**'],[-1,'             * Three coordinate variations to consider:'],[-1,'             * 1) &lt;gml:pos&gt;x y z&lt;\/gml:pos&gt;'],[-1,'             * 2) &lt;gml:coordinates&gt;x, y, z&lt;\/gml:coordinates&gt;'],[-1,'             * 3) &lt;gml:coord&gt;&lt;gml:X&gt;x&lt;\/gml:X&gt;&lt;gml:Y&gt;y&lt;\/gml:Y&gt;&lt;\/gml:coord&gt;'],[-1,'             *\/'],[0,'            var nodeList, coordString;'],[0,'            var coords = [];'],[-1,''],[-1,'            \/\/ look for &lt;gml:pos&gt;'],[0,'            var nodeList = this.getElementsByTagNameNS(node, this.gmlns, \&quot;pos\&quot;);'],[0,'            if(nodeList.length &gt; 0) {'],[0,'                coordString = nodeList[0].firstChild.nodeValue;'],[0,'                coordString = coordString.replace(this.regExes.trimSpace, \&quot;\&quot;);'],[0,'                coords = coordString.split(this.regExes.splitSpace);'],[-1,'            }'],[-1,''],[-1,'            \/\/ look for &lt;gml:coordinates&gt;'],[0,'            if(coords.length == 0) {'],[0,'                nodeList = this.getElementsByTagNameNS(node, this.gmlns,'],[-1,'                                                       \&quot;coordinates\&quot;);'],[0,'                if(nodeList.length &gt; 0) {'],[0,'                    coordString = nodeList[0].firstChild.nodeValue;'],[0,'                    coordString = coordString.replace(this.regExes.removeSpace,'],[-1,'                                                      \&quot;\&quot;);'],[0,'                    coords = coordString.split(\&quot;,\&quot;);'],[-1,'                }'],[-1,'            }'],[-1,''],[-1,'            \/\/ look for &lt;gml:coord&gt;'],[0,'            if(coords.length == 0) {'],[0,'                nodeList = this.getElementsByTagNameNS(node, this.gmlns,'],[-1,'                                                       \&quot;coord\&quot;);'],[0,'                if(nodeList.length &gt; 0) {'],[0,'                    var xList = this.getElementsByTagNameNS(nodeList[0],'],[-1,'                                                            this.gmlns, \&quot;X\&quot;);'],[0,'                    var yList = this.getElementsByTagNameNS(nodeList[0],'],[-1,'                                                            this.gmlns, \&quot;Y\&quot;);'],[0,'                    if(xList.length &gt; 0 &amp;&amp; yList.length &gt; 0) {'],[0,'                        coords = [xList[0].firstChild.nodeValue,'],[-1,'                                  yList[0].firstChild.nodeValue];'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'                '],[-1,'            \/\/ preserve third dimension'],[0,'            if(coords.length == 2) {'],[0,'                coords[2] = null;'],[-1,'            }'],[-1,'            '],[0,'            if (this.xy) {'],[0,'                return new OpenLayers.Geometry.Point(coords[0], coords[1],'],[-1,'                                                 coords[2]);'],[-1,'            }'],[-1,'            else{'],[0,'                return new OpenLayers.Geometry.Point(coords[1], coords[0],'],[-1,'                                                 coords[2]);'],[-1,'            }'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseGeometry.multipoint'],[-1,'         * Given a GML node representing a multipoint geometry, create an'],[-1,'         *     OpenLayers multipoint geometry.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * node - {DOMElement} A GML node.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry.MultiPoint&gt;} A multipoint geometry.'],[-1,'         *\/'],[-1,'        multipoint: function(node) {'],[0,'            var nodeList = this.getElementsByTagNameNS(node, this.gmlns,'],[-1,'                                                       \&quot;Point\&quot;);'],[0,'            var components = [];'],[0,'            if(nodeList.length &gt; 0) {'],[0,'                var point;'],[0,'                for(var i=0; i&lt;nodeList.length; ++i) {'],[0,'                    point = this.parseGeometry.point.apply(this, [nodeList[i]]);'],[0,'                    if(point) {'],[0,'                        components.push(point);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.MultiPoint(components);'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseGeometry.linestring'],[-1,'         * Given a GML node representing a linestring geometry, create an'],[-1,'         *     OpenLayers linestring geometry.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * node - {DOMElement} A GML node.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry.LineString&gt;} A linestring geometry.'],[-1,'         *\/'],[-1,'        linestring: function(node, ring) {'],[-1,'            \/**'],[-1,'             * Two coordinate variations to consider:'],[-1,'             * 1) &lt;gml:posList dimension=\&quot;d\&quot;&gt;x0 y0 z0 x1 y1 z1&lt;\/gml:posList&gt;'],[-1,'             * 2) &lt;gml:coordinates&gt;x0, y0, z0 x1, y1, z1&lt;\/gml:coordinates&gt;'],[-1,'             *\/'],[0,'            var nodeList, coordString;'],[0,'            var coords = [];'],[0,'            var points = [];'],[-1,''],[-1,'            \/\/ look for &lt;gml:posList&gt;'],[0,'            nodeList = this.getElementsByTagNameNS(node, this.gmlns, \&quot;posList\&quot;);'],[0,'            if(nodeList.length &gt; 0) {'],[0,'                coordString = this.getChildValue(nodeList[0]);'],[0,'                coordString = coordString.replace(this.regExes.trimSpace, \&quot;\&quot;);'],[0,'                coords = coordString.split(this.regExes.splitSpace);'],[0,'                var dim = parseInt(nodeList[0].getAttribute(\&quot;dimension\&quot;));'],[0,'                var j, x, y, z;'],[0,'                for(var i=0; i&lt;coords.length\/dim; ++i) {'],[0,'                    j = i * dim;'],[0,'                    x = coords[j];'],[0,'                    y = coords[j+1];'],[0,'                    z = (dim == 2) ? null : coords[j+2];'],[0,'                    if (this.xy) {'],[0,'                        points.push(new OpenLayers.Geometry.Point(x, y, z));'],[-1,'                    } else {'],[0,'                        points.push(new OpenLayers.Geometry.Point(y, x, z));'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,''],[-1,'            \/\/ look for &lt;gml:coordinates&gt;'],[0,'            if(coords.length == 0) {'],[0,'                nodeList = this.getElementsByTagNameNS(node, this.gmlns,'],[-1,'                                                       \&quot;coordinates\&quot;);'],[0,'                if(nodeList.length &gt; 0) {'],[0,'                    coordString = this.getChildValue(nodeList[0]);'],[0,'                    coordString = coordString.replace(this.regExes.trimSpace,'],[-1,'                                                      \&quot;\&quot;);'],[0,'                    coordString = coordString.replace(this.regExes.trimComma,'],[-1,'                                                      \&quot;,\&quot;);'],[0,'                    var pointList = coordString.split(this.regExes.splitSpace);'],[0,'                    for(var i=0; i&lt;pointList.length; ++i) {'],[0,'                        coords = pointList[i].split(\&quot;,\&quot;);'],[0,'                        if(coords.length == 2) {'],[0,'                            coords[2] = null;'],[-1,'                        }'],[0,'                        if (this.xy) {'],[0,'                            points.push(new OpenLayers.Geometry.Point(coords[0],'],[-1,'                                                                  coords[1],'],[-1,'                                                                  coords[2]));'],[-1,'                        } else {'],[0,'                            points.push(new OpenLayers.Geometry.Point(coords[1],'],[-1,'                                                                  coords[0],'],[-1,'                                                                  coords[2]));'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,''],[0,'            var line = null;'],[0,'            if(points.length != 0) {'],[0,'                if(ring) {'],[0,'                    line = new OpenLayers.Geometry.LinearRing(points);'],[-1,'                } else {'],[0,'                    line = new OpenLayers.Geometry.LineString(points);'],[-1,'                }'],[-1,'            }'],[0,'            return line;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseGeometry.multilinestring'],[-1,'         * Given a GML node representing a multilinestring geometry, create an'],[-1,'         *     OpenLayers multilinestring geometry.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * node - {DOMElement} A GML node.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry.MultiLineString&gt;} A multilinestring geometry.'],[-1,'         *\/'],[-1,'        multilinestring: function(node) {'],[0,'            var nodeList = this.getElementsByTagNameNS(node, this.gmlns,'],[-1,'                                                       \&quot;LineString\&quot;);'],[0,'            var components = [];'],[0,'            if(nodeList.length &gt; 0) {'],[0,'                var line;'],[0,'                for(var i=0; i&lt;nodeList.length; ++i) {'],[0,'                    line = this.parseGeometry.linestring.apply(this,'],[-1,'                                                               [nodeList[i]]);'],[0,'                    if(line) {'],[0,'                        components.push(line);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.MultiLineString(components);'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseGeometry.polygon'],[-1,'         * Given a GML node representing a polygon geometry, create an'],[-1,'         *     OpenLayers polygon geometry.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * node - {DOMElement} A GML node.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry.Polygon&gt;} A polygon geometry.'],[-1,'         *\/'],[-1,'        polygon: function(node) {'],[0,'            var nodeList = this.getElementsByTagNameNS(node, this.gmlns,'],[-1,'                                                       \&quot;LinearRing\&quot;);'],[0,'            var components = [];'],[0,'            if(nodeList.length &gt; 0) {'],[-1,'                \/\/ this assumes exterior ring first, inner rings after'],[0,'                var ring;'],[0,'                for(var i=0; i&lt;nodeList.length; ++i) {'],[0,'                    ring = this.parseGeometry.linestring.apply(this,'],[-1,'                                                        [nodeList[i], true]);'],[0,'                    if(ring) {'],[0,'                        components.push(ring);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.Polygon(components);'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseGeometry.multipolygon'],[-1,'         * Given a GML node representing a multipolygon geometry, create an'],[-1,'         *     OpenLayers multipolygon geometry.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * node - {DOMElement} A GML node.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry.MultiPolygon&gt;} A multipolygon geometry.'],[-1,'         *\/'],[-1,'        multipolygon: function(node) {'],[0,'            var nodeList = this.getElementsByTagNameNS(node, this.gmlns,'],[-1,'                                                       \&quot;Polygon\&quot;);'],[0,'            var components = [];'],[0,'            if(nodeList.length &gt; 0) {'],[0,'                var polygon;'],[0,'                for(var i=0; i&lt;nodeList.length; ++i) {'],[0,'                    polygon = this.parseGeometry.polygon.apply(this,'],[-1,'                                                               [nodeList[i]]);'],[0,'                    if(polygon) {'],[0,'                        components.push(polygon);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.MultiPolygon(components);'],[-1,'        },'],[-1,'        '],[-1,'        envelope: function(node) {'],[0,'            var components = [];'],[0,'            var coordString;'],[0,'            var envelope;'],[-1,'            '],[0,'            var lpoint = this.getElementsByTagNameNS(node, this.gmlns, \&quot;lowerCorner\&quot;);'],[0,'            if (lpoint.length &gt; 0) {'],[0,'                var coords = [];'],[-1,'                '],[0,'                if(lpoint.length &gt; 0) {'],[0,'                    coordString = lpoint[0].firstChild.nodeValue;'],[0,'                    coordString = coordString.replace(this.regExes.trimSpace, \&quot;\&quot;);'],[0,'                    coords = coordString.split(this.regExes.splitSpace);'],[-1,'                }'],[-1,'                '],[0,'                if(coords.length == 2) {'],[0,'                    coords[2] = null;'],[-1,'                }'],[0,'                if (this.xy) {'],[0,'                    var lowerPoint = new OpenLayers.Geometry.Point(coords[0], coords[1],coords[2]);'],[-1,'                } else {'],[0,'                    var lowerPoint = new OpenLayers.Geometry.Point(coords[1], coords[0],coords[2]);'],[-1,'                }'],[-1,'            }'],[-1,'            '],[0,'            var upoint = this.getElementsByTagNameNS(node, this.gmlns, \&quot;upperCorner\&quot;);'],[0,'            if (upoint.length &gt; 0) {'],[0,'                var coords = [];'],[-1,'                '],[0,'                if(upoint.length &gt; 0) {'],[0,'                    coordString = upoint[0].firstChild.nodeValue;'],[0,'                    coordString = coordString.replace(this.regExes.trimSpace, \&quot;\&quot;);'],[0,'                    coords = coordString.split(this.regExes.splitSpace);'],[-1,'                }'],[-1,'                '],[0,'                if(coords.length == 2) {'],[0,'                    coords[2] = null;'],[-1,'                }'],[0,'                if (this.xy) {'],[0,'                    var upperPoint = new OpenLayers.Geometry.Point(coords[0], coords[1],coords[2]);'],[-1,'                } else {'],[0,'                    var upperPoint = new OpenLayers.Geometry.Point(coords[1], coords[0],coords[2]);'],[-1,'                }'],[-1,'            }'],[-1,'            '],[0,'            if (lowerPoint &amp;&amp; upperPoint) {'],[0,'                components.push(new OpenLayers.Geometry.Point(lowerPoint.x, lowerPoint.y));'],[0,'                components.push(new OpenLayers.Geometry.Point(upperPoint.x, lowerPoint.y));'],[0,'                components.push(new OpenLayers.Geometry.Point(upperPoint.x, upperPoint.y));'],[0,'                components.push(new OpenLayers.Geometry.Point(lowerPoint.x, upperPoint.y));'],[0,'                components.push(new OpenLayers.Geometry.Point(lowerPoint.x, lowerPoint.y));'],[-1,'                '],[0,'                var ring = new OpenLayers.Geometry.LinearRing(components);'],[0,'                envelope = new OpenLayers.Geometry.Polygon([ring]);'],[-1,'            }'],[0,'            return envelope; '],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Method: parseGeometry.box'],[-1,'         * Given a GML node representing a box geometry, create an'],[-1,'         *     OpenLayers.Bounds.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * node - {DOMElement} A GML node.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Bounds&gt;} A bounds representing the box.'],[-1,'         *\/'],[-1,'        box: function(node) {'],[0,'            var nodeList = this.getElementsByTagNameNS(node, this.gmlns,'],[-1,'                                                   \&quot;coordinates\&quot;);'],[0,'            var coordString;'],[0,'            var coords, beginPoint = null, endPoint = null;'],[0,'            if (nodeList.length &gt; 0) {'],[0,'                coordString = nodeList[0].firstChild.nodeValue;'],[0,'                coords = coordString.split(\&quot; \&quot;);'],[0,'                if (coords.length == 2) {'],[0,'                    beginPoint = coords[0].split(\&quot;,\&quot;);'],[0,'                    endPoint = coords[1].split(\&quot;,\&quot;);'],[-1,'                }'],[-1,'            }'],[0,'            if (beginPoint !== null &amp;&amp; endPoint !== null) {'],[0,'                return new OpenLayers.Bounds(parseFloat(beginPoint[0]),'],[-1,'                    parseFloat(beginPoint[1]),'],[-1,'                    parseFloat(endPoint[0]),'],[-1,'                    parseFloat(endPoint[1]) );'],[-1,'            }'],[-1,'        }'],[-1,'        '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseAttributes'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An attributes object.'],[-1,'     *\/'],[-1,'    parseAttributes: function(node) {'],[0,'        var attributes = {};'],[-1,'        \/\/ assume attributes are children of the first type 1 child'],[0,'        var childNode = node.firstChild;'],[0,'        var children, i, child, grandchildren, grandchild, name, value;'],[0,'        while(childNode) {'],[0,'            if(childNode.nodeType == 1) {'],[-1,'                \/\/ attributes are type 1 children with one type 3 child'],[0,'                children = childNode.childNodes;'],[0,'                for(i=0; i&lt;children.length; ++i) {'],[0,'                    child = children[i];'],[0,'                    if(child.nodeType == 1) {'],[0,'                        grandchildren = child.childNodes;'],[0,'                        if(grandchildren.length == 1) {'],[0,'                            grandchild = grandchildren[0];'],[0,'                            if(grandchild.nodeType == 3 ||'],[-1,'                               grandchild.nodeType == 4) {'],[0,'                                name = (child.prefix) ?'],[-1,'                                        child.nodeName.split(\&quot;:\&quot;)[1] :'],[-1,'                                        child.nodeName;'],[0,'                                value = grandchild.nodeValue.replace('],[-1,'                                                this.regExes.trimSpace, \&quot;\&quot;);'],[0,'                                attributes[name] = value;'],[-1,'                            }'],[-1,'                        } else {'],[-1,'                            \/\/ If child has no childNodes (grandchildren),'],[-1,'                            \/\/ set an attribute with null value.'],[-1,'                            \/\/ e.g. &lt;prefix:fieldname\/&gt; becomes'],[-1,'                            \/\/ {fieldname: null}'],[0,'                            attributes[child.nodeName.split(\&quot;:\&quot;).pop()] = null;'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[0,'                break;'],[-1,'            }'],[0,'            childNode = childNode.nextSibling;'],[-1,'        }'],[0,'        return attributes;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Generate a GML document string given a list of features. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} List of features to'],[-1,'     *     serialize into a string.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string representing the GML document.'],[-1,'     *\/'],[-1,'    write: function(features) {'],[0,'        if(!(OpenLayers.Util.isArray(features))) {'],[0,'            features = [features];'],[-1,'        }'],[0,'        var gml = this.createElementNS(\&quot;http:\/\/www.opengis.net\/wfs\&quot;,'],[-1,'                                       \&quot;wfs:\&quot; + this.collectionName);'],[0,'        for(var i=0; i&lt;features.length; i++) {'],[0,'            gml.appendChild(this.createFeatureXML(features[i]));'],[-1,'        }'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [gml]);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: createFeatureXML'],[-1,'     * Accept an OpenLayers.Feature.Vector, and build a GML node for it.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The feature to be built as GML.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} A node reprensting the feature in GML.'],[-1,'     *\/'],[-1,'    createFeatureXML: function(feature) {'],[0,'        var geometry = feature.geometry;'],[0,'        var geometryNode = this.buildGeometryNode(geometry);'],[0,'        var geomContainer = this.createElementNS(this.featureNS,'],[-1,'                                                 this.featurePrefix + \&quot;:\&quot; +'],[-1,'                                                 this.geometryName);'],[0,'        geomContainer.appendChild(geometryNode);'],[0,'        var featureNode = this.createElementNS(this.gmlns,'],[-1,'                                               \&quot;gml:\&quot; + this.featureName);'],[0,'        var featureContainer = this.createElementNS(this.featureNS,'],[-1,'                                                    this.featurePrefix + \&quot;:\&quot; +'],[-1,'                                                    this.layerName);'],[0,'        var fid = feature.fid || feature.id;'],[0,'        featureContainer.setAttribute(\&quot;fid\&quot;, fid);'],[0,'        featureContainer.appendChild(geomContainer);'],[0,'        for(var attr in feature.attributes) {'],[0,'            var attrText = this.createTextNode(feature.attributes[attr]); '],[0,'            var nodename = attr.substring(attr.lastIndexOf(\&quot;:\&quot;) + 1);'],[0,'            var attrContainer = this.createElementNS(this.featureNS,'],[-1,'                                                     this.featurePrefix + \&quot;:\&quot; +'],[-1,'                                                     nodename);'],[0,'            attrContainer.appendChild(attrText);'],[0,'            featureContainer.appendChild(attrContainer);'],[-1,'        }    '],[0,'        featureNode.appendChild(featureContainer);'],[0,'        return featureNode;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: buildGeometryNode'],[-1,'     *\/'],[-1,'    buildGeometryNode: function(geometry) {'],[0,'        if (this.externalProjection &amp;&amp; this.internalProjection) {'],[0,'            geometry = geometry.clone();'],[0,'            geometry.transform(this.internalProjection, '],[-1,'                               this.externalProjection);'],[-1,'        }    '],[0,'        var className = geometry.CLASS_NAME;'],[0,'        var type = className.substring(className.lastIndexOf(\&quot;.\&quot;) + 1);'],[0,'        var builder = this.buildGeometry[type.toLowerCase()];'],[0,'        return builder.apply(this, [geometry]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: buildGeometry'],[-1,'     * Object containing methods to do the actual geometry node building'],[-1,'     *     based on geometry type.'],[-1,'     *\/'],[-1,'    buildGeometry: {'],[-1,'        \/\/ TBD retrieve the srs from layer'],[-1,'        \/\/ srsName is non-standard, so not including it until it\'s right.'],[-1,'        \/\/ gml.setAttribute(\&quot;srsName\&quot;,'],[-1,'        \/\/                  \&quot;http:\/\/www.opengis.net\/gml\/srs\/epsg.xml#4326\&quot;);'],[-1,''],[-1,'        \/**'],[-1,'         * Method: buildGeometry.point'],[-1,'         * Given an OpenLayers point geometry, create a GML point.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.Point&gt;} A point geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A GML point node.'],[-1,'         *\/'],[-1,'        point: function(geometry) {'],[0,'            var gml = this.createElementNS(this.gmlns, \&quot;gml:Point\&quot;);'],[0,'            gml.appendChild(this.buildCoordinatesNode(geometry));'],[0,'            return gml;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: buildGeometry.multipoint'],[-1,'         * Given an OpenLayers multipoint geometry, create a GML multipoint.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.MultiPoint&gt;} A multipoint geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A GML multipoint node.'],[-1,'         *\/'],[-1,'        multipoint: function(geometry) {'],[0,'            var gml = this.createElementNS(this.gmlns, \&quot;gml:MultiPoint\&quot;);'],[0,'            var points = geometry.components;'],[0,'            var pointMember, pointGeom;'],[0,'            for(var i=0; i&lt;points.length; i++) { '],[0,'                pointMember = this.createElementNS(this.gmlns,'],[-1,'                                                   \&quot;gml:pointMember\&quot;);'],[0,'                pointGeom = this.buildGeometry.point.apply(this,'],[-1,'                                                               [points[i]]);'],[0,'                pointMember.appendChild(pointGeom);'],[0,'                gml.appendChild(pointMember);'],[-1,'            }'],[0,'            return gml;            '],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: buildGeometry.linestring'],[-1,'         * Given an OpenLayers linestring geometry, create a GML linestring.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.LineString&gt;} A linestring geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A GML linestring node.'],[-1,'         *\/'],[-1,'        linestring: function(geometry) {'],[0,'            var gml = this.createElementNS(this.gmlns, \&quot;gml:LineString\&quot;);'],[0,'            gml.appendChild(this.buildCoordinatesNode(geometry));'],[0,'            return gml;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: buildGeometry.multilinestring'],[-1,'         * Given an OpenLayers multilinestring geometry, create a GML'],[-1,'         *     multilinestring.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.MultiLineString&gt;} A multilinestring'],[-1,'         *     geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A GML multilinestring node.'],[-1,'         *\/'],[-1,'        multilinestring: function(geometry) {'],[0,'            var gml = this.createElementNS(this.gmlns, \&quot;gml:MultiLineString\&quot;);'],[0,'            var lines = geometry.components;'],[0,'            var lineMember, lineGeom;'],[0,'            for(var i=0; i&lt;lines.length; ++i) {'],[0,'                lineMember = this.createElementNS(this.gmlns,'],[-1,'                                                  \&quot;gml:lineStringMember\&quot;);'],[0,'                lineGeom = this.buildGeometry.linestring.apply(this,'],[-1,'                                                                   [lines[i]]);'],[0,'                lineMember.appendChild(lineGeom);'],[0,'                gml.appendChild(lineMember);'],[-1,'            }'],[0,'            return gml;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: buildGeometry.linearring'],[-1,'         * Given an OpenLayers linearring geometry, create a GML linearring.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.LinearRing&gt;} A linearring geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A GML linearring node.'],[-1,'         *\/'],[-1,'        linearring: function(geometry) {'],[0,'            var gml = this.createElementNS(this.gmlns, \&quot;gml:LinearRing\&quot;);'],[0,'            gml.appendChild(this.buildCoordinatesNode(geometry));'],[0,'            return gml;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: buildGeometry.polygon'],[-1,'         * Given an OpenLayers polygon geometry, create a GML polygon.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.Polygon&gt;} A polygon geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A GML polygon node.'],[-1,'         *\/'],[-1,'        polygon: function(geometry) {'],[0,'            var gml = this.createElementNS(this.gmlns, \&quot;gml:Polygon\&quot;);'],[0,'            var rings = geometry.components;'],[0,'            var ringMember, ringGeom, type;'],[0,'            for(var i=0; i&lt;rings.length; ++i) {'],[0,'                type = (i==0) ? \&quot;outerBoundaryIs\&quot; : \&quot;innerBoundaryIs\&quot;;'],[0,'                ringMember = this.createElementNS(this.gmlns,'],[-1,'                                                  \&quot;gml:\&quot; + type);'],[0,'                ringGeom = this.buildGeometry.linearring.apply(this,'],[-1,'                                                                   [rings[i]]);'],[0,'                ringMember.appendChild(ringGeom);'],[0,'                gml.appendChild(ringMember);'],[-1,'            }'],[0,'            return gml;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: buildGeometry.multipolygon'],[-1,'         * Given an OpenLayers multipolygon geometry, create a GML multipolygon.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry.MultiPolygon&gt;} A multipolygon'],[-1,'         *     geometry.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A GML multipolygon node.'],[-1,'         *\/'],[-1,'        multipolygon: function(geometry) {'],[0,'            var gml = this.createElementNS(this.gmlns, \&quot;gml:MultiPolygon\&quot;);'],[0,'            var polys = geometry.components;'],[0,'            var polyMember, polyGeom;'],[0,'            for(var i=0; i&lt;polys.length; ++i) {'],[0,'                polyMember = this.createElementNS(this.gmlns,'],[-1,'                                                  \&quot;gml:polygonMember\&quot;);'],[0,'                polyGeom = this.buildGeometry.polygon.apply(this,'],[-1,'                                                                [polys[i]]);'],[0,'                polyMember.appendChild(polyGeom);'],[0,'                gml.appendChild(polyMember);'],[-1,'            }'],[0,'            return gml;'],[-1,''],[-1,'        },'],[-1,' '],[-1,'        \/**'],[-1,'         * Method: buildGeometry.bounds'],[-1,'         * Given an OpenLayers bounds, create a GML box.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * bounds - {&lt;OpenLayers.Geometry.Bounds&gt;} A bounds object.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {DOMElement} A GML box node.'],[-1,'         *\/'],[-1,'        bounds: function(bounds) {'],[0,'            var gml = this.createElementNS(this.gmlns, \&quot;gml:Box\&quot;);'],[0,'            gml.appendChild(this.buildCoordinatesNode(bounds));'],[0,'            return gml;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: buildCoordinates'],[-1,'     * builds the coordinates XmlNode'],[-1,'     * (code)'],[-1,'     * &lt;gml:coordinates decimal=\&quot;.\&quot; cs=\&quot;,\&quot; ts=\&quot; \&quot;&gt;...&lt;\/gml:coordinates&gt;'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {XmlNode} created xmlNode'],[-1,'     *\/'],[-1,'    buildCoordinatesNode: function(geometry) {'],[0,'        var coordinatesNode = this.createElementNS(this.gmlns,'],[-1,'                                                   \&quot;gml:coordinates\&quot;);'],[0,'        coordinatesNode.setAttribute(\&quot;decimal\&quot;, \&quot;.\&quot;);'],[0,'        coordinatesNode.setAttribute(\&quot;cs\&quot;, \&quot;,\&quot;);'],[0,'        coordinatesNode.setAttribute(\&quot;ts\&quot;, \&quot; \&quot;);'],[-1,''],[0,'        var parts = [];'],[-1,''],[0,'        if(geometry instanceof OpenLayers.Bounds){'],[0,'            parts.push(geometry.left + \&quot;,\&quot; + geometry.bottom);'],[0,'            parts.push(geometry.right + \&quot;,\&quot; + geometry.top);'],[-1,'        } else {'],[0,'            var points = (geometry.components) ? geometry.components : [geometry];'],[0,'            for(var i=0; i&lt;points.length; i++) {'],[0,'                parts.push(points[i].x + \&quot;,\&quot; + points[i].y);                '],[-1,'            }            '],[-1,'        }'],[-1,''],[0,'        var txtNode = this.createTextNode(parts.join(\&quot; \&quot;));'],[0,'        coordinatesNode.appendChild(txtNode);'],[-1,'        '],[0,'        return coordinatesNode;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.GML\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/GML\/Base.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/GML.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Though required in the full build, if the GML format is excluded, we set'],[-1,' * the namespace here.'],[-1,' *\/'],[1,'if(!OpenLayers.Format.GML) {'],[0,'    OpenLayers.Format.GML = {};'],[-1,'}'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.GML.Base'],[-1,' * Superclass for GML parsers.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.GML.Base = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        gml: \&quot;http:\/\/www.opengis.net\/gml\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;,'],[-1,'        wfs: \&quot;http:\/\/www.opengis.net\/wfs\&quot; \/\/ this is a convenience for reading wfs:FeatureCollection'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;gml\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location for a particular minor version.'],[-1,'     *\/'],[-1,'    schemaLocation: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: featureType'],[-1,'     * {Array(String) or String} The local (without prefix) feature typeName(s).'],[-1,'     *\/'],[-1,'    featureType: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: featureNS'],[-1,'     * {String} The feature namespace.  Must be set in the options at'],[-1,'     *     construction.'],[-1,'     *\/'],[-1,'    featureNS: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: geometry'],[-1,'     * {String} Name of geometry element.  Defaults to \&quot;geometry\&quot;. If null, it'],[-1,'     * will be set on &lt;read&gt; when the first geometry is parsed.'],[-1,'     *\/'],[-1,'    geometryName: \&quot;geometry\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: extractAttributes'],[-1,'     * {Boolean} Extract attributes from GML.  Default is true.'],[-1,'     *\/'],[-1,'    extractAttributes: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: srsName'],[-1,'     * {String} URI for spatial reference system.  This is optional for'],[-1,'     *     single part geometries and mandatory for collections and multis.'],[-1,'     *     If set, the srsName attribute will be written for all geometries.'],[-1,'     *     Default is null.'],[-1,'     *\/'],[-1,'    srsName: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: xy'],[-1,'     * {Boolean} Order of the GML coordinate true:(x,y) or false:(y,x)'],[-1,'     * Changing is not recommended, a new Format should be instantiated.'],[-1,'     *\/ '],[-1,'    xy: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: geometryTypes'],[-1,'     * {Object} Maps OpenLayers geometry class names to GML element names.'],[-1,'     *     Use &lt;setGeometryTypes&gt; before accessing this property.'],[-1,'     *\/'],[-1,'    geometryTypes: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: singleFeatureType'],[-1,'     * {Boolean} True if there is only 1 featureType, and not an array'],[-1,'     *     of featuretypes.'],[-1,'     *\/'],[-1,'    singleFeatureType: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: autoConfig'],[-1,'     * {Boolean} Indicates if the format was configured without a &lt;featureNS&gt;,'],[-1,'     * but auto-configured &lt;featureNS&gt; and &lt;featureType&gt; during read.'],[-1,'     * Subclasses making use of &lt;featureType&gt; auto-configuration should make'],[-1,'     * the first call to the &lt;readNode&gt; method (usually in the read method)'],[-1,'     * with true as 3rd argument, so the auto-configured featureType can be'],[-1,'     * reset and the format can be reused for subsequent reads with data from'],[-1,'     * different featureTypes. Set to false after read if you want to keep the'],[-1,'     * auto-configured values.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g),'],[-1,'        featureMember: (\/^(.*:)?featureMembers?$\/)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.GML.Base'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.GML.v2&gt; or &lt;OpenLayers.Format.GML.v3&gt; constructor'],[-1,'     *     instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *'],[-1,'     * Valid options properties:'],[-1,'     * featureType - {Array(String) or String} Local (without prefix) feature '],[-1,'     *     typeName(s) (required for write).'],[-1,'     * featureNS - {String} Feature namespace (required for write).'],[-1,'     * geometryName - {String} Geometry element name (required for write).'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[0,'        this.setGeometryTypes();'],[0,'        if(options &amp;&amp; options.featureNS) {'],[0,'            this.setNamespace(\&quot;feature\&quot;, options.featureNS);'],[-1,'        }'],[0,'        this.singleFeatureType = !options || (typeof options.featureType === \&quot;string\&quot;);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {DOMElement} A gml:featureMember element, a gml:featureMembers'],[-1,'     *     element, or an element containing either of the above at any level.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} An array of features.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) { '],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var features = [];'],[0,'        this.readNode(data, {features: features}, true);'],[0,'        if(features.length == 0) {'],[-1,'            \/\/ look for gml:featureMember elements'],[0,'            var elements = this.getElementsByTagNameNS('],[-1,'                data, this.namespaces.gml, \&quot;featureMember\&quot;'],[-1,'            );'],[0,'            if(elements.length) {'],[0,'                for(var i=0, len=elements.length; i&lt;len; ++i) {'],[0,'                    this.readNode(elements[i], {features: features}, true);'],[-1,'                }'],[-1,'            } else {'],[-1,'                \/\/ look for gml:featureMembers elements (this is v3, but does no harm here)'],[0,'                var elements = this.getElementsByTagNameNS('],[-1,'                    data, this.namespaces.gml, \&quot;featureMembers\&quot;'],[-1,'                );'],[0,'                if(elements.length) {'],[-1,'                    \/\/ there can be only one'],[0,'                    this.readNode(elements[0], {features: features}, true);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return features;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: readNode'],[-1,'     * Shorthand for applying one of the named readers given the node'],[-1,'     *     namespace and local name.  Readers take two args (node, obj) and'],[-1,'     *     generally extend or modify the second.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The node to be read (required).'],[-1,'     * obj - {Object} The object to be modified (optional).'],[-1,'     * first - {Boolean} Should be set to true for the first node read. This'],[-1,'     *     is usually the readNode call in the read method. Without this being'],[-1,'     *     set, auto-configured properties will stick on subsequent reads.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} The input object, modified (or a new one if none was provided).'],[-1,'     *\/'],[-1,'    readNode: function(node, obj, first) {'],[-1,'        \/\/ on subsequent calls of format.read(), we want to reset auto-'],[-1,'        \/\/ configured properties and auto-configure again.'],[0,'        if (first === true &amp;&amp; this.autoConfig === true) {'],[0,'            this.featureType = null;'],[0,'            delete this.namespaceAlias[this.featureNS];'],[0,'            delete this.namespaces[\&quot;feature\&quot;];'],[0,'            this.featureNS = null;'],[-1,'        }'],[-1,'        \/\/ featureType auto-configuration'],[0,'        if (!this.featureNS &amp;&amp; (!(node.prefix in this.namespaces) &amp;&amp;'],[-1,'                node.parentNode.namespaceURI == this.namespaces[\&quot;gml\&quot;] &amp;&amp;'],[-1,'                this.regExes.featureMember.test(node.parentNode.nodeName))) {'],[0,'            this.featureType = node.nodeName.split(\&quot;:\&quot;).pop();'],[0,'            this.setNamespace(\&quot;feature\&quot;, node.namespaceURI);'],[0,'            this.featureNS = node.namespaceURI;'],[0,'            this.autoConfig = true;'],[-1,'        }'],[0,'        return OpenLayers.Format.XML.prototype.readNode.apply(this, [node, obj]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;gml\&quot;: {'],[-1,'            \&quot;_inherit\&quot;: function(node, obj, container) {'],[-1,'                \/\/ To be implemented by version specific parsers'],[-1,'            },'],[-1,'            \&quot;featureMember\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;featureMembers\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);                '],[-1,'            },'],[-1,'            \&quot;name\&quot;: function(node, obj) {'],[0,'                obj.name = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;boundedBy\&quot;: function(node, obj) {'],[0,'                var container = {};'],[0,'                this.readChildNodes(node, container);'],[0,'                if(container.components &amp;&amp; container.components.length &gt; 0) {'],[0,'                    obj.bounds = container.components[0];'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Point\&quot;: function(node, container) {'],[0,'                var obj = {points: []};'],[0,'                this.readChildNodes(node, obj);'],[0,'                if(!container.components) {'],[0,'                    container.components = [];'],[-1,'                }'],[0,'                container.components.push(obj.points[0]);'],[-1,'            },'],[-1,'            \&quot;coordinates\&quot;: function(node, obj) {'],[0,'                var str = this.getChildValue(node).replace('],[-1,'                    this.regExes.trimSpace, \&quot;\&quot;'],[-1,'                );'],[0,'                str = str.replace(this.regExes.trimComma, \&quot;,\&quot;);'],[0,'                var pointList = str.split(this.regExes.splitSpace);'],[0,'                var coords;'],[0,'                var numPoints = pointList.length;'],[0,'                var points = new Array(numPoints);'],[0,'                for(var i=0; i&lt;numPoints; ++i) {'],[0,'                    coords = pointList[i].split(\&quot;,\&quot;);'],[0,'                    if (this.xy) {'],[0,'                        points[i] = new OpenLayers.Geometry.Point('],[-1,'                            coords[0], coords[1], coords[2]'],[-1,'                        );'],[-1,'                    } else {'],[0,'                        points[i] = new OpenLayers.Geometry.Point('],[-1,'                            coords[1], coords[0], coords[2]'],[-1,'                        );'],[-1,'                    }'],[-1,'                }'],[0,'                obj.points = points;'],[-1,'            },'],[-1,'            \&quot;coord\&quot;: function(node, obj) {'],[0,'                var coord = {};'],[0,'                this.readChildNodes(node, coord);'],[0,'                if(!obj.points) {'],[0,'                    obj.points = [];'],[-1,'                }'],[0,'                obj.points.push(new OpenLayers.Geometry.Point('],[-1,'                    coord.x, coord.y, coord.z'],[-1,'                ));'],[-1,'            },'],[-1,'            \&quot;X\&quot;: function(node, coord) {'],[0,'                coord.x = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Y\&quot;: function(node, coord) {'],[0,'                coord.y = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Z\&quot;: function(node, coord) {'],[0,'                coord.z = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;MultiPoint\&quot;: function(node, container) {'],[0,'                var obj = {components: []};'],[0,'                this.readers.gml._inherit.apply(this, [node, obj, container]);'],[0,'                this.readChildNodes(node, obj);'],[0,'                container.components = ['],[-1,'                    new OpenLayers.Geometry.MultiPoint(obj.components)'],[-1,'                ];'],[-1,'            },'],[-1,'            \&quot;pointMember\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;LineString\&quot;: function(node, container) {'],[0,'                var obj = {};'],[0,'                this.readers.gml._inherit.apply(this, [node, obj, container]);'],[0,'                this.readChildNodes(node, obj);'],[0,'                if(!container.components) {'],[0,'                    container.components = [];'],[-1,'                }'],[0,'                container.components.push('],[-1,'                    new OpenLayers.Geometry.LineString(obj.points)'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;MultiLineString\&quot;: function(node, container) {'],[0,'                var obj = {components: []};'],[0,'                this.readers.gml._inherit.apply(this, [node, obj, container]);'],[0,'                this.readChildNodes(node, obj);'],[0,'                container.components = ['],[-1,'                    new OpenLayers.Geometry.MultiLineString(obj.components)'],[-1,'                ];'],[-1,'            },'],[-1,'            \&quot;lineStringMember\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Polygon\&quot;: function(node, container) {'],[0,'                var obj = {outer: null, inner: []};'],[0,'                this.readers.gml._inherit.apply(this, [node, obj, container]);'],[0,'                this.readChildNodes(node, obj);'],[0,'                obj.inner.unshift(obj.outer);'],[0,'                if(!container.components) {'],[0,'                    container.components = [];'],[-1,'                }'],[0,'                container.components.push('],[-1,'                    new OpenLayers.Geometry.Polygon(obj.inner)'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;LinearRing\&quot;: function(node, obj) {'],[0,'                var container = {};'],[0,'                this.readers.gml._inherit.apply(this, [node, container]);'],[0,'                this.readChildNodes(node, container);'],[0,'                obj.components = [new OpenLayers.Geometry.LinearRing('],[-1,'                    container.points'],[-1,'                )];'],[-1,'            },'],[-1,'            \&quot;MultiPolygon\&quot;: function(node, container) {'],[0,'                var obj = {components: []};'],[0,'                this.readers.gml._inherit.apply(this, [node, obj, container]);'],[0,'                this.readChildNodes(node, obj);'],[0,'                container.components = ['],[-1,'                    new OpenLayers.Geometry.MultiPolygon(obj.components)'],[-1,'                ];'],[-1,'            },'],[-1,'            \&quot;polygonMember\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;GeometryCollection\&quot;: function(node, container) {'],[0,'                var obj = {components: []};'],[0,'                this.readers.gml._inherit.apply(this, [node, obj, container]);'],[0,'                this.readChildNodes(node, obj);'],[0,'                container.components = ['],[-1,'                    new OpenLayers.Geometry.Collection(obj.components)'],[-1,'                ];'],[-1,'            },'],[-1,'            \&quot;geometryMember\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;feature\&quot;: {'],[-1,'            \&quot;*\&quot;: function(node, obj) {'],[-1,'                \/\/ The node can either be named like the featureType, or it'],[-1,'                \/\/ can be a child of the feature:featureType.  Children can be'],[-1,'                \/\/ geometry or attributes.'],[0,'                var name;'],[0,'                var local = node.localName || node.nodeName.split(\&quot;:\&quot;).pop();'],[-1,'                \/\/ Since an attribute can have the same name as the feature type'],[-1,'                \/\/ we only want to read the node as a feature if the parent'],[-1,'                \/\/ node can have feature nodes as children.  In this case, the'],[-1,'                \/\/ obj.features property is set.'],[0,'                if (obj.features) {'],[0,'                    if (!this.singleFeatureType &amp;&amp;'],[-1,'                        (OpenLayers.Util.indexOf(this.featureType, local) !== -1)) {'],[0,'                        name = \&quot;_typeName\&quot;;'],[0,'                    } else if(local === this.featureType) {'],[0,'                        name = \&quot;_typeName\&quot;;'],[-1,'                    }'],[-1,'                } else {'],[-1,'                    \/\/ Assume attribute elements have one child node and that the child'],[-1,'                    \/\/ is a text node.  Otherwise assume it is a geometry node.'],[0,'                    if(node.childNodes.length == 0 ||'],[-1,'                       (node.childNodes.length == 1 &amp;&amp; node.firstChild.nodeType == 3)) {'],[0,'                        if(this.extractAttributes) {'],[0,'                            name = \&quot;_attribute\&quot;;'],[-1,'                        }'],[-1,'                    } else {'],[0,'                        name = \&quot;_geometry\&quot;;'],[-1,'                    }'],[-1,'                }'],[0,'                if(name) {'],[0,'                    this.readers.feature[name].apply(this, [node, obj]);'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;_typeName\&quot;: function(node, obj) {'],[0,'                var container = {components: [], attributes: {}};'],[0,'                this.readChildNodes(node, container);'],[-1,'                \/\/ look for common gml namespaced elements'],[0,'                if(container.name) {'],[0,'                    container.attributes.name = container.name;'],[-1,'                }'],[0,'                var feature = new OpenLayers.Feature.Vector('],[-1,'                    container.components[0], container.attributes'],[-1,'                );'],[0,'                if (!this.singleFeatureType) {'],[0,'                    feature.type = node.nodeName.split(\&quot;:\&quot;).pop();'],[0,'                    feature.namespace = node.namespaceURI;'],[-1,'                }'],[0,'                var fid = node.getAttribute(\&quot;fid\&quot;) ||'],[-1,'                    this.getAttributeNS(node, this.namespaces[\&quot;gml\&quot;], \&quot;id\&quot;);'],[0,'                if(fid) {'],[0,'                    feature.fid = fid;'],[-1,'                }'],[0,'                if(this.internalProjection &amp;&amp; this.externalProjection &amp;&amp;'],[-1,'                   feature.geometry) {'],[0,'                    feature.geometry.transform('],[-1,'                        this.externalProjection, this.internalProjection'],[-1,'                    );'],[-1,'                }'],[0,'                if(container.bounds) {'],[0,'                    feature.bounds = container.bounds;'],[-1,'                }'],[0,'                obj.features.push(feature);'],[-1,'            },'],[-1,'            \&quot;_geometry\&quot;: function(node, obj) {'],[0,'                if (!this.geometryName) {'],[0,'                    this.geometryName = node.nodeName.split(\&quot;:\&quot;).pop();'],[-1,'                }'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;_attribute\&quot;: function(node, obj) {'],[0,'                var local = node.localName || node.nodeName.split(\&quot;:\&quot;).pop();'],[0,'                var value = this.getChildValue(node);'],[0,'                obj.attributes[local] = value;'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;wfs\&quot;: {'],[-1,'            \&quot;FeatureCollection\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: write'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;) | OpenLayers.Feature.Vector}'],[-1,'     *     An array of features or a single feature.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} Given an array of features, a doc with a gml:featureMembers'],[-1,'     *     element will be returned.  Given a single feature, a doc with a'],[-1,'     *     gml:featureMember element will be returned.'],[-1,'     *\/'],[-1,'    write: function(features) {'],[0,'        var name;'],[0,'        if(OpenLayers.Util.isArray(features)) {'],[0,'            name = \&quot;featureMembers\&quot;;'],[-1,'        } else {'],[0,'            name = \&quot;featureMember\&quot;;'],[-1,'        }'],[0,'        var root = this.writeNode(\&quot;gml:\&quot; + name, features);'],[0,'        this.setAttributeNS('],[-1,'            root, this.namespaces[\&quot;xsi\&quot;],'],[-1,'            \&quot;xsi:schemaLocation\&quot;, this.schemaLocation'],[-1,'        );'],[-1,''],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [root]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;gml\&quot;: {'],[-1,'            \&quot;featureMember\&quot;: function(feature) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:featureMember\&quot;);'],[0,'                this.writeNode(\&quot;feature:_typeName\&quot;, feature, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;MultiPoint\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:MultiPoint\&quot;);'],[0,'                var components = geometry.components || [geometry];'],[0,'                for(var i=0, ii=components.length; i&lt;ii; ++i) {'],[0,'                    this.writeNode(\&quot;pointMember\&quot;, components[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;pointMember\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:pointMember\&quot;);'],[0,'                this.writeNode(\&quot;Point\&quot;, geometry, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;MultiLineString\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:MultiLineString\&quot;);'],[0,'                var components = geometry.components || [geometry];'],[0,'                for(var i=0, ii=components.length; i&lt;ii; ++i) {'],[0,'                    this.writeNode(\&quot;lineStringMember\&quot;, components[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;lineStringMember\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:lineStringMember\&quot;);'],[0,'                this.writeNode(\&quot;LineString\&quot;, geometry, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;MultiPolygon\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:MultiPolygon\&quot;);'],[0,'                var components = geometry.components || [geometry];'],[0,'                for(var i=0, ii=components.length; i&lt;ii; ++i) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;polygonMember\&quot;, components[i], node'],[-1,'                    );'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;polygonMember\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:polygonMember\&quot;);'],[0,'                this.writeNode(\&quot;Polygon\&quot;, geometry, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;GeometryCollection\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:GeometryCollection\&quot;);'],[0,'                for(var i=0, len=geometry.components.length; i&lt;len; ++i) {'],[0,'                    this.writeNode(\&quot;geometryMember\&quot;, geometry.components[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;geometryMember\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:geometryMember\&quot;);'],[0,'                var child = this.writeNode(\&quot;feature:_geometry\&quot;, geometry);'],[0,'                node.appendChild(child.firstChild);'],[0,'                return node;'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;feature\&quot;: {'],[-1,'            \&quot;_typeName\&quot;: function(feature) {'],[0,'                var node = this.createElementNSPlus(\&quot;feature:\&quot; + this.featureType, {'],[-1,'                    attributes: {fid: feature.fid}'],[-1,'                });'],[0,'                if(feature.geometry) {'],[0,'                    this.writeNode(\&quot;feature:_geometry\&quot;, feature.geometry, node);'],[-1,'                }'],[0,'                for(var name in feature.attributes) {'],[0,'                    var value = feature.attributes[name];'],[0,'                    if(value != null) {'],[0,'                        this.writeNode('],[-1,'                            \&quot;feature:_attribute\&quot;,'],[-1,'                            {name: name, value: value}, node'],[-1,'                        );'],[-1,'                    }'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;_geometry\&quot;: function(geometry) {'],[0,'                if(this.externalProjection &amp;&amp; this.internalProjection) {'],[0,'                    geometry = geometry.clone().transform('],[-1,'                        this.internalProjection, this.externalProjection'],[-1,'                    );'],[-1,'                }    '],[0,'                var node = this.createElementNSPlus('],[-1,'                    \&quot;feature:\&quot; + this.geometryName'],[-1,'                );'],[0,'                var type = this.geometryTypes[geometry.CLASS_NAME];'],[0,'                var child = this.writeNode(\&quot;gml:\&quot; + type, geometry, node);'],[0,'                if(this.srsName) {'],[0,'                    child.setAttribute(\&quot;srsName\&quot;, this.srsName);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;_attribute\&quot;: function(obj) {'],[0,'                return this.createElementNSPlus(\&quot;feature:\&quot; + obj.name, {'],[-1,'                    value: obj.value'],[-1,'                });'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;wfs\&quot;: {'],[-1,'            \&quot;FeatureCollection\&quot;: function(features) {'],[-1,'                \/**'],[-1,'                 * This is only here because GML2 only describes abstract'],[-1,'                 * feature collections.  Typically, you would not be using'],[-1,'                 * the GML format to write wfs elements.  This just provides'],[-1,'                 * some way to write out lists of features.  GML3 defines the'],[-1,'                 * featureMembers element, so that is used by default instead.'],[-1,'                 *\/'],[0,'                var node = this.createElementNSPlus(\&quot;wfs:FeatureCollection\&quot;);'],[0,'                for(var i=0, len=features.length; i&lt;len; ++i) {'],[0,'                    this.writeNode(\&quot;gml:featureMember\&quot;, features[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setGeometryTypes'],[-1,'     * Sets the &lt;geometryTypes&gt; mapping.'],[-1,'     *\/'],[-1,'    setGeometryTypes: function() {'],[0,'        this.geometryTypes = {'],[-1,'            \&quot;OpenLayers.Geometry.Point\&quot;: \&quot;Point\&quot;,'],[-1,'            \&quot;OpenLayers.Geometry.MultiPoint\&quot;: \&quot;MultiPoint\&quot;,'],[-1,'            \&quot;OpenLayers.Geometry.LineString\&quot;: \&quot;LineString\&quot;,'],[-1,'            \&quot;OpenLayers.Geometry.MultiLineString\&quot;: \&quot;MultiLineString\&quot;,'],[-1,'            \&quot;OpenLayers.Geometry.Polygon\&quot;: \&quot;Polygon\&quot;,'],[-1,'            \&quot;OpenLayers.Geometry.MultiPolygon\&quot;: \&quot;MultiPolygon\&quot;,'],[-1,'            \&quot;OpenLayers.Geometry.Collection\&quot;: \&quot;GeometryCollection\&quot;'],[-1,'        };'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.GML.Base\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/GML\/v2.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/GML\/Base.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.GML.v2'],[-1,' * Parses GML version 2.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.GML.Base&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.GML.v2 = OpenLayers.Class(OpenLayers.Format.GML.Base, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location for a particular minor version.'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/gml http:\/\/schemas.opengis.net\/gml\/2.1.2\/feature.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.GML.v2'],[-1,'     * Create a parser for GML v2.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *'],[-1,'     * Valid options properties:'],[-1,'     * featureType - {String} Local (without prefix) feature typeName (required).'],[-1,'     * featureNS - {String} Feature namespace (required).'],[-1,'     * geometryName - {String} Geometry element name.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.GML.Base.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;gml\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;outerBoundaryIs\&quot;: function(node, container) {'],[0,'                var obj = {};'],[0,'                this.readChildNodes(node, obj);'],[0,'                container.outer = obj.components[0];'],[-1,'            },'],[-1,'            \&quot;innerBoundaryIs\&quot;: function(node, container) {'],[0,'                var obj = {};'],[0,'                this.readChildNodes(node, obj);'],[0,'                container.inner.push(obj.components[0]);'],[-1,'            },'],[-1,'            \&quot;Box\&quot;: function(node, container) {'],[0,'                var obj = {};'],[0,'                this.readChildNodes(node, obj);'],[0,'                if(!container.components) {'],[0,'                    container.components = [];'],[-1,'                }'],[0,'                var min = obj.points[0];'],[0,'                var max = obj.points[1];'],[0,'                container.components.push('],[-1,'                    new OpenLayers.Bounds(min.x, min.y, max.x, max.y)'],[-1,'                );'],[-1,'            }'],[-1,'        }, OpenLayers.Format.GML.Base.prototype.readers[\&quot;gml\&quot;]),'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.Base.prototype.readers[\&quot;feature\&quot;],'],[-1,'        \&quot;wfs\&quot;: OpenLayers.Format.GML.Base.prototype.readers[\&quot;wfs\&quot;]'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;) | OpenLayers.Feature.Vector}'],[-1,'     *     An array of features or a single feature.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} Given an array of features, a doc with a gml:featureMembers'],[-1,'     *     element will be returned.  Given a single feature, a doc with a'],[-1,'     *     gml:featureMember element will be returned.'],[-1,'     *\/'],[-1,'    write: function(features) {'],[0,'        var name;'],[0,'        if(OpenLayers.Util.isArray(features)) {'],[-1,'            \/\/ GML2 only has abstract feature collections'],[-1,'            \/\/ wfs provides a feature collection from a well-known schema'],[0,'            name = \&quot;wfs:FeatureCollection\&quot;;'],[-1,'        } else {'],[0,'            name = \&quot;gml:featureMember\&quot;;'],[-1,'        }'],[0,'        var root = this.writeNode(name, features);'],[0,'        this.setAttributeNS('],[-1,'            root, this.namespaces[\&quot;xsi\&quot;],'],[-1,'            \&quot;xsi:schemaLocation\&quot;, this.schemaLocation'],[-1,'        );'],[-1,''],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [root]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;gml\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;Point\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:Point\&quot;);'],[0,'                this.writeNode(\&quot;coordinates\&quot;, [geometry], node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;coordinates\&quot;: function(points) {'],[0,'                var numPoints = points.length;'],[0,'                var parts = new Array(numPoints);'],[0,'                var point;'],[0,'                for(var i=0; i&lt;numPoints; ++i) {'],[0,'                    point = points[i];'],[0,'                    if(this.xy) {'],[0,'                        parts[i] = point.x + \&quot;,\&quot; + point.y;'],[-1,'                    } else {'],[0,'                        parts[i] = point.y + \&quot;,\&quot; + point.x;'],[-1,'                    }'],[0,'                    if(point.z != undefined) { \/\/ allow null or undefined'],[0,'                        parts[i] += \&quot;,\&quot; + point.z;'],[-1,'                    }'],[-1,'                }'],[0,'                return this.createElementNSPlus(\&quot;gml:coordinates\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        decimal: \&quot;.\&quot;, cs: \&quot;,\&quot;, ts: \&quot; \&quot;'],[-1,'                    },'],[-1,'                    value: (numPoints == 1) ? parts[0] : parts.join(\&quot; \&quot;)'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;LineString\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:LineString\&quot;);'],[0,'                this.writeNode(\&quot;coordinates\&quot;, geometry.components, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Polygon\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:Polygon\&quot;);'],[0,'                this.writeNode(\&quot;outerBoundaryIs\&quot;, geometry.components[0], node);'],[0,'                for(var i=1; i&lt;geometry.components.length; ++i) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;innerBoundaryIs\&quot;, geometry.components[i], node'],[-1,'                    );'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;outerBoundaryIs\&quot;: function(ring) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:outerBoundaryIs\&quot;);'],[0,'                this.writeNode(\&quot;LinearRing\&quot;, ring, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;innerBoundaryIs\&quot;: function(ring) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:innerBoundaryIs\&quot;);'],[0,'                this.writeNode(\&quot;LinearRing\&quot;, ring, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;LinearRing\&quot;: function(ring) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:LinearRing\&quot;);'],[0,'                this.writeNode(\&quot;coordinates\&quot;, ring.components, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Box\&quot;: function(bounds) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:Box\&quot;);'],[0,'                this.writeNode(\&quot;coordinates\&quot;, ['],[-1,'                    {x: bounds.left, y: bounds.bottom},'],[-1,'                    {x: bounds.right, y: bounds.top}'],[-1,'                ], node);'],[-1,'                \/\/ srsName attribute is optional for gml:Box'],[0,'                if(this.srsName) {'],[0,'                    node.setAttribute(\&quot;srsName\&quot;, this.srsName);'],[-1,'                }'],[0,'                return node;'],[-1,'            }'],[-1,'        }, OpenLayers.Format.GML.Base.prototype.writers[\&quot;gml\&quot;]),'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.Base.prototype.writers[\&quot;feature\&quot;],'],[-1,'        \&quot;wfs\&quot;: OpenLayers.Format.GML.Base.prototype.writers[\&quot;wfs\&quot;]'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.GML.v2\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Style.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Style'],[-1,' * This class represents a UserStyle obtained'],[-1,' *     from a SLD, containing styling rules.'],[-1,' *\/'],[1,'OpenLayers.Style = OpenLayers.Class({'],[-1,''],[-1,'    \/**'],[-1,'     * Property: id'],[-1,'     * {String} A unique id for this session.'],[-1,'     *\/'],[-1,'    id: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: name'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    name: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: title'],[-1,'     * {String} Title of this style (set if included in SLD)'],[-1,'     *\/'],[-1,'    title: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: description'],[-1,'     * {String} Description of this style (set if abstract is included in SLD)'],[-1,'     *\/'],[-1,'    description: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layerName'],[-1,'     * {&lt;String&gt;} name of the layer that this style belongs to, usually'],[-1,'     * according to the NamedLayer attribute of an SLD document.'],[-1,'     *\/'],[-1,'    layerName: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: isDefault'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    isDefault: false,'],[-1,'     '],[-1,'    \/** '],[-1,'     * Property: rules '],[-1,'     * {Array(&lt;OpenLayers.Rule&gt;)}'],[-1,'     *\/'],[-1,'    rules: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: context'],[-1,'     * {Object} An optional object with properties that symbolizers\' property'],[-1,'     * values should be evaluated against. If no context is specified,'],[-1,'     * feature.attributes will be used'],[-1,'     *\/'],[-1,'    context: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: defaultStyle'],[-1,'     * {Object} hash of style properties to use as default for merging'],[-1,'     * rule-based style symbolizers onto. If no rules are defined,'],[-1,'     * createSymbolizer will return this style. If &lt;defaultsPerSymbolizer&gt; is set to'],[-1,'     * true, the defaultStyle will only be taken into account if there are'],[-1,'     * rules defined.'],[-1,'     *\/'],[-1,'    defaultStyle: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: defaultsPerSymbolizer'],[-1,'     * {Boolean} If set to true, the &lt;defaultStyle&gt; will extend the symbolizer'],[-1,'     * of every rule. Properties of the &lt;defaultStyle&gt; will also be used to set'],[-1,'     * missing symbolizer properties if the symbolizer has stroke, fill or'],[-1,'     * graphic set to true. Default is false.'],[-1,'     *\/'],[-1,'    defaultsPerSymbolizer: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: propertyStyles'],[-1,'     * {Hash of Boolean} cache of style properties that need to be parsed for'],[-1,'     * propertyNames. Property names are keys, values won\'t be used.'],[-1,'     *\/'],[-1,'    propertyStyles: null,'],[-1,'    '],[-1,''],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Style'],[-1,'     * Creates a UserStyle.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * style        - {Object} Optional hash of style properties that will be'],[-1,'     *                used as default style for this style object. This style'],[-1,'     *                applies if no rules are specified. Symbolizers defined in'],[-1,'     *                rules will extend this default style.'],[-1,'     * options - {Object} An optional object with properties to set on the'],[-1,'     *     style.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * rules - {Array(&lt;OpenLayers.Rule&gt;)} List of rules to be added to the'],[-1,'     *     style.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Style&gt;}'],[-1,'     *\/'],[-1,'    initialize: function(style, options) {'],[-1,''],[0,'        OpenLayers.Util.extend(this, options);'],[0,'        this.rules = [];'],[0,'        if(options &amp;&amp; options.rules) {'],[0,'            this.addRules(options.rules);'],[-1,'        }'],[-1,''],[-1,'        \/\/ use the default style from OpenLayers.Feature.Vector if no style'],[-1,'        \/\/ was given in the constructor'],[0,'        this.setDefaultStyle(style ||'],[-1,'                             OpenLayers.Feature.Vector.style[\&quot;default\&quot;]);'],[-1,''],[0,'        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \&quot;_\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: destroy'],[-1,'     * nullify references to prevent circular references and memory leaks'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        for (var i=0, len=this.rules.length; i&lt;len; i++) {'],[0,'            this.rules[i].destroy();'],[0,'            this.rules[i] = null;'],[-1,'        }'],[0,'        this.rules = null;'],[0,'        this.defaultStyle = null;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createSymbolizer'],[-1,'     * creates a style by applying all feature-dependent rules to the base'],[-1,'     * style.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature&gt;} feature to evaluate rules for'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} symbolizer hash'],[-1,'     *\/'],[-1,'    createSymbolizer: function(feature) {'],[0,'        var style = this.defaultsPerSymbolizer ? {} : this.createLiterals('],[-1,'            OpenLayers.Util.extend({}, this.defaultStyle), feature);'],[-1,'        '],[0,'        var rules = this.rules;'],[-1,''],[0,'        var rule, context;'],[0,'        var elseRules = [];'],[0,'        var appliedRules = false;'],[0,'        for(var i=0, len=rules.length; i&lt;len; i++) {'],[0,'            rule = rules[i];'],[-1,'            \/\/ does the rule apply?'],[0,'            var applies = rule.evaluate(feature);'],[-1,'            '],[0,'            if(applies) {'],[0,'                if(rule instanceof OpenLayers.Rule &amp;&amp; rule.elseFilter) {'],[0,'                    elseRules.push(rule);'],[-1,'                } else {'],[0,'                    appliedRules = true;'],[0,'                    this.applySymbolizer(rule, style, feature);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ if no other rules apply, apply the rules with else filters'],[0,'        if(appliedRules == false &amp;&amp; elseRules.length &gt; 0) {'],[0,'            appliedRules = true;'],[0,'            for(var i=0, len=elseRules.length; i&lt;len; i++) {'],[0,'                this.applySymbolizer(elseRules[i], style, feature);'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ don\'t display if there were rules but none applied'],[0,'        if(rules.length &gt; 0 &amp;&amp; appliedRules == false) {'],[0,'            style.display = \&quot;none\&quot;;'],[-1,'        }'],[-1,'        '],[0,'        if (style.label != null &amp;&amp; typeof style.label !== \&quot;string\&quot;) {'],[0,'            style.label = String(style.label);'],[-1,'        }'],[-1,'        '],[0,'        return style;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: applySymbolizer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * rule - {&lt;OpenLayers.Rule&gt;}'],[-1,'     * style - {Object}'],[-1,'     * feature - {&lt;OpenLayer.Feature.Vector&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} A style with new symbolizer applied.'],[-1,'     *\/'],[-1,'    applySymbolizer: function(rule, style, feature) {'],[0,'        var symbolizerPrefix = feature.geometry ?'],[-1,'                this.getSymbolizerPrefix(feature.geometry) :'],[-1,'                OpenLayers.Style.SYMBOLIZER_PREFIXES[0];'],[-1,''],[0,'        var symbolizer = rule.symbolizer[symbolizerPrefix] || rule.symbolizer;'],[-1,'        '],[0,'        if(this.defaultsPerSymbolizer === true) {'],[0,'            var defaults = this.defaultStyle;'],[0,'            OpenLayers.Util.applyDefaults(symbolizer, {'],[-1,'                pointRadius: defaults.pointRadius'],[-1,'            });'],[0,'            if(symbolizer.stroke === true || symbolizer.graphic === true) {'],[0,'                OpenLayers.Util.applyDefaults(symbolizer, {'],[-1,'                    strokeWidth: defaults.strokeWidth,'],[-1,'                    strokeColor: defaults.strokeColor,'],[-1,'                    strokeOpacity: defaults.strokeOpacity,'],[-1,'                    strokeDashstyle: defaults.strokeDashstyle,'],[-1,'                    strokeLinecap: defaults.strokeLinecap'],[-1,'                });'],[-1,'            }'],[0,'            if(symbolizer.fill === true || symbolizer.graphic === true) {'],[0,'                OpenLayers.Util.applyDefaults(symbolizer, {'],[-1,'                    fillColor: defaults.fillColor,'],[-1,'                    fillOpacity: defaults.fillOpacity'],[-1,'                });'],[-1,'            }'],[0,'            if(symbolizer.graphic === true) {'],[0,'                OpenLayers.Util.applyDefaults(symbolizer, {'],[-1,'                    pointRadius: this.defaultStyle.pointRadius,'],[-1,'                    externalGraphic: this.defaultStyle.externalGraphic,'],[-1,'                    graphicName: this.defaultStyle.graphicName,'],[-1,'                    graphicOpacity: this.defaultStyle.graphicOpacity,'],[-1,'                    graphicWidth: this.defaultStyle.graphicWidth,'],[-1,'                    graphicHeight: this.defaultStyle.graphicHeight,'],[-1,'                    graphicXOffset: this.defaultStyle.graphicXOffset,'],[-1,'                    graphicYOffset: this.defaultStyle.graphicYOffset'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ merge the style with the current style'],[0,'        return this.createLiterals('],[-1,'                OpenLayers.Util.extend(style, symbolizer), feature);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createLiterals'],[-1,'     * creates literals for all style properties that have an entry in'],[-1,'     * &lt;this.propertyStyles&gt;.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * style   - {Object} style to create literals for. Will be modified'],[-1,'     *           inline.'],[-1,'     * feature - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} the modified style'],[-1,'     *\/'],[-1,'    createLiterals: function(style, feature) {'],[0,'        var context = OpenLayers.Util.extend({}, feature.attributes || feature.data);'],[0,'        OpenLayers.Util.extend(context, this.context);'],[-1,'        '],[0,'        for (var i in this.propertyStyles) {'],[0,'            style[i] = OpenLayers.Style.createLiteral(style[i], context, feature, i);'],[-1,'        }'],[0,'        return style;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: findPropertyStyles'],[-1,'     * Looks into all rules for this style and the defaultStyle to collect'],[-1,'     * all the style hash property names containing ${...} strings that have'],[-1,'     * to be replaced using the createLiteral method before returning them.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} hash of property names that need createLiteral parsing. The'],[-1,'     * name of the property is the key, and the value is true;'],[-1,'     *\/'],[-1,'    findPropertyStyles: function() {'],[0,'        var propertyStyles = {};'],[-1,''],[-1,'        \/\/ check the default style'],[0,'        var style = this.defaultStyle;'],[0,'        this.addPropertyStyles(propertyStyles, style);'],[-1,''],[-1,'        \/\/ walk through all rules to check for properties in their symbolizer'],[0,'        var rules = this.rules;'],[0,'        var symbolizer, value;'],[0,'        for (var i=0, len=rules.length; i&lt;len; i++) {'],[0,'            symbolizer = rules[i].symbolizer;'],[0,'            for (var key in symbolizer) {'],[0,'                value = symbolizer[key];'],[0,'                if (typeof value == \&quot;object\&quot;) {'],[-1,'                    \/\/ symbolizer key is \&quot;Point\&quot;, \&quot;Line\&quot; or \&quot;Polygon\&quot;'],[0,'                    this.addPropertyStyles(propertyStyles, value);'],[-1,'                } else {'],[-1,'                    \/\/ symbolizer is a hash of style properties'],[0,'                    this.addPropertyStyles(propertyStyles, symbolizer);'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return propertyStyles;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addPropertyStyles'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * propertyStyles - {Object} hash to add new property styles to. Will be'],[-1,'     *                  modified inline'],[-1,'     * symbolizer     - {Object} search this symbolizer for property styles'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} propertyStyles hash'],[-1,'     *\/'],[-1,'    addPropertyStyles: function(propertyStyles, symbolizer) {'],[0,'        var property;'],[0,'        for (var key in symbolizer) {'],[0,'            property = symbolizer[key];'],[0,'            if (typeof property == \&quot;string\&quot; &amp;&amp;'],[-1,'                    property.match(\/\\$\\{\\w+\\}\/)) {'],[0,'                propertyStyles[key] = true;'],[-1,'            }'],[-1,'        }'],[0,'        return propertyStyles;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: addRules'],[-1,'     * Adds rules to this style.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * rules - {Array(&lt;OpenLayers.Rule&gt;)}'],[-1,'     *\/'],[-1,'    addRules: function(rules) {'],[0,'        Array.prototype.push.apply(this.rules, rules);'],[0,'        this.propertyStyles = this.findPropertyStyles();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setDefaultStyle'],[-1,'     * Sets the default style for this style object.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * style - {Object} Hash of style properties'],[-1,'     *\/'],[-1,'    setDefaultStyle: function(style) {'],[0,'        this.defaultStyle = style; '],[0,'        this.propertyStyles = this.findPropertyStyles();'],[-1,'    },'],[-1,'        '],[-1,'    \/**'],[-1,'     * Method: getSymbolizerPrefix'],[-1,'     * Returns the correct symbolizer prefix according to the'],[-1,'     * geometry type of the passed geometry'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} key of the according symbolizer'],[-1,'     *\/'],[-1,'    getSymbolizerPrefix: function(geometry) {'],[0,'        var prefixes = OpenLayers.Style.SYMBOLIZER_PREFIXES;'],[0,'        for (var i=0, len=prefixes.length; i&lt;len; i++) {'],[0,'            if (geometry.CLASS_NAME.indexOf(prefixes[i]) != -1) {'],[0,'                return prefixes[i];'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Clones this style.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Style&gt;} Clone of this style.'],[-1,'     *\/'],[-1,'    clone: function() {'],[0,'        var options = OpenLayers.Util.extend({}, this);'],[-1,'        \/\/ clone rules'],[0,'        if(this.rules) {'],[0,'            options.rules = [];'],[0,'            for(var i=0, len=this.rules.length; i&lt;len; ++i) {'],[0,'                options.rules.push(this.rules[i].clone());'],[-1,'            }'],[-1,'        }'],[-1,'        \/\/ clone context'],[0,'        options.context = this.context &amp;&amp; OpenLayers.Util.extend({}, this.context);'],[-1,'        \/\/clone default style'],[0,'        var defaultStyle = OpenLayers.Util.extend({}, this.defaultStyle);'],[0,'        return new OpenLayers.Style(defaultStyle, options);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Style\&quot;'],[-1,'});'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * Function: createLiteral'],[-1,' * converts a style value holding a combination of PropertyName and Literal'],[-1,' * into a Literal, taking the property values from the passed features.'],[-1,' * '],[-1,' * Parameters:'],[-1,' * value - {String} value to parse. If this string contains a construct like'],[-1,' *         \&quot;foo ${bar}\&quot;, then \&quot;foo \&quot; will be taken as literal, and \&quot;${bar}\&quot;'],[-1,' *         will be replaced by the value of the \&quot;bar\&quot; attribute of the passed'],[-1,' *         feature.'],[-1,' * context - {Object} context to take attribute values from'],[-1,' * feature - {&lt;OpenLayers.Feature.Vector&gt;} optional feature to pass to'],[-1,' *           &lt;OpenLayers.String.format&gt; for evaluating functions in the'],[-1,' *           context.'],[-1,' * property - {String} optional, name of the property for which the literal is'],[-1,' *            being created for evaluating functions in the context.'],[-1,' * '],[-1,' * Returns:'],[-1,' * {String} the parsed value. In the example of the value parameter above, the'],[-1,' * result would be \&quot;foo valueOfBar\&quot;, assuming that the passed feature has an'],[-1,' * attribute named \&quot;bar\&quot; with the value \&quot;valueOfBar\&quot;.'],[-1,' *\/'],[1,'OpenLayers.Style.createLiteral = function(value, context, feature, property) {'],[0,'    if (typeof value == \&quot;string\&quot; &amp;&amp; value.indexOf(\&quot;${\&quot;) != -1) {'],[0,'        value = OpenLayers.String.format(value, context, [feature, property]);'],[0,'        value = (isNaN(value) || !value) ? value : parseFloat(value);'],[-1,'    }'],[0,'    return value;'],[-1,'};'],[-1,'    '],[-1,'\/**'],[-1,' * Constant: OpenLayers.Style.SYMBOLIZER_PREFIXES'],[-1,' * {Array} prefixes of the sld symbolizers. These are the'],[-1,' * same as the main geometry types'],[-1,' *\/'],[1,'OpenLayers.Style.SYMBOLIZER_PREFIXES = [\'Point\', \'Line\', \'Polygon\', \'Text\','],[-1,'    \'Raster\'];'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Rule.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' * @requires OpenLayers\/Style.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Rule'],[-1,' * This class represents an SLD Rule, as being used for rule-based SLD styling.'],[-1,' *\/'],[1,'OpenLayers.Rule = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: id'],[-1,'     * {String} A unique id for this session.'],[-1,'     *\/'],[-1,'    id: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: name'],[-1,'     * {String} name of this rule'],[-1,'     *\/'],[-1,'    name: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: title'],[-1,'     * {String} Title of this rule (set if included in SLD)'],[-1,'     *\/'],[-1,'    title: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: description'],[-1,'     * {String} Description of this rule (set if abstract is included in SLD)'],[-1,'     *\/'],[-1,'    description: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: context'],[-1,'     * {Object} An optional object with properties that the rule should be'],[-1,'     * evaluated against. If no context is specified, feature.attributes will'],[-1,'     * be used.'],[-1,'     *\/'],[-1,'    context: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: filter'],[-1,'     * {&lt;OpenLayers.Filter&gt;} Optional filter for the rule.'],[-1,'     *\/'],[-1,'    filter: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: elseFilter'],[-1,'     * {Boolean} Determines whether this rule is only to be applied only if'],[-1,'     * no other rules match (ElseFilter according to the SLD specification). '],[-1,'     * Default is false.  For instances of OpenLayers.Rule, if elseFilter is'],[-1,'     * false, the rule will always apply.  For subclasses, the else property is '],[-1,'     * ignored.'],[-1,'     *\/'],[-1,'    elseFilter: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: symbolizer'],[-1,'     * {Object} Symbolizer or hash of symbolizers for this rule. If hash of'],[-1,'     * symbolizers, keys are one or more of [\&quot;Point\&quot;, \&quot;Line\&quot;, \&quot;Polygon\&quot;]. The'],[-1,'     * latter if useful if it is required to style e.g. vertices of a line'],[-1,'     * with a point symbolizer. Note, however, that this is not implemented'],[-1,'     * yet in OpenLayers, but it is the way how symbolizers are defined in'],[-1,'     * SLD.'],[-1,'     *\/'],[-1,'    symbolizer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: symbolizers'],[-1,'     * {Array} Collection of symbolizers associated with this rule.  If '],[-1,'     *     provided at construction, the symbolizers array has precedence'],[-1,'     *     over the deprecated symbolizer property.  Note that multiple '],[-1,'     *     symbolizers are not currently supported by the vector renderers.'],[-1,'     *     Rules with multiple symbolizers are currently only useful for'],[-1,'     *     maintaining elements in an SLD document.'],[-1,'     *\/'],[-1,'    symbolizers: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: minScaleDenominator'],[-1,'     * {Number} or {String} minimum scale at which to draw the feature.'],[-1,'     * In the case of a String, this can be a combination of text and'],[-1,'     * propertyNames in the form \&quot;literal ${propertyName}\&quot;'],[-1,'     *\/'],[-1,'    minScaleDenominator: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxScaleDenominator'],[-1,'     * {Number} or {String} maximum scale at which to draw the feature.'],[-1,'     * In the case of a String, this can be a combination of text and'],[-1,'     * propertyNames in the form \&quot;literal ${propertyName}\&quot;'],[-1,'     *\/'],[-1,'    maxScaleDenominator: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Rule'],[-1,'     * Creates a Rule.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object with properties to set on the'],[-1,'     *           rule'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Rule&gt;}'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        this.symbolizer = {};'],[0,'        OpenLayers.Util.extend(this, options);'],[0,'        if (this.symbolizers) {'],[0,'            delete this.symbolizer;'],[-1,'        }'],[0,'        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \&quot;_\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: destroy'],[-1,'     * nullify references to prevent circular references and memory leaks'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        for (var i in this.symbolizer) {'],[0,'            this.symbolizer[i] = null;'],[-1,'        }'],[0,'        this.symbolizer = null;'],[0,'        delete this.symbolizers;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: evaluate'],[-1,'     * evaluates this rule for a specific feature'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature&gt;} feature to apply the rule to.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} true if the rule applies, false if it does not.'],[-1,'     * This rule is the default rule and always returns true.'],[-1,'     *\/'],[-1,'    evaluate: function(feature) {'],[0,'        var context = this.getContext(feature);'],[0,'        var applies = true;'],[-1,''],[0,'        if (this.minScaleDenominator || this.maxScaleDenominator) {'],[0,'            var scale = feature.layer.map.getScale();'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ check if within minScale\/maxScale bounds'],[0,'        if (this.minScaleDenominator) {'],[0,'            applies = scale &gt;= OpenLayers.Style.createLiteral('],[-1,'                    this.minScaleDenominator, context);'],[-1,'        }'],[0,'        if (applies &amp;&amp; this.maxScaleDenominator) {'],[0,'            applies = scale &lt; OpenLayers.Style.createLiteral('],[-1,'                    this.maxScaleDenominator, context);'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ check if optional filter applies'],[0,'        if(applies &amp;&amp; this.filter) {'],[-1,'            \/\/ feature id filters get the feature, others get the context'],[0,'            if(this.filter.CLASS_NAME == \&quot;OpenLayers.Filter.FeatureId\&quot;) {'],[0,'                applies = this.filter.evaluate(feature);'],[-1,'            } else {'],[0,'                applies = this.filter.evaluate(context);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        return applies;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getContext'],[-1,'     * Gets the context for evaluating this rule'],[-1,'     * '],[-1,'     * Paramters:'],[-1,'     * feature - {&lt;OpenLayers.Feature&gt;} feature to take the context from if'],[-1,'     *           none is specified.'],[-1,'     *\/'],[-1,'    getContext: function(feature) {'],[0,'        var context = this.context;'],[0,'        if (!context) {'],[0,'            context = feature.attributes || feature.data;'],[-1,'        }'],[0,'        if (typeof this.context == \&quot;function\&quot;) {'],[0,'            context = this.context(feature);'],[-1,'        }'],[0,'        return context;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Clones this rule.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Rule&gt;} Clone of this rule.'],[-1,'     *\/'],[-1,'    clone: function() {'],[0,'        var options = OpenLayers.Util.extend({}, this);'],[0,'        if (this.symbolizers) {'],[-1,'            \/\/ clone symbolizers'],[0,'            var len = this.symbolizers.length;'],[0,'            options.symbolizers = new Array(len);'],[0,'            for (var i=0; i&lt;len; ++i) {'],[0,'                options.symbolizers[i] = this.symbolizers[i].clone();'],[-1,'            }'],[-1,'        } else {'],[-1,'            \/\/ clone symbolizer'],[0,'            options.symbolizer = {};'],[0,'            var value, type;'],[0,'            for(var key in this.symbolizer) {'],[0,'                value = this.symbolizer[key];'],[0,'                type = typeof value;'],[0,'                if(type === \&quot;object\&quot;) {'],[0,'                    options.symbolizer[key] = OpenLayers.Util.extend({}, value);'],[0,'                } else if(type === \&quot;string\&quot;) {'],[0,'                    options.symbolizer[key] = value;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'        \/\/ clone filter'],[0,'        options.filter = this.filter &amp;&amp; this.filter.clone();'],[-1,'        \/\/ clone context'],[0,'        options.context = this.context &amp;&amp; OpenLayers.Util.extend({}, this.context);'],[0,'        return new OpenLayers.Rule(options);'],[-1,'    },'],[-1,'        '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Rule\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/OGCExceptionReport.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.OGCExceptionReport'],[-1,' * Class to read exception reports for various OGC services and versions.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.OGCExceptionReport = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        ogc: \&quot;http:\/\/www.opengis.net\/ogc\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;ogc\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.OGCExceptionReport'],[-1,'     * Create a new parser for OGC exception reports.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read OGC exception report data from a string, and return an object with'],[-1,'     * information about the exceptions.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Information about the exceptions that occurred.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        var result;'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        var root = data.documentElement;'],[0,'        var exceptionInfo = {exceptionReport: null}; '],[0,'        if (root) {'],[0,'            this.readChildNodes(data, exceptionInfo);'],[0,'            if (exceptionInfo.exceptionReport === null) {'],[-1,'                \/\/ fall-back to OWSCommon since this is a common output format for exceptions'],[-1,'                \/\/ we cannot easily use the ows readers directly since they differ for 1.0 and 1.1'],[0,'                exceptionInfo = new OpenLayers.Format.OWSCommon().read(data);'],[-1,'            }'],[-1,'        }'],[0,'        return exceptionInfo;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;ogc\&quot;: {'],[-1,'            \&quot;ServiceExceptionReport\&quot;: function(node, obj) {'],[0,'                obj.exceptionReport = {exceptions: []};'],[0,'                this.readChildNodes(node, obj.exceptionReport);'],[-1,'            },'],[-1,'            \&quot;ServiceException\&quot;: function(node, exceptionReport) {'],[0,'                var exception = {'],[-1,'                    code: node.getAttribute(\&quot;code\&quot;),'],[-1,'                    locator: node.getAttribute(\&quot;locator\&quot;),'],[-1,'                    text: this.getChildValue(node)'],[-1,'                };'],[0,'                exceptionReport.exceptions.push(exception);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.OGCExceptionReport\&quot;'],[-1,'    '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/OGCExceptionReport.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.XML.VersionedOGC'],[-1,' * Base class for versioned formats, i.e. a format which supports multiple'],[-1,' * versions.'],[-1,' *'],[-1,' * To enable checking if parsing succeeded, you will need to define a property'],[-1,' * called errorProperty on the parser you want to check. The parser will then'],[-1,' * check the returned object to see if that property is present. If it is, it'],[-1,' * assumes the parsing was successful. If it is not present (or is null), it will'],[-1,' * pass the document through an OGCExceptionReport parser.'],[-1,' * '],[-1,' * If errorProperty is undefined for the parser, this error checking mechanism'],[-1,' * will be disabled.'],[-1,' *'],[-1,' *'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.XML.VersionedOGC = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.'],[-1,'     *\/'],[-1,'    defaultVersion: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: version'],[-1,'     * {String} Specify a version string if one is known.'],[-1,'     *\/'],[-1,'    version: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: profile'],[-1,'     * {String} If provided, use a custom profile.'],[-1,'     *\/'],[-1,'    profile: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: allowFallback'],[-1,'     * {Boolean} If a profiled parser cannot be found for the returned version,'],[-1,'     * use a non-profiled parser as the fallback. Application code using this'],[-1,'     * should take into account that the return object structure might be'],[-1,'     * missing the specifics of the profile. Defaults to false.'],[-1,'     *\/'],[-1,'    allowFallback: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: name'],[-1,'     * {String} The name of this parser, this is the part of the CLASS_NAME'],[-1,'     * except for \&quot;OpenLayers.Format.\&quot;'],[-1,'     *\/'],[-1,'    name: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: stringifyOutput'],[-1,'     * {Boolean} If true, write will return a string otherwise a DOMElement.'],[-1,'     * Default is false.'],[-1,'     *\/'],[-1,'    stringifyOutput: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: parser'],[-1,'     * {Object} Instance of the versioned parser.  Cached for multiple read and'],[-1,'     *     write calls of the same version.'],[-1,'     *\/'],[-1,'    parser: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.XML.VersionedOGC.'],[-1,'     * Constructor.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on'],[-1,'     *     the object.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[0,'        var className = this.CLASS_NAME;'],[0,'        this.name = className.substring(className.lastIndexOf(\&quot;.\&quot;)+1);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getVersion'],[-1,'     * Returns the version to use. Subclasses can override this function'],[-1,'     * if a different version detection is needed.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * root - {DOMElement}'],[-1,'     * options - {Object} Optional configuration object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The version to use.'],[-1,'     *\/'],[-1,'    getVersion: function(root, options) {'],[0,'        var version;'],[-1,'        \/\/ read'],[0,'        if (root) {'],[0,'            version = this.version;'],[0,'            if(!version) {'],[0,'                version = root.getAttribute(\&quot;version\&quot;);'],[0,'                if(!version) {'],[0,'                    version = this.defaultVersion;'],[-1,'                }'],[-1,'            }'],[-1,'        } else { \/\/ write'],[0,'            version = (options &amp;&amp; options.version) || '],[-1,'                this.version || this.defaultVersion;'],[-1,'        }'],[0,'        return version;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getParser'],[-1,'     * Get an instance of the cached parser if available, otherwise create one.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * version - {String}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Format&gt;}'],[-1,'     *\/'],[-1,'    getParser: function(version) {'],[0,'        version = version || this.defaultVersion;'],[0,'        var profile = this.profile ? \&quot;_\&quot; + this.profile : \&quot;\&quot;;'],[0,'        if(!this.parser || this.parser.VERSION != version) {'],[0,'            var format = OpenLayers.Format[this.name]['],[-1,'                \&quot;v\&quot; + version.replace(\/\\.\/g, \&quot;_\&quot;) + profile'],[-1,'            ];'],[0,'            if(!format) {'],[0,'                if (profile !== \&quot;\&quot; &amp;&amp; this.allowFallback) {'],[-1,'                    \/\/ fallback to the non-profiled version of the parser'],[0,'                    profile = \&quot;\&quot;;'],[0,'                    format = OpenLayers.Format[this.name]['],[-1,'                        \&quot;v\&quot; + version.replace(\/\\.\/g, \&quot;_\&quot;)'],[-1,'                    ];'],[-1,'                }'],[0,'                if (!format) {'],[0,'                    throw \&quot;Can\'t find a \&quot; + this.name + \&quot; parser for version \&quot; +'],[-1,'                          version + profile;'],[-1,'                }'],[-1,'            }'],[0,'            this.parser = new format(this.options);'],[-1,'        }'],[0,'        return this.parser;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Write a document.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object} An object representing the document.'],[-1,'     * options - {Object} Optional configuration object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The document as a string'],[-1,'     *\/'],[-1,'    write: function(obj, options) {'],[0,'        var version = this.getVersion(null, options);'],[0,'        this.parser = this.getParser(version);'],[0,'        var root = this.parser.write(obj, options);'],[0,'        if (this.stringifyOutput === false) {'],[0,'            return root;'],[-1,'        } else {'],[0,'            return OpenLayers.Format.XML.prototype.write.apply(this, [root]);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read a doc and return an object representing the document.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {String | DOMElement} Data to read.'],[-1,'     * options - {Object} Options for the reader.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object representing the document.'],[-1,'     *\/'],[-1,'    read: function(data, options) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        var root = data.documentElement;'],[0,'        var version = this.getVersion(root);'],[0,'        this.parser = this.getParser(version);          \/\/ Select the parser'],[0,'        var obj = this.parser.read(data, options);      \/\/ Parse the data'],[-1,''],[0,'        var errorProperty = this.parser.errorProperty || null;'],[0,'        if (errorProperty !== null &amp;&amp; obj[errorProperty] === undefined) {'],[-1,'            \/\/ an error must have happened, so parse it and report back'],[0,'            var format = new OpenLayers.Format.OGCExceptionReport();'],[0,'            obj.error = format.read(data);'],[-1,'        }'],[0,'        obj.version = version;'],[0,'        return obj;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.XML.VersionedOGC\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Filter.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' * @requires OpenLayers\/Style.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Filter'],[-1,' * This class represents an OGC Filter.'],[-1,' *\/'],[1,'OpenLayers.Filter = OpenLayers.Class({'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Filter'],[-1,'     * This class represents a generic filter.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter&gt;}'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Util.extend(this, options);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: destroy'],[-1,'     * Remove reference to anything added.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: evaluate'],[-1,'     * Evaluates this filter in a specific context.  Instances or subclasses'],[-1,'     * are supposed to override this method.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * context - {Object} Context to use in evaluating the filter.  If a vector'],[-1,'     *     feature is provided, the feature.attributes will be used as context.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The filter applies.'],[-1,'     *\/'],[-1,'    evaluate: function(context) {'],[0,'        return true;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Clones this filter. Should be implemented by subclasses.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter&gt;} Clone of this filter.'],[-1,'     *\/'],[-1,'    clone: function() {'],[0,'        return null;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: toString'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} Include &lt;OpenLayers.Format.CQL&gt; in your build to get a CQL'],[-1,'     *     representation of the filter returned. Otherwise \&quot;[Object object]\&quot;'],[-1,'     *     will be returned.'],[-1,'     *\/'],[-1,'    toString: function() {'],[0,'        var string;'],[0,'        if (OpenLayers.Format &amp;&amp; OpenLayers.Format.CQL) {'],[0,'            string = OpenLayers.Format.CQL.prototype.write(this);'],[-1,'        } else {'],[0,'            string = Object.prototype.toString.call(this);'],[-1,'        }'],[0,'        return string;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Filter\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Filter\/FeatureId.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Filter.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Filter.FeatureId'],[-1,' * This class represents a ogc:FeatureId Filter, as being used for rule-based SLD'],[-1,' * styling'],[-1,' * '],[-1,' * Inherits from:'],[-1,' * - &lt;OpenLayers.Filter&gt;'],[-1,' *\/'],[1,'OpenLayers.Filter.FeatureId = OpenLayers.Class(OpenLayers.Filter, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: fids'],[-1,'     * {Array(String)} Feature Ids to evaluate this rule against. '],[-1,'     *     To be passed inside the params object.'],[-1,'     *\/'],[-1,'    fids: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: type'],[-1,'     * {String} Type to identify this filter.'],[-1,'     *\/'],[-1,'    type: \&quot;FID\&quot;,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Filter.FeatureId'],[-1,'     * Creates an ogc:FeatureId rule.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object with properties to set on the'],[-1,'     *           rule'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter.FeatureId&gt;}'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        this.fids = [];'],[0,'        OpenLayers.Filter.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: evaluate'],[-1,'     * evaluates this rule for a specific feature'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature&gt;} feature to apply the rule to.'],[-1,'     *           For vector features, the check is run against the fid,'],[-1,'     *           for plain features against the id.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} true if the rule applies, false if it does not'],[-1,'     *\/'],[-1,'    evaluate: function(feature) {'],[0,'        for (var i=0, len=this.fids.length; i&lt;len; i++) {'],[0,'            var fid = feature.fid || feature.id;'],[0,'            if (fid == this.fids[i]) {'],[0,'                return true;'],[-1,'            }'],[-1,'        }'],[0,'        return false;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Clones this filter.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter.FeatureId&gt;} Clone of this filter.'],[-1,'     *\/'],[-1,'    clone: function() {'],[0,'        var filter = new OpenLayers.Filter.FeatureId();'],[0,'        OpenLayers.Util.extend(filter, this);'],[0,'        filter.fids = this.fids.slice();'],[0,'        return filter;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Filter.FeatureId\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Filter\/Logical.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Filter.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Filter.Logical'],[-1,' * This class represents ogc:And, ogc:Or and ogc:Not rules.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' * - &lt;OpenLayers.Filter&gt;'],[-1,' *\/'],[1,'OpenLayers.Filter.Logical = OpenLayers.Class(OpenLayers.Filter, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: filters'],[-1,'     * {Array(&lt;OpenLayers.Filter&gt;)} Child filters for this filter.'],[-1,'     *\/'],[-1,'    filters: null, '],[-1,'     '],[-1,'    \/**'],[-1,'     * APIProperty: type'],[-1,'     * {String} type of logical operator. Available types are:'],[-1,'     * - OpenLayers.Filter.Logical.AND = \&quot;&amp;&amp;\&quot;;'],[-1,'     * - OpenLayers.Filter.Logical.OR  = \&quot;||\&quot;;'],[-1,'     * - OpenLayers.Filter.Logical.NOT = \&quot;!\&quot;;'],[-1,'     *\/'],[-1,'    type: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Filter.Logical'],[-1,'     * Creates a logical filter (And, Or, Not).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object with properties to set on the'],[-1,'     *     filter.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter.Logical&gt;}'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        this.filters = [];'],[0,'        OpenLayers.Filter.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: destroy'],[-1,'     * Remove reference to child filters.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.filters = null;'],[0,'        OpenLayers.Filter.prototype.destroy.apply(this);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: evaluate'],[-1,'     * Evaluates this filter in a specific context.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * context - {Object} Context to use in evaluating the filter.  A vector'],[-1,'     *     feature may also be provided to evaluate feature attributes in '],[-1,'     *     comparison filters or geometries in spatial filters.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The filter applies.'],[-1,'     *\/'],[-1,'    evaluate: function(context) {'],[0,'        var i, len;'],[0,'        switch(this.type) {'],[-1,'            case OpenLayers.Filter.Logical.AND:'],[0,'                for (i=0, len=this.filters.length; i&lt;len; i++) {'],[0,'                    if (this.filters[i].evaluate(context) == false) {'],[0,'                        return false;'],[-1,'                    }'],[-1,'                }'],[0,'                return true;'],[-1,'                '],[-1,'            case OpenLayers.Filter.Logical.OR:'],[0,'                for (i=0, len=this.filters.length; i&lt;len; i++) {'],[0,'                    if (this.filters[i].evaluate(context) == true) {'],[0,'                        return true;'],[-1,'                    }'],[-1,'                }'],[0,'                return false;'],[-1,'            '],[-1,'            case OpenLayers.Filter.Logical.NOT:'],[0,'                return (!this.filters[0].evaluate(context));'],[-1,'        }'],[0,'        return undefined;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Clones this filter.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter.Logical&gt;} Clone of this filter.'],[-1,'     *\/'],[-1,'    clone: function() {'],[0,'        var filters = [];        '],[0,'        for(var i=0, len=this.filters.length; i&lt;len; ++i) {'],[0,'            filters.push(this.filters[i].clone());'],[-1,'        }'],[0,'        return new OpenLayers.Filter.Logical({'],[-1,'            type: this.type,'],[-1,'            filters: filters'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Filter.Logical\&quot;'],[-1,'});'],[-1,''],[-1,''],[1,'OpenLayers.Filter.Logical.AND = \&quot;&amp;&amp;\&quot;;'],[1,'OpenLayers.Filter.Logical.OR  = \&quot;||\&quot;;'],[1,'OpenLayers.Filter.Logical.NOT = \&quot;!\&quot;;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Filter\/Comparison.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Filter.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Filter.Comparison'],[-1,' * This class represents a comparison filter.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' * - &lt;OpenLayers.Filter&gt;'],[-1,' *\/'],[1,'OpenLayers.Filter.Comparison = OpenLayers.Class(OpenLayers.Filter, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: type'],[-1,'     * {String} type: type of the comparison. This is one of'],[-1,'     * - OpenLayers.Filter.Comparison.EQUAL_TO                 = \&quot;==\&quot;;'],[-1,'     * - OpenLayers.Filter.Comparison.NOT_EQUAL_TO             = \&quot;!=\&quot;;'],[-1,'     * - OpenLayers.Filter.Comparison.LESS_THAN                = \&quot;&lt;\&quot;;'],[-1,'     * - OpenLayers.Filter.Comparison.GREATER_THAN             = \&quot;&gt;\&quot;;'],[-1,'     * - OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO    = \&quot;&lt;=\&quot;;'],[-1,'     * - OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO = \&quot;&gt;=\&quot;;'],[-1,'     * - OpenLayers.Filter.Comparison.BETWEEN                  = \&quot;..\&quot;;'],[-1,'     * - OpenLayers.Filter.Comparison.LIKE                     = \&quot;~\&quot;;'],[-1,'     * - OpenLayers.Filter.Comparison.IS_NULL                  = \&quot;NULL\&quot;;'],[-1,'     *\/'],[-1,'    type: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: property'],[-1,'     * {String}'],[-1,'     * name of the context property to compare'],[-1,'     *\/'],[-1,'    property: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: value'],[-1,'     * {Number} or {String}'],[-1,'     * comparison value for binary comparisons. In the case of a String, this'],[-1,'     * can be a combination of text and propertyNames in the form'],[-1,'     * \&quot;literal ${propertyName}\&quot;'],[-1,'     *\/'],[-1,'    value: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: matchCase'],[-1,'     * {Boolean} Force case sensitive searches for EQUAL_TO and NOT_EQUAL_TO'],[-1,'     *     comparisons.  The Filter Encoding 1.1 specification added a matchCase'],[-1,'     *     attribute to ogc:PropertyIsEqualTo and ogc:PropertyIsNotEqualTo'],[-1,'     *     elements.  This property will be serialized with those elements only'],[-1,'     *     if using the v1.1.0 filter format. However, when evaluating filters'],[-1,'     *     here, the matchCase property will always be respected (for EQUAL_TO'],[-1,'     *     and NOT_EQUAL_TO).  Default is true. '],[-1,'     *\/'],[-1,'    matchCase: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: lowerBoundary'],[-1,'     * {Number} or {String}'],[-1,'     * lower boundary for between comparisons. In the case of a String, this'],[-1,'     * can be a combination of text and propertyNames in the form'],[-1,'     * \&quot;literal ${propertyName}\&quot;'],[-1,'     *\/'],[-1,'    lowerBoundary: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: upperBoundary'],[-1,'     * {Number} or {String}'],[-1,'     * upper boundary for between comparisons. In the case of a String, this'],[-1,'     * can be a combination of text and propertyNames in the form'],[-1,'     * \&quot;literal ${propertyName}\&quot;'],[-1,'     *\/'],[-1,'    upperBoundary: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Filter.Comparison'],[-1,'     * Creates a comparison rule.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object with properties to set on the'],[-1,'     *           rule'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter.Comparison&gt;}'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Filter.prototype.initialize.apply(this, [options]);'],[-1,'        \/\/ since matchCase on PropertyIsLike is not schema compliant, we only'],[-1,'        \/\/ want to use this if explicitly asked for'],[0,'        if (this.type === OpenLayers.Filter.Comparison.LIKE '],[-1,'            &amp;&amp; options.matchCase === undefined) {'],[0,'                this.matchCase = null;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: evaluate'],[-1,'     * Evaluates this filter in a specific context.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * context - {Object} Context to use in evaluating the filter.  If a vector'],[-1,'     *     feature is provided, the feature.attributes will be used as context.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The filter applies.'],[-1,'     *\/'],[-1,'    evaluate: function(context) {'],[0,'        if (context instanceof OpenLayers.Feature.Vector) {'],[0,'            context = context.attributes;'],[-1,'        }'],[0,'        var result = false;'],[0,'        var got = context[this.property];'],[0,'        var exp;'],[0,'        switch(this.type) {'],[-1,'            case OpenLayers.Filter.Comparison.EQUAL_TO:'],[0,'                exp = this.value;'],[0,'                if(!this.matchCase &amp;&amp;'],[-1,'                   typeof got == \&quot;string\&quot; &amp;&amp; typeof exp == \&quot;string\&quot;) {'],[0,'                    result = (got.toUpperCase() == exp.toUpperCase());'],[-1,'                } else {'],[0,'                    result = (got == exp);'],[-1,'                }'],[0,'                break;'],[-1,'            case OpenLayers.Filter.Comparison.NOT_EQUAL_TO:'],[0,'                exp = this.value;'],[0,'                if(!this.matchCase &amp;&amp;'],[-1,'                   typeof got == \&quot;string\&quot; &amp;&amp; typeof exp == \&quot;string\&quot;) {'],[0,'                    result = (got.toUpperCase() != exp.toUpperCase());'],[-1,'                } else {'],[0,'                    result = (got != exp);'],[-1,'                }'],[0,'                break;'],[-1,'            case OpenLayers.Filter.Comparison.LESS_THAN:'],[0,'                result = got &lt; this.value;'],[0,'                break;'],[-1,'            case OpenLayers.Filter.Comparison.GREATER_THAN:'],[0,'                result = got &gt; this.value;'],[0,'                break;'],[-1,'            case OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO:'],[0,'                result = got &lt;= this.value;'],[0,'                break;'],[-1,'            case OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO:'],[0,'                result = got &gt;= this.value;'],[0,'                break;'],[-1,'            case OpenLayers.Filter.Comparison.BETWEEN:'],[0,'                result = (got &gt;= this.lowerBoundary) &amp;&amp;'],[-1,'                    (got &lt;= this.upperBoundary);'],[0,'                break;'],[-1,'            case OpenLayers.Filter.Comparison.LIKE:'],[0,'                var regexp = new RegExp(this.value, \&quot;gi\&quot;);'],[0,'                result = regexp.test(got);'],[0,'                break;'],[-1,'            case OpenLayers.Filter.Comparison.IS_NULL:'],[0,'                result = (got === null);'],[0,'                break;'],[-1,'        }'],[0,'        return result;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: value2regex'],[-1,'     * Converts the value of this rule into a regular expression string,'],[-1,'     * according to the wildcard characters specified. This method has to'],[-1,'     * be called after instantiation of this class, if the value is not a'],[-1,'     * regular expression already.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * wildCard   - {Char} wildcard character in the above value, default'],[-1,'     *              is \&quot;*\&quot;'],[-1,'     * singleChar - {Char} single-character wildcard in the above value'],[-1,'     *              default is \&quot;.\&quot;'],[-1,'     * escapeChar - {Char} escape character in the above value, default is'],[-1,'     *              \&quot;!\&quot;'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} regular expression string'],[-1,'     *\/'],[-1,'    value2regex: function(wildCard, singleChar, escapeChar) {'],[0,'        if (wildCard == \&quot;.\&quot;) {'],[0,'            throw new Error(\&quot;\'.\' is an unsupported wildCard character for \&quot; +'],[-1,'                            \&quot;OpenLayers.Filter.Comparison\&quot;);'],[-1,'        }'],[-1,'        '],[-1,''],[-1,'        \/\/ set UMN MapServer defaults for unspecified parameters'],[0,'        wildCard = wildCard ? wildCard : \&quot;*\&quot;;'],[0,'        singleChar = singleChar ? singleChar : \&quot;.\&quot;;'],[0,'        escapeChar = escapeChar ? escapeChar : \&quot;!\&quot;;'],[-1,'        '],[0,'        this.value = this.value.replace('],[-1,'                new RegExp(\&quot;\\\\\&quot;+escapeChar+\&quot;(.|$)\&quot;, \&quot;g\&quot;), \&quot;\\\\$1\&quot;);'],[0,'        this.value = this.value.replace('],[-1,'                new RegExp(\&quot;\\\\\&quot;+singleChar, \&quot;g\&quot;), \&quot;.\&quot;);'],[0,'        this.value = this.value.replace('],[-1,'                new RegExp(\&quot;\\\\\&quot;+wildCard, \&quot;g\&quot;), \&quot;.*\&quot;);'],[0,'        this.value = this.value.replace('],[-1,'                new RegExp(\&quot;\\\\\\\\.\\\\*\&quot;, \&quot;g\&quot;), \&quot;\\\\\&quot;+wildCard);'],[0,'        this.value = this.value.replace('],[-1,'                new RegExp(\&quot;\\\\\\\\\\\\.\&quot;, \&quot;g\&quot;), \&quot;\\\\\&quot;+singleChar);'],[-1,'        '],[0,'        return this.value;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: regex2value'],[-1,'     * Convert the value of this rule from a regular expression string into an'],[-1,'     *     ogc literal string using a wildCard of *, a singleChar of ., and an'],[-1,'     *     escape of !.  Leaves the &lt;value&gt; property unmodified.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} A string value.'],[-1,'     *\/'],[-1,'    regex2value: function() {'],[-1,'        '],[0,'        var value = this.value;'],[-1,'        '],[-1,'        \/\/ replace ! with !!'],[0,'        value = value.replace(\/!\/g, \&quot;!!\&quot;);'],[-1,''],[-1,'        \/\/ replace \\. with !. (watching out for \\\\.)'],[0,'        value = value.replace(\/(\\\\)?\\\\\\.\/g, function($0, $1) {'],[0,'            return $1 ? $0 : \&quot;!.\&quot;;'],[-1,'        });'],[-1,'        '],[-1,'        \/\/ replace \\* with #* (watching out for \\\\*)'],[0,'        value = value.replace(\/(\\\\)?\\\\\\*\/g, function($0, $1) {'],[0,'            return $1 ? $0 : \&quot;!*\&quot;;'],[-1,'        });'],[-1,'        '],[-1,'        \/\/ replace \\\\ with \\'],[0,'        value = value.replace(\/\\\\\\\\\/g, \&quot;\\\\\&quot;);'],[-1,''],[-1,'        \/\/ convert .* to * (the sequence #.* is not allowed)'],[0,'        value = value.replace(\/\\.\\*\/g, \&quot;*\&quot;);'],[-1,'        '],[0,'        return value;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Clones this filter.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter.Comparison&gt;} Clone of this filter.'],[-1,'     *\/'],[-1,'    clone: function() {'],[0,'        return OpenLayers.Util.extend(new OpenLayers.Filter.Comparison(), this);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Filter.Comparison\&quot;'],[-1,'});'],[-1,''],[-1,''],[1,'OpenLayers.Filter.Comparison.EQUAL_TO                 = \&quot;==\&quot;;'],[1,'OpenLayers.Filter.Comparison.NOT_EQUAL_TO             = \&quot;!=\&quot;;'],[1,'OpenLayers.Filter.Comparison.LESS_THAN                = \&quot;&lt;\&quot;;'],[1,'OpenLayers.Filter.Comparison.GREATER_THAN             = \&quot;&gt;\&quot;;'],[1,'OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO    = \&quot;&lt;=\&quot;;'],[1,'OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO = \&quot;&gt;=\&quot;;'],[1,'OpenLayers.Filter.Comparison.BETWEEN                  = \&quot;..\&quot;;'],[1,'OpenLayers.Filter.Comparison.LIKE                     = \&quot;~\&quot;;'],[1,'OpenLayers.Filter.Comparison.IS_NULL                  = \&quot;NULL\&quot;;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Filter\/Spatial.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Filter.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Filter.Spatial'],[-1,' * This class represents a spatial filter.'],[-1,' * Currently implemented: BBOX, DWithin and Intersects'],[-1,' * '],[-1,' * Inherits from:'],[-1,' * - &lt;OpenLayers.Filter&gt;'],[-1,' *\/'],[1,'OpenLayers.Filter.Spatial = OpenLayers.Class(OpenLayers.Filter, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: type'],[-1,'     * {String} Type of spatial filter.'],[-1,'     *'],[-1,'     * The type should be one of:'],[-1,'     * - OpenLayers.Filter.Spatial.BBOX'],[-1,'     * - OpenLayers.Filter.Spatial.INTERSECTS'],[-1,'     * - OpenLayers.Filter.Spatial.DWITHIN'],[-1,'     * - OpenLayers.Filter.Spatial.WITHIN'],[-1,'     * - OpenLayers.Filter.Spatial.CONTAINS'],[-1,'     *\/'],[-1,'    type: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: property'],[-1,'     * {String} Name of the context property to compare.'],[-1,'     *\/'],[-1,'    property: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: value'],[-1,'     * {&lt;OpenLayers.Bounds&gt; || &lt;OpenLayers.Geometry&gt;} The bounds or geometry'],[-1,'     *     to be used by the filter.  Use bounds for BBOX filters and geometry'],[-1,'     *     for INTERSECTS or DWITHIN filters.'],[-1,'     *\/'],[-1,'    value: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: distance'],[-1,'     * {Number} The distance to use in a DWithin spatial filter.'],[-1,'     *\/'],[-1,'    distance: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: distanceUnits'],[-1,'     * {String} The units to use for the distance, e.g. \'m\'.'],[-1,'     *\/'],[-1,'    distanceUnits: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Filter.Spatial'],[-1,'     * Creates a spatial filter.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object with properties to set on the'],[-1,'     *     filter.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter.Spatial&gt;}'],[-1,'     *\/'],[-1,''],[-1,'   \/**'],[-1,'    * Method: evaluate'],[-1,'    * Evaluates this filter for a specific feature.'],[-1,'    * '],[-1,'    * Parameters:'],[-1,'    * feature - {&lt;OpenLayers.Feature.Vector&gt;} feature to apply the filter to.'],[-1,'    * '],[-1,'    * Returns:'],[-1,'    * {Boolean} The feature meets filter criteria.'],[-1,'    *\/'],[-1,'    evaluate: function(feature) {'],[0,'        var intersect = false;'],[0,'        switch(this.type) {'],[-1,'            case OpenLayers.Filter.Spatial.BBOX:'],[-1,'            case OpenLayers.Filter.Spatial.INTERSECTS:'],[0,'                if(feature.geometry) {'],[0,'                    var geom = this.value;'],[0,'                    if(this.value.CLASS_NAME == \&quot;OpenLayers.Bounds\&quot;) {'],[0,'                        geom = this.value.toGeometry();'],[-1,'                    }'],[0,'                    if(feature.geometry.intersects(geom)) {'],[0,'                        intersect = true;'],[-1,'                    }'],[-1,'                }'],[0,'                break;'],[-1,'            default:'],[0,'                throw new Error(\'evaluate is not implemented for this filter type.\');'],[-1,'        }'],[0,'        return intersect;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Clones this filter.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter.Spatial&gt;} Clone of this filter.'],[-1,'     *\/'],[-1,'    clone: function() {'],[0,'        var options = OpenLayers.Util.applyDefaults({'],[-1,'            value: this.value &amp;&amp; this.value.clone &amp;&amp; this.value.clone()'],[-1,'        }, this);'],[0,'        return new OpenLayers.Filter.Spatial(options);'],[-1,'    },'],[-1,'    CLASS_NAME: \&quot;OpenLayers.Filter.Spatial\&quot;'],[-1,'});'],[-1,''],[1,'OpenLayers.Filter.Spatial.BBOX = \&quot;BBOX\&quot;;'],[1,'OpenLayers.Filter.Spatial.INTERSECTS = \&quot;INTERSECTS\&quot;;'],[1,'OpenLayers.Filter.Spatial.DWITHIN = \&quot;DWITHIN\&quot;;'],[1,'OpenLayers.Filter.Spatial.WITHIN = \&quot;WITHIN\&quot;;'],[1,'OpenLayers.Filter.Spatial.CONTAINS = \&quot;CONTAINS\&quot;;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/SLD.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,' * @requires OpenLayers\/Style.js'],[-1,' * @requires OpenLayers\/Rule.js'],[-1,' * @requires OpenLayers\/Filter\/FeatureId.js'],[-1,' * @requires OpenLayers\/Filter\/Logical.js'],[-1,' * @requires OpenLayers\/Filter\/Comparison.js'],[-1,' * @requires OpenLayers\/Filter\/Spatial.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.SLD'],[-1,' * Read\/Write SLD. Create a new instance with the &lt;OpenLayers.Format.SLD&gt;'],[-1,' *     constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML.VersionedOGC&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.SLD = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: profile'],[-1,'     * {String} If provided, use a custom profile.'],[-1,'     *'],[-1,'     * Currently supported profiles:'],[-1,'     * - GeoServer - parses GeoServer vendor specific capabilities for SLD.'],[-1,'     *\/'],[-1,'    profile: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;1.0.0\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;1.0.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: stringifyOutput'],[-1,'     * {Boolean} If true, write will return a string otherwise a DOMElement.'],[-1,'     * Default is true.'],[-1,'     *\/'],[-1,'    stringifyOutput: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: namedLayersAsArray'],[-1,'     * {Boolean} Generate a namedLayers array.  If false, the namedLayers'],[-1,'     *     property value will be an object keyed by layer name. Default is'],[-1,'     *     false.'],[-1,'     *\/'],[-1,'    namedLayersAsArray: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Write a SLD document given a list of styles.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * sld - {Object} An object representing the SLD.'],[-1,'     * options - {Object} Optional configuration object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} An SLD document string.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read and SLD doc and return an object representing the SLD.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {String | DOMElement} Data to read.'],[-1,'     * options - {Object} Options for the reader.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object representing the SLD.'],[-1,'     *\/'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.SLD\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/Filter.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,' * @requires OpenLayers\/Filter\/FeatureId.js'],[-1,' * @requires OpenLayers\/Filter\/Logical.js'],[-1,' * @requires OpenLayers\/Filter\/Comparison.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.Filter'],[-1,' * Read\/Write ogc:Filter. Create a new instance with the &lt;OpenLayers.Format.Filter&gt;'],[-1,' *     constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML.VersionedOGC&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.Filter = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;1.0.0\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;1.0.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Write an ogc:Filter given a filter object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * filter - {&lt;OpenLayers.Filter&gt;} An filter.'],[-1,'     * options - {Object} Optional configuration object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Elment} An ogc:Filter element node.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read and Filter doc and return an object representing the Filter.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {String | DOMElement} Data to read.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter&gt;} A filter object.'],[-1,'     *\/'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.Filter\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Filter\/Function.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Filter.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Filter.Function'],[-1,' * This class represents a filter function.'],[-1,' * We are using this class for creation of complex '],[-1,' * filters that can contain filter functions as values.'],[-1,' * Nesting function as other functions parameter is supported.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' * - &lt;OpenLayers.Filter&gt;'],[-1,' *\/'],[1,'OpenLayers.Filter.Function = OpenLayers.Class(OpenLayers.Filter, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: name'],[-1,'     * {String} Name of the function.'],[-1,'     *\/'],[-1,'    name: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: params'],[-1,'     * {Array(&lt;OpenLayers.Filter.Function&gt; || String || Number)} Function parameters'],[-1,'     * For now support only other Functions, String or Number'],[-1,'     *\/'],[-1,'    params: null,  '],[-1,'    '],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Filter.Function'],[-1,'     * Creates a filter function.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object with properties to set on the'],[-1,'     *     function.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter.Function&gt;}'],[-1,'     *\/'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Filter.Function\&quot;'],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/Filter\/v1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/Filter.js'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Filter\/Function.js'],[-1,' * @requires OpenLayers\/BaseTypes\/Date.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.Filter.v1'],[-1,' * Superclass for Filter version 1 parsers.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.Filter.v1 = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        ogc: \&quot;http:\/\/www.opengis.net\/ogc\&quot;,'],[-1,'        gml: \&quot;http:\/\/www.opengis.net\/gml\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;ogc\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location for a particular minor version.'],[-1,'     *\/'],[-1,'    schemaLocation: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.Filter.v1'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.Filter&gt; constructor instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {DOMElement} A Filter document element.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter&gt;} A filter object.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        var obj = {};'],[0,'        this.readers.ogc[\&quot;Filter\&quot;].apply(this, [data, obj]);'],[0,'        return obj.filter;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;ogc\&quot;: {'],[-1,'            \&quot;_expression\&quot;: function(node) {'],[-1,'                \/\/ only the simplest of ogc:expression handled'],[-1,'                \/\/ \&quot;some text and an &lt;PropertyName&gt;attribute&lt;\/PropertyName&gt;\&quot;}'],[0,'                var obj, value = \&quot;\&quot;;'],[0,'                for(var child=node.firstChild; child; child=child.nextSibling) {'],[0,'                    switch(child.nodeType) {'],[-1,'                        case 1:'],[0,'                            obj = this.readNode(child);'],[0,'                            if (obj.property) {'],[0,'                                value += \&quot;${\&quot; + obj.property + \&quot;}\&quot;;'],[0,'                            } else if (obj.value !== undefined) {'],[0,'                                value += obj.value;'],[-1,'                            }'],[0,'                            break;'],[-1,'                        case 3: \/\/ text node'],[-1,'                        case 4: \/\/ cdata section'],[0,'                            value += child.nodeValue;'],[-1,'                    }'],[-1,'                }'],[0,'                return value;'],[-1,'            },'],[-1,'            \&quot;Filter\&quot;: function(node, parent) {'],[-1,'                \/\/ Filters correspond to subclasses of OpenLayers.Filter.'],[-1,'                \/\/ Since they contain information we don\'t persist, we'],[-1,'                \/\/ create a temporary object and then pass on the filter'],[-1,'                \/\/ (ogc:Filter) to the parent obj.'],[0,'                var obj = {'],[-1,'                    fids: [],'],[-1,'                    filters: []'],[-1,'                };'],[0,'                this.readChildNodes(node, obj);'],[0,'                if(obj.fids.length &gt; 0) {'],[0,'                    parent.filter = new OpenLayers.Filter.FeatureId({'],[-1,'                        fids: obj.fids'],[-1,'                    });'],[0,'                } else if(obj.filters.length &gt; 0) {'],[0,'                    parent.filter = obj.filters[0];'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;FeatureId\&quot;: function(node, obj) {'],[0,'                var fid = node.getAttribute(\&quot;fid\&quot;);'],[0,'                if(fid) {'],[0,'                    obj.fids.push(fid);'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;And\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Logical({'],[-1,'                    type: OpenLayers.Filter.Logical.AND'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            },'],[-1,'            \&quot;Or\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Logical({'],[-1,'                    type: OpenLayers.Filter.Logical.OR'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            },'],[-1,'            \&quot;Not\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Logical({'],[-1,'                    type: OpenLayers.Filter.Logical.NOT'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            },'],[-1,'            \&quot;PropertyIsLessThan\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.LESS_THAN'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            },'],[-1,'            \&quot;PropertyIsGreaterThan\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.GREATER_THAN'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            },'],[-1,'            \&quot;PropertyIsLessThanOrEqualTo\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            },'],[-1,'            \&quot;PropertyIsGreaterThanOrEqualTo\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            },'],[-1,'            \&quot;PropertyIsBetween\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.BETWEEN'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            },'],[-1,'            \&quot;Literal\&quot;: function(node, obj) {'],[0,'                obj.value = OpenLayers.String.numericIf('],[-1,'                    this.getChildValue(node), true);'],[-1,'            },'],[-1,'            \&quot;PropertyName\&quot;: function(node, filter) {'],[0,'                filter.property = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;LowerBoundary\&quot;: function(node, filter) {'],[0,'                filter.lowerBoundary = OpenLayers.String.numericIf('],[-1,'                    this.readers.ogc._expression.call(this, node), true);'],[-1,'            },'],[-1,'            \&quot;UpperBoundary\&quot;: function(node, filter) {'],[0,'                filter.upperBoundary = OpenLayers.String.numericIf('],[-1,'                    this.readers.ogc._expression.call(this, node), true);'],[-1,'            },'],[-1,'            \&quot;Intersects\&quot;: function(node, obj) {'],[0,'                this.readSpatial(node, obj, OpenLayers.Filter.Spatial.INTERSECTS);'],[-1,'            },'],[-1,'            \&quot;Within\&quot;: function(node, obj) {'],[0,'                this.readSpatial(node, obj, OpenLayers.Filter.Spatial.WITHIN);'],[-1,'            },'],[-1,'            \&quot;Contains\&quot;: function(node, obj) {'],[0,'                this.readSpatial(node, obj, OpenLayers.Filter.Spatial.CONTAINS);'],[-1,'            },'],[-1,'            \&quot;DWithin\&quot;: function(node, obj) {'],[0,'                this.readSpatial(node, obj, OpenLayers.Filter.Spatial.DWITHIN);'],[-1,'            },'],[-1,'            \&quot;Distance\&quot;: function(node, obj) {'],[0,'                obj.distance = parseInt(this.getChildValue(node));'],[0,'                obj.distanceUnits = node.getAttribute(\&quot;units\&quot;);'],[-1,'            },'],[-1,'            \&quot;Function\&quot;: function(node, obj) {'],[-1,'                \/\/TODO write decoder for it'],[0,'                return;'],[-1,'            },'],[-1,'            \&quot;PropertyIsNull\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.IS_NULL'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: readSpatial'],[-1,'     *'],[-1,'     * Read a {&lt;OpenLayers.Filter.Spatial&gt;} filter.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} A DOM element that contains an ogc:expression.'],[-1,'     * obj - {Object} The target object.'],[-1,'     * type - {String} One of the OpenLayers.Filter.Spatial.* constants.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter.Spatial&gt;} The created filter.'],[-1,'     *\/'],[-1,'    readSpatial: function(node, obj, type) {'],[0,'        var filter = new OpenLayers.Filter.Spatial({'],[-1,'            type: type'],[-1,'        });'],[0,'        this.readChildNodes(node, filter);'],[0,'        filter.value = filter.components[0];'],[0,'        delete filter.components;'],[0,'        obj.filters.push(filter);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: encodeLiteral'],[-1,'     * Generates the string representation of a value for use in &lt;Literal&gt; '],[-1,'     *     elements.  The default encoder writes Date values as ISO 8601 '],[-1,'     *     strings.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * value - {Object} Literal value to encode'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} String representation of the provided value.'],[-1,'     *\/'],[-1,'    encodeLiteral: function(value) {'],[0,'        if (value instanceof Date) {'],[0,'            value = OpenLayers.Date.toISOString(value);'],[-1,'        }'],[0,'        return value;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: writeOgcExpression'],[-1,'     * Limited support for writing OGC expressions. Currently it supports'],[-1,'     * (&lt;OpenLayers.Filter.Function&gt; || String || Number)'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * value - (&lt;OpenLayers.Filter.Function&gt; || String || Number)'],[-1,'     * node - {DOMElement} A parent DOM element '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} Updated node element.'],[-1,'     *\/'],[-1,'    writeOgcExpression: function(value, node) {'],[0,'        if (value instanceof OpenLayers.Filter.Function){'],[0,'            this.writeNode(\&quot;Function\&quot;, value, node);'],[-1,'        } else {'],[0,'            this.writeNode(\&quot;Literal\&quot;, value, node);'],[-1,'        }'],[0,'        return node;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: write'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * filter - {&lt;OpenLayers.Filter&gt;} A filter object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} An ogc:Filter element.'],[-1,'     *\/'],[-1,'    write: function(filter) {'],[0,'        return this.writers.ogc[\&quot;Filter\&quot;].apply(this, [filter]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;ogc\&quot;: {'],[-1,'            \&quot;Filter\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:Filter\&quot;);'],[0,'                this.writeNode(this.getFilterType(filter), filter, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;_featureIds\&quot;: function(filter) {'],[0,'                var node = this.createDocumentFragment();'],[0,'                for (var i=0, ii=filter.fids.length; i&lt;ii; ++i) {'],[0,'                    this.writeNode(\&quot;ogc:FeatureId\&quot;, filter.fids[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;FeatureId\&quot;: function(fid) {'],[0,'                return this.createElementNSPlus(\&quot;ogc:FeatureId\&quot;, {'],[-1,'                    attributes: {fid: fid}'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;And\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:And\&quot;);'],[0,'                var childFilter;'],[0,'                for (var i=0, ii=filter.filters.length; i&lt;ii; ++i) {'],[0,'                    childFilter = filter.filters[i];'],[0,'                    this.writeNode('],[-1,'                        this.getFilterType(childFilter), childFilter, node'],[-1,'                    );'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Or\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:Or\&quot;);'],[0,'                var childFilter;'],[0,'                for (var i=0, ii=filter.filters.length; i&lt;ii; ++i) {'],[0,'                    childFilter = filter.filters[i];'],[0,'                    this.writeNode('],[-1,'                        this.getFilterType(childFilter), childFilter, node'],[-1,'                    );'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Not\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:Not\&quot;);'],[0,'                var childFilter = filter.filters[0];'],[0,'                this.writeNode('],[-1,'                    this.getFilterType(childFilter), childFilter, node'],[-1,'                );'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyIsLessThan\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:PropertyIsLessThan\&quot;);'],[-1,'                \/\/ no ogc:expression handling for PropertyName for now'],[0,'                this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[-1,'                \/\/ handle Literals or Functions for now'],[0,'                this.writeOgcExpression(filter.value, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyIsGreaterThan\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:PropertyIsGreaterThan\&quot;);'],[-1,'                \/\/ no ogc:expression handling for PropertyName for now'],[0,'                this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[-1,'                \/\/ handle Literals or Functions for now'],[0,'                this.writeOgcExpression(filter.value, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyIsLessThanOrEqualTo\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:PropertyIsLessThanOrEqualTo\&quot;);'],[-1,'                \/\/ no ogc:expression handling for PropertyName for now'],[0,'                this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[-1,'                \/\/ handle Literals or Functions for now'],[0,'                this.writeOgcExpression(filter.value, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyIsGreaterThanOrEqualTo\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:PropertyIsGreaterThanOrEqualTo\&quot;);'],[-1,'                \/\/ no ogc:expression handling for PropertyName for now'],[0,'                this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[-1,'                \/\/ handle Literals or Functions for now'],[0,'                this.writeOgcExpression(filter.value, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyIsBetween\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:PropertyIsBetween\&quot;);'],[-1,'                \/\/ no ogc:expression handling for PropertyName for now'],[0,'                this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[0,'                this.writeNode(\&quot;LowerBoundary\&quot;, filter, node);'],[0,'                this.writeNode(\&quot;UpperBoundary\&quot;, filter, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyName\&quot;: function(filter) {'],[-1,'                \/\/ no ogc:expression handling for now'],[0,'                return this.createElementNSPlus(\&quot;ogc:PropertyName\&quot;, {'],[-1,'                    value: filter.property'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;Literal\&quot;: function(value) {'],[0,'                var encode = this.encodeLiteral ||'],[-1,'                    OpenLayers.Format.Filter.v1.prototype.encodeLiteral;'],[0,'                return this.createElementNSPlus(\&quot;ogc:Literal\&quot;, {'],[-1,'                    value: encode(value)'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;LowerBoundary\&quot;: function(filter) {'],[-1,'                \/\/ handle Literals or Functions for now'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:LowerBoundary\&quot;);'],[0,'                this.writeOgcExpression(filter.lowerBoundary, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;UpperBoundary\&quot;: function(filter) {'],[-1,'                \/\/ handle Literals or Functions for now'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:UpperBoundary\&quot;);'],[0,'                this.writeNode(\&quot;Literal\&quot;, filter.upperBoundary, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;INTERSECTS\&quot;: function(filter) {'],[0,'                return this.writeSpatial(filter, \&quot;Intersects\&quot;);'],[-1,'            },'],[-1,'            \&quot;WITHIN\&quot;: function(filter) {'],[0,'                return this.writeSpatial(filter, \&quot;Within\&quot;);'],[-1,'            },'],[-1,'            \&quot;CONTAINS\&quot;: function(filter) {'],[0,'                return this.writeSpatial(filter, \&quot;Contains\&quot;);'],[-1,'            },'],[-1,'            \&quot;DWITHIN\&quot;: function(filter) {'],[0,'                var node = this.writeSpatial(filter, \&quot;DWithin\&quot;);'],[0,'                this.writeNode(\&quot;Distance\&quot;, filter, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Distance\&quot;: function(filter) {'],[0,'                return this.createElementNSPlus(\&quot;ogc:Distance\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        units: filter.distanceUnits'],[-1,'                    },'],[-1,'                    value: filter.distance'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;Function\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:Function\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        name: filter.name'],[-1,'                    }'],[-1,'                });'],[0,'                var params = filter.params;'],[0,'                for(var i=0, len=params.length; i&lt;len; i++){'],[0,'                    this.writeOgcExpression(params[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyIsNull\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:PropertyIsNull\&quot;);'],[0,'                this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[0,'                return node;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getFilterType'],[-1,'     *\/'],[-1,'    getFilterType: function(filter) {'],[0,'        var filterType = this.filterMap[filter.type];'],[0,'        if(!filterType) {'],[0,'            throw \&quot;Filter writing not supported for rule type: \&quot; + filter.type;'],[-1,'        }'],[0,'        return filterType;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: filterMap'],[-1,'     * {Object} Contains a member for each filter type.  Values are node names'],[-1,'     *     for corresponding OGC Filter child elements.'],[-1,'     *\/'],[-1,'    filterMap: {'],[-1,'        \&quot;&amp;&amp;\&quot;: \&quot;And\&quot;,'],[-1,'        \&quot;||\&quot;: \&quot;Or\&quot;,'],[-1,'        \&quot;!\&quot;: \&quot;Not\&quot;,'],[-1,'        \&quot;==\&quot;: \&quot;PropertyIsEqualTo\&quot;,'],[-1,'        \&quot;!=\&quot;: \&quot;PropertyIsNotEqualTo\&quot;,'],[-1,'        \&quot;&lt;\&quot;: \&quot;PropertyIsLessThan\&quot;,'],[-1,'        \&quot;&gt;\&quot;: \&quot;PropertyIsGreaterThan\&quot;,'],[-1,'        \&quot;&lt;=\&quot;: \&quot;PropertyIsLessThanOrEqualTo\&quot;,'],[-1,'        \&quot;&gt;=\&quot;: \&quot;PropertyIsGreaterThanOrEqualTo\&quot;,'],[-1,'        \&quot;..\&quot;: \&quot;PropertyIsBetween\&quot;,'],[-1,'        \&quot;~\&quot;: \&quot;PropertyIsLike\&quot;,'],[-1,'        \&quot;NULL\&quot;: \&quot;PropertyIsNull\&quot;,'],[-1,'        \&quot;BBOX\&quot;: \&quot;BBOX\&quot;,'],[-1,'        \&quot;DWITHIN\&quot;: \&quot;DWITHIN\&quot;,'],[-1,'        \&quot;WITHIN\&quot;: \&quot;WITHIN\&quot;,'],[-1,'        \&quot;CONTAINS\&quot;: \&quot;CONTAINS\&quot;,'],[-1,'        \&quot;INTERSECTS\&quot;: \&quot;INTERSECTS\&quot;,'],[-1,'        \&quot;FID\&quot;: \&quot;_featureIds\&quot;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.Filter.v1\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/Filter\/v1_0_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/GML\/v2.js'],[-1,' * @requires OpenLayers\/Format\/Filter\/v1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.Filter.v1_0_0'],[-1,' * Write ogc:Filter version 1.0.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.GML.v2&gt;'],[-1,' *  - &lt;OpenLayers.Format.Filter.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.Filter.v1_0_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.GML.v2, OpenLayers.Format.Filter.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: VERSION'],[-1,'     * {String} 1.0.0'],[-1,'     *\/'],[-1,'    VERSION: \&quot;1.0.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} http:\/\/www.opengis.net\/ogc\/filter\/1.0.0\/filter.xsd'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/ogc\/filter\/1.0.0\/filter.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.Filter.v1_0_0'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.Filter&gt; constructor instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.GML.v2.prototype.initialize.apply('],[-1,'            this, [options]'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;ogc\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;PropertyIsEqualTo\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.EQUAL_TO'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            },'],[-1,'            \&quot;PropertyIsNotEqualTo\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.NOT_EQUAL_TO'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            },'],[-1,'            \&quot;PropertyIsLike\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.LIKE'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                var wildCard = node.getAttribute(\&quot;wildCard\&quot;);'],[0,'                var singleChar = node.getAttribute(\&quot;singleChar\&quot;);'],[0,'                var esc = node.getAttribute(\&quot;escape\&quot;);'],[0,'                filter.value2regex(wildCard, singleChar, esc);'],[0,'                obj.filters.push(filter);'],[-1,'            }'],[-1,'        }, OpenLayers.Format.Filter.v1.prototype.readers[\&quot;ogc\&quot;]),'],[-1,'        \&quot;gml\&quot;: OpenLayers.Format.GML.v2.prototype.readers[\&quot;gml\&quot;],'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.v2.prototype.readers[\&quot;feature\&quot;]        '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;ogc\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;PropertyIsEqualTo\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:PropertyIsEqualTo\&quot;);'],[-1,'                \/\/ no ogc:expression handling for PropertyName for now'],[0,'                this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[-1,'                \/\/ handle Literals or Functions for now'],[0,'                this.writeOgcExpression(filter.value, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyIsNotEqualTo\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:PropertyIsNotEqualTo\&quot;);'],[-1,'                \/\/ no ogc:expression handling for PropertyName for now'],[0,'                this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[-1,'                \/\/ handle Literals or Functions for now'],[0,'                this.writeOgcExpression(filter.value, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyIsLike\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:PropertyIsLike\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        wildCard: \&quot;*\&quot;, singleChar: \&quot;.\&quot;, escape: \&quot;!\&quot;'],[-1,'                    }'],[-1,'                });'],[-1,'                \/\/ no ogc:expression handling for now'],[0,'                this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[-1,'                \/\/ convert regex string to ogc string'],[0,'                this.writeNode(\&quot;Literal\&quot;, filter.regex2value(), node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;BBOX\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:BBOX\&quot;);'],[-1,'                \/\/ PropertyName is mandatory in 1.0.0, but e.g. GeoServer also'],[-1,'                \/\/ accepts filters without it. When this is used with'],[-1,'                \/\/ OpenLayers.Protocol.WFS, OpenLayers.Format.WFST will set a'],[-1,'                \/\/ missing filter.property to the geometryName that is'],[-1,'                \/\/ configured with the protocol, which defaults to \&quot;the_geom\&quot;.'],[-1,'                \/\/ So the only way to omit this mandatory property is to not'],[-1,'                \/\/ set the property on the filter and to set the geometryName'],[-1,'                \/\/ on the WFS protocol to null. The latter also happens when'],[-1,'                \/\/ the protocol is configured without a geometryName and a'],[-1,'                \/\/ featureNS.'],[0,'                filter.property &amp;&amp; this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[0,'                var box = this.writeNode(\&quot;gml:Box\&quot;, filter.value, node);'],[0,'                if(filter.projection) {'],[0,'                    box.setAttribute(\&quot;srsName\&quot;, filter.projection);'],[-1,'                }'],[0,'                return node;'],[-1,'            }'],[-1,'        }, OpenLayers.Format.Filter.v1.prototype.writers[\&quot;ogc\&quot;]),'],[-1,'        \&quot;gml\&quot;: OpenLayers.Format.GML.v2.prototype.writers[\&quot;gml\&quot;],'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.v2.prototype.writers[\&quot;feature\&quot;]'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: writeSpatial'],[-1,'     *'],[-1,'     * Read a {&lt;OpenLayers.Filter.Spatial&gt;} filter and converts it into XML.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * filter - {&lt;OpenLayers.Filter.Spatial&gt;} The filter.'],[-1,'     * name - {String} Name of the generated XML element.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The created XML element.'],[-1,'     *\/'],[-1,'    writeSpatial: function(filter, name) {'],[0,'        var node = this.createElementNSPlus(\&quot;ogc:\&quot;+name);'],[0,'        this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[0,'        if(filter.value instanceof OpenLayers.Filter.Function) {'],[0,'            this.writeNode(\&quot;Function\&quot;, filter.value, node);'],[-1,'        } else {'],[0,'        var child;'],[0,'        if(filter.value instanceof OpenLayers.Geometry) {'],[0,'            child = this.writeNode(\&quot;feature:_geometry\&quot;, filter.value).firstChild;'],[-1,'        } else {'],[0,'            child = this.writeNode(\&quot;gml:Box\&quot;, filter.value);'],[-1,'        }'],[0,'        if(filter.projection) {'],[0,'            child.setAttribute(\&quot;srsName\&quot;, filter.projection);'],[-1,'        }'],[0,'        node.appendChild(child);'],[-1,'        }'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.Filter.v1_0_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Symbolizer.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Symbolizer'],[-1,' * Base class representing a symbolizer used for feature rendering.'],[-1,' *\/'],[1,'OpenLayers.Symbolizer = OpenLayers.Class({'],[-1,'    '],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: zIndex'],[-1,'     * {Number} The zIndex determines the rendering order for a symbolizer.'],[-1,'     *     Symbolizers with larger zIndex values are rendered over symbolizers'],[-1,'     *     with smaller zIndex values.  Default is 0.'],[-1,'     *\/'],[-1,'    zIndex: 0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Symbolizer'],[-1,'     * Instances of this class are not useful.  See one of the subclasses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} An object containing properties to be set on the '],[-1,'     *     symbolizer.  Any documented symbolizer property can be set at '],[-1,'     *     construction.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * A new symbolizer.'],[-1,'     *\/'],[-1,'    initialize: function(config) {'],[0,'        OpenLayers.Util.extend(this, config);'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: clone'],[-1,'     * Create a copy of this symbolizer.'],[-1,'     *'],[-1,'     * Returns a symbolizer of the same type with the same properties.'],[-1,'     *\/'],[-1,'    clone: function() {'],[0,'        var Type = eval(this.CLASS_NAME);'],[0,'        return new Type(OpenLayers.Util.extend({}, this));'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Symbolizer\&quot;'],[-1,'    '],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Symbolizer\/Point.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Symbolizer.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Symbolizer.Point'],[-1,' * A symbolizer used to render point features.'],[-1,' *\/'],[1,'OpenLayers.Symbolizer.Point = OpenLayers.Class(OpenLayers.Symbolizer, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: strokeColor'],[-1,'     * {String} Color for line stroke.  This is a RGB hex value (e.g. \&quot;#ff0000\&quot;'],[-1,'     *     for red).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: strokeOpacity'],[-1,'     * {Number} Stroke opacity (0-1).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: strokeWidth'],[-1,'     * {Number} Pixel stroke width.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: strokeLinecap'],[-1,'     * {String} Stroke cap type (\&quot;butt\&quot;, \&quot;round\&quot;, or \&quot;square\&quot;).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: strokeDashstyle'],[-1,'     * {String} Stroke dash style according to the SLD spec. Note that the'],[-1,'     *     OpenLayers values for strokeDashstyle (\&quot;dot\&quot;, \&quot;dash\&quot;, \&quot;dashdot\&quot;,'],[-1,'     *     \&quot;longdash\&quot;, \&quot;longdashdot\&quot;, or \&quot;solid\&quot;) will not work in SLD, but'],[-1,'     *     most SLD patterns will render correctly in OpenLayers.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: fillColor'],[-1,'     * {String} RGB hex fill color (e.g. \&quot;#ff0000\&quot; for red).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: fillOpacity'],[-1,'     * {Number} Fill opacity (0-1).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: pointRadius'],[-1,'     * {Number} Pixel point radius.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: externalGraphic'],[-1,'     * {String} Url to an external graphic that will be used for rendering '],[-1,'     *     points.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: graphicWidth'],[-1,'     * {Number} Pixel width for sizing an external graphic.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: graphicHeight'],[-1,'     * {Number} Pixel height for sizing an external graphic.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: graphicOpacity'],[-1,'     * {Number} Opacity (0-1) for an external graphic.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: graphicXOffset'],[-1,'     * {Number} Pixel offset along the positive x axis for displacing an '],[-1,'     *     external graphic.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: graphicYOffset'],[-1,'     * {Number} Pixel offset along the positive y axis for displacing an '],[-1,'     *     external graphic.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: rotation'],[-1,'     * {Number} The rotation of a graphic in the clockwise direction about its '],[-1,'     *     center point (or any point off center as specified by '],[-1,'     *     &lt;graphicXOffset&gt; and &lt;graphicYOffset&gt;).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: graphicName'],[-1,'     * {String} Named graphic to use when rendering points.  Supported values '],[-1,'     *     include \&quot;circle\&quot;, \&quot;square\&quot;, \&quot;star\&quot;, \&quot;x\&quot;, \&quot;cross\&quot;, and \&quot;triangle\&quot;.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Symbolizer.Point'],[-1,'     * Create a symbolizer for rendering points.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} An object containing properties to be set on the '],[-1,'     *     symbolizer.  Any documented symbolizer property can be set at '],[-1,'     *     construction.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * A new point symbolizer.'],[-1,'     *\/'],[-1,'    initialize: function(config) {'],[0,'        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Symbolizer.Point\&quot;'],[-1,'    '],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Symbolizer\/Line.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Symbolizer.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Symbolizer.Line'],[-1,' * A symbolizer used to render line features.'],[-1,' *\/'],[1,'OpenLayers.Symbolizer.Line = OpenLayers.Class(OpenLayers.Symbolizer, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: strokeColor'],[-1,'     * {String} Color for line stroke.  This is a RGB hex value (e.g. \&quot;#ff0000\&quot;'],[-1,'     *     for red).  '],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: strokeOpacity'],[-1,'     * {Number} Stroke opacity (0-1).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: strokeWidth'],[-1,'     * {Number} Pixel stroke width.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: strokeLinecap'],[-1,'     * {String} Stroke cap type (\&quot;butt\&quot;, \&quot;round\&quot;, or \&quot;square\&quot;).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: strokeDashstyle'],[-1,'     * {String} Stroke dash style according to the SLD spec. Note that the'],[-1,'     *     OpenLayers values for strokeDashstyle (\&quot;dot\&quot;, \&quot;dash\&quot;, \&quot;dashdot\&quot;,'],[-1,'     *     \&quot;longdash\&quot;, \&quot;longdashdot\&quot;, or \&quot;solid\&quot;) will not work in SLD, but'],[-1,'     *     most SLD patterns will render correctly in OpenLayers.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Symbolizer.Line'],[-1,'     * Create a symbolizer for rendering lines.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} An object containing properties to be set on the '],[-1,'     *     symbolizer.  Any documented symbolizer property can be set at '],[-1,'     *     construction.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * A new line symbolizer.'],[-1,'     *\/'],[-1,'    initialize: function(config) {'],[0,'        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Symbolizer.Line\&quot;'],[-1,'    '],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Symbolizer\/Polygon.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Symbolizer.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Symbolizer.Polygon'],[-1,' * A symbolizer used to render line features.'],[-1,' *\/'],[1,'OpenLayers.Symbolizer.Polygon = OpenLayers.Class(OpenLayers.Symbolizer, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: strokeColor'],[-1,'     * {String} Color for line stroke.  This is a RGB hex value (e.g. \&quot;#ff0000\&quot;'],[-1,'     *     for red).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: strokeOpacity'],[-1,'     * {Number} Stroke opacity (0-1).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: strokeWidth'],[-1,'     * {Number} Pixel stroke width.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: strokeLinecap'],[-1,'     * {String} Stroke cap type (\&quot;butt\&quot;, \&quot;round\&quot;, or \&quot;square\&quot;).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: strokeDashstyle'],[-1,'     * {String} Stroke dash style according to the SLD spec. Note that the'],[-1,'     *     OpenLayers values for strokeDashstyle (\&quot;dot\&quot;, \&quot;dash\&quot;, \&quot;dashdot\&quot;,'],[-1,'     *     \&quot;longdash\&quot;, \&quot;longdashdot\&quot;, or \&quot;solid\&quot;) will not work in SLD, but'],[-1,'     *     most SLD patterns will render correctly in OpenLayers.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: fillColor'],[-1,'     * {String} RGB hex fill color (e.g. \&quot;#ff0000\&quot; for red).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: fillOpacity'],[-1,'     * {Number} Fill opacity (0-1).'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Symbolizer.Polygon'],[-1,'     * Create a symbolizer for rendering polygons.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} An object containing properties to be set on the '],[-1,'     *     symbolizer.  Any documented symbolizer property can be set at '],[-1,'     *     construction.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * A new polygon symbolizer.'],[-1,'     *\/'],[-1,'    initialize: function(config) {'],[0,'        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Symbolizer.Polygon\&quot;'],[-1,'    '],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Symbolizer\/Text.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Symbolizer.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Symbolizer.Text'],[-1,' * A symbolizer used to render text labels for features.'],[-1,' *\/'],[1,'OpenLayers.Symbolizer.Text = OpenLayers.Class(OpenLayers.Symbolizer, {'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: label'],[-1,'     * {String} The text for the label.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: fontFamily'],[-1,'     * {String} The font family for the label.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: fontSize'],[-1,'     * {String} The font size for the label.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: fontWeight'],[-1,'     * {String} The font weight for the label.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: fontStyle'],[-1,'     * {String} The font style for the label.'],[-1,'     * '],[-1,'     * No default set here.  Use OpenLayers.Renderer.defaultRenderer for defaults.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Symbolizer.Text'],[-1,'     * Create a symbolizer for rendering text labels.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} An object containing properties to be set on the '],[-1,'     *     symbolizer.  Any documented symbolizer property can be set at '],[-1,'     *     construction.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * A new text symbolizer.'],[-1,'     *\/'],[-1,'    initialize: function(config) {'],[0,'        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Symbolizer.Text\&quot;'],[-1,'    '],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Symbolizer\/Raster.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Symbolizer.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Symbolizer.Raster'],[-1,' * A symbolizer used to render raster images.'],[-1,' *\/'],[1,'OpenLayers.Symbolizer.Raster = OpenLayers.Class(OpenLayers.Symbolizer, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Symbolizer.Raster'],[-1,'     * Create a symbolizer for rendering rasters.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} An object containing properties to be set on the '],[-1,'     *     symbolizer.  Any documented symbolizer property can be set at '],[-1,'     *     construction.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * A new raster symbolizer.'],[-1,'     *\/'],[-1,'    initialize: function(config) {'],[0,'        OpenLayers.Symbolizer.prototype.initialize.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Symbolizer.Raster\&quot;'],[-1,'    '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/SLD\/v1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Rule.js'],[-1,' * @requires OpenLayers\/Format\/SLD.js'],[-1,' * @requires OpenLayers\/Format\/Filter\/v1_0_0.js'],[-1,' * @requires OpenLayers\/Symbolizer\/Point.js'],[-1,' * @requires OpenLayers\/Symbolizer\/Line.js'],[-1,' * @requires OpenLayers\/Symbolizer\/Polygon.js'],[-1,' * @requires OpenLayers\/Symbolizer\/Text.js'],[-1,' * @requires OpenLayers\/Symbolizer\/Raster.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.SLD.v1'],[-1,' * Superclass for SLD version 1 parsers.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.Filter.v1_0_0&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.SLD.v1 = OpenLayers.Class(OpenLayers.Format.Filter.v1_0_0, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        sld: \&quot;http:\/\/www.opengis.net\/sld\&quot;,'],[-1,'        ogc: \&quot;http:\/\/www.opengis.net\/ogc\&quot;,'],[-1,'        gml: \&quot;http:\/\/www.opengis.net\/gml\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;sld\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location for a particular minor version.'],[-1,'     *\/'],[-1,'    schemaLocation: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: multipleSymbolizers'],[-1,'     * {Boolean} Support multiple symbolizers per rule.  Default is false.  if'],[-1,'     *     true, an OpenLayers.Style2 instance will be created to represent '],[-1,'     *     user styles instead of an OpenLayers.Style instace.  The '],[-1,'     *     OpenLayers.Style2 class allows collections of rules with multiple'],[-1,'     *     symbolizers, but is not currently useful for client side rendering.'],[-1,'     *     If multiple symbolizers is true, multiple FeatureTypeStyle elements'],[-1,'     *     are preserved in reading\/writing by setting symbolizer zIndex values.'],[-1,'     *     In addition, the &lt;defaultSymbolizer&gt; property is ignored if '],[-1,'     *     multiple symbolizers are supported (defaults should be applied'],[-1,'     *     when rendering).'],[-1,'     *\/'],[-1,'    multipleSymbolizers: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: featureTypeCounter'],[-1,'     * {Number} Private counter for multiple feature type styles.'],[-1,'     *\/'],[-1,'    featureTypeCounter: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: defaultSymbolizer.'],[-1,'     * {Object} A symbolizer with the SLD defaults.'],[-1,'     *\/'],[-1,'    defaultSymbolizer: {'],[-1,'        fillColor: \&quot;#808080\&quot;,'],[-1,'        fillOpacity: 1,'],[-1,'        strokeColor: \&quot;#000000\&quot;,'],[-1,'        strokeOpacity: 1,'],[-1,'        strokeWidth: 1,'],[-1,'        strokeDashstyle: \&quot;solid\&quot;,'],[-1,'        pointRadius: 3,'],[-1,'        graphicName: \&quot;square\&quot;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.SLD.v1'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.SLD&gt; constructor instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {DOMElement} An SLD document element.'],[-1,'     * options - {Object} Options for the reader.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * namedLayersAsArray - {Boolean}  Generate a namedLayers array.  If false,'],[-1,'     *     the namedLayers property value will be an object keyed by layer name.'],[-1,'     *     Default is false.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object representing the SLD.'],[-1,'     *\/'],[-1,'    read: function(data, options) {'],[0,'        options = OpenLayers.Util.applyDefaults(options, this.options);'],[0,'        var sld = {'],[-1,'            namedLayers: options.namedLayersAsArray === true ? [] : {}'],[-1,'        };'],[0,'        this.readChildNodes(data, sld);'],[0,'        return sld;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: OpenLayers.Util.applyDefaults({'],[-1,'        \&quot;sld\&quot;: {'],[-1,'            \&quot;StyledLayerDescriptor\&quot;: function(node, sld) {'],[0,'                sld.version = node.getAttribute(\&quot;version\&quot;);'],[0,'                this.readChildNodes(node, sld);'],[-1,'            },'],[-1,'            \&quot;Name\&quot;: function(node, obj) {'],[0,'                obj.name = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Title\&quot;: function(node, obj) {'],[0,'                obj.title = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Abstract\&quot;: function(node, obj) {'],[0,'                obj.description = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;NamedLayer\&quot;: function(node, sld) {'],[0,'                var layer = {'],[-1,'                    userStyles: [],'],[-1,'                    namedStyles: []'],[-1,'                };'],[0,'                this.readChildNodes(node, layer);'],[-1,'                \/\/ give each of the user styles this layer name'],[0,'                for(var i=0, len=layer.userStyles.length; i&lt;len; ++i) {'],[0,'                    layer.userStyles[i].layerName = layer.name;'],[-1,'                }'],[0,'                if(OpenLayers.Util.isArray(sld.namedLayers)) {'],[0,'                    sld.namedLayers.push(layer);                '],[-1,'                } else {'],[0,'                    sld.namedLayers[layer.name] = layer;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;NamedStyle\&quot;: function(node, layer) {'],[0,'                layer.namedStyles.push('],[-1,'                    this.getChildName(node.firstChild)'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;UserStyle\&quot;: function(node, layer) {'],[0,'                var obj = {defaultsPerSymbolizer: true, rules: []};'],[0,'                this.featureTypeCounter = -1;'],[0,'                this.readChildNodes(node, obj);'],[0,'                var style;'],[0,'                if (this.multipleSymbolizers) {'],[0,'                    delete obj.defaultsPerSymbolizer;'],[0,'                    style = new OpenLayers.Style2(obj);'],[-1,'                } else {'],[0,'                    style = new OpenLayers.Style(this.defaultSymbolizer, obj);'],[-1,'                }'],[0,'                layer.userStyles.push(style);'],[-1,'            },'],[-1,'            \&quot;IsDefault\&quot;: function(node, style) {'],[0,'                if(this.getChildValue(node) == \&quot;1\&quot;) {'],[0,'                    style.isDefault = true;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;FeatureTypeStyle\&quot;: function(node, style) {'],[0,'                ++this.featureTypeCounter;'],[0,'                var obj = {'],[-1,'                    rules: this.multipleSymbolizers ? style.rules : []'],[-1,'                };'],[0,'                this.readChildNodes(node, obj);'],[0,'                if (!this.multipleSymbolizers) {'],[0,'                    style.rules = obj.rules;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Rule\&quot;: function(node, obj) {'],[0,'                var config;'],[0,'                if (this.multipleSymbolizers) {'],[0,'                    config = {symbolizers: []};'],[-1,'                }'],[0,'                var rule = new OpenLayers.Rule(config);'],[0,'                this.readChildNodes(node, rule);'],[0,'                obj.rules.push(rule);'],[-1,'            },'],[-1,'            \&quot;ElseFilter\&quot;: function(node, rule) {'],[0,'                rule.elseFilter = true;'],[-1,'            },'],[-1,'            \&quot;MinScaleDenominator\&quot;: function(node, rule) {'],[0,'                rule.minScaleDenominator = parseFloat(this.getChildValue(node));'],[-1,'            },'],[-1,'            \&quot;MaxScaleDenominator\&quot;: function(node, rule) {'],[0,'                rule.maxScaleDenominator = parseFloat(this.getChildValue(node));'],[-1,'            },'],[-1,'            \&quot;TextSymbolizer\&quot;: function(node, rule) {'],[0,'                var config = {};'],[0,'                this.readChildNodes(node, config);'],[0,'                if (this.multipleSymbolizers) {'],[0,'                    config.zIndex = this.featureTypeCounter;'],[0,'                    rule.symbolizers.push('],[-1,'                        new OpenLayers.Symbolizer.Text(config)'],[-1,'                    );'],[-1,'                } else {'],[0,'                    rule.symbolizer[\&quot;Text\&quot;] = OpenLayers.Util.applyDefaults('],[-1,'                        config, rule.symbolizer[\&quot;Text\&quot;]'],[-1,'                    );'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;LabelPlacement\&quot;: function(node, symbolizer) {'],[0,'                this.readChildNodes(node, symbolizer);'],[-1,'            },'],[-1,'            \&quot;PointPlacement\&quot;: function(node, symbolizer) {'],[0,'                var config = {};'],[0,'                this.readChildNodes(node, config);'],[0,'                config.labelRotation = config.rotation;'],[0,'                delete config.rotation;'],[0,'                var labelAlign,'],[-1,'                    x = symbolizer.labelAnchorPointX,'],[-1,'                    y = symbolizer.labelAnchorPointY;'],[0,'                if (x &lt;= 1\/3) {'],[0,'                    labelAlign = \'l\';'],[0,'                } else if (x &gt; 1\/3 &amp;&amp; x &lt; 2\/3) {'],[0,'                    labelAlign = \'c\';'],[0,'                } else if (x &gt;= 2\/3) {'],[0,'                    labelAlign = \'r\';'],[-1,'                }'],[0,'                if (y &lt;= 1\/3) {'],[0,'                    labelAlign += \'b\';'],[0,'                } else if (y &gt; 1\/3 &amp;&amp; y &lt; 2\/3) {'],[0,'                    labelAlign += \'m\';'],[0,'                } else if (y &gt;= 2\/3) {'],[0,'                    labelAlign += \'t\';'],[-1,'                }'],[0,'                config.labelAlign = labelAlign;'],[0,'                OpenLayers.Util.applyDefaults(symbolizer, config);'],[-1,'            },'],[-1,'            \&quot;AnchorPoint\&quot;: function(node, symbolizer) {'],[0,'                this.readChildNodes(node, symbolizer);'],[-1,'            },'],[-1,'            \&quot;AnchorPointX\&quot;: function(node, symbolizer) {'],[0,'                var labelAnchorPointX = this.readers.ogc._expression.call(this, node);'],[-1,'                \/\/ always string, could be empty string'],[0,'                if(labelAnchorPointX) {'],[0,'                    symbolizer.labelAnchorPointX = labelAnchorPointX;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;AnchorPointY\&quot;: function(node, symbolizer) {'],[0,'                var labelAnchorPointY = this.readers.ogc._expression.call(this, node);'],[-1,'                \/\/ always string, could be empty string'],[0,'                if(labelAnchorPointY) {'],[0,'                    symbolizer.labelAnchorPointY = labelAnchorPointY;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Displacement\&quot;: function(node, symbolizer) {'],[0,'                this.readChildNodes(node, symbolizer);'],[-1,'            },'],[-1,'            \&quot;DisplacementX\&quot;: function(node, symbolizer) {'],[0,'                var labelXOffset = this.readers.ogc._expression.call(this, node);'],[-1,'                \/\/ always string, could be empty string'],[0,'                if(labelXOffset) {'],[0,'                    symbolizer.labelXOffset = labelXOffset;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;DisplacementY\&quot;: function(node, symbolizer) {'],[0,'                var labelYOffset = this.readers.ogc._expression.call(this, node);'],[-1,'                \/\/ always string, could be empty string'],[0,'                if(labelYOffset) {'],[0,'                    symbolizer.labelYOffset = labelYOffset;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;LinePlacement\&quot;: function(node, symbolizer) {'],[0,'                this.readChildNodes(node, symbolizer);'],[-1,'            },'],[-1,'            \&quot;PerpendicularOffset\&quot;: function(node, symbolizer) {'],[0,'                var labelPerpendicularOffset = this.readers.ogc._expression.call(this, node);'],[-1,'                \/\/ always string, could be empty string'],[0,'                if(labelPerpendicularOffset) {'],[0,'                    symbolizer.labelPerpendicularOffset = labelPerpendicularOffset;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Label\&quot;: function(node, symbolizer) {'],[0,'                var value = this.readers.ogc._expression.call(this, node);'],[0,'                if (value) {'],[0,'                    symbolizer.label = value;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Font\&quot;: function(node, symbolizer) {'],[0,'                this.readChildNodes(node, symbolizer);'],[-1,'            },'],[-1,'            \&quot;Halo\&quot;: function(node, symbolizer) {'],[-1,'                \/\/ halo has a fill, so send fresh object'],[0,'                var obj = {};'],[0,'                this.readChildNodes(node, obj);'],[0,'                symbolizer.haloRadius = obj.haloRadius;'],[0,'                symbolizer.haloColor = obj.fillColor;'],[0,'                symbolizer.haloOpacity = obj.fillOpacity;'],[-1,'            },'],[-1,'            \&quot;Radius\&quot;: function(node, symbolizer) {'],[0,'                var radius = this.readers.ogc._expression.call(this, node);'],[0,'                if(radius != null) {'],[-1,'                    \/\/ radius is only used for halo'],[0,'                    symbolizer.haloRadius = radius;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;RasterSymbolizer\&quot;: function(node, rule) {'],[0,'                var config = {};'],[0,'                this.readChildNodes(node, config);'],[0,'                if (this.multipleSymbolizers) {'],[0,'                    config.zIndex = this.featureTypeCounter;'],[0,'                    rule.symbolizers.push('],[-1,'                        new OpenLayers.Symbolizer.Raster(config)'],[-1,'                    );'],[-1,'                } else {'],[0,'                    rule.symbolizer[\&quot;Raster\&quot;] = OpenLayers.Util.applyDefaults('],[-1,'                        config, rule.symbolizer[\&quot;Raster\&quot;]'],[-1,'                    );'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Geometry\&quot;: function(node, obj) {'],[0,'                obj.geometry = {};'],[0,'                this.readChildNodes(node, obj.geometry);'],[-1,'            },'],[-1,'            \&quot;ColorMap\&quot;: function(node, symbolizer) {'],[0,'                symbolizer.colorMap = [];'],[0,'                this.readChildNodes(node, symbolizer.colorMap);'],[-1,'            },'],[-1,'            \&quot;ColorMapEntry\&quot;: function(node, colorMap) {'],[0,'                var q = node.getAttribute(\&quot;quantity\&quot;);'],[0,'                var o = node.getAttribute(\&quot;opacity\&quot;);'],[0,'                colorMap.push({'],[-1,'                    color: node.getAttribute(\&quot;color\&quot;),'],[-1,'                    quantity: q !== null ? parseFloat(q) : undefined,'],[-1,'                    label: node.getAttribute(\&quot;label\&quot;) || undefined,'],[-1,'                    opacity: o !== null ? parseFloat(o) : undefined'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;LineSymbolizer\&quot;: function(node, rule) {'],[0,'                var config = {};'],[0,'                this.readChildNodes(node, config);'],[0,'                if (this.multipleSymbolizers) {'],[0,'                    config.zIndex = this.featureTypeCounter;'],[0,'                    rule.symbolizers.push('],[-1,'                        new OpenLayers.Symbolizer.Line(config)'],[-1,'                    );'],[-1,'                } else {'],[0,'                    rule.symbolizer[\&quot;Line\&quot;] = OpenLayers.Util.applyDefaults('],[-1,'                        config, rule.symbolizer[\&quot;Line\&quot;]'],[-1,'                    );'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;PolygonSymbolizer\&quot;: function(node, rule) {'],[0,'                var config = {'],[-1,'                    fill: false,'],[-1,'                    stroke: false'],[-1,'                };'],[0,'                if (!this.multipleSymbolizers) {'],[0,'                    config = rule.symbolizer[\&quot;Polygon\&quot;] || config;'],[-1,'                }'],[0,'                this.readChildNodes(node, config);'],[0,'                if (this.multipleSymbolizers) {'],[0,'                    config.zIndex = this.featureTypeCounter;'],[0,'                    rule.symbolizers.push('],[-1,'                        new OpenLayers.Symbolizer.Polygon(config)'],[-1,'                    );'],[-1,'                } else {'],[0,'                    rule.symbolizer[\&quot;Polygon\&quot;] = config;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;PointSymbolizer\&quot;: function(node, rule) {'],[0,'                var config = {'],[-1,'                    fill: false,'],[-1,'                    stroke: false,'],[-1,'                    graphic: false'],[-1,'                };'],[0,'                if (!this.multipleSymbolizers) {'],[0,'                    config = rule.symbolizer[\&quot;Point\&quot;] || config;'],[-1,'                }'],[0,'                this.readChildNodes(node, config);'],[0,'                if (this.multipleSymbolizers) {'],[0,'                    config.zIndex = this.featureTypeCounter;'],[0,'                    rule.symbolizers.push('],[-1,'                        new OpenLayers.Symbolizer.Point(config)'],[-1,'                    );'],[-1,'                } else {'],[0,'                    rule.symbolizer[\&quot;Point\&quot;] = config;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Stroke\&quot;: function(node, symbolizer) {'],[0,'                symbolizer.stroke = true;'],[0,'                this.readChildNodes(node, symbolizer);'],[-1,'            },'],[-1,'            \&quot;Fill\&quot;: function(node, symbolizer) {'],[0,'                symbolizer.fill = true;'],[0,'                this.readChildNodes(node, symbolizer);'],[-1,'            },'],[-1,'            \&quot;CssParameter\&quot;: function(node, symbolizer) {'],[0,'                var cssProperty = node.getAttribute(\&quot;name\&quot;);'],[0,'                var symProperty = this.cssMap[cssProperty];'],[-1,'                \/\/ for labels, fill should map to fontColor and fill-opacity '],[-1,'                \/\/ to fontOpacity'],[0,'                if (symbolizer.label) {'],[0,'                    if (cssProperty === \'fill\') {'],[0,'                        symProperty = \&quot;fontColor\&quot;;'],[0,'                    } else if (cssProperty === \'fill-opacity\') {'],[0,'                        symProperty = \&quot;fontOpacity\&quot;;'],[-1,'                    }'],[-1,'                }'],[0,'                if(symProperty) {'],[-1,'                    \/\/ Limited support for parsing of OGC expressions'],[0,'                    var value = this.readers.ogc._expression.call(this, node);'],[-1,'                    \/\/ always string, could be an empty string'],[0,'                    if(value) {'],[0,'                        symbolizer[symProperty] = value;'],[-1,'                    }'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Graphic\&quot;: function(node, symbolizer) {'],[0,'                symbolizer.graphic = true;'],[0,'                var graphic = {};'],[-1,'                \/\/ painter\'s order not respected here, clobber previous with next'],[0,'                this.readChildNodes(node, graphic);'],[-1,'                \/\/ directly properties with names that match symbolizer properties'],[0,'                var properties = ['],[-1,'                    \&quot;stroke\&quot;, \&quot;strokeColor\&quot;, \&quot;strokeWidth\&quot;, \&quot;strokeOpacity\&quot;,'],[-1,'                    \&quot;strokeLinecap\&quot;, \&quot;fill\&quot;, \&quot;fillColor\&quot;, \&quot;fillOpacity\&quot;,'],[-1,'                    \&quot;graphicName\&quot;, \&quot;rotation\&quot;, \&quot;graphicFormat\&quot;'],[-1,'                ];'],[0,'                var prop, value;'],[0,'                for(var i=0, len=properties.length; i&lt;len; ++i) {'],[0,'                    prop = properties[i];'],[0,'                    value = graphic[prop];'],[0,'                    if(value != undefined) {'],[0,'                        symbolizer[prop] = value;'],[-1,'                    }'],[-1,'                }'],[-1,'                \/\/ set other generic properties with specific graphic property names'],[0,'                if(graphic.opacity != undefined) {'],[0,'                    symbolizer.graphicOpacity = graphic.opacity;'],[-1,'                }'],[0,'                if(graphic.size != undefined) {'],[0,'                    var pointRadius = graphic.size \/ 2;'],[0,'                    if (isNaN(pointRadius)) {'],[-1,'                        \/\/ likely a property name'],[0,'                        symbolizer.graphicWidth = graphic.size;'],[-1,'                    } else {'],[0,'                        symbolizer.pointRadius = graphic.size \/ 2;'],[-1,'                    }'],[-1,'                }'],[0,'                if(graphic.href != undefined) {'],[0,'                    symbolizer.externalGraphic = graphic.href;'],[-1,'                }'],[0,'                if(graphic.rotation != undefined) {'],[0,'                    symbolizer.rotation = graphic.rotation;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;ExternalGraphic\&quot;: function(node, graphic) {'],[0,'                this.readChildNodes(node, graphic);'],[-1,'            },'],[-1,'            \&quot;Mark\&quot;: function(node, graphic) {'],[0,'                this.readChildNodes(node, graphic);'],[-1,'            },'],[-1,'            \&quot;WellKnownName\&quot;: function(node, graphic) {'],[0,'                graphic.graphicName = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Opacity\&quot;: function(node, obj) {'],[0,'                var opacity = this.readers.ogc._expression.call(this, node);'],[-1,'                \/\/ always string, could be empty string'],[0,'                if(opacity) {'],[0,'                    obj.opacity = opacity;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Size\&quot;: function(node, obj) {'],[0,'                var size = this.readers.ogc._expression.call(this, node);'],[-1,'                \/\/ always string, could be empty string'],[0,'                if(size) {'],[0,'                    obj.size = size;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Rotation\&quot;: function(node, obj) {'],[0,'                var rotation = this.readers.ogc._expression.call(this, node);'],[-1,'                \/\/ always string, could be empty string'],[0,'                if(rotation) {'],[0,'                    obj.rotation = rotation;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;OnlineResource\&quot;: function(node, obj) {'],[0,'                obj.href = this.getAttributeNS('],[-1,'                    node, this.namespaces.xlink, \&quot;href\&quot;'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;Format\&quot;: function(node, graphic) {'],[0,'                graphic.graphicFormat = this.getChildValue(node);'],[-1,'            }'],[-1,'        }'],[-1,'    }, OpenLayers.Format.Filter.v1_0_0.prototype.readers),'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: cssMap'],[-1,'     * {Object} Object mapping supported css property names to OpenLayers'],[-1,'     *     symbolizer property names.'],[-1,'     *\/'],[-1,'    cssMap: {'],[-1,'        \&quot;stroke\&quot;: \&quot;strokeColor\&quot;,'],[-1,'        \&quot;stroke-opacity\&quot;: \&quot;strokeOpacity\&quot;,'],[-1,'        \&quot;stroke-width\&quot;: \&quot;strokeWidth\&quot;,'],[-1,'        \&quot;stroke-linecap\&quot;: \&quot;strokeLinecap\&quot;,'],[-1,'        \&quot;stroke-dasharray\&quot;: \&quot;strokeDashstyle\&quot;,'],[-1,'        \&quot;fill\&quot;: \&quot;fillColor\&quot;,'],[-1,'        \&quot;fill-opacity\&quot;: \&quot;fillOpacity\&quot;,'],[-1,'        \&quot;font-family\&quot;: \&quot;fontFamily\&quot;,'],[-1,'        \&quot;font-size\&quot;: \&quot;fontSize\&quot;,'],[-1,'        \&quot;font-weight\&quot;: \&quot;fontWeight\&quot;,'],[-1,'        \&quot;font-style\&quot;: \&quot;fontStyle\&quot;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getCssProperty'],[-1,'     * Given a symbolizer property, get the corresponding CSS property'],[-1,'     *     from the &lt;cssMap&gt;.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * sym - {String} A symbolizer property name.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A CSS property name or null if none found.'],[-1,'     *\/'],[-1,'    getCssProperty: function(sym) {'],[0,'        var css = null;'],[0,'        for(var prop in this.cssMap) {'],[0,'            if(this.cssMap[prop] == sym) {'],[0,'                css = prop;'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        return css;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getGraphicFormat'],[-1,'     * Given a href for an external graphic, try to determine the mime-type.'],[-1,'     *     This method doesn\'t try too hard, and will fall back to'],[-1,'     *     &lt;defaultGraphicFormat&gt; if one of the known &lt;graphicFormats&gt; is not'],[-1,'     *     the file extension of the provided href.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * href - {String}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The graphic format.'],[-1,'     *\/'],[-1,'    getGraphicFormat: function(href) {'],[0,'        var format, regex;'],[0,'        for(var key in this.graphicFormats) {'],[0,'            if(this.graphicFormats[key].test(href)) {'],[0,'                format = key;'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        return format || this.defaultGraphicFormat;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: defaultGraphicFormat'],[-1,'     * {String} If none other can be determined from &lt;getGraphicFormat&gt;, this'],[-1,'     *     default will be returned.'],[-1,'     *\/'],[-1,'    defaultGraphicFormat: \&quot;image\/png\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: graphicFormats'],[-1,'     * {Object} Mapping of image mime-types to regular extensions matching '],[-1,'     *     well-known file extensions.'],[-1,'     *\/'],[-1,'    graphicFormats: {'],[-1,'        \&quot;image\/jpeg\&quot;: \/\\.jpe?g$\/i,'],[-1,'        \&quot;image\/gif\&quot;: \/\\.gif$\/i,'],[-1,'        \&quot;image\/png\&quot;: \/\\.png$\/i'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * sld - {Object} An object representing the SLD.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The root of an SLD document.'],[-1,'     *\/'],[-1,'    write: function(sld) {'],[0,'        return this.writers.sld.StyledLayerDescriptor.apply(this, [sld]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: OpenLayers.Util.applyDefaults({'],[-1,'        \&quot;sld\&quot;: {'],[-1,'            \&quot;_OGCExpression\&quot;: function(nodeName, value) {'],[-1,'                \/\/ only the simplest of ogc:expression handled'],[-1,'                \/\/ {label: \&quot;some text and a ${propertyName}\&quot;}'],[0,'                var node = this.createElementNSPlus(nodeName);'],[0,'                var tokens = typeof value == \&quot;string\&quot; ?'],[-1,'                    value.split(\&quot;${\&quot;) :'],[-1,'                    [value];'],[0,'                node.appendChild(this.createTextNode(tokens[0]));'],[0,'                var item, last;'],[0,'                for(var i=1, len=tokens.length; i&lt;len; i++) {'],[0,'                    item = tokens[i];'],[0,'                    last = item.indexOf(\&quot;}\&quot;); '],[0,'                    if(last &gt; 0) {'],[0,'                        this.writeNode('],[-1,'                            \&quot;ogc:PropertyName\&quot;,'],[-1,'                            {property: item.substring(0, last)},'],[-1,'                            node'],[-1,'                        );'],[0,'                        node.appendChild('],[-1,'                            this.createTextNode(item.substring(++last))'],[-1,'                        );'],[-1,'                    } else {'],[-1,'                        \/\/ no ending }, so this is a literal ${'],[0,'                        node.appendChild('],[-1,'                            this.createTextNode(\&quot;${\&quot; + item)'],[-1,'                        );'],[-1,'                    }'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;StyledLayerDescriptor\&quot;: function(sld) {'],[0,'                var root = this.createElementNSPlus('],[-1,'                    \&quot;sld:StyledLayerDescriptor\&quot;,'],[-1,'                    {attributes: {'],[-1,'                        \&quot;version\&quot;: this.VERSION,'],[-1,'                        \&quot;xsi:schemaLocation\&quot;: this.schemaLocation'],[-1,'                    }}'],[-1,'                );'],[-1,''],[-1,'                \/\/ For ArcGIS Server it is necessary to define this'],[-1,'                \/\/ at the root level (see ticket:2166).'],[0,'                root.setAttribute(\&quot;xmlns:ogc\&quot;, this.namespaces.ogc);'],[0,'                root.setAttribute(\&quot;xmlns:gml\&quot;, this.namespaces.gml);'],[-1,''],[-1,'                \/\/ add in optional name'],[0,'                if(sld.name) {'],[0,'                    this.writeNode(\&quot;Name\&quot;, sld.name, root);'],[-1,'                }'],[-1,'                \/\/ add in optional title'],[0,'                if(sld.title) {'],[0,'                    this.writeNode(\&quot;Title\&quot;, sld.title, root);'],[-1,'                }'],[-1,'                \/\/ add in optional description'],[0,'                if(sld.description) {'],[0,'                    this.writeNode(\&quot;Abstract\&quot;, sld.description, root);'],[-1,'                }'],[-1,'                \/\/ add in named layers'],[-1,'                \/\/ allow namedLayers to be an array'],[0,'                if(OpenLayers.Util.isArray(sld.namedLayers)) {'],[0,'                    for(var i=0, len=sld.namedLayers.length; i&lt;len; ++i) {'],[0,'                        this.writeNode(\&quot;NamedLayer\&quot;, sld.namedLayers[i], root);'],[-1,'                    }'],[-1,'                } else {'],[0,'                    for(var name in sld.namedLayers) {'],[0,'                        this.writeNode(\&quot;NamedLayer\&quot;, sld.namedLayers[name], root);'],[-1,'                    }'],[-1,'                }'],[0,'                return root;'],[-1,'            },'],[-1,'            \&quot;Name\&quot;: function(name) {'],[0,'                return this.createElementNSPlus(\&quot;sld:Name\&quot;, {value: name});'],[-1,'            },'],[-1,'            \&quot;Title\&quot;: function(title) {'],[0,'                return this.createElementNSPlus(\&quot;sld:Title\&quot;, {value: title});'],[-1,'            },'],[-1,'            \&quot;Abstract\&quot;: function(description) {'],[0,'                return this.createElementNSPlus('],[-1,'                    \&quot;sld:Abstract\&quot;, {value: description}'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;NamedLayer\&quot;: function(layer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:NamedLayer\&quot;);'],[-1,''],[-1,'                \/\/ add in required name'],[0,'                this.writeNode(\&quot;Name\&quot;, layer.name, node);'],[-1,''],[-1,'                \/\/ optional sld:LayerFeatureConstraints here'],[-1,''],[-1,'                \/\/ add in named styles'],[0,'                if(layer.namedStyles) {'],[0,'                    for(var i=0, len=layer.namedStyles.length; i&lt;len; ++i) {'],[0,'                        this.writeNode('],[-1,'                            \&quot;NamedStyle\&quot;, layer.namedStyles[i], node'],[-1,'                        );'],[-1,'                    }'],[-1,'                }'],[-1,'                '],[-1,'                \/\/ add in user styles'],[0,'                if(layer.userStyles) {'],[0,'                    for(var i=0, len=layer.userStyles.length; i&lt;len; ++i) {'],[0,'                        this.writeNode('],[-1,'                            \&quot;UserStyle\&quot;, layer.userStyles[i], node'],[-1,'                        );'],[-1,'                    }'],[-1,'                }'],[-1,'                '],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;NamedStyle\&quot;: function(name) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:NamedStyle\&quot;);'],[0,'                this.writeNode(\&quot;Name\&quot;, name, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;UserStyle\&quot;: function(style) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:UserStyle\&quot;);'],[-1,''],[-1,'                \/\/ add in optional name'],[0,'                if(style.name) {'],[0,'                    this.writeNode(\&quot;Name\&quot;, style.name, node);'],[-1,'                }'],[-1,'                \/\/ add in optional title'],[0,'                if(style.title) {'],[0,'                    this.writeNode(\&quot;Title\&quot;, style.title, node);'],[-1,'                }'],[-1,'                \/\/ add in optional description'],[0,'                if(style.description) {'],[0,'                    this.writeNode(\&quot;Abstract\&quot;, style.description, node);'],[-1,'                }'],[-1,'                '],[-1,'                \/\/ add isdefault'],[0,'                if(style.isDefault) {'],[0,'                    this.writeNode(\&quot;IsDefault\&quot;, style.isDefault, node);'],[-1,'                }'],[-1,'                '],[-1,'                \/\/ add FeatureTypeStyles'],[0,'                if (this.multipleSymbolizers &amp;&amp; style.rules) {'],[-1,'                    \/\/ group style objects by symbolizer zIndex'],[0,'                    var rulesByZ = {'],[-1,'                        0: []'],[-1,'                    };'],[0,'                    var zValues = [0];'],[0,'                    var rule, ruleMap, symbolizer, zIndex, clone;'],[0,'                    for (var i=0, ii=style.rules.length; i&lt;ii; ++i) {'],[0,'                        rule = style.rules[i];'],[0,'                        if (rule.symbolizers) {'],[0,'                            ruleMap = {};'],[0,'                            for (var j=0, jj=rule.symbolizers.length; j&lt;jj; ++j) {'],[0,'                                symbolizer = rule.symbolizers[j];'],[0,'                                zIndex = symbolizer.zIndex;'],[0,'                                if (!(zIndex in ruleMap)) {'],[0,'                                    clone = rule.clone();'],[0,'                                    clone.symbolizers = [];'],[0,'                                    ruleMap[zIndex] = clone;'],[-1,'                                }'],[0,'                                ruleMap[zIndex].symbolizers.push(symbolizer.clone());'],[-1,'                            }'],[0,'                            for (zIndex in ruleMap) {'],[0,'                                if (!(zIndex in rulesByZ)) {'],[0,'                                    zValues.push(zIndex);'],[0,'                                    rulesByZ[zIndex] = [];'],[-1,'                                }'],[0,'                                rulesByZ[zIndex].push(ruleMap[zIndex]);'],[-1,'                            }'],[-1,'                        } else {'],[-1,'                            \/\/ no symbolizers in rule'],[0,'                            rulesByZ[0].push(rule.clone());'],[-1,'                        }'],[-1,'                    }'],[-1,'                    \/\/ write one FeatureTypeStyle per zIndex'],[0,'                    zValues.sort();'],[0,'                    var rules;'],[0,'                    for (var i=0, ii=zValues.length; i&lt;ii; ++i) {'],[0,'                        rules = rulesByZ[zValues[i]];'],[0,'                        if (rules.length &gt; 0) {'],[0,'                            clone = style.clone();'],[0,'                            clone.rules = rulesByZ[zValues[i]];'],[0,'                            this.writeNode(\&quot;FeatureTypeStyle\&quot;, clone, node);'],[-1,'                        }'],[-1,'                    }                    '],[-1,'                } else {'],[0,'                    this.writeNode(\&quot;FeatureTypeStyle\&quot;, style, node);'],[-1,'                }'],[-1,'                '],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;IsDefault\&quot;: function(bool) {'],[0,'                return this.createElementNSPlus('],[-1,'                    \&quot;sld:IsDefault\&quot;, {value: (bool) ? \&quot;1\&quot; : \&quot;0\&quot;}'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;FeatureTypeStyle\&quot;: function(style) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:FeatureTypeStyle\&quot;);'],[-1,'                '],[-1,'                \/\/ OpenLayers currently stores no Name, Title, Abstract,'],[-1,'                \/\/ FeatureTypeName, or SemanticTypeIdentifier information'],[-1,'                \/\/ related to FeatureTypeStyle'],[-1,'                '],[-1,'                \/\/ add in rules'],[0,'                for(var i=0, len=style.rules.length; i&lt;len; ++i) {'],[0,'                    this.writeNode(\&quot;Rule\&quot;, style.rules[i], node);'],[-1,'                }'],[-1,'                '],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Rule\&quot;: function(rule) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:Rule\&quot;);'],[-1,''],[-1,'                \/\/ add in optional name'],[0,'                if(rule.name) {'],[0,'                    this.writeNode(\&quot;Name\&quot;, rule.name, node);'],[-1,'                }'],[-1,'                \/\/ add in optional title'],[0,'                if(rule.title) {'],[0,'                    this.writeNode(\&quot;Title\&quot;, rule.title, node);'],[-1,'                }'],[-1,'                \/\/ add in optional description'],[0,'                if(rule.description) {'],[0,'                    this.writeNode(\&quot;Abstract\&quot;, rule.description, node);'],[-1,'                }'],[-1,'                '],[-1,'                \/\/ add in LegendGraphic here'],[-1,'                '],[-1,'                \/\/ add in optional filters'],[0,'                if(rule.elseFilter) {'],[0,'                    this.writeNode(\&quot;ElseFilter\&quot;, null, node);'],[0,'                } else if(rule.filter) {'],[0,'                    this.writeNode(\&quot;ogc:Filter\&quot;, rule.filter, node);'],[-1,'                }'],[-1,'                '],[-1,'                \/\/ add in scale limits'],[0,'                if(rule.minScaleDenominator != undefined) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;MinScaleDenominator\&quot;, rule.minScaleDenominator, node'],[-1,'                    );'],[-1,'                }'],[0,'                if(rule.maxScaleDenominator != undefined) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;MaxScaleDenominator\&quot;, rule.maxScaleDenominator, node'],[-1,'                    );'],[-1,'                }'],[-1,'                '],[0,'                var type, symbolizer;'],[0,'                if (this.multipleSymbolizers &amp;&amp; rule.symbolizers) {'],[0,'                    var symbolizer;'],[0,'                    for (var i=0, ii=rule.symbolizers.length; i&lt;ii; ++i) {'],[0,'                        symbolizer = rule.symbolizers[i];'],[0,'                        type = symbolizer.CLASS_NAME.split(\&quot;.\&quot;).pop();'],[0,'                        this.writeNode('],[-1,'                            type + \&quot;Symbolizer\&quot;, symbolizer, node'],[-1,'                        );'],[-1,'                    }'],[-1,'                } else {'],[-1,'                    \/\/ add in symbolizers (relies on geometry type keys)'],[0,'                    var types = OpenLayers.Style.SYMBOLIZER_PREFIXES;'],[0,'                    for(var i=0, len=types.length; i&lt;len; ++i) {'],[0,'                        type = types[i];'],[0,'                        symbolizer = rule.symbolizer[type];'],[0,'                        if(symbolizer) {'],[0,'                            this.writeNode('],[-1,'                                type + \&quot;Symbolizer\&quot;, symbolizer, node'],[-1,'                            );'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[0,'                return node;'],[-1,''],[-1,'            },'],[-1,'            \&quot;ElseFilter\&quot;: function() {'],[0,'                return this.createElementNSPlus(\&quot;sld:ElseFilter\&quot;);'],[-1,'            },'],[-1,'            \&quot;MinScaleDenominator\&quot;: function(scale) {'],[0,'                return this.createElementNSPlus('],[-1,'                    \&quot;sld:MinScaleDenominator\&quot;, {value: scale}'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;MaxScaleDenominator\&quot;: function(scale) {'],[0,'                return this.createElementNSPlus('],[-1,'                    \&quot;sld:MaxScaleDenominator\&quot;, {value: scale}'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;LineSymbolizer\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:LineSymbolizer\&quot;);'],[0,'                this.writeNode(\&quot;Stroke\&quot;, symbolizer, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Stroke\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:Stroke\&quot;);'],[-1,''],[-1,'                \/\/ GraphicFill here'],[-1,'                \/\/ GraphicStroke here'],[-1,''],[-1,'                \/\/ add in CssParameters'],[0,'                if(symbolizer.strokeColor != undefined) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;CssParameter\&quot;,'],[-1,'                        {symbolizer: symbolizer, key: \&quot;strokeColor\&quot;},'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                if(symbolizer.strokeOpacity != undefined) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;CssParameter\&quot;,'],[-1,'                        {symbolizer: symbolizer, key: \&quot;strokeOpacity\&quot;},'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                if(symbolizer.strokeWidth != undefined) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;CssParameter\&quot;,'],[-1,'                        {symbolizer: symbolizer, key: \&quot;strokeWidth\&quot;},'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                if(symbolizer.strokeDashstyle != undefined &amp;&amp; symbolizer.strokeDashstyle !== \&quot;solid\&quot;) {'],[-1,'                    \/\/ assumes valid stroke-dasharray value'],[0,'                    this.writeNode('],[-1,'                        \&quot;CssParameter\&quot;, '],[-1,'                        {symbolizer: symbolizer, key: \&quot;strokeDashstyle\&quot;},'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                if(symbolizer.strokeLinecap != undefined) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;CssParameter\&quot;, '],[-1,'                        {symbolizer: symbolizer, key: \&quot;strokeLinecap\&quot;},'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;CssParameter\&quot;: function(obj) {'],[-1,'                \/\/ not handling ogc:expressions for now'],[0,'                return this.createElementNSPlus(\&quot;sld:CssParameter\&quot;, {'],[-1,'                    attributes: {name: this.getCssProperty(obj.key)},'],[-1,'                    value: obj.symbolizer[obj.key]'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;TextSymbolizer\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:TextSymbolizer\&quot;);'],[-1,'                \/\/ add in optional Label'],[0,'                if(symbolizer.label != null) {'],[0,'                    this.writeNode(\&quot;Label\&quot;, symbolizer.label, node);'],[-1,'                }'],[-1,'                \/\/ add in optional Font'],[0,'                if(symbolizer.fontFamily != null ||'],[-1,'                    symbolizer.fontSize != null ||'],[-1,'                    symbolizer.fontWeight != null ||'],[-1,'                    symbolizer.fontStyle != null) {'],[0,'                        this.writeNode(\&quot;Font\&quot;, symbolizer, node);'],[-1,'                }'],[-1,'                \/\/ add in optional LabelPlacement'],[0,'                if (symbolizer.labelAnchorPointX != null ||'],[-1,'                    symbolizer.labelAnchorPointY != null || '],[-1,'                    symbolizer.labelAlign != null ||'],[-1,'                    symbolizer.labelXOffset != null ||'],[-1,'                    symbolizer.labelYOffset != null ||'],[-1,'                    symbolizer.labelRotation != null ||'],[-1,'                    symbolizer.labelPerpendicularOffset != null) {'],[0,'                        this.writeNode(\&quot;LabelPlacement\&quot;, symbolizer, node);'],[-1,'                }'],[-1,'                \/\/ add in optional Halo'],[0,'                if(symbolizer.haloRadius != null ||'],[-1,'                    symbolizer.haloColor != null ||'],[-1,'                    symbolizer.haloOpacity != null) {'],[0,'                        this.writeNode(\&quot;Halo\&quot;, symbolizer, node);'],[-1,'                }'],[-1,'                \/\/ add in optional Fill'],[0,'                if(symbolizer.fontColor != null ||'],[-1,'                   symbolizer.fontOpacity != null) {'],[0,'                    this.writeNode(\&quot;Fill\&quot;, {'],[-1,'                        fillColor: symbolizer.fontColor,'],[-1,'                        fillOpacity: symbolizer.fontOpacity'],[-1,'                    }, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;LabelPlacement\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:LabelPlacement\&quot;);'],[-1,'                \/\/ PointPlacement and LinePlacement are choices, so don\'t output both'],[0,'                if ((symbolizer.labelAnchorPointX != null ||'],[-1,'                    symbolizer.labelAnchorPointY != null ||'],[-1,'                    symbolizer.labelAlign != null ||'],[-1,'                    symbolizer.labelXOffset != null ||'],[-1,'                    symbolizer.labelYOffset != null ||'],[-1,'                    symbolizer.labelRotation != null) &amp;&amp; '],[-1,'                    symbolizer.labelPerpendicularOffset == null) {'],[0,'                        this.writeNode(\&quot;PointPlacement\&quot;, symbolizer, node);'],[-1,'                }'],[0,'                if (symbolizer.labelPerpendicularOffset != null) {'],[0,'                    this.writeNode(\&quot;LinePlacement\&quot;, symbolizer, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;LinePlacement\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:LinePlacement\&quot;);'],[0,'                this.writeNode(\&quot;PerpendicularOffset\&quot;, symbolizer.labelPerpendicularOffset, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PerpendicularOffset\&quot;: function(value) {'],[0,'                return this.createElementNSPlus(\&quot;sld:PerpendicularOffset\&quot;, {'],[-1,'                    value: value'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;PointPlacement\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:PointPlacement\&quot;);'],[0,'                if (symbolizer.labelAnchorPointX != null ||'],[-1,'                    symbolizer.labelAnchorPointY != null ||'],[-1,'                    symbolizer.labelAlign != null) {'],[0,'                        this.writeNode(\&quot;AnchorPoint\&quot;, symbolizer, node);'],[-1,'                }'],[0,'                if (symbolizer.labelXOffset != null ||'],[-1,'                    symbolizer.labelYOffset != null) {'],[0,'                        this.writeNode(\&quot;Displacement\&quot;, symbolizer, node);'],[-1,'                }'],[0,'                if (symbolizer.labelRotation != null) {'],[0,'                    this.writeNode(\&quot;Rotation\&quot;, symbolizer.labelRotation, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;AnchorPoint\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:AnchorPoint\&quot;);'],[0,'                var x = symbolizer.labelAnchorPointX,'],[-1,'                    y = symbolizer.labelAnchorPointY;'],[0,'                if (x != null) {'],[0,'                    this.writeNode(\&quot;AnchorPointX\&quot;, x, node);'],[-1,'                }'],[0,'                if (y != null) {'],[0,'                    this.writeNode(\&quot;AnchorPointY\&quot;, y, node);'],[-1,'                }'],[0,'                if (x == null &amp;&amp; y == null) {'],[0,'                    var xAlign = symbolizer.labelAlign.substr(0, 1),'],[-1,'                        yAlign = symbolizer.labelAlign.substr(1, 1);'],[0,'                    if (xAlign === \&quot;l\&quot;) {'],[0,'                        x = 0;'],[0,'                    } else if (xAlign === \&quot;c\&quot;) {'],[0,'                        x = 0.5;'],[0,'                    } else if (xAlign === \&quot;r\&quot;) {'],[0,'                        x = 1;'],[-1,'                    }'],[0,'                    if (yAlign === \&quot;b\&quot;) {'],[0,'                        y = 0;'],[0,'                    } else if (yAlign === \&quot;m\&quot;) {'],[0,'                        y = 0.5;'],[0,'                    } else if (yAlign === \&quot;t\&quot;) {'],[0,'                        y = 1;'],[-1,'                    }'],[0,'                    this.writeNode(\&quot;AnchorPointX\&quot;, x, node);'],[0,'                    this.writeNode(\&quot;AnchorPointY\&quot;, y, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;AnchorPointX\&quot;: function(value) {'],[0,'                return this.createElementNSPlus(\&quot;sld:AnchorPointX\&quot;, {'],[-1,'                    value: value'],[-1,'                }); '],[-1,'            },'],[-1,'            \&quot;AnchorPointY\&quot;: function(value) {'],[0,'                return this.createElementNSPlus(\&quot;sld:AnchorPointY\&quot;, {'],[-1,'                    value: value'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;Displacement\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:Displacement\&quot;);'],[0,'                if (symbolizer.labelXOffset != null) {'],[0,'                    this.writeNode(\&quot;DisplacementX\&quot;, symbolizer.labelXOffset, node);'],[-1,'                }'],[0,'                if (symbolizer.labelYOffset != null) {'],[0,'                    this.writeNode(\&quot;DisplacementY\&quot;, symbolizer.labelYOffset, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;DisplacementX\&quot;: function(value) {'],[0,'                return this.createElementNSPlus(\&quot;sld:DisplacementX\&quot;, {'],[-1,'                    value: value'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;DisplacementY\&quot;: function(value) {'],[0,'                return this.createElementNSPlus(\&quot;sld:DisplacementY\&quot;, {'],[-1,'                    value: value'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;Font\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:Font\&quot;);'],[-1,'                \/\/ add in CssParameters'],[0,'                if(symbolizer.fontFamily) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;CssParameter\&quot;,'],[-1,'                        {symbolizer: symbolizer, key: \&quot;fontFamily\&quot;},'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                if(symbolizer.fontSize) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;CssParameter\&quot;,'],[-1,'                        {symbolizer: symbolizer, key: \&quot;fontSize\&quot;},'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                if(symbolizer.fontWeight) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;CssParameter\&quot;,'],[-1,'                        {symbolizer: symbolizer, key: \&quot;fontWeight\&quot;},'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                if(symbolizer.fontStyle) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;CssParameter\&quot;,'],[-1,'                        {symbolizer: symbolizer, key: \&quot;fontStyle\&quot;},'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Label\&quot;: function(label) {'],[0,'                return this.writers.sld._OGCExpression.call('],[-1,'                    this, \&quot;sld:Label\&quot;, label'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;Halo\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:Halo\&quot;);'],[0,'                if(symbolizer.haloRadius) {'],[0,'                    this.writeNode(\&quot;Radius\&quot;, symbolizer.haloRadius, node);'],[-1,'                }'],[0,'                if(symbolizer.haloColor || symbolizer.haloOpacity) {'],[0,'                    this.writeNode(\&quot;Fill\&quot;, {'],[-1,'                        fillColor: symbolizer.haloColor,'],[-1,'                        fillOpacity: symbolizer.haloOpacity'],[-1,'                    }, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Radius\&quot;: function(value) {'],[0,'                return this.createElementNSPlus(\&quot;sld:Radius\&quot;, {'],[-1,'                    value: value'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;RasterSymbolizer\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:RasterSymbolizer\&quot;);'],[0,'                if (symbolizer.geometry) {'],[0,'                    this.writeNode(\&quot;Geometry\&quot;, symbolizer.geometry, node);'],[-1,'                }'],[0,'                if (symbolizer.opacity) {'],[0,'                    this.writeNode(\&quot;Opacity\&quot;, symbolizer.opacity, node);'],[-1,'                }'],[0,'                if (symbolizer.colorMap) {'],[0,'                    this.writeNode(\&quot;ColorMap\&quot;, symbolizer.colorMap, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Geometry\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:Geometry\&quot;);'],[0,'                if (geometry.property) {'],[0,'                    this.writeNode(\&quot;ogc:PropertyName\&quot;, geometry, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;ColorMap\&quot;: function(colorMap) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:ColorMap\&quot;);'],[0,'                for (var i=0, len=colorMap.length; i&lt;len; ++i) {'],[0,'                    this.writeNode(\&quot;ColorMapEntry\&quot;, colorMap[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;ColorMapEntry\&quot;: function(colorMapEntry) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:ColorMapEntry\&quot;);'],[0,'                var a = colorMapEntry;'],[0,'                node.setAttribute(\&quot;color\&quot;, a.color);'],[0,'                a.opacity !== undefined &amp;&amp; node.setAttribute(\&quot;opacity\&quot;,'],[-1,'                    parseFloat(a.opacity));'],[0,'                a.quantity !== undefined &amp;&amp; node.setAttribute(\&quot;quantity\&quot;,'],[-1,'                    parseFloat(a.quantity));'],[0,'                a.label !== undefined &amp;&amp; node.setAttribute(\&quot;label\&quot;, a.label);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PolygonSymbolizer\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:PolygonSymbolizer\&quot;);'],[0,'                if(symbolizer.fill !== false) {'],[0,'                    this.writeNode(\&quot;Fill\&quot;, symbolizer, node);'],[-1,'                }'],[0,'                if(symbolizer.stroke !== false) {'],[0,'                    this.writeNode(\&quot;Stroke\&quot;, symbolizer, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Fill\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:Fill\&quot;);'],[-1,'                '],[-1,'                \/\/ GraphicFill here'],[-1,'                '],[-1,'                \/\/ add in CssParameters'],[0,'                if(symbolizer.fillColor) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;CssParameter\&quot;,'],[-1,'                        {symbolizer: symbolizer, key: \&quot;fillColor\&quot;},'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                if(symbolizer.fillOpacity != null) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;CssParameter\&quot;,'],[-1,'                        {symbolizer: symbolizer, key: \&quot;fillOpacity\&quot;},'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PointSymbolizer\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:PointSymbolizer\&quot;);'],[0,'                this.writeNode(\&quot;Graphic\&quot;, symbolizer, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Graphic\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:Graphic\&quot;);'],[0,'                if(symbolizer.externalGraphic != undefined) {'],[0,'                    this.writeNode(\&quot;ExternalGraphic\&quot;, symbolizer, node);'],[-1,'                } else {'],[0,'                    this.writeNode(\&quot;Mark\&quot;, symbolizer, node);'],[-1,'                }'],[-1,'                '],[0,'                if(symbolizer.graphicOpacity != undefined) {'],[0,'                    this.writeNode(\&quot;Opacity\&quot;, symbolizer.graphicOpacity, node);'],[-1,'                }'],[0,'                if(symbolizer.pointRadius != undefined) {'],[0,'                    this.writeNode(\&quot;Size\&quot;, symbolizer.pointRadius * 2, node);'],[0,'                } else if (symbolizer.graphicWidth != undefined) {'],[0,'                    this.writeNode(\&quot;Size\&quot;, symbolizer.graphicWidth, node);'],[-1,'                }'],[0,'                if(symbolizer.rotation != undefined) {'],[0,'                    this.writeNode(\&quot;Rotation\&quot;, symbolizer.rotation, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;ExternalGraphic\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:ExternalGraphic\&quot;);'],[0,'                this.writeNode('],[-1,'                    \&quot;OnlineResource\&quot;, symbolizer.externalGraphic, node'],[-1,'                );'],[0,'                var format = symbolizer.graphicFormat ||'],[-1,'                             this.getGraphicFormat(symbolizer.externalGraphic);'],[0,'                this.writeNode(\&quot;Format\&quot;, format, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Mark\&quot;: function(symbolizer) {'],[0,'                var node = this.createElementNSPlus(\&quot;sld:Mark\&quot;);'],[0,'                if(symbolizer.graphicName) {'],[0,'                    this.writeNode(\&quot;WellKnownName\&quot;, symbolizer.graphicName, node);'],[-1,'                }'],[0,'                if (symbolizer.fill !== false) {'],[0,'                    this.writeNode(\&quot;Fill\&quot;, symbolizer, node);'],[-1,'                }'],[0,'                if (symbolizer.stroke !== false) {'],[0,'                    this.writeNode(\&quot;Stroke\&quot;, symbolizer, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;WellKnownName\&quot;: function(name) {'],[0,'                return this.createElementNSPlus(\&quot;sld:WellKnownName\&quot;, {'],[-1,'                    value: name'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;Opacity\&quot;: function(value) {'],[0,'                return this.createElementNSPlus(\&quot;sld:Opacity\&quot;, {'],[-1,'                    value: value'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;Size\&quot;: function(value) {'],[0,'                return this.writers.sld._OGCExpression.call('],[-1,'                    this, \&quot;sld:Size\&quot;, value'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;Rotation\&quot;: function(value) {'],[0,'                return this.createElementNSPlus(\&quot;sld:Rotation\&quot;, {'],[-1,'                    value: value'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;OnlineResource\&quot;: function(href) {'],[0,'                return this.createElementNSPlus(\&quot;sld:OnlineResource\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        \&quot;xlink:type\&quot;: \&quot;simple\&quot;,'],[-1,'                        \&quot;xlink:href\&quot;: href'],[-1,'                    }'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;Format\&quot;: function(format) {'],[0,'                return this.createElementNSPlus(\&quot;sld:Format\&quot;, {'],[-1,'                    value: format'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[-1,'    }, OpenLayers.Format.Filter.v1_0_0.prototype.writers),'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.SLD.v1\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/SLD\/v1_0_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/SLD\/v1.js'],[-1,' * @requires OpenLayers\/Format\/Filter\/v1_0_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.SLD.v1_0_0'],[-1,' * Write SLD version 1.0.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.SLD.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.SLD.v1_0_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.SLD.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: VERSION'],[-1,'     * {String} 1.0.0'],[-1,'     *\/'],[-1,'    VERSION: \&quot;1.0.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} http:\/\/www.opengis.net\/sld'],[-1,'     *   http:\/\/schemas.opengis.net\/sld\/1.0.0\/StyledLayerDescriptor.xsd'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/sld http:\/\/schemas.opengis.net\/sld\/1.0.0\/StyledLayerDescriptor.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.SLD.v1_0_0'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.SLD&gt; constructor instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.SLD.v1_0_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/Context.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.Context'],[-1,' * Base class for both Format.WMC and Format.OWSContext'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML.VersionedOGC&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.Context = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layerOptions'],[-1,'     * {Object} Default options for layers created by the parser. These'],[-1,'     *     options are overridden by the options which are read from the'],[-1,'     *     capabilities document.'],[-1,'     *\/'],[-1,'    layerOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layerParams'],[-1,'     * {Object} Default parameters for layers created by the parser. This'],[-1,'     *     can be used e.g. to override DEFAULT_PARAMS for '],[-1,'     *     OpenLayers.Layer.WMS.'],[-1,'     *\/'],[-1,'    layerParams: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.Context'],[-1,'     * Create a new parser for Context documents.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read Context data from a string, and return an object with map'],[-1,'     *     properties and a list of layers.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     * options - {Object} The options object must contain a map property.  If'],[-1,'     *     the map property is a string, it must be the id of a dom element'],[-1,'     *     where the new map will be placed.  If the map property is an'],[-1,'     *     &lt;OpenLayers.Map&gt;, the layers from the context document will be added'],[-1,'     *     to the map.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Map&gt;} A map based on the context.'],[-1,'     *\/'],[-1,'    read: function(data, options) {'],[0,'        var context = OpenLayers.Format.XML.VersionedOGC.prototype.read.apply(this, '],[-1,'            arguments);'],[0,'        var map;'],[0,'        if(options &amp;&amp; options.map) {'],[0,'            this.context = context;'],[0,'            if(options.map instanceof OpenLayers.Map) {'],[0,'                map = this.mergeContextToMap(context, options.map);'],[-1,'            } else {'],[0,'                var mapOptions = options.map;'],[0,'                if(OpenLayers.Util.isElement(mapOptions) ||'],[-1,'                   typeof mapOptions == \&quot;string\&quot;) {'],[-1,'                    \/\/ we assume mapOptions references a div'],[-1,'                    \/\/ element'],[0,'                    mapOptions = {div: mapOptions};'],[-1,'                }'],[0,'                map = this.contextToMap(context, mapOptions);'],[-1,'            }'],[-1,'        } else {'],[-1,'            \/\/ not documented as part of the API, provided as a non-API option'],[0,'            map = context;'],[-1,'        }'],[0,'        return map;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getLayerFromContext'],[-1,'     * Create a WMS layer from a layerContext object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layerContext - {Object} An object representing a WMS layer.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.WMS&gt;} A WMS layer.'],[-1,'     *\/'],[-1,'    getLayerFromContext: function(layerContext) {'],[0,'        var i, len;'],[-1,'        \/\/ fill initial options object from layerContext'],[0,'        var options = {'],[-1,'            queryable: layerContext.queryable, \/\/keep queryable for api compatibility'],[-1,'            visibility: layerContext.visibility,'],[-1,'            maxExtent: layerContext.maxExtent,'],[-1,'            metadata: OpenLayers.Util.applyDefaults(layerContext.metadata, '],[-1,'            {styles: layerContext.styles,'],[-1,'             formats: layerContext.formats,'],[-1,'             \&quot;abstract\&quot;: layerContext[\&quot;abstract\&quot;],'],[-1,'             dataURL: layerContext.dataURL'],[-1,'            }),'],[-1,'            numZoomLevels: layerContext.numZoomLevels,'],[-1,'            units: layerContext.units,'],[-1,'            isBaseLayer: layerContext.isBaseLayer,'],[-1,'            opacity: layerContext.opacity,'],[-1,'            displayInLayerSwitcher: layerContext.displayInLayerSwitcher,'],[-1,'            singleTile: layerContext.singleTile,'],[-1,'            tileSize: (layerContext.tileSize) ? '],[-1,'                new OpenLayers.Size('],[-1,'                    layerContext.tileSize.width, '],[-1,'                    layerContext.tileSize.height'],[-1,'                ) : undefined,'],[-1,'            minScale: layerContext.minScale || layerContext.maxScaleDenominator,'],[-1,'            maxScale: layerContext.maxScale || layerContext.minScaleDenominator,'],[-1,'            srs: layerContext.srs,'],[-1,'            dimensions: layerContext.dimensions,'],[-1,'            metadataURL: layerContext.metadataURL'],[-1,'        };'],[0,'        if (this.layerOptions) {'],[0,'            OpenLayers.Util.applyDefaults(options, this.layerOptions);'],[-1,'        }'],[-1,''],[0,'        var params = {'],[-1,'            layers: layerContext.name,'],[-1,'            transparent: layerContext.transparent,'],[-1,'            version: layerContext.version'],[-1,'        };'],[0,'        if (layerContext.formats &amp;&amp; layerContext.formats.length&gt;0) {'],[-1,'            \/\/ set default value for params if current attribute is not positionned'],[0,'            params.format = layerContext.formats[0].value;'],[0,'            for (i=0, len=layerContext.formats.length; i&lt;len; i++) {'],[0,'                var format = layerContext.formats[i];'],[0,'                if (format.current == true) {'],[0,'                    params.format = format.value;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        if (layerContext.styles &amp;&amp; layerContext.styles.length&gt;0) {'],[0,'            for (i=0, len=layerContext.styles.length; i&lt;len; i++) {'],[0,'                var style = layerContext.styles[i];'],[0,'                if (style.current == true) {'],[-1,'                    \/\/ three style types to consider'],[-1,'                    \/\/ 1) linked SLD'],[-1,'                    \/\/ 2) inline SLD'],[-1,'                    \/\/ 3) named style'],[0,'                    if(style.href) {'],[0,'                        params.sld = style.href;'],[0,'                    } else if(style.body) {'],[0,'                        params.sld_body = style.body;'],[-1,'                    } else {'],[0,'                        params.styles = style.name;'],[-1,'                    }'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        if (this.layerParams) {'],[0,'            OpenLayers.Util.applyDefaults(params, this.layerParams);'],[-1,'        }'],[-1,''],[0,'        var layer = null;'],[0,'        var service = layerContext.service;'],[0,'        if (service == OpenLayers.Format.Context.serviceTypes.WFS) {'],[0,'            options.strategies = [new OpenLayers.Strategy.BBOX()];'],[0,'            options.protocol = new OpenLayers.Protocol.WFS({'],[-1,'                url: layerContext.url,'],[-1,'                \/\/ since we do not know featureNS, let the protocol'],[-1,'                \/\/ determine it automagically using featurePrefix'],[-1,'                featurePrefix: layerContext.name.split(\&quot;:\&quot;)[0],'],[-1,'                featureType: layerContext.name.split(\&quot;:\&quot;).pop()'],[-1,'            });'],[0,'            layer = new OpenLayers.Layer.Vector('],[-1,'                layerContext.title || layerContext.name,'],[-1,'                options'],[-1,'            );'],[0,'        } else if (service == OpenLayers.Format.Context.serviceTypes.KML) {'],[-1,'            \/\/ use a vector layer with an HTTP Protcol and a Fixed strategy'],[0,'            options.strategies = [new OpenLayers.Strategy.Fixed()];'],[0,'            options.protocol = new OpenLayers.Protocol.HTTP({'],[-1,'                url: layerContext.url, '],[-1,'                format: new OpenLayers.Format.KML()'],[-1,'            });'],[0,'            layer = new OpenLayers.Layer.Vector('],[-1,'                layerContext.title || layerContext.name,'],[-1,'                options'],[-1,'            );'],[0,'        } else if (service == OpenLayers.Format.Context.serviceTypes.GML) {'],[-1,'            \/\/ use a vector layer with a HTTP Protocol and a Fixed strategy'],[0,'            options.strategies = [new OpenLayers.Strategy.Fixed()];'],[0,'            options.protocol = new OpenLayers.Protocol.HTTP({'],[-1,'                url: layerContext.url, '],[-1,'                format: new OpenLayers.Format.GML()'],[-1,'            });'],[0,'            layer = new OpenLayers.Layer.Vector('],[-1,'                layerContext.title || layerContext.name,'],[-1,'                options'],[-1,'            );'],[0,'        } else if (layerContext.features) {'],[-1,'            \/\/ inline GML or KML features'],[0,'            layer = new OpenLayers.Layer.Vector('],[-1,'                layerContext.title || layerContext.name,'],[-1,'                options'],[-1,'            );'],[0,'            layer.addFeatures(layerContext.features);'],[0,'        } else if (layerContext.categoryLayer !== true) {'],[0,'            layer = new OpenLayers.Layer.WMS('],[-1,'                layerContext.title || layerContext.name,'],[-1,'                layerContext.url,'],[-1,'                params,'],[-1,'                options'],[-1,'            );'],[-1,'        }'],[0,'        return layer;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getLayersFromContext'],[-1,'     * Create an array of layers from an array of layerContext objects.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layersContext - {Array(Object)} An array of objects representing layers.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Layer&gt;)} An array of layers.'],[-1,'     *\/'],[-1,'    getLayersFromContext: function(layersContext) {'],[0,'        var layers = [];'],[0,'        for (var i=0, len=layersContext.length; i&lt;len; i++) {'],[0,'            var layer = this.getLayerFromContext(layersContext[i]);'],[0,'            if (layer !== null) {'],[0,'                layers.push(layer);'],[-1,'            }'],[-1,'        }'],[0,'        return layers;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: contextToMap'],[-1,'     * Create a map given a context object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * context - {Object} The context object.'],[-1,'     * options - {Object} Default map options.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Map&gt;} A map based on the context object.'],[-1,'     *\/'],[-1,'    contextToMap: function(context, options) {'],[0,'        options = OpenLayers.Util.applyDefaults({'],[-1,'            maxExtent:  context.maxExtent,'],[-1,'            projection: context.projection,'],[-1,'            units:      context.units'],[-1,'        }, options);'],[-1,''],[0,'        if (options.maxExtent) {'],[0,'            options.maxResolution = '],[-1,'                options.maxExtent.getWidth() \/ OpenLayers.Map.TILE_WIDTH;'],[-1,'        }'],[-1,''],[0,'        var metadata = {'],[-1,'            contactInformation: context.contactInformation,'],[-1,'            \&quot;abstract\&quot;:         context[\&quot;abstract\&quot;],'],[-1,'            keywords:           context.keywords,'],[-1,'            logo:               context.logo,'],[-1,'            descriptionURL:     context.descriptionURL'],[-1,'        };'],[-1,''],[0,'        options.metadata = metadata;'],[-1,''],[0,'        var map = new OpenLayers.Map(options);'],[0,'        map.addLayers(this.getLayersFromContext(context.layersContext));'],[0,'        map.setCenter('],[-1,'            context.bounds.getCenterLonLat(),'],[-1,'            map.getZoomForExtent(context.bounds, true)'],[-1,'        );'],[0,'        return map;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mergeContextToMap'],[-1,'     * Add layers from a context object to a map.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * context - {Object} The context object.'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} The map.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Map&gt;} The same map with layers added.'],[-1,'     *\/'],[-1,'    mergeContextToMap: function(context, map) {'],[0,'        map.addLayers(this.getLayersFromContext(context.layersContext));'],[0,'        return map;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Write a context document given a map.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {&lt;OpenLayers.Map&gt; | Object} A map or context object.'],[-1,'     * options - {Object} Optional configuration object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A context document string.'],[-1,'     *\/'],[-1,'    write: function(obj, options) {'],[0,'        obj = this.toContext(obj);'],[0,'        return OpenLayers.Format.XML.VersionedOGC.prototype.write.apply(this,'],[-1,'            arguments);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.Context\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Format.Context.serviceTypes'],[-1,' * Enumeration for service types'],[-1,' *\/'],[1,'OpenLayers.Format.Context.serviceTypes = {'],[-1,'    \&quot;WMS\&quot;: \&quot;urn:ogc:serviceType:WMS\&quot;,'],[-1,'    \&quot;WFS\&quot;: \&quot;urn:ogc:serviceType:WFS\&quot;,'],[-1,'    \&quot;WCS\&quot;: \&quot;urn:ogc:serviceType:WCS\&quot;,'],[-1,'    \&quot;GML\&quot;: \&quot;urn:ogc:serviceType:GML\&quot;,'],[-1,'    \&quot;SLD\&quot;: \&quot;urn:ogc:serviceType:SLD\&quot;,'],[-1,'    \&quot;FES\&quot;: \&quot;urn:ogc:serviceType:FES\&quot;,'],[-1,'    \&quot;KML\&quot;: \&quot;urn:ogc:serviceType:KML\&quot;'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/OWSContext.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/Context.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.OWSContext'],[-1,' * Read and write OWS Context documents. OWS Context documents are a '],[-1,' * preliminary OGC (Open Geospatial Consortium) standard for storing the '],[-1,' * state of a web mapping application. In a way it is the successor to'],[-1,' * Web Map Context (WMC), since it is more generic and more types of layers'],[-1,' * can be stored. Also, nesting of layers is supported since version 0.3.1.'],[-1,' * For more information see: http:\/\/www.ogcnetwork.net\/context'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.Context&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.OWSContext = OpenLayers.Class(OpenLayers.Format.Context,{'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;0.3.1\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;0.3.1\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.OWSContext'],[-1,'     * Create a new parser for OWS Context documents.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getVersion'],[-1,'     * Returns the version to use. Subclasses can override this function'],[-1,'     * if a different version detection is needed.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * root - {DOMElement}'],[-1,'     * options - {Object} Optional configuration object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The version to use.'],[-1,'     *\/'],[-1,'    getVersion: function(root, options) {'],[0,'        var version = OpenLayers.Format.XML.VersionedOGC.prototype.getVersion.apply('],[-1,'            this, arguments);'],[-1,'        \/\/ 0.3.1 is backwards compatible with 0.3.0'],[0,'        if (version === \&quot;0.3.0\&quot;) {'],[0,'            version = this.defaultVersion;'],[-1,'        }'],[0,'        return version;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: toContext'],[-1,'     * Create a context object free from layer given a map or a'],[-1,'     * context object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {&lt;OpenLayers.Map&gt; | Object} The map or context.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} A context object.'],[-1,'     *\/'],[-1,'    toContext: function(obj) {'],[0,'        var context = {};'],[0,'        if(obj.CLASS_NAME == \&quot;OpenLayers.Map\&quot;) {'],[0,'            context.bounds = obj.getExtent();'],[0,'            context.maxExtent = obj.maxExtent;'],[0,'            context.projection = obj.projection;'],[0,'            context.size = obj.getSize();'],[0,'            context.layers = obj.layers;'],[-1,'        }'],[0,'        return context;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.OWSContext\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/OWSCommon.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.OWSCommon'],[-1,' * Read OWSCommon. Create a new instance with the &lt;OpenLayers.Format.OWSCommon&gt;'],[-1,' *     constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML.VersionedOGC&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.OWSCommon = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;1.0.0\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;1.0.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.OWSCommon'],[-1,'     * Create a new parser for OWSCommon.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getVersion'],[-1,'     * Returns the version to use. Subclasses can override this function'],[-1,'     * if a different version detection is needed.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * root - {DOMElement}'],[-1,'     * options - {Object} Optional configuration object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The version to use.'],[-1,'     *\/'],[-1,'    getVersion: function(root, options) {'],[0,'        var version = this.version;'],[0,'        if(!version) {'],[-1,'            \/\/ remember version does not correspond to the OWS version'],[-1,'            \/\/ it corresponds to the WMS\/WFS\/WCS etc. request version'],[0,'            var uri = root.getAttribute(\&quot;xmlns:ows\&quot;);'],[-1,'            \/\/ the above will fail if the namespace prefix is different than'],[-1,'            \/\/ ows and if the namespace is declared on a different element'],[0,'            if (uri &amp;&amp; uri.substring(uri.lastIndexOf(\&quot;\/\&quot;)+1) === \&quot;1.1\&quot;) {'],[0,'                version =\&quot;1.1.0\&quot;;'],[-1,'            } '],[0,'            if(!version) {'],[0,'                version = this.defaultVersion;'],[-1,'            }'],[-1,'        }'],[0,'        return version;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read an OWSCommon document and return an object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {String | DOMElement} Data to read.'],[-1,'     * options - {Object} Options for the reader.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object representing the structure of the document.'],[-1,'     *\/'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.OWSCommon\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/OWSCommon\/v1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/OWSCommon.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.OWSCommon.v1'],[-1,' * Common readers and writers for OWSCommon v1.X formats'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.OWSCommon.v1 = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'   '],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {DOMElement} An OWSCommon document element.'],[-1,'     * options - {Object} Options for the reader.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object representing the OWSCommon document.'],[-1,'     *\/'],[-1,'    read: function(data, options) {'],[0,'        options = OpenLayers.Util.applyDefaults(options, this.options);'],[0,'        var ows = {};'],[0,'        this.readChildNodes(data, ows);'],[0,'        return ows;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;ows\&quot;: {'],[-1,'            \&quot;Exception\&quot;: function(node, exceptionReport) {'],[0,'                var exception = {'],[-1,'                    code: node.getAttribute(\'exceptionCode\'),'],[-1,'                    locator: node.getAttribute(\'locator\'),'],[-1,'                    texts: []'],[-1,'                };'],[0,'                exceptionReport.exceptions.push(exception);'],[0,'                this.readChildNodes(node, exception);'],[-1,'            },'],[-1,'            \&quot;ExceptionText\&quot;: function(node, exception) {'],[0,'                var text = this.getChildValue(node);'],[0,'                exception.texts.push(text);'],[-1,'            },'],[-1,'            \&quot;ServiceIdentification\&quot;: function(node, obj) {'],[0,'                obj.serviceIdentification = {};'],[0,'                this.readChildNodes(node, obj.serviceIdentification);'],[-1,'            },'],[-1,'            \&quot;Title\&quot;: function(node, obj) {'],[0,'                obj.title = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Abstract\&quot;: function(node, serviceIdentification) {'],[0,'                serviceIdentification[\&quot;abstract\&quot;] = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Keywords\&quot;: function(node, serviceIdentification) {'],[0,'                serviceIdentification.keywords = {};'],[0,'                this.readChildNodes(node, serviceIdentification.keywords);'],[-1,'            },'],[-1,'            \&quot;Keyword\&quot;: function(node, keywords) {'],[0,'                keywords[this.getChildValue(node)] = true;'],[-1,'            },'],[-1,'            \&quot;ServiceType\&quot;: function(node, serviceIdentification) {'],[0,'                serviceIdentification.serviceType = {'],[-1,'                    codeSpace: node.getAttribute(\'codeSpace\'), '],[-1,'                    value: this.getChildValue(node)};'],[-1,'            },'],[-1,'            \&quot;ServiceTypeVersion\&quot;: function(node, serviceIdentification) {'],[0,'                serviceIdentification.serviceTypeVersion = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Fees\&quot;: function(node, serviceIdentification) {'],[0,'                serviceIdentification.fees = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;AccessConstraints\&quot;: function(node, serviceIdentification) {'],[0,'                serviceIdentification.accessConstraints = '],[-1,'                    this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ServiceProvider\&quot;: function(node, obj) {'],[0,'                obj.serviceProvider = {};'],[0,'                this.readChildNodes(node, obj.serviceProvider);'],[-1,'            },'],[-1,'            \&quot;ProviderName\&quot;: function(node, serviceProvider) {'],[0,'                serviceProvider.providerName = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ProviderSite\&quot;: function(node, serviceProvider) {'],[0,'                serviceProvider.providerSite = this.getAttributeNS(node, '],[-1,'                    this.namespaces.xlink, \&quot;href\&quot;);'],[-1,'            },'],[-1,'            \&quot;ServiceContact\&quot;: function(node, serviceProvider) {'],[0,'                serviceProvider.serviceContact = {};'],[0,'                this.readChildNodes(node, serviceProvider.serviceContact);'],[-1,'            },'],[-1,'            \&quot;IndividualName\&quot;: function(node, serviceContact) {'],[0,'                serviceContact.individualName = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;PositionName\&quot;: function(node, serviceContact) {'],[0,'                serviceContact.positionName = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ContactInfo\&quot;: function(node, serviceContact) {'],[0,'                serviceContact.contactInfo = {};'],[0,'                this.readChildNodes(node, serviceContact.contactInfo);'],[-1,'            },'],[-1,'            \&quot;Phone\&quot;: function(node, contactInfo) {'],[0,'                contactInfo.phone = {};'],[0,'                this.readChildNodes(node, contactInfo.phone);'],[-1,'            },'],[-1,'            \&quot;Voice\&quot;: function(node, phone) {'],[0,'                phone.voice = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Address\&quot;: function(node, contactInfo) {'],[0,'                contactInfo.address = {};'],[0,'                this.readChildNodes(node, contactInfo.address);'],[-1,'            },'],[-1,'            \&quot;DeliveryPoint\&quot;: function(node, address) {'],[0,'                address.deliveryPoint = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;City\&quot;: function(node, address) {'],[0,'                address.city = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;AdministrativeArea\&quot;: function(node, address) {'],[0,'                address.administrativeArea = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;PostalCode\&quot;: function(node, address) {'],[0,'                address.postalCode = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Country\&quot;: function(node, address) {'],[0,'                address.country = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ElectronicMailAddress\&quot;: function(node, address) {'],[0,'                address.electronicMailAddress = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Role\&quot;: function(node, serviceContact) {'],[0,'                serviceContact.role = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;OperationsMetadata\&quot;: function(node, obj) {'],[0,'                obj.operationsMetadata = {};'],[0,'                this.readChildNodes(node, obj.operationsMetadata);'],[-1,'            },'],[-1,'            \&quot;Operation\&quot;: function(node, operationsMetadata) {'],[0,'                var name = node.getAttribute(\&quot;name\&quot;);'],[0,'                operationsMetadata[name] = {};'],[0,'                this.readChildNodes(node, operationsMetadata[name]);'],[-1,'            },'],[-1,'            \&quot;DCP\&quot;: function(node, operation) {'],[0,'                operation.dcp = {};'],[0,'                this.readChildNodes(node, operation.dcp);'],[-1,'            },'],[-1,'            \&quot;HTTP\&quot;: function(node, dcp) {'],[0,'                dcp.http = {};'],[0,'                this.readChildNodes(node, dcp.http);'],[-1,'            },'],[-1,'            \&quot;Get\&quot;: function(node, http) {'],[0,'                if (!http.get) {'],[0,'                    http.get = [];'],[-1,'                }'],[0,'                var obj = {'],[-1,'                    url: this.getAttributeNS(node, this.namespaces.xlink, \&quot;href\&quot;)'],[-1,'                };'],[0,'                this.readChildNodes(node, obj);'],[0,'                http.get.push(obj);'],[-1,'            },'],[-1,'            \&quot;Post\&quot;: function(node, http) {'],[0,'                if (!http.post) {'],[0,'                    http.post = [];'],[-1,'                }'],[0,'                var obj = {'],[-1,'                    url: this.getAttributeNS(node, this.namespaces.xlink, \&quot;href\&quot;)'],[-1,'                };'],[0,'                this.readChildNodes(node, obj);'],[0,'                http.post.push(obj);'],[-1,'            },'],[-1,'            \&quot;Parameter\&quot;: function(node, operation) {'],[0,'                if (!operation.parameters) {'],[0,'                    operation.parameters = {};'],[-1,'                }'],[0,'                var name = node.getAttribute(\&quot;name\&quot;);'],[0,'                operation.parameters[name] = {};'],[0,'                this.readChildNodes(node, operation.parameters[name]);'],[-1,'            },'],[-1,'            \&quot;Constraint\&quot;: function(node, obj) {'],[0,'                if (!obj.constraints) {'],[0,'                    obj.constraints = {};'],[-1,'                }'],[0,'                var name = node.getAttribute(\&quot;name\&quot;);'],[0,'                obj.constraints[name] = {};'],[0,'                this.readChildNodes(node, obj.constraints[name]);'],[-1,'            },'],[-1,'            \&quot;Value\&quot;: function(node, allowedValues) {'],[0,'                allowedValues[this.getChildValue(node)] = true;'],[-1,'            },'],[-1,'            \&quot;OutputFormat\&quot;: function(node, obj) {'],[0,'                obj.formats.push({value: this.getChildValue(node)});'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;WGS84BoundingBox\&quot;: function(node, obj) {'],[0,'                var boundingBox = {};'],[0,'                boundingBox.crs = node.getAttribute(\&quot;crs\&quot;);'],[0,'                if (obj.BoundingBox) {'],[0,'                    obj.BoundingBox.push(boundingBox);'],[-1,'                } else {'],[0,'                    obj.projection = boundingBox.crs;'],[0,'                    boundingBox = obj;'],[-1,'               }'],[0,'               this.readChildNodes(node, boundingBox);'],[-1,'            },'],[-1,'            \&quot;BoundingBox\&quot;: function(node, obj) {'],[-1,'                \/\/ FIXME: We consider that BoundingBox is the same as WGS84BoundingBox'],[-1,'                \/\/ LowerCorner = \&quot;min_x min_y\&quot;'],[-1,'                \/\/ UpperCorner = \&quot;max_x max_y\&quot;'],[-1,'                \/\/ It should normally depend on the projection'],[0,'                this.readers[\'ows\'][\'WGS84BoundingBox\'].apply(this, [node, obj]);'],[-1,'            },'],[-1,'            \&quot;LowerCorner\&quot;: function(node, obj) {'],[0,'                var str = this.getChildValue(node).replace('],[-1,'                    this.regExes.trimSpace, \&quot;\&quot;);'],[0,'                str = str.replace(this.regExes.trimComma, \&quot;,\&quot;);'],[0,'                var pointList = str.split(this.regExes.splitSpace);'],[0,'                obj.left = pointList[0];'],[0,'                obj.bottom = pointList[1];'],[-1,'            },'],[-1,'            \&quot;UpperCorner\&quot;: function(node, obj) {'],[0,'                var str = this.getChildValue(node).replace('],[-1,'                    this.regExes.trimSpace, \&quot;\&quot;);'],[0,'                str = str.replace(this.regExes.trimComma, \&quot;,\&quot;);'],[0,'                var pointList = str.split(this.regExes.splitSpace);'],[0,'                obj.right = pointList[0];'],[0,'                obj.top = pointList[1];'],[0,'                obj.bounds = new OpenLayers.Bounds(obj.left, obj.bottom,'],[-1,'                    obj.right, obj.top);'],[0,'                delete obj.left;'],[0,'                delete obj.bottom;'],[0,'                delete obj.right;'],[0,'                delete obj.top;'],[-1,'            },'],[-1,'            \&quot;Language\&quot;: function(node, obj) {'],[0,'                obj.language = this.getChildValue(node);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;ows\&quot;: {'],[-1,'            \&quot;BoundingBox\&quot;: function(options, nodeName) {'],[0,'                var node = this.createElementNSPlus(nodeName || \&quot;ows:BoundingBox\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        crs: options.projection'],[-1,'                    }'],[-1,'                });'],[0,'                this.writeNode(\&quot;ows:LowerCorner\&quot;, options, node);'],[0,'                this.writeNode(\&quot;ows:UpperCorner\&quot;, options, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;LowerCorner\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;ows:LowerCorner\&quot;, {'],[-1,'                    value: options.bounds.left + \&quot; \&quot; + options.bounds.bottom });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;UpperCorner\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;ows:UpperCorner\&quot;, {'],[-1,'                    value: options.bounds.right + \&quot; \&quot; + options.bounds.top });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Identifier\&quot;: function(identifier) {'],[0,'                var node = this.createElementNSPlus(\&quot;ows:Identifier\&quot;, {'],[-1,'                    value: identifier });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Title\&quot;: function(title) {'],[0,'                var node = this.createElementNSPlus(\&quot;ows:Title\&quot;, {'],[-1,'                    value: title });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Abstract\&quot;: function(abstractValue) {'],[0,'                var node = this.createElementNSPlus(\&quot;ows:Abstract\&quot;, {'],[-1,'                    value: abstractValue });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;OutputFormat\&quot;: function(format) {'],[0,'                var node = this.createElementNSPlus(\&quot;ows:OutputFormat\&quot;, {'],[-1,'                    value: format });'],[0,'                return node;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.OWSCommon.v1\&quot;'],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/OWSCommon\/v1_0_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.OWSCommon.v1_0_0'],[-1,' * Parser for OWS Common version 1.0.0.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.OWSCommon.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.OWSCommon.v1_0_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;ows\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;ExceptionReport\&quot;: function(node, obj) {'],[0,'                obj.success = false;'],[0,'                obj.exceptionReport = {'],[-1,'                    version: node.getAttribute(\'version\'),'],[-1,'                    language: node.getAttribute(\'language\'),'],[-1,'                    exceptions: []'],[-1,'                };'],[0,'                this.readChildNodes(node, obj.exceptionReport);'],[-1,'            } '],[-1,'        }, OpenLayers.Format.OWSCommon.v1.prototype.readers.ows)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1.prototype.writers.ows'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.OWSCommon.v1_0_0\&quot;'],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/OWSContext\/v0_3_1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/KML.js'],[-1,' * @requires OpenLayers\/Format\/GML.js'],[-1,' * @requires OpenLayers\/Format\/GML\/v2.js'],[-1,' * @requires OpenLayers\/Format\/SLD\/v1_0_0.js'],[-1,' * @requires OpenLayers\/Format\/OWSContext.js'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1_0_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.OWSContext.v0_3_1'],[-1,' * Read and write OWSContext version 0.3.1.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.OWSContext.v0_3_1 = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        owc: \&quot;http:\/\/www.opengis.net\/ows-context\&quot;,'],[-1,'        gml: \&quot;http:\/\/www.opengis.net\/gml\&quot;,'],[-1,'        kml: \&quot;http:\/\/www.opengis.net\/kml\/2.2\&quot;,'],[-1,'        ogc: \&quot;http:\/\/www.opengis.net\/ogc\&quot;,'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\&quot;,'],[-1,'        sld: \&quot;http:\/\/www.opengis.net\/sld\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: VERSION'],[-1,'     * {String} 0.3.1'],[-1,'     *\/'],[-1,'    VERSION: \&quot;0.3.1\&quot;, '],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/ows-context http:\/\/www.ogcnetwork.net\/schemas\/owc\/0.3.1\/owsContext.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     * {String} Default namespace prefix to use.'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;owc\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: extractAttributes'],[-1,'     * {Boolean} Extract attributes from GML.  Default is true.'],[-1,'     *\/'],[-1,'    extractAttributes: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: xy'],[-1,'     * {Boolean} Order of the GML coordinate true:(x,y) or false:(y,x)'],[-1,'     * Changing is not recommended, a new Format should be instantiated.'],[-1,'     *\/ '],[-1,'    xy: true, '],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: featureNS'],[-1,'     * {String} The namespace uri to use for writing InlineGeometry'],[-1,'     *\/'],[-1,'    featureNS: \&quot;http:\/\/mapserver.gis.umn.edu\/mapserver\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: featureType'],[-1,'     * {String} The name to use as the feature type when writing out'],[-1,'     *     InlineGeometry'],[-1,'     *\/'],[-1,'    featureType: \'vector\','],[-1,'              '],[-1,'    \/**'],[-1,'     * Property: geometryName'],[-1,'     * {String} The name to use for the geometry attribute when writing out'],[-1,'     *     InlineGeometry'],[-1,'     *\/'],[-1,'    geometryName: \'geometry\','],[-1,''],[-1,'    \/**'],[-1,'     * Property: nestingLayerLookup'],[-1,'     * {Object} Hashtable lookup for nesting layer nodes. Used while writing '],[-1,'     *     the OWS context document. It is necessary to keep track of the '],[-1,'     *     nestingPaths for which nesting layer nodes have already been '],[-1,'     *     created, so (nesting) layer nodes are added to those nodes.'],[-1,'     *'],[-1,'     * For example:'],[-1,'     *'],[-1,'     *     If there are three layers with nestingPaths:'],[-1,'     *         layer1.metadata.nestingPath = \&quot;a\/b\/\&quot;'],[-1,'     *         layer2.metadata.nestingPath = \&quot;a\/b\/\&quot;'],[-1,'     *         layer2.metadata.nestingPath = \&quot;a\/c\&quot;'],[-1,'     *'],[-1,'     *     then a nesting layer node \&quot;a\&quot; should be created once and added '],[-1,'     *     to the resource list, a nesting layer node \&quot;b\&quot; should be created '],[-1,'     *     once and added under \&quot;a\&quot;, and a nesting layer node \&quot;c\&quot; should be '],[-1,'     *     created and added under \&quot;a\&quot;. The lookup paths for these nodes '],[-1,'     *     will be \&quot;a\&quot;, \&quot;a\/b\&quot;, and \&quot;a\/c\&quot; respectively.'],[-1,'     *\/'],[-1,'    nestingLayerLookup: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.OWSContext.v0_3_1'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.OWSContext&gt; constructor instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[0,'        OpenLayers.Format.GML.v2.prototype.setGeometryTypes.call(this);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setNestingPath'],[-1,'     * Set the nestingPath property of the layer depending on the position'],[-1,'     *     of the layer in hierarchy of layers.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * l - {Object} An object that may have a layersContext array property.'],[-1,'     * '],[-1,'     *\/'],[-1,'    setNestingPath : function(l){'],[0,'        if(l.layersContext){'],[0,'            for (var i = 0, len = l.layersContext.length; i &lt; len; i++) {'],[0,'                var layerContext = l.layersContext[i];'],[0,'                var nPath = [];'],[0,'                var nTitle = l.title || \&quot;\&quot;;'],[0,'                if(l.metadata &amp;&amp; l.metadata.nestingPath){'],[0,'                    nPath = l.metadata.nestingPath.slice();'],[-1,'                }'],[0,'                if (nTitle != \&quot;\&quot;) {'],[0,'                    nPath.push(nTitle);'],[-1,'                }'],[0,'                layerContext.metadata.nestingPath = nPath;'],[0,'                if(layerContext.layersContext){'],[0,'                    this.setNestingPath(layerContext);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Function: decomposeNestingPath'],[-1,'     * Takes a nestingPath like \&quot;a\/b\/c\&quot; and decomposes it into subpaths:'],[-1,'     * \&quot;a\&quot;, \&quot;a\/b\&quot;, \&quot;a\/b\/c\&quot;'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * nPath  - {Array} the nesting path'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * Array({String}) Array with subpaths, or empty array if there is nothing'],[-1,'     *     to decompose'],[-1,'     *\/'],[-1,'    decomposeNestingPath: function(nPath){'],[0,'        var a = [];'],[0,'        if (OpenLayers.Util.isArray(nPath)) {'],[0,'            var path = nPath.slice();'],[0,'            while (path.length &gt; 0) {'],[0,'                a.push(path.slice());'],[0,'                path.pop();'],[-1,'            }'],[0,'            a.reverse();'],[-1,'        }'],[0,'        return a;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read OWS context data from a string or DOMElement, and return a list '],[-1,'     *     of layers. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} The context object with a flat layer list as a property named'],[-1,'     *     layersContext.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var context = {};'],[0,'        this.readNode(data, context);'],[-1,'        \/\/ since an OWSContext can be nested we need to go through this'],[-1,'        \/\/ structure recursively      '],[0,'        this.setNestingPath({layersContext : context.layersContext});'],[-1,'        \/\/ after nesting path has been set, create a flat list of layers'],[0,'        var layers = [];'],[0,'        this.processLayer(layers, context);'],[0,'        delete context.layersContext;'],[0,'        context.layersContext = layers;'],[0,'        return context;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: processLayer'],[-1,'     * Recursive function to get back a flat list of layers from the hierarchic'],[-1,'     *     layer structure.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layerArray - {Array({Object})} Array of layerContext objects'],[-1,'     * layer - {Object} layerContext object'],[-1,'     *\/'],[-1,'    processLayer: function(layerArray, layer) {'],[0,'        if (layer.layersContext) {'],[0,'            for (var i=0, len = layer.layersContext.length; i&lt;len; i++) {'],[0,'                var l = layer.layersContext[i];'],[0,'                layerArray.push(l);'],[0,'                if (l.layersContext) {'],[0,'                    this.processLayer(layerArray, l);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * context - {Object} An object representing the map context.'],[-1,'     * options - {Object} Optional object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} An OWS Context document string.'],[-1,'     *\/'],[-1,'    write: function(context, options) {'],[0,'        var name = \&quot;OWSContext\&quot;;'],[0,'        this.nestingLayerLookup = {}; \/\/start with empty lookup'],[0,'        options = options || {};'],[0,'        OpenLayers.Util.applyDefaults(options, context);'],[0,'        var root = this.writeNode(name, options);'],[0,'        this.nestingLayerLookup = null; \/\/clear lookup'],[0,'        this.setAttributeNS('],[-1,'            root, this.namespaces[\&quot;xsi\&quot;],'],[-1,'            \&quot;xsi:schemaLocation\&quot;, this.schemaLocation'],[-1,'        );'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [root]);'],[-1,'    }, '],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;kml\&quot;: {'],[-1,'            \&quot;Document\&quot;: function(node, obj) {'],[0,'                obj.features = new OpenLayers.Format.KML('],[-1,'                    {kmlns: this.namespaces.kml, '],[-1,'                        extractStyles: true}).read(node);'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;owc\&quot;: { '],[-1,'            \&quot;OWSContext\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            }, '],[-1,'            \&quot;General\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;ResourceList\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Layer\&quot;: function(node, obj) {'],[0,'                var layerContext = {'],[-1,'                    metadata: {},'],[-1,'                    visibility: (node.getAttribute(\&quot;hidden\&quot;) != \&quot;1\&quot;),'],[-1,'                    queryable: (node.getAttribute(\&quot;queryable\&quot;) == \&quot;1\&quot;),'],[-1,'                    opacity: ((node.getAttribute(\&quot;opacity\&quot;) != null) ? '],[-1,'                        parseFloat(node.getAttribute(\&quot;opacity\&quot;)) : null),'],[-1,'                    name: node.getAttribute(\&quot;name\&quot;),'],[-1,'                    \/* A category layer is a dummy layer meant for creating'],[-1,'                       hierarchies. It is not a physical layer in the '],[-1,'                       OpenLayers sense. The assumption we make here is that'],[-1,'                       category layers do not have a name attribute *\/'],[-1,'                    categoryLayer: (node.getAttribute(\&quot;name\&quot;) == null),'],[-1,'                    formats: [],'],[-1,'                    styles: []'],[-1,'                };'],[0,'                if (!obj.layersContext) {'],[0,'                    obj.layersContext = [];'],[-1,'                }'],[0,'                obj.layersContext.push(layerContext);'],[0,'                this.readChildNodes(node, layerContext);'],[-1,'            },'],[-1,'            \&quot;InlineGeometry\&quot;: function(node, obj) {'],[0,'                obj.features = [];'],[0,'                var elements = this.getElementsByTagNameNS(node, '],[-1,'                    this.namespaces.gml, \&quot;featureMember\&quot;);'],[0,'                var el;'],[0,'                if (elements.length &gt;= 1) {'],[0,'                    el = elements[0];'],[-1,'                }'],[0,'                if (el &amp;&amp; el.firstChild) {'],[0,'                    var featurenode = (el.firstChild.nextSibling) ? '],[-1,'                        el.firstChild.nextSibling : el.firstChild;'],[0,'                    this.setNamespace(\&quot;feature\&quot;, featurenode.namespaceURI);'],[0,'                    this.featureType = featurenode.localName || '],[-1,'                        featurenode.nodeName.split(\&quot;:\&quot;).pop();'],[0,'                    this.readChildNodes(node, obj);'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Server\&quot;: function(node, obj) {'],[-1,'                \/\/ when having multiple Server types, we prefer WMS'],[0,'                if ((!obj.service &amp;&amp; !obj.version) || '],[-1,'                    (obj.service != '],[-1,'                        OpenLayers.Format.Context.serviceTypes.WMS)) {'],[0,'                            obj.service = node.getAttribute(\&quot;service\&quot;);'],[0,'                            obj.version = node.getAttribute(\&quot;version\&quot;);'],[0,'                            this.readChildNodes(node, obj);'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Name\&quot;: function(node, obj) {'],[0,'                obj.name = this.getChildValue(node);'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Title\&quot;: function(node, obj) {'],[0,'                obj.title = this.getChildValue(node);'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;StyleList\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj.styles);'],[-1,'            },'],[-1,'            \&quot;Style\&quot;: function(node, obj) {'],[0,'                var style = {};'],[0,'                obj.push(style);'],[0,'                this.readChildNodes(node, style);'],[-1,'            },'],[-1,'            \&quot;LegendURL\&quot;: function(node, obj) {'],[0,'                var legend = {};'],[0,'                obj.legend = legend;'],[0,'                this.readChildNodes(node, legend);'],[-1,'            },'],[-1,'            \&quot;OnlineResource\&quot;: function(node, obj) {'],[0,'                obj.url = this.getAttributeNS(node, this.namespaces.xlink, '],[-1,'                    \&quot;href\&quot;);'],[0,'                this.readChildNodes(node, obj);'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers.ows,'],[-1,'        \&quot;gml\&quot;: OpenLayers.Format.GML.v2.prototype.readers.gml,'],[-1,'        \&quot;sld\&quot;: OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld,'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.v2.prototype.readers.feature'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;owc\&quot;: {'],[-1,'            \&quot;OWSContext\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;OWSContext\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        version: this.VERSION,'],[-1,'                        id: options.id || OpenLayers.Util.createUniqueID(\&quot;OpenLayers_OWSContext_\&quot;)'],[-1,'                    } '],[-1,'                }); '],[0,'                this.writeNode(\&quot;General\&quot;, options, node);'],[0,'                this.writeNode(\&quot;ResourceList\&quot;, options, node);'],[0,'                return node; '],[-1,'            },'],[-1,'            \&quot;General\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;General\&quot;);'],[0,'                this.writeNode(\&quot;ows:BoundingBox\&quot;, options, node);'],[0,'                this.writeNode(\&quot;ows:Title\&quot;, options.title || \'OpenLayers OWSContext\', node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;ResourceList\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;ResourceList\&quot;);'],[0,'                for (var i=0, len=options.layers.length; i&lt;len; i++) {'],[0,'                    var layer = options.layers[i];'],[0,'                    var decomposedPath = this.decomposeNestingPath(layer.metadata.nestingPath);'],[0,'                    this.writeNode(\&quot;_Layer\&quot;, {layer: layer, subPaths: decomposedPath}, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Server\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;Server\&quot;, {attributes: {'],[-1,'                    version: options.version,'],[-1,'                    service: options.service }'],[-1,'                });'],[0,'                this.writeNode(\&quot;OnlineResource\&quot;, options, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;OnlineResource\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;OnlineResource\&quot;, {attributes: {'],[-1,'                    \&quot;xlink:href\&quot;: options.url }'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;InlineGeometry\&quot;: function(layer) {'],[0,'                var node = this.createElementNSPlus(\&quot;InlineGeometry\&quot;),'],[-1,'                    dataExtent = layer.getDataExtent();'],[0,'                if (dataExtent !== null) {'],[0,'                    this.writeNode(\&quot;gml:boundedBy\&quot;, dataExtent, node);'],[-1,'                }'],[0,'                for (var i=0, len=layer.features.length; i&lt;len; i++) {'],[0,'                    this.writeNode(\&quot;gml:featureMember\&quot;, layer.features[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;StyleList\&quot;: function(styles) {'],[0,'                var node = this.createElementNSPlus(\&quot;StyleList\&quot;);'],[0,'                for (var i=0, len=styles.length; i&lt;len; i++) {'],[0,'                    this.writeNode(\&quot;Style\&quot;, styles[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Style\&quot;: function(style) {'],[0,'                var node = this.createElementNSPlus(\&quot;Style\&quot;);'],[0,'                this.writeNode(\&quot;Name\&quot;, style, node);'],[0,'                this.writeNode(\&quot;Title\&quot;, style, node);'],[0,'                if (style.legend) {'],[0,'                    this.writeNode(\&quot;LegendURL\&quot;, style, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Name\&quot;: function(obj) {'],[0,'                var node = this.createElementNSPlus(\&quot;Name\&quot;, {'],[-1,'                    value: obj.name });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Title\&quot;: function(obj) {'],[0,'                var node = this.createElementNSPlus(\&quot;Title\&quot;, {'],[-1,'                    value: obj.title });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;LegendURL\&quot;: function(style) {'],[0,'                var node = this.createElementNSPlus(\&quot;LegendURL\&quot;);'],[0,'                this.writeNode(\&quot;OnlineResource\&quot;, style.legend, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;_WMS\&quot;: function(layer) {'],[0,'                var node = this.createElementNSPlus(\&quot;Layer\&quot;, {attributes: {'],[-1,'                    name: layer.params.LAYERS,'],[-1,'                    queryable: layer.queryable ? \&quot;1\&quot; : \&quot;0\&quot;,'],[-1,'                    hidden: layer.visibility ? \&quot;0\&quot; : \&quot;1\&quot;,'],[-1,'                    opacity: layer.hasOwnProperty(\&quot;opacity\&quot;) ? layer.opacity : null}'],[-1,'                });'],[0,'                this.writeNode(\&quot;ows:Title\&quot;, layer.name, node);'],[0,'                this.writeNode(\&quot;ows:OutputFormat\&quot;, layer.params.FORMAT, node);'],[0,'                this.writeNode(\&quot;Server\&quot;, {service: '],[-1,'                    OpenLayers.Format.Context.serviceTypes.WMS,'],[-1,'                    version: layer.params.VERSION, url: layer.url}, node);'],[0,'                if (layer.metadata.styles &amp;&amp; layer.metadata.styles.length &gt; 0) {'],[0,'                    this.writeNode(\&quot;StyleList\&quot;, layer.metadata.styles, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;_Layer\&quot;: function(options) {'],[0,'                var layer, subPaths, node, title;'],[0,'                layer = options.layer;'],[0,'                subPaths = options.subPaths;'],[0,'                node = null;'],[0,'                title = null;'],[-1,'                \/\/ subPaths is an array of an array'],[-1,'                \/\/ recursively calling _Layer writer eats up subPaths, until a '],[-1,'                \/\/ real writer is called and nodes are returned.'],[0,'                if(subPaths.length &gt; 0){'],[0,'                    var path = subPaths[0].join(\&quot;\/\&quot;);'],[0,'                    var index = path.lastIndexOf(\&quot;\/\&quot;);'],[0,'                    node = this.nestingLayerLookup[path];'],[0,'                    title = (index &gt; 0)?path.substring(index + 1, path.length):path;'],[0,'                    if(!node){'],[-1,'                        \/\/ category layer'],[0,'                        node = this.createElementNSPlus(\&quot;Layer\&quot;);'],[0,'                        this.writeNode(\&quot;ows:Title\&quot;, title, node);'],[0,'                        this.nestingLayerLookup[path] = node;'],[-1,'                    }'],[0,'                    options.subPaths.shift();\/\/remove a path after each call'],[0,'                    this.writeNode(\&quot;_Layer\&quot;, options, node);'],[0,'                    return node;'],[-1,'                } else {'],[-1,'                    \/\/ write out the actual layer'],[0,'                    if (layer instanceof OpenLayers.Layer.WMS) {'],[0,'                        node = this.writeNode(\&quot;_WMS\&quot;, layer);'],[0,'                    } else if (layer instanceof OpenLayers.Layer.Vector) {'],[0,'                        if (layer.protocol instanceof OpenLayers.Protocol.WFS.v1) {'],[0,'                            node = this.writeNode(\&quot;_WFS\&quot;, layer);'],[0,'                        } else if (layer.protocol instanceof OpenLayers.Protocol.HTTP) {'],[0,'                            if (layer.protocol.format instanceof OpenLayers.Format.GML) {'],[0,'                                layer.protocol.format.version = \&quot;2.1.2\&quot;;'],[0,'                                node = this.writeNode(\&quot;_GML\&quot;, layer);'],[0,'                            } else if (layer.protocol.format instanceof OpenLayers.Format.KML) {'],[0,'                                layer.protocol.format.version = \&quot;2.2\&quot;;'],[0,'                                node = this.writeNode(\&quot;_KML\&quot;, layer);'],[-1,'                            }'],[-1,'                        } else {'],[-1,'                            \/\/ write out as inline GML since we have no idea'],[-1,'                            \/\/ about the original Format'],[0,'                            this.setNamespace(\&quot;feature\&quot;, this.featureNS);'],[0,'                            node = this.writeNode(\&quot;_InlineGeometry\&quot;, layer);'],[-1,'                        }'],[-1,'                    }'],[0,'                    if (layer.options.maxScale) {'],[0,'                        this.writeNode(\&quot;sld:MinScaleDenominator\&quot;, '],[-1,'                            layer.options.maxScale, node);'],[-1,'                    }'],[0,'                    if (layer.options.minScale) {'],[0,'                        this.writeNode(\&quot;sld:MaxScaleDenominator\&quot;, '],[-1,'                            layer.options.minScale, node);'],[-1,'                    }'],[0,'                    this.nestingLayerLookup[layer.name] = node;'],[0,'                    return node;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;_WFS\&quot;: function(layer) {'],[0,'                var node = this.createElementNSPlus(\&quot;Layer\&quot;, {attributes: {'],[-1,'                    name: layer.protocol.featurePrefix + \&quot;:\&quot; + layer.protocol.featureType,'],[-1,'                    hidden: layer.visibility ? \&quot;0\&quot; : \&quot;1\&quot; }'],[-1,'                });'],[0,'                this.writeNode(\&quot;ows:Title\&quot;, layer.name, node);'],[0,'                this.writeNode(\&quot;Server\&quot;, {service: '],[-1,'                    OpenLayers.Format.Context.serviceTypes.WFS, '],[-1,'                    version: layer.protocol.version, '],[-1,'                    url: layer.protocol.url}, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;_InlineGeometry\&quot;: function(layer) {'],[0,'                var node = this.createElementNSPlus(\&quot;Layer\&quot;, {attributes: {'],[-1,'                    name: this.featureType,'],[-1,'                    hidden: layer.visibility ? \&quot;0\&quot; : \&quot;1\&quot; }'],[-1,'                });'],[0,'                this.writeNode(\&quot;ows:Title\&quot;, layer.name, node);'],[0,'                this.writeNode(\&quot;InlineGeometry\&quot;, layer, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;_GML\&quot;: function(layer) {'],[0,'                var node = this.createElementNSPlus(\&quot;Layer\&quot;);'],[0,'                this.writeNode(\&quot;ows:Title\&quot;, layer.name, node);'],[0,'                this.writeNode(\&quot;Server\&quot;, {service: '],[-1,'                    OpenLayers.Format.Context.serviceTypes.GML, '],[-1,'                    url: layer.protocol.url, version: '],[-1,'                    layer.protocol.format.version}, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;_KML\&quot;: function(layer) {'],[0,'                var node = this.createElementNSPlus(\&quot;Layer\&quot;);'],[0,'                this.writeNode(\&quot;ows:Title\&quot;, layer.name, node);'],[0,'                this.writeNode(\&quot;Server\&quot;, {service: '],[-1,'                    OpenLayers.Format.Context.serviceTypes.KML,'],[-1,'                    version: layer.protocol.format.version, url: '],[-1,'                    layer.protocol.url}, node);'],[0,'                return node;'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;gml\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;boundedBy\&quot;: function(bounds) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:boundedBy\&quot;);'],[0,'                this.writeNode(\&quot;gml:Box\&quot;, bounds, node);'],[0,'                return node;'],[-1,'            }'],[-1,'        }, OpenLayers.Format.GML.v2.prototype.writers.gml),'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1_0_0.prototype.writers.ows,'],[-1,'        \&quot;sld\&quot;: OpenLayers.Format.SLD.v1_0_0.prototype.writers.sld,'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.v2.prototype.writers.feature'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.OWSContext.v0_3_1\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/CSWGetRecords.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.CSWGetRecords'],[-1,' * Default version is 2.0.2.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.Format&gt;} A CSWGetRecords format of the given version.'],[-1,' *\/'],[1,'OpenLayers.Format.CSWGetRecords = function(options) {'],[0,'    options = OpenLayers.Util.applyDefaults('],[-1,'        options, OpenLayers.Format.CSWGetRecords.DEFAULTS'],[-1,'    );'],[0,'    var cls = OpenLayers.Format.CSWGetRecords[\&quot;v\&quot;+options.version.replace(\/\\.\/g, \&quot;_\&quot;)];'],[0,'    if(!cls) {'],[0,'        throw \&quot;Unsupported CSWGetRecords version: \&quot; + options.version;'],[-1,'    }'],[0,'    return new cls(options);'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Constant: DEFAULTS'],[-1,' * {Object} Default properties for the CSWGetRecords format.'],[-1,' *\/'],[1,'OpenLayers.Format.CSWGetRecords.DEFAULTS = {'],[-1,'    \&quot;version\&quot;: \&quot;2.0.2\&quot;'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control'],[-1,' * Controls affect the display or behavior of the map. They allow everything'],[-1,' * from panning and zooming to displaying a scale indicator. Controls by '],[-1,' * default are added to the map they are contained within however it is'],[-1,' * possible to add a control to an external div by passing the div in the'],[-1,' * options parameter.'],[-1,' * '],[-1,' * Example:'],[-1,' * The following example shows how to add many of the common controls'],[-1,' * to a map.'],[-1,' * '],[-1,' * &gt; var map = new OpenLayers.Map(\'map\', { controls: [] });'],[-1,' * &gt;'],[-1,' * &gt; map.addControl(new OpenLayers.Control.PanZoomBar());'],[-1,' * &gt; map.addControl(new OpenLayers.Control.LayerSwitcher({\'ascending\':false}));'],[-1,' * &gt; map.addControl(new OpenLayers.Control.Permalink());'],[-1,' * &gt; map.addControl(new OpenLayers.Control.Permalink(\'permalink\'));'],[-1,' * &gt; map.addControl(new OpenLayers.Control.MousePosition());'],[-1,' * &gt; map.addControl(new OpenLayers.Control.OverviewMap());'],[-1,' * &gt; map.addControl(new OpenLayers.Control.KeyboardDefaults());'],[-1,' *'],[-1,' * The next code fragment is a quick example of how to intercept '],[-1,' * shift-mouse click to display the extent of the bounding box'],[-1,' * dragged out by the user.  Usually controls are not created'],[-1,' * in exactly this manner.  See the source for a more complete '],[-1,' * example:'],[-1,' *'],[-1,' * &gt; var control = new OpenLayers.Control();'],[-1,' * &gt; OpenLayers.Util.extend(control, {'],[-1,' * &gt;     draw: function () {'],[-1,' * &gt;         \/\/ this Handler.Box will intercept the shift-mousedown'],[-1,' * &gt;         \/\/ before Control.MouseDefault gets to see it'],[-1,' * &gt;         this.box = new OpenLayers.Handler.Box( control, '],[-1,' * &gt;             {\&quot;done\&quot;: this.notice},'],[-1,' * &gt;             {keyMask: OpenLayers.Handler.MOD_SHIFT});'],[-1,' * &gt;         this.box.activate();'],[-1,' * &gt;     },'],[-1,' * &gt;'],[-1,' * &gt;     notice: function (bounds) {'],[-1,' * &gt;         OpenLayers.Console.userError(bounds);'],[-1,' * &gt;     }'],[-1,' * &gt; }); '],[-1,' * &gt; map.addControl(control);'],[-1,' * '],[-1,' *\/'],[1,'OpenLayers.Control = OpenLayers.Class({'],[-1,''],[-1,'    \/** '],[-1,'     * Property: id '],[-1,'     * {String} '],[-1,'     *\/'],[-1,'    id: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: map '],[-1,'     * {&lt;OpenLayers.Map&gt;} this gets set in the addControl() function in'],[-1,'     * OpenLayers.Map '],[-1,'     *\/'],[-1,'    map: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: div '],[-1,'     * {DOMElement} The element that contains the control, if not present the '],[-1,'     *     control is placed inside the map.'],[-1,'     *\/'],[-1,'    div: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: type '],[-1,'     * {Number} Controls can have a \'type\'. The type determines the type of'],[-1,'     * interactions which are possible with them when they are placed in an'],[-1,'     * &lt;OpenLayers.Control.Panel&gt;. '],[-1,'     *\/'],[-1,'    type: null, '],[-1,''],[-1,'    \/** '],[-1,'     * Property: allowSelection'],[-1,'     * {Boolean} By default, controls do not allow selection, because'],[-1,'     * it may interfere with map dragging. If this is true, OpenLayers'],[-1,'     * will not prevent selection of the control.'],[-1,'     * Default is false.'],[-1,'     *\/'],[-1,'    allowSelection: false,  '],[-1,''],[-1,'    \/** '],[-1,'     * Property: displayClass '],[-1,'     * {string}  This property is used for CSS related to the drawing of the'],[-1,'     * Control. '],[-1,'     *\/'],[-1,'    displayClass: \&quot;\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'    * APIProperty: title  '],[-1,'    * {string}  This property is used for showing a tooltip over the  '],[-1,'    * Control.  '],[-1,'    *\/ '],[-1,'    title: \&quot;\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: autoActivate'],[-1,'     * {Boolean} Activate the control when it is added to a map.  Default is'],[-1,'     *     false.'],[-1,'     *\/'],[-1,'    autoActivate: false,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: active '],[-1,'     * {Boolean} The control is active (read-only).  Use &lt;activate&gt; and '],[-1,'     *     &lt;deactivate&gt; to change control state.'],[-1,'     *\/'],[-1,'    active: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: handlerOptions'],[-1,'     * {Object} Used to set non-default properties on the control\'s handler'],[-1,'     *\/'],[-1,'    handlerOptions: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: handler '],[-1,'     * {&lt;OpenLayers.Handler&gt;} null'],[-1,'     *\/'],[-1,'    handler: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: eventListeners'],[-1,'     * {Object} If set as an option at construction, the eventListeners'],[-1,'     *     object will be registered with &lt;OpenLayers.Events.on&gt;.  Object'],[-1,'     *     structure must be a listeners object as shown in the example for'],[-1,'     *     the events.on method.'],[-1,'     *\/'],[-1,'    eventListeners: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Listeners will be called with a reference to an event object.  The'],[-1,'     *     properties of this event depends on exactly what happened.'],[-1,'     *'],[-1,'     * All event objects have at least the following properties:'],[-1,'     * object - {Object} A reference to control.events.object (a reference'],[-1,'     *      to the control).'],[-1,'     * element - {DOMElement} A reference to control.events.element (which'],[-1,'     *      will be null unless documented otherwise).'],[-1,'     *'],[-1,'     * Supported map event types:'],[-1,'     * activate - Triggered when activated.'],[-1,'     * deactivate - Triggered when deactivated.'],[-1,'     *\/'],[-1,'    events: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control'],[-1,'     * Create an OpenLayers Control.  The options passed as a parameter'],[-1,'     * directly extend the control.  For example passing the following:'],[-1,'     * '],[-1,'     * &gt; var control = new OpenLayers.Control({div: myDiv});'],[-1,'     *'],[-1,'     * Overrides the default div attribute value of null.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * options - {Object} '],[-1,'     *\/'],[-1,'    initialize: function (options) {'],[-1,'        \/\/ We do this before the extend so that instances can override'],[-1,'        \/\/ className in options.'],[0,'        this.displayClass = '],[-1,'            this.CLASS_NAME.replace(\&quot;OpenLayers.\&quot;, \&quot;ol\&quot;).replace(\/\\.\/g, \&quot;\&quot;);'],[-1,'        '],[0,'        OpenLayers.Util.extend(this, options);'],[-1,'        '],[0,'        this.events = new OpenLayers.Events(this);'],[0,'        if(this.eventListeners instanceof Object) {'],[0,'            this.events.on(this.eventListeners);'],[-1,'        }'],[0,'        if (this.id == null) {'],[0,'            this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \&quot;_\&quot;);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     * The destroy method is used to perform any clean up before the control'],[-1,'     * is dereferenced.  Typically this is where event listeners are removed'],[-1,'     * to prevent memory leaks.'],[-1,'     *\/'],[-1,'    destroy: function () {'],[0,'        if(this.events) {'],[0,'            if(this.eventListeners) {'],[0,'                this.events.un(this.eventListeners);'],[-1,'            }'],[0,'            this.events.destroy();'],[0,'            this.events = null;'],[-1,'        }'],[0,'        this.eventListeners = null;'],[-1,''],[-1,'        \/\/ eliminate circular references'],[0,'        if (this.handler) {'],[0,'            this.handler.destroy();'],[0,'            this.handler = null;'],[-1,'        }'],[0,'        if(this.handlers) {'],[0,'            for(var key in this.handlers) {'],[0,'                if(this.handlers.hasOwnProperty(key) &amp;&amp;'],[-1,'                   typeof this.handlers[key].destroy == \&quot;function\&quot;) {'],[0,'                    this.handlers[key].destroy();'],[-1,'                }'],[-1,'            }'],[0,'            this.handlers = null;'],[-1,'        }'],[0,'        if (this.map) {'],[0,'            this.map.removeControl(this);'],[0,'            this.map = null;'],[-1,'        }'],[0,'        this.div = null;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: setMap'],[-1,'     * Set the map property for the control. This is done through an accessor'],[-1,'     * so that subclasses can override this and take special action once '],[-1,'     * they have their map variable set. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} '],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        this.map = map;'],[0,'        if (this.handler) {'],[0,'            this.handler.setMap(map);'],[-1,'        }'],[-1,'    },'],[-1,'  '],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * The draw method is called when the control is ready to be displayed'],[-1,'     * on the page.  If a div has not been created one is created.  Controls'],[-1,'     * with a visual component will almost always want to override this method '],[-1,'     * to customize the look of control. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;} The top-left pixel position of the control'],[-1,'     *      or null.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} A reference to the DIV DOMElement containing the control'],[-1,'     *\/'],[-1,'    draw: function (px) {'],[0,'        if (this.div == null) {'],[0,'            this.div = OpenLayers.Util.createDiv(this.id);'],[0,'            this.div.className = this.displayClass;'],[0,'            if (!this.allowSelection) {'],[0,'                this.div.className += \&quot; olControlNoSelect\&quot;;'],[0,'                this.div.setAttribute(\&quot;unselectable\&quot;, \&quot;on\&quot;, 0);'],[0,'                this.div.onselectstart = OpenLayers.Function.False; '],[-1,'            }    '],[0,'            if (this.title != \&quot;\&quot;) {'],[0,'                this.div.title = this.title;'],[-1,'            }'],[-1,'        }'],[0,'        if (px != null) {'],[0,'            this.position = px.clone();'],[-1,'        }'],[0,'        this.moveTo(this.position);'],[0,'        return this.div;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     * Sets the left and top style attributes to the passed in pixel '],[-1,'     * coordinates.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *\/'],[-1,'    moveTo: function (px) {'],[0,'        if ((px != null) &amp;&amp; (this.div != null)) {'],[0,'            this.div.style.left = px.x + \&quot;px\&quot;;'],[0,'            this.div.style.top = px.y + \&quot;px\&quot;;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Explicitly activates a control and it\'s associated'],[-1,'     * handler if one has been set.  Controls can be'],[-1,'     * deactivated by calling the deactivate() method.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean}  True if the control was successfully activated or'],[-1,'     *            false if the control was already active.'],[-1,'     *\/'],[-1,'    activate: function () {'],[0,'        if (this.active) {'],[0,'            return false;'],[-1,'        }'],[0,'        if (this.handler) {'],[0,'            this.handler.activate();'],[-1,'        }'],[0,'        this.active = true;'],[0,'        if(this.map) {'],[0,'            OpenLayers.Element.addClass('],[-1,'                this.map.viewPortDiv,'],[-1,'                this.displayClass.replace(\/ \/g, \&quot;\&quot;) + \&quot;Active\&quot;'],[-1,'            );'],[-1,'        }'],[0,'        this.events.triggerEvent(\&quot;activate\&quot;);'],[0,'        return true;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivates a control and it\'s associated handler if any.  The exact'],[-1,'     * effect of this depends on the control itself.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} True if the control was effectively deactivated or false'],[-1,'     *           if the control was already inactive.'],[-1,'     *\/'],[-1,'    deactivate: function () {'],[0,'        if (this.active) {'],[0,'            if (this.handler) {'],[0,'                this.handler.deactivate();'],[-1,'            }'],[0,'            this.active = false;'],[0,'            if(this.map) {'],[0,'                OpenLayers.Element.removeClass('],[-1,'                    this.map.viewPortDiv,'],[-1,'                    this.displayClass.replace(\/ \/g, \&quot;\&quot;) + \&quot;Active\&quot;'],[-1,'                );'],[-1,'            }'],[0,'            this.events.triggerEvent(\&quot;deactivate\&quot;);'],[0,'            return true;'],[-1,'        }'],[0,'        return false;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Control.TYPE_BUTTON'],[-1,' *\/'],[1,'OpenLayers.Control.TYPE_BUTTON = 1;'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Control.TYPE_TOGGLE'],[-1,' *\/'],[1,'OpenLayers.Control.TYPE_TOGGLE = 2;'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Control.TYPE_TOOL'],[-1,' *\/'],[1,'OpenLayers.Control.TYPE_TOOL   = 3;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Events\/buttonclick.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Events.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Events.buttonclick'],[-1,' * Extension event type for handling buttons on top of a dom element. This'],[-1,' *     event type fires \&quot;buttonclick\&quot; on its &lt;target&gt; when a button was'],[-1,' *     clicked. Buttons are detected by the \&quot;olButton\&quot; class.'],[-1,' *'],[-1,' * This event type makes sure that button clicks do not interfere with other'],[-1,' *     events that are registered on the same &lt;element&gt;.'],[-1,' *'],[-1,' * Event types provided by this extension:'],[-1,' * - *buttonclick* Triggered when a button is clicked. Listeners receive an'],[-1,' *     object with a *buttonElement* property referencing the dom element of'],[-1,' *     the clicked button, and an *buttonXY* property with the click position'],[-1,' *     relative to the button.'],[-1,' *\/'],[1,'OpenLayers.Events.buttonclick = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: target'],[-1,'     * {&lt;OpenLayers.Events&gt;} The events instance that the buttonclick event will'],[-1,'     * be triggered on.'],[-1,'     *\/'],[-1,'    target: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: events'],[-1,'     * {Array} Events to observe and conditionally stop from propagating when'],[-1,'     *     an element with the olButton class (or its olAlphaImg child) is'],[-1,'     *     clicked.'],[-1,'     *\/'],[-1,'    events: ['],[-1,'        \'mousedown\', \'mouseup\', \'click\', \'dblclick\','],[-1,'        \'touchstart\', \'touchmove\', \'touchend\', \'keydown\''],[-1,'    ],'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: startRegEx'],[-1,'     * {RegExp} Regular expression to test Event.type for events that start'],[-1,'     *     a buttonclick sequence.'],[-1,'     *\/'],[-1,'    startRegEx: \/^mousedown|touchstart$\/,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: cancelRegEx'],[-1,'     * {RegExp} Regular expression to test Event.type for events that cancel'],[-1,'     *     a buttonclick sequence.'],[-1,'     *\/'],[-1,'    cancelRegEx: \/^touchmove$\/,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: completeRegEx'],[-1,'     * {RegExp} Regular expression to test Event.type for events that complete'],[-1,'     *     a buttonclick sequence.'],[-1,'     *\/'],[-1,'    completeRegEx: \/^mouseup|touchend$\/,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: startEvt'],[-1,'     * {Event} The event that started the click sequence'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Events.buttonclick'],[-1,'     * Construct a buttonclick event type. Applications are not supposed to'],[-1,'     *     create instances of this class - they are created on demand by'],[-1,'     *     &lt;OpenLayers.Events&gt; instances.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * target - {&lt;OpenLayers.Events&gt;} The events instance that the buttonclick'],[-1,'     *     event will be triggered on.'],[-1,'     *\/'],[-1,'    initialize: function(target) {'],[0,'        this.target = target;'],[0,'        for (var i=this.events.length-1; i&gt;=0; --i) {'],[0,'            this.target.register(this.events[i], this, this.buttonClick, {'],[-1,'                extension: true'],[-1,'            });'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        for (var i=this.events.length-1; i&gt;=0; --i) {'],[0,'            this.target.unregister(this.events[i], this, this.buttonClick);'],[-1,'        }'],[0,'        delete this.target;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getPressedButton'],[-1,'     * Get the pressed button, if any. Returns undefined if no button'],[-1,'     * was pressed.'],[-1,'     *'],[-1,'     * Arguments:'],[-1,'     * element - {DOMElement} The event target.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The button element, or undefined.'],[-1,'     *\/'],[-1,'    getPressedButton: function(element) {'],[0,'        var depth = 3, \/\/ limit the search depth'],[-1,'            button;'],[0,'        do {'],[0,'            if(OpenLayers.Element.hasClass(element, \&quot;olButton\&quot;)) {'],[-1,'                \/\/ hit!'],[0,'                button = element;'],[0,'                break;'],[-1,'            }'],[0,'            element = element.parentNode;'],[-1,'        } while(--depth &gt; 0 &amp;&amp; element);'],[0,'        return button;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: ignore'],[-1,'     * Check for event target elements that should be ignored by OpenLayers.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * element - {DOMElement} The event target.'],[-1,'     *\/'],[-1,'    ignore: function(element) {'],[0,'        var depth = 3,'],[-1,'            ignore = false;'],[0,'        do {'],[0,'            if (element.nodeName.toLowerCase() === \'a\') {'],[0,'                ignore = true;'],[0,'                break;'],[-1,'            }'],[0,'            element = element.parentNode;'],[-1,'        } while (--depth &gt; 0 &amp;&amp; element);'],[0,'        return ignore;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: buttonClick'],[-1,'     * Check if a button was clicked, and fire the buttonclick event'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *\/'],[-1,'    buttonClick: function(evt) {'],[0,'        var propagate = true,'],[-1,'            element = OpenLayers.Event.element(evt);'],[0,'        if (element &amp;&amp; (OpenLayers.Event.isLeftClick(evt) || !~evt.type.indexOf(\&quot;mouse\&quot;))) {'],[-1,'            \/\/ was a button pressed?'],[0,'            var button = this.getPressedButton(element);'],[0,'            if (button) {'],[0,'                if (evt.type === \&quot;keydown\&quot;) {'],[0,'                    switch (evt.keyCode) {'],[-1,'                    case OpenLayers.Event.KEY_RETURN:'],[-1,'                    case OpenLayers.Event.KEY_SPACE:'],[0,'                        this.target.triggerEvent(\&quot;buttonclick\&quot;, {'],[-1,'                            buttonElement: button'],[-1,'                        });'],[0,'                        OpenLayers.Event.stop(evt);'],[0,'                        propagate = false;'],[0,'                        break;'],[-1,'                    }'],[0,'                } else if (this.startEvt) {'],[0,'                    if (this.completeRegEx.test(evt.type)) {'],[0,'                        var pos = OpenLayers.Util.pagePosition(button);'],[0,'                        var viewportElement = OpenLayers.Util.getViewportElement();'],[0,'                        var scrollTop = window.pageYOffset || viewportElement.scrollTop;'],[0,'                        var scrollLeft = window.pageXOffset || viewportElement.scrollLeft;'],[0,'                        pos[0] = pos[0] - scrollLeft;'],[0,'                        pos[1] = pos[1] - scrollTop;'],[-1,'                        '],[0,'                        this.target.triggerEvent(\&quot;buttonclick\&quot;, {'],[-1,'                            buttonElement: button,'],[-1,'                            buttonXY: {'],[-1,'                                x: this.startEvt.clientX - pos[0],'],[-1,'                                y: this.startEvt.clientY - pos[1]'],[-1,'                            }'],[-1,'                        });'],[-1,'                    }'],[0,'                    if (this.cancelRegEx.test(evt.type)) {'],[0,'                        delete this.startEvt;'],[-1,'                    }'],[0,'                    OpenLayers.Event.stop(evt);'],[0,'                    propagate = false;'],[-1,'                }'],[0,'                if (this.startRegEx.test(evt.type)) {'],[0,'                    this.startEvt = evt;'],[0,'                    OpenLayers.Event.stop(evt);'],[0,'                    propagate = false;'],[-1,'                }'],[-1,'            } else {'],[0,'                propagate = !this.ignore(OpenLayers.Event.element(evt));'],[0,'                delete this.startEvt;'],[-1,'            }'],[-1,'        }'],[0,'        return propagate;'],[-1,'    }'],[-1,'    '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Util\/vendorPrefix.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/SingleFile.js'],[-1,' *\/'],[-1,''],[1,'OpenLayers.Util = OpenLayers.Util || {};'],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Util.vendorPrefix'],[-1,' * A collection of utility functions to detect vendor prefixed features'],[-1,' *\/'],[1,'OpenLayers.Util.vendorPrefix = (function() {'],[1,'    \&quot;use strict\&quot;;'],[-1,'    '],[1,'    var VENDOR_PREFIXES = [\&quot;\&quot;, \&quot;O\&quot;, \&quot;ms\&quot;, \&quot;Moz\&quot;, \&quot;Webkit\&quot;],'],[-1,'        divStyle = document.createElement(\&quot;div\&quot;).style,'],[-1,'        cssCache = {},'],[-1,'        jsCache = {};'],[-1,''],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: domToCss'],[-1,'     * Converts a upper camel case DOM style property name to a CSS property'],[-1,'     *      i.e. transformOrigin -&gt; transform-origin'],[-1,'     *      or   WebkitTransformOrigin -&gt; -webkit-transform-origin'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * prefixedDom - {String} The property to convert'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The CSS property'],[-1,'     *\/'],[1,'    function domToCss(prefixedDom) {'],[0,'        if (!prefixedDom) { return null; }'],[0,'        return prefixedDom.'],[0,'            replace(\/([A-Z])\/g, function(c) { return \&quot;-\&quot; + c.toLowerCase(); }).'],[-1,'            replace(\/^ms-\/, \&quot;-ms-\&quot;);'],[-1,'    }'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: css'],[-1,'     * Detect which property is used for a CSS property'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * property - {String} The standard (unprefixed) CSS property name'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The standard CSS property, prefixed property or null if not'],[-1,'     *          supported'],[-1,'     *\/'],[1,'    function css(property) {'],[0,'        if (cssCache[property] === undefined) {'],[0,'            var domProperty = property.'],[0,'                replace(\/(-[\\s\\S])\/g, function(c) { return c.charAt(1).toUpperCase(); });'],[0,'            var prefixedDom = style(domProperty);'],[0,'            cssCache[property] = domToCss(prefixedDom);'],[-1,'        }'],[0,'        return cssCache[property];'],[-1,'    }'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: js'],[-1,'     * Detect which property is used for a JS property\/method'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object} The object to test on'],[-1,'     * property - {String} The standard (unprefixed) JS property name'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The standard JS property, prefixed property or null if not'],[-1,'     *          supported'],[-1,'     *\/'],[1,'    function js(obj, property) {'],[1,'        if (jsCache[property] === undefined) {'],[1,'            var tmpProp,'],[-1,'                i = 0,'],[-1,'                l = VENDOR_PREFIXES.length,'],[-1,'                prefix,'],[-1,'                isStyleObj = (typeof obj.cssText !== \&quot;undefined\&quot;);'],[-1,''],[1,'            jsCache[property] = null;'],[1,'            for(; i&lt;l; i++) {'],[5,'                prefix = VENDOR_PREFIXES[i];'],[5,'                if(prefix) {'],[4,'                    if (!isStyleObj) {'],[-1,'                        \/\/ js prefix should be lower-case, while style'],[-1,'                        \/\/ properties have upper case on first character'],[4,'                        prefix = prefix.toLowerCase();'],[-1,'                    }'],[4,'                    tmpProp = prefix + property.charAt(0).toUpperCase() + property.slice(1);'],[-1,'                } else {'],[1,'                    tmpProp = property;'],[-1,'                }'],[-1,''],[5,'                if(obj[tmpProp] !== undefined) {'],[0,'                    jsCache[property] = tmpProp;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[1,'        return jsCache[property];'],[-1,'    }'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: style'],[-1,'     * Detect which property is used for a DOM style property'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * property - {String} The standard (unprefixed) style property name'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The standard style property, prefixed property or null if not'],[-1,'     *          supported'],[-1,'     *\/'],[1,'    function style(property) {'],[0,'        return js(divStyle, property);'],[-1,'    }'],[-1,'    '],[1,'    return {'],[-1,'        css:      css,'],[-1,'        js:       js,'],[-1,'        style:    style,'],[-1,'        '],[-1,'        \/\/ used for testing'],[-1,'        cssCache:       cssCache,'],[-1,'        jsCache:        jsCache'],[-1,'    };'],[-1,'}());'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Animation.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/SingleFile.js'],[-1,' * @requires OpenLayers\/Util\/vendorPrefix.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Animation'],[-1,' * A collection of utility functions for executing methods that repaint a '],[-1,' *     portion of the browser window.  These methods take advantage of the'],[-1,' *     browser\'s scheduled repaints where requestAnimationFrame is available.'],[-1,' *\/'],[1,'OpenLayers.Animation = (function(window) {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: isNative'],[-1,'     * {Boolean} true if a native requestAnimationFrame function is available'],[-1,'     *\/'],[1,'    var requestAnimationFrame = OpenLayers.Util.vendorPrefix.js(window, \&quot;requestAnimationFrame\&quot;);'],[1,'    var isNative = !!(requestAnimationFrame);'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: requestFrame'],[-1,'     * Schedule a function to be called at the next available animation frame.'],[-1,'     *     Uses the native method where available.  Where requestAnimationFrame is'],[-1,'     *     not available, setTimeout will be called with a 16ms delay.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * callback - {Function} The function to be called at the next animation frame.'],[-1,'     * element - {DOMElement} Optional element that visually bounds the animation.'],[-1,'     *\/'],[1,'    var requestFrame = (function() {'],[1,'        var request = window[requestAnimationFrame] ||'],[-1,'            function(callback, element) {'],[0,'                window.setTimeout(callback, 16);'],[-1,'            };'],[-1,'        \/\/ bind to window to avoid illegal invocation of native function'],[1,'        return function(callback, element) {'],[0,'            request.apply(window, [callback, element]);'],[-1,'        };'],[-1,'    })();'],[-1,'    '],[-1,'    \/\/ private variables for animation loops'],[1,'    var counter = 0;'],[1,'    var loops = {};'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: start'],[-1,'     * Executes a method with &lt;requestFrame&gt; in series for some '],[-1,'     *     duration.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * callback - {Function} The function to be called at the next animation frame.'],[-1,'     * duration - {Number} Optional duration for the loop.  If not provided, the'],[-1,'     *     animation loop will execute indefinitely.'],[-1,'     * element - {DOMElement} Optional element that visually bounds the animation.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number} Identifier for the animation loop.  Used to stop animations with'],[-1,'     *     &lt;stop&gt;.'],[-1,'     *\/'],[1,'    function start(callback, duration, element) {'],[0,'        duration = duration &gt; 0 ? duration : Number.POSITIVE_INFINITY;'],[0,'        var id = ++counter;'],[0,'        var start = +new Date;'],[0,'        loops[id] = function() {'],[0,'            if (loops[id] &amp;&amp; +new Date - start &lt;= duration) {'],[0,'                callback();'],[0,'                if (loops[id]) {'],[0,'                    requestFrame(loops[id], element);'],[-1,'                }'],[-1,'            } else {'],[0,'                delete loops[id];'],[-1,'            }'],[-1,'        };'],[0,'        requestFrame(loops[id], element);'],[0,'        return id;'],[-1,'    }'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: stop'],[-1,'     * Terminates an animation loop started with &lt;start&gt;.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * id - {Number} Identifier returned from &lt;start&gt;.'],[-1,'     *\/'],[1,'    function stop(id) {'],[0,'        delete loops[id];'],[-1,'    }'],[-1,'    '],[1,'    return {'],[-1,'        isNative: isNative,'],[-1,'        requestFrame: requestFrame,'],[-1,'        start: start,'],[-1,'        stop: stop'],[-1,'    };'],[-1,'    '],[-1,'})(window);'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Tween.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Animation.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Tween'],[-1,' *\/'],[1,'OpenLayers.Tween = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: easing'],[-1,'     * {&lt;OpenLayers.Easing&gt;(Function)} Easing equation used for the animation'],[-1,'     *     Defaultly set to OpenLayers.Easing.Expo.easeOut'],[-1,'     *\/'],[-1,'    easing: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: begin'],[-1,'     * {Object} Values to start the animation with'],[-1,'     *\/'],[-1,'    begin: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: finish'],[-1,'     * {Object} Values to finish the animation with'],[-1,'     *\/'],[-1,'    finish: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: duration'],[-1,'     * {int} duration of the tween (number of steps)'],[-1,'     *\/'],[-1,'    duration: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: callbacks'],[-1,'     * {Object} An object with start, eachStep and done properties whose values'],[-1,'     *     are functions to be call during the animation. They are passed the'],[-1,'     *     current computed value as argument.'],[-1,'     *\/'],[-1,'    callbacks: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: time'],[-1,'     * {int} Step counter'],[-1,'     *\/'],[-1,'    time: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: minFrameRate'],[-1,'     * {Number} The minimum framerate for animations in frames per second. After'],[-1,'     * each step, the time spent in the animation is compared to the calculated'],[-1,'     * time at this frame rate. If the animation runs longer than the calculated'],[-1,'     * time, the next step is skipped. Default is 30.'],[-1,'     *\/'],[-1,'    minFrameRate: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: startTime'],[-1,'     * {Number} The timestamp of the first execution step. Used for skipping'],[-1,'     * frames'],[-1,'     *\/'],[-1,'    startTime: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: animationId'],[-1,'     * {int} Loop id returned by OpenLayers.Animation.start'],[-1,'     *\/'],[-1,'    animationId: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: playing'],[-1,'     * {Boolean} Tells if the easing is currently playing'],[-1,'     *\/'],[-1,'    playing: false,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Tween'],[-1,'     * Creates a Tween.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * easing - {&lt;OpenLayers.Easing&gt;(Function)} easing function method to use'],[-1,'     *\/ '],[-1,'    initialize: function(easing) {'],[0,'        this.easing = (easing) ? easing : OpenLayers.Easing.Expo.easeOut;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: start'],[-1,'     * Plays the Tween, and calls the callback method on each step'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * begin - {Object} values to start the animation with'],[-1,'     * finish - {Object} values to finish the animation with'],[-1,'     * duration - {int} duration of the tween (number of steps)'],[-1,'     * options - {Object} hash of options (callbacks (start, eachStep, done),'],[-1,'     *     minFrameRate)'],[-1,'     *\/'],[-1,'    start: function(begin, finish, duration, options) {'],[0,'        this.playing = true;'],[0,'        this.begin = begin;'],[0,'        this.finish = finish;'],[0,'        this.duration = duration;'],[0,'        this.callbacks = options.callbacks;'],[0,'        this.minFrameRate = options.minFrameRate || 30;'],[0,'        this.time = 0;'],[0,'        this.startTime = new Date().getTime();'],[0,'        OpenLayers.Animation.stop(this.animationId);'],[0,'        this.animationId = null;'],[0,'        if (this.callbacks &amp;&amp; this.callbacks.start) {'],[0,'            this.callbacks.start.call(this, this.begin);'],[-1,'        }'],[0,'        this.animationId = OpenLayers.Animation.start('],[-1,'            OpenLayers.Function.bind(this.play, this)'],[-1,'        );'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: stop'],[-1,'     * Stops the Tween, and calls the done callback'],[-1,'     *     Doesn\'t do anything if animation is already finished'],[-1,'     *\/'],[-1,'    stop: function() {'],[0,'        if (!this.playing) {'],[0,'            return;'],[-1,'        }'],[-1,'        '],[0,'        if (this.callbacks &amp;&amp; this.callbacks.done) {'],[0,'            this.callbacks.done.call(this, this.finish);'],[-1,'        }'],[0,'        OpenLayers.Animation.stop(this.animationId);'],[0,'        this.animationId = null;'],[0,'        this.playing = false;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: play'],[-1,'     * Calls the appropriate easing method'],[-1,'     *\/'],[-1,'    play: function() {'],[0,'        var value = {};'],[0,'        for (var i in this.begin) {'],[0,'            var b = this.begin[i];'],[0,'            var f = this.finish[i];'],[0,'            if (b == null || f == null || isNaN(b) || isNaN(f)) {'],[0,'                throw new TypeError(\'invalid value for Tween\');'],[-1,'            }'],[-1,''],[0,'            var c = f - b;'],[0,'            value[i] = this.easing.apply(this, [this.time, b, c, this.duration]);'],[-1,'        }'],[0,'        this.time++;'],[-1,'        '],[0,'        if (this.callbacks &amp;&amp; this.callbacks.eachStep) {'],[-1,'            \/\/ skip frames if frame rate drops below threshold'],[0,'            if ((new Date().getTime() - this.startTime) \/ this.time &lt;= 1000 \/ this.minFrameRate) {'],[0,'                this.callbacks.eachStep.call(this, value);'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        if (this.time &gt; this.duration) {'],[0,'            this.stop();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Create empty functions for all easing methods.'],[-1,'     *\/'],[-1,'    CLASS_NAME: \&quot;OpenLayers.Tween\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Easing'],[-1,' * '],[-1,' * Credits:'],[-1,' *      Easing Equations by Robert Penner, &lt;http:\/\/www.robertpenner.com\/easing\/&gt;'],[-1,' *\/'],[1,'OpenLayers.Easing = {'],[-1,'    \/**'],[-1,'     * Create empty functions for all easing methods.'],[-1,'     *\/'],[-1,'    CLASS_NAME: \&quot;OpenLayers.Easing\&quot;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Easing.Linear'],[-1,' *\/'],[1,'OpenLayers.Easing.Linear = {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: easeIn'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * t - {Float} time'],[-1,'     * b - {Float} beginning position'],[-1,'     * c - {Float} total change'],[-1,'     * d - {Float} duration of the transition'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    easeIn: function(t, b, c, d) {'],[0,'        return c*t\/d + b;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: easeOut'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * t - {Float} time'],[-1,'     * b - {Float} beginning position'],[-1,'     * c - {Float} total change'],[-1,'     * d - {Float} duration of the transition'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    easeOut: function(t, b, c, d) {'],[0,'        return c*t\/d + b;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: easeInOut'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * t - {Float} time'],[-1,'     * b - {Float} beginning position'],[-1,'     * c - {Float} total change'],[-1,'     * d - {Float} duration of the transition'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    easeInOut: function(t, b, c, d) {'],[0,'        return c*t\/d + b;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Easing.Linear\&quot;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Easing.Expo'],[-1,' *\/'],[1,'OpenLayers.Easing.Expo = {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: easeIn'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * t - {Float} time'],[-1,'     * b - {Float} beginning position'],[-1,'     * c - {Float} total change'],[-1,'     * d - {Float} duration of the transition'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    easeIn: function(t, b, c, d) {'],[0,'        return (t==0) ? b : c * Math.pow(2, 10 * (t\/d - 1)) + b;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: easeOut'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * t - {Float} time'],[-1,'     * b - {Float} beginning position'],[-1,'     * c - {Float} total change'],[-1,'     * d - {Float} duration of the transition'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    easeOut: function(t, b, c, d) {'],[0,'        return (t==d) ? b+c : c * (-Math.pow(2, -10 * t\/d) + 1) + b;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: easeInOut'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * t - {Float} time'],[-1,'     * b - {Float} beginning position'],[-1,'     * c - {Float} total change'],[-1,'     * d - {Float} duration of the transition'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    easeInOut: function(t, b, c, d) {'],[0,'        if (t==0) return b;'],[0,'        if (t==d) return b+c;'],[0,'        if ((t\/=d\/2) &lt; 1) return c\/2 * Math.pow(2, 10 * (t - 1)) + b;'],[0,'        return c\/2 * (-Math.pow(2, -10 * --t) + 2) + b;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Easing.Expo\&quot;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.Easing.Quad'],[-1,' *\/'],[1,'OpenLayers.Easing.Quad = {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: easeIn'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * t - {Float} time'],[-1,'     * b - {Float} beginning position'],[-1,'     * c - {Float} total change'],[-1,'     * d - {Float} duration of the transition'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    easeIn: function(t, b, c, d) {'],[0,'        return c*(t\/=d)*t + b;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: easeOut'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * t - {Float} time'],[-1,'     * b - {Float} beginning position'],[-1,'     * c - {Float} total change'],[-1,'     * d - {Float} duration of the transition'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    easeOut: function(t, b, c, d) {'],[0,'        return -c *(t\/=d)*(t-2) + b;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: easeInOut'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * t - {Float} time'],[-1,'     * b - {Float} beginning position'],[-1,'     * c - {Float} total change'],[-1,'     * d - {Float} duration of the transition'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    easeInOut: function(t, b, c, d) {'],[0,'        if ((t\/=d\/2) &lt; 1) return c\/2*t*t + b;'],[0,'        return -c\/2 * ((--t)*(t-2) - 1) + b;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Easing.Quad\&quot;'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Map.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' * @requires OpenLayers\/Util\/vendorPrefix.js'],[-1,' * @requires OpenLayers\/Events.js'],[-1,' * @requires OpenLayers\/Tween.js'],[-1,' * @requires OpenLayers\/Projection.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Map'],[-1,' * Instances of OpenLayers.Map are interactive maps embedded in a web page.'],[-1,' * Create a new map with the &lt;OpenLayers.Map&gt; constructor.'],[-1,' * '],[-1,' * On their own maps do not provide much functionality.  To extend a map'],[-1,' * it\'s necessary to add controls (&lt;OpenLayers.Control&gt;) and '],[-1,' * layers (&lt;OpenLayers.Layer&gt;) to the map. '],[-1,' *\/'],[1,'OpenLayers.Map = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: Z_INDEX_BASE'],[-1,'     * {Object} Base z-indexes for different classes of thing '],[-1,'     *\/'],[-1,'    Z_INDEX_BASE: {'],[-1,'        BaseLayer: 100,'],[-1,'        Overlay: 325,'],[-1,'        Feature: 725,'],[-1,'        Popup: 750,'],[-1,'        Control: 1000'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;}'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * map.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Listeners will be called with a reference to an event object.  The'],[-1,'     *     properties of this event depends on exactly what happened.'],[-1,'     *'],[-1,'     * All event objects have at least the following properties:'],[-1,'     * object - {Object} A reference to map.events.object.'],[-1,'     * element - {DOMElement} A reference to map.events.element.'],[-1,'     *'],[-1,'     * Browser events have the following additional properties:'],[-1,'     * xy - {&lt;OpenLayers.Pixel&gt;} The pixel location of the event (relative'],[-1,'     *     to the the map viewport).'],[-1,'     *'],[-1,'     * Supported map event types:'],[-1,'     * preaddlayer - triggered before a layer has been added.  The event'],[-1,'     *     object will include a *layer* property that references the layer  '],[-1,'     *     to be added. When a listener returns \&quot;false\&quot; the adding will be '],[-1,'     *     aborted.'],[-1,'     * addlayer - triggered after a layer has been added.  The event object'],[-1,'     *     will include a *layer* property that references the added layer.'],[-1,'     * preremovelayer - triggered before a layer has been removed. The event'],[-1,'     *     object will include a *layer* property that references the layer  '],[-1,'     *     to be removed. When a listener returns \&quot;false\&quot; the removal will be '],[-1,'     *     aborted.'],[-1,'     * removelayer - triggered after a layer has been removed.  The event'],[-1,'     *     object will include a *layer* property that references the removed'],[-1,'     *     layer.'],[-1,'     * changelayer - triggered after a layer name change, order change,'],[-1,'     *     opacity change, params change, visibility change (due to resolution'],[-1,'     *     thresholds) or attribution change (due to extent change). Listeners'],[-1,'     *     will receive an event object with *layer* and *property* properties.'],[-1,'     *     The *layer* property will be a reference to the changed layer. The'],[-1,'     *     *property* property will be a key to the changed property (name,'],[-1,'     *     order, opacity, params, visibility or attribution).'],[-1,'     * movestart - triggered after the start of a drag, pan, or zoom. The event'],[-1,'     *     object may include a *zoomChanged* property that tells whether the'],[-1,'     *     zoom has changed.'],[-1,'     * move - triggered after each drag, pan, or zoom'],[-1,'     * moveend - triggered after a drag, pan, or zoom completes'],[-1,'     * zoomend - triggered after a zoom completes'],[-1,'     * mouseover - triggered after mouseover the map'],[-1,'     * mouseout - triggered after mouseout the map'],[-1,'     * mousemove - triggered after mousemove the map'],[-1,'     * changebaselayer - triggered after the base layer changes'],[-1,'     * updatesize - triggered after the &lt;updateSize&gt; method was executed'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: id'],[-1,'     * {String} Unique identifier for the map'],[-1,'     *\/'],[-1,'    id: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: fractionalZoom'],[-1,'     * {Boolean} For a base layer that supports it, allow the map resolution'],[-1,'     *     to be set to a value between one of the values in the resolutions'],[-1,'     *     array.  Default is false.'],[-1,'     *'],[-1,'     * When fractionalZoom is set to true, it is possible to zoom to'],[-1,'     *     an arbitrary extent.  This requires a base layer from a source'],[-1,'     *     that supports requests for arbitrary extents (i.e. not cached'],[-1,'     *     tiles on a regular lattice).  This means that fractionalZoom'],[-1,'     *     will not work with commercial layers (Google, Yahoo, VE), layers'],[-1,'     *     using TileCache, or any other pre-cached data sources.'],[-1,'     *'],[-1,'     * If you are using fractionalZoom, then you should also use'],[-1,'     *     &lt;getResolutionForZoom&gt; instead of layer.resolutions[zoom] as the'],[-1,'     *     former works for non-integer zoom levels.'],[-1,'     *\/'],[-1,'    fractionalZoom: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} An events object that handles all '],[-1,'     *                       events on the map'],[-1,'     *\/'],[-1,'    events: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: allOverlays'],[-1,'     * {Boolean} Allow the map to function with \&quot;overlays\&quot; only.  Defaults to'],[-1,'     *     false.  If true, the lowest layer in the draw order will act as'],[-1,'     *     the base layer.  In addition, if set to true, all layers will'],[-1,'     *     have isBaseLayer set to false when they are added to the map.'],[-1,'     *'],[-1,'     * Note:'],[-1,'     * If you set map.allOverlays to true, then you *cannot* use'],[-1,'     *     map.setBaseLayer or layer.setIsBaseLayer.  With allOverlays true,'],[-1,'     *     the lowest layer in the draw layer is the base layer.  So, to change'],[-1,'     *     the base layer, use &lt;setLayerIndex&gt; or &lt;raiseLayer&gt; to set the layer'],[-1,'     *     index to 0.'],[-1,'     *\/'],[-1,'    allOverlays: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: div'],[-1,'     * {DOMElement|String} The element that contains the map (or an id for'],[-1,'     *     that element).  If the &lt;OpenLayers.Map&gt; constructor is called'],[-1,'     *     with two arguments, this should be provided as the first argument.'],[-1,'     *     Alternatively, the map constructor can be called with the options'],[-1,'     *     object as the only argument.  In this case (one argument), a'],[-1,'     *     div property may or may not be provided.  If the div property'],[-1,'     *     is not provided, the map can be rendered to a container later'],[-1,'     *     using the &lt;render&gt; method.'],[-1,'     *     '],[-1,'     * Note:'],[-1,'     * If you are calling &lt;render&gt; after map construction, do not use'],[-1,'     *     &lt;maxResolution&gt;  auto.  Instead, divide your &lt;maxExtent&gt; by your'],[-1,'     *     maximum expected dimension.'],[-1,'     *\/'],[-1,'    div: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: dragging'],[-1,'     * {Boolean} The map is currently being dragged.'],[-1,'     *\/'],[-1,'    dragging: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: size'],[-1,'     * {&lt;OpenLayers.Size&gt;} Size of the main div (this.div)'],[-1,'     *\/'],[-1,'    size: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: viewPortDiv'],[-1,'     * {HTMLDivElement} The element that represents the map viewport'],[-1,'     *\/'],[-1,'    viewPortDiv: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layerContainerOrigin'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} The lonlat at which the later container was'],[-1,'     *                       re-initialized (on-zoom)'],[-1,'     *\/'],[-1,'    layerContainerOrigin: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layerContainerDiv'],[-1,'     * {HTMLDivElement} The element that contains the layers.'],[-1,'     *\/'],[-1,'    layerContainerDiv: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layers'],[-1,'     * {Array(&lt;OpenLayers.Layer&gt;)} Ordered list of layers in the map'],[-1,'     *\/'],[-1,'    layers: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: controls'],[-1,'     * {Array(&lt;OpenLayers.Control&gt;)} List of controls associated with the map.'],[-1,'     *'],[-1,'     * If not provided in the map options at construction, the map will'],[-1,'     *     by default be given the following controls if present in the build:'],[-1,'     *  - &lt;OpenLayers.Control.Navigation&gt; or &lt;OpenLayers.Control.TouchNavigation&gt;'],[-1,'     *  - &lt;OpenLayers.Control.Zoom&gt; or &lt;OpenLayers.Control.PanZoom&gt;'],[-1,'     *  - &lt;OpenLayers.Control.ArgParser&gt;'],[-1,'     *  - &lt;OpenLayers.Control.Attribution&gt;'],[-1,'     *\/'],[-1,'    controls: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: popups'],[-1,'     * {Array(&lt;OpenLayers.Popup&gt;)} List of popups associated with the map'],[-1,'     *\/'],[-1,'    popups: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: baseLayer'],[-1,'     * {&lt;OpenLayers.Layer&gt;} The currently selected base layer.  This determines'],[-1,'     * min\/max zoom level, projection, etc.'],[-1,'     *\/'],[-1,'    baseLayer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: center'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} The current center of the map'],[-1,'     *\/'],[-1,'    center: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: resolution'],[-1,'     * {Float} The resolution of the map.'],[-1,'     *\/'],[-1,'    resolution: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: zoom'],[-1,'     * {Integer} The current zoom level of the map'],[-1,'     *\/'],[-1,'    zoom: 0,    '],[-1,''],[-1,'    \/**'],[-1,'     * Property: panRatio'],[-1,'     * {Float} The ratio of the current extent within'],[-1,'     *         which panning will tween.'],[-1,'     *\/'],[-1,'    panRatio: 1.5,    '],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: options'],[-1,'     * {Object} The options object passed to the class constructor. Read-only.'],[-1,'     *\/'],[-1,'    options: null,'],[-1,''],[-1,'  \/\/ Options'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: tileSize'],[-1,'     * {&lt;OpenLayers.Size&gt;} Set in the map options to override the default tile'],[-1,'     *                     size for this map.'],[-1,'     *\/'],[-1,'    tileSize: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: projection'],[-1,'     * {String} Set in the map options to specify the default projection '],[-1,'     *          for layers added to this map. When using a projection other than EPSG:4326'],[-1,'     *          (CRS:84, Geographic) or EPSG:3857 (EPSG:900913, Web Mercator),'],[-1,'     *          also set maxExtent, maxResolution or resolutions.  Default is \&quot;EPSG:4326\&quot;.'],[-1,'     *          Note that the projection of the map is usually determined'],[-1,'     *          by that of the current baseLayer (see &lt;baseLayer&gt; and &lt;getProjectionObject&gt;).'],[-1,'     *\/'],[-1,'    projection: \&quot;EPSG:4326\&quot;,    '],[-1,'        '],[-1,'    \/**'],[-1,'     * APIProperty: units'],[-1,'     * {String} The map units.  Possible values are \'degrees\' (or \'dd\'), \'m\', '],[-1,'     *     \'ft\', \'km\', \'mi\', \'inches\'.  Normally taken from the projection.'],[-1,'     *     Only required if both map and layers do not define a projection,'],[-1,'     *     or if they define a projection which does not define units'],[-1,'     *\/'],[-1,'    units: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: resolutions'],[-1,'     * {Array(Float)} A list of map resolutions (map units per pixel) in '],[-1,'     *     descending order.  If this is not set in the layer constructor, it '],[-1,'     *     will be set based on other resolution related properties '],[-1,'     *     (maxExtent, maxResolution, maxScale, etc.).'],[-1,'     *\/'],[-1,'    resolutions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxResolution'],[-1,'     * {Float} Required if you are not displaying the whole world on a tile'],[-1,'     * with the size specified in &lt;tileSize&gt;.'],[-1,'     *\/'],[-1,'    maxResolution: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: minResolution'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    minResolution: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxScale'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    maxScale: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: minScale'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    minScale: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxExtent'],[-1,'     * {&lt;OpenLayers.Bounds&gt;|Array} If provided as an array, the array'],[-1,'     *     should consist of four values (left, bottom, right, top).'],[-1,'     *     The maximum extent for the map.'],[-1,'     *     Default depends on projection; if this is one of those defined in OpenLayers.Projection.defaults'],[-1,'     *     (EPSG:4326 or web mercator), maxExtent will be set to the value defined there;'],[-1,'     *     else, defaults to null.'],[-1,'     *     To restrict user panning and zooming of the map, use &lt;restrictedExtent&gt; instead.'],[-1,'     *     The value for &lt;maxExtent&gt; will change calculations for tile URLs.'],[-1,'     *\/'],[-1,'    maxExtent: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: minExtent'],[-1,'     * {&lt;OpenLayers.Bounds&gt;|Array} If provided as an array, the array'],[-1,'     *     should consist of four values (left, bottom, right, top).'],[-1,'     *     The minimum extent for the map.  Defaults to null.'],[-1,'     *\/'],[-1,'    minExtent: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: restrictedExtent'],[-1,'     * {&lt;OpenLayers.Bounds&gt;|Array} If provided as an array, the array'],[-1,'     *     should consist of four values (left, bottom, right, top).'],[-1,'     *     Limit map navigation to this extent where possible.'],[-1,'     *     If a non-null restrictedExtent is set, panning will be restricted'],[-1,'     *     to the given bounds.  In addition, zooming to a resolution that'],[-1,'     *     displays more than the restricted extent will center the map'],[-1,'     *     on the restricted extent.  If you wish to limit the zoom level'],[-1,'     *     or resolution, use maxResolution.'],[-1,'     *\/'],[-1,'    restrictedExtent: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: numZoomLevels'],[-1,'     * {Integer} Number of zoom levels for the map.  Defaults to 16.  Set a'],[-1,'     *           different value in the map options if needed.'],[-1,'     *\/'],[-1,'    numZoomLevels: 16,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: theme'],[-1,'     * {String} Relative path to a CSS file from which to load theme styles.'],[-1,'     *          Specify null in the map options (e.g. {theme: null}) if you '],[-1,'     *          want to get cascading style declarations - by putting links to '],[-1,'     *          stylesheets or style declarations directly in your page.'],[-1,'     *\/'],[-1,'    theme: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: displayProjection'],[-1,'     * {&lt;OpenLayers.Projection&gt;} Requires proj4js support for projections other'],[-1,'     *     than EPSG:4326 or EPSG:900913\/EPSG:3857. Projection used by'],[-1,'     *     several controls to display data to user. If this property is set,'],[-1,'     *     it will be set on any control which has a null displayProjection'],[-1,'     *     property at the time the control is added to the map. '],[-1,'     *\/'],[-1,'    displayProjection: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: tileManager'],[-1,'     * {&lt;OpenLayers.TileManager&gt;} If configured at construction time, the map'],[-1,'     * will use the TileManager to queue image requests and to cache tile image'],[-1,'     * elements. Note: make sure that OpenLayers\/TileManager.js is included in'],[-1,'     * your build profile.'],[-1,'     *\/'],[-1,'    tileManager: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: fallThrough'],[-1,'     * {Boolean} Should OpenLayers allow events on the map to fall through to'],[-1,'     *           other elements on the page, or should it swallow them? (#457)'],[-1,'     *           Default is to swallow.'],[-1,'     *\/'],[-1,'    fallThrough: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: autoUpdateSize'],[-1,'     * {Boolean} Should OpenLayers automatically update the size of the map'],[-1,'     * when the resize event is fired. Default is true.'],[-1,'     *\/'],[-1,'    autoUpdateSize: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: eventListeners'],[-1,'     * {Object} If set as an option at construction, the eventListeners'],[-1,'     *     object will be registered with &lt;OpenLayers.Events.on&gt;.  Object'],[-1,'     *     structure must be a listeners object as shown in the example for'],[-1,'     *     the events.on method.'],[-1,'     *\/'],[-1,'    eventListeners: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: panTween'],[-1,'     * {&lt;OpenLayers.Tween&gt;} Animated panning tween object, see panTo()'],[-1,'     *\/'],[-1,'    panTween: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: panMethod'],[-1,'     * {Function} The Easing function to be used for tweening.  Default is'],[-1,'     * OpenLayers.Easing.Expo.easeOut. Setting this to \'null\' turns off'],[-1,'     * animated panning.'],[-1,'     *\/'],[-1,'    panMethod: OpenLayers.Easing.Expo.easeOut,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: panDuration'],[-1,'     * {Integer} The number of steps to be passed to the'],[-1,'     * OpenLayers.Tween.start() method when the map is'],[-1,'     * panned.'],[-1,'     * Default is 50.'],[-1,'     *\/'],[-1,'    panDuration: 50,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: zoomTween'],[-1,'     * {&lt;OpenLayers.Tween&gt;} Animated zooming tween object, see zoomTo()'],[-1,'     *\/'],[-1,'    zoomTween: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: zoomMethod'],[-1,'     * {Function} The Easing function to be used for tweening.  Default is'],[-1,'     * OpenLayers.Easing.Quad.easeOut. Setting this to \'null\' turns off'],[-1,'     * animated zooming.'],[-1,'     *\/'],[-1,'    zoomMethod: OpenLayers.Easing.Quad.easeOut,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: zoomDuration'],[-1,'     * {Integer} The number of steps to be passed to the'],[-1,'     * OpenLayers.Tween.start() method when the map is zoomed.'],[-1,'     * Default is 20.'],[-1,'     *\/'],[-1,'    zoomDuration: 20,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: paddingForPopups'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} Outside margin of the popup. Used to prevent '],[-1,'     *     the popup from getting too close to the map border.'],[-1,'     *\/'],[-1,'    paddingForPopups : null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: layerContainerOriginPx'],[-1,'     * {Object} Cached object representing the layer container origin (in pixels).'],[-1,'     *\/'],[-1,'    layerContainerOriginPx: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: minPx'],[-1,'     * {Object} An object with a \'x\' and \'y\' values that is the lower'],[-1,'     *     left of maxExtent in viewport pixel space.'],[-1,'     *     Used to verify in moveByPx that the new location we\'re moving to'],[-1,'     *     is valid. It is also used in the getLonLatFromViewPortPx function'],[-1,'     *     of Layer.'],[-1,'     *\/'],[-1,'    minPx: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: maxPx'],[-1,'     * {Object} An object with a \'x\' and \'y\' values that is the top'],[-1,'     *     right of maxExtent in viewport pixel space.'],[-1,'     *     Used to verify in moveByPx that the new location we\'re moving to'],[-1,'     *     is valid.'],[-1,'     *\/'],[-1,'    maxPx: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Map'],[-1,'     * Constructor for a new OpenLayers.Map instance.  There are two possible'],[-1,'     *     ways to call the map constructor.  See the examples below.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * div - {DOMElement|String}  The element or id of an element in your page'],[-1,'     *     that will contain the map.  May be omitted if the &lt;div&gt; option is'],[-1,'     *     provided or if you intend to call the &lt;render&gt; method later.'],[-1,'     * options - {Object} Optional object with properties to tag onto the map.'],[-1,'     *'],[-1,'     * Valid options (in addition to the listed API properties):'],[-1,'     * center - {&lt;OpenLayers.LonLat&gt;|Array} The default initial center of the map.'],[-1,'     *     If provided as array, the first value is the x coordinate,'],[-1,'     *     and the 2nd value is the y coordinate.'],[-1,'     *     Only specify if &lt;layers&gt; is provided.'],[-1,'     *     Note that if an ArgParser\/Permalink control is present,'],[-1,'     *     and the querystring contains coordinates, center will be set'],[-1,'     *     by that, and this option will be ignored.'],[-1,'     * zoom - {Number} The initial zoom level for the map. Only specify if'],[-1,'     *     &lt;layers&gt; is provided.'],[-1,'     *     Note that if an ArgParser\/Permalink control is present,'],[-1,'     *     and the querystring contains a zoom level, zoom will be set'],[-1,'     *     by that, and this option will be ignored.'],[-1,'     * extent - {&lt;OpenLayers.Bounds&gt;|Array} The initial extent of the map.'],[-1,'     *     If provided as an array, the array should consist of'],[-1,'     *     four values (left, bottom, right, top).'],[-1,'     *     Only specify if &lt;center&gt; and &lt;zoom&gt; are not provided.'],[-1,'     * '],[-1,'     * Examples:'],[-1,'     * (code)'],[-1,'     * \/\/ create a map with default options in an element with the id \&quot;map1\&quot;'],[-1,'     * var map = new OpenLayers.Map(\&quot;map1\&quot;);'],[-1,'     *'],[-1,'     * \/\/ create a map with non-default options in an element with id \&quot;map2\&quot;'],[-1,'     * var options = {'],[-1,'     *     projection: \&quot;EPSG:3857\&quot;,'],[-1,'     *     maxExtent: new OpenLayers.Bounds(-200000, -200000, 200000, 200000),'],[-1,'     *     center: new OpenLayers.LonLat(-12356463.476333, 5621521.4854095)'],[-1,'     * };'],[-1,'     * var map = new OpenLayers.Map(\&quot;map2\&quot;, options);'],[-1,'     *'],[-1,'     * \/\/ map with non-default options - same as above but with a single argument,'],[-1,'     * \/\/ a restricted extent, and using arrays for bounds and center'],[-1,'     * var map = new OpenLayers.Map({'],[-1,'     *     div: \&quot;map_id\&quot;,'],[-1,'     *     projection: \&quot;EPSG:3857\&quot;,'],[-1,'     *     maxExtent: [-18924313.432222, -15538711.094146, 18924313.432222, 15538711.094146],'],[-1,'     *     restrictedExtent: [-13358338.893333, -9608371.5085962, 13358338.893333, 9608371.5085962],'],[-1,'     *     center: [-12356463.476333, 5621521.4854095]'],[-1,'     * });'],[-1,'     *'],[-1,'     * \/\/ create a map without a reference to a container - call render later'],[-1,'     * var map = new OpenLayers.Map({'],[-1,'     *     projection: \&quot;EPSG:3857\&quot;,'],[-1,'     *     maxExtent: new OpenLayers.Bounds(-200000, -200000, 200000, 200000)'],[-1,'     * });'],[-1,'     * (end)'],[-1,'     *\/    '],[-1,'    initialize: function (div, options) {'],[-1,'        '],[-1,'        \/\/ If only one argument is provided, check if it is an object.'],[0,'        if(arguments.length === 1 &amp;&amp; typeof div === \&quot;object\&quot;) {'],[0,'            options = div;'],[0,'            div = options &amp;&amp; options.div;'],[-1,'        }'],[-1,''],[-1,'        \/\/ Simple-type defaults are set in class definition. '],[-1,'        \/\/  Now set complex-type defaults '],[0,'        this.tileSize = new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,'],[-1,'                                            OpenLayers.Map.TILE_HEIGHT);'],[-1,'        '],[0,'        this.paddingForPopups = new OpenLayers.Bounds(15, 15, 15, 15);'],[-1,''],[0,'        this.theme = OpenLayers._getScriptLocation() + '],[-1,'                             \'theme\/default\/style.css\'; '],[-1,''],[-1,'        \/\/ backup original options'],[0,'        this.options = OpenLayers.Util.extend({}, options);'],[-1,''],[-1,'        \/\/ now override default options '],[0,'        OpenLayers.Util.extend(this, options);'],[-1,'        '],[0,'        var projCode = this.projection instanceof OpenLayers.Projection ?'],[-1,'            this.projection.projCode : this.projection;'],[0,'        OpenLayers.Util.applyDefaults(this, OpenLayers.Projection.defaults[projCode]);'],[-1,'        '],[-1,'        \/\/ allow extents and center to be arrays'],[0,'        if (this.maxExtent &amp;&amp; !(this.maxExtent instanceof OpenLayers.Bounds)) {'],[0,'            this.maxExtent = new OpenLayers.Bounds(this.maxExtent);'],[-1,'        }'],[0,'        if (this.minExtent &amp;&amp; !(this.minExtent instanceof OpenLayers.Bounds)) {'],[0,'            this.minExtent = new OpenLayers.Bounds(this.minExtent);'],[-1,'        }'],[0,'        if (this.restrictedExtent &amp;&amp; !(this.restrictedExtent instanceof OpenLayers.Bounds)) {'],[0,'            this.restrictedExtent = new OpenLayers.Bounds(this.restrictedExtent);'],[-1,'        }'],[0,'        if (this.center &amp;&amp; !(this.center instanceof OpenLayers.LonLat)) {'],[0,'            this.center = new OpenLayers.LonLat(this.center);'],[-1,'        }'],[-1,''],[-1,'        \/\/ initialize layers array'],[0,'        this.layers = [];'],[-1,''],[0,'        this.id = OpenLayers.Util.createUniqueID(\&quot;OpenLayers.Map_\&quot;);'],[-1,''],[0,'        this.div = OpenLayers.Util.getElement(div);'],[0,'        if(!this.div) {'],[0,'            this.div = document.createElement(\&quot;div\&quot;);'],[0,'            this.div.style.height = \&quot;1px\&quot;;'],[0,'            this.div.style.width = \&quot;1px\&quot;;'],[-1,'        }'],[-1,'        '],[0,'        OpenLayers.Element.addClass(this.div, \'olMap\');'],[-1,''],[-1,'        \/\/ the viewPortDiv is the outermost div we modify'],[0,'        var id = this.id + \&quot;_OpenLayers_ViewPort\&quot;;'],[0,'        this.viewPortDiv = OpenLayers.Util.createDiv(id, null, null, null,'],[-1,'                                                     \&quot;relative\&quot;, null,'],[-1,'                                                     \&quot;hidden\&quot;);'],[0,'        this.viewPortDiv.style.width = \&quot;100%\&quot;;'],[0,'        this.viewPortDiv.style.height = \&quot;100%\&quot;;'],[0,'        this.viewPortDiv.className = \&quot;olMapViewport\&quot;;'],[0,'        this.div.appendChild(this.viewPortDiv);'],[-1,''],[0,'        this.events = new OpenLayers.Events('],[-1,'            this, this.viewPortDiv, null, this.fallThrough, '],[-1,'            {includeXY: true}'],[-1,'        );'],[-1,'        '],[0,'        if (this.tileManager) {'],[0,'            this.tileManager.addMap(this);'],[-1,'        }'],[-1,''],[-1,'        \/\/ the layerContainerDiv is the one that holds all the layers'],[0,'        id = this.id + \&quot;_OpenLayers_Container\&quot;;'],[0,'        this.layerContainerDiv = OpenLayers.Util.createDiv(id);'],[0,'        this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE[\'Popup\']-1;'],[0,'        this.layerContainerOriginPx = {x: 0, y: 0};'],[0,'        this.applyTransform();'],[-1,'        '],[0,'        this.viewPortDiv.appendChild(this.layerContainerDiv);'],[-1,''],[0,'        this.updateSize();'],[0,'        if(this.eventListeners instanceof Object) {'],[0,'            this.events.on(this.eventListeners);'],[-1,'        }'],[-1,''],[0,'        if (this.autoUpdateSize === true) {'],[-1,'            \/\/ updateSize on catching the window\'s resize'],[-1,'            \/\/ Note that this is ok, as updateSize() does nothing if the '],[-1,'            \/\/ map\'s size has not actually changed.'],[0,'            this.updateSizeDestroy = OpenLayers.Function.bind(this.updateSize, '],[-1,'                this);'],[0,'            OpenLayers.Event.observe(window, \'resize\','],[-1,'                            this.updateSizeDestroy);'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ only append link stylesheet if the theme property is set'],[0,'        if(this.theme) {'],[-1,'            \/\/ check existing links for equivalent url'],[0,'            var addNode = true;'],[0,'            var nodes = document.getElementsByTagName(\'link\');'],[0,'            for(var i=0, len=nodes.length; i&lt;len; ++i) {'],[0,'                if(OpenLayers.Util.isEquivalentUrl(nodes.item(i).href,'],[-1,'                                                   this.theme)) {'],[0,'                    addNode = false;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'            \/\/ only add a new node if one with an equivalent url hasn\'t already'],[-1,'            \/\/ been added'],[0,'            if(addNode) {'],[0,'                var cssNode = document.createElement(\'link\');'],[0,'                cssNode.setAttribute(\'rel\', \'stylesheet\');'],[0,'                cssNode.setAttribute(\'type\', \'text\/css\');'],[0,'                cssNode.setAttribute(\'href\', this.theme);'],[0,'                document.getElementsByTagName(\'head\')[0].appendChild(cssNode);'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        if (this.controls == null) { \/\/ default controls'],[0,'            this.controls = [];'],[0,'            if (OpenLayers.Control != null) { \/\/ running full or lite?'],[-1,'                \/\/ Navigation or TouchNavigation depending on what is in build'],[0,'                if (OpenLayers.Control.Navigation) {'],[0,'                    this.controls.push(new OpenLayers.Control.Navigation());'],[0,'                } else if (OpenLayers.Control.TouchNavigation) {'],[0,'                    this.controls.push(new OpenLayers.Control.TouchNavigation());'],[-1,'                }'],[0,'                if (OpenLayers.Control.Zoom) {'],[0,'                    this.controls.push(new OpenLayers.Control.Zoom());'],[0,'                } else if (OpenLayers.Control.PanZoom) {'],[0,'                    this.controls.push(new OpenLayers.Control.PanZoom());'],[-1,'                }'],[-1,''],[0,'                if (OpenLayers.Control.ArgParser) {'],[0,'                    this.controls.push(new OpenLayers.Control.ArgParser());'],[-1,'                }'],[0,'                if (OpenLayers.Control.Attribution) {'],[0,'                    this.controls.push(new OpenLayers.Control.Attribution());'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        for(var i=0, len=this.controls.length; i&lt;len; i++) {'],[0,'            this.addControlToMap(this.controls[i]);'],[-1,'        }'],[-1,''],[0,'        this.popups = [];'],[-1,''],[0,'        this.unloadDestroy = OpenLayers.Function.bind(this.destroy, this);'],[-1,'        '],[-1,''],[-1,'        \/\/ always call map.destroy()'],[0,'        OpenLayers.Event.observe(window, \'unload\', this.unloadDestroy);'],[-1,'        '],[-1,'        \/\/ add any initial layers'],[0,'        if (options &amp;&amp; options.layers) {'],[-1,'            \/** '],[-1,'             * If you have set options.center, the map center property will be'],[-1,'             * set at this point.  However, since setCenter has not been called,'],[-1,'             * addLayers gets confused.  So we delete the map center in this '],[-1,'             * case.  Because the check below uses options.center, it will'],[-1,'             * be properly set below.'],[-1,'             *\/'],[0,'            delete this.center;'],[0,'            delete this.zoom;'],[0,'            this.addLayers(options.layers);'],[-1,'            \/\/ set center (and optionally zoom)'],[0,'            if (options.center &amp;&amp; !this.getCenter()) {'],[-1,'                \/\/ zoom can be undefined here'],[0,'                this.setCenter(options.center, options.zoom);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        if (this.panMethod) {'],[0,'            this.panTween = new OpenLayers.Tween(this.panMethod);'],[-1,'        }'],[0,'        if (this.zoomMethod &amp;&amp; this.applyTransform.transform) {'],[0,'            this.zoomTween = new OpenLayers.Tween(this.zoomMethod);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: getViewport'],[-1,'     * Get the DOMElement representing the view port.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    getViewport: function() {'],[0,'        return this.viewPortDiv;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: render'],[-1,'     * Render the map to a specified container.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * div - {String|DOMElement} The container that the map should be rendered'],[-1,'     *     to. If different than the current container, the map viewport'],[-1,'     *     will be moved from the current to the new container.'],[-1,'     *\/'],[-1,'    render: function(div) {'],[0,'        this.div = OpenLayers.Util.getElement(div);'],[0,'        OpenLayers.Element.addClass(this.div, \'olMap\');'],[0,'        this.viewPortDiv.parentNode.removeChild(this.viewPortDiv);'],[0,'        this.div.appendChild(this.viewPortDiv);'],[0,'        this.updateSize();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: unloadDestroy'],[-1,'     * Function that is called to destroy the map on page unload. stored here'],[-1,'     *     so that if map is manually destroyed, we can unregister this.'],[-1,'     *\/'],[-1,'    unloadDestroy: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: updateSizeDestroy'],[-1,'     * When the map is destroyed, we need to stop listening to updateSize'],[-1,'     *    events: this method stores the function we need to unregister in '],[-1,'     *    non-IE browsers.'],[-1,'     *\/'],[-1,'    updateSizeDestroy: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Destroy this map.'],[-1,'     *    Note that if you are using an application which removes a container'],[-1,'     *    of the map from the DOM, you need to ensure that you destroy the'],[-1,'     *    map *before* this happens; otherwise, the page unload handler'],[-1,'     *    will fail because the DOM elements that map.destroy() wants'],[-1,'     *    to clean up will be gone. (See '],[-1,'     *    http:\/\/trac.osgeo.org\/openlayers\/ticket\/2277 for more information).'],[-1,'     *    This will apply to GeoExt and also to other applications which'],[-1,'     *    modify the DOM of the container of the OpenLayers Map.'],[-1,'     *\/'],[-1,'    destroy:function() {'],[-1,'        \/\/ if unloadDestroy is null, we\'ve already been destroyed'],[0,'        if (!this.unloadDestroy) {'],[0,'            return false;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ make sure panning doesn\'t continue after destruction'],[0,'        if(this.panTween) {'],[0,'            this.panTween.stop();'],[0,'            this.panTween = null;'],[-1,'        }'],[-1,'        \/\/ make sure zooming doesn\'t continue after destruction'],[0,'        if(this.zoomTween) {'],[0,'            this.zoomTween.stop();'],[0,'            this.zoomTween = null;'],[-1,'        }'],[-1,''],[-1,'        \/\/ map has been destroyed. dont do it again!'],[0,'        OpenLayers.Event.stopObserving(window, \'unload\', this.unloadDestroy);'],[0,'        this.unloadDestroy = null;'],[-1,''],[0,'        if (this.updateSizeDestroy) {'],[0,'            OpenLayers.Event.stopObserving(window, \'resize\', '],[-1,'                                           this.updateSizeDestroy);'],[-1,'        }'],[-1,'        '],[0,'        this.paddingForPopups = null;    '],[-1,''],[0,'        if (this.controls != null) {'],[0,'            for (var i = this.controls.length - 1; i&gt;=0; --i) {'],[0,'                this.controls[i].destroy();'],[-1,'            } '],[0,'            this.controls = null;'],[-1,'        }'],[0,'        if (this.layers != null) {'],[0,'            for (var i = this.layers.length - 1; i&gt;=0; --i) {'],[-1,'                \/\/pass \'false\' to destroy so that map wont try to set a new '],[-1,'                \/\/ baselayer after each baselayer is removed'],[0,'                this.layers[i].destroy(false);'],[-1,'            } '],[0,'            this.layers = null;'],[-1,'        }'],[0,'        if (this.viewPortDiv &amp;&amp; this.viewPortDiv.parentNode) {'],[0,'            this.viewPortDiv.parentNode.removeChild(this.viewPortDiv);'],[-1,'        }'],[0,'        this.viewPortDiv = null;'],[-1,'        '],[0,'        if (this.tileManager) {'],[0,'            this.tileManager.removeMap(this);'],[0,'            this.tileManager = null;'],[-1,'        }'],[-1,''],[0,'        if(this.eventListeners) {'],[0,'            this.events.un(this.eventListeners);'],[0,'            this.eventListeners = null;'],[-1,'        }'],[0,'        this.events.destroy();'],[0,'        this.events = null;'],[-1,''],[0,'        this.options = null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setOptions'],[-1,'     * Change the map options'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Hashtable of options to tag to the map'],[-1,'     *\/'],[-1,'    setOptions: function(options) {'],[0,'        var updatePxExtent = this.minPx &amp;&amp;'],[-1,'            options.restrictedExtent != this.restrictedExtent;'],[0,'        OpenLayers.Util.extend(this, options);'],[-1,'        \/\/ force recalculation of minPx and maxPx'],[0,'        updatePxExtent &amp;&amp; this.moveTo(this.getCachedCenter(), this.zoom, {'],[-1,'            forceZoomChange: true'],[-1,'        });'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getTileSize'],[-1,'     * Get the tile size for the map'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Size&gt;}'],[-1,'     *\/'],[-1,'     getTileSize: function() {'],[0,'         return this.tileSize;'],[-1,'     },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getBy'],[-1,'     * Get a list of objects given a property and a match item.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * array - {String} A property on the map whose value is an array.'],[-1,'     * property - {String} A property on each item of the given array.'],[-1,'     * match - {String | Object} A string to match.  Can also be a regular'],[-1,'     *     expression literal or object.  In addition, it can be any object'],[-1,'     *     with a method named test.  For reqular expressions or other, if'],[-1,'     *     match.test(map[array][i][property]) evaluates to true, the item will'],[-1,'     *     be included in the array returned.  If no items are found, an empty'],[-1,'     *     array is returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} An array of items where the given property matches the given'],[-1,'     *     criteria.'],[-1,'     *\/'],[-1,'    getBy: function(array, property, match) {'],[0,'        var test = (typeof match.test == \&quot;function\&quot;);'],[0,'        var found = OpenLayers.Array.filter(this[array], function(item) {'],[0,'            return item[property] == match || (test &amp;&amp; match.test(item[property]));'],[-1,'        });'],[0,'        return found;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getLayersBy'],[-1,'     * Get a list of layers with properties matching the given criteria.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * property - {String} A layer property to be matched.'],[-1,'     * match - {String | Object} A string to match.  Can also be a regular'],[-1,'     *     expression literal or object.  In addition, it can be any object'],[-1,'     *     with a method named test.  For reqular expressions or other, if'],[-1,'     *     match.test(layer[property]) evaluates to true, the layer will be'],[-1,'     *     included in the array returned.  If no layers are found, an empty'],[-1,'     *     array is returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Layer&gt;)} A list of layers matching the given criteria.'],[-1,'     *     An empty array is returned if no matches are found.'],[-1,'     *\/'],[-1,'    getLayersBy: function(property, match) {'],[0,'        return this.getBy(\&quot;layers\&quot;, property, match);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getLayersByName'],[-1,'     * Get a list of layers with names matching the given name.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * match - {String | Object} A layer name.  The name can also be a regular'],[-1,'     *     expression literal or object.  In addition, it can be any object'],[-1,'     *     with a method named test.  For reqular expressions or other, if'],[-1,'     *     name.test(layer.name) evaluates to true, the layer will be included'],[-1,'     *     in the list of layers returned.  If no layers are found, an empty'],[-1,'     *     array is returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Layer&gt;)} A list of layers matching the given name.'],[-1,'     *     An empty array is returned if no matches are found.'],[-1,'     *\/'],[-1,'    getLayersByName: function(match) {'],[0,'        return this.getLayersBy(\&quot;name\&quot;, match);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getLayersByClass'],[-1,'     * Get a list of layers of a given class (CLASS_NAME).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * match - {String | Object} A layer class name.  The match can also be a'],[-1,'     *     regular expression literal or object.  In addition, it can be any'],[-1,'     *     object with a method named test.  For reqular expressions or other,'],[-1,'     *     if type.test(layer.CLASS_NAME) evaluates to true, the layer will'],[-1,'     *     be included in the list of layers returned.  If no layers are'],[-1,'     *     found, an empty array is returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Layer&gt;)} A list of layers matching the given class.'],[-1,'     *     An empty array is returned if no matches are found.'],[-1,'     *\/'],[-1,'    getLayersByClass: function(match) {'],[0,'        return this.getLayersBy(\&quot;CLASS_NAME\&quot;, match);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getControlsBy'],[-1,'     * Get a list of controls with properties matching the given criteria.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * property - {String} A control property to be matched.'],[-1,'     * match - {String | Object} A string to match.  Can also be a regular'],[-1,'     *     expression literal or object.  In addition, it can be any object'],[-1,'     *     with a method named test.  For reqular expressions or other, if'],[-1,'     *     match.test(layer[property]) evaluates to true, the layer will be'],[-1,'     *     included in the array returned.  If no layers are found, an empty'],[-1,'     *     array is returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Control&gt;)} A list of controls matching the given'],[-1,'     *     criteria.  An empty array is returned if no matches are found.'],[-1,'     *\/'],[-1,'    getControlsBy: function(property, match) {'],[0,'        return this.getBy(\&quot;controls\&quot;, property, match);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getControlsByClass'],[-1,'     * Get a list of controls of a given class (CLASS_NAME).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * match - {String | Object} A control class name.  The match can also be a'],[-1,'     *     regular expression literal or object.  In addition, it can be any'],[-1,'     *     object with a method named test.  For reqular expressions or other,'],[-1,'     *     if type.test(control.CLASS_NAME) evaluates to true, the control will'],[-1,'     *     be included in the list of controls returned.  If no controls are'],[-1,'     *     found, an empty array is returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Control&gt;)} A list of controls matching the given class.'],[-1,'     *     An empty array is returned if no matches are found.'],[-1,'     *\/'],[-1,'    getControlsByClass: function(match) {'],[0,'        return this.getControlsBy(\&quot;CLASS_NAME\&quot;, match);'],[-1,'    },'],[-1,''],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*                  Layer Functions                     *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*     The following functions deal with adding and     *\/'],[-1,'  \/*        removing Layers to and from the Map           *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/         '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getLayer'],[-1,'     * Get a layer based on its id'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * id - {String} A layer id'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer&gt;} The Layer with the corresponding id from the map\'s '],[-1,'     *                      layer collection, or null if not found.'],[-1,'     *\/'],[-1,'    getLayer: function(id) {'],[0,'        var foundLayer = null;'],[0,'        for (var i=0, len=this.layers.length; i&lt;len; i++) {'],[0,'            var layer = this.layers[i];'],[0,'            if (layer.id == id) {'],[0,'                foundLayer = layer;'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        return foundLayer;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'    * Method: setLayerZIndex'],[-1,'    * '],[-1,'    * Parameters:'],[-1,'    * layer - {&lt;OpenLayers.Layer&gt;} '],[-1,'    * zIdx - {int} '],[-1,'    *\/    '],[-1,'    setLayerZIndex: function (layer, zIdx) {'],[0,'        layer.setZIndex('],[-1,'            this.Z_INDEX_BASE[layer.isBaseLayer ? \'BaseLayer\' : \'Overlay\']'],[-1,'            + zIdx * 5 );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: resetLayersZIndex'],[-1,'     * Reset each layer\'s z-index based on layer\'s array index'],[-1,'     *\/'],[-1,'    resetLayersZIndex: function() {'],[0,'        for (var i=0, len=this.layers.length; i&lt;len; i++) {'],[0,'            var layer = this.layers[i];'],[0,'            this.setLayerZIndex(layer, i);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'    * APIMethod: addLayer'],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * layer - {&lt;OpenLayers.Layer&gt;} '],[-1,'    *'],[-1,'    * Returns:'],[-1,'    * {Boolean} True if the layer has been added to the map.'],[-1,'    *\/    '],[-1,'    addLayer: function (layer) {'],[0,'        for(var i = 0, len = this.layers.length; i &lt; len; i++) {'],[0,'            if (this.layers[i] == layer) {'],[0,'                return false;'],[-1,'            }'],[-1,'        }'],[0,'        if (this.events.triggerEvent(\&quot;preaddlayer\&quot;, {layer: layer}) === false) {'],[0,'            return false;'],[-1,'        }'],[0,'        if(this.allOverlays) {'],[0,'            layer.isBaseLayer = false;'],[-1,'        }'],[-1,'        '],[0,'        layer.div.className = \&quot;olLayerDiv\&quot;;'],[0,'        layer.div.style.overflow = \&quot;\&quot;;'],[0,'        this.setLayerZIndex(layer, this.layers.length);'],[-1,''],[0,'        if (layer.isFixed) {'],[0,'            this.viewPortDiv.appendChild(layer.div);'],[-1,'        } else {'],[0,'            this.layerContainerDiv.appendChild(layer.div);'],[-1,'        }'],[0,'        this.layers.push(layer);'],[0,'        layer.setMap(this);'],[-1,''],[0,'        if (layer.isBaseLayer || (this.allOverlays &amp;&amp; !this.baseLayer))  {'],[0,'            if (this.baseLayer == null) {'],[-1,'                \/\/ set the first baselaye we add as the baselayer'],[0,'                this.setBaseLayer(layer);'],[-1,'            } else {'],[0,'                layer.setVisibility(false);'],[-1,'            }'],[-1,'        } else {'],[0,'            layer.redraw();'],[-1,'        }'],[-1,''],[0,'        this.events.triggerEvent(\&quot;addlayer\&quot;, {layer: layer});'],[0,'        layer.events.triggerEvent(\&quot;added\&quot;, {map: this, layer: layer});'],[0,'        layer.afterAdd();'],[-1,''],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'    * APIMethod: addLayers '],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * layers - {Array(&lt;OpenLayers.Layer&gt;)} '],[-1,'    *\/    '],[-1,'    addLayers: function (layers) {'],[0,'        for (var i=0, len=layers.length; i&lt;len; i++) {'],[0,'            this.addLayer(layers[i]);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: removeLayer'],[-1,'     * Removes a layer from the map by removing its visual element (the '],[-1,'     *   layer.div property), then removing it from the map\'s internal list '],[-1,'     *   of layers, setting the layer\'s map property to null. '],[-1,'     * '],[-1,'     *   a \&quot;removelayer\&quot; event is triggered.'],[-1,'     * '],[-1,'     *   very worthy of mention is that simply removing a layer from a map'],[-1,'     *   will not cause the removal of any popups which may have been created'],[-1,'     *   by the layer. this is due to the fact that it was decided at some'],[-1,'     *   point that popups would not belong to layers. thus there is no way '],[-1,'     *   for us to know here to which layer the popup belongs.'],[-1,'     *    '],[-1,'     *     A simple solution to this is simply to call destroy() on the layer.'],[-1,'     *     the default OpenLayers.Layer class\'s destroy() function'],[-1,'     *     automatically takes care to remove itself from whatever map it has'],[-1,'     *     been attached to. '],[-1,'     * '],[-1,'     *     The correct solution is for the layer itself to register an '],[-1,'     *     event-handler on \&quot;removelayer\&quot; and when it is called, if it '],[-1,'     *     recognizes itself as the layer being removed, then it cycles through'],[-1,'     *     its own personal list of popups, removing them from the map.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer&gt;} '],[-1,'     * setNewBaseLayer - {Boolean} Default is true'],[-1,'     *\/'],[-1,'    removeLayer: function(layer, setNewBaseLayer) {'],[0,'        if (this.events.triggerEvent(\&quot;preremovelayer\&quot;, {layer: layer}) === false) {'],[0,'            return;'],[-1,'        }'],[0,'        if (setNewBaseLayer == null) {'],[0,'            setNewBaseLayer = true;'],[-1,'        }'],[-1,''],[0,'        if (layer.isFixed) {'],[0,'            this.viewPortDiv.removeChild(layer.div);'],[-1,'        } else {'],[0,'            this.layerContainerDiv.removeChild(layer.div);'],[-1,'        }'],[0,'        OpenLayers.Util.removeItem(this.layers, layer);'],[0,'        layer.removeMap(this);'],[0,'        layer.map = null;'],[-1,''],[-1,'        \/\/ if we removed the base layer, need to set a new one'],[0,'        if(this.baseLayer == layer) {'],[0,'            this.baseLayer = null;'],[0,'            if(setNewBaseLayer) {'],[0,'                for(var i=0, len=this.layers.length; i&lt;len; i++) {'],[0,'                    var iLayer = this.layers[i];'],[0,'                    if (iLayer.isBaseLayer || this.allOverlays) {'],[0,'                        this.setBaseLayer(iLayer);'],[0,'                        break;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        this.resetLayersZIndex();'],[-1,''],[0,'        this.events.triggerEvent(\&quot;removelayer\&quot;, {layer: layer});'],[0,'        layer.events.triggerEvent(\&quot;removed\&quot;, {map: this, layer: layer});'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getNumLayers'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Int} The number of layers attached to the map.'],[-1,'     *\/'],[-1,'    getNumLayers: function () {'],[0,'        return this.layers.length;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: getLayerIndex'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Integer} The current (zero-based) index of the given layer in the map\'s'],[-1,'     *           layer stack. Returns -1 if the layer isn\'t on the map.'],[-1,'     *\/'],[-1,'    getLayerIndex: function (layer) {'],[0,'        return OpenLayers.Util.indexOf(this.layers, layer);'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: setLayerIndex'],[-1,'     * Move the given layer to the specified (zero-based) index in the layer'],[-1,'     *     list, changing its z-index in the map display. Use'],[-1,'     *     map.getLayerIndex() to find out the current index of a layer. Note'],[-1,'     *     that this cannot (or at least should not) be effectively used to'],[-1,'     *     raise base layers above overlays.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer&gt;} '],[-1,'     * idx - {int} '],[-1,'     *\/'],[-1,'    setLayerIndex: function (layer, idx) {'],[0,'        var base = this.getLayerIndex(layer);'],[0,'        if (idx &lt; 0) {'],[0,'            idx = 0;'],[0,'        } else if (idx &gt; this.layers.length) {'],[0,'            idx = this.layers.length;'],[-1,'        }'],[0,'        if (base != idx) {'],[0,'            this.layers.splice(base, 1);'],[0,'            this.layers.splice(idx, 0, layer);'],[0,'            for (var i=0, len=this.layers.length; i&lt;len; i++) {'],[0,'                this.setLayerZIndex(this.layers[i], i);'],[-1,'            }'],[0,'            this.events.triggerEvent(\&quot;changelayer\&quot;, {'],[-1,'                layer: layer, property: \&quot;order\&quot;'],[-1,'            });'],[0,'            if(this.allOverlays) {'],[0,'                if(idx === 0) {'],[0,'                    this.setBaseLayer(layer);'],[0,'                } else if(this.baseLayer !== this.layers[0]) {'],[0,'                    this.setBaseLayer(this.layers[0]);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: raiseLayer'],[-1,'     * Change the index of the given layer by delta. If delta is positive, '],[-1,'     *     the layer is moved up the map\'s layer stack; if delta is negative,'],[-1,'     *     the layer is moved down.  Again, note that this cannot (or at least'],[-1,'     *     should not) be effectively used to raise base layers above overlays.'],[-1,'     *'],[-1,'     * Paremeters:'],[-1,'     * layer - {&lt;OpenLayers.Layer&gt;} '],[-1,'     * delta - {int} '],[-1,'     *\/'],[-1,'    raiseLayer: function (layer, delta) {'],[0,'        var idx = this.getLayerIndex(layer) + delta;'],[0,'        this.setLayerIndex(layer, idx);'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: setBaseLayer'],[-1,'     * Allows user to specify one of the currently-loaded layers as the Map\'s'],[-1,'     *     new base layer.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * newBaseLayer - {&lt;OpenLayers.Layer&gt;}'],[-1,'     *\/'],[-1,'    setBaseLayer: function(newBaseLayer) {'],[-1,'        '],[0,'        if (newBaseLayer != this.baseLayer) {'],[-1,'          '],[-1,'            \/\/ ensure newBaseLayer is already loaded'],[0,'            if (OpenLayers.Util.indexOf(this.layers, newBaseLayer) != -1) {'],[-1,''],[-1,'                \/\/ preserve center and scale when changing base layers'],[0,'                var center = this.getCachedCenter();'],[0,'                var newResolution = OpenLayers.Util.getResolutionFromScale('],[-1,'                    this.getScale(), newBaseLayer.units'],[-1,'                );'],[-1,''],[-1,'                \/\/ make the old base layer invisible '],[0,'                if (this.baseLayer != null &amp;&amp; !this.allOverlays) {'],[0,'                    this.baseLayer.setVisibility(false);'],[-1,'                }'],[-1,''],[-1,'                \/\/ set new baselayer'],[0,'                this.baseLayer = newBaseLayer;'],[-1,'                '],[0,'                if(!this.allOverlays || this.baseLayer.visibility) {'],[0,'                    this.baseLayer.setVisibility(true);'],[-1,'                    \/\/ Layer may previously have been visible but not in range.'],[-1,'                    \/\/ In this case we need to redraw it to make it visible.'],[0,'                    if (this.baseLayer.inRange === false) {'],[0,'                        this.baseLayer.redraw();'],[-1,'                    }'],[-1,'                }'],[-1,''],[-1,'                \/\/ recenter the map'],[0,'                if (center != null) {'],[-1,'                    \/\/ new zoom level derived from old scale'],[0,'                    var newZoom = this.getZoomForResolution('],[-1,'                        newResolution || this.resolution, true'],[-1,'                    );'],[-1,'                    \/\/ zoom and force zoom change'],[0,'                    this.setCenter(center, newZoom, false, true);'],[-1,'                }'],[-1,''],[0,'                this.events.triggerEvent(\&quot;changebaselayer\&quot;, {'],[-1,'                    layer: this.baseLayer'],[-1,'                });'],[-1,'            }        '],[-1,'        }'],[-1,'    },'],[-1,''],[-1,''],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*                 Control Functions                    *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*     The following functions deal with adding and     *\/'],[-1,'  \/*        removing Controls to and from the Map         *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/         '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: addControl'],[-1,'     * Add the passed over control to the map. Optionally '],[-1,'     *     position the control at the given pixel.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;}'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *\/    '],[-1,'    addControl: function (control, px) {'],[0,'        this.controls.push(control);'],[0,'        this.addControlToMap(control, px);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: addControls'],[-1,'     * Add all of the passed over controls to the map. '],[-1,'     *     You can pass over an optional second array'],[-1,'     *     with pixel-objects to position the controls.'],[-1,'     *     The indices of the two arrays should match and'],[-1,'     *     you can add null as pixel for those controls '],[-1,'     *     you want to be autopositioned.   '],[-1,'     *     '],[-1,'     * Parameters:'],[-1,'     * controls - {Array(&lt;OpenLayers.Control&gt;)}'],[-1,'     * pixels - {Array(&lt;OpenLayers.Pixel&gt;)}'],[-1,'     *\/    '],[-1,'    addControls: function (controls, pixels) {'],[0,'        var pxs = (arguments.length === 1) ? [] : pixels;'],[0,'        for (var i=0, len=controls.length; i&lt;len; i++) {'],[0,'            var ctrl = controls[i];'],[0,'            var px = (pxs[i]) ? pxs[i] : null;'],[0,'            this.addControl( ctrl, px );'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: addControlToMap'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * '],[-1,'     * control - {&lt;OpenLayers.Control&gt;}'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *\/    '],[-1,'    addControlToMap: function (control, px) {'],[-1,'        \/\/ If a control doesn\'t have a div at this point, it belongs in the'],[-1,'        \/\/ viewport.'],[0,'        control.outsideViewport = (control.div != null);'],[-1,'        '],[-1,'        \/\/ If the map has a displayProjection, and the control doesn\'t, set '],[-1,'        \/\/ the display projection.'],[0,'        if (this.displayProjection &amp;&amp; !control.displayProjection) {'],[0,'            control.displayProjection = this.displayProjection;'],[-1,'        }    '],[-1,'        '],[0,'        control.setMap(this);'],[0,'        var div = control.draw(px);'],[0,'        if (div) {'],[0,'            if(!control.outsideViewport) {'],[0,'                div.style.zIndex = this.Z_INDEX_BASE[\'Control\'] +'],[-1,'                                    this.controls.length;'],[0,'                this.viewPortDiv.appendChild( div );'],[-1,'            }'],[-1,'        }'],[0,'        if(control.autoActivate) {'],[0,'            control.activate();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getControl'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * id - {String} ID of the control to return.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Control&gt;} The control from the map\'s list of controls '],[-1,'     *                        which has a matching \'id\'. If none found, '],[-1,'     *                        returns null.'],[-1,'     *\/    '],[-1,'    getControl: function (id) {'],[0,'        var returnControl = null;'],[0,'        for(var i=0, len=this.controls.length; i&lt;len; i++) {'],[0,'            var control = this.controls[i];'],[0,'            if (control.id == id) {'],[0,'                returnControl = control;'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        return returnControl;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: removeControl'],[-1,'     * Remove a control from the map. Removes the control both from the map '],[-1,'     *     object\'s internal array of controls, as well as from the map\'s '],[-1,'     *     viewPort (assuming the control was not added outsideViewport)'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} The control to remove.'],[-1,'     *\/    '],[-1,'    removeControl: function (control) {'],[-1,'        \/\/make sure control is non-null and actually part of our map'],[0,'        if ( (control) &amp;&amp; (control == this.getControl(control.id)) ) {'],[0,'            if (control.div &amp;&amp; (control.div.parentNode == this.viewPortDiv)) {'],[0,'                this.viewPortDiv.removeChild(control.div);'],[-1,'            }'],[0,'            OpenLayers.Util.removeItem(this.controls, control);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*                  Popup Functions                     *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*     The following functions deal with adding and     *\/'],[-1,'  \/*        removing Popups to and from the Map           *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/         '],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: addPopup'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * popup - {&lt;OpenLayers.Popup&gt;}'],[-1,'     * exclusive - {Boolean} If true, closes all other popups first'],[-1,'     *\/'],[-1,'    addPopup: function(popup, exclusive) {'],[-1,''],[0,'        if (exclusive) {'],[-1,'            \/\/remove all other popups from screen'],[0,'            for (var i = this.popups.length - 1; i &gt;= 0; --i) {'],[0,'                this.removePopup(this.popups[i]);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        popup.map = this;'],[0,'        this.popups.push(popup);'],[0,'        var popupDiv = popup.draw();'],[0,'        if (popupDiv) {'],[0,'            popupDiv.style.zIndex = this.Z_INDEX_BASE[\'Popup\'] +'],[-1,'                                    this.popups.length;'],[0,'            this.layerContainerDiv.appendChild(popupDiv);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'    * APIMethod: removePopup'],[-1,'    * '],[-1,'    * Parameters:'],[-1,'    * popup - {&lt;OpenLayers.Popup&gt;}'],[-1,'    *\/'],[-1,'    removePopup: function(popup) {'],[0,'        OpenLayers.Util.removeItem(this.popups, popup);'],[0,'        if (popup.div) {'],[0,'            try { this.layerContainerDiv.removeChild(popup.div); }'],[-1,'            catch (e) { } \/\/ Popups sometimes apparently get disconnected'],[-1,'                      \/\/ from the layerContainerDiv, and cause complaints.'],[-1,'        }'],[0,'        popup.map = null;'],[-1,'    },'],[-1,''],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*              Container Div Functions                 *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*   The following functions deal with the access to    *\/'],[-1,'  \/*    and maintenance of the size of the container div  *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/     '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getSize'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Size&gt;} An &lt;OpenLayers.Size&gt; object that represents the '],[-1,'     *                     size, in pixels, of the div into which OpenLayers '],[-1,'     *                     has been loaded. '],[-1,'     *                     Note - A clone() of this locally cached variable is'],[-1,'     *                     returned, so as not to allow users to modify it.'],[-1,'     *\/'],[-1,'    getSize: function () {'],[0,'        var size = null;'],[0,'        if (this.size != null) {'],[0,'            size = this.size.clone();'],[-1,'        }'],[0,'        return size;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: updateSize'],[-1,'     * This function should be called by any external code which dynamically'],[-1,'     *     changes the size of the map div (because mozilla wont let us catch '],[-1,'     *     the \&quot;onresize\&quot; for an element)'],[-1,'     *\/'],[-1,'    updateSize: function() {'],[-1,'        \/\/ the div might have moved on the page, also'],[0,'        var newSize = this.getCurrentSize();'],[0,'        if (newSize &amp;&amp; !isNaN(newSize.h) &amp;&amp; !isNaN(newSize.w)) {'],[0,'            this.events.clearMouseCache();'],[0,'            var oldSize = this.getSize();'],[0,'            if (oldSize == null) {'],[0,'                this.size = oldSize = newSize;'],[-1,'            }'],[0,'            if (!newSize.equals(oldSize)) {'],[-1,'                '],[-1,'                \/\/ store the new size'],[0,'                this.size = newSize;'],[-1,'    '],[-1,'                \/\/notify layers of mapresize'],[0,'                for(var i=0, len=this.layers.length; i&lt;len; i++) {'],[0,'                    this.layers[i].onMapResize();                '],[-1,'                }'],[-1,'    '],[0,'                var center = this.getCachedCenter();'],[-1,'    '],[0,'                if (this.baseLayer != null &amp;&amp; center != null) {'],[0,'                    var zoom = this.getZoom();'],[0,'                    this.zoom = null;'],[0,'                    this.setCenter(center, zoom);'],[-1,'                }'],[-1,'    '],[-1,'            }'],[-1,'        }'],[0,'        this.events.triggerEvent(\&quot;updatesize\&quot;);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getCurrentSize'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Size&gt;} A new &lt;OpenLayers.Size&gt; object with the dimensions '],[-1,'     *                     of the map div'],[-1,'     *\/'],[-1,'    getCurrentSize: function() {'],[-1,''],[0,'        var size = new OpenLayers.Size(this.div.clientWidth, '],[-1,'                                       this.div.clientHeight);'],[-1,''],[0,'        if (size.w == 0 &amp;&amp; size.h == 0 || isNaN(size.w) &amp;&amp; isNaN(size.h)) {'],[0,'            size.w = this.div.offsetWidth;'],[0,'            size.h = this.div.offsetHeight;'],[-1,'        }'],[0,'        if (size.w == 0 &amp;&amp; size.h == 0 || isNaN(size.w) &amp;&amp; isNaN(size.h)) {'],[0,'            size.w = parseInt(this.div.style.width);'],[0,'            size.h = parseInt(this.div.style.height);'],[-1,'        }'],[0,'        return size;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: calculateBounds'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * center - {&lt;OpenLayers.LonLat&gt;} Default is this.getCenter()'],[-1,'     * resolution - {float} Default is this.getResolution() '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} A bounds based on resolution, center, and '],[-1,'     *                       current mapsize.'],[-1,'     *\/'],[-1,'    calculateBounds: function(center, resolution) {'],[-1,''],[0,'        var extent = null;'],[-1,'        '],[0,'        if (center == null) {'],[0,'            center = this.getCachedCenter();'],[-1,'        }                '],[0,'        if (resolution == null) {'],[0,'            resolution = this.getResolution();'],[-1,'        }'],[-1,'    '],[0,'        if ((center != null) &amp;&amp; (resolution != null)) {'],[0,'            var halfWDeg = (this.size.w * resolution) \/ 2;'],[0,'            var halfHDeg = (this.size.h * resolution) \/ 2;'],[-1,'        '],[0,'            extent = new OpenLayers.Bounds(center.lon - halfWDeg,'],[-1,'                                           center.lat - halfHDeg,'],[-1,'                                           center.lon + halfWDeg,'],[-1,'                                           center.lat + halfHDeg);'],[-1,'        }'],[-1,''],[0,'        return extent;'],[-1,'    },'],[-1,''],[-1,''],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*            Zoom, Center, Pan Functions               *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*    The following functions handle the validation,    *\/'],[-1,'  \/*   getting and setting of the Zoom Level and Center   *\/'],[-1,'  \/*       as well as the panning of the Map              *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/'],[-1,'    \/**'],[-1,'     * APIMethod: getCenter'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;}'],[-1,'     *\/'],[-1,'    getCenter: function () {'],[0,'        var center = null;'],[0,'        var cachedCenter = this.getCachedCenter();'],[0,'        if (cachedCenter) {'],[0,'            center = cachedCenter.clone();'],[-1,'        }'],[0,'        return center;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getCachedCenter'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;}'],[-1,'     *\/'],[-1,'    getCachedCenter: function() {'],[0,'        if (!this.center &amp;&amp; this.size) {'],[0,'            this.center = this.getLonLatFromViewPortPx({'],[-1,'                x: this.size.w \/ 2,'],[-1,'                y: this.size.h \/ 2'],[-1,'            });'],[-1,'        }'],[0,'        return this.center;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getZoom'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer}'],[-1,'     *\/'],[-1,'    getZoom: function () {'],[0,'        return this.zoom;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: pan'],[-1,'     * Allows user to pan by a value of screen pixels'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * dx - {Integer}'],[-1,'     * dy - {Integer}'],[-1,'     * options - {Object} Options to configure panning:'],[-1,'     *  - *animate* {Boolean} Use panTo instead of setCenter. Default is true.'],[-1,'     *  - *dragging* {Boolean} Call setCenter with dragging true.  Default is'],[-1,'     *    false.'],[-1,'     *\/'],[-1,'    pan: function(dx, dy, options) {'],[0,'        options = OpenLayers.Util.applyDefaults(options, {'],[-1,'            animate: true,'],[-1,'            dragging: false'],[-1,'        });'],[0,'        if (options.dragging) {'],[0,'            if (dx != 0 || dy != 0) {'],[0,'                this.moveByPx(dx, dy);'],[-1,'            }'],[-1,'        } else {'],[-1,'            \/\/ getCenter'],[0,'            var centerPx = this.getViewPortPxFromLonLat(this.getCachedCenter());'],[-1,''],[-1,'            \/\/ adjust'],[0,'            var newCenterPx = centerPx.add(dx, dy);'],[-1,''],[0,'            if (this.dragging || !newCenterPx.equals(centerPx)) {'],[0,'                var newCenterLonLat = this.getLonLatFromViewPortPx(newCenterPx);'],[0,'                if (options.animate) {'],[0,'                    this.panTo(newCenterLonLat);'],[-1,'                } else {'],[0,'                    this.moveTo(newCenterLonLat);'],[0,'                    if(this.dragging) {'],[0,'                        this.dragging = false;'],[0,'                        this.events.triggerEvent(\&quot;moveend\&quot;);'],[-1,'                    }'],[-1,'                }    '],[-1,'            }'],[-1,'        }        '],[-1,''],[-1,'   },'],[-1,'   '],[-1,'   \/** '],[-1,'     * APIMethod: panTo'],[-1,'     * Allows user to pan to a new lonlat'],[-1,'     * If the new lonlat is in the current extent the map will slide smoothly'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     *\/'],[-1,'    panTo: function(lonlat) {'],[0,'        if (this.panTween &amp;&amp; this.getExtent().scale(this.panRatio).containsLonLat(lonlat)) {'],[0,'            var center = this.getCachedCenter();'],[-1,''],[-1,'            \/\/ center will not change, don\'t do nothing'],[0,'            if (lonlat.equals(center)) {'],[0,'                return;'],[-1,'            }'],[-1,''],[0,'            var from = this.getPixelFromLonLat(center);'],[0,'            var to = this.getPixelFromLonLat(lonlat);'],[0,'            var vector = { x: to.x - from.x, y: to.y - from.y };'],[0,'            var last = { x: 0, y: 0 };'],[-1,''],[0,'            this.panTween.start( { x: 0, y: 0 }, vector, this.panDuration, {'],[-1,'                callbacks: {'],[-1,'                    eachStep: OpenLayers.Function.bind(function(px) {'],[0,'                        var x = px.x - last.x,'],[-1,'                            y = px.y - last.y;'],[0,'                        this.moveByPx(x, y);'],[0,'                        last.x = Math.round(px.x);'],[0,'                        last.y = Math.round(px.y);'],[-1,'                    }, this),'],[-1,'                    done: OpenLayers.Function.bind(function(px) {'],[0,'                        this.moveTo(lonlat);'],[0,'                        this.dragging = false;'],[0,'                        this.events.triggerEvent(\&quot;moveend\&quot;);'],[-1,'                    }, this)'],[-1,'                }'],[-1,'            });'],[-1,'        } else {'],[0,'            this.setCenter(lonlat);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setCenter'],[-1,'     * Set the map center (and optionally, the zoom level).'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;|Array} The new center location.'],[-1,'     *     If provided as array, the first value is the x coordinate,'],[-1,'     *     and the 2nd value is the y coordinate.'],[-1,'     * zoom - {Integer} Optional zoom level.'],[-1,'     * dragging - {Boolean} Specifies whether or not to trigger '],[-1,'     *                      movestart\/end events'],[-1,'     * forceZoomChange - {Boolean} Specifies whether or not to trigger zoom '],[-1,'     *                             change events (needed on baseLayer change)'],[-1,'     *'],[-1,'     * TBD: reconsider forceZoomChange in 3.0'],[-1,'     *\/'],[-1,'    setCenter: function(lonlat, zoom, dragging, forceZoomChange) {'],[0,'        if (this.panTween) {'],[0,'            this.panTween.stop();'],[-1,'        }'],[0,'        if (this.zoomTween) {'],[0,'            this.zoomTween.stop();'],[-1,'        }            '],[0,'        this.moveTo(lonlat, zoom, {'],[-1,'            \'dragging\': dragging,'],[-1,'            \'forceZoomChange\': forceZoomChange'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: moveByPx'],[-1,'     * Drag the map by pixels.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * dx - {Number}'],[-1,'     * dy - {Number}'],[-1,'     *\/'],[-1,'    moveByPx: function(dx, dy) {'],[0,'        var hw = this.size.w \/ 2;'],[0,'        var hh = this.size.h \/ 2;'],[0,'        var x = hw + dx;'],[0,'        var y = hh + dy;'],[0,'        var wrapDateLine = this.baseLayer.wrapDateLine;'],[0,'        var xRestriction = 0;'],[0,'        var yRestriction = 0;'],[0,'        if (this.restrictedExtent) {'],[0,'            xRestriction = hw;'],[0,'            yRestriction = hh;'],[-1,'            \/\/ wrapping the date line makes no sense for restricted extents'],[0,'            wrapDateLine = false;'],[-1,'        }'],[0,'        dx = wrapDateLine ||'],[-1,'                    x &lt;= this.maxPx.x - xRestriction &amp;&amp;'],[-1,'                    x &gt;= this.minPx.x + xRestriction ? Math.round(dx) : 0;'],[0,'        dy = y &lt;= this.maxPx.y - yRestriction &amp;&amp;'],[-1,'                    y &gt;= this.minPx.y + yRestriction ? Math.round(dy) : 0;'],[0,'        if (dx || dy) {'],[0,'            if (!this.dragging) {'],[0,'                this.dragging = true;'],[0,'                this.events.triggerEvent(\&quot;movestart\&quot;);'],[-1,'            }'],[0,'            this.center = null;'],[0,'            if (dx) {'],[0,'                this.layerContainerOriginPx.x -= dx;'],[0,'                this.minPx.x -= dx;'],[0,'                this.maxPx.x -= dx;'],[-1,'            }'],[0,'            if (dy) {'],[0,'                this.layerContainerOriginPx.y -= dy;'],[0,'                this.minPx.y -= dy;'],[0,'                this.maxPx.y -= dy;'],[-1,'            }'],[0,'            this.applyTransform();'],[0,'            var layer, i, len;'],[0,'            for (i=0, len=this.layers.length; i&lt;len; ++i) {'],[0,'                layer = this.layers[i];'],[0,'                if (layer.visibility &amp;&amp;'],[-1,'                    (layer === this.baseLayer || layer.inRange)) {'],[0,'                    layer.moveByPx(dx, dy);'],[0,'                    layer.events.triggerEvent(\&quot;move\&quot;);'],[-1,'                }'],[-1,'            }'],[0,'            this.events.triggerEvent(\&quot;move\&quot;);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: adjustZoom'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * zoom - {Number} The zoom level to adjust'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Integer} Adjusted zoom level that shows a map not wider than its'],[-1,'     * &lt;baseLayer&gt;\'s maxExtent.'],[-1,'     *\/'],[-1,'    adjustZoom: function(zoom) {'],[0,'        if (this.baseLayer &amp;&amp; this.baseLayer.wrapDateLine) {'],[0,'            var resolution, resolutions = this.baseLayer.resolutions,'],[-1,'                maxResolution = this.getMaxExtent().getWidth() \/ this.size.w;'],[0,'            if (this.getResolutionForZoom(zoom) &gt; maxResolution) {'],[0,'                if (this.fractionalZoom) {'],[0,'                    zoom = this.getZoomForResolution(maxResolution);'],[-1,'                } else {'],[0,'                    for (var i=zoom|0, ii=resolutions.length; i&lt;ii; ++i) {'],[0,'                        if (resolutions[i] &lt;= maxResolution) {'],[0,'                            zoom = i;'],[0,'                            break;'],[-1,'                        }'],[-1,'                    }'],[-1,'                } '],[-1,'            }'],[-1,'        }'],[0,'        return zoom;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getMinZoom'],[-1,'     * Returns the minimum zoom level for the current map view. If the base'],[-1,'     * layer is configured with &lt;wrapDateLine&gt; set to true, this will be the'],[-1,'     * first zoom level that shows no more than one world width in the current'],[-1,'     * map viewport. Components that rely on this value (e.g. zoom sliders)'],[-1,'     * should also listen to the map\'s \&quot;updatesize\&quot; event and call this method'],[-1,'     * in the \&quot;updatesize\&quot; listener.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number} Minimum zoom level that shows a map not wider than its'],[-1,'     * &lt;baseLayer&gt;\'s maxExtent. This is an Integer value, unless the map is'],[-1,'     * configured with &lt;fractionalZoom&gt; set to true.'],[-1,'     *\/'],[-1,'    getMinZoom: function() {'],[0,'        return this.adjustZoom(0);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     * zoom - {Integer}'],[-1,'     * options - {Object}'],[-1,'     *\/'],[-1,'    moveTo: function(lonlat, zoom, options) {'],[0,'        if (lonlat != null &amp;&amp; !(lonlat instanceof OpenLayers.LonLat)) {'],[0,'            lonlat = new OpenLayers.LonLat(lonlat);'],[-1,'        }'],[0,'        if (!options) { '],[0,'            options = {};'],[-1,'        }'],[0,'        if (zoom != null) {'],[0,'            zoom = parseFloat(zoom);'],[0,'            if (!this.fractionalZoom) {'],[0,'                zoom = Math.round(zoom);'],[-1,'            }'],[-1,'        }'],[0,'        var requestedZoom = zoom;'],[0,'        zoom = this.adjustZoom(zoom);'],[0,'        if (zoom !== requestedZoom) {'],[-1,'            \/\/ zoom was adjusted, so keep old lonlat to avoid panning'],[0,'            lonlat = this.getCenter();'],[-1,'        }'],[-1,'        \/\/ dragging is false by default'],[0,'        var dragging = options.dragging || this.dragging;'],[-1,'        \/\/ forceZoomChange is false by default'],[0,'        var forceZoomChange = options.forceZoomChange;'],[-1,''],[0,'        if (!this.getCachedCenter() &amp;&amp; !this.isValidLonLat(lonlat)) {'],[0,'            lonlat = this.maxExtent.getCenterLonLat();'],[0,'            this.center = lonlat.clone();'],[-1,'        }'],[-1,''],[0,'        if(this.restrictedExtent != null) {'],[-1,'            \/\/ In 3.0, decide if we want to change interpretation of maxExtent.'],[0,'            if(lonlat == null) { '],[0,'                lonlat = this.center; '],[-1,'            }'],[0,'            if(zoom == null) { '],[0,'                zoom = this.getZoom(); '],[-1,'            }'],[0,'            var resolution = this.getResolutionForZoom(zoom);'],[0,'            var extent = this.calculateBounds(lonlat, resolution); '],[0,'            if(!this.restrictedExtent.containsBounds(extent)) {'],[0,'                var maxCenter = this.restrictedExtent.getCenterLonLat(); '],[0,'                if(extent.getWidth() &gt; this.restrictedExtent.getWidth()) { '],[0,'                    lonlat = new OpenLayers.LonLat(maxCenter.lon, lonlat.lat); '],[0,'                } else if(extent.left &lt; this.restrictedExtent.left) {'],[0,'                    lonlat = lonlat.add(this.restrictedExtent.left -'],[-1,'                                        extent.left, 0); '],[0,'                } else if(extent.right &gt; this.restrictedExtent.right) { '],[0,'                    lonlat = lonlat.add(this.restrictedExtent.right -'],[-1,'                                        extent.right, 0); '],[-1,'                } '],[0,'                if(extent.getHeight() &gt; this.restrictedExtent.getHeight()) { '],[0,'                    lonlat = new OpenLayers.LonLat(lonlat.lon, maxCenter.lat); '],[0,'                } else if(extent.bottom &lt; this.restrictedExtent.bottom) { '],[0,'                    lonlat = lonlat.add(0, this.restrictedExtent.bottom -'],[-1,'                                        extent.bottom); '],[-1,'                } '],[0,'                else if(extent.top &gt; this.restrictedExtent.top) { '],[0,'                    lonlat = lonlat.add(0, this.restrictedExtent.top -'],[-1,'                                        extent.top); '],[-1,'                } '],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        var zoomChanged = forceZoomChange || ('],[-1,'                            (this.isValidZoomLevel(zoom)) &amp;&amp; '],[-1,'                            (zoom != this.getZoom()) );'],[-1,''],[0,'        var centerChanged = (this.isValidLonLat(lonlat)) &amp;&amp; '],[-1,'                            (!lonlat.equals(this.center));'],[-1,''],[-1,'        \/\/ if neither center nor zoom will change, no need to do anything'],[0,'        if (zoomChanged || centerChanged || dragging) {'],[0,'            dragging || this.events.triggerEvent(\&quot;movestart\&quot;, {'],[-1,'                zoomChanged: zoomChanged'],[-1,'            });'],[-1,''],[0,'            if (centerChanged) {'],[0,'                if (!zoomChanged &amp;&amp; this.center) { '],[-1,'                    \/\/ if zoom hasnt changed, just slide layerContainer'],[-1,'                    \/\/  (must be done before setting this.center to new value)'],[0,'                    this.centerLayerContainer(lonlat);'],[-1,'                }'],[0,'                this.center = lonlat.clone();'],[-1,'            }'],[-1,''],[0,'            var res = zoomChanged ?'],[-1,'                this.getResolutionForZoom(zoom) : this.getResolution();'],[-1,'            \/\/ (re)set the layerContainerDiv\'s location'],[0,'            if (zoomChanged || this.layerContainerOrigin == null) {'],[0,'                this.layerContainerOrigin = this.getCachedCenter();'],[0,'                this.layerContainerOriginPx.x = 0;'],[0,'                this.layerContainerOriginPx.y = 0;'],[0,'                this.applyTransform();'],[0,'                var maxExtent = this.getMaxExtent({restricted: true});'],[0,'                var maxExtentCenter = maxExtent.getCenterLonLat();'],[0,'                var lonDelta = this.center.lon - maxExtentCenter.lon;'],[0,'                var latDelta = maxExtentCenter.lat - this.center.lat;'],[0,'                var extentWidth = Math.round(maxExtent.getWidth() \/ res);'],[0,'                var extentHeight = Math.round(maxExtent.getHeight() \/ res);'],[0,'                this.minPx = {'],[-1,'                    x: (this.size.w - extentWidth) \/ 2 - lonDelta \/ res,'],[-1,'                    y: (this.size.h - extentHeight) \/ 2 - latDelta \/ res'],[-1,'                };'],[0,'                this.maxPx = {'],[-1,'                    x: this.minPx.x + Math.round(maxExtent.getWidth() \/ res),'],[-1,'                    y: this.minPx.y + Math.round(maxExtent.getHeight() \/ res)'],[-1,'                };'],[-1,'            }'],[-1,''],[0,'            if (zoomChanged) {'],[0,'                this.zoom = zoom;'],[0,'                this.resolution = res;'],[-1,'            }    '],[-1,'            '],[0,'            var bounds = this.getExtent();'],[-1,'            '],[-1,'            \/\/send the move call to the baselayer and all the overlays    '],[-1,''],[0,'            if(this.baseLayer.visibility) {'],[0,'                this.baseLayer.moveTo(bounds, zoomChanged, options.dragging);'],[0,'                options.dragging || this.baseLayer.events.triggerEvent('],[-1,'                    \&quot;moveend\&quot;, {zoomChanged: zoomChanged}'],[-1,'                );'],[-1,'            }'],[-1,'            '],[0,'            bounds = this.baseLayer.getExtent();'],[-1,'            '],[0,'            for (var i=this.layers.length-1; i&gt;=0; --i) {'],[0,'                var layer = this.layers[i];'],[0,'                if (layer !== this.baseLayer &amp;&amp; !layer.isBaseLayer) {'],[0,'                    var inRange = layer.calculateInRange();'],[0,'                    if (layer.inRange != inRange) {'],[-1,'                        \/\/ the inRange property has changed. If the layer is'],[-1,'                        \/\/ no longer in range, we turn it off right away. If'],[-1,'                        \/\/ the layer is no longer out of range, the moveTo'],[-1,'                        \/\/ call below will turn on the layer.'],[0,'                        layer.inRange = inRange;'],[0,'                        if (!inRange) {'],[0,'                            layer.display(false);'],[-1,'                        }'],[-1,''],[-1,'                    }'],[0,'                    if (inRange &amp;&amp; layer.visibility) {'],[0,'                        layer.moveTo(bounds, zoomChanged, options.dragging);'],[0,'                        options.dragging || layer.events.triggerEvent('],[-1,'                            \&quot;moveend\&quot;, {zoomChanged: zoomChanged}'],[-1,'                        );'],[-1,'                    }'],[-1,'                }                '],[-1,'            }'],[-1,'            '],[0,'            this.events.triggerEvent(\&quot;move\&quot;);'],[0,'            dragging || this.events.triggerEvent(\&quot;moveend\&quot;);'],[-1,''],[0,'            if (zoomChanged) {'],[-1,'                \/\/redraw popups'],[0,'                for (var i=0, len=this.popups.length; i&lt;len; i++) {'],[0,'                    this.popups[i].updatePosition();'],[-1,'                }'],[0,'                this.events.triggerEvent(\&quot;zoomend\&quot;);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: centerLayerContainer'],[-1,'     * This function takes care to recenter the layerContainerDiv.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     *\/'],[-1,'    centerLayerContainer: function (lonlat) {'],[0,'        var originPx = this.getViewPortPxFromLonLat(this.layerContainerOrigin);'],[0,'        var newPx = this.getViewPortPxFromLonLat(lonlat);'],[-1,''],[0,'        if ((originPx != null) &amp;&amp; (newPx != null)) {'],[0,'            var oldLeft = this.layerContainerOriginPx.x;'],[0,'            var oldTop = this.layerContainerOriginPx.y;'],[0,'            var newLeft = Math.round(originPx.x - newPx.x);'],[0,'            var newTop = Math.round(originPx.y - newPx.y);'],[0,'            this.applyTransform('],[-1,'                (this.layerContainerOriginPx.x = newLeft),'],[-1,'                (this.layerContainerOriginPx.y = newTop));'],[0,'            var dx = oldLeft - newLeft;'],[0,'            var dy = oldTop - newTop;'],[0,'            this.minPx.x -= dx;'],[0,'            this.maxPx.x -= dx;'],[0,'            this.minPx.y -= dy;'],[0,'            this.maxPx.y -= dy;'],[-1,'        }        '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: isValidZoomLevel'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * zoomLevel - {Integer}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the zoom level passed in is non-null and '],[-1,'     *           within the min\/max range of zoom levels.'],[-1,'     *\/'],[-1,'    isValidZoomLevel: function(zoomLevel) {'],[0,'        return ( (zoomLevel != null) &amp;&amp;'],[-1,'                 (zoomLevel &gt;= 0) &amp;&amp; '],[-1,'                 (zoomLevel &lt; this.getNumZoomLevels()) );'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: isValidLonLat'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the lonlat passed in is non-null and within'],[-1,'     *           the maxExtent bounds'],[-1,'     *\/'],[-1,'    isValidLonLat: function(lonlat) {'],[0,'        var valid = false;'],[0,'        if (lonlat != null) {'],[0,'            var maxExtent = this.getMaxExtent();'],[0,'            var worldBounds = this.baseLayer.wrapDateLine &amp;&amp; maxExtent;'],[0,'            valid = maxExtent.containsLonLat(lonlat, {worldBounds: worldBounds});'],[-1,'        }'],[0,'        return valid;'],[-1,'    },'],[-1,''],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*                 Layer Options                        *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*    Accessor functions to Layer Options parameters    *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getProjection'],[-1,'     * This method returns a string representing the projection. In '],[-1,'     *     the case of projection support, this will be the srsCode which'],[-1,'     *     is loaded -- otherwise it will simply be the string value that'],[-1,'     *     was passed to the projection at startup.'],[-1,'     *'],[-1,'     * FIXME: In 3.0, we will remove getProjectionObject, and instead'],[-1,'     *     return a Projection object from this function. '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} The Projection string from the base layer or null. '],[-1,'     *\/'],[-1,'    getProjection: function() {'],[0,'        var projection = this.getProjectionObject();'],[0,'        return projection ? projection.getCode() : null;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getProjectionObject'],[-1,'     * Returns the projection obect from the baselayer.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Projection&gt;} The Projection of the base layer.'],[-1,'     *\/'],[-1,'    getProjectionObject: function() {'],[0,'        var projection = null;'],[0,'        if (this.baseLayer != null) {'],[0,'            projection = this.baseLayer.projection;'],[-1,'        }'],[0,'        return projection;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getMaxResolution'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} The Map\'s Maximum Resolution'],[-1,'     *\/'],[-1,'    getMaxResolution: function() {'],[0,'        var maxResolution = null;'],[0,'        if (this.baseLayer != null) {'],[0,'            maxResolution = this.baseLayer.maxResolution;'],[-1,'        }'],[0,'        return maxResolution;'],[-1,'    },'],[-1,'        '],[-1,'    \/**'],[-1,'     * APIMethod: getMaxExtent'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} '],[-1,'     * '],[-1,'     * Allowed Options:'],[-1,'     * restricted - {Boolean} If true, returns restricted extent (if it is '],[-1,'     *     available.)'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} The maxExtent property as set on the current '],[-1,'     *     baselayer, unless the \'restricted\' option is set, in which case'],[-1,'     *     the \'restrictedExtent\' option from the map is returned (if it'],[-1,'     *     is set).'],[-1,'     *\/'],[-1,'    getMaxExtent: function (options) {'],[0,'        var maxExtent = null;'],[0,'        if(options &amp;&amp; options.restricted &amp;&amp; this.restrictedExtent){'],[0,'            maxExtent = this.restrictedExtent;'],[0,'        } else if (this.baseLayer != null) {'],[0,'            maxExtent = this.baseLayer.maxExtent;'],[-1,'        }        '],[0,'        return maxExtent;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getNumZoomLevels'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer} The total number of zoom levels that can be displayed by the '],[-1,'     *           current baseLayer.'],[-1,'     *\/'],[-1,'    getNumZoomLevels: function() {'],[0,'        var numZoomLevels = null;'],[0,'        if (this.baseLayer != null) {'],[0,'            numZoomLevels = this.baseLayer.numZoomLevels;'],[-1,'        }'],[0,'        return numZoomLevels;'],[-1,'    },'],[-1,''],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*                 Baselayer Functions                  *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*    The following functions, all publicly exposed     *\/'],[-1,'  \/*       in the API?, are all merely wrappers to the    *\/'],[-1,'  \/*       the same calls on whatever layer is set as     *\/'],[-1,'  \/*                the current base layer                *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getExtent'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} A Bounds object which represents the lon\/lat '],[-1,'     *                       bounds of the current viewPort. '],[-1,'     *                       If no baselayer is set, returns null.'],[-1,'     *\/'],[-1,'    getExtent: function () {'],[0,'        var extent = null;'],[0,'        if (this.baseLayer != null) {'],[0,'            extent = this.baseLayer.getExtent();'],[-1,'        }'],[0,'        return extent;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getResolution'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The current resolution of the map. '],[-1,'     *         If no baselayer is set, returns null.'],[-1,'     *\/'],[-1,'    getResolution: function () {'],[0,'        var resolution = null;'],[0,'        if (this.baseLayer != null) {'],[0,'            resolution = this.baseLayer.getResolution();'],[0,'        } else if(this.allOverlays === true &amp;&amp; this.layers.length &gt; 0) {'],[-1,'            \/\/ while adding the 1st layer to the map in allOverlays mode,'],[-1,'            \/\/ this.baseLayer is not set yet when we need the resolution'],[-1,'            \/\/ for calculateInRange.'],[0,'            resolution = this.layers[0].getResolution();'],[-1,'        }'],[0,'        return resolution;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getUnits'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The current units of the map. '],[-1,'     *         If no baselayer is set, returns null.'],[-1,'     *\/'],[-1,'    getUnits: function () {'],[0,'        var units = null;'],[0,'        if (this.baseLayer != null) {'],[0,'            units = this.baseLayer.units;'],[-1,'        }'],[0,'        return units;'],[-1,'    },'],[-1,''],[-1,'     \/**'],[-1,'      * APIMethod: getScale'],[-1,'      * '],[-1,'      * Returns:'],[-1,'      * {Float} The current scale denominator of the map. '],[-1,'      *         If no baselayer is set, returns null.'],[-1,'      *\/'],[-1,'    getScale: function () {'],[0,'        var scale = null;'],[0,'        if (this.baseLayer != null) {'],[0,'            var res = this.getResolution();'],[0,'            var units = this.baseLayer.units;'],[0,'            scale = OpenLayers.Util.getScaleFromResolution(res, units);'],[-1,'        }'],[0,'        return scale;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getZoomForExtent'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * closest - {Boolean} Find the zoom level that most closely fits the '],[-1,'     *     specified bounds. Note that this may result in a zoom that does '],[-1,'     *     not exactly contain the entire extent.'],[-1,'     *     Default is false.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer} A suitable zoom level for the specified bounds.'],[-1,'     *           If no baselayer is set, returns null.'],[-1,'     *\/'],[-1,'    getZoomForExtent: function (bounds, closest) {'],[0,'        var zoom = null;'],[0,'        if (this.baseLayer != null) {'],[0,'            zoom = this.baseLayer.getZoomForExtent(bounds, closest);'],[-1,'        }'],[0,'        return zoom;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getResolutionForZoom'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * zoom - {Float}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} A suitable resolution for the specified zoom.  If no baselayer'],[-1,'     *     is set, returns null.'],[-1,'     *\/'],[-1,'    getResolutionForZoom: function(zoom) {'],[0,'        var resolution = null;'],[0,'        if(this.baseLayer) {'],[0,'            resolution = this.baseLayer.getResolutionForZoom(zoom);'],[-1,'        }'],[0,'        return resolution;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getZoomForResolution'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * resolution - {Float}'],[-1,'     * closest - {Boolean} Find the zoom level that corresponds to the absolute '],[-1,'     *     closest resolution, which may result in a zoom whose corresponding'],[-1,'     *     resolution is actually smaller than we would have desired (if this'],[-1,'     *     is being called from a getZoomForExtent() call, then this means that'],[-1,'     *     the returned zoom index might not actually contain the entire '],[-1,'     *     extent specified... but it\'ll be close).'],[-1,'     *     Default is false.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer} A suitable zoom level for the specified resolution.'],[-1,'     *           If no baselayer is set, returns null.'],[-1,'     *\/'],[-1,'    getZoomForResolution: function(resolution, closest) {'],[0,'        var zoom = null;'],[0,'        if (this.baseLayer != null) {'],[0,'            zoom = this.baseLayer.getZoomForResolution(resolution, closest);'],[-1,'        }'],[0,'        return zoom;'],[-1,'    },'],[-1,''],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*                  Zooming Functions                   *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*    The following functions, all publicly exposed     *\/'],[-1,'  \/*       in the API, are all merely wrappers to the     *\/'],[-1,'  \/*               the setCenter() function               *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/'],[-1,'  '],[-1,'    \/** '],[-1,'     * APIMethod: zoomTo'],[-1,'     * Zoom to a specific zoom level. Zooming will be animated unless the map'],[-1,'     * is configured with {zoomMethod: null}. To zoom without animation, use'],[-1,'     * &lt;setCenter&gt; without a lonlat argument.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * zoom - {Integer}'],[-1,'     *\/'],[-1,'    zoomTo: function(zoom, xy) {'],[-1,'        \/\/ non-API arguments:'],[-1,'        \/\/ xy - {&lt;OpenLayers.Pixel&gt;} optional zoom origin'],[-1,'        '],[0,'        var map = this;'],[0,'        if (map.isValidZoomLevel(zoom)) {'],[0,'            if (map.baseLayer.wrapDateLine) {'],[0,'                zoom = map.adjustZoom(zoom);'],[-1,'            }'],[0,'            if (map.zoomTween) {'],[0,'                var currentRes = map.getResolution(),'],[-1,'                    targetRes = map.getResolutionForZoom(zoom),'],[-1,'                    start = {scale: 1},'],[-1,'                    end = {scale: currentRes \/ targetRes};'],[0,'                if (map.zoomTween.playing &amp;&amp; map.zoomTween.duration &lt; 3 * map.zoomDuration) {'],[-1,'                    \/\/ update the end scale, and reuse the running zoomTween'],[0,'                    map.zoomTween.finish = {'],[-1,'                        scale: map.zoomTween.finish.scale * end.scale'],[-1,'                    };'],[-1,'                } else {'],[0,'                    if (!xy) {'],[0,'                        var size = map.getSize();'],[0,'                        xy = {x: size.w \/ 2, y: size.h \/ 2};'],[-1,'                    }'],[0,'                    map.zoomTween.start(start, end, map.zoomDuration, {'],[-1,'                        minFrameRate: 50, \/\/ don\'t spend much time zooming'],[-1,'                        callbacks: {'],[-1,'                            eachStep: function(data) {'],[0,'                                var containerOrigin = map.layerContainerOriginPx,'],[-1,'                                    scale = data.scale,'],[-1,'                                    dx = ((scale - 1) * (containerOrigin.x - xy.x)) | 0,'],[-1,'                                    dy = ((scale - 1) * (containerOrigin.y - xy.y)) | 0;'],[0,'                                map.applyTransform(containerOrigin.x + dx, containerOrigin.y + dy, scale);'],[-1,'                            },'],[-1,'                            done: function(data) {'],[0,'                                map.applyTransform();'],[0,'                                var resolution = map.getResolution() \/ data.scale,'],[-1,'                                    zoom = map.getZoomForResolution(resolution, true)'],[0,'                                map.moveTo(map.getZoomTargetCenter(xy, resolution), zoom, true);'],[-1,'                            }'],[-1,'                        }'],[-1,'                    });'],[-1,'                }'],[-1,'            } else {'],[0,'                var center = xy ?'],[-1,'                    map.getZoomTargetCenter(xy, map.getResolutionForZoom(zoom)) :'],[-1,'                    null;'],[0,'                map.setCenter(center, zoom);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'        '],[-1,'    \/**'],[-1,'     * APIMethod: zoomIn'],[-1,'     * '],[-1,'     *\/'],[-1,'    zoomIn: function() {'],[0,'        this.zoomTo(this.getZoom() + 1);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: zoomOut'],[-1,'     * '],[-1,'     *\/'],[-1,'    zoomOut: function() {'],[0,'        this.zoomTo(this.getZoom() - 1);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: zoomToExtent'],[-1,'     * Zoom to the passed in bounds, recenter'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;|Array} If provided as an array, the array'],[-1,'     *     should consist of four values (left, bottom, right, top).'],[-1,'     * closest - {Boolean} Find the zoom level that most closely fits the '],[-1,'     *     specified bounds. Note that this may result in a zoom that does '],[-1,'     *     not exactly contain the entire extent.'],[-1,'     *     Default is false.'],[-1,'     * '],[-1,'     *\/'],[-1,'    zoomToExtent: function(bounds, closest) {'],[0,'        if (!(bounds instanceof OpenLayers.Bounds)) {'],[0,'            bounds = new OpenLayers.Bounds(bounds);'],[-1,'        }'],[0,'        var center = bounds.getCenterLonLat();'],[0,'        if (this.baseLayer.wrapDateLine) {'],[0,'            var maxExtent = this.getMaxExtent();'],[-1,''],[-1,'            \/\/fix straddling bounds (in the case of a bbox that straddles the '],[-1,'            \/\/ dateline, it\'s left and right boundaries will appear backwards. '],[-1,'            \/\/ we fix this by allowing a right value that is greater than the'],[-1,'            \/\/ max value at the dateline -- this allows us to pass a valid '],[-1,'            \/\/ bounds to calculate zoom)'],[-1,'            \/\/'],[0,'            bounds = bounds.clone();'],[0,'            while (bounds.right &lt; bounds.left) {'],[0,'                bounds.right += maxExtent.getWidth();'],[-1,'            }'],[-1,'            \/\/if the bounds was straddling (see above), then the center point '],[-1,'            \/\/ we got from it was wrong. So we take our new bounds and ask it'],[-1,'            \/\/ for the center.'],[-1,'            \/\/'],[0,'            center = bounds.getCenterLonLat().wrapDateLine(maxExtent);'],[-1,'        }'],[0,'        this.setCenter(center, this.getZoomForExtent(bounds, closest));'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: zoomToMaxExtent'],[-1,'     * Zoom to the full extent and recenter.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object}'],[-1,'     * '],[-1,'     * Allowed Options:'],[-1,'     * restricted - {Boolean} True to zoom to restricted extent if it is '],[-1,'     *     set. Defaults to true.'],[-1,'     *\/'],[-1,'    zoomToMaxExtent: function(options) {'],[-1,'        \/\/restricted is true by default'],[0,'        var restricted = (options) ? options.restricted : true;'],[-1,''],[0,'        var maxExtent = this.getMaxExtent({'],[-1,'            \'restricted\': restricted '],[-1,'        });'],[0,'        this.zoomToExtent(maxExtent);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: zoomToScale'],[-1,'     * Zoom to a specified scale '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * scale - {float}'],[-1,'     * closest - {Boolean} Find the zoom level that most closely fits the '],[-1,'     *     specified scale. Note that this may result in a zoom that does '],[-1,'     *     not exactly contain the entire extent.'],[-1,'     *     Default is false.'],[-1,'     * '],[-1,'     *\/'],[-1,'    zoomToScale: function(scale, closest) {'],[0,'        var res = OpenLayers.Util.getResolutionFromScale(scale, '],[-1,'                                                         this.baseLayer.units);'],[-1,''],[0,'        var halfWDeg = (this.size.w * res) \/ 2;'],[0,'        var halfHDeg = (this.size.h * res) \/ 2;'],[0,'        var center = this.getCachedCenter();'],[-1,''],[0,'        var extent = new OpenLayers.Bounds(center.lon - halfWDeg,'],[-1,'                                           center.lat - halfHDeg,'],[-1,'                                           center.lon + halfWDeg,'],[-1,'                                           center.lat + halfHDeg);'],[0,'        this.zoomToExtent(extent, closest);'],[-1,'    },'],[-1,'    '],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*             Translation Functions                    *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*      The following functions translate between       *\/'],[-1,'  \/*           LonLat, LayerPx, and ViewPortPx            *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/'],[-1,'      '],[-1,'  \/\/'],[-1,'  \/\/ TRANSLATION: LonLat &lt;-&gt; ViewPortPx'],[-1,'  \/\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getLonLatFromViewPortPx'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * viewPortPx - {&lt;OpenLayers.Pixel&gt;|Object} An OpenLayers.Pixel or'],[-1,'     *                                          an object with a \'x\''],[-1,'     *                                          and \'y\' properties.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} An OpenLayers.LonLat which is the passed-in view '],[-1,'     *                       port &lt;OpenLayers.Pixel&gt;, translated into lon\/lat'],[-1,'     *                       by the current base layer.'],[-1,'     *\/'],[-1,'    getLonLatFromViewPortPx: function (viewPortPx) {'],[0,'        var lonlat = null; '],[0,'        if (this.baseLayer != null) {'],[0,'            lonlat = this.baseLayer.getLonLatFromViewPortPx(viewPortPx);'],[-1,'        }'],[0,'        return lonlat;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getViewPortPxFromLonLat'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} An OpenLayers.Pixel which is the passed-in '],[-1,'     *                      &lt;OpenLayers.LonLat&gt;, translated into view port '],[-1,'     *                      pixels by the current base layer.'],[-1,'     *\/'],[-1,'    getViewPortPxFromLonLat: function (lonlat) {'],[0,'        var px = null; '],[0,'        if (this.baseLayer != null) {'],[0,'            px = this.baseLayer.getViewPortPxFromLonLat(lonlat);'],[-1,'        }'],[0,'        return px;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getZoomTargetCenter'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * xy - {&lt;OpenLayers.Pixel&gt;} The zoom origin pixel location on the screen'],[-1,'     * resolution - {Float} The resolution we want to get the center for'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} The location of the map center after the'],[-1,'     *     transformation described by the origin xy and the target resolution.'],[-1,'     *\/'],[-1,'    getZoomTargetCenter: function (xy, resolution) {'],[0,'        var lonlat = null,'],[-1,'            size = this.getSize(),'],[-1,'            deltaX  = size.w\/2 - xy.x,'],[-1,'            deltaY  = xy.y - size.h\/2,'],[-1,'            zoomPoint = this.getLonLatFromPixel(xy);'],[0,'        if (zoomPoint) {'],[0,'            lonlat = new OpenLayers.LonLat('],[-1,'                zoomPoint.lon + deltaX * resolution,'],[-1,'                zoomPoint.lat + deltaY * resolution'],[-1,'            );'],[-1,'        }'],[0,'        return lonlat;'],[-1,'    },'],[-1,'        '],[-1,'  \/\/'],[-1,'  \/\/ CONVENIENCE TRANSLATION FUNCTIONS FOR API'],[-1,'  \/\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getLonLatFromPixel'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;|Object} An OpenLayers.Pixel or an object with'],[-1,'     *                                  a \'x\' and \'y\' properties.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} An OpenLayers.LonLat corresponding to the given'],[-1,'     *                       OpenLayers.Pixel, translated into lon\/lat by the '],[-1,'     *                       current base layer'],[-1,'     *\/'],[-1,'    getLonLatFromPixel: function (px) {'],[0,'        return this.getLonLatFromViewPortPx(px);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getPixelFromLonLat'],[-1,'     * Returns a pixel location given a map location.  The map location is'],[-1,'     *     translated to an integer pixel location (in viewport pixel'],[-1,'     *     coordinates) by the current base layer.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;} A map location.'],[-1,'     * '],[-1,'     * Returns: '],[-1,'     * {&lt;OpenLayers.Pixel&gt;} An OpenLayers.Pixel corresponding to the '],[-1,'     *     &lt;OpenLayers.LonLat&gt; translated into view port pixels by the current'],[-1,'     *     base layer.'],[-1,'     *\/'],[-1,'    getPixelFromLonLat: function (lonlat) {'],[0,'        var px = this.getViewPortPxFromLonLat(lonlat);'],[0,'        px.x = Math.round(px.x);'],[0,'        px.y = Math.round(px.y);'],[0,'        return px;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getGeodesicPixelSize'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;} The pixel to get the geodesic length for. If'],[-1,'     *     not provided, the center pixel of the map viewport will be used.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Size&gt;} The geodesic size of the pixel in kilometers.'],[-1,'     *\/'],[-1,'    getGeodesicPixelSize: function(px) {'],[0,'        var lonlat = px ? this.getLonLatFromPixel(px) : ('],[-1,'            this.getCachedCenter() || new OpenLayers.LonLat(0, 0));'],[0,'        var res = this.getResolution();'],[0,'        var left = lonlat.add(-res \/ 2, 0);'],[0,'        var right = lonlat.add(res \/ 2, 0);'],[0,'        var bottom = lonlat.add(0, -res \/ 2);'],[0,'        var top = lonlat.add(0, res \/ 2);'],[0,'        var dest = new OpenLayers.Projection(\&quot;EPSG:4326\&quot;);'],[0,'        var source = this.getProjectionObject() || dest;'],[0,'        if(!source.equals(dest)) {'],[0,'            left.transform(source, dest);'],[0,'            right.transform(source, dest);'],[0,'            bottom.transform(source, dest);'],[0,'            top.transform(source, dest);'],[-1,'        }'],[-1,'        '],[0,'        return new OpenLayers.Size('],[-1,'            OpenLayers.Util.distVincenty(left, right),'],[-1,'            OpenLayers.Util.distVincenty(bottom, top)'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,''],[-1,''],[-1,'  \/\/'],[-1,'  \/\/ TRANSLATION: ViewPortPx &lt;-&gt; LayerPx'],[-1,'  \/\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getViewPortPxFromLayerPx'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * layerPx - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} Layer Pixel translated into ViewPort Pixel '],[-1,'     *                      coordinates'],[-1,'     *\/'],[-1,'    getViewPortPxFromLayerPx:function(layerPx) {'],[0,'        var viewPortPx = null;'],[0,'        if (layerPx != null) {'],[0,'            var dX = this.layerContainerOriginPx.x;'],[0,'            var dY = this.layerContainerOriginPx.y;'],[0,'            viewPortPx = layerPx.add(dX, dY);            '],[-1,'        }'],[0,'        return viewPortPx;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getLayerPxFromViewPortPx'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * viewPortPx - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} ViewPort Pixel translated into Layer Pixel '],[-1,'     *                      coordinates'],[-1,'     *\/'],[-1,'    getLayerPxFromViewPortPx:function(viewPortPx) {'],[0,'        var layerPx = null;'],[0,'        if (viewPortPx != null) {'],[0,'            var dX = -this.layerContainerOriginPx.x;'],[0,'            var dY = -this.layerContainerOriginPx.y;'],[0,'            layerPx = viewPortPx.add(dX, dY);'],[0,'            if (isNaN(layerPx.x) || isNaN(layerPx.y)) {'],[0,'                layerPx = null;'],[-1,'            }'],[-1,'        }'],[0,'        return layerPx;'],[-1,'    },'],[-1,'    '],[-1,'  \/\/'],[-1,'  \/\/ TRANSLATION: LonLat &lt;-&gt; LayerPx'],[-1,'  \/\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getLonLatFromLayerPx'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;}'],[-1,'     *\/'],[-1,'    getLonLatFromLayerPx: function (px) {'],[-1,'       \/\/adjust for displacement of layerContainerDiv'],[0,'       px = this.getViewPortPxFromLayerPx(px);'],[0,'       return this.getLonLatFromViewPortPx(px);         '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getLayerPxFromLonLat'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;} lonlat'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} An OpenLayers.Pixel which is the passed-in '],[-1,'     *                      &lt;OpenLayers.LonLat&gt;, translated into layer pixels '],[-1,'     *                      by the current base layer'],[-1,'     *\/'],[-1,'    getLayerPxFromLonLat: function (lonlat) {'],[-1,'       \/\/adjust for displacement of layerContainerDiv'],[0,'       var px = this.getPixelFromLonLat(lonlat);'],[0,'       return this.getLayerPxFromViewPortPx(px);         '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: applyTransform'],[-1,'     * Applies the given transform to the &lt;layerContainerDiv&gt;. This method has'],[-1,'     * a 2-stage fallback from translate3d\/scale3d via translate\/scale to plain'],[-1,'     * style.left\/style.top, in which case no scaling is supported.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x - {Number} x parameter for the translation. Defaults to the x value of'],[-1,'     *     the map\'s &lt;layerContainerOriginPx&gt;'],[-1,'     * y - {Number} y parameter for the translation. Defaults to the y value of'],[-1,'     *     the map\'s &lt;layerContainerOriginPx&gt;'],[-1,'     * scale - {Number} scale. Defaults to 1 if not provided.'],[-1,'     *\/'],[-1,'     applyTransform: function(x, y, scale) {'],[0,'         scale = scale || 1;'],[0,'         var origin = this.layerContainerOriginPx,'],[-1,'             needTransform = scale !== 1;'],[0,'         x = x || origin.x;'],[0,'         y = y || origin.y;'],[-1,'            '],[0,'         var style = this.layerContainerDiv.style,'],[-1,'             transform = this.applyTransform.transform,'],[-1,'             template = this.applyTransform.template;'],[-1,'        '],[0,'         if (transform === undefined) {'],[0,'             transform = OpenLayers.Util.vendorPrefix.style(\'transform\');'],[0,'             this.applyTransform.transform = transform;'],[0,'             if (transform) {'],[-1,'                 \/\/ Try translate3d, but only if the viewPortDiv has a transform'],[-1,'                 \/\/ defined in a stylesheet'],[0,'                 var computedStyle = OpenLayers.Element.getStyle(this.viewPortDiv,'],[-1,'                     OpenLayers.Util.vendorPrefix.css(\'transform\'));'],[0,'                 if (!computedStyle || computedStyle !== \'none\') {'],[0,'                     template = [\'translate3d(\', \',0) \', \'scale3d(\', \',1)\'];'],[0,'                     style[transform] = [template[0], \'0,0\', template[1]].join(\'\');'],[-1,'                 }'],[-1,'                 \/\/ If no transform is defined in the stylesheet or translate3d'],[-1,'                 \/\/ does not stick, use translate and scale'],[0,'                 if (!template || !~style[transform].indexOf(template[0])) {'],[0,'                     template = [\'translate(\', \') \', \'scale(\', \')\'];'],[-1,'                 }'],[0,'                 this.applyTransform.template = template;'],[-1,'             }'],[-1,'         }'],[-1,'         '],[-1,'         \/\/ If we do 3d transforms, we always want to use them. If we do 2d'],[-1,'         \/\/ transforms, we only use them when we need to.'],[0,'         if (transform !== null &amp;&amp; (template[0] === \'translate3d(\' || needTransform === true)) {'],[-1,'             \/\/ Our 2d transforms are combined with style.left and style.top, so'],[-1,'             \/\/ adjust x and y values and set the origin as left and top'],[0,'             if (needTransform === true &amp;&amp; template[0] === \'translate(\') {'],[0,'                 x -= origin.x;'],[0,'                 y -= origin.y;'],[0,'                 style.left = origin.x + \'px\';'],[0,'                 style.top = origin.y + \'px\';'],[-1,'             }'],[0,'             style[transform] = ['],[-1,'                 template[0], x, \'px,\', y, \'px\', template[1],'],[-1,'                 template[2], scale, \',\', scale, template[3]'],[-1,'             ].join(\'\');'],[-1,'         } else {'],[0,'             style.left = x + \'px\';'],[0,'             style.top = y + \'px\';'],[-1,'             \/\/ We previously might have had needTransform, so remove transform'],[0,'             if (transform !== null) {'],[0,'                 style[transform] = \'\';'],[-1,'             }'],[-1,'         }'],[-1,'     },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Map\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Constant: TILE_WIDTH'],[-1,' * {Integer} 256 Default tile width (unless otherwise specified)'],[-1,' *\/'],[1,'OpenLayers.Map.TILE_WIDTH = 256;'],[-1,'\/**'],[-1,' * Constant: TILE_HEIGHT'],[-1,' * {Integer} 256 Default tile height (unless otherwise specified)'],[-1,' *\/'],[1,'OpenLayers.Map.TILE_HEIGHT = 256;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Events.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Handler'],[-1,' * Base class to construct a higher-level handler for event sequences.  All'],[-1,' *     handlers have activate and deactivate methods.  In addition, they have'],[-1,' *     methods named like browser events.  When a handler is activated, any'],[-1,' *     additional methods named like a browser event is registered as a'],[-1,' *     listener for the corresponding event.  When a handler is deactivated,'],[-1,' *     those same methods are unregistered as event listeners.'],[-1,' *'],[-1,' * Handlers also typically have a callbacks object with keys named like'],[-1,' *     the abstracted events or event sequences that they are in charge of'],[-1,' *     handling.  The controls that wrap handlers define the methods that'],[-1,' *     correspond to these abstract events - so instead of listening for'],[-1,' *     individual browser events, they only listen for the abstract events'],[-1,' *     defined by the handler.'],[-1,' *     '],[-1,' * Handlers are created by controls, which ultimately have the responsibility'],[-1,' *     of making changes to the the state of the application.  Handlers'],[-1,' *     themselves may make temporary changes, but in general are expected to'],[-1,' *     return the application in the same state that they found it.'],[-1,' *\/'],[1,'OpenLayers.Handler = OpenLayers.Class({'],[-1,''],[-1,'    \/**'],[-1,'     * Property: id'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    id: null,'],[-1,'        '],[-1,'    \/**'],[-1,'     * APIProperty: control'],[-1,'     * {&lt;OpenLayers.Control&gt;}. The control that initialized this handler.  The'],[-1,'     *     control is assumed to have a valid map property - that map is used'],[-1,'     *     in the handler\'s own setMap method.'],[-1,'     *\/'],[-1,'    control: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: map'],[-1,'     * {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    map: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: keyMask'],[-1,'     * {Integer} Use bitwise operators and one or more of the OpenLayers.Handler'],[-1,'     *     constants to construct a keyMask.  The keyMask is used by'],[-1,'     *     &lt;checkModifiers&gt;.  If the keyMask matches the combination of keys'],[-1,'     *     down on an event, checkModifiers returns true.'],[-1,'     *'],[-1,'     * Example:'],[-1,'     * (code)'],[-1,'     *     \/\/ handler only responds if the Shift key is down'],[-1,'     *     handler.keyMask = OpenLayers.Handler.MOD_SHIFT;'],[-1,'     *'],[-1,'     *     \/\/ handler only responds if Ctrl-Shift is down'],[-1,'     *     handler.keyMask = OpenLayers.Handler.MOD_SHIFT |'],[-1,'     *                       OpenLayers.Handler.MOD_CTRL;'],[-1,'     * (end)'],[-1,'     *\/'],[-1,'    keyMask: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: active'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    active: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: evt'],[-1,'     * {Event} This property references the last event handled by the handler.'],[-1,'     *     Note that this property is not part of the stable API.  Use of the'],[-1,'     *     evt property should be restricted to controls in the library'],[-1,'     *     or other applications that are willing to update with changes to'],[-1,'     *     the OpenLayers code.'],[-1,'     *\/'],[-1,'    evt: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler'],[-1,'     * Construct a handler.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} The control that initialized this'],[-1,'     *     handler.  The control is assumed to have a valid map property; that'],[-1,'     *     map is used in the handler\'s own setMap method.  If a map property'],[-1,'     *     is present in the options argument it will be used instead.'],[-1,'     * callbacks - {Object} An object whose properties correspond to abstracted'],[-1,'     *     events or sequences of browser events.  The values for these'],[-1,'     *     properties are functions defined by the control that get called by'],[-1,'     *     the handler.'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     the handler.'],[-1,'     *\/'],[-1,'    initialize: function(control, callbacks, options) {'],[0,'        OpenLayers.Util.extend(this, options);'],[0,'        this.control = control;'],[0,'        this.callbacks = callbacks;'],[-1,''],[0,'        var map = this.map || control.map;'],[0,'        if (map) {'],[0,'            this.setMap(map); '],[-1,'        }'],[-1,'        '],[0,'        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \&quot;_\&quot;);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     *\/'],[-1,'    setMap: function (map) {'],[0,'        this.map = map;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: checkModifiers'],[-1,'     * Check the keyMask on the handler.  If no &lt;keyMask&gt; is set, this always'],[-1,'     *     returns true.  If a &lt;keyMask&gt; is set and it matches the combination'],[-1,'     *     of keys down on an event, this returns true.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The keyMask matches the keys down on an event.'],[-1,'     *\/'],[-1,'    checkModifiers: function (evt) {'],[0,'        if(this.keyMask == null) {'],[0,'            return true;'],[-1,'        }'],[-1,'        \/* calculate the keyboard modifier mask for this event *\/'],[0,'        var keyModifiers ='],[-1,'            (evt.shiftKey ? OpenLayers.Handler.MOD_SHIFT : 0) |'],[-1,'            (evt.ctrlKey  ? OpenLayers.Handler.MOD_CTRL  : 0) |'],[-1,'            (evt.altKey   ? OpenLayers.Handler.MOD_ALT   : 0) |'],[-1,'            (evt.metaKey  ? OpenLayers.Handler.MOD_META  : 0);'],[-1,'    '],[-1,'        \/* if it differs from the handler object\'s key mask,'],[-1,'           bail out of the event handler *\/'],[0,'        return (keyModifiers == this.keyMask);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Turn on the handler.  Returns false if the handler was already active.'],[-1,'     * '],[-1,'     * Returns: '],[-1,'     * {Boolean} The handler was activated.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        if(this.active) {'],[0,'            return false;'],[-1,'        }'],[-1,'        \/\/ register for event handlers defined on this class.'],[0,'        var events = OpenLayers.Events.prototype.BROWSER_EVENTS;'],[0,'        for (var i=0, len=events.length; i&lt;len; i++) {'],[0,'            if (this[events[i]]) {'],[0,'                this.register(events[i], this[events[i]]); '],[-1,'            }'],[-1,'        } '],[0,'        this.active = true;'],[0,'        return true;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Turn off the handler.  Returns false if the handler was already inactive.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The handler was deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        if(!this.active) {'],[0,'            return false;'],[-1,'        }'],[-1,'        \/\/ unregister event handlers defined on this class.'],[0,'        var events = OpenLayers.Events.prototype.BROWSER_EVENTS;'],[0,'        for (var i=0, len=events.length; i&lt;len; i++) {'],[0,'            if (this[events[i]]) {'],[0,'                this.unregister(events[i], this[events[i]]); '],[-1,'            }'],[-1,'        } '],[0,'        this.active = false;'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'    * Method: callback'],[-1,'    * Trigger the control\'s named callback with the given arguments'],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * name - {String} The key for the callback that is one of the properties'],[-1,'    *     of the handler\'s callbacks object.'],[-1,'    * args - {Array(*)} An array of arguments (any type) with which to call '],[-1,'    *     the callback (defined by the control).'],[-1,'    *\/'],[-1,'    callback: function (name, args) {'],[0,'        if (name &amp;&amp; this.callbacks[name]) {'],[0,'            this.callbacks[name].apply(this.control, args);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'    * Method: register'],[-1,'    * register an event on the map'],[-1,'    *\/'],[-1,'    register: function (name, method) {'],[-1,'        \/\/ TODO: deal with registerPriority in 3.0'],[0,'        this.map.events.registerPriority(name, this, method);'],[0,'        this.map.events.registerPriority(name, this, this.setEvent);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'    * Method: unregister'],[-1,'    * unregister an event from the map'],[-1,'    *\/'],[-1,'    unregister: function (name, method) {'],[0,'        this.map.events.unregister(name, this, method);   '],[0,'        this.map.events.unregister(name, this, this.setEvent);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setEvent'],[-1,'     * With each registered browser event, the handler sets its own evt'],[-1,'     *     property.  This property can be accessed by controls if needed'],[-1,'     *     to get more information about the event that the handler is'],[-1,'     *     processing.'],[-1,'     *'],[-1,'     * This allows modifier keys on the event to be checked (alt, shift, ctrl,'],[-1,'     *     and meta cannot be checked with the keyboard handler).  For a'],[-1,'     *     control to determine which modifier keys are associated with the'],[-1,'     *     event that a handler is currently processing, it should access'],[-1,'     *     (code)handler.evt.altKey || handler.evt.shiftKey ||'],[-1,'     *     handler.evt.ctrlKey || handler.evt.metaKey(end).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event.'],[-1,'     *\/'],[-1,'    setEvent: function(evt) {'],[0,'        this.evt = evt;'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     * Deconstruct the handler.'],[-1,'     *\/'],[-1,'    destroy: function () {'],[-1,'        \/\/ unregister event listeners'],[0,'        this.deactivate();'],[-1,'        \/\/ eliminate circular references'],[0,'        this.control = this.map = null;        '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Handler.MOD_NONE'],[-1,' * If set as the &lt;keyMask&gt;, &lt;checkModifiers&gt; returns false if any key is down.'],[-1,' *\/'],[1,'OpenLayers.Handler.MOD_NONE  = 0;'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Handler.MOD_SHIFT'],[-1,' * If set as the &lt;keyMask&gt;, &lt;checkModifiers&gt; returns false if Shift is down.'],[-1,' *\/'],[1,'OpenLayers.Handler.MOD_SHIFT = 1;'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Handler.MOD_CTRL'],[-1,' * If set as the &lt;keyMask&gt;, &lt;checkModifiers&gt; returns false if Ctrl is down.'],[-1,' *\/'],[1,'OpenLayers.Handler.MOD_CTRL  = 2;'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Handler.MOD_ALT'],[-1,' * If set as the &lt;keyMask&gt;, &lt;checkModifiers&gt; returns false if Alt is down.'],[-1,' *\/'],[1,'OpenLayers.Handler.MOD_ALT   = 4;'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Handler.MOD_META'],[-1,' * If set as the &lt;keyMask&gt;, &lt;checkModifiers&gt; returns false if Cmd is down.'],[-1,' *\/'],[1,'OpenLayers.Handler.MOD_META  = 8;'],[-1,''],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler\/Click.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Handler.Click'],[-1,' * A handler for mouse clicks.  The intention of this handler is to give'],[-1,' *     controls more flexibility with handling clicks.  Browsers trigger'],[-1,' *     click events twice for a double-click.  In addition, the mousedown,'],[-1,' *     mousemove, mouseup sequence fires a click event.  With this handler,'],[-1,' *     controls can decide whether to ignore clicks associated with a double'],[-1,' *     click.  By setting a &lt;pixelTolerance&gt;, controls can also ignore clicks'],[-1,' *     that include a drag.  Create a new instance with the'],[-1,' *     &lt;OpenLayers.Handler.Click&gt; constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Handler&gt; '],[-1,' *\/'],[1,'OpenLayers.Handler.Click = OpenLayers.Class(OpenLayers.Handler, {'],[-1,'    \/**'],[-1,'     * APIProperty: delay'],[-1,'     * {Number} Number of milliseconds between clicks before the event is'],[-1,'     *     considered a double-click.'],[-1,'     *\/'],[-1,'    delay: 300,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: single'],[-1,'     * {Boolean} Handle single clicks.  Default is true.  If false, clicks'],[-1,'     * will not be reported.  If true, single-clicks will be reported.'],[-1,'     *\/'],[-1,'    single: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: double'],[-1,'     * {Boolean} Handle double-clicks.  Default is false.'],[-1,'     *\/'],[-1,'    \'double\': false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: pixelTolerance'],[-1,'     * {Number} Maximum number of pixels between mouseup and mousedown for an'],[-1,'     *     event to be considered a click.  Default is 0.  If set to an'],[-1,'     *     integer value, clicks with a drag greater than the value will be'],[-1,'     *     ignored.  This property can only be set when the handler is'],[-1,'     *     constructed.'],[-1,'     *\/'],[-1,'    pixelTolerance: 0,'],[-1,'        '],[-1,'    \/**'],[-1,'     * APIProperty: dblclickTolerance'],[-1,'     * {Number} Maximum distance in pixels between clicks for a sequence of '],[-1,'     *     events to be considered a double click.  Default is 13.  If the'],[-1,'     *     distance between two clicks is greater than this value, a double-'],[-1,'     *     click will not be fired.'],[-1,'     *\/'],[-1,'    dblclickTolerance: 13,'],[-1,'        '],[-1,'    \/**'],[-1,'     * APIProperty: stopSingle'],[-1,'     * {Boolean} Stop other listeners from being notified of clicks.  Default'],[-1,'     *     is false.  If true, any listeners registered before this one for '],[-1,'     *     click or rightclick events will not be notified.'],[-1,'     *\/'],[-1,'    stopSingle: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: stopDouble'],[-1,'     * {Boolean} Stop other listeners from being notified of double-clicks.'],[-1,'     *     Default is false.  If true, any click listeners registered before'],[-1,'     *     this one will not be notified of *any* double-click events.'],[-1,'     * '],[-1,'     * The one caveat with stopDouble is that given a map with two click'],[-1,'     *     handlers, one with stopDouble true and the other with stopSingle'],[-1,'     *     true, the stopSingle handler should be activated last to get'],[-1,'     *     uniform cross-browser performance.  Since IE triggers one click'],[-1,'     *     with a dblclick and FF triggers two, if a stopSingle handler is'],[-1,'     *     activated first, all it gets in IE is a single click when the'],[-1,'     *     second handler stops propagation on the dblclick.'],[-1,'     *\/'],[-1,'    stopDouble: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: timerId'],[-1,'     * {Number} The id of the timeout waiting to clear the &lt;delayedCall&gt;.'],[-1,'     *\/'],[-1,'    timerId: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: touch'],[-1,'     * {Boolean} When a touchstart event is fired, touch will be true and all'],[-1,'     *     mouse related listeners will do nothing.'],[-1,'     *\/'],[-1,'    touch: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: down'],[-1,'     * {Object} Object that store relevant information about the last'],[-1,'     *     mousedown or touchstart. Its \'xy\' OpenLayers.Pixel property gives'],[-1,'     *     the average location of the mouse\/touch event. Its \'touches\''],[-1,'     *     property records clientX\/clientY of each touches.'],[-1,'     *\/'],[-1,'    down: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: last'],[-1,'     * {Object} Object that store relevant information about the last'],[-1,'     *     mousemove or touchmove. Its \'xy\' OpenLayers.Pixel property gives'],[-1,'     *     the average location of the mouse\/touch event. Its \'touches\''],[-1,'     *     property records clientX\/clientY of each touches.'],[-1,'     *\/'],[-1,'    last: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: first'],[-1,'     * {Object} When waiting for double clicks, this object will store '],[-1,'     *     information about the first click in a two click sequence.'],[-1,'     *\/'],[-1,'    first: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: rightclickTimerId'],[-1,'     * {Number} The id of the right mouse timeout waiting to clear the '],[-1,'     *     &lt;delayedEvent&gt;.'],[-1,'     *\/'],[-1,'    rightclickTimerId: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler.Click'],[-1,'     * Create a new click handler.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} The control that is making use of'],[-1,'     *     this handler.  If a handler is being used without a control, the'],[-1,'     *     handler\'s setMap method must be overridden to deal properly with'],[-1,'     *     the map.'],[-1,'     * callbacks - {Object} An object with keys corresponding to callbacks'],[-1,'     *     that will be called by the handler. The callbacks should'],[-1,'     *     expect to recieve a single argument, the click event.'],[-1,'     *     Callbacks for \'click\' and \'dblclick\' are supported.'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     handler.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: touchstart'],[-1,'     * Handle touchstart.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Continue propagating this event.'],[-1,'     *\/'],[-1,'    touchstart: function(evt) {'],[0,'        if (!this.touch) {'],[0,'            this.unregisterMouseListeners();'],[0,'            this.touch = true;'],[-1,'        }'],[0,'        this.down = this.getEventInfo(evt);'],[0,'        this.last = this.getEventInfo(evt);'],[0,'        return true;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: touchmove'],[-1,'     *    Store position of last move, because touchend event can have'],[-1,'     *    an empty \&quot;touches\&quot; property.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Continue propagating this event.'],[-1,'     *\/'],[-1,'    touchmove: function(evt) {'],[0,'        this.last = this.getEventInfo(evt);'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: touchend'],[-1,'     *   Correctly set event xy property, and add lastTouches to have'],[-1,'     *   touches property from last touchstart or touchmove'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Continue propagating this event.'],[-1,'     *\/'],[-1,'    touchend: function(evt) {'],[-1,'        \/\/ touchstart may not have been allowed to propagate'],[0,'        if (this.down) {'],[0,'            evt.xy = this.last.xy;'],[0,'            evt.lastTouches = this.last.touches;'],[0,'            this.handleSingle(evt);'],[0,'            this.down = null;'],[-1,'        }'],[0,'        return true;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: unregisterMouseListeners'],[-1,'     * In a touch environment, we don\'t want to handle mouse events.'],[-1,'     *\/'],[-1,'    unregisterMouseListeners: function() {'],[0,'        this.map.events.un({'],[-1,'            mousedown: this.mousedown,'],[-1,'            mouseup: this.mouseup,'],[-1,'            click: this.click,'],[-1,'            dblclick: this.dblclick,'],[-1,'            scope: this'],[-1,'        });'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mousedown'],[-1,'     * Handle mousedown.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Continue propagating this event.'],[-1,'     *\/'],[-1,'    mousedown: function(evt) {'],[0,'        this.down = this.getEventInfo(evt);'],[0,'        this.last = this.getEventInfo(evt);'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mouseup'],[-1,'     * Handle mouseup.  Installed to support collection of right mouse events.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Continue propagating this event.'],[-1,'     *\/'],[-1,'    mouseup: function (evt) {'],[0,'        var propagate = true;'],[-1,''],[-1,'        \/\/ Collect right mouse clicks from the mouseup'],[-1,'        \/\/  IE - ignores the second right click in mousedown so using'],[-1,'        \/\/  mouseup instead'],[0,'        if (this.checkModifiers(evt) &amp;&amp; this.control.handleRightClicks &amp;&amp;'],[-1,'           OpenLayers.Event.isRightClick(evt)) {'],[0,'            propagate = this.rightclick(evt);'],[-1,'        }'],[-1,''],[0,'        return propagate;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: rightclick'],[-1,'     * Handle rightclick.  For a dblrightclick, we get two clicks so we need '],[-1,'     *     to always register for dblrightclick to properly handle single '],[-1,'     *     clicks.'],[-1,'     *     '],[-1,'     * Returns:'],[-1,'     * {Boolean} Continue propagating this event.'],[-1,'     *\/'],[-1,'    rightclick: function(evt) {'],[0,'        if(this.passesTolerance(evt)) {'],[0,'           if(this.rightclickTimerId != null) {'],[-1,'                \/\/Second click received before timeout this must be '],[-1,'                \/\/ a double click'],[0,'                this.clearTimer();'],[0,'                this.callback(\'dblrightclick\', [evt]);'],[0,'                return !this.stopDouble;'],[-1,'            } else { '],[-1,'                \/\/Set the rightclickTimerId, send evt only if double is '],[-1,'                \/\/ true else trigger single'],[0,'                var clickEvent = this[\'double\'] ?'],[-1,'                    OpenLayers.Util.extend({}, evt) : '],[-1,'                    this.callback(\'rightclick\', [evt]);'],[-1,''],[0,'                var delayedRightCall = OpenLayers.Function.bind('],[-1,'                    this.delayedRightCall, '],[-1,'                    this, '],[-1,'                    clickEvent'],[-1,'                );'],[0,'                this.rightclickTimerId = window.setTimeout('],[-1,'                    delayedRightCall, this.delay'],[-1,'                );'],[-1,'            } '],[-1,'        }'],[0,'        return !this.stopSingle;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: delayedRightCall'],[-1,'     * Sets &lt;rightclickTimerId&gt; to null.  And optionally triggers the '],[-1,'     *     rightclick callback if evt is set.'],[-1,'     *\/'],[-1,'    delayedRightCall: function(evt) {'],[0,'        this.rightclickTimerId = null;'],[0,'        if (evt) {'],[0,'           this.callback(\'rightclick\', [evt]);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: click'],[-1,'     * Handle click events from the browser.  This is registered as a listener'],[-1,'     *     for click events and should not be called from other events in this'],[-1,'     *     handler.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Continue propagating this event.'],[-1,'     *\/'],[-1,'    click: function(evt) {'],[0,'        if (!this.last) {'],[0,'            this.last = this.getEventInfo(evt);'],[-1,'        }'],[0,'        this.handleSingle(evt);'],[0,'        return !this.stopSingle;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: dblclick'],[-1,'     * Handle dblclick.  For a dblclick, we get two clicks in some browsers'],[-1,'     *     (FF) and one in others (IE).  So we need to always register for'],[-1,'     *     dblclick to properly handle single clicks.  This method is registered'],[-1,'     *     as a listener for the dblclick browser event.  It should *not* be'],[-1,'     *     called by other methods in this handler.'],[-1,'     *     '],[-1,'     * Returns:'],[-1,'     * {Boolean} Continue propagating this event.'],[-1,'     *\/'],[-1,'    dblclick: function(evt) {'],[0,'        this.handleDouble(evt);'],[0,'        return !this.stopDouble;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: handleDouble'],[-1,'     * Handle double-click sequence.'],[-1,'     *\/'],[-1,'    handleDouble: function(evt) {'],[0,'        if (this.passesDblclickTolerance(evt)) {'],[0,'            if (this[\&quot;double\&quot;]) {'],[0,'                this.callback(\&quot;dblclick\&quot;, [evt]);'],[-1,'            }'],[-1,'            \/\/ to prevent a dblclick from firing the click callback in IE'],[0,'            this.clearTimer();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: handleSingle'],[-1,'     * Handle single click sequence.'],[-1,'     *\/'],[-1,'    handleSingle: function(evt) {'],[0,'        if (this.passesTolerance(evt)) {'],[0,'            if (this.timerId != null) {'],[-1,'                \/\/ already received a click'],[0,'                if (this.last.touches &amp;&amp; this.last.touches.length === 1) {'],[-1,'                    \/\/ touch device, no dblclick event - this may be a double'],[0,'                    if (this[\&quot;double\&quot;]) {'],[-1,'                        \/\/ on Android don\'t let the browser zoom on the page'],[0,'                        OpenLayers.Event.preventDefault(evt);'],[-1,'                    }'],[0,'                    this.handleDouble(evt);'],[-1,'                }'],[-1,'                \/\/ if we\'re not in a touch environment we clear the click timer'],[-1,'                \/\/ if we\'ve got a second touch, we\'ll get two touchend events'],[0,'                if (!this.last.touches || this.last.touches.length !== 2) {'],[0,'                    this.clearTimer();'],[-1,'                }'],[-1,'            } else {'],[-1,'                \/\/ remember the first click info so we can compare to the second'],[0,'                this.first = this.getEventInfo(evt);'],[-1,'                \/\/ set the timer, send evt only if single is true'],[-1,'                \/\/use a clone of the event object because it will no longer '],[-1,'                \/\/be a valid event object in IE in the timer callback'],[0,'                var clickEvent = this.single ?'],[-1,'                    OpenLayers.Util.extend({}, evt) : null;'],[0,'                this.queuePotentialClick(clickEvent);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: queuePotentialClick'],[-1,'     * This method is separated out largely to make testing easier (so we'],[-1,'     *     don\'t have to override window.setTimeout)'],[-1,'     *\/'],[-1,'    queuePotentialClick: function(evt) {'],[0,'        this.timerId = window.setTimeout('],[-1,'            OpenLayers.Function.bind(this.delayedCall, this, evt),'],[-1,'            this.delay'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: passesTolerance'],[-1,'     * Determine whether the event is within the optional pixel tolerance.  Note'],[-1,'     *     that the pixel tolerance check only works if mousedown events get to'],[-1,'     *     the listeners registered here.  If they are stopped by other elements,'],[-1,'     *     the &lt;pixelTolerance&gt; will have no effect here (this method will always'],[-1,'     *     return true).'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The click is within the pixel tolerance (if specified).'],[-1,'     *\/'],[-1,'    passesTolerance: function(evt) {'],[0,'        var passes = true;'],[0,'        if (this.pixelTolerance != null &amp;&amp; this.down &amp;&amp; this.down.xy) {'],[0,'            passes = this.pixelTolerance &gt;= this.down.xy.distanceTo(evt.xy);'],[-1,'            \/\/ for touch environments, we also enforce that all touches'],[-1,'            \/\/ start and end within the given tolerance to be considered a click'],[0,'            if (passes &amp;&amp; this.touch &amp;&amp; '],[-1,'                this.down.touches.length === this.last.touches.length) {'],[-1,'                \/\/ the touchend event doesn\'t come with touches, so we check'],[-1,'                \/\/ down and last'],[0,'                for (var i=0, ii=this.down.touches.length; i&lt;ii; ++i) {'],[0,'                    if (this.getTouchDistance('],[-1,'                            this.down.touches[i], '],[-1,'                            this.last.touches[i]'],[-1,'                        ) &gt; this.pixelTolerance) {'],[0,'                        passes = false;'],[0,'                        break;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return passes;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: getTouchDistance'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The pixel displacement between two touches.'],[-1,'     *\/'],[-1,'    getTouchDistance: function(from, to) {'],[0,'        return Math.sqrt('],[-1,'            Math.pow(from.clientX - to.clientX, 2) +'],[-1,'            Math.pow(from.clientY - to.clientY, 2)'],[-1,'        );'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: passesDblclickTolerance'],[-1,'     * Determine whether the event is within the optional double-cick pixel '],[-1,'     *     tolerance.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The click is within the double-click pixel tolerance.'],[-1,'     *\/'],[-1,'    passesDblclickTolerance: function(evt) {'],[0,'        var passes = true;'],[0,'        if (this.down &amp;&amp; this.first) {'],[0,'            passes = this.down.xy.distanceTo(this.first.xy) &lt;= this.dblclickTolerance;'],[-1,'        }'],[0,'        return passes;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clearTimer'],[-1,'     * Clear the timer and set &lt;timerId&gt; to null.'],[-1,'     *\/'],[-1,'    clearTimer: function() {'],[0,'        if (this.timerId != null) {'],[0,'            window.clearTimeout(this.timerId);'],[0,'            this.timerId = null;'],[-1,'        }'],[0,'        if (this.rightclickTimerId != null) {'],[0,'            window.clearTimeout(this.rightclickTimerId);'],[0,'            this.rightclickTimerId = null;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: delayedCall'],[-1,'     * Sets &lt;timerId&gt; to null.  And optionally triggers the click callback if'],[-1,'     *     evt is set.'],[-1,'     *\/'],[-1,'    delayedCall: function(evt) {'],[0,'        this.timerId = null;'],[0,'        if (evt) {'],[0,'            this.callback(\&quot;click\&quot;, [evt]);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getEventInfo'],[-1,'     * This method allows us to store event information without storing the'],[-1,'     *     actual event.  In touch devices (at least), the same event is '],[-1,'     *     modified between touchstart, touchmove, and touchend.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object with event related info.'],[-1,'     *\/'],[-1,'    getEventInfo: function(evt) {'],[0,'        var touches;'],[0,'        if (evt.touches) {'],[0,'            var len = evt.touches.length;'],[0,'            touches = new Array(len);'],[0,'            var touch;'],[0,'            for (var i=0; i&lt;len; i++) {'],[0,'                touch = evt.touches[i];'],[0,'                touches[i] = {'],[-1,'                    clientX: touch.olClientX,'],[-1,'                    clientY: touch.olClientY'],[-1,'                };'],[-1,'            }'],[-1,'        }'],[0,'        return {'],[-1,'            xy: evt.xy,'],[-1,'            touches: touches'],[-1,'        };'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the handler.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The handler was successfully deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = false;'],[0,'        if(OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {'],[0,'            this.clearTimer();'],[0,'            this.down = null;'],[0,'            this.first = null;'],[0,'            this.last = null;'],[0,'            this.touch = false;'],[0,'            deactivated = true;'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler.Click\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler\/Drag.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Handler.Drag'],[-1,' * The drag handler is used to deal with sequences of browser events related'],[-1,' *     to dragging.  The handler is used by controls that want to know when'],[-1,' *     a drag sequence begins, when a drag is happening, and when it has'],[-1,' *     finished.'],[-1,' *'],[-1,' * Controls that use the drag handler typically construct it with callbacks'],[-1,' *     for \'down\', \'move\', and \'done\'.  Callbacks for these keys are called'],[-1,' *     when the drag begins, with each move, and when the drag is done.  In'],[-1,' *     addition, controls can have callbacks keyed to \'up\' and \'out\' if they'],[-1,' *     care to differentiate between the types of events that correspond with'],[-1,' *     the end of a drag sequence.  If no drag actually occurs (no mouse move)'],[-1,' *     the \'down\' and \'up\' callbacks will be called, but not the \'done\''],[-1,' *     callback.'],[-1,' *'],[-1,' * Create a new drag handler with the &lt;OpenLayers.Handler.Drag&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Handler&gt;'],[-1,' *\/'],[1,'OpenLayers.Handler.Drag = OpenLayers.Class(OpenLayers.Handler, {'],[-1,'  '],[-1,'    \/** '],[-1,'     * Property: started'],[-1,'     * {Boolean} When a mousedown or touchstart event is received, we want to'],[-1,'     * record it, but not set \'dragging\' until the mouse moves after starting.'],[-1,'     *\/'],[-1,'    started: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: stopDown'],[-1,'     * {Boolean} Stop propagation of mousedown events from getting to listeners'],[-1,'     *     on the same element.  Default is true.'],[-1,'     *\/'],[-1,'    stopDown: true,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: dragging '],[-1,'     * {Boolean} '],[-1,'     *\/'],[-1,'    dragging: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: touch'],[-1,'     * {Boolean} When a touchstart event is fired, touch will be true and all'],[-1,'     *     mouse related listeners will do nothing.'],[-1,'     *\/'],[-1,'    touch: false,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: last'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} The last pixel location of the drag.'],[-1,'     *\/'],[-1,'    last: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: start'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} The first pixel location of the drag.'],[-1,'     *\/'],[-1,'    start: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: lastMoveEvt'],[-1,'     * {Object} The last mousemove event that occurred. Used to'],[-1,'     *     position the map correctly when our \&quot;delay drag\&quot;'],[-1,'     *     timeout expired.'],[-1,'     *\/'],[-1,'    lastMoveEvt: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: oldOnselectstart'],[-1,'     * {Function}'],[-1,'     *\/'],[-1,'    oldOnselectstart: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: interval'],[-1,'     * {Integer} In order to increase performance, an interval (in '],[-1,'     *     milliseconds) can be set to reduce the number of drag events '],[-1,'     *     called. If set, a new drag event will not be set until the '],[-1,'     *     interval has passed. '],[-1,'     *     Defaults to 0, meaning no interval. '],[-1,'     *\/'],[-1,'    interval: 0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: timeoutId'],[-1,'     * {String} The id of the timeout used for the mousedown interval.'],[-1,'     *     This is \&quot;private\&quot;, and should be left alone.'],[-1,'     *\/'],[-1,'    timeoutId: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: documentDrag'],[-1,'     * {Boolean} If set to true, the handler will also handle mouse moves when'],[-1,'     *     the cursor has moved out of the map viewport. Default is false.'],[-1,'     *\/'],[-1,'    documentDrag: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: documentEvents'],[-1,'     * {Boolean} Are we currently observing document events?'],[-1,'     *\/'],[-1,'    documentEvents: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler.Drag'],[-1,'     * Returns OpenLayers.Handler.Drag'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} The control that is making use of'],[-1,'     *     this handler.  If a handler is being used without a control, the'],[-1,'     *     handlers setMap method must be overridden to deal properly with'],[-1,'     *     the map.'],[-1,'     * callbacks - {Object} An object containing a single function to be'],[-1,'     *     called when the drag operation is finished. The callback should'],[-1,'     *     expect to recieve a single argument, the pixel location of the event.'],[-1,'     *     Callbacks for \'move\' and \'done\' are supported. You can also speficy'],[-1,'     *     callbacks for \'down\', \'up\', and \'out\' to respond to those events.'],[-1,'     * options - {Object} '],[-1,'     *\/'],[-1,'    initialize: function(control, callbacks, options) {'],[0,'        OpenLayers.Handler.prototype.initialize.apply(this, arguments);'],[-1,'        '],[0,'        if (this.documentDrag === true) {'],[0,'            var me = this;'],[0,'            this._docMove = function(evt) {'],[0,'                me.mousemove({'],[-1,'                    xy: {x: evt.clientX, y: evt.clientY},'],[-1,'                    element: document'],[-1,'                });'],[-1,'            };'],[0,'            this._docUp = function(evt) {'],[0,'                me.mouseup({xy: {x: evt.clientX, y: evt.clientY}});'],[-1,'            };'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: dragstart'],[-1,'     * This private method is factorized from mousedown and touchstart methods'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The event'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    dragstart: function (evt) {'],[0,'        var propagate = true;'],[0,'        this.dragging = false;'],[0,'        if (this.checkModifiers(evt) &amp;&amp;'],[-1,'               (OpenLayers.Event.isLeftClick(evt) ||'],[-1,'                OpenLayers.Event.isSingleTouch(evt))) {'],[0,'            this.started = true;'],[0,'            this.start = evt.xy;'],[0,'            this.last = evt.xy;'],[0,'            OpenLayers.Element.addClass('],[-1,'                this.map.viewPortDiv, \&quot;olDragDown\&quot;'],[-1,'            );'],[0,'            this.down(evt);'],[0,'            this.callback(\&quot;down\&quot;, [evt.xy]);'],[-1,''],[-1,'            \/\/ prevent document dragging'],[0,'            OpenLayers.Event.preventDefault(evt);'],[-1,''],[0,'            if(!this.oldOnselectstart) {'],[0,'                this.oldOnselectstart = document.onselectstart ?'],[-1,'                    document.onselectstart : OpenLayers.Function.True;'],[-1,'            }'],[0,'            document.onselectstart = OpenLayers.Function.False;'],[-1,''],[0,'            propagate = !this.stopDown;'],[-1,'        } else {'],[0,'            this.started = false;'],[0,'            this.start = null;'],[0,'            this.last = null;'],[-1,'        }'],[0,'        return propagate;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: dragmove'],[-1,'     * This private method is factorized from mousemove and touchmove methods'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The event'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    dragmove: function (evt) {'],[0,'        this.lastMoveEvt = evt;'],[0,'        if (this.started &amp;&amp; !this.timeoutId &amp;&amp; (evt.xy.x != this.last.x ||'],[-1,'                                                evt.xy.y != this.last.y)) {'],[0,'            if(this.documentDrag === true &amp;&amp; this.documentEvents) {'],[0,'                if(evt.element === document) {'],[0,'                    this.adjustXY(evt);'],[-1,'                    \/\/ do setEvent manually because the documentEvents are not'],[-1,'                    \/\/ registered with the map'],[0,'                    this.setEvent(evt);'],[-1,'                } else {'],[0,'                    this.removeDocumentEvents();'],[-1,'                }'],[-1,'            }'],[0,'            if (this.interval &gt; 0) {'],[0,'                this.timeoutId = setTimeout('],[-1,'                    OpenLayers.Function.bind(this.removeTimeout, this),'],[-1,'                    this.interval);'],[-1,'            }'],[0,'            this.dragging = true;'],[-1,''],[0,'            this.move(evt);'],[0,'            this.callback(\&quot;move\&quot;, [evt.xy]);'],[0,'            if(!this.oldOnselectstart) {'],[0,'                this.oldOnselectstart = document.onselectstart;'],[0,'                document.onselectstart = OpenLayers.Function.False;'],[-1,'            }'],[0,'            this.last = evt.xy;'],[-1,'        }'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: dragend'],[-1,'     * This private method is factorized from mouseup and touchend methods'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The event'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    dragend: function (evt) {'],[0,'        if (this.started) {'],[0,'            if(this.documentDrag === true &amp;&amp; this.documentEvents) {'],[0,'                this.adjustXY(evt);'],[0,'                this.removeDocumentEvents();'],[-1,'            }'],[0,'            var dragged = (this.start != this.last);'],[0,'            this.started = false;'],[0,'            this.dragging = false;'],[0,'            OpenLayers.Element.removeClass('],[-1,'                this.map.viewPortDiv, \&quot;olDragDown\&quot;'],[-1,'            );'],[0,'            this.up(evt);'],[0,'            this.callback(\&quot;up\&quot;, [evt.xy]);'],[0,'            if(dragged) {'],[0,'                this.callback(\&quot;done\&quot;, [evt.xy]);'],[-1,'            }'],[0,'            document.onselectstart = this.oldOnselectstart;'],[-1,'        }'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * The four methods below (down, move, up, and out) are used by subclasses'],[-1,'     *     to do their own processing related to these mouse events.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: down'],[-1,'     * This method is called during the handling of the mouse down event.'],[-1,'     *     Subclasses can do their own processing here.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The mouse down event'],[-1,'     *\/'],[-1,'    down: function(evt) {'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: move'],[-1,'     * This method is called during the handling of the mouse move event.'],[-1,'     *     Subclasses can do their own processing here.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The mouse move event'],[-1,'     *'],[-1,'     *\/'],[-1,'    move: function(evt) {'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: up'],[-1,'     * This method is called during the handling of the mouse up event.'],[-1,'     *     Subclasses can do their own processing here.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The mouse up event'],[-1,'     *\/'],[-1,'    up: function(evt) {'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: out'],[-1,'     * This method is called during the handling of the mouse out event.'],[-1,'     *     Subclasses can do their own processing here.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The mouse out event'],[-1,'     *\/'],[-1,'    out: function(evt) {'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * The methods below are part of the magic of event handling.  Because'],[-1,'     *     they are named like browser events, they are registered as listeners'],[-1,'     *     for the events they represent.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mousedown'],[-1,'     * Handle mousedown events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    mousedown: function(evt) {'],[0,'        return this.dragstart(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: touchstart'],[-1,'     * Handle touchstart events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    touchstart: function(evt) {'],[0,'        if (!this.touch) {'],[0,'            this.touch = true;'],[-1,'            \/\/ unregister mouse listeners'],[0,'            this.map.events.un({'],[-1,'                mousedown: this.mousedown,'],[-1,'                mouseup: this.mouseup,'],[-1,'                mousemove: this.mousemove,'],[-1,'                click: this.click,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        return this.dragstart(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mousemove'],[-1,'     * Handle mousemove events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    mousemove: function(evt) {'],[0,'        return this.dragmove(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: touchmove'],[-1,'     * Handle touchmove events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    touchmove: function(evt) {'],[0,'        return this.dragmove(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: removeTimeout'],[-1,'     * Private. Called by mousemove() to remove the drag timeout.'],[-1,'     *\/'],[-1,'    removeTimeout: function() {'],[0,'        this.timeoutId = null;'],[-1,'        \/\/ if timeout expires while we\'re still dragging (mouseup'],[-1,'        \/\/ hasn\'t occurred) then call mousemove to move to the'],[-1,'        \/\/ correct position'],[0,'        if(this.dragging) {'],[0,'            this.mousemove(this.lastMoveEvt);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mouseup'],[-1,'     * Handle mouseup events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    mouseup: function(evt) {'],[0,'        return this.dragend(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: touchend'],[-1,'     * Handle touchend events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    touchend: function(evt) {'],[-1,'        \/\/ override evt.xy with last position since touchend does not have'],[-1,'        \/\/ any touch position'],[0,'        evt.xy = this.last;'],[0,'        return this.dragend(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mouseout'],[-1,'     * Handle mouseout events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    mouseout: function (evt) {'],[0,'        if (this.started &amp;&amp; OpenLayers.Util.mouseLeft(evt, this.map.viewPortDiv)) {'],[0,'            if(this.documentDrag === true) {'],[0,'                this.addDocumentEvents();'],[-1,'            } else {'],[0,'                var dragged = (this.start != this.last);'],[0,'                this.started = false; '],[0,'                this.dragging = false;'],[0,'                OpenLayers.Element.removeClass('],[-1,'                    this.map.viewPortDiv, \&quot;olDragDown\&quot;'],[-1,'                );'],[0,'                this.out(evt);'],[0,'                this.callback(\&quot;out\&quot;, []);'],[0,'                if(dragged) {'],[0,'                    this.callback(\&quot;done\&quot;, [evt.xy]);'],[-1,'                }'],[0,'                if(document.onselectstart) {'],[0,'                    document.onselectstart = this.oldOnselectstart;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: click'],[-1,'     * The drag handler captures the click event.  If something else registers'],[-1,'     *     for clicks on the same element, its listener will not be called '],[-1,'     *     after a drag.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * evt - {Event} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    click: function (evt) {'],[-1,'        \/\/ let the click event propagate only if the mouse moved'],[0,'        return (this.start == this.last);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: activate'],[-1,'     * Activate the handler.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The handler was successfully activated.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = false;'],[0,'        if(OpenLayers.Handler.prototype.activate.apply(this, arguments)) {'],[0,'            this.dragging = false;'],[0,'            activated = true;'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: deactivate '],[-1,'     * Deactivate the handler.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The handler was successfully deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = false;'],[0,'        if(OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {'],[0,'            this.touch = false;'],[0,'            this.started = false;'],[0,'            this.dragging = false;'],[0,'            this.start = null;'],[0,'            this.last = null;'],[0,'            deactivated = true;'],[0,'            OpenLayers.Element.removeClass('],[-1,'                this.map.viewPortDiv, \&quot;olDragDown\&quot;'],[-1,'            );'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: adjustXY'],[-1,'     * Converts event coordinates that are relative to the document body to'],[-1,'     * ones that are relative to the map viewport. The latter is the default in'],[-1,'     * OpenLayers.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Object}'],[-1,'     *\/'],[-1,'    adjustXY: function(evt) {'],[0,'        var pos = OpenLayers.Util.pagePosition(this.map.viewPortDiv);'],[0,'        evt.xy.x -= pos[0];'],[0,'        evt.xy.y -= pos[1];'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addDocumentEvents'],[-1,'     * Start observing document events when documentDrag is true and the mouse'],[-1,'     * cursor leaves the map viewport while dragging.'],[-1,'     *\/'],[-1,'    addDocumentEvents: function() {'],[0,'        OpenLayers.Element.addClass(document.body, \&quot;olDragDown\&quot;);'],[0,'        this.documentEvents = true;'],[0,'        OpenLayers.Event.observe(document, \&quot;mousemove\&quot;, this._docMove);'],[0,'        OpenLayers.Event.observe(document, \&quot;mouseup\&quot;, this._docUp);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: removeDocumentEvents'],[-1,'     * Stops observing document events when documentDrag is true and the mouse'],[-1,'     * cursor re-enters the map viewport while dragging.'],[-1,'     *\/'],[-1,'    removeDocumentEvents: function() {'],[0,'        OpenLayers.Element.removeClass(document.body, \&quot;olDragDown\&quot;);'],[0,'        this.documentEvents = false;'],[0,'        OpenLayers.Event.stopObserving(document, \&quot;mousemove\&quot;, this._docMove);'],[0,'        OpenLayers.Event.stopObserving(document, \&quot;mouseup\&quot;, this._docUp);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler.Drag\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/OverviewMap.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/** '],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/BaseTypes.js'],[-1,' * @requires OpenLayers\/Events\/buttonclick.js'],[-1,' * @requires OpenLayers\/Map.js'],[-1,' * @requires OpenLayers\/Handler\/Click.js'],[-1,' * @requires OpenLayers\/Handler\/Drag.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.OverviewMap'],[-1,' * The OverMap control creates a small overview map, useful to display the '],[-1,' * extent of a zoomed map and your main map and provide additional '],[-1,' * navigation options to the User.  By default the overview map is drawn in'],[-1,' * the lower right corner of the main map. Create a new overview map with the'],[-1,' * &lt;OpenLayers.Control.OverviewMap&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.OverviewMap = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: element'],[-1,'     * {DOMElement} The DOM element that contains the overview map'],[-1,'     *\/'],[-1,'    element: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: ovmap'],[-1,'     * {&lt;OpenLayers.Map&gt;} A reference to the overview map itself.'],[-1,'     *\/'],[-1,'    ovmap: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: size'],[-1,'     * {&lt;OpenLayers.Size&gt;} The overvew map size in pixels.  Note that this is'],[-1,'     * the size of the map itself - the element that contains the map (default'],[-1,'     * class name olControlOverviewMapElement) may have padding or other style'],[-1,'     * attributes added via CSS.'],[-1,'     *\/'],[-1,'    size: {w: 180, h: 90},'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layers'],[-1,'     * {Array(&lt;OpenLayers.Layer&gt;)} Ordered list of layers in the overview map.'],[-1,'     * If none are sent at construction, the base layer for the main map is used.'],[-1,'     *\/'],[-1,'    layers: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: minRectSize'],[-1,'     * {Integer} The minimum width or height (in pixels) of the extent'],[-1,'     *     rectangle on the overview map.  When the extent rectangle reaches'],[-1,'     *     this size, it will be replaced depending on the value of the'],[-1,'     *     &lt;minRectDisplayClass&gt; property.  Default is 15 pixels.'],[-1,'     *\/'],[-1,'    minRectSize: 15,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: minRectDisplayClass'],[-1,'     * {String} Replacement style class name for the extent rectangle when'],[-1,'     *     &lt;minRectSize&gt; is reached.  This string will be suffixed on to the'],[-1,'     *     displayClass.  Default is \&quot;RectReplacement\&quot;.'],[-1,'     *'],[-1,'     * Example CSS declaration:'],[-1,'     * (code)'],[-1,'     * .olControlOverviewMapRectReplacement {'],[-1,'     *     overflow: hidden;'],[-1,'     *     cursor: move;'],[-1,'     *     background-image: url(\&quot;img\/overview_replacement.gif\&quot;);'],[-1,'     *     background-repeat: no-repeat;'],[-1,'     *     background-position: center;'],[-1,'     * }'],[-1,'     * (end)'],[-1,'     *\/'],[-1,'    minRectDisplayClass: \&quot;RectReplacement\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: minRatio'],[-1,'     * {Float} The ratio of the overview map resolution to the main map'],[-1,'     *     resolution at which to zoom farther out on the overview map.'],[-1,'     *\/'],[-1,'    minRatio: 8,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxRatio'],[-1,'     * {Float} The ratio of the overview map resolution to the main map'],[-1,'     *     resolution at which to zoom farther in on the overview map.'],[-1,'     *\/'],[-1,'    maxRatio: 32,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: mapOptions'],[-1,'     * {Object} An object containing any non-default properties to be sent to'],[-1,'     *     the overview map\'s map constructor.  These should include any'],[-1,'     *     non-default options that the main map was constructed with.'],[-1,'     *\/'],[-1,'    mapOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: autoPan'],[-1,'     * {Boolean} Always pan the overview map, so the extent marker remains in'],[-1,'     *     the center.  Default is false.  If true, when you drag the extent'],[-1,'     *     marker, the overview map will update itself so the marker returns'],[-1,'     *     to the center.'],[-1,'     *\/'],[-1,'    autoPan: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: handlers'],[-1,'     * {Object}'],[-1,'     *\/'],[-1,'    handlers: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: resolutionFactor'],[-1,'     * {Object}'],[-1,'     *\/'],[-1,'    resolutionFactor: 1,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maximized'],[-1,'     * {Boolean} Start as maximized (visible). Defaults to false.'],[-1,'     *\/'],[-1,'    maximized: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maximizeTitle'],[-1,'     * {String}  This property is used for showing a tooltip over the  '],[-1,'     * maximize div. Defaults to \&quot;\&quot; (no title).'],[-1,'     *\/ '],[-1,'    maximizeTitle: \&quot;\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: minimizeTitle'],[-1,'     * {String}  This property is used for showing a tooltip over the  '],[-1,'     * minimize div. Defaults to \&quot;\&quot; (no title).'],[-1,'     *\/ '],[-1,'    minimizeTitle: \&quot;\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.OverviewMap'],[-1,'     * Create a new overview map'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Properties of this object will be set on the overview'],[-1,'     * map object.  Note, to set options on the map object contained in this'],[-1,'     * control, set &lt;mapOptions&gt; as one of the options properties.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        this.layers = [];'],[0,'        this.handlers = {};'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Deconstruct the control'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if (!this.mapDiv) { \/\/ we\'ve already been destroyed'],[0,'            return;'],[-1,'        }'],[0,'        if (this.handlers.click) {'],[0,'            this.handlers.click.destroy();'],[-1,'        }'],[0,'        if (this.handlers.drag) {'],[0,'            this.handlers.drag.destroy();'],[-1,'        }'],[-1,''],[0,'        this.ovmap &amp;&amp; this.ovmap.viewPortDiv.removeChild(this.extentRectangle);'],[0,'        this.extentRectangle = null;'],[-1,''],[0,'        if (this.rectEvents) {'],[0,'            this.rectEvents.destroy();'],[0,'            this.rectEvents = null;'],[-1,'        }'],[-1,''],[0,'        if (this.ovmap) {'],[0,'            this.ovmap.destroy();'],[0,'            this.ovmap = null;'],[-1,'        }'],[-1,'        '],[0,'        this.element.removeChild(this.mapDiv);'],[0,'        this.mapDiv = null;'],[-1,''],[0,'        this.div.removeChild(this.element);'],[0,'        this.element = null;'],[-1,''],[0,'        if (this.maximizeDiv) {'],[0,'            this.div.removeChild(this.maximizeDiv);'],[0,'            this.maximizeDiv = null;'],[-1,'        }'],[-1,'        '],[0,'        if (this.minimizeDiv) {'],[0,'            this.div.removeChild(this.minimizeDiv);'],[0,'            this.minimizeDiv = null;'],[-1,'        }'],[-1,''],[0,'        this.map.events.un({'],[-1,'            buttonclick: this.onButtonClick,'],[-1,'            moveend: this.update,'],[-1,'            changebaselayer: this.baseLayerDraw,'],[-1,'            scope: this'],[-1,'        });'],[-1,''],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments);    '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * Render the control in the browser.'],[-1,'     *\/    '],[-1,'    draw: function() {'],[0,'        OpenLayers.Control.prototype.draw.apply(this, arguments);'],[0,'        if (this.layers.length === 0) {'],[0,'            if (this.map.baseLayer) {'],[0,'                var layer = this.map.baseLayer.clone();'],[0,'                this.layers = [layer];'],[-1,'            } else {'],[0,'                this.map.events.register(\&quot;changebaselayer\&quot;, this, this.baseLayerDraw);'],[0,'                return this.div;'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ create overview map DOM elements'],[0,'        this.element = document.createElement(\'div\');'],[0,'        this.element.className = this.displayClass + \'Element\';'],[0,'        this.element.style.display = \'none\';'],[-1,''],[0,'        this.mapDiv = document.createElement(\'div\');'],[0,'        this.mapDiv.style.width = this.size.w + \'px\';'],[0,'        this.mapDiv.style.height = this.size.h + \'px\';'],[0,'        this.mapDiv.style.position = \'relative\';'],[0,'        this.mapDiv.style.overflow = \'hidden\';'],[0,'        this.mapDiv.id = OpenLayers.Util.createUniqueID(\'overviewMap\');'],[-1,'        '],[0,'        this.extentRectangle = document.createElement(\'div\');'],[0,'        this.extentRectangle.style.position = \'absolute\';'],[0,'        this.extentRectangle.style.zIndex = 1000;  \/\/HACK'],[0,'        this.extentRectangle.className = this.displayClass+\'ExtentRectangle\';'],[-1,''],[0,'        this.element.appendChild(this.mapDiv);  '],[-1,''],[0,'        this.div.appendChild(this.element);'],[-1,''],[-1,'        \/\/ Optionally add min\/max buttons if the control will go in the'],[-1,'        \/\/ map viewport.'],[0,'        if(!this.outsideViewport) {'],[0,'            this.div.className += \&quot; \&quot; + this.displayClass + \'Container\';'],[-1,'            \/\/ maximize button div'],[0,'            var img = OpenLayers.Util.getImageLocation(\'layer-switcher-maximize.png\');'],[0,'            this.maximizeDiv = OpenLayers.Util.createAlphaImageDiv('],[-1,'                                        this.displayClass + \'MaximizeButton\', '],[-1,'                                        null, '],[-1,'                                        null, '],[-1,'                                        img, '],[-1,'                                        \'absolute\');'],[0,'            this.maximizeDiv.style.display = \'none\';'],[0,'            this.maximizeDiv.className = this.displayClass + \'MaximizeButton olButton\';'],[0,'            if (this.maximizeTitle) {'],[0,'                this.maximizeDiv.title = this.maximizeTitle;'],[-1,'            }'],[0,'            this.div.appendChild(this.maximizeDiv);'],[-1,'    '],[-1,'            \/\/ minimize button div'],[0,'            var img = OpenLayers.Util.getImageLocation(\'layer-switcher-minimize.png\');'],[0,'            this.minimizeDiv = OpenLayers.Util.createAlphaImageDiv('],[-1,'                                        \'OpenLayers_Control_minimizeDiv\', '],[-1,'                                        null, '],[-1,'                                        null, '],[-1,'                                        img, '],[-1,'                                        \'absolute\');'],[0,'            this.minimizeDiv.style.display = \'none\';'],[0,'            this.minimizeDiv.className = this.displayClass + \'MinimizeButton olButton\';'],[0,'            if (this.minimizeTitle) {'],[0,'                this.minimizeDiv.title = this.minimizeTitle;'],[-1,'            }'],[0,'            this.div.appendChild(this.minimizeDiv);            '],[0,'            this.minimizeControl();'],[-1,'        } else {'],[-1,'            \/\/ show the overview map'],[0,'            this.element.style.display = \'\';'],[-1,'        }'],[0,'        if(this.map.getExtent()) {'],[0,'            this.update();'],[-1,'        }'],[-1,'        '],[0,'        this.map.events.on({'],[-1,'            buttonclick: this.onButtonClick,'],[-1,'            moveend: this.update,'],[-1,'            scope: this'],[-1,'        });'],[-1,'        '],[0,'        if (this.maximized) {'],[0,'            this.maximizeControl();'],[-1,'        }'],[0,'        return this.div;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: baseLayerDraw'],[-1,'     * Draw the base layer - called if unable to complete in the initial draw'],[-1,'     *\/'],[-1,'    baseLayerDraw: function() {'],[0,'        this.draw();'],[0,'        this.map.events.unregister(\&quot;changebaselayer\&quot;, this, this.baseLayerDraw);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: rectDrag'],[-1,'     * Handle extent rectangle drag'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;} The pixel location of the drag.'],[-1,'     *\/'],[-1,'    rectDrag: function(px) {'],[0,'        var deltaX = this.handlers.drag.last.x - px.x;'],[0,'        var deltaY = this.handlers.drag.last.y - px.y;'],[0,'        if(deltaX != 0 || deltaY != 0) {'],[0,'            var rectTop = this.rectPxBounds.top;'],[0,'            var rectLeft = this.rectPxBounds.left;'],[0,'            var rectHeight = Math.abs(this.rectPxBounds.getHeight());'],[0,'            var rectWidth = this.rectPxBounds.getWidth();'],[-1,'            \/\/ don\'t allow dragging off of parent element'],[0,'            var newTop = Math.max(0, (rectTop - deltaY));'],[0,'            newTop = Math.min(newTop,'],[-1,'                              this.ovmap.size.h - this.hComp - rectHeight);'],[0,'            var newLeft = Math.max(0, (rectLeft - deltaX));'],[0,'            newLeft = Math.min(newLeft,'],[-1,'                               this.ovmap.size.w - this.wComp - rectWidth);'],[0,'            this.setRectPxBounds(new OpenLayers.Bounds(newLeft,'],[-1,'                                                       newTop + rectHeight,'],[-1,'                                                       newLeft + rectWidth,'],[-1,'                                                       newTop));'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: mapDivClick'],[-1,'     * Handle browser events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;} evt'],[-1,'     *\/'],[-1,'    mapDivClick: function(evt) {'],[0,'        var pxCenter = this.rectPxBounds.getCenterPixel();'],[0,'        var deltaX = evt.xy.x - pxCenter.x;'],[0,'        var deltaY = evt.xy.y - pxCenter.y;'],[0,'        var top = this.rectPxBounds.top;'],[0,'        var left = this.rectPxBounds.left;'],[0,'        var height = Math.abs(this.rectPxBounds.getHeight());'],[0,'        var width = this.rectPxBounds.getWidth();'],[0,'        var newTop = Math.max(0, (top + deltaY));'],[0,'        newTop = Math.min(newTop, this.ovmap.size.h - height);'],[0,'        var newLeft = Math.max(0, (left + deltaX));'],[0,'        newLeft = Math.min(newLeft, this.ovmap.size.w - width);'],[0,'        this.setRectPxBounds(new OpenLayers.Bounds(newLeft,'],[-1,'                                                   newTop + height,'],[-1,'                                                   newLeft + width,'],[-1,'                                                   newTop));'],[0,'        this.updateMapToRect();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onButtonClick'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *\/'],[-1,'    onButtonClick: function(evt) {'],[0,'        if (evt.buttonElement === this.minimizeDiv) {'],[0,'            this.minimizeControl();'],[0,'        } else if (evt.buttonElement === this.maximizeDiv) {'],[0,'            this.maximizeControl();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: maximizeControl'],[-1,'     * Unhide the control.  Called when the control is in the map viewport.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * e - {&lt;OpenLayers.Event&gt;}'],[-1,'     *\/'],[-1,'    maximizeControl: function(e) {'],[0,'        this.element.style.display = \'\';'],[0,'        this.showToggle(false);'],[0,'        if (e != null) {'],[0,'            OpenLayers.Event.stop(e);                                            '],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: minimizeControl'],[-1,'     * Hide all the contents of the control, shrink the size, '],[-1,'     * add the maximize icon'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * e - {&lt;OpenLayers.Event&gt;}'],[-1,'     *\/'],[-1,'    minimizeControl: function(e) {'],[0,'        this.element.style.display = \'none\';'],[0,'        this.showToggle(true);'],[0,'        if (e != null) {'],[0,'            OpenLayers.Event.stop(e);                                            '],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: showToggle'],[-1,'     * Hide\/Show the toggle depending on whether the control is minimized'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * minimize - {Boolean} '],[-1,'     *\/'],[-1,'    showToggle: function(minimize) {'],[0,'        if (this.maximizeDiv) {'],[0,'            this.maximizeDiv.style.display = minimize ? \'\' : \'none\';'],[-1,'        }'],[0,'        if (this.minimizeDiv) {'],[0,'            this.minimizeDiv.style.display = minimize ? \'none\' : \'\';'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: update'],[-1,'     * Update the overview map after layers move.'],[-1,'     *\/'],[-1,'    update: function() {'],[0,'        if(this.ovmap == null) {'],[0,'            this.createMap();'],[-1,'        }'],[-1,'        '],[0,'        if(this.autoPan || !this.isSuitableOverview()) {'],[0,'            this.updateOverview();'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ update extent rectangle'],[0,'        this.updateRectToMap();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: isSuitableOverview'],[-1,'     * Determines if the overview map is suitable given the extent and'],[-1,'     * resolution of the main map.'],[-1,'     *\/'],[-1,'    isSuitableOverview: function() {'],[0,'        var mapExtent = this.map.getExtent();'],[0,'        var maxExtent = this.map.getMaxExtent();'],[0,'        var testExtent = new OpenLayers.Bounds('],[-1,'                                Math.max(mapExtent.left, maxExtent.left),'],[-1,'                                Math.max(mapExtent.bottom, maxExtent.bottom),'],[-1,'                                Math.min(mapExtent.right, maxExtent.right),'],[-1,'                                Math.min(mapExtent.top, maxExtent.top));        '],[-1,''],[0,'        if (this.ovmap.getProjection() != this.map.getProjection()) {'],[0,'            testExtent = testExtent.transform('],[-1,'                this.map.getProjectionObject(),'],[-1,'                this.ovmap.getProjectionObject() );'],[-1,'        }'],[-1,''],[0,'        var resRatio = this.ovmap.getResolution() \/ this.map.getResolution();'],[0,'        return ((resRatio &gt; this.minRatio) &amp;&amp;'],[-1,'                (resRatio &lt;= this.maxRatio) &amp;&amp;'],[-1,'                (this.ovmap.getExtent().containsBounds(testExtent)));'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method updateOverview'],[-1,'     * Called by &lt;update&gt; if &lt;isSuitableOverview&gt; returns true'],[-1,'     *\/'],[-1,'    updateOverview: function() {'],[0,'        var mapRes = this.map.getResolution();'],[0,'        var targetRes = this.ovmap.getResolution();'],[0,'        var resRatio = targetRes \/ mapRes;'],[0,'        if(resRatio &gt; this.maxRatio) {'],[-1,'            \/\/ zoom in overview map'],[0,'            targetRes = this.minRatio * mapRes;            '],[0,'        } else if(resRatio &lt;= this.minRatio) {'],[-1,'            \/\/ zoom out overview map'],[0,'            targetRes = this.maxRatio * mapRes;'],[-1,'        }'],[0,'        var center;'],[0,'        if (this.ovmap.getProjection() != this.map.getProjection()) {'],[0,'            center = this.map.center.clone();'],[0,'            center.transform(this.map.getProjectionObject(),'],[-1,'                this.ovmap.getProjectionObject() );'],[-1,'        } else {'],[0,'            center = this.map.center;'],[-1,'        }'],[0,'        this.ovmap.setCenter(center, this.ovmap.getZoomForResolution('],[-1,'            targetRes * this.resolutionFactor));'],[0,'        this.updateRectToMap();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createMap'],[-1,'     * Construct the map that this control contains'],[-1,'     *\/'],[-1,'    createMap: function() {'],[-1,'        \/\/ create the overview map'],[0,'        var options = OpenLayers.Util.extend('],[-1,'                        {controls: [], maxResolution: \'auto\', '],[-1,'                         fallThrough: false}, this.mapOptions);'],[0,'        this.ovmap = new OpenLayers.Map(this.mapDiv, options);'],[0,'        this.ovmap.viewPortDiv.appendChild(this.extentRectangle);'],[-1,'        '],[-1,'        \/\/ prevent ovmap from being destroyed when the page unloads, because'],[-1,'        \/\/ the OverviewMap control has to do this (and does it).'],[0,'        OpenLayers.Event.stopObserving(window, \'unload\', this.ovmap.unloadDestroy);'],[-1,'        '],[0,'        this.ovmap.addLayers(this.layers);'],[0,'        this.ovmap.zoomToMaxExtent();'],[-1,'        \/\/ check extent rectangle border width'],[0,'        this.wComp = parseInt(OpenLayers.Element.getStyle(this.extentRectangle,'],[-1,'                                               \'border-left-width\')) +'],[-1,'                     parseInt(OpenLayers.Element.getStyle(this.extentRectangle,'],[-1,'                                               \'border-right-width\'));'],[0,'        this.wComp = (this.wComp) ? this.wComp : 2;'],[0,'        this.hComp = parseInt(OpenLayers.Element.getStyle(this.extentRectangle,'],[-1,'                                               \'border-top-width\')) +'],[-1,'                     parseInt(OpenLayers.Element.getStyle(this.extentRectangle,'],[-1,'                                               \'border-bottom-width\'));'],[0,'        this.hComp = (this.hComp) ? this.hComp : 2;'],[-1,''],[0,'        this.handlers.drag = new OpenLayers.Handler.Drag('],[-1,'            this, {move: this.rectDrag, done: this.updateMapToRect},'],[-1,'            {map: this.ovmap}'],[-1,'        );'],[0,'        this.handlers.click = new OpenLayers.Handler.Click('],[-1,'            this, {'],[-1,'                \&quot;click\&quot;: this.mapDivClick'],[-1,'            },{'],[-1,'                \&quot;single\&quot;: true, \&quot;double\&quot;: false,'],[-1,'                \&quot;stopSingle\&quot;: true, \&quot;stopDouble\&quot;: true,'],[-1,'                \&quot;pixelTolerance\&quot;: 1,'],[-1,'                map: this.ovmap'],[-1,'            }'],[-1,'        );'],[0,'        this.handlers.click.activate();'],[-1,'        '],[0,'        this.rectEvents = new OpenLayers.Events(this, this.extentRectangle,'],[-1,'                                                null, true);'],[0,'        this.rectEvents.register(\&quot;mouseover\&quot;, this, function(e) {'],[0,'            if(!this.handlers.drag.active &amp;&amp; !this.map.dragging) {'],[0,'                this.handlers.drag.activate();'],[-1,'            }'],[-1,'        });'],[0,'        this.rectEvents.register(\&quot;mouseout\&quot;, this, function(e) {'],[0,'            if(!this.handlers.drag.dragging) {'],[0,'                this.handlers.drag.deactivate();'],[-1,'            }'],[-1,'        });'],[-1,''],[0,'        if (this.ovmap.getProjection() != this.map.getProjection()) {'],[0,'            var sourceUnits = this.map.getProjectionObject().getUnits() ||'],[-1,'                this.map.units || this.map.baseLayer.units;'],[0,'            var targetUnits = this.ovmap.getProjectionObject().getUnits() ||'],[-1,'                this.ovmap.units || this.ovmap.baseLayer.units;'],[0,'            this.resolutionFactor = sourceUnits &amp;&amp; targetUnits ?'],[-1,'                OpenLayers.INCHES_PER_UNIT[sourceUnits] \/'],[-1,'                OpenLayers.INCHES_PER_UNIT[targetUnits] : 1;'],[-1,'        }'],[-1,'    },'],[-1,'        '],[-1,'    \/**'],[-1,'     * Method: updateRectToMap'],[-1,'     * Updates the extent rectangle position and size to match the map extent'],[-1,'     *\/'],[-1,'    updateRectToMap: function() {'],[-1,'        \/\/ If the projections differ we need to reproject'],[0,'        var bounds;'],[0,'        if (this.ovmap.getProjection() != this.map.getProjection()) {'],[0,'            bounds = this.map.getExtent().transform('],[-1,'                this.map.getProjectionObject(), '],[-1,'                this.ovmap.getProjectionObject() );'],[-1,'        } else {'],[0,'            bounds = this.map.getExtent();'],[-1,'        }'],[0,'        var pxBounds = this.getRectBoundsFromMapBounds(bounds);'],[0,'        if (pxBounds) {'],[0,'            this.setRectPxBounds(pxBounds);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: updateMapToRect'],[-1,'     * Updates the map extent to match the extent rectangle position and size'],[-1,'     *\/'],[-1,'    updateMapToRect: function() {'],[0,'        var lonLatBounds = this.getMapBoundsFromRectBounds(this.rectPxBounds);'],[0,'        if (this.ovmap.getProjection() != this.map.getProjection()) {'],[0,'            lonLatBounds = lonLatBounds.transform('],[-1,'                this.ovmap.getProjectionObject(),'],[-1,'                this.map.getProjectionObject() );'],[-1,'        }'],[0,'        this.map.panTo(lonLatBounds.getCenterLonLat());'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setRectPxBounds'],[-1,'     * Set extent rectangle pixel bounds.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * pxBounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    setRectPxBounds: function(pxBounds) {'],[0,'        var top = Math.max(pxBounds.top, 0);'],[0,'        var left = Math.max(pxBounds.left, 0);'],[0,'        var bottom = Math.min(pxBounds.top + Math.abs(pxBounds.getHeight()),'],[-1,'                              this.ovmap.size.h - this.hComp);'],[0,'        var right = Math.min(pxBounds.left + pxBounds.getWidth(),'],[-1,'                             this.ovmap.size.w - this.wComp);'],[0,'        var width = Math.max(right - left, 0);'],[0,'        var height = Math.max(bottom - top, 0);'],[0,'        if(width &lt; this.minRectSize || height &lt; this.minRectSize) {'],[0,'            this.extentRectangle.className = this.displayClass +'],[-1,'                                             this.minRectDisplayClass;'],[0,'            var rLeft = left + (width \/ 2) - (this.minRectSize \/ 2);'],[0,'            var rTop = top + (height \/ 2) - (this.minRectSize \/ 2);'],[0,'            this.extentRectangle.style.top = Math.round(rTop) + \'px\';'],[0,'            this.extentRectangle.style.left = Math.round(rLeft) + \'px\';'],[0,'            this.extentRectangle.style.height = this.minRectSize + \'px\';'],[0,'            this.extentRectangle.style.width = this.minRectSize + \'px\';'],[-1,'        } else {'],[0,'            this.extentRectangle.className = this.displayClass +'],[-1,'                                             \'ExtentRectangle\';'],[0,'            this.extentRectangle.style.top = Math.round(top) + \'px\';'],[0,'            this.extentRectangle.style.left = Math.round(left) + \'px\';'],[0,'            this.extentRectangle.style.height = Math.round(height) + \'px\';'],[0,'            this.extentRectangle.style.width = Math.round(width) + \'px\';'],[-1,'        }'],[0,'        this.rectPxBounds = new OpenLayers.Bounds('],[-1,'            Math.round(left), Math.round(bottom),'],[-1,'            Math.round(right), Math.round(top)'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getRectBoundsFromMapBounds'],[-1,'     * Get the rect bounds from the map bounds.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * lonLatBounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;}A bounds which is the passed-in map lon\/lat extent'],[-1,'     * translated into pixel bounds for the overview map'],[-1,'     *\/'],[-1,'    getRectBoundsFromMapBounds: function(lonLatBounds) {'],[0,'        var leftBottomPx = this.getOverviewPxFromLonLat({'],[-1,'            lon: lonLatBounds.left,'],[-1,'            lat: lonLatBounds.bottom'],[-1,'        });'],[0,'        var rightTopPx = this.getOverviewPxFromLonLat({'],[-1,'            lon: lonLatBounds.right,'],[-1,'            lat: lonLatBounds.top'],[-1,'        });'],[0,'        var bounds = null;'],[0,'        if (leftBottomPx &amp;&amp; rightTopPx) {'],[0,'            bounds = new OpenLayers.Bounds(leftBottomPx.x, leftBottomPx.y,'],[-1,'                                           rightTopPx.x, rightTopPx.y);'],[-1,'        }'],[0,'        return bounds;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getMapBoundsFromRectBounds'],[-1,'     * Get the map bounds from the rect bounds.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * pxBounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} Bounds which is the passed-in overview rect bounds'],[-1,'     * translated into lon\/lat bounds for the overview map'],[-1,'     *\/'],[-1,'    getMapBoundsFromRectBounds: function(pxBounds) {'],[0,'        var leftBottomLonLat = this.getLonLatFromOverviewPx({'],[-1,'            x: pxBounds.left,'],[-1,'            y: pxBounds.bottom'],[-1,'        });'],[0,'        var rightTopLonLat = this.getLonLatFromOverviewPx({'],[-1,'            x: pxBounds.right,'],[-1,'            y: pxBounds.top'],[-1,'        });'],[0,'        return new OpenLayers.Bounds(leftBottomLonLat.lon, leftBottomLonLat.lat,'],[-1,'                                     rightTopLonLat.lon, rightTopLonLat.lat);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getLonLatFromOverviewPx'],[-1,'     * Get a map location from a pixel location'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * overviewMapPx - {&lt;OpenLayers.Pixel&gt;|Object} OpenLayers.Pixel or'],[-1,'     *                                             an object with a'],[-1,'     *                                             \'x\' and \'y\' properties.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Location which is the passed-in overview map'],[-1,'     * OpenLayers.Pixel, translated into lon\/lat by the overview'],[-1,'     * map. An object with a \'lon\' and \'lat\' properties.'],[-1,'     *\/'],[-1,'    getLonLatFromOverviewPx: function(overviewMapPx) {'],[0,'        var size = this.ovmap.size;'],[0,'        var res  = this.ovmap.getResolution();'],[0,'        var center = this.ovmap.getExtent().getCenterLonLat();'],[-1,'    '],[0,'        var deltaX = overviewMapPx.x - (size.w \/ 2);'],[0,'        var deltaY = overviewMapPx.y - (size.h \/ 2);'],[-1,''],[0,'        return {'],[-1,'            lon: center.lon + deltaX * res,'],[-1,'            lat: center.lat - deltaY * res'],[-1,'        };'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getOverviewPxFromLonLat'],[-1,'     * Get a pixel location from a map location'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;|Object} OpenLayers.LonLat or an'],[-1,'     *     object with a \'lon\' and \'lat\' properties.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Location which is the passed-in OpenLayers.LonLat, '],[-1,'     * translated into overview map pixels'],[-1,'     *\/'],[-1,'    getOverviewPxFromLonLat: function(lonlat) {'],[0,'        var res = this.ovmap.getResolution();'],[0,'        var extent = this.ovmap.getExtent();'],[0,'        if (extent) {'],[0,'            return {'],[-1,'                x: Math.round(1\/res * (lonlat.lon - extent.left)),'],[-1,'                y: Math.round(1\/res * (extent.top - lonlat.lat))'],[-1,'            };'],[-1,'        } '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \'OpenLayers.Control.OverviewMap\''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Map.js'],[-1,' * @requires OpenLayers\/Projection.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer'],[-1,' *\/'],[1,'OpenLayers.Layer = OpenLayers.Class({'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: id'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    id: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: name'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    name: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: div'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    div: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: opacity'],[-1,'     * {Float} The layer\'s opacity. Float number between 0.0 and 1.0. Default'],[-1,'     * is 1.'],[-1,'     *\/'],[-1,'    opacity: 1,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: alwaysInRange'],[-1,'     * {Boolean} If a layer\'s display should not be scale-based, this should '],[-1,'     *     be set to true. This will cause the layer, as an overlay, to always '],[-1,'     *     be \'active\', by always returning true from the calculateInRange() '],[-1,'     *     function. '],[-1,'     * '],[-1,'     *     If not explicitly specified for a layer, its value will be '],[-1,'     *     determined on startup in initResolutions() based on whether or not '],[-1,'     *     any scale-specific properties have been set as options on the '],[-1,'     *     layer. If no scale-specific options have been set on the layer, we '],[-1,'     *     assume that it should always be in range.'],[-1,'     * '],[-1,'     *     See #987 for more info.'],[-1,'     *\/'],[-1,'    alwaysInRange: null,   '],[-1,''],[-1,'    \/**'],[-1,'     * Constant: RESOLUTION_PROPERTIES'],[-1,'     * {Array} The properties that are used for calculating resolutions'],[-1,'     *     information.'],[-1,'     *\/'],[-1,'    RESOLUTION_PROPERTIES: ['],[-1,'        \'scales\', \'resolutions\','],[-1,'        \'maxScale\', \'minScale\','],[-1,'        \'maxResolution\', \'minResolution\','],[-1,'        \'numZoomLevels\', \'maxZoomLevel\''],[-1,'    ],'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;}'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * layer.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Listeners will be called with a reference to an event object.  The'],[-1,'     *     properties of this event depends on exactly what happened.'],[-1,'     *'],[-1,'     * All event objects have at least the following properties:'],[-1,'     * object - {Object} A reference to layer.events.object.'],[-1,'     * element - {DOMElement} A reference to layer.events.element.'],[-1,'     *'],[-1,'     * Supported map event types:'],[-1,'     * loadstart - Triggered when layer loading starts.  When using a Vector '],[-1,'     *     layer with a Fixed or BBOX strategy, the event object includes '],[-1,'     *     a *filter* property holding the OpenLayers.Filter used when '],[-1,'     *     calling read on the protocol.'],[-1,'     * loadend - Triggered when layer loading ends.  When using a Vector layer'],[-1,'     *     with a Fixed or BBOX strategy, the event object includes a '],[-1,'     *     *response* property holding an OpenLayers.Protocol.Response object.'],[-1,'     * visibilitychanged - Triggered when layer visibility is changed.'],[-1,'     * move - Triggered when layer moves (triggered with every mousemove'],[-1,'     *     during a drag).'],[-1,'     * moveend - Triggered when layer is done moving, object passed as'],[-1,'     *     argument has a zoomChanged boolean property which tells that the'],[-1,'     *     zoom has changed.'],[-1,'     * added - Triggered after the layer is added to a map.  Listeners will'],[-1,'     *     receive an object with a *map* property referencing the map and a'],[-1,'     *     *layer* property referencing the layer.'],[-1,'     * removed - Triggered after the layer is removed from the map.  Listeners'],[-1,'     *     will receive an object with a *map* property referencing the map and'],[-1,'     *     a *layer* property referencing the layer.'],[-1,'     *\/'],[-1,'    events: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: map'],[-1,'     * {&lt;OpenLayers.Map&gt;} This variable is set when the layer is added to '],[-1,'     *     the map, via the accessor function setMap().'],[-1,'     *\/'],[-1,'    map: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * {Boolean} Whether or not the layer is a base layer. This should be set '],[-1,'     *     individually by all subclasses. Default is false'],[-1,'     *\/'],[-1,'    isBaseLayer: false,'],[-1,' '],[-1,'    \/**'],[-1,'     * Property: alpha'],[-1,'     * {Boolean} The layer\'s images have an alpha channel.  Default is false.'],[-1,'     *\/'],[-1,'    alpha: false,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: displayInLayerSwitcher'],[-1,'     * {Boolean} Display the layer\'s name in the layer switcher.  Default is'],[-1,'     *     true.'],[-1,'     *\/'],[-1,'    displayInLayerSwitcher: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: visibility'],[-1,'     * {Boolean} The layer should be displayed in the map.  Default is true.'],[-1,'     *\/'],[-1,'    visibility: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: attribution'],[-1,'     * {String} Attribution string, displayed when an '],[-1,'     *     &lt;OpenLayers.Control.Attribution&gt; has been added to the map.'],[-1,'     *\/'],[-1,'    attribution: null, '],[-1,''],[-1,'    \/** '],[-1,'     * Property: inRange'],[-1,'     * {Boolean} The current map resolution is within the layer\'s min\/max '],[-1,'     *     range. This is set in &lt;OpenLayers.Map.setCenter&gt; whenever the zoom '],[-1,'     *     changes.'],[-1,'     *\/'],[-1,'    inRange: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Propery: imageSize'],[-1,'     * {&lt;OpenLayers.Size&gt;} For layers with a gutter, the image is larger than '],[-1,'     *     the tile by twice the gutter in each dimension.'],[-1,'     *\/'],[-1,'    imageSize: null,'],[-1,'    '],[-1,'  \/\/ OPTIONS'],[-1,''],[-1,'    \/** '],[-1,'     * Property: options'],[-1,'     * {Object} An optional object whose properties will be set on the layer.'],[-1,'     *     Any of the layer properties can be set as a property of the options'],[-1,'     *     object and sent to the constructor when the layer is created.'],[-1,'     *\/'],[-1,'    options: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: eventListeners'],[-1,'     * {Object} If set as an option at construction, the eventListeners'],[-1,'     *     object will be registered with &lt;OpenLayers.Events.on&gt;.  Object'],[-1,'     *     structure must be a listeners object as shown in the example for'],[-1,'     *     the events.on method.'],[-1,'     *\/'],[-1,'    eventListeners: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: gutter'],[-1,'     * {Integer} Determines the width (in pixels) of the gutter around image'],[-1,'     *     tiles to ignore.  By setting this property to a non-zero value,'],[-1,'     *     images will be requested that are wider and taller than the tile'],[-1,'     *     size by a value of 2 x gutter.  This allows artifacts of rendering'],[-1,'     *     at tile edges to be ignored.  Set a gutter value that is equal to'],[-1,'     *     half the size of the widest symbol that needs to be displayed.'],[-1,'     *     Defaults to zero.  Non-tiled layers always have zero gutter.'],[-1,'     *\/ '],[-1,'    gutter: 0, '],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: projection'],[-1,'     * {&lt;OpenLayers.Projection&gt;} or {&lt;String&gt;} Specifies the projection of the layer.'],[-1,'     *     Can be set in the layer options. If not specified in the layer options,'],[-1,'     *     it is set to the default projection specified in the map,'],[-1,'     *     when the layer is added to the map.'],[-1,'     *     Projection along with default maxExtent and resolutions'],[-1,'     *     are set automatically with commercial baselayers in EPSG:3857,'],[-1,'     *     such as Google, Bing and OpenStreetMap, and do not need to be specified.'],[-1,'     *     Otherwise, if specifying projection, also set maxExtent,'],[-1,'     *     maxResolution or resolutions as appropriate.'],[-1,'     *     When using vector layers with strategies, layer projection should be set'],[-1,'     *     to the projection of the source data if that is different from the map default.'],[-1,'     * '],[-1,'     *     Can be either a string or an &lt;OpenLayers.Projection&gt; object;'],[-1,'     *     if a string is passed, will be converted to an object when'],[-1,'     *     the layer is added to the map.'],[-1,'     * '],[-1,'     *\/'],[-1,'    projection: null,    '],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: units'],[-1,'     * {String} The layer map units.  Defaults to null.  Possible values'],[-1,'     *     are \'degrees\' (or \'dd\'), \'m\', \'ft\', \'km\', \'mi\', \'inches\'.'],[-1,'     *     Normally taken from the projection.'],[-1,'     *     Only required if both map and layers do not define a projection,'],[-1,'     *     or if they define a projection which does not define units.'],[-1,'     *\/'],[-1,'    units: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: scales'],[-1,'     * {Array}  An array of map scales in descending order.  The values in the'],[-1,'     *     array correspond to the map scale denominator.  Note that these'],[-1,'     *     values only make sense if the display (monitor) resolution of the'],[-1,'     *     client is correctly guessed by whomever is configuring the'],[-1,'     *     application.  In addition, the units property must also be set.'],[-1,'     *     Use &lt;resolutions&gt; instead wherever possible.'],[-1,'     *\/'],[-1,'    scales: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: resolutions'],[-1,'     * {Array} A list of map resolutions (map units per pixel) in descending'],[-1,'     *     order.  If this is not set in the layer constructor, it will be set'],[-1,'     *     based on other resolution related properties (maxExtent,'],[-1,'     *     maxResolution, maxScale, etc.).'],[-1,'     *\/'],[-1,'    resolutions: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: maxExtent'],[-1,'     * {&lt;OpenLayers.Bounds&gt;|Array} If provided as an array, the array'],[-1,'     *     should consist of four values (left, bottom, right, top).'],[-1,'     *     The maximum extent for the layer.  Defaults to null.'],[-1,'     * '],[-1,'     *     The center of these bounds will not stray outside'],[-1,'     *     of the viewport extent during panning.  In addition, if'],[-1,'     *     &lt;displayOutsideMaxExtent&gt; is set to false, data will not be'],[-1,'     *     requested that falls completely outside of these bounds.'],[-1,'     *\/'],[-1,'    maxExtent: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: minExtent'],[-1,'     * {&lt;OpenLayers.Bounds&gt;|Array} If provided as an array, the array'],[-1,'     *     should consist of four values (left, bottom, right, top).'],[-1,'     *     The minimum extent for the layer.  Defaults to null.'],[-1,'     *\/'],[-1,'    minExtent: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: maxResolution'],[-1,'     * {Float} Default max is 360 deg \/ 256 px, which corresponds to'],[-1,'     *     zoom level 0 on gmaps.  Specify a different value in the layer '],[-1,'     *     options if you are not using the default &lt;OpenLayers.Map.tileSize&gt;'],[-1,'     *     and displaying the whole world.'],[-1,'     *\/'],[-1,'    maxResolution: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: minResolution'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    minResolution: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: numZoomLevels'],[-1,'     * {Integer}'],[-1,'     *\/'],[-1,'    numZoomLevels: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: minScale'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    minScale: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: maxScale'],[-1,'     * {Float}'],[-1,'     *\/'],[-1,'    maxScale: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: displayOutsideMaxExtent'],[-1,'     * {Boolean} Request map tiles that are completely outside of the max '],[-1,'     *     extent for this layer. Defaults to false.'],[-1,'     *\/'],[-1,'    displayOutsideMaxExtent: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: wrapDateLine'],[-1,'     * {Boolean} Wraps the world at the international dateline, so the map can'],[-1,'     * be panned infinitely in longitudinal direction. Only use this on the'],[-1,'     * base layer, and only if the layer\'s maxExtent equals the world bounds.'],[-1,'     * #487 for more info.   '],[-1,'     *\/'],[-1,'    wrapDateLine: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: metadata'],[-1,'     * {Object} This object can be used to store additional information on a'],[-1,'     *     layer object.'],[-1,'     *\/'],[-1,'    metadata: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} The layer name'],[-1,'     * options - {Object} Hashtable of extra options to tag onto the layer'],[-1,'     *\/'],[-1,'    initialize: function(name, options) {'],[-1,''],[0,'        this.metadata = {};'],[-1,'        '],[0,'        options = OpenLayers.Util.extend({}, options);'],[-1,'        \/\/ make sure we respect alwaysInRange if set on the prototype'],[0,'        if (this.alwaysInRange != null) {'],[0,'            options.alwaysInRange = this.alwaysInRange;'],[-1,'        }'],[0,'        this.addOptions(options);'],[-1,''],[0,'        this.name = name;'],[-1,'        '],[0,'        if (this.id == null) {'],[-1,''],[0,'            this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \&quot;_\&quot;);'],[-1,''],[0,'            this.div = OpenLayers.Util.createDiv(this.id);'],[0,'            this.div.style.width = \&quot;100%\&quot;;'],[0,'            this.div.style.height = \&quot;100%\&quot;;'],[0,'            this.div.dir = \&quot;ltr\&quot;;'],[-1,''],[0,'            this.events = new OpenLayers.Events(this, this.div);'],[0,'            if(this.eventListeners instanceof Object) {'],[0,'                this.events.on(this.eventListeners);'],[-1,'            }'],[-1,''],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     * Destroy is a destructor: this is to alleviate cyclic references which'],[-1,'     *     the Javascript garbage cleaner can not take care of on its own.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * setNewBaseLayer - {Boolean} Set a new base layer when this layer has'],[-1,'     *     been destroyed.  Default is true.'],[-1,'     *\/'],[-1,'    destroy: function(setNewBaseLayer) {'],[0,'        if (setNewBaseLayer == null) {'],[0,'            setNewBaseLayer = true;'],[-1,'        }'],[0,'        if (this.map != null) {'],[0,'            this.map.removeLayer(this, setNewBaseLayer);'],[-1,'        }'],[0,'        this.projection = null;'],[0,'        this.map = null;'],[0,'        this.name = null;'],[0,'        this.div = null;'],[0,'        this.options = null;'],[-1,''],[0,'        if (this.events) {'],[0,'            if(this.eventListeners) {'],[0,'                this.events.un(this.eventListeners);'],[-1,'            }'],[0,'            this.events.destroy();'],[-1,'        }'],[0,'        this.eventListeners = null;'],[0,'        this.events = null;'],[-1,'    },'],[-1,'    '],[-1,'   \/**'],[-1,'    * Method: clone'],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * obj - {&lt;OpenLayers.Layer&gt;} The layer to be cloned'],[-1,'    *'],[-1,'    * Returns:'],[-1,'    * {&lt;OpenLayers.Layer&gt;} An exact clone of this &lt;OpenLayers.Layer&gt;'],[-1,'    *\/'],[-1,'    clone: function (obj) {'],[-1,'        '],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer(this.name, this.getOptions());'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ catch any randomly tagged-on properties'],[0,'        OpenLayers.Util.applyDefaults(obj, this);'],[-1,'        '],[-1,'        \/\/ a cloned layer should never have its map property set'],[-1,'        \/\/  because it has not been added to a map yet. '],[0,'        obj.map = null;'],[-1,'        '],[0,'        return obj;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getOptions'],[-1,'     * Extracts an object from the layer with the properties that were set as'],[-1,'     *     options, but updates them with the values currently set on the'],[-1,'     *     instance.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} the &lt;options&gt; of the layer, representing the current state.'],[-1,'     *\/'],[-1,'    getOptions: function() {'],[0,'        var options = {};'],[0,'        for(var o in this.options) {'],[0,'            options[o] = this[o];'],[-1,'        }'],[0,'        return options;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: setName'],[-1,'     * Sets the new layer name for this layer.  Can trigger a changelayer event'],[-1,'     *     on the map.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * newName - {String} The new name.'],[-1,'     *\/'],[-1,'    setName: function(newName) {'],[0,'        if (newName != this.name) {'],[0,'            this.name = newName;'],[0,'            if (this.map != null) {'],[0,'                this.map.events.triggerEvent(\&quot;changelayer\&quot;, {'],[-1,'                    layer: this,'],[-1,'                    property: \&quot;name\&quot;'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[-1,'    },    '],[-1,'    '],[-1,'   \/**'],[-1,'    * APIMethod: addOptions'],[-1,'    * '],[-1,'    * Parameters:'],[-1,'    * newOptions - {Object}'],[-1,'    * reinitialize - {Boolean} If set to true, and if resolution options of the'],[-1,'    *     current baseLayer were changed, the map will be recentered to make'],[-1,'    *     sure that it is displayed with a valid resolution, and a'],[-1,'    *     changebaselayer event will be triggered.'],[-1,'    *\/'],[-1,'    addOptions: function (newOptions, reinitialize) {'],[-1,''],[0,'        if (this.options == null) {'],[0,'            this.options = {};'],[-1,'        }'],[-1,'        '],[0,'        if (newOptions) {'],[-1,'            \/\/ make sure this.projection references a projection object'],[0,'            if(typeof newOptions.projection == \&quot;string\&quot;) {'],[0,'                newOptions.projection = new OpenLayers.Projection(newOptions.projection);'],[-1,'            }'],[0,'            if (newOptions.projection) {'],[-1,'                \/\/ get maxResolution, units and maxExtent from projection defaults if'],[-1,'                \/\/ they are not defined already'],[0,'                OpenLayers.Util.applyDefaults(newOptions,'],[-1,'                    OpenLayers.Projection.defaults[newOptions.projection.getCode()]);'],[-1,'            }'],[-1,'            \/\/ allow array for extents'],[0,'            if (newOptions.maxExtent &amp;&amp; !(newOptions.maxExtent instanceof OpenLayers.Bounds)) {'],[0,'                newOptions.maxExtent = new OpenLayers.Bounds(newOptions.maxExtent);'],[-1,'            }'],[0,'            if (newOptions.minExtent &amp;&amp; !(newOptions.minExtent instanceof OpenLayers.Bounds)) {'],[0,'                newOptions.minExtent = new OpenLayers.Bounds(newOptions.minExtent);'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ update our copy for clone'],[0,'        OpenLayers.Util.extend(this.options, newOptions);'],[-1,''],[-1,'        \/\/ add new options to this'],[0,'        OpenLayers.Util.extend(this, newOptions);'],[-1,'        '],[-1,'        \/\/ get the units from the projection, if we have a projection'],[-1,'        \/\/ and it it has units'],[0,'        if(this.projection &amp;&amp; this.projection.getUnits()) {'],[0,'            this.units = this.projection.getUnits();'],[-1,'        }'],[-1,''],[-1,'        \/\/ re-initialize resolutions if necessary, i.e. if any of the'],[-1,'        \/\/ properties of the \&quot;properties\&quot; array defined below is set'],[-1,'        \/\/ in the new options'],[0,'        if(this.map) {'],[-1,'            \/\/ store current resolution so we can try to restore it later'],[0,'            var resolution = this.map.getResolution();'],[0,'            var properties = this.RESOLUTION_PROPERTIES.concat('],[-1,'                [\&quot;projection\&quot;, \&quot;units\&quot;, \&quot;minExtent\&quot;, \&quot;maxExtent\&quot;]'],[-1,'            );'],[0,'            for(var o in newOptions) {'],[0,'                if(newOptions.hasOwnProperty(o) &amp;&amp;'],[-1,'                   OpenLayers.Util.indexOf(properties, o) &gt;= 0) {'],[-1,''],[0,'                    this.initResolutions();'],[0,'                    if (reinitialize &amp;&amp; this.map.baseLayer === this) {'],[-1,'                        \/\/ update map position, and restore previous resolution'],[0,'                        this.map.setCenter(this.map.getCenter(),'],[-1,'                            this.map.getZoomForResolution(resolution),'],[-1,'                            false, true'],[-1,'                        );'],[-1,'                        \/\/ trigger a changebaselayer event to make sure that'],[-1,'                        \/\/ all controls (especially'],[-1,'                        \/\/ OpenLayers.Control.PanZoomBar) get notified of the'],[-1,'                        \/\/ new options'],[0,'                        this.map.events.triggerEvent(\&quot;changebaselayer\&quot;, {'],[-1,'                            layer: this'],[-1,'                        });'],[-1,'                    }'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: onMapResize'],[-1,'     * This function can be implemented by subclasses'],[-1,'     *\/'],[-1,'    onMapResize: function() {'],[-1,'        \/\/this function can be implemented by subclasses  '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: redraw'],[-1,'     * Redraws the layer.  Returns true if the layer was redrawn, false if not.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The layer was redrawn.'],[-1,'     *\/'],[-1,'    redraw: function() {'],[0,'        var redrawn = false;'],[0,'        if (this.map) {'],[-1,''],[-1,'            \/\/ min\/max Range may have changed'],[0,'            this.inRange = this.calculateInRange();'],[-1,''],[-1,'            \/\/ map\'s center might not yet be set'],[0,'            var extent = this.getExtent();'],[-1,''],[0,'            if (extent &amp;&amp; this.inRange &amp;&amp; this.visibility) {'],[0,'                var zoomChanged = true;'],[0,'                this.moveTo(extent, zoomChanged, false);'],[0,'                this.events.triggerEvent(\&quot;moveend\&quot;,'],[-1,'                    {\&quot;zoomChanged\&quot;: zoomChanged});'],[0,'                redrawn = true;'],[-1,'            }'],[-1,'        }'],[0,'        return redrawn;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * zoomChanged - {Boolean} Tells when zoom has changed, as layers have to'],[-1,'     *     do some init work in that case.'],[-1,'     * dragging - {Boolean}'],[-1,'     *\/'],[-1,'    moveTo:function(bounds, zoomChanged, dragging) {'],[0,'        var display = this.visibility;'],[0,'        if (!this.isBaseLayer) {'],[0,'            display = display &amp;&amp; this.inRange;'],[-1,'        }'],[0,'        this.display(display);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: moveByPx'],[-1,'     * Move the layer based on pixel vector. To be implemented by subclasses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * dx - {Number} The x coord of the displacement vector.'],[-1,'     * dy - {Number} The y coord of the displacement vector.'],[-1,'     *\/'],[-1,'    moveByPx: function(dx, dy) {'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     * Set the map property for the layer. This is done through an accessor'],[-1,'     *     so that subclasses can override this and take special action once '],[-1,'     *     they have their map variable set. '],[-1,'     * '],[-1,'     *     Here we take care to bring over any of the necessary default '],[-1,'     *     properties from the map. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        if (this.map == null) {'],[-1,'        '],[0,'            this.map = map;'],[-1,'            '],[-1,'            \/\/ grab some essential layer data from the map if it hasn\'t already'],[-1,'            \/\/  been set'],[0,'            this.maxExtent = this.maxExtent || this.map.maxExtent;'],[0,'            this.minExtent = this.minExtent || this.map.minExtent;'],[-1,''],[0,'            this.projection = this.projection || this.map.projection;'],[0,'            if (typeof this.projection == \&quot;string\&quot;) {'],[0,'                this.projection = new OpenLayers.Projection(this.projection);'],[-1,'            }'],[-1,''],[-1,'            \/\/ Check the projection to see if we can get units -- if not, refer'],[-1,'            \/\/ to properties.'],[0,'            this.units = this.projection.getUnits() ||'],[-1,'                         this.units || this.map.units;'],[-1,'            '],[0,'            this.initResolutions();'],[-1,'            '],[0,'            if (!this.isBaseLayer) {'],[0,'                this.inRange = this.calculateInRange();'],[0,'                var show = ((this.visibility) &amp;&amp; (this.inRange));'],[0,'                this.div.style.display = show ? \&quot;\&quot; : \&quot;none\&quot;;'],[-1,'            }'],[-1,'            '],[-1,'            \/\/ deal with gutters'],[0,'            this.setTileSize();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: afterAdd'],[-1,'     * Called at the end of the map.addLayer sequence.  At this point, the map'],[-1,'     *     will have a base layer.  To be overridden by subclasses.'],[-1,'     *\/'],[-1,'    afterAdd: function() {'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: removeMap'],[-1,'     * Just as setMap() allows each layer the possibility to take a '],[-1,'     *     personalized action on being added to the map, removeMap() allows'],[-1,'     *     each layer to take a personalized action on being removed from it. '],[-1,'     *     For now, this will be mostly unused, except for the EventPane layer,'],[-1,'     *     which needs this hook so that it can remove the special invisible'],[-1,'     *     pane. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    removeMap: function(map) {'],[-1,'        \/\/to be overridden by subclasses'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getImageSize'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} optional tile bounds, can be used'],[-1,'     *     by subclasses that have to deal with different tile sizes at the'],[-1,'     *     layer extent edges (e.g. Zoomify)'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Size&gt;} The size that the image should be, taking into '],[-1,'     *     account gutters.'],[-1,'     *\/ '],[-1,'    getImageSize: function(bounds) { '],[0,'        return (this.imageSize || this.tileSize); '],[-1,'    },    '],[-1,'  '],[-1,'    \/**'],[-1,'     * APIMethod: setTileSize'],[-1,'     * Set the tile size based on the map size.  This also sets layer.imageSize'],[-1,'     *     or use by Tile.Image.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * size - {&lt;OpenLayers.Size&gt;}'],[-1,'     *\/'],[-1,'    setTileSize: function(size) {'],[0,'        var tileSize = (size) ? size :'],[-1,'                                ((this.tileSize) ? this.tileSize :'],[-1,'                                                   this.map.getTileSize());'],[0,'        this.tileSize = tileSize;'],[0,'        if(this.gutter) {'],[-1,'          \/\/ layers with gutters need non-null tile sizes'],[-1,'          \/\/if(tileSize == null) {'],[-1,'          \/\/    OpenLayers.console.error(\&quot;Error in layer.setMap() for \&quot; +'],[-1,'          \/\/                              this.name + \&quot;: layers with \&quot; +'],[-1,'          \/\/                              \&quot;gutters need non-null tile sizes\&quot;);'],[-1,'          \/\/}'],[0,'            this.imageSize = new OpenLayers.Size(tileSize.w + (2*this.gutter), '],[-1,'                                                 tileSize.h + (2*this.gutter)); '],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getVisibility'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The layer should be displayed (if in range).'],[-1,'     *\/'],[-1,'    getVisibility: function() {'],[0,'        return this.visibility;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: setVisibility'],[-1,'     * Set the visibility flag for the layer and hide\/show &amp; redraw '],[-1,'     *     accordingly. Fire event unless otherwise specified'],[-1,'     * '],[-1,'     * Note that visibility is no longer simply whether or not the layer\'s'],[-1,'     *     style.display is set to \&quot;block\&quot;. Now we store a \'visibility\' state '],[-1,'     *     property on the layer class, this allows us to remember whether or '],[-1,'     *     not we *desire* for a layer to be visible. In the case where the '],[-1,'     *     map\'s resolution is out of the layer\'s range, this desire may be '],[-1,'     *     subverted.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * visibility - {Boolean} Whether or not to display the layer (if in range)'],[-1,'     *\/'],[-1,'    setVisibility: function(visibility) {'],[0,'        if (visibility != this.visibility) {'],[0,'            this.visibility = visibility;'],[0,'            this.display(visibility);'],[0,'            this.redraw();'],[0,'            this.events.triggerEvent(\&quot;visibilitychanged\&quot;);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: display'],[-1,'     * Hide or show the Layer. This is designed to be used internally, and '],[-1,'     *     is not generally the way to enable or disable the layer. For that,'],[-1,'     *     use the setVisibility function instead..'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * display - {Boolean}'],[-1,'     *\/'],[-1,'    display: function(display) {'],[0,'        if (display != (this.div.style.display != \&quot;none\&quot;)) {'],[0,'            this.div.style.display = (display &amp;&amp; this.calculateInRange()) ? \&quot;block\&quot; : \&quot;none\&quot;;'],[0,'            if(this.map){'],[0,'                this.map.events.triggerEvent(\&quot;changelayer\&quot;, {'],[-1,'                    layer: this, property: \&quot;visibility\&quot;'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: calculateInRange'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The layer is displayable at the current map\'s current'],[-1,'     *     resolution. Note that if \'alwaysInRange\' is true for the layer, '],[-1,'     *     this function will always return true.'],[-1,'     *\/'],[-1,'    calculateInRange: function() {'],[0,'        var inRange = false;'],[-1,''],[0,'        if (this.alwaysInRange) {'],[0,'            inRange = true;'],[-1,'        } else {'],[0,'            if (this.map) {'],[0,'                var resolution = this.map.getResolution();'],[0,'                inRange = ( (resolution &gt;= this.minResolution) &amp;&amp;'],[-1,'                            (resolution &lt;= this.maxResolution) );'],[-1,'            }'],[-1,'        }'],[0,'        return inRange;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: setIsBaseLayer'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * isBaseLayer - {Boolean}'],[-1,'     *\/'],[-1,'    setIsBaseLayer: function(isBaseLayer) {'],[0,'        if (isBaseLayer != this.isBaseLayer) {'],[0,'            this.isBaseLayer = isBaseLayer;'],[0,'            if (this.map != null) {'],[0,'                this.map.events.triggerEvent(\&quot;changebaselayer\&quot;, {'],[-1,'                    layer: this'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*                 Baselayer Functions                  *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/'],[-1,'  '],[-1,'    \/** '],[-1,'     * Method: initResolutions'],[-1,'     * This method\'s responsibility is to set up the \'resolutions\' array '],[-1,'     *     for the layer -- this array is what the layer will use to interface'],[-1,'     *     between the zoom levels of the map and the resolution display '],[-1,'     *     of the layer.'],[-1,'     * '],[-1,'     * The user has several options that determine how the array is set up.'],[-1,'     *  '],[-1,'     * For a detailed explanation, see the following wiki from the '],[-1,'     *     openlayers.org homepage:'],[-1,'     *     http:\/\/trac.openlayers.org\/wiki\/SettingZoomLevels'],[-1,'     *\/'],[-1,'    initResolutions: function() {'],[-1,''],[-1,'        \/\/ ok we want resolutions, here\'s our strategy:'],[-1,'        \/\/'],[-1,'        \/\/ 1. if resolutions are defined in the layer config, use them'],[-1,'        \/\/ 2. else, if scales are defined in the layer config then derive'],[-1,'        \/\/    resolutions from these scales'],[-1,'        \/\/ 3. else, attempt to calculate resolutions from maxResolution,'],[-1,'        \/\/    minResolution, numZoomLevels, maxZoomLevel set in the'],[-1,'        \/\/    layer config'],[-1,'        \/\/ 4. if we still don\'t have resolutions, and if resolutions'],[-1,'        \/\/    are defined in the same, use them'],[-1,'        \/\/ 5. else, if scales are defined in the map then derive'],[-1,'        \/\/    resolutions from these scales'],[-1,'        \/\/ 6. else, attempt to calculate resolutions from maxResolution,'],[-1,'        \/\/    minResolution, numZoomLevels, maxZoomLevel set in the'],[-1,'        \/\/    map'],[-1,'        \/\/ 7. hope for the best!'],[-1,''],[0,'        var i, len, p;'],[0,'        var props = {}, alwaysInRange = true;'],[-1,''],[-1,'        \/\/ get resolution data from layer config'],[-1,'        \/\/ (we also set alwaysInRange in the layer as appropriate)'],[0,'        for(i=0, len=this.RESOLUTION_PROPERTIES.length; i&lt;len; i++) {'],[0,'            p = this.RESOLUTION_PROPERTIES[i];'],[0,'            props[p] = this.options[p];'],[0,'            if(alwaysInRange &amp;&amp; this.options[p]) {'],[0,'                alwaysInRange = false;'],[-1,'            }'],[-1,'        }'],[0,'        if(this.options.alwaysInRange == null) {'],[0,'            this.alwaysInRange = alwaysInRange;'],[-1,'        }'],[-1,''],[-1,'        \/\/ if we don\'t have resolutions then attempt to derive them from scales'],[0,'        if(props.resolutions == null) {'],[0,'            props.resolutions = this.resolutionsFromScales(props.scales);'],[-1,'        }'],[-1,''],[-1,'        \/\/ if we still don\'t have resolutions then attempt to calculate them'],[0,'        if(props.resolutions == null) {'],[0,'            props.resolutions = this.calculateResolutions(props);'],[-1,'        }'],[-1,''],[-1,'        \/\/ if we couldn\'t calculate resolutions then we look at we have'],[-1,'        \/\/ in the map'],[0,'        if(props.resolutions == null) {'],[0,'            for(i=0, len=this.RESOLUTION_PROPERTIES.length; i&lt;len; i++) {'],[0,'                p = this.RESOLUTION_PROPERTIES[i];'],[0,'                props[p] = this.options[p] != null ?'],[-1,'                    this.options[p] : this.map[p];'],[-1,'            }'],[0,'            if(props.resolutions == null) {'],[0,'                props.resolutions = this.resolutionsFromScales(props.scales);'],[-1,'            }'],[0,'            if(props.resolutions == null) {'],[0,'                props.resolutions = this.calculateResolutions(props);'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ ok, we new need to set properties in the instance'],[-1,''],[-1,'        \/\/ get maxResolution from the config if it\'s defined there'],[0,'        var maxResolution;'],[0,'        if(this.options.maxResolution &amp;&amp;'],[-1,'           this.options.maxResolution !== \&quot;auto\&quot;) {'],[0,'            maxResolution = this.options.maxResolution;'],[-1,'        }'],[0,'        if(this.options.minScale) {'],[0,'            maxResolution = OpenLayers.Util.getResolutionFromScale('],[-1,'                this.options.minScale, this.units);'],[-1,'        }'],[-1,''],[-1,'        \/\/ get minResolution from the config if it\'s defined there'],[0,'        var minResolution;'],[0,'        if(this.options.minResolution &amp;&amp;'],[-1,'           this.options.minResolution !== \&quot;auto\&quot;) {'],[0,'            minResolution = this.options.minResolution;'],[-1,'        }'],[0,'        if(this.options.maxScale) {'],[0,'            minResolution = OpenLayers.Util.getResolutionFromScale('],[-1,'                this.options.maxScale, this.units);'],[-1,'        }'],[-1,''],[0,'        if(props.resolutions) {'],[-1,''],[-1,'            \/\/sort resolutions array descendingly'],[0,'            props.resolutions.sort(function(a, b) {'],[0,'                return (b - a);'],[-1,'            });'],[-1,''],[-1,'            \/\/ if we still don\'t have a maxResolution get it from the'],[-1,'            \/\/ resolutions array'],[0,'            if(!maxResolution) {'],[0,'                maxResolution = props.resolutions[0];'],[-1,'            }'],[-1,''],[-1,'            \/\/ if we still don\'t have a minResolution get it from the'],[-1,'            \/\/ resolutions array'],[0,'            if(!minResolution) {'],[0,'                var lastIdx = props.resolutions.length - 1;'],[0,'                minResolution = props.resolutions[lastIdx];'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        this.resolutions = props.resolutions;'],[0,'        if(this.resolutions) {'],[0,'            len = this.resolutions.length;'],[0,'            this.scales = new Array(len);'],[0,'            for(i=0; i&lt;len; i++) {'],[0,'                this.scales[i] = OpenLayers.Util.getScaleFromResolution('],[-1,'                    this.resolutions[i], this.units);'],[-1,'            }'],[0,'            this.numZoomLevels = len;'],[-1,'        }'],[0,'        this.minResolution = minResolution;'],[0,'        if(minResolution) {'],[0,'            this.maxScale = OpenLayers.Util.getScaleFromResolution('],[-1,'                minResolution, this.units);'],[-1,'        }'],[0,'        this.maxResolution = maxResolution;'],[0,'        if(maxResolution) {'],[0,'            this.minScale = OpenLayers.Util.getScaleFromResolution('],[-1,'                maxResolution, this.units);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: resolutionsFromScales'],[-1,'     * Derive resolutions from scales.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * scales - {Array(Number)} Scales'],[-1,'     *'],[-1,'     * Returns'],[-1,'     * {Array(Number)} Resolutions'],[-1,'     *\/'],[-1,'    resolutionsFromScales: function(scales) {'],[0,'        if(scales == null) {'],[0,'            return;'],[-1,'        }'],[0,'        var resolutions, i, len;'],[0,'        len = scales.length;'],[0,'        resolutions = new Array(len);'],[0,'        for(i=0; i&lt;len; i++) {'],[0,'            resolutions[i] = OpenLayers.Util.getResolutionFromScale('],[-1,'                scales[i], this.units);'],[-1,'        }'],[0,'        return resolutions;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: calculateResolutions'],[-1,'     * Calculate resolutions based on the provided properties.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * props - {Object} Properties'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array({Number})} Array of resolutions.'],[-1,'     *\/'],[-1,'    calculateResolutions: function(props) {'],[-1,''],[0,'        var viewSize, wRes, hRes;'],[-1,''],[-1,'        \/\/ determine maxResolution'],[0,'        var maxResolution = props.maxResolution;'],[0,'        if(props.minScale != null) {'],[0,'            maxResolution ='],[-1,'                OpenLayers.Util.getResolutionFromScale(props.minScale,'],[-1,'                                                       this.units);'],[0,'        } else if(maxResolution == \&quot;auto\&quot; &amp;&amp; this.maxExtent != null) {'],[0,'            viewSize = this.map.getSize();'],[0,'            wRes = this.maxExtent.getWidth() \/ viewSize.w;'],[0,'            hRes = this.maxExtent.getHeight() \/ viewSize.h;'],[0,'            maxResolution = Math.max(wRes, hRes);'],[-1,'        }'],[-1,''],[-1,'        \/\/ determine minResolution'],[0,'        var minResolution = props.minResolution;'],[0,'        if(props.maxScale != null) {'],[0,'            minResolution ='],[-1,'                OpenLayers.Util.getResolutionFromScale(props.maxScale,'],[-1,'                                                       this.units);'],[0,'        } else if(props.minResolution == \&quot;auto\&quot; &amp;&amp; this.minExtent != null) {'],[0,'            viewSize = this.map.getSize();'],[0,'            wRes = this.minExtent.getWidth() \/ viewSize.w;'],[0,'            hRes = this.minExtent.getHeight()\/ viewSize.h;'],[0,'            minResolution = Math.max(wRes, hRes);'],[-1,'        }'],[-1,''],[0,'        if(typeof maxResolution !== \&quot;number\&quot; &amp;&amp;'],[-1,'           typeof minResolution !== \&quot;number\&quot; &amp;&amp;'],[-1,'           this.maxExtent != null) {'],[-1,'            \/\/ maxResolution for default grid sets assumes that at zoom'],[-1,'            \/\/ level zero, the whole world fits on one tile.'],[0,'            var tileSize = this.map.getTileSize();'],[0,'            maxResolution = Math.max('],[-1,'                this.maxExtent.getWidth() \/ tileSize.w,'],[-1,'                this.maxExtent.getHeight() \/ tileSize.h'],[-1,'            );'],[-1,'        }'],[-1,''],[-1,'        \/\/ determine numZoomLevels'],[0,'        var maxZoomLevel = props.maxZoomLevel;'],[0,'        var numZoomLevels = props.numZoomLevels;'],[0,'        if(typeof minResolution === \&quot;number\&quot; &amp;&amp;'],[-1,'           typeof maxResolution === \&quot;number\&quot; &amp;&amp; numZoomLevels === undefined) {'],[0,'            var ratio = maxResolution \/ minResolution;'],[0,'            numZoomLevels = Math.floor(Math.log(ratio) \/ Math.log(2)) + 1;'],[0,'        } else if(numZoomLevels === undefined &amp;&amp; maxZoomLevel != null) {'],[0,'            numZoomLevels = maxZoomLevel + 1;'],[-1,'        }'],[-1,''],[-1,'        \/\/ are we able to calculate resolutions?'],[0,'        if(typeof numZoomLevels !== \&quot;number\&quot; || numZoomLevels &lt;= 0 ||'],[-1,'           (typeof maxResolution !== \&quot;number\&quot; &amp;&amp;'],[-1,'                typeof minResolution !== \&quot;number\&quot;)) {'],[0,'            return;'],[-1,'        }'],[-1,''],[-1,'        \/\/ now we have numZoomLevels and at least one of maxResolution'],[-1,'        \/\/ or minResolution, we can populate the resolutions array'],[-1,''],[0,'        var resolutions = new Array(numZoomLevels);'],[0,'        var base = 2;'],[0,'        if(typeof minResolution == \&quot;number\&quot; &amp;&amp;'],[-1,'           typeof maxResolution == \&quot;number\&quot;) {'],[-1,'            \/\/ if maxResolution and minResolution are set, we calculate'],[-1,'            \/\/ the base for exponential scaling that starts at'],[-1,'            \/\/ maxResolution and ends at minResolution in numZoomLevels'],[-1,'            \/\/ steps.'],[0,'            base = Math.pow('],[-1,'                    (maxResolution \/ minResolution),'],[-1,'                (1 \/ (numZoomLevels - 1))'],[-1,'            );'],[-1,'        }'],[-1,''],[0,'        var i;'],[0,'        if(typeof maxResolution === \&quot;number\&quot;) {'],[0,'            for(i=0; i&lt;numZoomLevels; i++) {'],[0,'                resolutions[i] = maxResolution \/ Math.pow(base, i);'],[-1,'            }'],[-1,'        } else {'],[0,'            for(i=0; i&lt;numZoomLevels; i++) {'],[0,'                resolutions[numZoomLevels - 1 - i] ='],[-1,'                    minResolution * Math.pow(base, i);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        return resolutions;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getResolution'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The currently selected resolution of the map, taken from the'],[-1,'     *     resolutions array, indexed by current zoom level.'],[-1,'     *\/'],[-1,'    getResolution: function() {'],[0,'        var zoom = this.map.getZoom();'],[0,'        return this.getResolutionForZoom(zoom);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: getExtent'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} A Bounds object which represents the lon\/lat '],[-1,'     *     bounds of the current viewPort.'],[-1,'     *\/'],[-1,'    getExtent: function() {'],[-1,'        \/\/ just use stock map calculateBounds function -- passing no arguments'],[-1,'        \/\/  means it will user map\'s current center &amp; resolution'],[-1,'        \/\/'],[0,'        return this.map.calculateBounds();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getZoomForExtent'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * extent - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * closest - {Boolean} Find the zoom level that most closely fits the '],[-1,'     *     specified bounds. Note that this may result in a zoom that does '],[-1,'     *     not exactly contain the entire extent.'],[-1,'     *     Default is false.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Integer} The index of the zoomLevel (entry in the resolutions array) '],[-1,'     *     for the passed-in extent. We do this by calculating the ideal '],[-1,'     *     resolution for the given extent (based on the map size) and then '],[-1,'     *     calling getZoomForResolution(), passing along the \'closest\''],[-1,'     *     parameter.'],[-1,'     *\/'],[-1,'    getZoomForExtent: function(extent, closest) {'],[0,'        var viewSize = this.map.getSize();'],[0,'        var idealResolution = Math.max( extent.getWidth()  \/ viewSize.w,'],[-1,'                                        extent.getHeight() \/ viewSize.h );'],[-1,''],[0,'        return this.getZoomForResolution(idealResolution, closest);'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: getDataExtent'],[-1,'     * Calculates the max extent which includes all of the data for the layer.'],[-1,'     *     This function is to be implemented by subclasses.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    getDataExtent: function () {'],[-1,'        \/\/to be implemented by subclasses'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getResolutionForZoom'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * zoom - {Float}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} A suitable resolution for the specified zoom.'],[-1,'     *\/'],[-1,'    getResolutionForZoom: function(zoom) {'],[0,'        zoom = Math.max(0, Math.min(zoom, this.resolutions.length - 1));'],[0,'        var resolution;'],[0,'        if(this.map.fractionalZoom) {'],[0,'            var low = Math.floor(zoom);'],[0,'            var high = Math.ceil(zoom);'],[0,'            resolution = this.resolutions[low] -'],[-1,'                ((zoom-low) * (this.resolutions[low]-this.resolutions[high]));'],[-1,'        } else {'],[0,'            resolution = this.resolutions[Math.round(zoom)];'],[-1,'        }'],[0,'        return resolution;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getZoomForResolution'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * resolution - {Float}'],[-1,'     * closest - {Boolean} Find the zoom level that corresponds to the absolute '],[-1,'     *     closest resolution, which may result in a zoom whose corresponding'],[-1,'     *     resolution is actually smaller than we would have desired (if this'],[-1,'     *     is being called from a getZoomForExtent() call, then this means that'],[-1,'     *     the returned zoom index might not actually contain the entire '],[-1,'     *     extent specified... but it\'ll be close).'],[-1,'     *     Default is false.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer} The index of the zoomLevel (entry in the resolutions array) '],[-1,'     *     that corresponds to the best fit resolution given the passed in '],[-1,'     *     value and the \'closest\' specification.'],[-1,'     *\/'],[-1,'    getZoomForResolution: function(resolution, closest) {'],[0,'        var zoom, i, len;'],[0,'        if(this.map.fractionalZoom) {'],[0,'            var lowZoom = 0;'],[0,'            var highZoom = this.resolutions.length - 1;'],[0,'            var highRes = this.resolutions[lowZoom];'],[0,'            var lowRes = this.resolutions[highZoom];'],[0,'            var res;'],[0,'            for(i=0, len=this.resolutions.length; i&lt;len; ++i) {'],[0,'                res = this.resolutions[i];'],[0,'                if(res &gt;= resolution) {'],[0,'                    highRes = res;'],[0,'                    lowZoom = i;'],[-1,'                }'],[0,'                if(res &lt;= resolution) {'],[0,'                    lowRes = res;'],[0,'                    highZoom = i;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[0,'            var dRes = highRes - lowRes;'],[0,'            if(dRes &gt; 0) {'],[0,'                zoom = lowZoom + ((highRes - resolution) \/ dRes);'],[-1,'            } else {'],[0,'                zoom = lowZoom;'],[-1,'            }'],[-1,'        } else {'],[0,'            var diff;'],[0,'            var minDiff = Number.POSITIVE_INFINITY;'],[0,'            for(i=0, len=this.resolutions.length; i&lt;len; i++) {            '],[0,'                if (closest) {'],[0,'                    diff = Math.abs(this.resolutions[i] - resolution);'],[0,'                    if (diff &gt; minDiff) {'],[0,'                        break;'],[-1,'                    }'],[0,'                    minDiff = diff;'],[-1,'                } else {'],[0,'                    if (this.resolutions[i] &lt; resolution) {'],[0,'                        break;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            zoom = Math.max(0, i-1);'],[-1,'        }'],[0,'        return zoom;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getLonLatFromViewPortPx'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * viewPortPx - {&lt;OpenLayers.Pixel&gt;|Object} An OpenLayers.Pixel or'],[-1,'     *                                          an object with a \'x\''],[-1,'     *                                          and \'y\' properties.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} An OpenLayers.LonLat which is the passed-in '],[-1,'     *     view port &lt;OpenLayers.Pixel&gt;, translated into lon\/lat by the layer.'],[-1,'     *\/'],[-1,'    getLonLatFromViewPortPx: function (viewPortPx) {'],[0,'        var lonlat = null;'],[0,'        var map = this.map;'],[0,'        if (viewPortPx != null &amp;&amp; map.minPx) {'],[0,'            var res = map.getResolution();'],[0,'            var maxExtent = map.getMaxExtent({restricted: true});'],[0,'            var lon = (viewPortPx.x - map.minPx.x) * res + maxExtent.left;'],[0,'            var lat = (map.minPx.y - viewPortPx.y) * res + maxExtent.top;'],[0,'            lonlat = new OpenLayers.LonLat(lon, lat);'],[-1,''],[0,'            if (this.wrapDateLine) {'],[0,'                lonlat = lonlat.wrapDateLine(this.maxExtent);'],[-1,'            }'],[-1,'        }'],[0,'        return lonlat;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getViewPortPxFromLonLat'],[-1,'     * Returns a pixel location given a map location.  This method will return'],[-1,'     *     fractional pixel values.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;|Object} An OpenLayers.LonLat or'],[-1,'     *                                       an object with a \'lon\''],[-1,'     *                                       and \'lat\' properties.'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {&lt;OpenLayers.Pixel&gt;} An &lt;OpenLayers.Pixel&gt; which is the passed-in '],[-1,'     *     lonlat translated into view port pixels.'],[-1,'     *\/'],[-1,'    getViewPortPxFromLonLat: function (lonlat, resolution) {'],[0,'        var px = null; '],[0,'        if (lonlat != null) {'],[0,'            resolution = resolution || this.map.getResolution();'],[0,'            var extent = this.map.calculateBounds(null, resolution);'],[0,'            px = new OpenLayers.Pixel('],[-1,'                (1\/resolution * (lonlat.lon - extent.left)),'],[-1,'                (1\/resolution * (extent.top - lonlat.lat))'],[-1,'            );    '],[-1,'        }'],[0,'        return px;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setOpacity'],[-1,'     * Sets the opacity for the entire layer (all images)'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * opacity - {Float}'],[-1,'     *\/'],[-1,'    setOpacity: function(opacity) {'],[0,'        if (opacity != this.opacity) {'],[0,'            this.opacity = opacity;'],[0,'            var childNodes = this.div.childNodes;'],[0,'            for(var i = 0, len = childNodes.length; i &lt; len; ++i) {'],[0,'                var element = childNodes[i].firstChild || childNodes[i];'],[0,'                var lastChild = childNodes[i].lastChild;'],[-1,'                \/\/TODO de-uglify this'],[0,'                if (lastChild &amp;&amp; lastChild.nodeName.toLowerCase() === \&quot;iframe\&quot;) {'],[0,'                    element = lastChild.parentNode;'],[-1,'                }'],[0,'                OpenLayers.Util.modifyDOMElement(element, null, null, null, '],[-1,'                                                 null, null, null, opacity);'],[-1,'            }'],[0,'            if (this.map != null) {'],[0,'                this.map.events.triggerEvent(\&quot;changelayer\&quot;, {'],[-1,'                    layer: this,'],[-1,'                    property: \&quot;opacity\&quot;'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getZIndex'],[-1,'     * '],[-1,'     * Returns: '],[-1,'     * {Integer} the z-index of this layer'],[-1,'     *\/    '],[-1,'    getZIndex: function () {'],[0,'        return this.div.style.zIndex;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setZIndex'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * zIndex - {Integer}'],[-1,'     *\/    '],[-1,'    setZIndex: function (zIndex) {'],[0,'        this.div.style.zIndex = zIndex;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: adjustBounds'],[-1,'     * This function will take a bounds, and if wrapDateLine option is set'],[-1,'     *     on the layer, it will return a bounds which is wrapped around the '],[-1,'     *     world. We do not wrap for bounds which *cross* the '],[-1,'     *     maxExtent.left\/right, only bounds which are entirely to the left '],[-1,'     *     or entirely to the right.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    adjustBounds: function (bounds) {'],[-1,''],[0,'        if (this.gutter) {'],[-1,'            \/\/ Adjust the extent of a bounds in map units by the '],[-1,'            \/\/ layer\'s gutter in pixels.'],[0,'            var mapGutter = this.gutter * this.map.getResolution();'],[0,'            bounds = new OpenLayers.Bounds(bounds.left - mapGutter,'],[-1,'                                           bounds.bottom - mapGutter,'],[-1,'                                           bounds.right + mapGutter,'],[-1,'                                           bounds.top + mapGutter);'],[-1,'        }'],[-1,''],[0,'        if (this.wrapDateLine) {'],[-1,'            \/\/ wrap around the date line, within the limits of rounding error'],[0,'            var wrappingOptions = { '],[-1,'                \'rightTolerance\':this.getResolution(),'],[-1,'                \'leftTolerance\':this.getResolution()'],[-1,'            };    '],[0,'            bounds = bounds.wrapDateLine(this.maxExtent, wrappingOptions);'],[-1,'                              '],[-1,'        }'],[0,'        return bounds;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/SphericalMercator.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer.js'],[-1,' * @requires OpenLayers\/Projection.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.SphericalMercator'],[-1,' * A mixin for layers that wraps up the pieces neccesary to have a coordinate'],[-1,' *     conversion for working with commercial APIs which use a spherical'],[-1,' *     mercator projection.  Using this layer as a base layer, additional'],[-1,' *     layers can be used as overlays if they are in the same projection.'],[-1,' *'],[-1,' * A layer is given properties of this object by setting the sphericalMercator'],[-1,' *     property to true.'],[-1,' *'],[-1,' * More projection information:'],[-1,' *  - http:\/\/spatialreference.org\/ref\/user\/google-projection\/'],[-1,' *'],[-1,' * Proj4 Text:'],[-1,' *     +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0'],[-1,' *     +k=1.0 +units=m +nadgrids=@null +no_defs'],[-1,' *'],[-1,' * WKT:'],[-1,' *     900913=PROJCS[\&quot;WGS84 \/ Simple Mercator\&quot;, GEOGCS[\&quot;WGS 84\&quot;,'],[-1,' *     DATUM[\&quot;WGS_1984\&quot;, SPHEROID[\&quot;WGS_1984\&quot;, 6378137.0, 298.257223563]], '],[-1,' *     PRIMEM[\&quot;Greenwich\&quot;, 0.0], UNIT[\&quot;degree\&quot;, 0.017453292519943295], '],[-1,' *     AXIS[\&quot;Longitude\&quot;, EAST], AXIS[\&quot;Latitude\&quot;, NORTH]],'],[-1,' *     PROJECTION[\&quot;Mercator_1SP_Google\&quot;], '],[-1,' *     PARAMETER[\&quot;latitude_of_origin\&quot;, 0.0], PARAMETER[\&quot;central_meridian\&quot;, 0.0], '],[-1,' *     PARAMETER[\&quot;scale_factor\&quot;, 1.0], PARAMETER[\&quot;false_easting\&quot;, 0.0], '],[-1,' *     PARAMETER[\&quot;false_northing\&quot;, 0.0], UNIT[\&quot;m\&quot;, 1.0], AXIS[\&quot;x\&quot;, EAST],'],[-1,' *     AXIS[\&quot;y\&quot;, NORTH], AUTHORITY[\&quot;EPSG\&quot;,\&quot;900913\&quot;]]'],[-1,' *\/'],[1,'OpenLayers.Layer.SphericalMercator = {'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getExtent'],[-1,'     * Get the map\'s extent.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} The map extent.'],[-1,'     *\/'],[-1,'    getExtent: function() {'],[0,'        var extent = null;'],[0,'        if (this.sphericalMercator) {'],[0,'            extent = this.map.calculateBounds();'],[-1,'        } else {'],[0,'            extent = OpenLayers.Layer.FixedZoomLevels.prototype.getExtent.apply(this);'],[-1,'        }'],[0,'        return extent;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getLonLatFromViewPortPx'],[-1,'     * Get a map location from a pixel location'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * viewPortPx - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     *  {&lt;OpenLayers.LonLat&gt;} An OpenLayers.LonLat which is the passed-in view'],[-1,'     *  port OpenLayers.Pixel, translated into lon\/lat by map lib'],[-1,'     *  If the map lib is not loaded or not centered, returns null'],[-1,'     *\/'],[-1,'    getLonLatFromViewPortPx: function (viewPortPx) {'],[0,'        return OpenLayers.Layer.prototype.getLonLatFromViewPortPx.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getViewPortPxFromLonLat'],[-1,'     * Get a pixel location from a map location'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} An OpenLayers.Pixel which is the passed-in'],[-1,'     * OpenLayers.LonLat, translated into view port pixels by map lib'],[-1,'     * If map lib is not loaded or not centered, returns null'],[-1,'     *\/'],[-1,'    getViewPortPxFromLonLat: function (lonlat) {'],[0,'        return OpenLayers.Layer.prototype.getViewPortPxFromLonLat.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: initMercatorParameters '],[-1,'     * Set up the mercator parameters on the layer: resolutions,'],[-1,'     *     projection, units.'],[-1,'     *\/'],[-1,'    initMercatorParameters: function() {'],[-1,'        \/\/ set up properties for Mercator - assume EPSG:900913'],[0,'        this.RESOLUTIONS = [];'],[0,'        var maxResolution = 156543.03390625;'],[0,'        for(var zoom=0; zoom&lt;=this.MAX_ZOOM_LEVEL; ++zoom) {'],[0,'            this.RESOLUTIONS[zoom] = maxResolution \/ Math.pow(2, zoom);'],[-1,'        }'],[0,'        this.units = \&quot;m\&quot;;'],[0,'        this.projection = this.projection || \&quot;EPSG:900913\&quot;;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: forwardMercator'],[-1,'     * Given a lon,lat in EPSG:4326, return a point in Spherical Mercator.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * lon - {float} '],[-1,'     * lat - {float}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} The coordinates transformed to Mercator.'],[-1,'     *\/'],[-1,'    forwardMercator: (function() {'],[1,'        var gg = new OpenLayers.Projection(\&quot;EPSG:4326\&quot;);'],[1,'        var sm = new OpenLayers.Projection(\&quot;EPSG:900913\&quot;);'],[1,'        return function(lon, lat) {'],[0,'            var point = OpenLayers.Projection.transform({x: lon, y: lat}, gg, sm);'],[0,'            return new OpenLayers.LonLat(point.x, point.y);'],[-1,'        };'],[-1,'    })(),'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: inverseMercator'],[-1,'     * Given a x,y in Spherical Mercator, return a point in EPSG:4326.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x - {float} A map x in Spherical Mercator.'],[-1,'     * y - {float} A map y in Spherical Mercator.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} The coordinates transformed to EPSG:4326.'],[-1,'     *\/'],[-1,'    inverseMercator: (function() {'],[1,'        var gg = new OpenLayers.Projection(\&quot;EPSG:4326\&quot;);'],[1,'        var sm = new OpenLayers.Projection(\&quot;EPSG:900913\&quot;);'],[1,'        return function(x, y) {'],[0,'            var point = OpenLayers.Projection.transform({x: x, y: y}, sm, gg);'],[0,'            return new OpenLayers.LonLat(point.x, point.y);'],[-1,'        };'],[-1,'    })()'],[-1,''],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/EventPane.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.EventPane'],[-1,' * Base class for 3rd party layers, providing a DOM element which isolates'],[-1,' * the 3rd-party layer from mouse events.'],[-1,' * Only used by Google layers.'],[-1,' *'],[-1,' * Automatically instantiated by the Google constructor, and not usually instantiated directly.'],[-1,' *'],[-1,' * Create a new event pane layer with the'],[-1,' * &lt;OpenLayers.Layer.EventPane&gt; constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.EventPane = OpenLayers.Class(OpenLayers.Layer, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: smoothDragPan'],[-1,'     * {Boolean} smoothDragPan determines whether non-public\/internal API'],[-1,'     *     methods are used for better performance while dragging EventPane '],[-1,'     *     layers. When not in sphericalMercator mode, the smoother dragging '],[-1,'     *     doesn\'t actually move north\/south directly with the number of '],[-1,'     *     pixels moved, resulting in a slight offset when you drag your mouse '],[-1,'     *     north south with this option on. If this visual disparity bothers '],[-1,'     *     you, you should turn this option off, or use spherical mercator. '],[-1,'     *     Default is on.'],[-1,'     *\/'],[-1,'    smoothDragPan: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: isBaseLayer'],[-1,'     * {Boolean} EventPaned layers are always base layers, by necessity.'],[-1,'     *\/ '],[-1,'    isBaseLayer: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: isFixed'],[-1,'     * {Boolean} EventPaned layers are fixed by default.'],[-1,'     *\/ '],[-1,'    isFixed: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: pane'],[-1,'     * {DOMElement} A reference to the element that controls the events.'],[-1,'     *\/'],[-1,'    pane: null,'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Property: mapObject'],[-1,'     * {Object} This is the object which will be used to load the 3rd party library'],[-1,'     * in the case of the google layer, this will be of type GMap, '],[-1,'     * in the case of the ve layer, this will be of type VEMap'],[-1,'     *\/ '],[-1,'    mapObject: null,'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.EventPane'],[-1,'     * Create a new event pane layer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String}'],[-1,'     * options - {Object} Hashtable of extra options to tag onto the layer'],[-1,'     *\/'],[-1,'    initialize: function(name, options) {'],[0,'        OpenLayers.Layer.prototype.initialize.apply(this, arguments);'],[0,'        if (this.pane == null) {'],[0,'            this.pane = OpenLayers.Util.createDiv(this.div.id + \&quot;_EventPane\&quot;);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Deconstruct this layer.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.mapObject = null;'],[0,'        this.pane = null;'],[0,'        OpenLayers.Layer.prototype.destroy.apply(this, arguments); '],[-1,'    },'],[-1,''],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     * Set the map property for the layer. This is done through an accessor'],[-1,'     * so that subclasses can override this and take special action once '],[-1,'     * they have their map variable set. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Layer.prototype.setMap.apply(this, arguments);'],[-1,'        '],[0,'        this.pane.style.zIndex = parseInt(this.div.style.zIndex) + 1;'],[0,'        this.pane.style.display = this.div.style.display;'],[0,'        this.pane.style.width=\&quot;100%\&quot;;'],[0,'        this.pane.style.height=\&quot;100%\&quot;;'],[0,'        if (OpenLayers.BROWSER_NAME == \&quot;msie\&quot;) {'],[0,'            this.pane.style.background = '],[-1,'                \&quot;url(\&quot; + OpenLayers.Util.getImageLocation(\&quot;blank.gif\&quot;) + \&quot;)\&quot;;'],[-1,'        }'],[-1,''],[0,'        if (this.isFixed) {'],[0,'            this.map.viewPortDiv.appendChild(this.pane);'],[-1,'        } else {'],[0,'            this.map.layerContainerDiv.appendChild(this.pane);'],[-1,'        }'],[-1,''],[-1,'        \/\/ once our layer has been added to the map, we can load it'],[0,'        this.loadMapObject();'],[-1,'    '],[-1,'        \/\/ if map didn\'t load, display warning'],[0,'        if (this.mapObject == null) {'],[0,'            this.loadWarningMessage();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: removeMap'],[-1,'     * On being removed from the map, we\'ll like to remove the invisible \'pane\''],[-1,'     *     div that we added to it on creation. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    removeMap: function(map) {'],[0,'        if (this.pane &amp;&amp; this.pane.parentNode) {'],[0,'            this.pane.parentNode.removeChild(this.pane);'],[-1,'        }'],[0,'        OpenLayers.Layer.prototype.removeMap.apply(this, arguments);'],[-1,'    },'],[-1,'  '],[-1,'    \/**'],[-1,'     * Method: loadWarningMessage'],[-1,'     * If we can\'t load the map lib, then display an error message to the '],[-1,'     *     user and tell them where to go for help.'],[-1,'     * '],[-1,'     *     This function sets up the layout for the warning message. Each 3rd'],[-1,'     *     party layer must implement its own getWarningHTML() function to '],[-1,'     *     provide the actual warning message.'],[-1,'     *\/'],[-1,'    loadWarningMessage:function() {'],[-1,''],[0,'        this.div.style.backgroundColor = \&quot;darkblue\&quot;;'],[-1,''],[0,'        var viewSize = this.map.getSize();'],[-1,'        '],[0,'        var msgW = Math.min(viewSize.w, 300);'],[0,'        var msgH = Math.min(viewSize.h, 200);'],[0,'        var size = new OpenLayers.Size(msgW, msgH);'],[-1,''],[0,'        var centerPx = new OpenLayers.Pixel(viewSize.w\/2, viewSize.h\/2);'],[-1,''],[0,'        var topLeft = centerPx.add(-size.w\/2, -size.h\/2);            '],[-1,''],[0,'        var div = OpenLayers.Util.createDiv(this.name + \&quot;_warning\&quot;, '],[-1,'                                            topLeft, '],[-1,'                                            size,'],[-1,'                                            null,'],[-1,'                                            null,'],[-1,'                                            null,'],[-1,'                                            \&quot;auto\&quot;);'],[-1,''],[0,'        div.style.padding = \&quot;7px\&quot;;'],[0,'        div.style.backgroundColor = \&quot;yellow\&quot;;'],[-1,''],[0,'        div.innerHTML = this.getWarningHTML();'],[0,'        this.div.appendChild(div);'],[-1,'    },'],[-1,'  '],[-1,'    \/** '],[-1,'     * Method: getWarningHTML'],[-1,'     * To be implemented by subclasses.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} String with information on why layer is broken, how to get'],[-1,'     *          it working.'],[-1,'     *\/'],[-1,'    getWarningHTML:function() {'],[-1,'        \/\/should be implemented by subclasses'],[0,'        return \&quot;\&quot;;'],[-1,'    },'],[-1,'  '],[-1,'    \/**'],[-1,'     * Method: display'],[-1,'     * Set the display on the pane'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * display - {Boolean}'],[-1,'     *\/'],[-1,'    display: function(display) {'],[0,'        OpenLayers.Layer.prototype.display.apply(this, arguments);'],[0,'        this.pane.style.display = this.div.style.display;'],[-1,'    },'],[-1,'  '],[-1,'    \/**'],[-1,'     * Method: setZIndex'],[-1,'     * Set the z-index order for the pane.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * zIndex - {int}'],[-1,'     *\/'],[-1,'    setZIndex: function (zIndex) {'],[0,'        OpenLayers.Layer.prototype.setZIndex.apply(this, arguments);'],[0,'        this.pane.style.zIndex = parseInt(this.div.style.zIndex) + 1;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: moveByPx'],[-1,'     * Move the layer based on pixel vector. To be implemented by subclasses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * dx - {Number} The x coord of the displacement vector.'],[-1,'     * dy - {Number} The y coord of the displacement vector.'],[-1,'     *\/'],[-1,'    moveByPx: function(dx, dy) {'],[0,'        OpenLayers.Layer.prototype.moveByPx.apply(this, arguments);'],[-1,'        '],[0,'        if (this.dragPanMapObject) {'],[0,'            this.dragPanMapObject(dx, -dy);'],[-1,'        } else {'],[0,'            this.moveTo(this.map.getCachedCenter());'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     * Handle calls to move the layer.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * zoomChanged - {Boolean}'],[-1,'     * dragging - {Boolean}'],[-1,'     *\/'],[-1,'    moveTo:function(bounds, zoomChanged, dragging) {'],[0,'        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);'],[-1,''],[0,'        if (this.mapObject != null) {'],[-1,''],[0,'            var newCenter = this.map.getCenter();'],[0,'            var newZoom = this.map.getZoom();'],[-1,''],[0,'            if (newCenter != null) {'],[-1,''],[0,'                var moOldCenter = this.getMapObjectCenter();'],[0,'                var oldCenter = this.getOLLonLatFromMapObjectLonLat(moOldCenter);'],[-1,''],[0,'                var moOldZoom = this.getMapObjectZoom();'],[0,'                var oldZoom= this.getOLZoomFromMapObjectZoom(moOldZoom);'],[-1,''],[0,'                if (!(newCenter.equals(oldCenter)) || newZoom != oldZoom) {'],[-1,''],[0,'                    if (!zoomChanged &amp;&amp; oldCenter &amp;&amp; this.dragPanMapObject &amp;&amp; '],[-1,'                        this.smoothDragPan) {'],[0,'                        var oldPx = this.map.getViewPortPxFromLonLat(oldCenter);'],[0,'                        var newPx = this.map.getViewPortPxFromLonLat(newCenter);'],[0,'                        this.dragPanMapObject(newPx.x-oldPx.x, oldPx.y-newPx.y);'],[-1,'                    } else {'],[0,'                        var center = this.getMapObjectLonLatFromOLLonLat(newCenter);'],[0,'                        var zoom = this.getMapObjectZoomFromOLZoom(newZoom);'],[0,'                        this.setMapObjectCenter(center, zoom, dragging);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,''],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*                 Baselayer Functions                  *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getLonLatFromViewPortPx'],[-1,'     * Get a map location from a pixel location'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * viewPortPx - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     *  {&lt;OpenLayers.LonLat&gt;} An OpenLayers.LonLat which is the passed-in view'],[-1,'     *  port OpenLayers.Pixel, translated into lon\/lat by map lib'],[-1,'     *  If the map lib is not loaded or not centered, returns null'],[-1,'     *\/'],[-1,'    getLonLatFromViewPortPx: function (viewPortPx) {'],[0,'        var lonlat = null;'],[0,'        if ( (this.mapObject != null) &amp;&amp; '],[-1,'             (this.getMapObjectCenter() != null) ) {'],[0,'            var moPixel = this.getMapObjectPixelFromOLPixel(viewPortPx);'],[0,'            var moLonLat = this.getMapObjectLonLatFromMapObjectPixel(moPixel);'],[0,'            lonlat = this.getOLLonLatFromMapObjectLonLat(moLonLat);'],[-1,'        }'],[0,'        return lonlat;'],[-1,'    },'],[-1,''],[-1,' '],[-1,'    \/**'],[-1,'     * Method: getViewPortPxFromLonLat'],[-1,'     * Get a pixel location from a map location'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} An OpenLayers.Pixel which is the passed-in'],[-1,'     * OpenLayers.LonLat, translated into view port pixels by map lib'],[-1,'     * If map lib is not loaded or not centered, returns null'],[-1,'     *\/'],[-1,'    getViewPortPxFromLonLat: function (lonlat) {'],[0,'        var viewPortPx = null;'],[0,'        if ( (this.mapObject != null) &amp;&amp; '],[-1,'             (this.getMapObjectCenter() != null) ) {'],[-1,''],[0,'            var moLonLat = this.getMapObjectLonLatFromOLLonLat(lonlat);'],[0,'            var moPixel = this.getMapObjectPixelFromMapObjectLonLat(moLonLat);'],[-1,'        '],[0,'            viewPortPx = this.getOLPixelFromMapObjectPixel(moPixel);'],[-1,'        }'],[0,'        return viewPortPx;'],[-1,'    },'],[-1,''],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*               Translation Functions                  *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*   The following functions translate Map Object and   *\/'],[-1,'  \/*            OL formats for Pixel, LonLat              *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/'],[-1,''],[-1,'  \/\/'],[-1,'  \/\/ TRANSLATION: MapObject LatLng &lt;-&gt; OpenLayers.LonLat'],[-1,'  \/\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getOLLonLatFromMapObjectLonLat'],[-1,'     * Get an OL style map location from a 3rd party style map location'],[-1,'     *'],[-1,'     * Parameters'],[-1,'     * moLonLat - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} An OpenLayers.LonLat, translated from the passed in '],[-1,'     *          MapObject LonLat'],[-1,'     *          Returns null if null value is passed in'],[-1,'     *\/'],[-1,'    getOLLonLatFromMapObjectLonLat: function(moLonLat) {'],[0,'        var olLonLat = null;'],[0,'        if (moLonLat != null) {'],[0,'            var lon = this.getLongitudeFromMapObjectLonLat(moLonLat);'],[0,'            var lat = this.getLatitudeFromMapObjectLonLat(moLonLat);'],[0,'            olLonLat = new OpenLayers.LonLat(lon, lat);'],[-1,'        }'],[0,'        return olLonLat;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getMapObjectLonLatFromOLLonLat'],[-1,'     * Get a 3rd party map location from an OL map location.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * olLonLat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} A MapObject LonLat, translated from the passed in '],[-1,'     *          OpenLayers.LonLat'],[-1,'     *          Returns null if null value is passed in'],[-1,'     *\/'],[-1,'    getMapObjectLonLatFromOLLonLat: function(olLonLat) {'],[0,'        var moLatLng = null;'],[0,'        if (olLonLat != null) {'],[0,'            moLatLng = this.getMapObjectLonLatFromLonLat(olLonLat.lon,'],[-1,'                                                         olLonLat.lat);'],[-1,'        }'],[0,'        return moLatLng;'],[-1,'    },'],[-1,''],[-1,''],[-1,'  \/\/'],[-1,'  \/\/ TRANSLATION: MapObject Pixel &lt;-&gt; OpenLayers.Pixel'],[-1,'  \/\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getOLPixelFromMapObjectPixel'],[-1,'     * Get an OL pixel location from a 3rd party pixel location.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * moPixel - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} An OpenLayers.Pixel, translated from the passed in '],[-1,'     *          MapObject Pixel'],[-1,'     *          Returns null if null value is passed in'],[-1,'     *\/'],[-1,'    getOLPixelFromMapObjectPixel: function(moPixel) {'],[0,'        var olPixel = null;'],[0,'        if (moPixel != null) {'],[0,'            var x = this.getXFromMapObjectPixel(moPixel);'],[0,'            var y = this.getYFromMapObjectPixel(moPixel);'],[0,'            olPixel = new OpenLayers.Pixel(x, y);'],[-1,'        }'],[0,'        return olPixel;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getMapObjectPixelFromOLPixel'],[-1,'     * Get a 3rd party pixel location from an OL pixel location'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * olPixel - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} A MapObject Pixel, translated from the passed in '],[-1,'     *          OpenLayers.Pixel'],[-1,'     *          Returns null if null value is passed in'],[-1,'     *\/'],[-1,'    getMapObjectPixelFromOLPixel: function(olPixel) {'],[0,'        var moPixel = null;'],[0,'        if (olPixel != null) {'],[0,'            moPixel = this.getMapObjectPixelFromXY(olPixel.x, olPixel.y);'],[-1,'        }'],[0,'        return moPixel;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.EventPane\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/FixedZoomLevels.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.FixedZoomLevels'],[-1,' *   Some Layers will already have established zoom levels (like google '],[-1,' *    or ve). Instead of trying to determine them and populate a resolutions[]'],[-1,' *    Array with those values, we will hijack the resolution functionality'],[-1,' *    here.'],[-1,' * '],[-1,' *   When you subclass FixedZoomLevels: '],[-1,' * '],[-1,' *   The initResolutions() call gets nullified, meaning no resolutions[] array '],[-1,' *    is set up. Which would be a big problem getResolution() in Layer, since '],[-1,' *    it merely takes map.zoom and indexes into resolutions[]... but....'],[-1,' * '],[-1,' *   The getResolution() call is also overridden. Instead of using the '],[-1,' *    resolutions[] array, we simply calculate the current resolution based'],[-1,' *    on the current extent and the current map size. But how will we be able'],[-1,' *    to calculate the current extent without knowing the resolution...?'],[-1,' *  '],[-1,' *   The getExtent() function is also overridden. Instead of calculating extent'],[-1,' *    based on the center point and the current resolution, we instead '],[-1,' *    calculate the extent by getting the lonlats at the top-left and '],[-1,' *    bottom-right by using the getLonLatFromViewPortPx() translation function,'],[-1,' *    taken from the pixel locations (0,0) and the size of the map. But how '],[-1,' *    will we be able to do lonlat-px translation without resolution....?'],[-1,' * '],[-1,' *   The getZoomForResolution() method is overridden. Instead of indexing into'],[-1,' *    the resolutions[] array, we call OpenLayers.Layer.getExent(), passing in'],[-1,' *    the desired resolution. With this extent, we then call getZoomForExtent() '],[-1,' * '],[-1,' * '],[-1,' *   Whenever you implement a layer using OpenLayers.Layer.FixedZoomLevels, '],[-1,' *    it is your responsibility to provide the following three functions:'],[-1,' * '],[-1,' *   - getLonLatFromViewPortPx'],[-1,' *   - getViewPortPxFromLonLat'],[-1,' *   - getZoomForExtent'],[-1,' * '],[-1,' *  ...those three functions should generally be provided by any reasonable '],[-1,' *  API that you might be working from.'],[-1,' *'],[-1,' *\/'],[1,'OpenLayers.Layer.FixedZoomLevels = OpenLayers.Class({'],[-1,'      '],[-1,'  \/********************************************************\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*                 Baselayer Functions                  *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/*    The following functions must all be implemented   *\/'],[-1,'  \/*                  by all base layers                  *\/'],[-1,'  \/*                                                      *\/'],[-1,'  \/********************************************************\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.FixedZoomLevels'],[-1,'     * Create a new fixed zoom levels layer.'],[-1,'     *\/'],[-1,'    initialize: function() {'],[-1,'        \/\/this class is only just to add the following functions... '],[-1,'        \/\/ nothing to actually do here... but it is probably a good'],[-1,'        \/\/ idea to have layers that use these functions call this '],[-1,'        \/\/ inititalize() anyways, in case at some point we decide we '],[-1,'        \/\/ do want to put some functionality or state in here. '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: initResolutions'],[-1,'     * Populate the resolutions array'],[-1,'     *\/'],[-1,'    initResolutions: function() {'],[-1,''],[0,'        var props = [\'minZoomLevel\', \'maxZoomLevel\', \'numZoomLevels\'];'],[-1,'          '],[0,'        for(var i=0, len=props.length; i&lt;len; i++) {'],[0,'            var property = props[i];'],[0,'            this[property] = (this.options[property] != null)  '],[-1,'                                     ? this.options[property] '],[-1,'                                     : this.map[property];'],[-1,'        }'],[-1,''],[0,'        if ( (this.minZoomLevel == null) ||'],[-1,'             (this.minZoomLevel &lt; this.MIN_ZOOM_LEVEL) ){'],[0,'            this.minZoomLevel = this.MIN_ZOOM_LEVEL;'],[-1,'        }        '],[-1,''],[-1,'        \/\/'],[-1,'        \/\/ At this point, we know what the minimum desired zoom level is, and'],[-1,'        \/\/  we must calculate the total number of zoom levels. '],[-1,'        \/\/  '],[-1,'        \/\/  Because we allow for the setting of either the \'numZoomLevels\''],[-1,'        \/\/   or the \'maxZoomLevel\' properties... on either the layer or the  '],[-1,'        \/\/   map, we have to define some rules to see which we take into'],[-1,'        \/\/   account first in this calculation. '],[-1,'        \/\/'],[-1,'        \/\/ The following is the precedence list for these properties:'],[-1,'        \/\/ '],[-1,'        \/\/ (1) numZoomLevels set on layer'],[-1,'        \/\/ (2) maxZoomLevel set on layer'],[-1,'        \/\/ (3) numZoomLevels set on map'],[-1,'        \/\/ (4) maxZoomLevel set on map*'],[-1,'        \/\/ (5) none of the above*'],[-1,'        \/\/'],[-1,'        \/\/ *Note that options (4) and (5) are only possible if the user '],[-1,'        \/\/  _explicitly_ sets the \'numZoomLevels\' property on the map to '],[-1,'        \/\/  null, since it is set by default to 16. '],[-1,'        \/\/'],[-1,''],[-1,'        \/\/'],[-1,'        \/\/ Note to future: In 3.0, I think we should remove the default '],[-1,'        \/\/ value of 16 for map.numZoomLevels. Rather, I think that value '],[-1,'        \/\/ should be set as a default on the Layer.WMS class. If someone'],[-1,'        \/\/ creates a 3rd party layer and does not specify any \'minZoomLevel\', '],[-1,'        \/\/ \'maxZoomLevel\', or \'numZoomLevels\', and has not explicitly '],[-1,'        \/\/ specified any of those on the map object either.. then I think'],[-1,'        \/\/ it is fair to say that s\/he wants all the zoom levels available.'],[-1,'        \/\/ '],[-1,'        \/\/ By making map.numZoomLevels *null* by default, that will be the '],[-1,'        \/\/ case. As it is, I don\'t feel comfortable changing that right now'],[-1,'        \/\/ as it would be a glaring API change and actually would probably'],[-1,'        \/\/ break many peoples\' codes. '],[-1,'        \/\/'],[-1,''],[-1,'        \/\/the number of zoom levels we\'d like to have.'],[0,'        var desiredZoomLevels;'],[-1,''],[-1,'        \/\/this is the maximum number of zoom levels the layer will allow, '],[-1,'        \/\/ given the specified starting minimum zoom level.'],[0,'        var limitZoomLevels = this.MAX_ZOOM_LEVEL - this.minZoomLevel + 1;'],[-1,''],[0,'        if ( ((this.options.numZoomLevels == null) &amp;&amp; '],[-1,'              (this.options.maxZoomLevel != null)) \/\/ (2)'],[-1,'              ||'],[-1,'             ((this.numZoomLevels == null) &amp;&amp;'],[-1,'              (this.maxZoomLevel != null)) \/\/ (4)'],[-1,'           ) {'],[-1,'            \/\/calculate based on specified maxZoomLevel (on layer or map)'],[0,'            desiredZoomLevels = this.maxZoomLevel - this.minZoomLevel + 1;'],[-1,'        } else {'],[-1,'            \/\/calculate based on specified numZoomLevels (on layer or map)'],[-1,'            \/\/ this covers cases (1) and (3)'],[0,'            desiredZoomLevels = this.numZoomLevels;'],[-1,'        }'],[-1,''],[0,'        if (desiredZoomLevels != null) {'],[-1,'            \/\/Now that we know what we would *like* the number of zoom levels'],[-1,'            \/\/ to be, based on layer or map options, we have to make sure that'],[-1,'            \/\/ it does not conflict with the actual limit, as specified by '],[-1,'            \/\/ the constants on the layer itself (and calculated into the'],[-1,'            \/\/ \'limitZoomLevels\' variable). '],[0,'            this.numZoomLevels = Math.min(desiredZoomLevels, limitZoomLevels);'],[-1,'        } else {'],[-1,'            \/\/ case (5) -- neither \'numZoomLevels\' not \'maxZoomLevel\' was '],[-1,'            \/\/ set on either the layer or the map. So we just use the '],[-1,'            \/\/ maximum limit as calculated by the layer\'s constants.'],[0,'            this.numZoomLevels = limitZoomLevels;'],[-1,'        }'],[-1,''],[-1,'        \/\/now that the \'numZoomLevels\' is appropriately, safely set, '],[-1,'        \/\/ we go back and re-calculate the \'maxZoomLevel\'.'],[0,'        this.maxZoomLevel = this.minZoomLevel + this.numZoomLevels - 1;'],[-1,''],[0,'        if (this.RESOLUTIONS != null) {'],[0,'            var resolutionsIndex = 0;'],[0,'            this.resolutions = [];'],[0,'            for(var i= this.minZoomLevel; i &lt;= this.maxZoomLevel; i++) {'],[0,'                this.resolutions[resolutionsIndex++] = this.RESOLUTIONS[i];            '],[-1,'            }'],[0,'            this.maxResolution = this.resolutions[0];'],[0,'            this.minResolution = this.resolutions[this.resolutions.length - 1];'],[-1,'        }       '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getResolution'],[-1,'     * Get the current map resolution'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} Map units per Pixel'],[-1,'     *\/'],[-1,'    getResolution: function() {'],[-1,''],[0,'        if (this.resolutions != null) {'],[0,'            return OpenLayers.Layer.prototype.getResolution.apply(this, arguments);'],[-1,'        } else {'],[0,'            var resolution = null;'],[-1,'            '],[0,'            var viewSize = this.map.getSize();'],[0,'            var extent = this.getExtent();'],[-1,'            '],[0,'            if ((viewSize != null) &amp;&amp; (extent != null)) {'],[0,'                resolution = Math.max( extent.getWidth()  \/ viewSize.w,'],[-1,'                                       extent.getHeight() \/ viewSize.h );'],[-1,'            }'],[0,'            return resolution;'],[-1,'        }'],[-1,'     },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getExtent'],[-1,'     * Calculates using px-&gt; lonlat translation functions on tl and br '],[-1,'     *     corners of viewport'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} A Bounds object which represents the lon\/lat '],[-1,'     *                       bounds of the current viewPort.'],[-1,'     *\/'],[-1,'    getExtent: function () {'],[0,'        var size = this.map.getSize();'],[0,'        var tl = this.getLonLatFromViewPortPx({'],[-1,'            x: 0, y: 0'],[-1,'        });'],[0,'        var br = this.getLonLatFromViewPortPx({'],[-1,'            x: size.w, y: size.h'],[-1,'        });'],[-1,'        '],[0,'        if ((tl != null) &amp;&amp; (br != null)) {'],[0,'            return new OpenLayers.Bounds(tl.lon, br.lat, br.lon, tl.lat);'],[-1,'        } else {'],[0,'            return null;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getZoomForResolution'],[-1,'     * Get the zoom level for a given resolution'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * resolution - {Float}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Integer} A suitable zoom level for the specified resolution.'],[-1,'     *           If no baselayer is set, returns null.'],[-1,'     *\/'],[-1,'    getZoomForResolution: function(resolution) {'],[-1,'      '],[0,'        if (this.resolutions != null) {'],[0,'            return OpenLayers.Layer.prototype.getZoomForResolution.apply(this, arguments);'],[-1,'        } else {'],[0,'            var extent = OpenLayers.Layer.prototype.getExtent.apply(this, []);'],[0,'            return this.getZoomForExtent(extent);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,''],[-1,''],[-1,'    '],[-1,'    \/********************************************************\/'],[-1,'    \/*                                                      *\/'],[-1,'    \/*             Translation Functions                    *\/'],[-1,'    \/*                                                      *\/'],[-1,'    \/*    The following functions translate GMaps and OL    *\/ '],[-1,'    \/*     formats for Pixel, LonLat, Bounds, and Zoom      *\/'],[-1,'    \/*                                                      *\/'],[-1,'    \/********************************************************\/'],[-1,'    '],[-1,'    '],[-1,'    \/\/'],[-1,'    \/\/ TRANSLATION: MapObject Zoom &lt;-&gt; OpenLayers Zoom'],[-1,'    \/\/'],[-1,'  '],[-1,'    \/**'],[-1,'     * Method: getOLZoomFromMapObjectZoom'],[-1,'     * Get the OL zoom index from the map object zoom level'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * moZoom - {Integer}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer} An OpenLayers Zoom level, translated from the passed in zoom'],[-1,'     *           Returns null if null value is passed in'],[-1,'     *\/'],[-1,'    getOLZoomFromMapObjectZoom: function(moZoom) {'],[0,'        var zoom = null;'],[0,'        if (moZoom != null) {'],[0,'            zoom = moZoom - this.minZoomLevel;'],[0,'            if (this.map.baseLayer !== this) {'],[0,'                zoom = this.map.baseLayer.getZoomForResolution('],[-1,'                    this.getResolutionForZoom(zoom)'],[-1,'                );'],[-1,'            }'],[-1,'        }'],[0,'        return zoom;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getMapObjectZoomFromOLZoom'],[-1,'     * Get the map object zoom level from the OL zoom level'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * olZoom - {Integer}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer} A MapObject level, translated from the passed in olZoom'],[-1,'     *           Returns null if null value is passed in'],[-1,'     *\/'],[-1,'    getMapObjectZoomFromOLZoom: function(olZoom) {'],[0,'        var zoom = null; '],[0,'        if (olZoom != null) {'],[0,'            zoom = olZoom + this.minZoomLevel;'],[0,'            if (this.map.baseLayer !== this) {'],[0,'                zoom = this.getZoomForResolution('],[-1,'                    this.map.baseLayer.getResolutionForZoom(zoom)'],[-1,'                );'],[-1,'            }'],[-1,'        }'],[0,'        return zoom;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.FixedZoomLevels\&quot;'],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/Google.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/SphericalMercator.js'],[-1,' * @requires OpenLayers\/Layer\/EventPane.js'],[-1,' * @requires OpenLayers\/Layer\/FixedZoomLevels.js'],[-1,' * @requires OpenLayers\/Lang.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.Google'],[-1,' * '],[-1,' * Provides a wrapper for Google\'s Maps API'],[-1,' * Normally the Terms of Use for this API do not allow wrapping, but Google'],[-1,' * have provided written consent to OpenLayers for this - see email in '],[-1,' * http:\/\/osgeo-org.1560.n6.nabble.com\/Google-Maps-API-Terms-of-Use-changes-tp4910013p4911981.html'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.SphericalMercator&gt;'],[-1,' *  - &lt;OpenLayers.Layer.EventPane&gt;'],[-1,' *  - &lt;OpenLayers.Layer.FixedZoomLevels&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.Google = OpenLayers.Class('],[-1,'    OpenLayers.Layer.EventPane, '],[-1,'    OpenLayers.Layer.FixedZoomLevels, {'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constant: MIN_ZOOM_LEVEL'],[-1,'     * {Integer} 0 '],[-1,'     *\/'],[-1,'    MIN_ZOOM_LEVEL: 0,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constant: MAX_ZOOM_LEVEL'],[-1,'     * {Integer} 21'],[-1,'     *\/'],[-1,'    MAX_ZOOM_LEVEL: 21,'],[-1,''],[-1,'    \/** '],[-1,'     * Constant: RESOLUTIONS'],[-1,'     * {Array(Float)} Hardcode these resolutions so that they are more closely'],[-1,'     *                tied with the standard wms projection'],[-1,'     *\/'],[-1,'    RESOLUTIONS: ['],[-1,'        1.40625, '],[-1,'        0.703125, '],[-1,'        0.3515625, '],[-1,'        0.17578125, '],[-1,'        0.087890625, '],[-1,'        0.0439453125,'],[-1,'        0.02197265625, '],[-1,'        0.010986328125, '],[-1,'        0.0054931640625, '],[-1,'        0.00274658203125,'],[-1,'        0.001373291015625, '],[-1,'        0.0006866455078125, '],[-1,'        0.00034332275390625,'],[-1,'        0.000171661376953125, '],[-1,'        0.0000858306884765625, '],[-1,'        0.00004291534423828125,'],[-1,'        0.00002145767211914062, '],[-1,'        0.00001072883605957031,'],[-1,'        0.00000536441802978515, '],[-1,'        0.00000268220901489257,'],[-1,'        0.0000013411045074462891,'],[-1,'        0.00000067055225372314453'],[-1,'    ],'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: type'],[-1,'     * {GMapType}'],[-1,'     *\/'],[-1,'    type: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: wrapDateLine'],[-1,'     * {Boolean} Allow user to pan forever east\/west.  Default is true.  '],[-1,'     *     Setting this to false only restricts panning if '],[-1,'     *     &lt;sphericalMercator&gt; is true. '],[-1,'     *\/'],[-1,'    wrapDateLine: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: sphericalMercator'],[-1,'     * {Boolean} Should the map act as a mercator-projected map? This will'],[-1,'     *     cause all interactions with the map to be in the actual map '],[-1,'     *     projection, which allows support for vector drawing, overlaying '],[-1,'     *     other maps, etc. '],[-1,'     *\/'],[-1,'    sphericalMercator: false, '],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {Number} The version of the Google Maps API'],[-1,'     *\/'],[-1,'    version: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Layer.Google'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * name - {String} A name for the layer.'],[-1,'     * options - {Object} An optional object whose properties will be set'],[-1,'     *     on the layer.'],[-1,'     *\/'],[-1,'    initialize: function(name, options) {'],[0,'        options = options || {};'],[0,'        if(!options.version) {'],[0,'            options.version = typeof GMap2 === \&quot;function\&quot; ? \&quot;2\&quot; : \&quot;3\&quot;;'],[-1,'        }'],[0,'        var mixin = OpenLayers.Layer.Google[\&quot;v\&quot; +'],[-1,'            options.version.replace(\/\\.\/g, \&quot;_\&quot;)];'],[0,'        if (mixin) {'],[0,'            OpenLayers.Util.applyDefaults(options, mixin);'],[-1,'        } else {'],[0,'            throw \&quot;Unsupported Google Maps API version: \&quot; + options.version;'],[-1,'        }'],[-1,''],[0,'        OpenLayers.Util.applyDefaults(options, mixin.DEFAULTS);'],[0,'        if (options.maxExtent) {'],[0,'            options.maxExtent = options.maxExtent.clone();'],[-1,'        }'],[-1,''],[0,'        OpenLayers.Layer.EventPane.prototype.initialize.apply(this,'],[-1,'            [name, options]);'],[0,'        OpenLayers.Layer.FixedZoomLevels.prototype.initialize.apply(this, '],[-1,'            [name, options]);'],[-1,''],[0,'        if (this.sphericalMercator) {'],[0,'            OpenLayers.Util.extend(this, OpenLayers.Layer.SphericalMercator);'],[0,'            this.initMercatorParameters();'],[-1,'        }    '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clone'],[-1,'     * Create a clone of this layer'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.Google&gt;} An exact clone of this layer'],[-1,'     *\/'],[-1,'    clone: function() {'],[-1,'        \/**'],[-1,'         * This method isn\'t intended to be called by a subclass and it'],[-1,'         * doesn\'t call the same method on the superclass.  We don\'t call'],[-1,'         * the super\'s clone because we don\'t want properties that are set'],[-1,'         * on this layer after initialize (i.e. this.mapObject etc.).'],[-1,'         *\/'],[0,'        return new OpenLayers.Layer.Google('],[-1,'            this.name, this.getOptions()'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setVisibility'],[-1,'     * Set the visibility flag for the layer and hide\/show &amp; redraw '],[-1,'     *     accordingly. Fire event unless otherwise specified'],[-1,'     * '],[-1,'     * Note that visibility is no longer simply whether or not the layer\'s'],[-1,'     *     style.display is set to \&quot;block\&quot;. Now we store a \'visibility\' state '],[-1,'     *     property on the layer class, this allows us to remember whether or '],[-1,'     *     not we *desire* for a layer to be visible. In the case where the '],[-1,'     *     map\'s resolution is out of the layer\'s range, this desire may be '],[-1,'     *     subverted.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * visible - {Boolean} Display the layer (if in range)'],[-1,'     *\/'],[-1,'    setVisibility: function(visible) {'],[-1,'        \/\/ sharing a map container, opacity has to be set per layer'],[0,'        var opacity = this.opacity == null ? 1 : this.opacity;'],[0,'        OpenLayers.Layer.EventPane.prototype.setVisibility.apply(this, arguments);'],[0,'        this.setOpacity(opacity);'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: display'],[-1,'     * Hide or show the Layer'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * visible - {Boolean}'],[-1,'     *\/'],[-1,'    display: function(visible) {'],[0,'        if (!this._dragging) {'],[0,'            this.setGMapVisibility(visible);'],[-1,'        }'],[0,'        OpenLayers.Layer.EventPane.prototype.display.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * zoomChanged - {Boolean} Tells when zoom has changed, as layers have to'],[-1,'     *     do some init work in that case.'],[-1,'     * dragging - {Boolean}'],[-1,'     *\/'],[-1,'    moveTo: function(bounds, zoomChanged, dragging) {'],[0,'        this._dragging = dragging;'],[0,'        OpenLayers.Layer.EventPane.prototype.moveTo.apply(this, arguments);'],[0,'        delete this._dragging;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setOpacity'],[-1,'     * Sets the opacity for the entire layer (all images)'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * opacity - {Float}'],[-1,'     *\/'],[-1,'    setOpacity: function(opacity) {'],[0,'        if (opacity !== this.opacity) {'],[0,'            if (this.map != null) {'],[0,'                this.map.events.triggerEvent(\&quot;changelayer\&quot;, {'],[-1,'                    layer: this,'],[-1,'                    property: \&quot;opacity\&quot;'],[-1,'                });'],[-1,'            }'],[0,'            this.opacity = opacity;'],[-1,'        }'],[-1,'        \/\/ Though this layer\'s opacity may not change, we\'re sharing a container'],[-1,'        \/\/ and need to update the opacity for the entire container.'],[0,'        if (this.getVisibility()) {'],[0,'            var container = this.getMapContainer();'],[0,'            OpenLayers.Util.modifyDOMElement('],[-1,'                container, null, null, null, null, null, null, opacity'],[-1,'            );'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Clean up this layer.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,'        \/**'],[-1,'         * We have to override this method because the event pane destroy'],[-1,'         * deletes the mapObject reference before removing this layer from'],[-1,'         * the map.'],[-1,'         *\/'],[0,'        if (this.map) {'],[0,'            this.setGMapVisibility(false);'],[0,'            var cache = OpenLayers.Layer.Google.cache[this.map.id];'],[0,'            if (cache &amp;&amp; cache.count &lt;= 1) {'],[0,'                this.removeGMapElements();'],[-1,'            }            '],[-1,'        }'],[0,'        OpenLayers.Layer.EventPane.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: removeGMapElements'],[-1,'     * Remove all elements added to the dom.  This should only be called if'],[-1,'     * this is the last of the Google layers for the given map.'],[-1,'     *\/'],[-1,'    removeGMapElements: function() {'],[0,'        var cache = OpenLayers.Layer.Google.cache[this.map.id];'],[0,'        if (cache) {'],[-1,'            \/\/ remove shared elements from dom'],[0,'            var container = this.mapObject &amp;&amp; this.getMapContainer();                '],[0,'            if (container &amp;&amp; container.parentNode) {'],[0,'                container.parentNode.removeChild(container);'],[-1,'            }'],[0,'            var termsOfUse = cache.termsOfUse;'],[0,'            if (termsOfUse &amp;&amp; termsOfUse.parentNode) {'],[0,'                termsOfUse.parentNode.removeChild(termsOfUse);'],[-1,'            }'],[0,'            var poweredBy = cache.poweredBy;'],[0,'            if (poweredBy &amp;&amp; poweredBy.parentNode) {'],[0,'                poweredBy.parentNode.removeChild(poweredBy);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: removeMap'],[-1,'     * On being removed from the map, also remove termsOfUse and poweredBy divs'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    removeMap: function(map) {'],[-1,'        \/\/ hide layer before removing'],[0,'        if (this.visibility &amp;&amp; this.mapObject) {'],[0,'            this.setGMapVisibility(false);'],[-1,'        }'],[-1,'        \/\/ check to see if last Google layer in this map'],[0,'        var cache = OpenLayers.Layer.Google.cache[map.id];'],[0,'        if (cache) {'],[0,'            if (cache.count &lt;= 1) {'],[0,'                this.removeGMapElements();'],[0,'                delete OpenLayers.Layer.Google.cache[map.id];'],[-1,'            } else {'],[-1,'                \/\/ decrement the layer count'],[0,'                --cache.count;'],[-1,'            }'],[-1,'        }'],[-1,'        \/\/ remove references to gmap elements'],[0,'        delete this.termsOfUse;'],[0,'        delete this.poweredBy;'],[0,'        delete this.mapObject;'],[0,'        delete this.dragObject;'],[0,'        OpenLayers.Layer.EventPane.prototype.removeMap.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'  \/\/'],[-1,'  \/\/ TRANSLATION: MapObject Bounds &lt;-&gt; OpenLayers.Bounds'],[-1,'  \/\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getOLBoundsFromMapObjectBounds'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * moBounds - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} An &lt;OpenLayers.Bounds&gt;, translated from the '],[-1,'     *                       passed-in MapObject Bounds.'],[-1,'     *                       Returns null if null value is passed in.'],[-1,'     *\/'],[-1,'    getOLBoundsFromMapObjectBounds: function(moBounds) {'],[0,'        var olBounds = null;'],[0,'        if (moBounds != null) {'],[0,'            var sw = moBounds.getSouthWest();'],[0,'            var ne = moBounds.getNorthEast();'],[0,'            if (this.sphericalMercator) {'],[0,'                sw = this.forwardMercator(sw.lng(), sw.lat());'],[0,'                ne = this.forwardMercator(ne.lng(), ne.lat());'],[-1,'            } else {'],[0,'                sw = new OpenLayers.LonLat(sw.lng(), sw.lat()); '],[0,'                ne = new OpenLayers.LonLat(ne.lng(), ne.lat()); '],[-1,'            }    '],[0,'            olBounds = new OpenLayers.Bounds(sw.lon, '],[-1,'                                             sw.lat, '],[-1,'                                             ne.lon, '],[-1,'                                             ne.lat );'],[-1,'        }'],[0,'        return olBounds;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: getWarningHTML'],[-1,'     * '],[-1,'     * Returns: '],[-1,'     * {String} String with information on why layer is broken, how to get'],[-1,'     *          it working.'],[-1,'     *\/'],[-1,'    getWarningHTML:function() {'],[0,'        return OpenLayers.i18n(\&quot;googleWarning\&quot;);'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/************************************'],[-1,'     *                                  *'],[-1,'     *   MapObject Interface Controls   *'],[-1,'     *                                  *'],[-1,'     ************************************\/'],[-1,''],[-1,''],[-1,'  \/\/ Get&amp;Set Center, Zoom'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getMapObjectCenter'],[-1,'     * '],[-1,'     * Returns: '],[-1,'     * {Object} The mapObject\'s current center in Map Object format'],[-1,'     *\/'],[-1,'    getMapObjectCenter: function() {'],[0,'        return this.mapObject.getCenter();'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: getMapObjectZoom'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer} The mapObject\'s current zoom, in Map Object format'],[-1,'     *\/'],[-1,'    getMapObjectZoom: function() {'],[0,'        return this.mapObject.getZoom();'],[-1,'    },'],[-1,''],[-1,'  '],[-1,'    \/************************************'],[-1,'     *                                  *'],[-1,'     *       MapObject Primitives       *'],[-1,'     *                                  *'],[-1,'     ************************************\/'],[-1,''],[-1,''],[-1,'  \/\/ LonLat'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getLongitudeFromMapObjectLonLat'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * moLonLat - {Object} MapObject LonLat format'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} Longitude of the given MapObject LonLat'],[-1,'     *\/'],[-1,'    getLongitudeFromMapObjectLonLat: function(moLonLat) {'],[0,'        return this.sphericalMercator ? '],[-1,'          this.forwardMercator(moLonLat.lng(), moLonLat.lat()).lon :'],[-1,'          moLonLat.lng();  '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getLatitudeFromMapObjectLonLat'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * moLonLat - {Object} MapObject LonLat format'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} Latitude of the given MapObject LonLat'],[-1,'     *\/'],[-1,'    getLatitudeFromMapObjectLonLat: function(moLonLat) {'],[0,'        var lat = this.sphericalMercator ? '],[-1,'          this.forwardMercator(moLonLat.lng(), moLonLat.lat()).lat :'],[-1,'          moLonLat.lat(); '],[0,'        return lat;  '],[-1,'    },'],[-1,'    '],[-1,'  \/\/ Pixel'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getXFromMapObjectPixel'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * moPixel - {Object} MapObject Pixel format'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer} X value of the MapObject Pixel'],[-1,'     *\/'],[-1,'    getXFromMapObjectPixel: function(moPixel) {'],[0,'        return moPixel.x;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getYFromMapObjectPixel'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * moPixel - {Object} MapObject Pixel format'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer} Y value of the MapObject Pixel'],[-1,'     *\/'],[-1,'    getYFromMapObjectPixel: function(moPixel) {'],[0,'        return moPixel.y;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.Google\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Property: OpenLayers.Layer.Google.cache'],[-1,' * {Object} Cache for elements that should only be created once per map.'],[-1,' *\/'],[1,'OpenLayers.Layer.Google.cache = {};'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Layer.Google.v2'],[-1,' * '],[-1,' * Mixin providing functionality specific to the Google Maps API v2.'],[-1,' * '],[-1,' * This API has been deprecated by Google.'],[-1,' * Developers are encouraged to migrate to v3 of the API; support for this'],[-1,' * is provided by &lt;OpenLayers.Layer.Google.v3&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.Google.v2 = {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: termsOfUse'],[-1,'     * {DOMElement} Div for Google\'s copyright and terms of use link'],[-1,'     *\/'],[-1,'    termsOfUse: null, '],[-1,''],[-1,'    \/**'],[-1,'     * Property: poweredBy'],[-1,'     * {DOMElement} Div for Google\'s powered by logo and link'],[-1,'     *\/'],[-1,'    poweredBy: null, '],[-1,''],[-1,'    \/**'],[-1,'     * Property: dragObject'],[-1,'     * {GDraggableObject} Since 2.93, Google has exposed the ability to get'],[-1,'     *     the maps GDraggableObject. We can now use this for smooth panning'],[-1,'     *\/'],[-1,'    dragObject: null, '],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: loadMapObject'],[-1,'     * Load the GMap and register appropriate event listeners. If we can\'t '],[-1,'     *     load GMap2, then display a warning message.'],[-1,'     *\/'],[-1,'    loadMapObject:function() {'],[0,'        if (!this.type) {'],[0,'            this.type = G_NORMAL_MAP;'],[-1,'        }'],[0,'        var mapObject, termsOfUse, poweredBy;'],[0,'        var cache = OpenLayers.Layer.Google.cache[this.map.id];'],[0,'        if (cache) {'],[-1,'            \/\/ there are already Google layers added to this map'],[0,'            mapObject = cache.mapObject;'],[0,'            termsOfUse = cache.termsOfUse;'],[0,'            poweredBy = cache.poweredBy;'],[-1,'            \/\/ increment the layer count'],[0,'            ++cache.count;'],[-1,'        } else {'],[-1,'            \/\/ this is the first Google layer for this map'],[-1,''],[0,'            var container = this.map.viewPortDiv;'],[0,'            var div = document.createElement(\&quot;div\&quot;);'],[0,'            div.id = this.map.id + \&quot;_GMap2Container\&quot;;'],[0,'            div.style.position = \&quot;absolute\&quot;;'],[0,'            div.style.width = \&quot;100%\&quot;;'],[0,'            div.style.height = \&quot;100%\&quot;;'],[0,'            container.appendChild(div);'],[-1,''],[-1,'            \/\/ create GMap and shuffle elements'],[0,'            try {'],[0,'                mapObject = new GMap2(div);'],[-1,'                '],[-1,'                \/\/ move the ToS and branding stuff up to the container div'],[0,'                termsOfUse = div.lastChild;'],[0,'                container.appendChild(termsOfUse);'],[0,'                termsOfUse.style.zIndex = \&quot;1100\&quot;;'],[0,'                termsOfUse.style.right = \&quot;\&quot;;'],[0,'                termsOfUse.style.bottom = \&quot;\&quot;;'],[0,'                termsOfUse.className = \&quot;olLayerGoogleCopyright\&quot;;'],[-1,''],[0,'                poweredBy = div.lastChild;'],[0,'                container.appendChild(poweredBy);'],[0,'                poweredBy.style.zIndex = \&quot;1100\&quot;;'],[0,'                poweredBy.style.right = \&quot;\&quot;;'],[0,'                poweredBy.style.bottom = \&quot;\&quot;;'],[0,'                poweredBy.className = \&quot;olLayerGooglePoweredBy gmnoprint\&quot;;'],[-1,'                '],[-1,'            } catch (e) {'],[0,'                throw(e);'],[-1,'            }'],[-1,'            \/\/ cache elements for use by any other google layers added to'],[-1,'            \/\/ this same map'],[0,'            OpenLayers.Layer.Google.cache[this.map.id] = {'],[-1,'                mapObject: mapObject,'],[-1,'                termsOfUse: termsOfUse,'],[-1,'                poweredBy: poweredBy,'],[-1,'                count: 1'],[-1,'            };'],[-1,'        }'],[-1,''],[0,'        this.mapObject = mapObject;'],[0,'        this.termsOfUse = termsOfUse;'],[0,'        this.poweredBy = poweredBy;'],[-1,'        '],[-1,'        \/\/ ensure this layer type is one of the mapObject types'],[0,'        if (OpenLayers.Util.indexOf(this.mapObject.getMapTypes(),'],[-1,'                                    this.type) === -1) {'],[0,'            this.mapObject.addMapType(this.type);'],[-1,'        }'],[-1,''],[-1,'        \/\/since v 2.93 getDragObject is now available.'],[0,'        if(typeof mapObject.getDragObject == \&quot;function\&quot;) {'],[0,'            this.dragObject = mapObject.getDragObject();'],[-1,'        } else {'],[0,'            this.dragPanMapObject = null;'],[-1,'        }'],[-1,'        '],[0,'        if(this.isBaseLayer === false) {'],[0,'            this.setGMapVisibility(this.div.style.display !== \&quot;none\&quot;);'],[-1,'        }'],[-1,''],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: onMapResize'],[-1,'     *\/'],[-1,'    onMapResize: function() {'],[-1,'        \/\/ workaround for resizing of invisible or not yet fully loaded layers'],[-1,'        \/\/ where GMap2.checkResize() does not work. We need to load the GMap'],[-1,'        \/\/ for the old div size, then checkResize(), and then call'],[-1,'        \/\/ layer.moveTo() to trigger GMap.setCenter() (which will finish'],[-1,'        \/\/ the GMap initialization).'],[0,'        if(this.visibility &amp;&amp; this.mapObject.isLoaded()) {'],[0,'            this.mapObject.checkResize();'],[-1,'        } else {'],[0,'            if(!this._resized) {'],[0,'                var layer = this;'],[0,'                var handle = GEvent.addListener(this.mapObject, \&quot;load\&quot;, function() {'],[0,'                    GEvent.removeListener(handle);'],[0,'                    delete layer._resized;'],[0,'                    layer.mapObject.checkResize();'],[0,'                    layer.moveTo(layer.map.getCenter(), layer.map.getZoom());'],[-1,'                });'],[-1,'            }'],[0,'            this._resized = true;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setGMapVisibility'],[-1,'     * Display the GMap container and associated elements.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * visible - {Boolean} Display the GMap elements.'],[-1,'     *\/'],[-1,'    setGMapVisibility: function(visible) {'],[0,'        var cache = OpenLayers.Layer.Google.cache[this.map.id];'],[0,'        if (cache) {'],[0,'            var container = this.mapObject.getContainer();'],[0,'            if (visible === true) {'],[0,'                this.mapObject.setMapType(this.type);'],[0,'                container.style.display = \&quot;\&quot;;'],[0,'                this.termsOfUse.style.left = \&quot;\&quot;;'],[0,'                this.termsOfUse.style.display = \&quot;\&quot;;'],[0,'                this.poweredBy.style.display = \&quot;\&quot;;            '],[0,'                cache.displayed = this.id;'],[-1,'            } else {'],[0,'                if (cache.displayed === this.id) {'],[0,'                    delete cache.displayed;'],[-1,'                }'],[0,'                if (!cache.displayed) {'],[0,'                    container.style.display = \&quot;none\&quot;;'],[0,'                    this.termsOfUse.style.display = \&quot;none\&quot;;'],[-1,'                    \/\/ move ToU far to the left in addition to setting display'],[-1,'                    \/\/ to \&quot;none\&quot;, because at the end of the GMap2 load'],[-1,'                    \/\/ sequence, display: none will be unset and ToU would be'],[-1,'                    \/\/ visible after loading a map with a google layer that is'],[-1,'                    \/\/ initially hidden. '],[0,'                    this.termsOfUse.style.left = \&quot;-9999px\&quot;;'],[0,'                    this.poweredBy.style.display = \&quot;none\&quot;;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getMapContainer'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} the GMap container\'s div'],[-1,'     *\/'],[-1,'    getMapContainer: function() {'],[0,'        return this.mapObject.getContainer();'],[-1,'    },'],[-1,''],[-1,'  \/\/'],[-1,'  \/\/ TRANSLATION: MapObject Bounds &lt;-&gt; OpenLayers.Bounds'],[-1,'  \/\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getMapObjectBoundsFromOLBounds'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * olBounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} A MapObject Bounds, translated from olBounds'],[-1,'     *          Returns null if null value is passed in'],[-1,'     *\/'],[-1,'    getMapObjectBoundsFromOLBounds: function(olBounds) {'],[0,'        var moBounds = null;'],[0,'        if (olBounds != null) {'],[0,'            var sw = this.sphericalMercator ? '],[-1,'              this.inverseMercator(olBounds.bottom, olBounds.left) : '],[-1,'              new OpenLayers.LonLat(olBounds.bottom, olBounds.left);'],[0,'            var ne = this.sphericalMercator ? '],[-1,'              this.inverseMercator(olBounds.top, olBounds.right) : '],[-1,'              new OpenLayers.LonLat(olBounds.top, olBounds.right);'],[0,'            moBounds = new GLatLngBounds(new GLatLng(sw.lat, sw.lon),'],[-1,'                                         new GLatLng(ne.lat, ne.lon));'],[-1,'        }'],[0,'        return moBounds;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/************************************'],[-1,'     *                                  *'],[-1,'     *   MapObject Interface Controls   *'],[-1,'     *                                  *'],[-1,'     ************************************\/'],[-1,''],[-1,''],[-1,'  \/\/ Get&amp;Set Center, Zoom'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: setMapObjectCenter'],[-1,'     * Set the mapObject to the specified center and zoom'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * center - {Object} MapObject LonLat format'],[-1,'     * zoom - {int} MapObject zoom format'],[-1,'     *\/'],[-1,'    setMapObjectCenter: function(center, zoom) {'],[0,'        this.mapObject.setCenter(center, zoom); '],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * APIMethod: dragPanMapObject'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * dX - {Integer}'],[-1,'     * dY - {Integer}'],[-1,'     *\/'],[-1,'    dragPanMapObject: function(dX, dY) {'],[0,'        this.dragObject.moveBy(new GSize(-dX, dY));'],[-1,'    },'],[-1,''],[-1,''],[-1,'  \/\/ LonLat - Pixel Translation'],[-1,'  '],[-1,'    \/**'],[-1,'     * APIMethod: getMapObjectLonLatFromMapObjectPixel'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * moPixel - {Object} MapObject Pixel format'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} MapObject LonLat translated from MapObject Pixel'],[-1,'     *\/'],[-1,'    getMapObjectLonLatFromMapObjectPixel: function(moPixel) {'],[0,'        return this.mapObject.fromContainerPixelToLatLng(moPixel);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getMapObjectPixelFromMapObjectLonLat'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * moLonLat - {Object} MapObject LonLat format'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} MapObject Pixel transtlated from MapObject LonLat'],[-1,'     *\/'],[-1,'    getMapObjectPixelFromMapObjectLonLat: function(moLonLat) {'],[0,'        return this.mapObject.fromLatLngToContainerPixel(moLonLat);'],[-1,'    },'],[-1,''],[-1,'  '],[-1,'  \/\/ Bounds'],[-1,'  '],[-1,'    \/** '],[-1,'     * APIMethod: getMapObjectZoomFromMapObjectBounds'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * moBounds - {Object} MapObject Bounds format'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} MapObject Zoom for specified MapObject Bounds'],[-1,'     *\/'],[-1,'    getMapObjectZoomFromMapObjectBounds: function(moBounds) {'],[0,'        return this.mapObject.getBoundsZoomLevel(moBounds);'],[-1,'    },'],[-1,''],[-1,'    \/************************************'],[-1,'     *                                  *'],[-1,'     *       MapObject Primitives       *'],[-1,'     *                                  *'],[-1,'     ************************************\/'],[-1,''],[-1,''],[-1,'  \/\/ LonLat'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getMapObjectLonLatFromLonLat'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * lon - {Float}'],[-1,'     * lat - {Float}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} MapObject LonLat built from lon and lat params'],[-1,'     *\/'],[-1,'    getMapObjectLonLatFromLonLat: function(lon, lat) {'],[0,'        var gLatLng;'],[0,'        if(this.sphericalMercator) {'],[0,'            var lonlat = this.inverseMercator(lon, lat);'],[0,'            gLatLng = new GLatLng(lonlat.lat, lonlat.lon);'],[-1,'        } else {'],[0,'            gLatLng = new GLatLng(lat, lon);'],[-1,'        }'],[0,'        return gLatLng;'],[-1,'    },'],[-1,''],[-1,'  \/\/ Pixel'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getMapObjectPixelFromXY'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * x - {Integer}'],[-1,'     * y - {Integer}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} MapObject Pixel from x and y parameters'],[-1,'     *\/'],[-1,'    getMapObjectPixelFromXY: function(x, y) {'],[0,'        return new GPoint(x, y);'],[-1,'    }'],[-1,'    '],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WFST.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Function: OpenLayers.Format.WFST'],[-1,' * Used to create a versioned WFS protocol.  Default version is 1.0.0.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.Format&gt;} A WFST format of the given version.'],[-1,' *\/'],[1,'OpenLayers.Format.WFST = function(options) {'],[0,'    options = OpenLayers.Util.applyDefaults('],[-1,'        options, OpenLayers.Format.WFST.DEFAULTS'],[-1,'    );'],[0,'    var cls = OpenLayers.Format.WFST[\&quot;v\&quot;+options.version.replace(\/\\.\/g, \&quot;_\&quot;)];'],[0,'    if(!cls) {'],[0,'        throw \&quot;Unsupported WFST version: \&quot; + options.version;'],[-1,'    }'],[0,'    return new cls(options);'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Format.WFST.DEFAULTS'],[-1,' * {Object} Default properties for the WFST format.'],[-1,' *\/'],[1,'OpenLayers.Format.WFST.DEFAULTS = {'],[-1,'    \&quot;version\&quot;: \&quot;1.0.0\&quot;'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WFST\/v1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/WFST.js'],[-1,' * @requires OpenLayers\/Filter\/Spatial.js'],[-1,' * @requires OpenLayers\/Filter\/FeatureId.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WFST.v1'],[-1,' * Superclass for WFST parsers.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WFST.v1 = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;,'],[-1,'        wfs: \&quot;http:\/\/www.opengis.net\/wfs\&quot;,'],[-1,'        gml: \&quot;http:\/\/www.opengis.net\/gml\&quot;,'],[-1,'        ogc: \&quot;http:\/\/www.opengis.net\/ogc\&quot;,'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\&quot;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;wfs\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} WFS version number.'],[-1,'     *\/'],[-1,'    version: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location for a particular minor version.'],[-1,'     *\/'],[-1,'    schemaLocations: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: srsName'],[-1,'     * {String} URI for spatial reference system.'],[-1,'     *\/'],[-1,'    srsName: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: extractAttributes'],[-1,'     * {Boolean} Extract attributes from GML.  Default is true.'],[-1,'     *\/'],[-1,'    extractAttributes: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: xy'],[-1,'     * {Boolean} Order of the GML coordinate true:(x,y) or false:(y,x)'],[-1,'     * Changing is not recommended, a new Format should be instantiated.'],[-1,'     *\/ '],[-1,'    xy: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: stateName'],[-1,'     * {Object} Maps feature states to node names.'],[-1,'     *\/'],[-1,'    stateName: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WFST.v1'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.WFST.v1_0_0&gt; or &lt;OpenLayers.Format.WFST.v1_1_0&gt;'],[-1,'     *     constructor instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[-1,'        \/\/ set state name mapping'],[0,'        this.stateName = {};'],[0,'        this.stateName[OpenLayers.State.INSERT] = \&quot;wfs:Insert\&quot;;'],[0,'        this.stateName[OpenLayers.State.UPDATE] = \&quot;wfs:Update\&quot;;'],[0,'        this.stateName[OpenLayers.State.DELETE] = \&quot;wfs:Delete\&quot;;'],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getSrsName'],[-1,'     *\/'],[-1,'    getSrsName: function(feature, options) {'],[0,'        var srsName = options &amp;&amp; options.srsName;'],[0,'        if(!srsName) {'],[0,'            if(feature &amp;&amp; feature.layer) {'],[0,'                srsName = feature.layer.projection.getCode();'],[-1,'            } else {'],[0,'                srsName = this.srsName;'],[-1,'            }'],[-1,'        }'],[0,'        return srsName;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Parse the response from a transaction.  Because WFS is split into'],[-1,'     *     Transaction requests (create, update, and delete) and GetFeature'],[-1,'     *     requests (read), this method handles parsing of both types of'],[-1,'     *     responses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {String | Document} The WFST document to read'],[-1,'     * options - {Object} Options for the reader'],[-1,'     *'],[-1,'     * Valid options properties:'],[-1,'     * output - {String} either \&quot;features\&quot; or \&quot;object\&quot;. The default is'],[-1,'     *     \&quot;features\&quot;, which means that the method will return an array of'],[-1,'     *     features. If set to \&quot;object\&quot;, an object with a \&quot;features\&quot; property'],[-1,'     *     and other properties read by the parser will be returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array | Object} Output depending on the output option.'],[-1,'     *\/'],[-1,'    read: function(data, options) {'],[0,'        options = options || {};'],[0,'        OpenLayers.Util.applyDefaults(options, {'],[-1,'            output: \&quot;features\&quot;'],[-1,'        });'],[-1,'        '],[0,'        if(typeof data == \&quot;string\&quot;) { '],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var obj = {};'],[0,'        if(data) {'],[0,'            this.readNode(data, obj, true);'],[-1,'        }'],[0,'        if(obj.features &amp;&amp; options.output === \&quot;features\&quot;) {'],[0,'            obj = obj.features;'],[-1,'        }'],[0,'        return obj;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wfs\&quot;: {'],[-1,'            \&quot;FeatureCollection\&quot;: function(node, obj) {'],[0,'                obj.features = [];'],[0,'                this.readChildNodes(node, obj);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: write'],[-1,'     * Given an array of features, write a WFS transaction.  This assumes'],[-1,'     *     the features have a state property that determines the operation'],[-1,'     *     type - insert, update, or delete.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} A list of features. See'],[-1,'     *     below for a more detailed description of the influence of the'],[-1,'     *     feature\'s *modified* property.'],[-1,'     * options - {Object}'],[-1,'     *'],[-1,'     * feature.modified rules:'],[-1,'     * If a feature has a modified property set, the following checks will be'],[-1,'     * made before a feature\'s geometry or attribute is included in an Update'],[-1,'     * transaction:'],[-1,'     * - *modified* is not set at all: The geometry and all attributes will be'],[-1,'     *     included.'],[-1,'     * - *modified.geometry* is set (null or a geometry): The geometry will be'],[-1,'     *     included. If *modified.attributes* is not set, all attributes will'],[-1,'     *     be included.'],[-1,'     * - *modified.attributes* is set: Only the attributes set (i.e. to null or'],[-1,'     *     a value) in *modified.attributes* will be included. '],[-1,'     *     If *modified.geometry* is not set, the geometry will not be included.'],[-1,'     *'],[-1,'     * Valid options include:'],[-1,'     * - *multi* {Boolean} If set to true, geometries will be casted to'],[-1,'     *   Multi geometries before writing.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A serialized WFS transaction.'],[-1,'     *\/'],[-1,'    write: function(features, options) {'],[0,'        var node = this.writeNode(\&quot;wfs:Transaction\&quot;, {'],[-1,'            features:features,'],[-1,'            options: options'],[-1,'        });'],[0,'        var value = this.schemaLocationAttr();'],[0,'        if(value) {'],[0,'            this.setAttributeNS('],[-1,'                node, this.namespaces[\&quot;xsi\&quot;], \&quot;xsi:schemaLocation\&quot;,  value'],[-1,'            );'],[-1,'        }'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [node]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;wfs\&quot;: {'],[-1,'            \&quot;GetFeature\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;wfs:GetFeature\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        service: \&quot;WFS\&quot;,'],[-1,'                        version: this.version,'],[-1,'                        handle: options &amp;&amp; options.handle,'],[-1,'                        outputFormat: options &amp;&amp; options.outputFormat,'],[-1,'                        maxFeatures: options &amp;&amp; options.maxFeatures,'],[-1,'                        \&quot;xsi:schemaLocation\&quot;: this.schemaLocationAttr(options)'],[-1,'                    }'],[-1,'                });'],[0,'                if (typeof this.featureType == \&quot;string\&quot;) {'],[0,'                    this.writeNode(\&quot;Query\&quot;, options, node);'],[-1,'                } else {'],[0,'                    for (var i=0,len = this.featureType.length; i&lt;len; i++) { '],[0,'                        options.featureType = this.featureType[i]; '],[0,'                        this.writeNode(\&quot;Query\&quot;, options, node); '],[-1,'                    } '],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Transaction\&quot;: function(obj) {'],[0,'                obj = obj || {};'],[0,'                var options = obj.options || {};'],[0,'                var node = this.createElementNSPlus(\&quot;wfs:Transaction\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        service: \&quot;WFS\&quot;,'],[-1,'                        version: this.version,'],[-1,'                        handle: options.handle'],[-1,'                    }'],[-1,'                });'],[0,'                var i, len;'],[0,'                var features = obj.features;'],[0,'                if(features) {'],[-1,'                    \/\/ temporarily re-assigning geometry types'],[0,'                    if (options.multi === true) {'],[0,'                        OpenLayers.Util.extend(this.geometryTypes, {'],[-1,'                            \&quot;OpenLayers.Geometry.Point\&quot;: \&quot;MultiPoint\&quot;,'],[-1,'                            \&quot;OpenLayers.Geometry.LineString\&quot;: (this.multiCurve === true) ? \&quot;MultiCurve\&quot;: \&quot;MultiLineString\&quot;,'],[-1,'                            \&quot;OpenLayers.Geometry.Polygon\&quot;: (this.multiSurface === true) ? \&quot;MultiSurface\&quot; : \&quot;MultiPolygon\&quot;'],[-1,'                        });'],[-1,'                    }'],[0,'                    var name, feature;'],[0,'                    for(i=0, len=features.length; i&lt;len; ++i) {'],[0,'                        feature = features[i];'],[0,'                        name = this.stateName[feature.state];'],[0,'                        if(name) {'],[0,'                            this.writeNode(name, {'],[-1,'                                feature: feature, '],[-1,'                                options: options'],[-1,'                            }, node);'],[-1,'                        }'],[-1,'                    }'],[-1,'                    \/\/ switch back to original geometry types assignment'],[0,'                    if (options.multi === true) {'],[0,'                        this.setGeometryTypes();'],[-1,'                    }'],[-1,'                }'],[0,'                if (options.nativeElements) {'],[0,'                    for (i=0, len=options.nativeElements.length; i&lt;len; ++i) {'],[0,'                        this.writeNode(\&quot;wfs:Native\&quot;, '],[-1,'                            options.nativeElements[i], node);'],[-1,'                    }'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Native\&quot;: function(nativeElement) {'],[0,'                var node = this.createElementNSPlus(\&quot;wfs:Native\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        vendorId: nativeElement.vendorId,'],[-1,'                        safeToIgnore: nativeElement.safeToIgnore'],[-1,'                    },'],[-1,'                    value: nativeElement.value'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Insert\&quot;: function(obj) {'],[0,'                var feature = obj.feature;'],[0,'                var options = obj.options;'],[0,'                var node = this.createElementNSPlus(\&quot;wfs:Insert\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        handle: options &amp;&amp; options.handle'],[-1,'                    }'],[-1,'                });'],[0,'                this.srsName = this.getSrsName(feature);'],[0,'                this.writeNode(\&quot;feature:_typeName\&quot;, feature, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Update\&quot;: function(obj) {'],[0,'                var feature = obj.feature;'],[0,'                var options = obj.options;'],[0,'                var node = this.createElementNSPlus(\&quot;wfs:Update\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        handle: options &amp;&amp; options.handle,'],[-1,'                        typeName: (this.featureNS ? this.featurePrefix + \&quot;:\&quot; : \&quot;\&quot;) +'],[-1,'                            this.featureType'],[-1,'                    }'],[-1,'                });'],[0,'                if(this.featureNS) {'],[0,'                    node.setAttribute(\&quot;xmlns:\&quot; + this.featurePrefix, this.featureNS);'],[-1,'                }'],[-1,'                '],[-1,'                \/\/ add in geometry'],[0,'                var modified = feature.modified;'],[0,'                if (this.geometryName !== null &amp;&amp; (!modified || modified.geometry !== undefined)) {'],[0,'                    this.srsName = this.getSrsName(feature);'],[0,'                    this.writeNode('],[-1,'                        \&quot;Property\&quot;, {name: this.geometryName, value: feature.geometry}, node'],[-1,'                    );'],[-1,'                }'],[-1,'        '],[-1,'                \/\/ add in attributes'],[0,'                for(var key in feature.attributes) {'],[0,'                    if(feature.attributes[key] !== undefined &amp;&amp;'],[-1,'                                (!modified || !modified.attributes ||'],[-1,'                                (modified.attributes &amp;&amp; modified.attributes[key] !== undefined))) {'],[0,'                        this.writeNode('],[-1,'                            \&quot;Property\&quot;, {name: key, value: feature.attributes[key]}, node'],[-1,'                        );'],[-1,'                    }'],[-1,'                }'],[-1,'                '],[-1,'                \/\/ add feature id filter'],[0,'                this.writeNode(\&quot;ogc:Filter\&quot;, new OpenLayers.Filter.FeatureId({'],[-1,'                    fids: [feature.fid]'],[-1,'                }), node);'],[-1,'        '],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Property\&quot;: function(obj) {'],[0,'                var node = this.createElementNSPlus(\&quot;wfs:Property\&quot;);'],[0,'                this.writeNode(\&quot;Name\&quot;, obj.name, node);'],[0,'                if(obj.value !== null) {'],[0,'                    this.writeNode(\&quot;Value\&quot;, obj.value, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Name\&quot;: function(name) {'],[0,'                return this.createElementNSPlus(\&quot;wfs:Name\&quot;, {value: name});'],[-1,'            },'],[-1,'            \&quot;Value\&quot;: function(obj) {'],[0,'                var node;'],[0,'                if(obj instanceof OpenLayers.Geometry) {'],[0,'                    node = this.createElementNSPlus(\&quot;wfs:Value\&quot;);'],[0,'                    var geom = this.writeNode(\&quot;feature:_geometry\&quot;, obj).firstChild;'],[0,'                    node.appendChild(geom);'],[-1,'                } else {'],[0,'                    node = this.createElementNSPlus(\&quot;wfs:Value\&quot;, {value: obj});                '],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Delete\&quot;: function(obj) {'],[0,'                var feature = obj.feature;'],[0,'                var options = obj.options;'],[0,'                var node = this.createElementNSPlus(\&quot;wfs:Delete\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        handle: options &amp;&amp; options.handle,'],[-1,'                        typeName: (this.featureNS ? this.featurePrefix + \&quot;:\&quot; : \&quot;\&quot;) +'],[-1,'                            this.featureType'],[-1,'                    }'],[-1,'                });'],[0,'                if(this.featureNS) {'],[0,'                    node.setAttribute(\&quot;xmlns:\&quot; + this.featurePrefix, this.featureNS);'],[-1,'                }'],[0,'                this.writeNode(\&quot;ogc:Filter\&quot;, new OpenLayers.Filter.FeatureId({'],[-1,'                    fids: [feature.fid]'],[-1,'                }), node);'],[0,'                return node;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: schemaLocationAttr'],[-1,'     * Generate the xsi:schemaLocation attribute value.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The xsi:schemaLocation attribute or undefined if none.'],[-1,'     *\/'],[-1,'    schemaLocationAttr: function(options) {'],[0,'        options = OpenLayers.Util.extend({'],[-1,'            featurePrefix: this.featurePrefix,'],[-1,'            schema: this.schema'],[-1,'        }, options);'],[0,'        var schemaLocations = OpenLayers.Util.extend({}, this.schemaLocations);'],[0,'        if(options.schema) {'],[0,'            schemaLocations[options.featurePrefix] = options.schema;'],[-1,'        }'],[0,'        var parts = [];'],[0,'        var uri;'],[0,'        for(var key in schemaLocations) {'],[0,'            uri = this.namespaces[key];'],[0,'            if(uri) {'],[0,'                parts.push(uri + \&quot; \&quot; + schemaLocations[key]);'],[-1,'            }'],[-1,'        }'],[0,'        var value = parts.join(\&quot; \&quot;) || undefined;'],[0,'        return value;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setFilterProperty'],[-1,'     * Set the property of each spatial filter.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * filter - {&lt;OpenLayers.Filter&gt;}'],[-1,'     *\/'],[-1,'    setFilterProperty: function(filter) {'],[0,'        if(filter.filters) {'],[0,'            for(var i=0, len=filter.filters.length; i&lt;len; ++i) {'],[0,'                OpenLayers.Format.WFST.v1.prototype.setFilterProperty.call(this, filter.filters[i]);'],[-1,'            }'],[-1,'        } else {'],[0,'            if(filter instanceof OpenLayers.Filter.Spatial &amp;&amp; !filter.property) {'],[-1,'                \/\/ got a spatial filter without property, so set it'],[0,'                filter.property = this.geometryName;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WFST.v1\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/GML\/v3.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/GML\/Base.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.GML.v3'],[-1,' * Parses GML version 3.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.GML.Base&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.GML.v3 = OpenLayers.Class(OpenLayers.Format.GML.Base, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location for a particular minor version.  The writers'],[-1,'     *     conform with the Simple Features Profile for GML.'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/gml http:\/\/schemas.opengis.net\/gml\/3.1.1\/profiles\/gmlsfProfile\/1.0.0\/gmlsf.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: curve'],[-1,'     * {Boolean} Write gml:Curve instead of gml:LineString elements.  This also'],[-1,'     *     affects the elements in multi-part geometries.  Default is false.'],[-1,'     *     To write gml:Curve elements instead of gml:LineString, set curve'],[-1,'     *     to true in the options to the contstructor (cannot be changed after'],[-1,'     *     instantiation).'],[-1,'     *\/'],[-1,'    curve: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: multiCurve'],[-1,'     * {Boolean} Write gml:MultiCurve instead of gml:MultiLineString.  Since'],[-1,'     *     the latter is deprecated in GML 3, the default is true.  To write'],[-1,'     *     gml:MultiLineString instead of gml:MultiCurve, set multiCurve to'],[-1,'     *     false in the options to the constructor (cannot be changed after'],[-1,'     *     instantiation).'],[-1,'     *\/'],[-1,'    multiCurve: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: surface'],[-1,'     * {Boolean} Write gml:Surface instead of gml:Polygon elements.  This also'],[-1,'     *     affects the elements in multi-part geometries.  Default is false.'],[-1,'     *     To write gml:Surface elements instead of gml:Polygon, set surface'],[-1,'     *     to true in the options to the contstructor (cannot be changed after'],[-1,'     *     instantiation).'],[-1,'     *\/'],[-1,'    surface: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: multiSurface'],[-1,'     * {Boolean} Write gml:multiSurface instead of gml:MultiPolygon.  Since'],[-1,'     *     the latter is deprecated in GML 3, the default is true.  To write'],[-1,'     *     gml:MultiPolygon instead of gml:multiSurface, set multiSurface to'],[-1,'     *     false in the options to the constructor (cannot be changed after'],[-1,'     *     instantiation).'],[-1,'     *\/'],[-1,'    multiSurface: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.GML.v3'],[-1,'     * Create a parser for GML v3.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *'],[-1,'     * Valid options properties:'],[-1,'     * featureType - {String} Local (without prefix) feature typeName (required).'],[-1,'     * featureNS - {String} Feature namespace (required).'],[-1,'     * geometryName - {String} Geometry element name.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.GML.Base.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;gml\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;_inherit\&quot;: function(node, obj, container) {'],[-1,'                \/\/ SRSReferenceGroup attributes'],[0,'                var dim = parseInt(node.getAttribute(\&quot;srsDimension\&quot;), 10) ||'],[-1,'                    (container &amp;&amp; container.srsDimension);'],[0,'                if (dim) {'],[0,'                    obj.srsDimension = dim;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;featureMembers\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Curve\&quot;: function(node, container) {'],[0,'                var obj = {points: []};'],[0,'                this.readers.gml._inherit.apply(this, [node, obj, container]);'],[0,'                this.readChildNodes(node, obj);'],[0,'                if(!container.components) {'],[0,'                    container.components = [];'],[-1,'                }'],[0,'                container.components.push('],[-1,'                    new OpenLayers.Geometry.LineString(obj.points)'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;segments\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;LineStringSegment\&quot;: function(node, container) {'],[0,'                var obj = {};'],[0,'                this.readChildNodes(node, obj);'],[0,'                if(obj.points) {'],[0,'                    Array.prototype.push.apply(container.points, obj.points);'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;pos\&quot;: function(node, obj) {'],[0,'                var str = this.getChildValue(node).replace('],[-1,'                    this.regExes.trimSpace, \&quot;\&quot;'],[-1,'                );'],[0,'                var coords = str.split(this.regExes.splitSpace);'],[0,'                var point;'],[0,'                if(this.xy) {'],[0,'                    point = new OpenLayers.Geometry.Point('],[-1,'                        coords[0], coords[1], coords[2]'],[-1,'                    );'],[-1,'                } else {'],[0,'                    point = new OpenLayers.Geometry.Point('],[-1,'                        coords[1], coords[0], coords[2]'],[-1,'                    );'],[-1,'                }'],[0,'                obj.points = [point];'],[-1,'            },'],[-1,'            \&quot;posList\&quot;: function(node, obj) {'],[0,'                var str = this.getChildValue(node).replace('],[-1,'                    this.regExes.trimSpace, \&quot;\&quot;'],[-1,'                );'],[0,'                var coords = str.split(this.regExes.splitSpace);'],[-1,'                \/\/ The \&quot;dimension\&quot; attribute is from the GML 3.0.1 spec.'],[0,'                var dim = obj.srsDimension ||'],[-1,'                    parseInt(node.getAttribute(\&quot;srsDimension\&quot;) || node.getAttribute(\&quot;dimension\&quot;), 10) || 2;'],[0,'                var j, x, y, z;'],[0,'                var numPoints = coords.length \/ dim;'],[0,'                var points = new Array(numPoints);'],[0,'                for(var i=0, len=coords.length; i&lt;len; i += dim) {'],[0,'                    x = coords[i];'],[0,'                    y = coords[i+1];'],[0,'                    z = (dim == 2) ? undefined : coords[i+2];'],[0,'                    if (this.xy) {'],[0,'                        points[i\/dim] = new OpenLayers.Geometry.Point(x, y, z);'],[-1,'                    } else {'],[0,'                        points[i\/dim] = new OpenLayers.Geometry.Point(y, x, z);'],[-1,'                    }'],[-1,'                }'],[0,'                obj.points = points;'],[-1,'            },'],[-1,'            \&quot;Surface\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;patches\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;PolygonPatch\&quot;: function(node, obj) {'],[0,'                this.readers.gml.Polygon.apply(this, [node, obj]);'],[-1,'            },'],[-1,'            \&quot;exterior\&quot;: function(node, container) {'],[0,'                var obj = {};'],[0,'                this.readChildNodes(node, obj);'],[0,'                container.outer = obj.components[0];'],[-1,'            },'],[-1,'            \&quot;interior\&quot;: function(node, container) {'],[0,'                var obj = {};'],[0,'                this.readChildNodes(node, obj);'],[0,'                container.inner.push(obj.components[0]);'],[-1,'            },'],[-1,'            \&quot;MultiCurve\&quot;: function(node, container) {'],[0,'                var obj = {components: []};'],[0,'                this.readers.gml._inherit.apply(this, [node, obj, container]);'],[0,'                this.readChildNodes(node, obj);'],[0,'                if(obj.components.length &gt; 0) {'],[0,'                    container.components = ['],[-1,'                        new OpenLayers.Geometry.MultiLineString(obj.components)'],[-1,'                    ];'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;curveMember\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;MultiSurface\&quot;: function(node, container) {'],[0,'                var obj = {components: []};'],[0,'                this.readers.gml._inherit.apply(this, [node, obj, container]);'],[0,'                this.readChildNodes(node, obj);'],[0,'                if(obj.components.length &gt; 0) {'],[0,'                    container.components = ['],[-1,'                        new OpenLayers.Geometry.MultiPolygon(obj.components)'],[-1,'                    ];'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;surfaceMember\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;surfaceMembers\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;pointMembers\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;lineStringMembers\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;polygonMembers\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;geometryMembers\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Envelope\&quot;: function(node, container) {'],[0,'                var obj = {points: new Array(2)};'],[0,'                this.readChildNodes(node, obj);'],[0,'                if(!container.components) {'],[0,'                    container.components = [];'],[-1,'                }'],[0,'                var min = obj.points[0];'],[0,'                var max = obj.points[1];'],[0,'                container.components.push('],[-1,'                    new OpenLayers.Bounds(min.x, min.y, max.x, max.y)'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;lowerCorner\&quot;: function(node, container) {'],[0,'                var obj = {};'],[0,'                this.readers.gml.pos.apply(this, [node, obj]);'],[0,'                container.points[0] = obj.points[0];'],[-1,'            },'],[-1,'            \&quot;upperCorner\&quot;: function(node, container) {'],[0,'                var obj = {};'],[0,'                this.readers.gml.pos.apply(this, [node, obj]);'],[0,'                container.points[1] = obj.points[0];'],[-1,'            }'],[-1,'        }, OpenLayers.Format.GML.Base.prototype.readers[\&quot;gml\&quot;]),            '],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.Base.prototype.readers[\&quot;feature\&quot;],'],[-1,'        \&quot;wfs\&quot;: OpenLayers.Format.GML.Base.prototype.readers[\&quot;wfs\&quot;]'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: write'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;) | OpenLayers.Feature.Vector}'],[-1,'     *     An array of features or a single feature.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} Given an array of features, a doc with a gml:featureMembers'],[-1,'     *     element will be returned.  Given a single feature, a doc with a'],[-1,'     *     gml:featureMember element will be returned.'],[-1,'     *\/'],[-1,'    write: function(features) {'],[0,'        var name;'],[0,'        if(OpenLayers.Util.isArray(features)) {'],[0,'            name = \&quot;featureMembers\&quot;;'],[-1,'        } else {'],[0,'            name = \&quot;featureMember\&quot;;'],[-1,'        }'],[0,'        var root = this.writeNode(\&quot;gml:\&quot; + name, features);'],[0,'        this.setAttributeNS('],[-1,'            root, this.namespaces[\&quot;xsi\&quot;],'],[-1,'            \&quot;xsi:schemaLocation\&quot;, this.schemaLocation'],[-1,'        );'],[-1,''],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [root]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;gml\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;featureMembers\&quot;: function(features) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:featureMembers\&quot;);'],[0,'                for(var i=0, len=features.length; i&lt;len; ++i) {'],[0,'                    this.writeNode(\&quot;feature:_typeName\&quot;, features[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Point\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:Point\&quot;);'],[0,'                this.writeNode(\&quot;pos\&quot;, geometry, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;pos\&quot;: function(point) {'],[-1,'                \/\/ only 2d for simple features profile'],[0,'                var pos = (this.xy) ?'],[-1,'                    (point.x + \&quot; \&quot; + point.y) : (point.y + \&quot; \&quot; + point.x);'],[0,'                return this.createElementNSPlus(\&quot;gml:pos\&quot;, {'],[-1,'                    value: pos'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;LineString\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:LineString\&quot;);'],[0,'                this.writeNode(\&quot;posList\&quot;, geometry.components, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Curve\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:Curve\&quot;);'],[0,'                this.writeNode(\&quot;segments\&quot;, geometry, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;segments\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:segments\&quot;);'],[0,'                this.writeNode(\&quot;LineStringSegment\&quot;, geometry, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;LineStringSegment\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:LineStringSegment\&quot;);'],[0,'                this.writeNode(\&quot;posList\&quot;, geometry.components, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;posList\&quot;: function(points) {'],[-1,'                \/\/ only 2d for simple features profile'],[0,'                var len = points.length;'],[0,'                var parts = new Array(len);'],[0,'                var point;'],[0,'                for(var i=0; i&lt;len; ++i) {'],[0,'                    point = points[i];'],[0,'                    if(this.xy) {'],[0,'                        parts[i] = point.x + \&quot; \&quot; + point.y;'],[-1,'                    } else {'],[0,'                        parts[i] = point.y + \&quot; \&quot; + point.x;'],[-1,'                    }'],[-1,'                }'],[0,'                return this.createElementNSPlus(\&quot;gml:posList\&quot;, {'],[-1,'                    value: parts.join(\&quot; \&quot;)'],[-1,'                }); '],[-1,'            },'],[-1,'            \&quot;Surface\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:Surface\&quot;);'],[0,'                this.writeNode(\&quot;patches\&quot;, geometry, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;patches\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:patches\&quot;);'],[0,'                this.writeNode(\&quot;PolygonPatch\&quot;, geometry, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PolygonPatch\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:PolygonPatch\&quot;, {'],[-1,'                    attributes: {interpolation: \&quot;planar\&quot;}'],[-1,'                });'],[0,'                this.writeNode(\&quot;exterior\&quot;, geometry.components[0], node);'],[0,'                for(var i=1, len=geometry.components.length; i&lt;len; ++i) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;interior\&quot;, geometry.components[i], node'],[-1,'                    );'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Polygon\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:Polygon\&quot;);'],[0,'                this.writeNode(\&quot;exterior\&quot;, geometry.components[0], node);'],[0,'                for(var i=1, len=geometry.components.length; i&lt;len; ++i) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;interior\&quot;, geometry.components[i], node'],[-1,'                    );'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;exterior\&quot;: function(ring) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:exterior\&quot;);'],[0,'                this.writeNode(\&quot;LinearRing\&quot;, ring, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;interior\&quot;: function(ring) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:interior\&quot;);'],[0,'                this.writeNode(\&quot;LinearRing\&quot;, ring, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;LinearRing\&quot;: function(ring) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:LinearRing\&quot;);'],[0,'                this.writeNode(\&quot;posList\&quot;, ring.components, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;MultiCurve\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:MultiCurve\&quot;);'],[0,'                var components = geometry.components || [geometry];'],[0,'                for(var i=0, len=components.length; i&lt;len; ++i) {'],[0,'                    this.writeNode(\&quot;curveMember\&quot;, components[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;curveMember\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:curveMember\&quot;);'],[0,'                if(this.curve) {'],[0,'                    this.writeNode(\&quot;Curve\&quot;, geometry, node);'],[-1,'                } else {'],[0,'                    this.writeNode(\&quot;LineString\&quot;, geometry, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;MultiSurface\&quot;: function(geometry) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:MultiSurface\&quot;);'],[0,'                var components = geometry.components || [geometry];'],[0,'                for(var i=0, len=components.length; i&lt;len; ++i) {'],[0,'                    this.writeNode(\&quot;surfaceMember\&quot;, components[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;surfaceMember\&quot;: function(polygon) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:surfaceMember\&quot;);'],[0,'                if(this.surface) {'],[0,'                    this.writeNode(\&quot;Surface\&quot;, polygon, node);'],[-1,'                } else {'],[0,'                    this.writeNode(\&quot;Polygon\&quot;, polygon, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Envelope\&quot;: function(bounds) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:Envelope\&quot;);'],[0,'                this.writeNode(\&quot;lowerCorner\&quot;, bounds, node);'],[0,'                this.writeNode(\&quot;upperCorner\&quot;, bounds, node);'],[-1,'                \/\/ srsName attribute is required for gml:Envelope'],[0,'                if(this.srsName) {'],[0,'                    node.setAttribute(\&quot;srsName\&quot;, this.srsName);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;lowerCorner\&quot;: function(bounds) {'],[-1,'                \/\/ only 2d for simple features profile'],[0,'                var pos = (this.xy) ?'],[-1,'                    (bounds.left + \&quot; \&quot; + bounds.bottom) :'],[-1,'                    (bounds.bottom + \&quot; \&quot; + bounds.left);'],[0,'                return this.createElementNSPlus(\&quot;gml:lowerCorner\&quot;, {'],[-1,'                    value: pos'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;upperCorner\&quot;: function(bounds) {'],[-1,'                \/\/ only 2d for simple features profile'],[0,'                var pos = (this.xy) ?'],[-1,'                    (bounds.right + \&quot; \&quot; + bounds.top) :'],[-1,'                    (bounds.top + \&quot; \&quot; + bounds.right);'],[0,'                return this.createElementNSPlus(\&quot;gml:upperCorner\&quot;, {'],[-1,'                    value: pos'],[-1,'                });'],[-1,'            }'],[-1,'        }, OpenLayers.Format.GML.Base.prototype.writers[\&quot;gml\&quot;]),'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.Base.prototype.writers[\&quot;feature\&quot;],'],[-1,'        \&quot;wfs\&quot;: OpenLayers.Format.GML.Base.prototype.writers[\&quot;wfs\&quot;]'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setGeometryTypes'],[-1,'     * Sets the &lt;geometryTypes&gt; mapping.'],[-1,'     *\/'],[-1,'    setGeometryTypes: function() {'],[0,'        this.geometryTypes = {'],[-1,'            \&quot;OpenLayers.Geometry.Point\&quot;: \&quot;Point\&quot;,'],[-1,'            \&quot;OpenLayers.Geometry.MultiPoint\&quot;: \&quot;MultiPoint\&quot;,'],[-1,'            \&quot;OpenLayers.Geometry.LineString\&quot;: (this.curve === true) ? \&quot;Curve\&quot;: \&quot;LineString\&quot;,'],[-1,'            \&quot;OpenLayers.Geometry.MultiLineString\&quot;: (this.multiCurve === false) ? \&quot;MultiLineString\&quot; : \&quot;MultiCurve\&quot;,'],[-1,'            \&quot;OpenLayers.Geometry.Polygon\&quot;: (this.surface === true) ? \&quot;Surface\&quot; : \&quot;Polygon\&quot;,'],[-1,'            \&quot;OpenLayers.Geometry.MultiPolygon\&quot;: (this.multiSurface === false) ? \&quot;MultiPolygon\&quot; : \&quot;MultiSurface\&quot;,'],[-1,'            \&quot;OpenLayers.Geometry.Collection\&quot;: \&quot;GeometryCollection\&quot;'],[-1,'        };'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.GML.v3\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/Filter\/v1_1_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/Filter\/v1.js'],[-1,' * @requires OpenLayers\/Format\/GML\/v3.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.Filter.v1_1_0'],[-1,' * Write ogc:Filter version 1.1.0.'],[-1,' *'],[-1,' * Differences from the v1.0.0 parser:'],[-1,' *  - uses GML v3 instead of GML v2'],[-1,' *  - reads matchCase attribute on ogc:PropertyIsEqual and'],[-1,' *        ogc:PropertyIsNotEqual elements.'],[-1,' *  - writes matchCase attribute from comparison filters of type EQUAL_TO,'],[-1,' *        NOT_EQUAL_TO and LIKE.'],[-1,' * '],[-1,' * Inherits from: '],[-1,' *  - &lt;OpenLayers.Format.GML.v3&gt;'],[-1,' *  - &lt;OpenLayers.Format.Filter.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.Filter.v1_1_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.GML.v3, OpenLayers.Format.Filter.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: VERSION'],[-1,'     * {String} 1.1.0'],[-1,'     *\/'],[-1,'    VERSION: \&quot;1.1.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} http:\/\/www.opengis.net\/ogc\/filter\/1.1.0\/filter.xsd'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/ogc\/filter\/1.1.0\/filter.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.Filter.v1_1_0'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.Filter&gt; constructor instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.GML.v3.prototype.initialize.apply('],[-1,'            this, [options]'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;ogc\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;PropertyIsEqualTo\&quot;: function(node, obj) {'],[0,'                var matchCase = node.getAttribute(\&quot;matchCase\&quot;);'],[0,'                var filter = new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.EQUAL_TO,'],[-1,'                    matchCase: !(matchCase === \&quot;false\&quot; || matchCase === \&quot;0\&quot;)'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            },'],[-1,'            \&quot;PropertyIsNotEqualTo\&quot;: function(node, obj) {'],[0,'                var matchCase = node.getAttribute(\&quot;matchCase\&quot;);'],[0,'                var filter = new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.NOT_EQUAL_TO,'],[-1,'                    matchCase: !(matchCase === \&quot;false\&quot; || matchCase === \&quot;0\&quot;)'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                obj.filters.push(filter);'],[-1,'            },'],[-1,'            \&quot;PropertyIsLike\&quot;: function(node, obj) {'],[0,'                var filter = new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.LIKE'],[-1,'                });'],[0,'                this.readChildNodes(node, filter);'],[0,'                var wildCard = node.getAttribute(\&quot;wildCard\&quot;);'],[0,'                var singleChar = node.getAttribute(\&quot;singleChar\&quot;);'],[0,'                var esc = node.getAttribute(\&quot;escapeChar\&quot;);'],[0,'                filter.value2regex(wildCard, singleChar, esc);'],[0,'                obj.filters.push(filter);'],[-1,'            }'],[-1,'        }, OpenLayers.Format.Filter.v1.prototype.readers[\&quot;ogc\&quot;]),'],[-1,'        \&quot;gml\&quot;: OpenLayers.Format.GML.v3.prototype.readers[\&quot;gml\&quot;],'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.v3.prototype.readers[\&quot;feature\&quot;]        '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;ogc\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;PropertyIsEqualTo\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:PropertyIsEqualTo\&quot;, {'],[-1,'                    attributes: {matchCase: filter.matchCase}'],[-1,'                });'],[-1,'                \/\/ no ogc:expression handling for PropertyName for now'],[0,'                this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[-1,'                \/\/ handle Literals or Functions for now'],[0,'                this.writeOgcExpression(filter.value, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyIsNotEqualTo\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:PropertyIsNotEqualTo\&quot;, {'],[-1,'                    attributes: {matchCase: filter.matchCase}'],[-1,'                });'],[-1,'                \/\/ no ogc:expression handling for PropertyName for now'],[0,'                this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[-1,'                \/\/ handle Literals or Functions for now'],[0,'                this.writeOgcExpression(filter.value, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyIsLike\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:PropertyIsLike\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        matchCase: filter.matchCase,'],[-1,'                        wildCard: \&quot;*\&quot;, singleChar: \&quot;.\&quot;, escapeChar: \&quot;!\&quot;'],[-1,'                    }'],[-1,'                });'],[-1,'                \/\/ no ogc:expression handling for now'],[0,'                this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[-1,'                \/\/ convert regex string to ogc string'],[0,'                this.writeNode(\&quot;Literal\&quot;, filter.regex2value(), node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;BBOX\&quot;: function(filter) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:BBOX\&quot;);'],[-1,'                \/\/ PropertyName is optional in 1.1.0'],[0,'                filter.property &amp;&amp; this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[0,'                var box = this.writeNode(\&quot;gml:Envelope\&quot;, filter.value);'],[0,'                if(filter.projection) {'],[0,'                    box.setAttribute(\&quot;srsName\&quot;, filter.projection);'],[-1,'                }'],[0,'                node.appendChild(box); '],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;SortBy\&quot;: function(sortProperties) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:SortBy\&quot;);'],[0,'                for (var i=0,l=sortProperties.length;i&lt;l;i++) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;ogc:SortProperty\&quot;,'],[-1,'                        sortProperties[i],'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                return node;'],[-1,'            }, '],[-1,'            \&quot;SortProperty\&quot;: function(sortProperty) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:SortProperty\&quot;);'],[0,'                this.writeNode('],[-1,'                    \&quot;ogc:PropertyName\&quot;,'],[-1,'                    sortProperty,'],[-1,'                    node'],[-1,'                );'],[0,'                this.writeNode('],[-1,'                    \&quot;ogc:SortOrder\&quot;,'],[-1,'                    (sortProperty.order == \'DESC\') ? \'DESC\' : \'ASC\','],[-1,'                    node'],[-1,'                );'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;SortOrder\&quot;: function(value) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:SortOrder\&quot;, {'],[-1,'                    value: value'],[-1,'                });'],[0,'                return node;'],[-1,'            }'],[-1,'        }, OpenLayers.Format.Filter.v1.prototype.writers[\&quot;ogc\&quot;]),'],[-1,'        \&quot;gml\&quot;: OpenLayers.Format.GML.v3.prototype.writers[\&quot;gml\&quot;],'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.v3.prototype.writers[\&quot;feature\&quot;]'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: writeSpatial'],[-1,'     *'],[-1,'     * Read a {&lt;OpenLayers.Filter.Spatial&gt;} filter and converts it into XML.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * filter - {&lt;OpenLayers.Filter.Spatial&gt;} The filter.'],[-1,'     * name - {String} Name of the generated XML element.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The created XML element.'],[-1,'     *\/'],[-1,'    writeSpatial: function(filter, name) {'],[0,'        var node = this.createElementNSPlus(\&quot;ogc:\&quot;+name);'],[0,'        this.writeNode(\&quot;PropertyName\&quot;, filter, node);'],[0,'        if(filter.value instanceof OpenLayers.Filter.Function) {'],[0,'            this.writeNode(\&quot;Function\&quot;, filter.value, node);'],[-1,'        } else {'],[0,'        var child;'],[0,'        if(filter.value instanceof OpenLayers.Geometry) {'],[0,'            child = this.writeNode(\&quot;feature:_geometry\&quot;, filter.value).firstChild;'],[-1,'        } else {'],[0,'            child = this.writeNode(\&quot;gml:Envelope\&quot;, filter.value);'],[-1,'        }'],[0,'        if(filter.projection) {'],[0,'            child.setAttribute(\&quot;srsName\&quot;, filter.projection);'],[-1,'        }'],[0,'        node.appendChild(child);'],[-1,'        }'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.Filter.v1_1_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WFST\/v1_1_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WFST\/v1.js'],[-1,' * @requires OpenLayers\/Format\/Filter\/v1_1_0.js'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1_0_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WFST.v1_1_0'],[-1,' * A format for creating WFS v1.1.0 transactions.  Create a new instance with the'],[-1,' *     &lt;OpenLayers.Format.WFST.v1_1_0&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.Filter.v1_1_0&gt;'],[-1,' *  - &lt;OpenLayers.Format.WFST.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WFST.v1_1_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.Filter.v1_1_0, OpenLayers.Format.WFST.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} WFS version number.'],[-1,'     *\/'],[-1,'    version: \&quot;1.1.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schemaLocations'],[-1,'     * {Object} Properties are namespace aliases, values are schema locations.'],[-1,'     *\/'],[-1,'    schemaLocations: {'],[-1,'        \&quot;wfs\&quot;: \&quot;http:\/\/schemas.opengis.net\/wfs\/1.1.0\/wfs.xsd\&quot;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WFST.v1_1_0'],[-1,'     * A class for parsing and generating WFS v1.1.0 transactions.'],[-1,'     *'],[-1,'     * To read additional information like hit count (numberOfFeatures) from'],[-1,'     * the  FeatureCollection, call the &lt;OpenLayers.Format.WFST.v1.read&gt; method'],[-1,'     * with {output: \&quot;object\&quot;} as 2nd argument. Note that it is possible to'],[-1,'     * just request the hit count from a WFS 1.1.0 server with the'],[-1,'     * resultType=\&quot;hits\&quot; request parameter.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *'],[-1,'     * Valid options properties:'],[-1,'     * featureType - {String} Local (without prefix) feature typeName (required).'],[-1,'     * featureNS - {String} Feature namespace (optional).'],[-1,'     * featurePrefix - {String} Feature namespace alias (optional - only used'],[-1,'     *     if featureNS is provided).  Default is \'feature\'.'],[-1,'     * geometryName - {String} Name of geometry attribute.  Default is \'the_geom\'.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.Filter.v1_1_0.prototype.initialize.apply(this, [options]);'],[0,'        OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: readNode'],[-1,'     * Shorthand for applying one of the named readers given the node'],[-1,'     *     namespace and local name.  Readers take two args (node, obj) and'],[-1,'     *     generally extend or modify the second.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The node to be read (required).'],[-1,'     * obj - {Object} The object to be modified (optional).'],[-1,'     * first - {Boolean} Should be set to true for the first node read. This'],[-1,'     *     is usually the readNode call in the read method. Without this being'],[-1,'     *     set, auto-configured properties will stick on subsequent reads.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} The input object, modified (or a new one if none was provided).'],[-1,'     *\/'],[-1,'    readNode: function(node, obj, first) {'],[-1,'        \/\/ Not the superclass, only the mixin classes inherit from'],[-1,'        \/\/ Format.GML.v3. We need this because we don\'t want to get readNode'],[-1,'        \/\/ from the superclass\'s superclass, which is OpenLayers.Format.XML.'],[0,'        return OpenLayers.Format.GML.v3.prototype.readNode.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wfs\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;FeatureCollection\&quot;: function(node, obj) {'],[0,'                obj.numberOfFeatures = parseInt(node.getAttribute('],[-1,'                    \&quot;numberOfFeatures\&quot;));'],[0,'                OpenLayers.Format.WFST.v1.prototype.readers[\&quot;wfs\&quot;][\&quot;FeatureCollection\&quot;].apply('],[-1,'                    this, arguments);'],[-1,'            },'],[-1,'            \&quot;TransactionResponse\&quot;: function(node, obj) {'],[0,'                obj.insertIds = [];'],[0,'                obj.success = false;'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;TransactionSummary\&quot;: function(node, obj) {'],[-1,'                \/\/ this is a limited test of success'],[0,'                obj.success = true;'],[-1,'            },'],[-1,'            \&quot;InsertResults\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Feature\&quot;: function(node, container) {'],[0,'                var obj = {fids: []};'],[0,'                this.readChildNodes(node, obj);'],[0,'                container.insertIds.push(obj.fids[0]);'],[-1,'            }'],[-1,'        }, OpenLayers.Format.WFST.v1.prototype.readers[\&quot;wfs\&quot;]),'],[-1,'        \&quot;gml\&quot;: OpenLayers.Format.GML.v3.prototype.readers[\&quot;gml\&quot;],'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.v3.prototype.readers[\&quot;feature\&quot;],'],[-1,'        \&quot;ogc\&quot;: OpenLayers.Format.Filter.v1_1_0.prototype.readers[\&quot;ogc\&quot;],'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers[\&quot;ows\&quot;]'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;wfs\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;GetFeature\&quot;: function(options) {'],[0,'                var node = OpenLayers.Format.WFST.v1.prototype.writers[\&quot;wfs\&quot;][\&quot;GetFeature\&quot;].apply(this, arguments);'],[0,'                options &amp;&amp; this.setAttributes(node, {'],[-1,'                    resultType: options.resultType,'],[-1,'                    startIndex: options.startIndex,'],[-1,'                    count: options.count'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Query\&quot;: function(options) {'],[0,'                options = OpenLayers.Util.extend({'],[-1,'                    featureNS: this.featureNS,'],[-1,'                    featurePrefix: this.featurePrefix,'],[-1,'                    featureType: this.featureType,'],[-1,'                    srsName: this.srsName'],[-1,'                }, options);'],[0,'                var prefix = options.featurePrefix;'],[0,'                var node = this.createElementNSPlus(\&quot;wfs:Query\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        typeName: (prefix ? prefix + \&quot;:\&quot; : \&quot;\&quot;) +'],[-1,'                            options.featureType,'],[-1,'                        srsName: options.srsName'],[-1,'                    }'],[-1,'                });'],[0,'                if(options.featureNS) {'],[0,'                    node.setAttribute(\&quot;xmlns:\&quot; + prefix, options.featureNS);'],[-1,'                }'],[0,'                if(options.propertyNames) {'],[0,'                    for(var i=0,len = options.propertyNames.length; i&lt;len; i++) {'],[0,'                        this.writeNode('],[-1,'                            \&quot;wfs:PropertyName\&quot;, '],[-1,'                            {property: options.propertyNames[i]},'],[-1,'                            node'],[-1,'                        );'],[-1,'                    }'],[-1,'                }'],[0,'                if(options.filter) {'],[0,'                    OpenLayers.Format.WFST.v1_1_0.prototype.setFilterProperty.call(this, options.filter);'],[0,'                    this.writeNode(\&quot;ogc:Filter\&quot;, options.filter, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyName\&quot;: function(obj) {'],[0,'                return this.createElementNSPlus(\&quot;wfs:PropertyName\&quot;, {'],[-1,'                    value: obj.property'],[-1,'                });'],[-1,'            }            '],[-1,'        }, OpenLayers.Format.WFST.v1.prototype.writers[\&quot;wfs\&quot;]),'],[-1,'        \&quot;gml\&quot;: OpenLayers.Format.GML.v3.prototype.writers[\&quot;gml\&quot;],'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.v3.prototype.writers[\&quot;feature\&quot;],'],[-1,'        \&quot;ogc\&quot;: OpenLayers.Format.Filter.v1_1_0.prototype.writers[\&quot;ogc\&quot;]'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WFST.v1_1_0\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WFSCapabilities.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WFSCapabilities'],[-1,' * Read WFS Capabilities.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML.VersionedOGC&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WFSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;1.1.0\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;1.1.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WFSCapabilities'],[-1,'     * Create a new parser for WFS capabilities.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read capabilities data from a string, and return a list of layers. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} List of named layers.'],[-1,'     *\/'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WFSCapabilities\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WFSCapabilities\/v1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WFSCapabilities.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WFSCapabilities.v1'],[-1,' * Abstract class not to be instantiated directly.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WFSCapabilities.v1 = OpenLayers.Class('],[-1,'    OpenLayers.Format.XML, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        wfs: \&quot;http:\/\/www.opengis.net\/wfs\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;,'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\&quot;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: errorProperty'],[-1,'     * {String} Which property of the returned object to check for in order to'],[-1,'     * determine whether or not parsing has failed. In the case that the'],[-1,'     * errorProperty is undefined on the returned object, the document will be'],[-1,'     * run through an OGCExceptionReport parser.'],[-1,'     *\/'],[-1,'    errorProperty: \&quot;featureTypeList\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;wfs\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WFSCapabilities.v1_1'],[-1,'     * Create an instance of one of the subclasses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read capabilities data from a string, and return a list of layers. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} List of named layers.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        var raw = data;'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var capabilities = {};'],[0,'        this.readNode(data, capabilities);'],[0,'        return capabilities;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wfs\&quot;: {'],[-1,'            \&quot;WFS_Capabilities\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;FeatureTypeList\&quot;: function(node, request) {'],[0,'                request.featureTypeList = {'],[-1,'                    featureTypes: []'],[-1,'                };'],[0,'                this.readChildNodes(node, request.featureTypeList);'],[-1,'            },'],[-1,'            \&quot;FeatureType\&quot;: function(node, featureTypeList) {'],[0,'                var featureType = {};'],[0,'                this.readChildNodes(node, featureType);'],[0,'                featureTypeList.featureTypes.push(featureType);'],[-1,'            },'],[-1,'            \&quot;Name\&quot;: function(node, obj) {'],[0,'                var name = this.getChildValue(node);'],[0,'                if(name) {'],[0,'                    var parts = name.split(\&quot;:\&quot;);'],[0,'                    obj.name = parts.pop();'],[0,'                    if(parts.length &gt; 0) {'],[0,'                        obj.featureNS = this.lookupNamespaceURI(node, parts[0]);'],[-1,'                    }'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Title\&quot;: function(node, obj) {'],[0,'                var title = this.getChildValue(node);'],[0,'                if(title) {'],[0,'                    obj.title = title;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Abstract\&quot;: function(node, obj) {'],[0,'                var abst = this.getChildValue(node);'],[0,'                if(abst) {'],[0,'                    obj[\&quot;abstract\&quot;] = abst;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WFSCapabilities.v1\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/EncodedPolyline.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.EncodedPolyline'],[-1,' * Class for reading and writing encoded polylines.  Create a new instance'],[-1,' * with the &lt;OpenLayers.Format.EncodedPolyline&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.EncodedPolyline = OpenLayers.Class(OpenLayers.Format, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: geometryType'],[-1,'     * {String} Geometry type to output. One of: linestring (default),'],[-1,'     *     linearring, point, multipoint or polygon. If the geometryType is'],[-1,'     *     point, only the first point of the string is returned.'],[-1,'     *\/'],[-1,'    geometryType: \&quot;linestring\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.EncodedPolyline'],[-1,'     * Create a new parser for encoded polylines'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *           this instance'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Format.EncodedPolyline&gt;} A new encoded polylines parser.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Deserialize an encoded polyline string and return a vector feature.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * encoded - {String} An encoded polyline string'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} A vector feature with a linestring.'],[-1,'     *\/'],[-1,'    read: function(encoded) {'],[0,'        var geomType;'],[0,'        if (this.geometryType == \&quot;linestring\&quot;)'],[0,'            geomType = OpenLayers.Geometry.LineString;'],[0,'        else if (this.geometryType == \&quot;linearring\&quot;)'],[0,'            geomType = OpenLayers.Geometry.LinearRing;'],[0,'        else if (this.geometryType == \&quot;multipoint\&quot;)'],[0,'            geomType = OpenLayers.Geometry.MultiPoint;'],[0,'        else if (this.geometryType != \&quot;point\&quot; &amp;&amp; this.geometryType != \&quot;polygon\&quot;)'],[0,'            return null;'],[-1,''],[0,'        var flatPoints = this.decodeDeltas(encoded, 2);'],[0,'        var flatPointsLength = flatPoints.length;'],[-1,''],[0,'        var pointGeometries = [];'],[0,'        for (var i = 0; i + 1 &lt; flatPointsLength;) {'],[0,'            var y = flatPoints[i++], x = flatPoints[i++];'],[0,'            pointGeometries.push(new OpenLayers.Geometry.Point(x, y));'],[-1,'        }'],[-1,''],[-1,''],[0,'        if (this.geometryType == \&quot;point\&quot;)'],[0,'            return new OpenLayers.Feature.Vector('],[-1,'                pointGeometries[0]'],[-1,'            );'],[-1,''],[0,'        if (this.geometryType == \&quot;polygon\&quot;)'],[0,'            return new OpenLayers.Feature.Vector('],[-1,'                new OpenLayers.Geometry.Polygon(['],[-1,'                    new OpenLayers.Geometry.LinearRing(pointGeometries)'],[-1,'                ])'],[-1,'            );'],[-1,''],[0,'        return new OpenLayers.Feature.Vector('],[-1,'            new geomType(pointGeometries)'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: decode'],[-1,'     * Deserialize an encoded string and return an array of n-dimensional'],[-1,'     * points.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * encoded - {String} An encoded string'],[-1,'     * dims - {int} The dimension of the points that are returned'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(Array(int))} An array containing n-dimensional arrays of'],[-1,'     *     coordinates.'],[-1,'     *\/'],[-1,'    decode: function(encoded, dims) {'],[0,'        var flatPoints = this.decodeDeltas(encoded, dims, 1);'],[0,'        var flatPointsLength = flatPoints.length;'],[-1,''],[0,'        var points = [];'],[0,'        for (var i = 0; i + (dims - 1) &lt; flatPointsLength;) {'],[0,'            var point = [];'],[-1,''],[0,'            for (var dim = 0; dim &lt; dims; ++dim) {'],[0,'                point.push(flatPoints[i++])'],[-1,'            }'],[-1,''],[0,'            points.push(point);'],[-1,'        }'],[-1,''],[0,'        return points;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Serialize a feature or array of features into a WKT string.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {&lt;OpenLayers.Feature.Vector&gt;|Array} A feature or array of'],[-1,'     *            features'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The WKT string representation of the input geometries'],[-1,'     *\/'],[-1,'    write: function(features) {'],[0,'        var feature;'],[0,'        if (features.constructor == Array)'],[0,'            feature = features[0];'],[-1,'        else'],[0,'            feature = features;'],[-1,''],[0,'        var geometry = feature.geometry;'],[0,'        var type = geometry.CLASS_NAME.split(\'.\')[2].toLowerCase();'],[-1,''],[0,'        var pointGeometries;'],[0,'        if (type == \&quot;point\&quot;)'],[0,'            pointGeometries = new Array(geometry);'],[0,'        else if (type == \&quot;linestring\&quot; ||'],[-1,'                 type == \&quot;linearring\&quot; ||'],[-1,'                 type == \&quot;multipoint\&quot;)'],[0,'            pointGeometries = geometry.components;'],[0,'        else if (type == \&quot;polygon\&quot;)'],[0,'            pointGeometries = geometry.components[0].components;'],[-1,'        else'],[0,'            return null;'],[-1,''],[0,'        var flatPoints = [];'],[-1,''],[0,'        var pointGeometriesLength = pointGeometries.length;'],[0,'        for (var i = 0; i &lt; pointGeometriesLength; ++i) {'],[0,'            var pointGeometry = pointGeometries[i];'],[0,'            flatPoints.push(pointGeometry.y);'],[0,'            flatPoints.push(pointGeometry.x);'],[-1,'        }'],[-1,''],[0,'        return this.encodeDeltas(flatPoints, 2);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: encode'],[-1,'     * Serialize an array of n-dimensional points and return an encoded string'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * points - {Array(Array(int))} An array containing n-dimensional'],[-1,'     *          arrays of coordinates'],[-1,'     * dims - {int} The dimension of the points that should be read'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} An encoded string'],[-1,'     *\/'],[-1,'    encode: function (points, dims) {'],[0,'        var flatPoints = [];'],[-1,''],[0,'        var pointsLength = points.length;'],[0,'        for (var i = 0; i &lt; pointsLength; ++i) {'],[0,'            var point = points[i];'],[-1,''],[0,'            for (var dim = 0; dim &lt; dims; ++dim) {'],[0,'                flatPoints.push(point[dim]);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        return this.encodeDeltas(flatPoints, dims, 1);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: encodeDeltas'],[-1,'     * Encode a list of n-dimensional points and return an encoded string'],[-1,'     *'],[-1,'     * Attention: This function will modify the passed array!'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * numbers - {Array.&lt;number&gt;} A list of n-dimensional points.'],[-1,'     * dimension - {number} The dimension of the points in the list.'],[-1,'     * opt_factor - {number=} The factor by which the numbers will be'],[-1,'     * multiplied. The remaining decimal places will get rounded away.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {string} The encoded string.'],[-1,'     *\/'],[-1,'    encodeDeltas: function(numbers, dimension, opt_factor) {'],[0,'      var factor = opt_factor || 1e5;'],[0,'      var d;'],[-1,''],[0,'      var lastNumbers = new Array(dimension);'],[0,'      for (d = 0; d &lt; dimension; ++d) {'],[0,'        lastNumbers[d] = 0;'],[-1,'      }'],[-1,''],[0,'      var numbersLength = numbers.length;'],[0,'      for (var i = 0; i &lt; numbersLength;) {'],[0,'        for (d = 0; d &lt; dimension; ++d, ++i) {'],[0,'          var num = numbers[i];'],[0,'          var delta = num - lastNumbers[d];'],[0,'          lastNumbers[d] = num;'],[-1,''],[0,'          numbers[i] = delta;'],[-1,'        }'],[-1,'      }'],[-1,''],[0,'      return this.encodeFloats(numbers, factor);'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: decodeDeltas'],[-1,'     * Decode a list of n-dimensional points from an encoded string'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * encoded - {string} An encoded string.'],[-1,'     * dimension - {number} The dimension of the points in the encoded string.'],[-1,'     * opt_factor - {number=} The factor by which the resulting numbers will'],[-1,'     * be divided.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array.&lt;number&gt;} A list of n-dimensional points.'],[-1,'     *\/'],[-1,'    decodeDeltas: function(encoded, dimension, opt_factor) {'],[0,'      var factor = opt_factor || 1e5;'],[0,'      var d;'],[-1,''],[0,'      var lastNumbers = new Array(dimension);'],[0,'      for (d = 0; d &lt; dimension; ++d) {'],[0,'        lastNumbers[d] = 0;'],[-1,'      }'],[-1,''],[0,'      var numbers = this.decodeFloats(encoded, factor);'],[-1,''],[0,'      var numbersLength = numbers.length;'],[0,'      for (var i = 0; i &lt; numbersLength;) {'],[0,'        for (d = 0; d &lt; dimension; ++d, ++i) {'],[0,'          lastNumbers[d] += numbers[i];'],[-1,''],[0,'          numbers[i] = lastNumbers[d];'],[-1,'        }'],[-1,'      }'],[-1,''],[0,'      return numbers;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: encodeFloats'],[-1,'     * Encode a list of floating point numbers and return an encoded string'],[-1,'     *'],[-1,'     * Attention: This function will modify the passed array!'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * numbers - {Array.&lt;number&gt;} A list of floating point numbers.'],[-1,'     * opt_factor - {number=} The factor by which the numbers will be'],[-1,'     * multiplied. The remaining decimal places will get rounded away.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {string} The encoded string.'],[-1,'     *\/'],[-1,'    encodeFloats: function(numbers, opt_factor) {'],[0,'      var factor = opt_factor || 1e5;'],[-1,''],[0,'      var numbersLength = numbers.length;'],[0,'      for (var i = 0; i &lt; numbersLength; ++i) {'],[0,'        numbers[i] = Math.round(numbers[i] * factor);'],[-1,'      }'],[-1,''],[0,'      return this.encodeSignedIntegers(numbers);'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: decodeFloats'],[-1,'     * Decode a list of floating point numbers from an encoded string'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * encoded - {string} An encoded string.'],[-1,'     * opt_factor - {number=} The factor by which the result will be divided.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array.&lt;number&gt;} A list of floating point numbers.'],[-1,'     *\/'],[-1,'    decodeFloats: function(encoded, opt_factor) {'],[0,'      var factor = opt_factor || 1e5;'],[-1,''],[0,'      var numbers = this.decodeSignedIntegers(encoded);'],[-1,''],[0,'      var numbersLength = numbers.length;'],[0,'      for (var i = 0; i &lt; numbersLength; ++i) {'],[0,'        numbers[i] \/= factor;'],[-1,'      }'],[-1,''],[0,'      return numbers;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: encodeSignedIntegers'],[-1,'     * Encode a list of signed integers and return an encoded string'],[-1,'     *'],[-1,'     * Attention: This function will modify the passed array!'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * numbers - {Array.&lt;number&gt;} A list of signed integers.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {string} The encoded string.'],[-1,'     *\/'],[-1,'    encodeSignedIntegers: function(numbers) {'],[0,'      var numbersLength = numbers.length;'],[0,'      for (var i = 0; i &lt; numbersLength; ++i) {'],[0,'        var num = numbers[i];'],[-1,''],[0,'        var signedNum = num &lt;&lt; 1;'],[0,'        if (num &lt; 0) {'],[0,'          signedNum = ~(signedNum);'],[-1,'        }'],[-1,''],[0,'        numbers[i] = signedNum;'],[-1,'      }'],[-1,''],[0,'      return this.encodeUnsignedIntegers(numbers);'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: decodeSignedIntegers'],[-1,'     * Decode a list of signed integers from an encoded string'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * encoded - {string} An encoded string.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array.&lt;number&gt;} A list of signed integers.'],[-1,'     *\/'],[-1,'    decodeSignedIntegers: function(encoded) {'],[0,'      var numbers = this.decodeUnsignedIntegers(encoded);'],[-1,''],[0,'      var numbersLength = numbers.length;'],[0,'      for (var i = 0; i &lt; numbersLength; ++i) {'],[0,'        var num = numbers[i];'],[0,'        numbers[i] = (num &amp; 1) ? ~(num &gt;&gt; 1) : (num &gt;&gt; 1);'],[-1,'      }'],[-1,''],[0,'      return numbers;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: encodeUnsignedIntegers'],[-1,'     * Encode a list of unsigned integers and return an encoded string'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * numbers - {Array.&lt;number&gt;} A list of unsigned integers.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {string} The encoded string.'],[-1,'     *\/'],[-1,'    encodeUnsignedIntegers: function(numbers) {'],[0,'      var encoded = \'\';'],[-1,''],[0,'      var numbersLength = numbers.length;'],[0,'      for (var i = 0; i &lt; numbersLength; ++i) {'],[0,'        encoded += this.encodeUnsignedInteger(numbers[i]);'],[-1,'      }'],[-1,''],[0,'      return encoded;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: decodeUnsignedIntegers'],[-1,'     * Decode a list of unsigned integers from an encoded string'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * encoded - {string} An encoded string.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array.&lt;number&gt;} A list of unsigned integers.'],[-1,'     *\/'],[-1,'    decodeUnsignedIntegers: function(encoded) {'],[0,'      var numbers = [];'],[-1,''],[0,'      var current = 0;'],[0,'      var shift = 0;'],[-1,''],[0,'      var encodedLength = encoded.length;'],[0,'      for (var i = 0; i &lt; encodedLength; ++i) {'],[0,'        var b = encoded.charCodeAt(i) - 63;'],[-1,''],[0,'        current |= (b &amp; 0x1f) &lt;&lt; shift;'],[-1,''],[0,'        if (b &lt; 0x20) {'],[0,'          numbers.push(current);'],[0,'          current = 0;'],[0,'          shift = 0;'],[-1,'        } else {'],[0,'          shift += 5;'],[-1,'        }'],[-1,'      }'],[-1,''],[0,'      return numbers;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: encodeFloat'],[-1,'     * Encode one single floating point number and return an encoded string'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * num - {number} Floating point number that should be encoded.'],[-1,'     * opt_factor - {number=} The factor by which num will be multiplied.'],[-1,'     * The remaining decimal places will get rounded away.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {string} The encoded string.'],[-1,'     *\/'],[-1,'    encodeFloat: function(num, opt_factor) {'],[0,'      num = Math.round(num * (opt_factor || 1e5));'],[0,'      return this.encodeSignedInteger(num);'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: decodeFloat'],[-1,'     * Decode one single floating point number from an encoded string'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * encoded - {string} An encoded string.'],[-1,'     * opt_factor - {number=} The factor by which the result will be divided.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {number} The decoded floating point number.'],[-1,'     *\/'],[-1,'    decodeFloat: function(encoded, opt_factor) {'],[0,'      var result = this.decodeSignedInteger(encoded);'],[0,'      return result \/ (opt_factor || 1e5);'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: encodeSignedInteger'],[-1,'     * Encode one single signed integer and return an encoded string'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * num - {number} Signed integer that should be encoded.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {string} The encoded string.'],[-1,'     *\/'],[-1,'    encodeSignedInteger: function(num) {'],[0,'      var signedNum = num &lt;&lt; 1;'],[0,'      if (num &lt; 0) {'],[0,'        signedNum = ~(signedNum);'],[-1,'      }'],[-1,''],[0,'      return this.encodeUnsignedInteger(signedNum);'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: decodeSignedInteger'],[-1,'     * Decode one single signed integer from an encoded string'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * encoded - {string} An encoded string.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {number} The decoded signed integer.'],[-1,'     *\/'],[-1,'    decodeSignedInteger: function(encoded) {'],[0,'      var result = this.decodeUnsignedInteger(encoded);'],[0,'      return ((result &amp; 1) ? ~(result &gt;&gt; 1) : (result &gt;&gt; 1));'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: encodeUnsignedInteger'],[-1,'     * Encode one single unsigned integer and return an encoded string'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * num - {number} Unsigned integer that should be encoded.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {string} The encoded string.'],[-1,'     *\/'],[-1,'    encodeUnsignedInteger: function(num) {'],[0,'      var value, encoded = \'\';'],[0,'      while (num &gt;= 0x20) {'],[0,'        value = (0x20 | (num &amp; 0x1f)) + 63;'],[0,'        encoded += (String.fromCharCode(value));'],[0,'        num &gt;&gt;= 5;'],[-1,'      }'],[0,'      value = num + 63;'],[0,'      encoded += (String.fromCharCode(value));'],[0,'      return encoded;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: decodeUnsignedInteger'],[-1,'     * Decode one single unsigned integer from an encoded string'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * encoded - {string} An encoded string.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {number} The decoded unsigned integer.'],[-1,'     *\/'],[-1,'    decodeUnsignedInteger: function(encoded) {'],[0,'      var result = 0;'],[0,'      var shift = 0;'],[-1,''],[0,'      var encodedLength = encoded.length;'],[0,'      for (var i = 0; i &lt; encodedLength; ++i) {'],[0,'        var b = encoded.charCodeAt(i) - 63;'],[-1,''],[0,'        result |= (b &amp; 0x1f) &lt;&lt; shift;'],[-1,''],[0,'        if (b &lt; 0x20)'],[0,'          break;'],[-1,''],[0,'        shift += 5;'],[-1,'      }'],[-1,''],[0,'      return result;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.EncodedPolyline\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Panel.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Events\/buttonclick.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Panel'],[-1,' * The Panel control is a container for other controls. With it toolbars'],[-1,' * may be composed.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.Panel = OpenLayers.Class(OpenLayers.Control, {'],[-1,'    \/**'],[-1,'     * Property: controls'],[-1,'     * {Array(&lt;OpenLayers.Control&gt;)}'],[-1,'     *\/'],[-1,'    controls: null,    '],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: autoActivate'],[-1,'     * {Boolean} Activate the control when it is added to a map.  Default is'],[-1,'     *     true.'],[-1,'     *\/'],[-1,'    autoActivate: true,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: defaultControl'],[-1,'     * {&lt;OpenLayers.Control&gt;} The control which is activated when the control is'],[-1,'     * activated (turned on), which also happens at instantiation.'],[-1,'     * If &lt;saveState&gt; is true, &lt;defaultControl&gt; will be nullified after the'],[-1,'     * first activation of the panel.'],[-1,'     *\/'],[-1,'    defaultControl: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: saveState'],[-1,'     * {Boolean} If set to true, the active state of this panel\'s controls will'],[-1,'     * be stored on panel deactivation, and restored on reactivation. Default'],[-1,'     * is false.'],[-1,'     *\/'],[-1,'    saveState: false,'],[-1,'      '],[-1,'    \/**'],[-1,'     * APIProperty: allowDepress'],[-1,'     * {Boolean} If is true the &lt;OpenLayers.Control.TYPE_TOOL&gt; controls can '],[-1,'     *     be deactivated by clicking the icon that represents them.  Default '],[-1,'     *     is false.'],[-1,'     *\/'],[-1,'    allowDepress: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: activeState'],[-1,'     * {Object} stores the active state of this panel\'s controls.'],[-1,'     *\/'],[-1,'    activeState: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.Panel'],[-1,'     * Create a new control panel.'],[-1,'     *'],[-1,'     * Each control in the panel is represented by an icon. When clicking '],[-1,'     *     on an icon, the &lt;activateControl&gt; method is called.'],[-1,'     *'],[-1,'     * Specific properties for controls on a panel:'],[-1,'     * type - {Number} One of &lt;OpenLayers.Control.TYPE_TOOL&gt;,'],[-1,'     *     &lt;OpenLayers.Control.TYPE_TOGGLE&gt;, &lt;OpenLayers.Control.TYPE_BUTTON&gt;.'],[-1,'     *     If not provided, &lt;OpenLayers.Control.TYPE_TOOL&gt; is assumed.'],[-1,'     * title - {string} Text displayed when mouse is over the icon that '],[-1,'     *     represents the control.     '],[-1,'     *'],[-1,'     * The &lt;OpenLayers.Control.type&gt; of a control determines the behavior when'],[-1,'     * clicking its icon:'],[-1,'     * &lt;OpenLayers.Control.TYPE_TOOL&gt; - The control is activated and other'],[-1,'     *     controls of this type in the same panel are deactivated. This is'],[-1,'     *     the default type.'],[-1,'     * &lt;OpenLayers.Control.TYPE_TOGGLE&gt; - The active state of the control is'],[-1,'     *     toggled.'],[-1,'     * &lt;OpenLayers.Control.TYPE_BUTTON&gt; - The'],[-1,'     *     &lt;OpenLayers.Control.Button.trigger&gt; method of the control is called,'],[-1,'     *     but its active state is not changed.'],[-1,'     *'],[-1,'     * If a control is &lt;OpenLayers.Control.active&gt;, it will be drawn with the'],[-1,'     * olControl[Name]ItemActive class, otherwise with the'],[-1,'     * olControl[Name]ItemInactive class.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be used'],[-1,'     *     to extend the control.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[0,'        this.controls = [];'],[0,'        this.activeState = {};'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if (this.map) {'],[0,'            this.map.events.unregister(\&quot;buttonclick\&quot;, this, this.onButtonClick);'],[-1,'        }'],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments);'],[0,'        for (var ctl, i = this.controls.length - 1; i &gt;= 0; i--) {'],[0,'            ctl = this.controls[i];'],[0,'            if (ctl.events) {'],[0,'                ctl.events.un({'],[-1,'                    activate: this.iconOn,'],[-1,'                    deactivate: this.iconOff'],[-1,'                });'],[-1,'            }'],[0,'            ctl.panel_div = null;'],[-1,'        }'],[0,'        this.activeState = null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {'],[0,'            var control;'],[0,'            for (var i=0, len=this.controls.length; i&lt;len; i++) {'],[0,'                control = this.controls[i];'],[0,'                if (control === this.defaultControl ||'],[-1,'                            (this.saveState &amp;&amp; this.activeState[control.id])) {'],[0,'                    control.activate();'],[-1,'                }'],[-1,'            }    '],[0,'            if (this.saveState === true) {'],[0,'                this.defaultControl = null;'],[-1,'            }'],[0,'            this.redraw();'],[0,'            return true;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        if (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {'],[0,'            var control;'],[0,'            for (var i=0, len=this.controls.length; i&lt;len; i++) {'],[0,'                control = this.controls[i];'],[0,'                this.activeState[control.id] = control.deactivate();'],[-1,'            }    '],[0,'            this.redraw();'],[0,'            return true;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/    '],[-1,'    draw: function() {'],[0,'        OpenLayers.Control.prototype.draw.apply(this, arguments);'],[0,'        if (this.outsideViewport) {'],[0,'            this.events.attachToElement(this.div);'],[0,'            this.events.register(\&quot;buttonclick\&quot;, this, this.onButtonClick);'],[-1,'        } else {'],[0,'            this.map.events.register(\&quot;buttonclick\&quot;, this, this.onButtonClick);'],[-1,'        }'],[0,'        this.addControlsToMap(this.controls);'],[0,'        return this.div;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: redraw'],[-1,'     *\/'],[-1,'    redraw: function() {'],[0,'        for (var l=this.div.childNodes.length, i=l-1; i&gt;=0; i--) {'],[0,'            this.div.removeChild(this.div.childNodes[i]);'],[-1,'        }'],[0,'        this.div.innerHTML = \&quot;\&quot;;'],[0,'        if (this.active) {'],[0,'            for (var i=0, len=this.controls.length; i&lt;len; i++) {'],[0,'                this.div.appendChild(this.controls[i].panel_div);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: activateControl'],[-1,'     * This method is called when the user click on the icon representing a '],[-1,'     *     control in the panel.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;}'],[-1,'     *\/'],[-1,'    activateControl: function (control) {'],[0,'        if (!this.active) { return false; }'],[0,'        if (control.type == OpenLayers.Control.TYPE_BUTTON) {'],[0,'            control.trigger();'],[0,'            return;'],[-1,'        }'],[0,'        if (control.type == OpenLayers.Control.TYPE_TOGGLE) {'],[0,'            if (control.active) {'],[0,'                control.deactivate();'],[-1,'            } else {'],[0,'                control.activate();'],[-1,'            }'],[0,'            return;'],[-1,'        }'],[0,'        if (this.allowDepress &amp;&amp; control.active) {'],[0,'            control.deactivate();'],[-1,'        } else {'],[0,'            var c;'],[0,'            for (var i=0, len=this.controls.length; i&lt;len; i++) {'],[0,'                c = this.controls[i];'],[0,'                if (c != control &amp;&amp;'],[-1,'                   (c.type === OpenLayers.Control.TYPE_TOOL || c.type == null)) {'],[0,'                    c.deactivate();'],[-1,'                }'],[-1,'            }'],[0,'            control.activate();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: addControls'],[-1,'     * To build a toolbar, you add a set of controls to it. addControls'],[-1,'     * lets you add a single control or a list of controls to the '],[-1,'     * Control Panel.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * controls - {&lt;OpenLayers.Control&gt;} Controls to add in the panel.'],[-1,'     *\/    '],[-1,'    addControls: function(controls) {'],[0,'        if (!(OpenLayers.Util.isArray(controls))) {'],[0,'            controls = [controls];'],[-1,'        }'],[0,'        this.controls = this.controls.concat(controls);'],[-1,''],[0,'        for (var i=0, len=controls.length; i&lt;len; i++) {'],[0,'            var control = controls[i],'],[-1,'                element = this.createControlMarkup(control);'],[0,'            OpenLayers.Element.addClass(element, '],[-1,'                                        control.displayClass + \&quot;ItemInactive\&quot;);'],[0,'            OpenLayers.Element.addClass(element, \&quot;olButton\&quot;);'],[0,'            if (control.title != \&quot;\&quot;  &amp;&amp; !element.title) {'],[0,'                element.title = control.title;'],[-1,'            }'],[0,'            control.panel_div = element;'],[-1,'        }'],[-1,''],[0,'        if (this.map) { \/\/ map.addControl() has already been called on the panel'],[0,'            this.addControlsToMap(controls);'],[0,'            this.redraw();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: createControlMarkup'],[-1,'     * This function just creates a div for the control. If specific HTML'],[-1,'     * markup is needed this function can be overridden in specific classes,'],[-1,'     * or at panel instantiation time:'],[-1,'     *'],[-1,'     * Example:'],[-1,'     * (code)'],[-1,'     * var panel = new OpenLayers.Control.Panel({'],[-1,'     *     defaultControl: control,'],[-1,'     *     \/\/ ovverride createControlMarkup to create actual buttons'],[-1,'     *     \/\/ including texts wrapped into span elements.'],[-1,'     *     createControlMarkup: function(control) {'],[-1,'     *         var button = document.createElement(\'button\'),'],[-1,'     *             span = document.createElement(\'span\');'],[-1,'     *         if (control.text) {'],[-1,'     *             span.innerHTML = control.text;'],[-1,'     *         }'],[-1,'     *         return button;'],[-1,'     *     }'],[-1,'     *  });'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} The control to create the HTML'],[-1,'     *     markup for.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The markup.'],[-1,'     *\/'],[-1,'    createControlMarkup: function(control) {'],[0,'        return document.createElement(\&quot;div\&quot;);'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * Method: addControlsToMap'],[-1,'     * Only for internal use in draw() and addControls() methods.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * controls - {Array(&lt;OpenLayers.Control&gt;)} Controls to add into map.'],[-1,'     *\/         '],[-1,'    addControlsToMap: function (controls) {'],[0,'        var control;'],[0,'        for (var i=0, len=controls.length; i&lt;len; i++) {'],[0,'            control = controls[i];'],[0,'            if (control.autoActivate === true) {'],[0,'                control.autoActivate = false;'],[0,'                this.map.addControl(control);'],[0,'                control.autoActivate = true;'],[-1,'            } else {'],[0,'                this.map.addControl(control);'],[0,'                control.deactivate();'],[-1,'            }'],[0,'            control.events.on({'],[-1,'                activate: this.iconOn,'],[-1,'                deactivate: this.iconOff'],[-1,'            });'],[-1,'        }  '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: iconOn'],[-1,'     * Internal use, for use only with \&quot;controls[i].events.on\/un\&quot;.'],[-1,'     *\/'],[-1,'     iconOn: function() {'],[0,'        var d = this.panel_div; \/\/ \&quot;this\&quot; refers to a control on panel!'],[0,'        var re = new RegExp(\&quot;\\\\b(\&quot; + this.displayClass + \&quot;Item)Inactive\\\\b\&quot;);'],[0,'        d.className = d.className.replace(re, \&quot;$1Active\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: iconOff'],[-1,'     * Internal use, for use only with \&quot;controls[i].events.on\/un\&quot;.'],[-1,'     *\/'],[-1,'     iconOff: function() {'],[0,'        var d = this.panel_div; \/\/ \&quot;this\&quot; refers to a control on panel!'],[0,'        var re = new RegExp(\&quot;\\\\b(\&quot; + this.displayClass + \&quot;Item)Active\\\\b\&quot;);'],[0,'        d.className = d.className.replace(re, \&quot;$1Inactive\&quot;);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onButtonClick'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *\/'],[-1,'    onButtonClick: function (evt) {'],[0,'        var controls = this.controls,'],[-1,'            button = evt.buttonElement;'],[0,'        for (var i=controls.length-1; i&gt;=0; --i) {'],[0,'            if (controls[i].panel_div === button) {'],[0,'                this.activateControl(controls[i]);'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getControlsBy'],[-1,'     * Get a list of controls with properties matching the given criteria.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * property - {String} A control property to be matched.'],[-1,'     * match - {String | Object} A string to match.  Can also be a regular'],[-1,'     *     expression literal or object.  In addition, it can be any object'],[-1,'     *     with a method named test.  For reqular expressions or other, if'],[-1,'     *     match.test(control[property]) evaluates to true, the control will be'],[-1,'     *     included in the array returned.  If no controls are found, an empty'],[-1,'     *     array is returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Control&gt;)} A list of controls matching the given criteria.'],[-1,'     *     An empty array is returned if no matches are found.'],[-1,'     *\/'],[-1,'    getControlsBy: function(property, match) {'],[0,'        var test = (typeof match.test == \&quot;function\&quot;);'],[0,'        var found = OpenLayers.Array.filter(this.controls, function(item) {'],[0,'            return item[property] == match || (test &amp;&amp; match.test(item[property]));'],[-1,'        });'],[0,'        return found;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getControlsByName'],[-1,'     * Get a list of contorls with names matching the given name.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * match - {String | Object} A control name.  The name can also be a regular'],[-1,'     *     expression literal or object.  In addition, it can be any object'],[-1,'     *     with a method named test.  For reqular expressions or other, if'],[-1,'     *     name.test(control.name) evaluates to true, the control will be included'],[-1,'     *     in the list of controls returned.  If no controls are found, an empty'],[-1,'     *     array is returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Control&gt;)} A list of controls matching the given name.'],[-1,'     *     An empty array is returned if no matches are found.'],[-1,'     *\/'],[-1,'    getControlsByName: function(match) {'],[0,'        return this.getControlsBy(\&quot;name\&quot;, match);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getControlsByClass'],[-1,'     * Get a list of controls of a given type (CLASS_NAME).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * match - {String | Object} A control class name.  The type can also be a'],[-1,'     *     regular expression literal or object.  In addition, it can be any'],[-1,'     *     object with a method named test.  For reqular expressions or other,'],[-1,'     *     if type.test(control.CLASS_NAME) evaluates to true, the control will'],[-1,'     *     be included in the list of controls returned.  If no controls are'],[-1,'     *     found, an empty array is returned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Control&gt;)} A list of controls matching the given type.'],[-1,'     *     An empty array is returned if no matches are found.'],[-1,'     *\/'],[-1,'    getControlsByClass: function(match) {'],[0,'        return this.getControlsBy(\&quot;CLASS_NAME\&quot;, match);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Panel\&quot;'],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Button.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Button '],[-1,' * The Button control is a very simple push-button, for use with '],[-1,' * &lt;OpenLayers.Control.Panel&gt;.'],[-1,' * When clicked, the function trigger() is executed.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *'],[-1,' * Use:'],[-1,' * (code)'],[-1,' * var button = new OpenLayers.Control.Button({'],[-1,' *     displayClass: \&quot;MyButton\&quot;, trigger: myFunction'],[-1,' * });'],[-1,' * panel.addControls([button]);'],[-1,' * (end)'],[-1,' * '],[-1,' * Will create a button with CSS class MyButtonItemInactive, that'],[-1,' *     will call the function MyFunction() when clicked.'],[-1,' *\/'],[1,'OpenLayers.Control.Button = OpenLayers.Class(OpenLayers.Control, {'],[-1,'    \/**'],[-1,'     * Property: type'],[-1,'     * {Integer} OpenLayers.Control.TYPE_BUTTON.'],[-1,'     *\/'],[-1,'    type: OpenLayers.Control.TYPE_BUTTON,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: trigger'],[-1,'     * Called by a control panel when the button is clicked.'],[-1,'     *\/'],[-1,'    trigger: function() {},'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Button\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/ZoomIn.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control\/Button.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.ZoomIn'],[-1,' * The ZoomIn control is a button to increase the zoom level of a map.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.ZoomIn = OpenLayers.Class(OpenLayers.Control.Button, {'],[-1,''],[-1,'    \/**'],[-1,'     * Method: trigger'],[-1,'     *\/'],[-1,'    trigger: function(){'],[0,'        if (this.map) {'],[0,'            this.map.zoomIn();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.ZoomIn\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/ZoomOut.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control\/Button.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.ZoomOut'],[-1,' * The ZoomOut control is a button to decrease the zoom level of a map.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.ZoomOut = OpenLayers.Class(OpenLayers.Control.Button, {'],[-1,''],[-1,'    \/**'],[-1,'     * Method: trigger'],[-1,'     *\/'],[-1,'    trigger: function(){'],[0,'        if (this.map) {'],[0,'            this.map.zoomOut();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.ZoomOut\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/ZoomToMaxExtent.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control\/Button.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.ZoomToMaxExtent '],[-1,' * The ZoomToMaxExtent control is a button that zooms out to the maximum'],[-1,' * extent of the map. It is designed to be used with a '],[-1,' * &lt;OpenLayers.Control.Panel&gt;.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.ZoomToMaxExtent = OpenLayers.Class(OpenLayers.Control.Button, {'],[-1,''],[-1,'    \/**'],[-1,'     * Method: trigger'],[-1,'     * '],[-1,'     * Called whenever this control is being rendered inside of a panel and a '],[-1,'     *     click occurs on this controls element. Actually zooms to the maximum'],[-1,'     *     extent of this controls map.'],[-1,'     *\/'],[-1,'    trigger: function() {'],[0,'        if (this.map) {'],[0,'            this.map.zoomToMaxExtent();'],[-1,'        }    '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.ZoomToMaxExtent\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/ZoomPanel.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control\/Panel.js'],[-1,' * @requires OpenLayers\/Control\/ZoomIn.js'],[-1,' * @requires OpenLayers\/Control\/ZoomOut.js'],[-1,' * @requires OpenLayers\/Control\/ZoomToMaxExtent.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.ZoomPanel'],[-1,' * The ZoomPanel control is a compact collecton of 3 zoom controls: a '],[-1,' * &lt;OpenLayers.Control.ZoomIn&gt;, a &lt;OpenLayers.Control.ZoomToMaxExtent&gt;, and a'],[-1,' * &lt;OpenLayers.Control.ZoomOut&gt;. By default it is drawn in the upper left '],[-1,' * corner of the map.'],[-1,' *'],[-1,' * Note: '],[-1,' * If you wish to use this class with the default images and you want '],[-1,' *       it to look nice in ie6, you should add the following, conditionally'],[-1,' *       added css stylesheet to your HTML file:'],[-1,' * '],[-1,' * (code)'],[-1,' * &lt;!--[if lte IE 6]&gt;'],[-1,' *   &lt;link rel=\&quot;stylesheet\&quot; href=\&quot;..\/theme\/default\/ie6-style.css\&quot; type=\&quot;text\/css\&quot; \/&gt;'],[-1,' * &lt;![endif]--&gt;'],[-1,' * (end)'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control.Panel&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.ZoomPanel = OpenLayers.Class(OpenLayers.Control.Panel, {'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.ZoomPanel '],[-1,'     * Add the three zooming controls.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be used'],[-1,'     *     to extend the control.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Control.Panel.prototype.initialize.apply(this, [options]);'],[0,'        this.addControls(['],[-1,'            new OpenLayers.Control.ZoomIn(),'],[-1,'            new OpenLayers.Control.ZoomToMaxExtent(),'],[-1,'            new OpenLayers.Control.ZoomOut()'],[-1,'        ]);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.ZoomPanel\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/HTTPRequest.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.HTTPRequest'],[-1,' * '],[-1,' * Inherits from: '],[-1,' *  - &lt;OpenLayers.Layer&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.HTTPRequest = OpenLayers.Class(OpenLayers.Layer, {'],[-1,''],[-1,'    \/** '],[-1,'     * Constant: URL_HASH_FACTOR'],[-1,'     * {Float} Used to hash URL param strings for multi-WMS server selection.'],[-1,'     *         Set to the Golden Ratio per Knuth\'s recommendation.'],[-1,'     *\/'],[-1,'    URL_HASH_FACTOR: (Math.sqrt(5) - 1) \/ 2,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: url'],[-1,'     * {Array(String) or String} This is either an array of url strings or '],[-1,'     *                           a single url string. '],[-1,'     *\/'],[-1,'    url: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: params'],[-1,'     * {Object} Hashtable of key\/value parameters'],[-1,'     *\/'],[-1,'    params: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: reproject'],[-1,'     * *Deprecated*. See http:\/\/docs.openlayers.org\/library\/spherical_mercator.html'],[-1,'     * for information on the replacement for this functionality. '],[-1,'     * {Boolean} Whether layer should reproject itself based on base layer '],[-1,'     *           locations. This allows reprojection onto commercial layers. '],[-1,'     *           Default is false: Most layers can\'t reproject, but layers '],[-1,'     *           which can create non-square geographic pixels can, like WMS.'],[-1,'     *           '],[-1,'     *\/'],[-1,'    reproject: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.HTTPRequest'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * name - {String}'],[-1,'     * url - {Array(String) or String}'],[-1,'     * params - {Object}'],[-1,'     * options - {Object} Hashtable of extra options to tag onto the layer'],[-1,'     *\/'],[-1,'    initialize: function(name, url, params, options) {'],[0,'        OpenLayers.Layer.prototype.initialize.apply(this, [name, options]);'],[0,'        this.url = url;'],[0,'        if (!this.params) {'],[0,'            this.params = OpenLayers.Util.extend({}, params);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.url = null;'],[0,'        this.params = null;'],[0,'        OpenLayers.Layer.prototype.destroy.apply(this, arguments); '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * obj - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.HTTPRequest&gt;} An exact clone of this '],[-1,'     *                                  &lt;OpenLayers.Layer.HTTPRequest&gt;'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[-1,'        '],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.HTTPRequest(this.name,'],[-1,'                                                   this.url,'],[-1,'                                                   this.params,'],[-1,'                                                   this.getOptions());'],[-1,'        }'],[-1,'        '],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.prototype.clone.apply(this, [obj]);'],[-1,''],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[-1,'        '],[0,'        return obj;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: setUrl'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * newUrl - {String}'],[-1,'     *\/'],[-1,'    setUrl: function(newUrl) {'],[0,'        this.url = newUrl;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: mergeNewParams'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * newParams - {Object}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * redrawn: {Boolean} whether the layer was actually redrawn.'],[-1,'     *\/'],[-1,'    mergeNewParams:function(newParams) {'],[0,'        this.params = OpenLayers.Util.extend(this.params, newParams);'],[0,'        var ret = this.redraw();'],[0,'        if(this.map != null) {'],[0,'            this.map.events.triggerEvent(\&quot;changelayer\&quot;, {'],[-1,'                layer: this,'],[-1,'                property: \&quot;params\&quot;'],[-1,'            });'],[-1,'        }'],[0,'        return ret;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: redraw'],[-1,'     * Redraws the layer.  Returns true if the layer was redrawn, false if not.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * force - {Boolean} Force redraw by adding random parameter.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The layer was redrawn.'],[-1,'     *\/'],[-1,'    redraw: function(force) { '],[0,'        if (force) {'],[0,'            return this.mergeNewParams({\&quot;_olSalt\&quot;: Math.random()});'],[-1,'        } else {'],[0,'            return OpenLayers.Layer.prototype.redraw.apply(this, []);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: selectUrl'],[-1,'     * selectUrl() implements the standard floating-point multiplicative'],[-1,'     *     hash function described by Knuth, and hashes the contents of the '],[-1,'     *     given param string into a float between 0 and 1. This float is then'],[-1,'     *     scaled to the size of the provided urls array, and used to select'],[-1,'     *     a URL.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * paramString - {String}'],[-1,'     * urls - {Array(String)}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} An entry from the urls array, deterministically selected based'],[-1,'     *          on the paramString.'],[-1,'     *\/'],[-1,'    selectUrl: function(paramString, urls) {'],[0,'        var product = 1;'],[0,'        for (var i=0, len=paramString.length; i&lt;len; i++) { '],[0,'            product *= paramString.charCodeAt(i) * this.URL_HASH_FACTOR; '],[0,'            product -= Math.floor(product); '],[-1,'        }'],[0,'        return urls[Math.floor(product * urls.length)];'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: getFullRequestString'],[-1,'     * Combine url with layer\'s params and these newParams. '],[-1,'     *   '],[-1,'     *    does checking on the serverPath variable, allowing for cases when it '],[-1,'     *     is supplied with trailing ? or &amp;, as well as cases where not. '],[-1,'     *'],[-1,'     *    return in formatted string like this:'],[-1,'     *        \&quot;server?key1=value1&amp;key2=value2&amp;key3=value3\&quot;'],[-1,'     * '],[-1,'     * WARNING: The altUrl parameter is deprecated and will be removed in 3.0.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * newParams - {Object}'],[-1,'     * altUrl - {String} Use this as the url instead of the layer\'s url'],[-1,'     *   '],[-1,'     * Returns: '],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    getFullRequestString:function(newParams, altUrl) {'],[-1,''],[-1,'        \/\/ if not altUrl passed in, use layer\'s url'],[0,'        var url = altUrl || this.url;'],[-1,'        '],[-1,'        \/\/ create a new params hashtable with all the layer params and the '],[-1,'        \/\/ new params together. then convert to string'],[0,'        var allParams = OpenLayers.Util.extend({}, this.params);'],[0,'        allParams = OpenLayers.Util.extend(allParams, newParams);'],[0,'        var paramsString = OpenLayers.Util.getParameterString(allParams);'],[-1,'        '],[-1,'        \/\/ if url is not a string, it should be an array of strings, '],[-1,'        \/\/ in which case we will deterministically select one of them in '],[-1,'        \/\/ order to evenly distribute requests to different urls.'],[-1,'        \/\/'],[0,'        if (OpenLayers.Util.isArray(url)) {'],[0,'            url = this.selectUrl(paramsString, url);'],[-1,'        }   '],[-1,' '],[-1,'        \/\/ ignore parameters that are already in the url search string'],[0,'        var urlParams = '],[-1,'            OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(url));'],[0,'        for(var key in allParams) {'],[0,'            if(key.toUpperCase() in urlParams) {'],[0,'                delete allParams[key];'],[-1,'            }'],[-1,'        }'],[0,'        paramsString = OpenLayers.Util.getParameterString(allParams);'],[-1,'        '],[0,'        return OpenLayers.Util.urlAppend(url, paramsString);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.HTTPRequest\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Tile.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Tile '],[-1,' * This is a class designed to designate a single tile, however'],[-1,' *     it is explicitly designed to do relatively little. Tiles store '],[-1,' *     information about themselves -- such as the URL that they are related'],[-1,' *     to, and their size - but do not add themselves to the layer div '],[-1,' *     automatically, for example. Create a new tile with the '],[-1,' *     &lt;OpenLayers.Tile&gt; constructor, or a subclass. '],[-1,' * '],[-1,' * TBD 3.0 - remove reference to url in above paragraph'],[-1,' * '],[-1,' *\/'],[1,'OpenLayers.Tile = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} An events object that handles all '],[-1,'     *     events on the tile.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * tile.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types:'],[-1,'     * beforedraw - Triggered before the tile is drawn. Used to defer'],[-1,'     *     drawing to an animation queue. To defer drawing, listeners need'],[-1,'     *     to return false, which will abort drawing. The queue handler needs'],[-1,'     *     to call &lt;draw&gt;(true) to actually draw the tile.'],[-1,'     * loadstart - Triggered when tile loading starts.'],[-1,'     * loadend - Triggered when tile loading ends.'],[-1,'     * loaderror - Triggered before the loadend event (i.e. when the tile is'],[-1,'     *     still hidden) if the tile could not be loaded.'],[-1,'     * reload - Triggered when an already loading tile is reloaded.'],[-1,'     * unload - Triggered before a tile is unloaded.'],[-1,'     *\/'],[-1,'    events: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: eventListeners'],[-1,'     * {Object} If set as an option at construction, the eventListeners'],[-1,'     *     object will be registered with &lt;OpenLayers.Events.on&gt;.  Object'],[-1,'     *     structure must be a listeners object as shown in the example for'],[-1,'     *     the events.on method.'],[-1,'     *'],[-1,'     * This options can be set in the ``tileOptions`` option from'],[-1,'     * &lt;OpenLayers.Layer.Grid&gt;. For example, to be notified of the'],[-1,'     * ``loadend`` event of each tiles:'],[-1,'     * (code)'],[-1,'     * new OpenLayers.Layer.OSM(\'osm\', \'http:\/\/tile.openstreetmap.org\/${z}\/${x}\/${y}.png\', {'],[-1,'     *     tileOptions: {'],[-1,'     *         eventListeners: {'],[-1,'     *             \'loadend\': function(evt) {'],[-1,'     *                 \/\/ do something on loadend'],[-1,'     *             }'],[-1,'     *         }'],[-1,'     *     }'],[-1,'     * });'],[-1,'     * (end)'],[-1,'     *\/'],[-1,'    eventListeners: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: id '],[-1,'     * {String} null'],[-1,'     *\/'],[-1,'    id: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: layer '],[-1,'     * {&lt;OpenLayers.Layer&gt;} layer the tile is attached to '],[-1,'     *\/'],[-1,'    layer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: url'],[-1,'     * {String} url of the request.'],[-1,'     *'],[-1,'     * TBD 3.0 '],[-1,'     * Deprecated. The base tile class does not need an url. This should be '],[-1,'     * handled in subclasses. Does not belong here.'],[-1,'     *\/'],[-1,'    url: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: bounds '],[-1,'     * {&lt;OpenLayers.Bounds&gt;} null'],[-1,'     *\/'],[-1,'    bounds: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: size '],[-1,'     * {&lt;OpenLayers.Size&gt;} null'],[-1,'     *\/'],[-1,'    size: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: position '],[-1,'     * {&lt;OpenLayers.Pixel&gt;} Top Left pixel of the tile'],[-1,'     *\/    '],[-1,'    position: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: isLoading'],[-1,'     * {Boolean} Is the tile loading?'],[-1,'     *\/'],[-1,'    isLoading: false,'],[-1,'    '],[-1,'    \/** TBD 3.0 -- remove \'url\' from the list of parameters to the constructor.'],[-1,'     *             there is no need for the base tile class to have a url.'],[-1,'     *\/'],[-1,''],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Tile'],[-1,'     * Constructor for a new &lt;OpenLayers.Tile&gt; instance.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer&gt;} layer that the tile will go in.'],[-1,'     * position - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * url - {&lt;String&gt;}'],[-1,'     * size - {&lt;OpenLayers.Size&gt;}'],[-1,'     * options - {Object}'],[-1,'     *\/   '],[-1,'    initialize: function(layer, position, bounds, url, size, options) {'],[0,'        this.layer = layer;'],[0,'        this.position = position.clone();'],[0,'        this.setBounds(bounds);'],[0,'        this.url = url;'],[0,'        if (size) {'],[0,'            this.size = size.clone();'],[-1,'        }'],[-1,''],[-1,'        \/\/give the tile a unique id based on its BBOX.'],[0,'        this.id = OpenLayers.Util.createUniqueID(\&quot;Tile_\&quot;);'],[-1,''],[0,'        OpenLayers.Util.extend(this, options);'],[-1,''],[0,'        this.events = new OpenLayers.Events(this);'],[0,'        if (this.eventListeners instanceof Object) {'],[0,'            this.events.on(this.eventListeners);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: unload'],[-1,'     * Call immediately before destroying if you are listening to tile'],[-1,'     * events, so that counters are properly handled if tile is still'],[-1,'     * loading at destroy-time. Will only fire an event if the tile is'],[-1,'     * still loading.'],[-1,'     *\/'],[-1,'    unload: function() {'],[0,'       if (this.isLoading) { '],[0,'           this.isLoading = false; '],[0,'           this.events.triggerEvent(\&quot;unload\&quot;); '],[-1,'       }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: destroy'],[-1,'     * Nullify references to prevent circular references and memory leaks.'],[-1,'     *\/'],[-1,'    destroy:function() {'],[0,'        this.layer  = null;'],[0,'        this.bounds = null;'],[0,'        this.size = null;'],[0,'        this.position = null;'],[-1,'        '],[0,'        if (this.eventListeners) {'],[0,'            this.events.un(this.eventListeners);'],[-1,'        }'],[0,'        this.events.destroy();'],[0,'        this.eventListeners = null;'],[0,'        this.events = null;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * Clear whatever is currently in the tile, then return whether or not '],[-1,'     *     it should actually be re-drawn. This is an example implementation'],[-1,'     *     that can be overridden by subclasses. The minimum thing to do here'],[-1,'     *     is to call &lt;clear&gt; and return the result from &lt;shouldDraw&gt;.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * force - {Boolean} If true, the tile will not be cleared and no beforedraw'],[-1,'     *     event will be fired. This is used for drawing tiles asynchronously'],[-1,'     *     after drawing has been cancelled by returning false from a beforedraw'],[-1,'     *     listener.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the tile should actually be drawn. Returns null'],[-1,'     *     if a beforedraw listener returned false.'],[-1,'     *\/'],[-1,'    draw: function(force) {'],[0,'        if (!force) {'],[-1,'            \/\/clear tile\'s contents and mark as not drawn'],[0,'            this.clear();'],[-1,'        }'],[0,'        var draw = this.shouldDraw();'],[0,'        if (draw &amp;&amp; !force &amp;&amp; this.events.triggerEvent(\&quot;beforedraw\&quot;) === false) {'],[0,'            draw = null;'],[-1,'        }'],[0,'        return draw;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: shouldDraw'],[-1,'     * Return whether or not the tile should actually be (re-)drawn. The only'],[-1,'     * case where we *wouldn\'t* want to draw the tile is if the tile is outside'],[-1,'     * its layer\'s maxExtent'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the tile should actually be drawn.'],[-1,'     *\/'],[-1,'    shouldDraw: function() {        '],[0,'        var withinMaxExtent = false,'],[-1,'            maxExtent = this.layer.maxExtent;'],[0,'        if (maxExtent) {'],[0,'            var map = this.layer.map;'],[0,'            var worldBounds = map.baseLayer.wrapDateLine &amp;&amp; map.getMaxExtent();'],[0,'            if (this.bounds.intersectsBounds(maxExtent, {inclusive: false, worldBounds: worldBounds})) {'],[0,'                withinMaxExtent = true;'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        return withinMaxExtent || this.layer.displayOutsideMaxExtent;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setBounds'],[-1,'     * Sets the bounds on this instance'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    setBounds: function(bounds) {'],[0,'        bounds = bounds.clone();'],[0,'        if (this.layer.map.baseLayer.wrapDateLine) {'],[0,'            var worldExtent = this.layer.map.getMaxExtent(),'],[-1,'                tolerance = this.layer.map.getResolution();'],[0,'            bounds = bounds.wrapDateLine(worldExtent, {'],[-1,'                leftTolerance: tolerance,'],[-1,'                rightTolerance: tolerance'],[-1,'            });'],[-1,'        }'],[0,'        this.bounds = bounds;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: moveTo'],[-1,'     * Reposition the tile.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * position - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     * redraw - {Boolean} Call draw method on tile after moving.'],[-1,'     *     Default is true'],[-1,'     *\/'],[-1,'    moveTo: function (bounds, position, redraw) {'],[0,'        if (redraw == null) {'],[0,'            redraw = true;'],[-1,'        }'],[-1,''],[0,'        this.setBounds(bounds);'],[0,'        this.position = position.clone();'],[0,'        if (redraw) {'],[0,'            this.draw();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: clear'],[-1,'     * Clear the tile of any bounds\/position-related data so that it can '],[-1,'     *     be reused in a new location.'],[-1,'     *\/'],[-1,'    clear: function(draw) {'],[-1,'        \/\/ to be extended by subclasses'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Tile\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Tile\/Image.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Tile.js'],[-1,' * @requires OpenLayers\/Animation.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Tile.Image'],[-1,' * Instances of OpenLayers.Tile.Image are used to manage the image tiles'],[-1,' * used by various layers.  Create a new image tile with the'],[-1,' * &lt;OpenLayers.Tile.Image&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Tile&gt;'],[-1,' *\/'],[1,'OpenLayers.Tile.Image = OpenLayers.Class(OpenLayers.Tile, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} An events object that handles all '],[-1,'     *     events on the tile.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * tile.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to the &lt;OpenLayers.Tile&gt; events):'],[-1,'     * beforeload - Triggered before an image is prepared for loading, when the'],[-1,'     *     url for the image is known already. Listeners may call &lt;setImage&gt; on'],[-1,'     *     the tile instance. If they do so, that image will be used and no new'],[-1,'     *     one will be created.'],[-1,'     *\/'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: url'],[-1,'     * {String} The URL of the image being requested. No default. Filled in by'],[-1,'     * layer.getURL() function. May be modified by loadstart listeners.'],[-1,'     *\/'],[-1,'    url: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: imgDiv'],[-1,'     * {HTMLImageElement} The image for this tile.'],[-1,'     *\/'],[-1,'    imgDiv: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: frame'],[-1,'     * {DOMElement} The image element is appended to the frame.  Any gutter on'],[-1,'     * the image will be hidden behind the frame. If no gutter is set,'],[-1,'     * this will be null.'],[-1,'     *\/ '],[-1,'    frame: null, '],[-1,''],[-1,'    \/** '],[-1,'     * Property: imageReloadAttempts'],[-1,'     * {Integer} Attempts to load the image.'],[-1,'     *\/'],[-1,'    imageReloadAttempts: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: layerAlphaHack'],[-1,'     * {Boolean} True if the png alpha hack needs to be applied on the layer\'s div.'],[-1,'     *\/'],[-1,'    layerAlphaHack: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: asyncRequestId'],[-1,'     * {Integer} ID of an request to see if request is still valid. This is a'],[-1,'     * number which increments by 1 for each asynchronous request.'],[-1,'     *\/'],[-1,'    asyncRequestId: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: maxGetUrlLength'],[-1,'     * {Number} If set, requests that would result in GET urls with more'],[-1,'     * characters than the number provided will be made using form-encoded'],[-1,'     * HTTP POST. It is good practice to avoid urls that are longer than 2048'],[-1,'     * characters.'],[-1,'     *'],[-1,'     * Caution:'],[-1,'     * Older versions of Gecko based browsers (e.g. Firefox &lt; 3.5) and most'],[-1,'     * Opera versions do not fully support this option. On all browsers,'],[-1,'     * transition effects are not supported if POST requests are used.'],[-1,'     *\/'],[-1,'    maxGetUrlLength: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: canvasContext'],[-1,'     * {CanvasRenderingContext2D} A canvas context associated with'],[-1,'     * the tile image.'],[-1,'     *\/'],[-1,'    canvasContext: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: crossOriginKeyword'],[-1,'     * The value of the crossorigin keyword to use when loading images. This is'],[-1,'     * only relevant when using &lt;getCanvasContext&gt; for tiles from remote'],[-1,'     * origins and should be set to either \'anonymous\' or \'use-credentials\''],[-1,'     * for servers that send Access-Control-Allow-Origin headers with their'],[-1,'     * tiles.'],[-1,'     *\/'],[-1,'    crossOriginKeyword: null,'],[-1,''],[-1,'    \/** TBD 3.0 - reorder the parameters to the init function to remove '],[-1,'     *             URL. the getUrl() function on the layer gets called on '],[-1,'     *             each draw(), so no need to specify it here.'],[-1,'     *\/'],[-1,''],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Tile.Image'],[-1,'     * Constructor for a new &lt;OpenLayers.Tile.Image&gt; instance.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer&gt;} layer that the tile will go in.'],[-1,'     * position - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * url - {&lt;String&gt;} Deprecated. Remove me in 3.0.'],[-1,'     * size - {&lt;OpenLayers.Size&gt;}'],[-1,'     * options - {Object}'],[-1,'     *\/   '],[-1,'    initialize: function(layer, position, bounds, url, size, options) {'],[0,'        OpenLayers.Tile.prototype.initialize.apply(this, arguments);'],[-1,''],[0,'        this.url = url; \/\/deprecated remove me'],[-1,'        '],[0,'        this.layerAlphaHack = this.layer.alpha &amp;&amp; OpenLayers.Util.alphaHack();'],[-1,''],[0,'        if (this.maxGetUrlLength != null || this.layer.gutter || this.layerAlphaHack) {'],[-1,'            \/\/ only create frame if it\'s needed'],[0,'            this.frame = document.createElement(\&quot;div\&quot;);'],[0,'            this.frame.style.position = \&quot;absolute\&quot;;'],[0,'            this.frame.style.overflow = \&quot;hidden\&quot;;'],[-1,'        }'],[0,'        if (this.maxGetUrlLength != null) {'],[0,'            OpenLayers.Util.extend(this, OpenLayers.Tile.Image.IFrame);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: destroy'],[-1,'     * nullify references to prevent circular references and memory leaks'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if (this.imgDiv)  {'],[0,'            this.clear();'],[0,'            this.imgDiv = null;'],[0,'            this.frame = null;'],[-1,'        }'],[-1,'        \/\/ don\'t handle async requests any more'],[0,'        this.asyncRequestId = null;'],[0,'        OpenLayers.Tile.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * Check that a tile should be drawn, and draw it.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Was a tile drawn? Or null if a beforedraw listener returned'],[-1,'     *     false.'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        var shouldDraw = OpenLayers.Tile.prototype.draw.apply(this, arguments);'],[0,'        if (shouldDraw) {'],[-1,'            \/\/ The layer\'s reproject option is deprecated.'],[0,'            if (this.layer != this.layer.map.baseLayer &amp;&amp; this.layer.reproject) {'],[-1,'                \/\/ getBoundsFromBaseLayer is defined in deprecated.js.'],[0,'                this.bounds = this.getBoundsFromBaseLayer(this.position);'],[-1,'            }'],[0,'            if (this.isLoading) {'],[-1,'                \/\/if we\'re already loading, send \'reload\' instead of \'loadstart\'.'],[0,'                this._loadEvent = \&quot;reload\&quot;;'],[-1,'            } else {'],[0,'                this.isLoading = true;'],[0,'                this._loadEvent = \&quot;loadstart\&quot;;'],[-1,'            }'],[0,'            this.renderTile();'],[0,'            this.positionTile();'],[0,'        } else if (shouldDraw === false) {'],[0,'            this.unload();'],[-1,'        }'],[0,'        return shouldDraw;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: renderTile'],[-1,'     * Internal function to actually initialize the image tile,'],[-1,'     *     position it correctly, and set its url.'],[-1,'     *\/'],[-1,'    renderTile: function() {'],[0,'        if (this.layer.async) {'],[-1,'            \/\/ Asynchronous image requests call the asynchronous getURL method'],[-1,'            \/\/ on the layer to fetch an image that covers \'this.bounds\'.'],[0,'            var id = this.asyncRequestId = (this.asyncRequestId || 0) + 1;'],[0,'            this.layer.getURLasync(this.bounds, function(url) {'],[0,'                if (id == this.asyncRequestId) {'],[0,'                    this.url = url;'],[0,'                    this.initImage();'],[-1,'                }'],[-1,'            }, this);'],[-1,'        } else {'],[-1,'            \/\/ synchronous image requests get the url immediately.'],[0,'            this.url = this.layer.getURL(this.bounds);'],[0,'            this.initImage();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: positionTile'],[-1,'     * Using the properties currenty set on the layer, position the tile correctly.'],[-1,'     * This method is used both by the async and non-async versions of the Tile.Image'],[-1,'     * code.'],[-1,'     *\/'],[-1,'    positionTile: function() {'],[0,'        var style = this.getTile().style,'],[-1,'            size = this.frame ? this.size :'],[-1,'                this.layer.getImageSize(this.bounds),'],[-1,'            ratio = 1;'],[0,'        if (this.layer instanceof OpenLayers.Layer.Grid) {'],[0,'            ratio = this.layer.getServerResolution() \/ this.layer.map.getResolution();'],[-1,'        }'],[0,'        style.left = this.position.x + \&quot;px\&quot;;'],[0,'        style.top = this.position.y + \&quot;px\&quot;;'],[0,'        style.width = Math.round(ratio * size.w) + \&quot;px\&quot;;'],[0,'        style.height = Math.round(ratio * size.h) + \&quot;px\&quot;;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: clear'],[-1,'     * Remove the tile from the DOM, clear it of any image related data so that'],[-1,'     * it can be reused in a new location.'],[-1,'     *\/'],[-1,'    clear: function() {'],[0,'        OpenLayers.Tile.prototype.clear.apply(this, arguments);'],[0,'        var img = this.imgDiv;'],[0,'        if (img) {'],[0,'            var tile = this.getTile();'],[0,'            if (tile.parentNode === this.layer.div) {'],[0,'                this.layer.div.removeChild(tile);'],[-1,'            }'],[0,'            this.setImgSrc();'],[0,'            if (this.layerAlphaHack === true) {'],[0,'                img.style.filter = \&quot;\&quot;;'],[-1,'            }'],[0,'            OpenLayers.Element.removeClass(img, \&quot;olImageLoadError\&quot;);'],[-1,'        }'],[0,'        this.canvasContext = null;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getImage'],[-1,'     * Returns or creates and returns the tile image.'],[-1,'     *\/'],[-1,'    getImage: function() {'],[0,'        if (!this.imgDiv) {'],[0,'            this.imgDiv = OpenLayers.Tile.Image.IMAGE.cloneNode(false);'],[-1,''],[0,'            var style = this.imgDiv.style;'],[0,'            if (this.frame) {'],[0,'                var left = 0, top = 0;'],[0,'                if (this.layer.gutter) {'],[0,'                    left = this.layer.gutter \/ this.layer.tileSize.w * 100;'],[0,'                    top = this.layer.gutter \/ this.layer.tileSize.h * 100;'],[-1,'                }'],[0,'                style.left = -left + \&quot;%\&quot;;'],[0,'                style.top = -top + \&quot;%\&quot;;'],[0,'                style.width = (2 * left + 100) + \&quot;%\&quot;;'],[0,'                style.height = (2 * top + 100) + \&quot;%\&quot;;'],[-1,'            }'],[0,'            style.visibility = \&quot;hidden\&quot;;'],[0,'            style.opacity = 0;'],[0,'            if (this.layer.opacity &lt; 1) {'],[0,'                style.filter = \'alpha(opacity=\' +'],[-1,'                               (this.layer.opacity * 100) +'],[-1,'                               \')\';'],[-1,'            }'],[0,'            style.position = \&quot;absolute\&quot;;'],[0,'            if (this.layerAlphaHack) {'],[-1,'                \/\/ move the image out of sight'],[0,'                style.paddingTop = style.height;'],[0,'                style.height = \&quot;0\&quot;;'],[0,'                style.width = \&quot;100%\&quot;;'],[-1,'            }'],[0,'            if (this.frame) {'],[0,'                this.frame.appendChild(this.imgDiv);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        return this.imgDiv;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setImage'],[-1,'     * Sets the image element for this tile. This method should only be called'],[-1,'     * from beforeload listeners.'],[-1,'     *'],[-1,'     * Parameters'],[-1,'     * img - {HTMLImageElement} The image to use for this tile.'],[-1,'     *\/'],[-1,'    setImage: function(img) {'],[0,'        this.imgDiv = img;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: initImage'],[-1,'     * Creates the content for the frame on the tile.'],[-1,'     *\/'],[-1,'    initImage: function() {'],[0,'        this.events.triggerEvent(\'beforeload\');'],[0,'        this.layer.div.appendChild(this.getTile());'],[0,'        this.events.triggerEvent(this._loadEvent);'],[0,'        var img = this.getImage();'],[0,'        if (this.url &amp;&amp; img.getAttribute(\&quot;src\&quot;) == this.url) {'],[0,'            this._loadTimeout = window.setTimeout('],[-1,'                OpenLayers.Function.bind(this.onImageLoad, this), 0'],[-1,'            );'],[-1,'        } else {'],[0,'            this.stopLoading();'],[0,'            if (this.crossOriginKeyword) {'],[0,'                img.removeAttribute(\&quot;crossorigin\&quot;);'],[-1,'            }'],[0,'            OpenLayers.Event.observe(img, \&quot;load\&quot;,'],[-1,'                OpenLayers.Function.bind(this.onImageLoad, this)'],[-1,'            );'],[0,'            OpenLayers.Event.observe(img, \&quot;error\&quot;,'],[-1,'                OpenLayers.Function.bind(this.onImageError, this)'],[-1,'            );'],[0,'            this.imageReloadAttempts = 0;'],[0,'            this.setImgSrc(this.url);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setImgSrc'],[-1,'     * Sets the source for the tile image'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * url - {String} or undefined to hide the image'],[-1,'     *\/'],[-1,'    setImgSrc: function(url) {'],[0,'        var img = this.imgDiv;'],[0,'        if (url) {'],[0,'            img.style.visibility = \'hidden\';'],[0,'            img.style.opacity = 0;'],[-1,'            \/\/ don\'t set crossOrigin if the url is a data URL'],[0,'            if (this.crossOriginKeyword) {'],[0,'                if (url.substr(0, 5) !== \'data:\') {'],[0,'                    img.setAttribute(\&quot;crossorigin\&quot;, this.crossOriginKeyword);'],[-1,'                } else {'],[0,'                    img.removeAttribute(\&quot;crossorigin\&quot;);'],[-1,'                }'],[-1,'            }'],[0,'            img.src = url;'],[-1,'        } else {'],[-1,'            \/\/ Remove reference to the image, and leave it to the browser\'s'],[-1,'            \/\/ caching and garbage collection.'],[0,'            this.stopLoading();'],[0,'            this.imgDiv = null;'],[0,'            if (img.parentNode) {'],[0,'                img.parentNode.removeChild(img);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getTile'],[-1,'     * Get the tile\'s markup.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The tile\'s markup'],[-1,'     *\/'],[-1,'    getTile: function() {'],[0,'        return this.frame ? this.frame : this.getImage();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createBackBuffer'],[-1,'     * Create a backbuffer for this tile. A backbuffer isn\'t exactly a clone'],[-1,'     * of the tile\'s markup, because we want to avoid the reloading of the'],[-1,'     * image. So we clone the frame, and steal the image from the tile.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The markup, or undefined if the tile has no image'],[-1,'     * or if it\'s currently loading.'],[-1,'     *\/'],[-1,'    createBackBuffer: function() {'],[0,'        if (!this.imgDiv || this.isLoading) {'],[0,'            return;'],[-1,'        }'],[0,'        var backBuffer;'],[0,'        if (this.frame) {'],[0,'            backBuffer = this.frame.cloneNode(false);'],[0,'            backBuffer.appendChild(this.imgDiv);'],[-1,'        } else {'],[0,'            backBuffer = this.imgDiv;'],[-1,'        }'],[0,'        this.imgDiv = null;'],[0,'        return backBuffer;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: onImageLoad'],[-1,'     * Handler for the image onload event'],[-1,'     *\/'],[-1,'    onImageLoad: function() {'],[0,'        var img = this.imgDiv;'],[0,'        this.stopLoading();'],[0,'        img.style.visibility = \'inherit\';'],[0,'        img.style.opacity = this.layer.opacity;'],[0,'        this.isLoading = false;'],[0,'        this.canvasContext = null;'],[0,'        this.events.triggerEvent(\&quot;loadend\&quot;);'],[-1,''],[0,'        if (this.layerAlphaHack === true) {'],[0,'            img.style.filter ='],[-1,'                \&quot;progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\'\&quot; +'],[-1,'                img.src + \&quot;\', sizingMethod=\'scale\')\&quot;;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onImageError'],[-1,'     * Handler for the image onerror event'],[-1,'     *\/'],[-1,'    onImageError: function() {'],[0,'        var img = this.imgDiv;'],[0,'        if (img.src != null) {'],[0,'            this.imageReloadAttempts++;'],[0,'            if (this.imageReloadAttempts &lt;= OpenLayers.IMAGE_RELOAD_ATTEMPTS) {'],[0,'                this.setImgSrc(this.layer.getURL(this.bounds));'],[-1,'            } else {'],[0,'                OpenLayers.Element.addClass(img, \&quot;olImageLoadError\&quot;);'],[0,'                this.events.triggerEvent(\&quot;loaderror\&quot;);'],[0,'                this.onImageLoad();'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: stopLoading'],[-1,'     * Stops a loading sequence so &lt;onImageLoad&gt; won\'t be executed.'],[-1,'     *\/'],[-1,'    stopLoading: function() {'],[0,'        OpenLayers.Event.stopObservingElement(this.imgDiv);'],[0,'        window.clearTimeout(this._loadTimeout);'],[0,'        delete this._loadTimeout;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getCanvasContext'],[-1,'     * Returns a canvas context associated with the tile image (with'],[-1,'     * the image drawn on it).'],[-1,'     * Returns undefined if the browser does not support canvas, if'],[-1,'     * the tile has no image or if it\'s currently loading.'],[-1,'     *'],[-1,'     * The function returns a canvas context instance but the'],[-1,'     * underlying canvas is still available in the \'canvas\' property:'],[-1,'     * (code)'],[-1,'     * var context = tile.getCanvasContext();'],[-1,'     * if (context) {'],[-1,'     *     var data = context.canvas.toDataURL(\'image\/jpeg\');'],[-1,'     * }'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    getCanvasContext: function() {'],[0,'        if (OpenLayers.CANVAS_SUPPORTED &amp;&amp; this.imgDiv &amp;&amp; !this.isLoading) {'],[0,'            if (!this.canvasContext) {'],[0,'                var canvas = document.createElement(\&quot;canvas\&quot;);'],[0,'                canvas.width = this.size.w;'],[0,'                canvas.height = this.size.h;'],[0,'                this.canvasContext = canvas.getContext(\&quot;2d\&quot;);'],[0,'                this.canvasContext.drawImage(this.imgDiv, 0, 0);'],[-1,'            }'],[0,'            return this.canvasContext;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Tile.Image\&quot;'],[-1,''],[-1,'});'],[-1,''],[-1,'\/** '],[-1,' * Constant: OpenLayers.Tile.Image.IMAGE'],[-1,' * {HTMLImageElement} The image for a tile.'],[-1,' *\/'],[1,'OpenLayers.Tile.Image.IMAGE = (function() {'],[1,'    var img = new Image();'],[1,'    img.className = \&quot;olTileImage\&quot;;'],[-1,'    \/\/ avoid image gallery menu in IE6'],[1,'    img.galleryImg = \&quot;no\&quot;;'],[1,'    return img;'],[-1,'}());'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/Grid.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/HTTPRequest.js'],[-1,' * @requires OpenLayers\/Tile\/Image.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.Grid'],[-1,' * Base class for layers that use a lattice of tiles.  Create a new grid'],[-1,' * layer with the &lt;OpenLayers.Layer.Grid&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.HTTPRequest&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.Grid = OpenLayers.Class(OpenLayers.Layer.HTTPRequest, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: tileSize'],[-1,'     * {&lt;OpenLayers.Size&gt;}'],[-1,'     *\/'],[-1,'    tileSize: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: tileOriginCorner'],[-1,'     * {String} If the &lt;tileOrigin&gt; property is not provided, the tile origin '],[-1,'     *     will be derived from the layer\'s &lt;maxExtent&gt;.  The corner of the '],[-1,'     *     &lt;maxExtent&gt; used is determined by this property.  Acceptable values'],[-1,'     *     are \&quot;tl\&quot; (top left), \&quot;tr\&quot; (top right), \&quot;bl\&quot; (bottom left), and \&quot;br\&quot;'],[-1,'     *     (bottom right).  Default is \&quot;bl\&quot;.'],[-1,'     *\/'],[-1,'    tileOriginCorner: \&quot;bl\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: tileOrigin'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} Optional origin for aligning the grid of tiles.'],[-1,'     *     If provided, requests for tiles at all resolutions will be aligned'],[-1,'     *     with this location (no tiles shall overlap this location).  If'],[-1,'     *     not provided, the grid of tiles will be aligned with the layer\'s'],[-1,'     *     &lt;maxExtent&gt;.  Default is ``null``.'],[-1,'     *\/'],[-1,'    tileOrigin: null,'],[-1,'    '],[-1,'    \/** APIProperty: tileOptions'],[-1,'     *  {Object} optional configuration options for &lt;OpenLayers.Tile&gt; instances'],[-1,'     *  created by this Layer, if supported by the tile class.'],[-1,'     *\/'],[-1,'    tileOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: tileClass'],[-1,'     * {&lt;OpenLayers.Tile&gt;} The tile class to use for this layer.'],[-1,'     *     Defaults is OpenLayers.Tile.Image.'],[-1,'     *\/'],[-1,'    tileClass: OpenLayers.Tile.Image,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: grid'],[-1,'     * {Array(Array(&lt;OpenLayers.Tile&gt;))} This is an array of rows, each row is '],[-1,'     *     an array of tiles.'],[-1,'     *\/'],[-1,'    grid: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: singleTile'],[-1,'     * {Boolean} Moves the layer into single-tile mode, meaning that one tile '],[-1,'     *     will be loaded. The tile\'s size will be determined by the \'ratio\''],[-1,'     *     property. When the tile is dragged such that it does not cover the '],[-1,'     *     entire viewport, it is reloaded.'],[-1,'     *\/'],[-1,'    singleTile: false,'],[-1,''],[-1,'    \/** APIProperty: ratio'],[-1,'     *  {Float} Used only when in single-tile mode, this specifies the '],[-1,'     *          ratio of the size of the single tile to the size of the map.'],[-1,'     *          Default value is 1.5.'],[-1,'     *\/'],[-1,'    ratio: 1.5,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: buffer'],[-1,'     * {Integer} Used only when in gridded mode, this specifies the number of '],[-1,'     *           extra rows and colums of tiles on each side which will'],[-1,'     *           surround the minimum grid tiles to cover the map.'],[-1,'     *           For very slow loading layers, a larger value may increase'],[-1,'     *           performance somewhat when dragging, but will increase bandwidth'],[-1,'     *           use significantly. '],[-1,'     *\/'],[-1,'    buffer: 0,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: transitionEffect'],[-1,'     * {String} The transition effect to use when the map is zoomed.'],[-1,'     * Two posible values:'],[-1,'     *'],[-1,'     * \&quot;resize\&quot; - Existing tiles are resized on zoom to provide a visual'],[-1,'     *     effect of the zoom having taken place immediately.  As the'],[-1,'     *     new tiles become available, they are drawn on top of the'],[-1,'     *     resized tiles (this is the default setting).'],[-1,'     * \&quot;map-resize\&quot; - Existing tiles are resized on zoom and placed below the'],[-1,'     *     base layer.  New tiles for the base layer will cover existing tiles.'],[-1,'     *     This setting is recommended when having an overlay duplicated during'],[-1,'     *     the transition is undesirable (e.g. street labels or big transparent'],[-1,'     *     fills). '],[-1,'     * null - No transition effect.'],[-1,'     *'],[-1,'     * Using \&quot;resize\&quot; on non-opaque layers can cause undesired visual'],[-1,'     * effects.  Set transitionEffect to null in this case.'],[-1,'     *\/'],[-1,'    transitionEffect: \&quot;resize\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: numLoadingTiles'],[-1,'     * {Integer} How many tiles are still loading?'],[-1,'     *\/'],[-1,'    numLoadingTiles: 0,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: serverResolutions'],[-1,'     * {Array(Number}} This property is documented in subclasses as'],[-1,'     *     an API property.'],[-1,'     *\/'],[-1,'    serverResolutions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: loading'],[-1,'     * {Boolean} Indicates if tiles are being loaded.'],[-1,'     *\/'],[-1,'    loading: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: backBuffer'],[-1,'     * {DOMElement} The back buffer.'],[-1,'     *\/'],[-1,'    backBuffer: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: gridResolution'],[-1,'     * {Number} The resolution of the current grid. Used for backbuffer and'],[-1,'     *     client zoom. This property is updated every time the grid is'],[-1,'     *     initialized.'],[-1,'     *\/'],[-1,'    gridResolution: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: backBufferResolution'],[-1,'     * {Number} The resolution of the current back buffer. This property is'],[-1,'     *     updated each time a back buffer is created.'],[-1,'     *\/'],[-1,'    backBufferResolution: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: backBufferLonLat'],[-1,'     * {Object} The top-left corner of the current back buffer. Includes lon'],[-1,'     *     and lat properties. This object is updated each time a back buffer'],[-1,'     *     is created.'],[-1,'     *\/'],[-1,'    backBufferLonLat: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: backBufferTimerId'],[-1,'     * {Number} The id of the back buffer timer. This timer is used to'],[-1,'     *     delay the removal of the back buffer, thereby preventing'],[-1,'     *     flash effects caused by tile animation.'],[-1,'     *\/'],[-1,'    backBufferTimerId: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: removeBackBufferDelay'],[-1,'     * {Number} Delay for removing the backbuffer when all tiles have finished'],[-1,'     *     loading. Can be set to 0 when no css opacity transitions for the'],[-1,'     *     olTileImage class are used. Default is 0 for &lt;singleTile&gt; layers,'],[-1,'     *     2500 for tiled layers. See &lt;className&gt; for more information on'],[-1,'     *     tile animation.'],[-1,'     *\/'],[-1,'    removeBackBufferDelay: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: className'],[-1,'     * {String} Name of the class added to the layer div. If not set in the'],[-1,'     *     options passed to the constructor then className defaults to'],[-1,'     *     \&quot;olLayerGridSingleTile\&quot; for single tile layers (see &lt;singleTile&gt;),'],[-1,'     *     and \&quot;olLayerGrid\&quot; for non single tile layers.'],[-1,'     *'],[-1,'     * Note:'],[-1,'     *'],[-1,'     * The displaying of tiles is not animated by default for single tile'],[-1,'     *     layers - OpenLayers\' default theme (style.css) includes this:'],[-1,'     * (code)'],[-1,'     * .olLayerGrid .olTileImage {'],[-1,'     *     -webkit-transition: opacity 0.2s linear;'],[-1,'     *     -moz-transition: opacity 0.2s linear;'],[-1,'     *     -o-transition: opacity 0.2s linear;'],[-1,'     *     transition: opacity 0.2s linear;'],[-1,'     *  }'],[-1,'     * (end)'],[-1,'     * To animate tile displaying for any grid layer the following'],[-1,'     *     CSS rule can be used:'],[-1,'     * (code)'],[-1,'     * .olTileImage {'],[-1,'     *     -webkit-transition: opacity 0.2s linear;'],[-1,'     *     -moz-transition: opacity 0.2s linear;'],[-1,'     *     -o-transition: opacity 0.2s linear;'],[-1,'     *     transition: opacity 0.2s linear;'],[-1,'     * }'],[-1,'     * (end)'],[-1,'     * In that case, to avoid flash effects, &lt;removeBackBufferDelay&gt;'],[-1,'     *     should not be zero.'],[-1,'     *\/'],[-1,'    className: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * layer.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Listeners will be called with a reference to an event object.  The'],[-1,'     *     properties of this event depends on exactly what happened.'],[-1,'     *'],[-1,'     * All event objects have at least the following properties:'],[-1,'     * object - {Object} A reference to layer.events.object.'],[-1,'     * element - {DOMElement} A reference to layer.events.element.'],[-1,'     *'],[-1,'     * Supported event types:'],[-1,'     * addtile - Triggered when a tile is added to this layer. Listeners receive'],[-1,'     *     an object as first argument, which has a tile property that'],[-1,'     *     references the tile that has been added.'],[-1,'     * tileloadstart - Triggered when a tile starts loading. Listeners receive'],[-1,'     *     an object as first argument, which has a tile property that'],[-1,'     *     references the tile that starts loading.'],[-1,'     * tileloaded - Triggered when each new tile is'],[-1,'     *     loaded, as a means of progress update to listeners.'],[-1,'     *     listeners can access \'numLoadingTiles\' if they wish to keep'],[-1,'     *     track of the loading progress. Listeners are called with an object'],[-1,'     *     with a \'tile\' property as first argument, making the loaded tile'],[-1,'     *     available to the listener, and an \'aborted\' property, which will be'],[-1,'     *     true when loading was aborted and no tile data is available.'],[-1,'     * tileerror - Triggered before the tileloaded event (i.e. when the tile is'],[-1,'     *     still hidden) if a tile failed to load. Listeners receive an object'],[-1,'     *     as first argument, which has a tile property that references the'],[-1,'     *     tile that could not be loaded.'],[-1,'     * retile - Triggered when the layer recreates its tile grid.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: gridLayout'],[-1,'     * {Object} Object containing properties tilelon, tilelat, startcol,'],[-1,'     * startrow'],[-1,'     *\/'],[-1,'    gridLayout: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: rowSign'],[-1,'     * {Number} 1 for grids starting at the top, -1 for grids starting at the'],[-1,'     * bottom. This is used for several grid index and offset calculations.'],[-1,'     *\/'],[-1,'    rowSign: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: transitionendEvents'],[-1,'     * {Array} Event names for transitionend'],[-1,'     *\/'],[-1,'    transitionendEvents: ['],[-1,'        \'transitionend\', \'webkitTransitionEnd\', \'otransitionend\','],[-1,'        \'oTransitionEnd\''],[-1,'    ],'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.Grid'],[-1,'     * Create a new grid layer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String}'],[-1,'     * url - {String}'],[-1,'     * params - {Object}'],[-1,'     * options - {Object} Hashtable of extra options to tag onto the layer'],[-1,'     *\/'],[-1,'    initialize: function(name, url, params, options) {'],[0,'        OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this, '],[-1,'                                                                arguments);'],[0,'        this.grid = [];'],[0,'        this._removeBackBuffer = OpenLayers.Function.bind(this.removeBackBuffer, this);'],[-1,''],[0,'        this.initProperties();'],[-1,''],[0,'        this.rowSign = this.tileOriginCorner.substr(0, 1) === \&quot;t\&quot; ? 1 : -1;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: initProperties'],[-1,'     * Set any properties that depend on the value of singleTile.'],[-1,'     * Currently sets removeBackBufferDelay and className'],[-1,'     *\/'],[-1,'    initProperties: function() {'],[0,'        if (this.options.removeBackBufferDelay === undefined) {'],[0,'            this.removeBackBufferDelay = this.singleTile ? 0 : 2500;'],[-1,'        }'],[-1,''],[0,'        if (this.options.className === undefined) {'],[0,'            this.className = this.singleTile ? \'olLayerGridSingleTile\' :'],[-1,'                                               \'olLayerGrid\';'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} The map.'],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this, map);'],[0,'        OpenLayers.Element.addClass(this.div, this.className);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: removeMap'],[-1,'     * Called when the layer is removed from the map.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} The map.'],[-1,'     *\/'],[-1,'    removeMap: function(map) {'],[0,'        this.removeBackBuffer();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Deconstruct the layer and clear the grid.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.removeBackBuffer();'],[0,'        this.clearGrid();'],[-1,''],[0,'        this.grid = null;'],[0,'        this.tileSize = null;'],[0,'        OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this, arguments); '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: mergeNewParams'],[-1,'     * Refetches tiles with new params merged, keeping a backbuffer. Each'],[-1,'     * loading new tile will have a css class of \'.olTileReplacing\'. If a'],[-1,'     * stylesheet applies a \'display: none\' style to that class, any fade-in'],[-1,'     * transition will not apply, and backbuffers for each tile will be removed'],[-1,'     * as soon as the tile is loaded.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * newParams - {Object}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * redrawn: {Boolean} whether the layer was actually redrawn.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clearGrid'],[-1,'     * Go through and remove all tiles from the grid, calling'],[-1,'     *    destroy() on each of them to kill circular references'],[-1,'     *\/'],[-1,'    clearGrid:function() {'],[0,'        if (this.grid) {'],[0,'            for(var iRow=0, len=this.grid.length; iRow&lt;len; iRow++) {'],[0,'                var row = this.grid[iRow];'],[0,'                for(var iCol=0, clen=row.length; iCol&lt;clen; iCol++) {'],[0,'                    var tile = row[iCol];'],[0,'                    this.destroyTile(tile);'],[-1,'                }'],[-1,'            }'],[0,'            this.grid = [];'],[0,'            this.gridResolution = null;'],[0,'            this.gridLayout = null;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'   \/**'],[-1,'    * APIMethod: addOptions'],[-1,'    * '],[-1,'    * Parameters:'],[-1,'    * newOptions - {Object}'],[-1,'    * reinitialize - {Boolean} If set to true, and if resolution options of the'],[-1,'    *     current baseLayer were changed, the map will be recentered to make'],[-1,'    *     sure that it is displayed with a valid resolution, and a'],[-1,'    *     changebaselayer event will be triggered.'],[-1,'    *\/'],[-1,'    addOptions: function (newOptions, reinitialize) {'],[0,'        var singleTileChanged = newOptions.singleTile !== undefined &amp;&amp; '],[-1,'            newOptions.singleTile !== this.singleTile;'],[0,'        OpenLayers.Layer.HTTPRequest.prototype.addOptions.apply(this, arguments);'],[0,'        if (this.map &amp;&amp; singleTileChanged) {'],[0,'            this.initProperties();'],[0,'            this.clearGrid();'],[0,'            this.tileSize = this.options.tileSize;'],[0,'            this.setTileSize();'],[0,'            this.moveTo(null, true);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Create a clone of this layer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object} Is this ever used?'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.Grid&gt;} An exact clone of this OpenLayers.Layer.Grid'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[-1,'        '],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.Grid(this.name,'],[-1,'                                            this.url,'],[-1,'                                            this.params,'],[-1,'                                            this.getOptions());'],[-1,'        }'],[-1,''],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this, [obj]);'],[-1,''],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[0,'        if (this.tileSize != null) {'],[0,'            obj.tileSize = this.tileSize.clone();'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ we do not want to copy reference to grid, so we make a new array'],[0,'        obj.grid = [];'],[0,'        obj.gridResolution = null;'],[-1,'        \/\/ same for backbuffer'],[0,'        obj.backBuffer = null;'],[0,'        obj.backBufferTimerId = null;'],[0,'        obj.loading = false;'],[0,'        obj.numLoadingTiles = 0;'],[-1,''],[0,'        return obj;'],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     * This function is called whenever the map is moved. All the moving'],[-1,'     * of actual \'tiles\' is done by the map, but moveTo\'s role is to accept'],[-1,'     * a bounds and make sure the data that that bounds requires is pre-loaded.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * zoomChanged - {Boolean}'],[-1,'     * dragging - {Boolean}'],[-1,'     *\/'],[-1,'    moveTo:function(bounds, zoomChanged, dragging) {'],[-1,''],[0,'        OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this, arguments);'],[-1,''],[0,'        bounds = bounds || this.map.getExtent();'],[-1,''],[0,'        if (bounds != null) {'],[-1,'             '],[-1,'            \/\/ if grid is empty or zoom has changed, we *must* re-tile'],[0,'            var forceReTile = !this.grid.length || zoomChanged;'],[-1,'            '],[-1,'            \/\/ total bounds of the tiles'],[0,'            var tilesBounds = this.getTilesBounds();            '],[-1,''],[-1,'            \/\/ the new map resolution'],[0,'            var resolution = this.map.getResolution();'],[-1,''],[-1,'            \/\/ the server-supported resolution for the new map resolution'],[0,'            var serverResolution = this.getServerResolution(resolution);'],[-1,''],[0,'            if (this.singleTile) {'],[-1,'                '],[-1,'                \/\/ We want to redraw whenever even the slightest part of the '],[-1,'                \/\/  current bounds is not contained by our tile.'],[-1,'                \/\/  (thus, we do not specify partial -- its default is false)'],[-1,''],[0,'                if ( forceReTile ||'],[-1,'                     (!dragging &amp;&amp; !tilesBounds.containsBounds(bounds))) {'],[-1,''],[-1,'                    \/\/ In single tile mode with no transition effect, we insert'],[-1,'                    \/\/ a non-scaled backbuffer when the layer is moved. But if'],[-1,'                    \/\/ a zoom occurs right after a move, i.e. before the new'],[-1,'                    \/\/ image is received, we need to remove the backbuffer, or'],[-1,'                    \/\/ an ill-positioned image will be visible during the zoom'],[-1,'                    \/\/ transition.'],[-1,''],[0,'                    if(zoomChanged &amp;&amp; this.transitionEffect !== \'resize\') {'],[0,'                        this.removeBackBuffer();'],[-1,'                    }'],[-1,''],[0,'                    if(!zoomChanged || this.transitionEffect === \'resize\') {'],[0,'                        this.applyBackBuffer(resolution);'],[-1,'                    }'],[-1,''],[0,'                    this.initSingleTile(bounds);'],[-1,'                }'],[-1,'            } else {'],[-1,''],[-1,'                \/\/ if the bounds have changed such that they are not even '],[-1,'                \/\/ *partially* contained by our tiles (e.g. when user has '],[-1,'                \/\/ programmatically panned to the other side of the earth on'],[-1,'                \/\/ zoom level 18), then moveGriddedTiles could potentially have'],[-1,'                \/\/ to run through thousands of cycles, so we want to reTile'],[-1,'                \/\/ instead (thus, partial true).  '],[0,'                forceReTile = forceReTile ||'],[-1,'                    !tilesBounds.intersectsBounds(bounds, {'],[-1,'                        worldBounds: this.map.baseLayer.wrapDateLine &amp;&amp;'],[-1,'                            this.map.getMaxExtent()'],[-1,'                    });'],[-1,''],[0,'                if(forceReTile) {'],[0,'                    if(zoomChanged &amp;&amp; (this.transitionEffect === \'resize\' ||'],[-1,'                                          this.gridResolution === resolution)) {'],[0,'                        this.applyBackBuffer(resolution);'],[-1,'                    }'],[0,'                    this.initGriddedTiles(bounds);'],[-1,'                } else {'],[0,'                    this.moveGriddedTiles();'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getTileData'],[-1,'     * Given a map location, retrieve a tile and the pixel offset within that'],[-1,'     *     tile corresponding to the location.  If there is not an existing '],[-1,'     *     tile in the grid that covers the given location, null will be '],[-1,'     *     returned.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * loc - {&lt;OpenLayers.LonLat&gt;} map location'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Object with the following properties: tile ({&lt;OpenLayers.Tile&gt;}),'],[-1,'     *     i ({Number} x-pixel offset from top left), and j ({Integer} y-pixel'],[-1,'     *     offset from top left).'],[-1,'     *\/'],[-1,'    getTileData: function(loc) {'],[0,'        var data = null,'],[-1,'            x = loc.lon,'],[-1,'            y = loc.lat,'],[-1,'            numRows = this.grid.length;'],[-1,''],[0,'        if (this.map &amp;&amp; numRows) {'],[0,'            var res = this.map.getResolution(),'],[-1,'                tileWidth = this.tileSize.w,'],[-1,'                tileHeight = this.tileSize.h,'],[-1,'                bounds = this.grid[0][0].bounds,'],[-1,'                left = bounds.left,'],[-1,'                top = bounds.top;'],[-1,''],[0,'            if (x &lt; left) {'],[-1,'                \/\/ deal with multiple worlds'],[0,'                if (this.map.baseLayer.wrapDateLine) {'],[0,'                    var worldWidth = this.map.getMaxExtent().getWidth();'],[0,'                    var worldsAway = Math.ceil((left - x) \/ worldWidth);'],[0,'                    x += worldWidth * worldsAway;'],[-1,'                }'],[-1,'            }'],[-1,'            \/\/ tile distance to location (fractional number of tiles);'],[0,'            var dtx = (x - left) \/ (res * tileWidth);'],[0,'            var dty = (top - y) \/ (res * tileHeight);'],[-1,'            \/\/ index of tile in grid'],[0,'            var col = Math.floor(dtx);'],[0,'            var row = Math.floor(dty);'],[0,'            if (row &gt;= 0 &amp;&amp; row &lt; numRows) {'],[0,'                var tile = this.grid[row][col];'],[0,'                if (tile) {'],[0,'                    data = {'],[-1,'                        tile: tile,'],[-1,'                        \/\/ pixel index within tile'],[-1,'                        i: Math.floor((dtx - col) * tileWidth),'],[-1,'                        j: Math.floor((dty - row) * tileHeight)'],[-1,'                    };                    '],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return data;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroyTile'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * tile - {&lt;OpenLayers.Tile&gt;}'],[-1,'     *\/'],[-1,'    destroyTile: function(tile) {'],[0,'        this.removeTileMonitoringHooks(tile);'],[0,'        tile.destroy();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getServerResolution'],[-1,'     * Return the closest server-supported resolution.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * resolution - {Number} The base resolution. If undefined the'],[-1,'     *     map resolution is used.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number} The closest server resolution value.'],[-1,'     *\/'],[-1,'    getServerResolution: function(resolution) {'],[0,'        var distance = Number.POSITIVE_INFINITY;'],[0,'        resolution = resolution || this.map.getResolution();'],[0,'        if(this.serverResolutions &amp;&amp;'],[-1,'           OpenLayers.Util.indexOf(this.serverResolutions, resolution) === -1) {'],[0,'            var i, newDistance, newResolution, serverResolution;'],[0,'            for(i=this.serverResolutions.length-1; i&gt;= 0; i--) {'],[0,'                newResolution = this.serverResolutions[i];'],[0,'                newDistance = Math.abs(newResolution - resolution);'],[0,'                if (newDistance &gt; distance) {'],[0,'                    break;'],[-1,'                }'],[0,'                distance = newDistance;'],[0,'                serverResolution = newResolution;'],[-1,'            }'],[0,'            resolution = serverResolution;'],[-1,'        }'],[0,'        return resolution;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getServerZoom'],[-1,'     * Return the zoom value corresponding to the best matching server'],[-1,'     * resolution, taking into account &lt;serverResolutions&gt; and &lt;zoomOffset&gt;.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number} The closest server supported zoom. This is not the map zoom'],[-1,'     *     level, but an index of the server\'s resolutions array.'],[-1,'     *\/'],[-1,'    getServerZoom: function() {'],[0,'        var resolution = this.getServerResolution();'],[0,'        return this.serverResolutions ?'],[-1,'            OpenLayers.Util.indexOf(this.serverResolutions, resolution) :'],[-1,'            this.map.getZoomForResolution(resolution) + (this.zoomOffset || 0);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: applyBackBuffer'],[-1,'     * Create, insert, scale and position a back buffer for the layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * resolution - {Number} The resolution to transition to.'],[-1,'     *\/'],[-1,'    applyBackBuffer: function(resolution) {'],[0,'        if(this.backBufferTimerId !== null) {'],[0,'            this.removeBackBuffer();'],[-1,'        }'],[0,'        var backBuffer = this.backBuffer;'],[0,'        if(!backBuffer) {'],[0,'            backBuffer = this.createBackBuffer();'],[0,'            if(!backBuffer) {'],[0,'                return;'],[-1,'            }'],[0,'            if (resolution === this.gridResolution) {'],[0,'                this.div.insertBefore(backBuffer, this.div.firstChild);'],[-1,'            } else {'],[0,'                this.map.baseLayer.div.parentNode.insertBefore(backBuffer, this.map.baseLayer.div);'],[-1,'            }'],[0,'            this.backBuffer = backBuffer;'],[-1,''],[-1,'            \/\/ set some information in the instance for subsequent'],[-1,'            \/\/ calls to applyBackBuffer where the same back buffer'],[-1,'            \/\/ is reused'],[0,'            var topLeftTileBounds = this.grid[0][0].bounds;'],[0,'            this.backBufferLonLat = {'],[-1,'                lon: topLeftTileBounds.left,'],[-1,'                lat: topLeftTileBounds.top'],[-1,'            };'],[0,'            this.backBufferResolution = this.gridResolution;'],[-1,'        }'],[-1,'        '],[0,'        var ratio = this.backBufferResolution \/ resolution;'],[-1,''],[-1,'        \/\/ scale the tiles inside the back buffer'],[0,'        var tiles = backBuffer.childNodes, tile;'],[0,'        for (var i=tiles.length-1; i&gt;=0; --i) {'],[0,'            tile = tiles[i];'],[0,'            tile.style.top = ((ratio * tile._i * tile._h) | 0) + \'px\';'],[0,'            tile.style.left = ((ratio * tile._j * tile._w) | 0) + \'px\';'],[0,'            tile.style.width = Math.round(ratio * tile._w) + \'px\';'],[0,'            tile.style.height = Math.round(ratio * tile._h) + \'px\';'],[-1,'        }'],[-1,''],[-1,'        \/\/ and position it (based on the grid\'s top-left corner)'],[0,'        var position = this.getViewPortPxFromLonLat('],[-1,'                this.backBufferLonLat, resolution);'],[0,'        var leftOffset = this.map.layerContainerOriginPx.x;'],[0,'        var topOffset = this.map.layerContainerOriginPx.y;'],[0,'        backBuffer.style.left = Math.round(position.x - leftOffset) + \'px\';'],[0,'        backBuffer.style.top = Math.round(position.y - topOffset) + \'px\';'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createBackBuffer'],[-1,'     * Create a back buffer.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The DOM element for the back buffer, undefined if the'],[-1,'     * grid isn\'t initialized yet.'],[-1,'     *\/'],[-1,'    createBackBuffer: function() {'],[0,'        var backBuffer;'],[0,'        if(this.grid.length &gt; 0) {'],[0,'            backBuffer = document.createElement(\'div\');'],[0,'            backBuffer.id = this.div.id + \'_bb\';'],[0,'            backBuffer.className = \'olBackBuffer\';'],[0,'            backBuffer.style.position = \'absolute\';'],[0,'            var map = this.map;'],[0,'            backBuffer.style.zIndex = this.transitionEffect === \'resize\' ?'],[-1,'                    this.getZIndex() - 1 :'],[-1,'                    \/\/ \'map-resize\':'],[-1,'                    map.Z_INDEX_BASE.BaseLayer -'],[-1,'                            (map.getNumLayers() - map.getLayerIndex(this));'],[0,'            for(var i=0, lenI=this.grid.length; i&lt;lenI; i++) {'],[0,'                for(var j=0, lenJ=this.grid[i].length; j&lt;lenJ; j++) {'],[0,'                    var tile = this.grid[i][j],'],[-1,'                        markup = this.grid[i][j].createBackBuffer();'],[0,'                    if (markup) {'],[0,'                        markup._i = i;'],[0,'                        markup._j = j;'],[0,'                        markup._w = tile.size.w;'],[0,'                        markup._h = tile.size.h;'],[0,'                        markup.id = tile.id + \'_bb\';'],[0,'                        backBuffer.appendChild(markup);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return backBuffer;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: removeBackBuffer'],[-1,'     * Remove back buffer from DOM.'],[-1,'     *\/'],[-1,'    removeBackBuffer: function() {'],[0,'        if (this._transitionElement) {'],[0,'            for (var i=this.transitionendEvents.length-1; i&gt;=0; --i) {'],[0,'                OpenLayers.Event.stopObserving(this._transitionElement,'],[-1,'                    this.transitionendEvents[i], this._removeBackBuffer);'],[-1,'            }'],[0,'            delete this._transitionElement;'],[-1,'        }'],[0,'        if(this.backBuffer) {'],[0,'            if (this.backBuffer.parentNode) {'],[0,'                this.backBuffer.parentNode.removeChild(this.backBuffer);'],[-1,'            }'],[0,'            this.backBuffer = null;'],[0,'            this.backBufferResolution = null;'],[0,'            if(this.backBufferTimerId !== null) {'],[0,'                window.clearTimeout(this.backBufferTimerId);'],[0,'                this.backBufferTimerId = null;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: moveByPx'],[-1,'     * Move the layer based on pixel vector.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * dx - {Number}'],[-1,'     * dy - {Number}'],[-1,'     *\/'],[-1,'    moveByPx: function(dx, dy) {'],[0,'        if (!this.singleTile) {'],[0,'            this.moveGriddedTiles();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setTileSize'],[-1,'     * Check if we are in singleTile mode and if so, set the size as a ratio'],[-1,'     *     of the map size (as specified by the layer\'s \'ratio\' property).'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * size - {&lt;OpenLayers.Size&gt;}'],[-1,'     *\/'],[-1,'    setTileSize: function(size) { '],[0,'        if (this.singleTile) {'],[0,'            size = this.map.getSize();'],[0,'            size.h = parseInt(size.h * this.ratio, 10);'],[0,'            size.w = parseInt(size.w * this.ratio, 10);'],[-1,'        } '],[0,'        OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this, [size]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getTilesBounds'],[-1,'     * Return the bounds of the tile grid.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} A Bounds object representing the bounds of all the'],[-1,'     *     currently loaded tiles (including those partially or not at all seen '],[-1,'     *     onscreen).'],[-1,'     *\/'],[-1,'    getTilesBounds: function() {    '],[0,'        var bounds = null; '],[-1,'        '],[0,'        var length = this.grid.length;'],[0,'        if (length) {'],[0,'            var bottomLeftTileBounds = this.grid[length - 1][0].bounds,'],[-1,'                width = this.grid[0].length * bottomLeftTileBounds.getWidth(),'],[-1,'                height = this.grid.length * bottomLeftTileBounds.getHeight();'],[-1,'            '],[0,'            bounds = new OpenLayers.Bounds(bottomLeftTileBounds.left, '],[-1,'                                           bottomLeftTileBounds.bottom,'],[-1,'                                           bottomLeftTileBounds.left + width, '],[-1,'                                           bottomLeftTileBounds.bottom + height);'],[-1,'        }   '],[0,'        return bounds;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: initSingleTile'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    initSingleTile: function(bounds) {'],[0,'        this.events.triggerEvent(\&quot;retile\&quot;);'],[-1,''],[-1,'        \/\/determine new tile bounds'],[0,'        var center = bounds.getCenterLonLat();'],[0,'        var tileWidth = bounds.getWidth() * this.ratio;'],[0,'        var tileHeight = bounds.getHeight() * this.ratio;'],[-1,'                                       '],[0,'        var tileBounds = '],[-1,'            new OpenLayers.Bounds(center.lon - (tileWidth\/2),'],[-1,'                                  center.lat - (tileHeight\/2),'],[-1,'                                  center.lon + (tileWidth\/2),'],[-1,'                                  center.lat + (tileHeight\/2));'],[-1,'  '],[0,'        var px = this.map.getLayerPxFromLonLat({'],[-1,'            lon: tileBounds.left,'],[-1,'            lat: tileBounds.top'],[-1,'        });'],[-1,''],[0,'        if (!this.grid.length) {'],[0,'            this.grid[0] = [];'],[-1,'        }'],[-1,''],[0,'        var tile = this.grid[0][0];'],[0,'        if (!tile) {'],[0,'            tile = this.addTile(tileBounds, px);'],[-1,'            '],[0,'            this.addTileMonitoringHooks(tile);'],[0,'            tile.draw();'],[0,'            this.grid[0][0] = tile;'],[-1,'        } else {'],[0,'            tile.moveTo(tileBounds, px);'],[-1,'        }           '],[-1,'        '],[-1,'        \/\/remove all but our single tile'],[0,'        this.removeExcessTiles(1,1);'],[-1,''],[-1,'        \/\/ store the resolution of the grid'],[0,'        this.gridResolution = this.getServerResolution();'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: calculateGridLayout'],[-1,'     * Generate parameters for the grid layout.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bound&gt;|Object} OpenLayers.Bounds or an'],[-1,'     *     object with a \'left\' and \'top\' properties.'],[-1,'     * origin - {&lt;OpenLayers.LonLat&gt;|Object} OpenLayers.LonLat or an'],[-1,'     *     object with a \'lon\' and \'lat\' properties.'],[-1,'     * resolution - {Number}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Object containing properties tilelon, tilelat, startcol,'],[-1,'     * startrow'],[-1,'     *\/'],[-1,'    calculateGridLayout: function(bounds, origin, resolution) {'],[0,'        var tilelon = resolution * this.tileSize.w;'],[0,'        var tilelat = resolution * this.tileSize.h;'],[-1,'        '],[0,'        var offsetlon = bounds.left - origin.lon;'],[0,'        var tilecol = Math.floor(offsetlon\/tilelon) - this.buffer;'],[-1,'        '],[0,'        var rowSign = this.rowSign;'],[-1,''],[0,'        var offsetlat = rowSign * (origin.lat - bounds.top + tilelat);  '],[0,'        var tilerow = Math[~rowSign ? \'floor\' : \'ceil\'](offsetlat\/tilelat) - this.buffer * rowSign;'],[-1,'        '],[0,'        return { '],[-1,'          tilelon: tilelon, tilelat: tilelat,'],[-1,'          startcol: tilecol, startrow: tilerow'],[-1,'        };'],[-1,''],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getTileOrigin'],[-1,'     * Determine the origin for aligning the grid of tiles.  If a &lt;tileOrigin&gt;'],[-1,'     *     property is supplied, that will be returned.  Otherwise, the origin'],[-1,'     *     will be derived from the layer\'s &lt;maxExtent&gt; property.  In this case,'],[-1,'     *     the tile origin will be the corner of the &lt;maxExtent&gt; given by the '],[-1,'     *     &lt;tileOriginCorner&gt; property.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} The tile origin.'],[-1,'     *\/'],[-1,'    getTileOrigin: function() {'],[0,'        var origin = this.tileOrigin;'],[0,'        if (!origin) {'],[0,'            var extent = this.getMaxExtent();'],[0,'            var edges = ({'],[-1,'                \&quot;tl\&quot;: [\&quot;left\&quot;, \&quot;top\&quot;],'],[-1,'                \&quot;tr\&quot;: [\&quot;right\&quot;, \&quot;top\&quot;],'],[-1,'                \&quot;bl\&quot;: [\&quot;left\&quot;, \&quot;bottom\&quot;],'],[-1,'                \&quot;br\&quot;: [\&quot;right\&quot;, \&quot;bottom\&quot;]'],[-1,'            })[this.tileOriginCorner];'],[0,'            origin = new OpenLayers.LonLat(extent[edges[0]], extent[edges[1]]);'],[-1,'        }'],[0,'        return origin;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getTileBoundsForGridIndex'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * row - {Number} The row of the grid'],[-1,'     * col - {Number} The column of the grid'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} The bounds for the tile at (row, col)'],[-1,'     *\/'],[-1,'    getTileBoundsForGridIndex: function(row, col) {'],[0,'        var origin = this.getTileOrigin();'],[0,'        var tileLayout = this.gridLayout;'],[0,'        var tilelon = tileLayout.tilelon;'],[0,'        var tilelat = tileLayout.tilelat;'],[0,'        var startcol = tileLayout.startcol;'],[0,'        var startrow = tileLayout.startrow;'],[0,'        var rowSign = this.rowSign;'],[0,'        return new OpenLayers.Bounds('],[-1,'            origin.lon + (startcol + col) * tilelon,'],[-1,'            origin.lat - (startrow + row * rowSign) * tilelat * rowSign,'],[-1,'            origin.lon + (startcol + col + 1) * tilelon,'],[-1,'            origin.lat - (startrow + (row - 1) * rowSign) * tilelat * rowSign'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: initGriddedTiles'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    initGriddedTiles:function(bounds) {'],[0,'        this.events.triggerEvent(\&quot;retile\&quot;);'],[-1,''],[-1,'        \/\/ work out mininum number of rows and columns; this is the number of'],[-1,'        \/\/ tiles required to cover the viewport plus at least one for panning'],[-1,''],[0,'        var viewSize = this.map.getSize();'],[-1,'        '],[0,'        var origin = this.getTileOrigin();'],[0,'        var resolution = this.map.getResolution(),'],[-1,'            serverResolution = this.getServerResolution(),'],[-1,'            ratio = resolution \/ serverResolution,'],[-1,'            tileSize = {'],[-1,'                w: this.tileSize.w \/ ratio,'],[-1,'                h: this.tileSize.h \/ ratio'],[-1,'            };'],[-1,''],[0,'        var minRows = Math.ceil(viewSize.h\/tileSize.h) + '],[-1,'                      2 * this.buffer + 1;'],[0,'        var minCols = Math.ceil(viewSize.w\/tileSize.w) +'],[-1,'                      2 * this.buffer + 1;'],[-1,''],[0,'        var tileLayout = this.calculateGridLayout(bounds, origin, serverResolution);'],[0,'        this.gridLayout = tileLayout;'],[-1,'        '],[0,'        var tilelon = tileLayout.tilelon;'],[0,'        var tilelat = tileLayout.tilelat;'],[-1,'        '],[0,'        var layerContainerDivLeft = this.map.layerContainerOriginPx.x;'],[0,'        var layerContainerDivTop = this.map.layerContainerOriginPx.y;'],[-1,''],[0,'        var tileBounds = this.getTileBoundsForGridIndex(0, 0);'],[0,'        var startPx = this.map.getViewPortPxFromLonLat('],[-1,'            new OpenLayers.LonLat(tileBounds.left, tileBounds.top)'],[-1,'        );'],[0,'        startPx.x = Math.round(startPx.x) - layerContainerDivLeft;'],[0,'        startPx.y = Math.round(startPx.y) - layerContainerDivTop;'],[-1,''],[0,'        var tileData = [], center = this.map.getCenter();'],[-1,''],[0,'        var rowidx = 0;'],[0,'        do {'],[0,'            var row = this.grid[rowidx];'],[0,'            if (!row) {'],[0,'                row = [];'],[0,'                this.grid.push(row);'],[-1,'            }'],[-1,'            '],[0,'            var colidx = 0;'],[0,'            do {'],[0,'                tileBounds = this.getTileBoundsForGridIndex(rowidx, colidx);'],[0,'                var px = startPx.clone();'],[0,'                px.x = px.x + colidx * Math.round(tileSize.w);'],[0,'                px.y = px.y + rowidx * Math.round(tileSize.h);'],[0,'                var tile = row[colidx];'],[0,'                if (!tile) {'],[0,'                    tile = this.addTile(tileBounds, px);'],[0,'                    this.addTileMonitoringHooks(tile);'],[0,'                    row.push(tile);'],[-1,'                } else {'],[0,'                    tile.moveTo(tileBounds, px, false);'],[-1,'                }'],[0,'                var tileCenter = tileBounds.getCenterLonLat();'],[0,'                tileData.push({'],[-1,'                    tile: tile,'],[-1,'                    distance: Math.pow(tileCenter.lon - center.lon, 2) +'],[-1,'                        Math.pow(tileCenter.lat - center.lat, 2)'],[-1,'                });'],[-1,'     '],[0,'                colidx += 1;'],[-1,'            } while ((tileBounds.right &lt;= bounds.right + tilelon * this.buffer)'],[-1,'                     || colidx &lt; minCols);'],[-1,'             '],[0,'            rowidx += 1;'],[-1,'        } while((tileBounds.bottom &gt;= bounds.bottom - tilelat * this.buffer)'],[-1,'                || rowidx &lt; minRows);'],[-1,'        '],[-1,'        \/\/shave off exceess rows and colums'],[0,'        this.removeExcessTiles(rowidx, colidx);'],[-1,''],[0,'        var resolution = this.getServerResolution();'],[-1,'        \/\/ store the resolution of the grid'],[0,'        this.gridResolution = resolution;'],[-1,''],[-1,'        \/\/now actually draw the tiles'],[0,'        tileData.sort(function(a, b) {'],[0,'            return a.distance - b.distance; '],[-1,'        });'],[0,'        for (var i=0, ii=tileData.length; i&lt;ii; ++i) {'],[0,'            tileData[i].tile.draw();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getMaxExtent'],[-1,'     * Get this layer\'s maximum extent. (Implemented as a getter for'],[-1,'     *     potential specific implementations in sub-classes.)'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    getMaxExtent: function() {'],[0,'        return this.maxExtent;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: addTile'],[-1,'     * Create a tile, initialize it, and add it to the layer div. '],[-1,'     *'],[-1,'     * Parameters'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * position - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Tile&gt;} The added OpenLayers.Tile'],[-1,'     *\/'],[-1,'    addTile: function(bounds, position) {'],[0,'        var tile = new this.tileClass('],[-1,'            this, position, bounds, null, this.tileSize, this.tileOptions'],[-1,'        );'],[0,'        this.events.triggerEvent(\&quot;addtile\&quot;, {tile: tile});'],[0,'        return tile;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: addTileMonitoringHooks'],[-1,'     * This function takes a tile as input and adds the appropriate hooks to '],[-1,'     *     the tile so that the layer can keep track of the loading tiles.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * tile - {&lt;OpenLayers.Tile&gt;}'],[-1,'     *\/'],[-1,'    addTileMonitoringHooks: function(tile) {'],[-1,'        '],[0,'        var replacingCls = \'olTileReplacing\';'],[-1,''],[0,'        tile.onLoadStart = function() {'],[-1,'            \/\/if that was first tile then trigger a \'loadstart\' on the layer'],[0,'            if (this.loading === false) {'],[0,'                this.loading = true;'],[0,'                this.events.triggerEvent(\&quot;loadstart\&quot;);'],[-1,'            }'],[0,'            this.events.triggerEvent(\&quot;tileloadstart\&quot;, {tile: tile});'],[0,'            this.numLoadingTiles++;'],[0,'            if (!this.singleTile &amp;&amp; this.backBuffer &amp;&amp; this.gridResolution === this.backBufferResolution) {'],[0,'                OpenLayers.Element.addClass(tile.imgDiv, replacingCls);'],[-1,'            }'],[-1,'        };'],[-1,'      '],[0,'        tile.onLoadEnd = function(evt) {'],[0,'            this.numLoadingTiles--;'],[0,'            var aborted = evt.type === \'unload\';'],[0,'            this.events.triggerEvent(\&quot;tileloaded\&quot;, {'],[-1,'                tile: tile,'],[-1,'                aborted: aborted'],[-1,'            });'],[0,'            if (!this.singleTile &amp;&amp; !aborted &amp;&amp; this.backBuffer &amp;&amp; this.gridResolution === this.backBufferResolution) {'],[0,'                if (OpenLayers.Element.getStyle(tile.imgDiv, \'display\') === \'none\') {'],[0,'                    var bufferTile = document.getElementById(tile.id + \'_bb\');'],[0,'                    if (bufferTile) {'],[0,'                        bufferTile.parentNode.removeChild(bufferTile);'],[-1,'                    }'],[-1,'                }'],[0,'                OpenLayers.Element.removeClass(tile.imgDiv, replacingCls);'],[-1,'            }'],[-1,'            \/\/if that was the last tile, then trigger a \'loadend\' on the layer'],[0,'            if (this.numLoadingTiles === 0) {'],[0,'                if (this.backBuffer) {'],[0,'                    if (this.backBuffer.childNodes.length === 0) {'],[-1,'                        \/\/ no tiles transitioning, remove immediately'],[0,'                        this.removeBackBuffer();'],[-1,'                    } else {'],[-1,'                        \/\/ wait until transition has ended or delay has passed'],[0,'                        this._transitionElement = aborted ?'],[-1,'                            this.div.lastChild : tile.imgDiv;'],[0,'                        var transitionendEvents = this.transitionendEvents;'],[0,'                        for (var i=transitionendEvents.length-1; i&gt;=0; --i) {'],[0,'                            OpenLayers.Event.observe(this._transitionElement,'],[-1,'                                transitionendEvents[i],'],[-1,'                                this._removeBackBuffer);'],[-1,'                        }'],[-1,'                        \/\/ the removal of the back buffer is delayed to prevent'],[-1,'                        \/\/ flash effects due to the animation of tile displaying'],[0,'                        this.backBufferTimerId = window.setTimeout('],[-1,'                            this._removeBackBuffer, this.removeBackBufferDelay'],[-1,'                        );'],[-1,'                    }'],[-1,'                }'],[0,'                this.loading = false;'],[0,'                this.events.triggerEvent(\&quot;loadend\&quot;);'],[-1,'            }'],[-1,'        };'],[-1,'        '],[0,'        tile.onLoadError = function() {'],[0,'            this.events.triggerEvent(\&quot;tileerror\&quot;, {tile: tile});'],[-1,'        };'],[-1,'        '],[0,'        tile.events.on({'],[-1,'            \&quot;loadstart\&quot;: tile.onLoadStart,'],[-1,'            \&quot;loadend\&quot;: tile.onLoadEnd,'],[-1,'            \&quot;unload\&quot;: tile.onLoadEnd,'],[-1,'            \&quot;loaderror\&quot;: tile.onLoadError,'],[-1,'            scope: this'],[-1,'        });'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: removeTileMonitoringHooks'],[-1,'     * This function takes a tile as input and removes the tile hooks '],[-1,'     *     that were added in addTileMonitoringHooks()'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * tile - {&lt;OpenLayers.Tile&gt;}'],[-1,'     *\/'],[-1,'    removeTileMonitoringHooks: function(tile) {'],[0,'        tile.unload();'],[0,'        tile.events.un({'],[-1,'            \&quot;loadstart\&quot;: tile.onLoadStart,'],[-1,'            \&quot;loadend\&quot;: tile.onLoadEnd,'],[-1,'            \&quot;unload\&quot;: tile.onLoadEnd,'],[-1,'            \&quot;loaderror\&quot;: tile.onLoadError,'],[-1,'            scope: this'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: moveGriddedTiles'],[-1,'     *\/'],[-1,'    moveGriddedTiles: function() {'],[0,'        var buffer = this.buffer + 1;'],[0,'        while(true) {'],[0,'            var tlTile = this.grid[0][0];'],[0,'            var tlViewPort = {'],[-1,'                x: tlTile.position.x +'],[-1,'                    this.map.layerContainerOriginPx.x,'],[-1,'                y: tlTile.position.y +'],[-1,'                    this.map.layerContainerOriginPx.y'],[-1,'            };'],[0,'            var ratio = this.getServerResolution() \/ this.map.getResolution();'],[0,'            var tileSize = {'],[-1,'                w: Math.round(this.tileSize.w * ratio),'],[-1,'                h: Math.round(this.tileSize.h * ratio)'],[-1,'            };'],[0,'            if (tlViewPort.x &gt; -tileSize.w * (buffer - 1)) {'],[0,'                this.shiftColumn(true, tileSize);'],[0,'            } else if (tlViewPort.x &lt; -tileSize.w * buffer) {'],[0,'                this.shiftColumn(false, tileSize);'],[0,'            } else if (tlViewPort.y &gt; -tileSize.h * (buffer - 1)) {'],[0,'                this.shiftRow(true, tileSize);'],[0,'            } else if (tlViewPort.y &lt; -tileSize.h * buffer) {'],[0,'                this.shiftRow(false, tileSize);'],[-1,'            } else {'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: shiftRow'],[-1,'     * Shifty grid work'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * prepend - {Boolean} if true, prepend to beginning.'],[-1,'     *                          if false, then append to end'],[-1,'     * tileSize - {Object} rendered tile size; object with w and h properties'],[-1,'     *\/'],[-1,'    shiftRow: function(prepend, tileSize) {'],[0,'        var grid = this.grid;'],[0,'        var rowIndex = prepend ? 0 : (grid.length - 1);'],[0,'        var sign = prepend ? -1 : 1;'],[0,'        var rowSign = this.rowSign;'],[0,'        var tileLayout = this.gridLayout;'],[0,'        tileLayout.startrow += sign * rowSign;'],[-1,''],[0,'        var modelRow = grid[rowIndex];'],[0,'        var row = grid[prepend ? \'pop\' : \'shift\']();'],[0,'        for (var i=0, len=row.length; i&lt;len; i++) {'],[0,'            var tile = row[i];'],[0,'            var position = modelRow[i].position.clone();'],[0,'            position.y += tileSize.h * sign;'],[0,'            tile.moveTo(this.getTileBoundsForGridIndex(rowIndex, i), position);'],[-1,'        }'],[0,'        grid[prepend ? \'unshift\' : \'push\'](row);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: shiftColumn'],[-1,'     * Shift grid work in the other dimension'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * prepend - {Boolean} if true, prepend to beginning.'],[-1,'     *                          if false, then append to end'],[-1,'     * tileSize - {Object} rendered tile size; object with w and h properties'],[-1,'     *\/'],[-1,'    shiftColumn: function(prepend, tileSize) {'],[0,'        var grid = this.grid;'],[0,'        var colIndex = prepend ? 0 : (grid[0].length - 1);'],[0,'        var sign = prepend ? -1 : 1;'],[0,'        var tileLayout = this.gridLayout;'],[0,'        tileLayout.startcol += sign;'],[-1,''],[0,'        for (var i=0, len=grid.length; i&lt;len; i++) {'],[0,'            var row = grid[i];'],[0,'            var position = row[colIndex].position.clone();'],[0,'            var tile = row[prepend ? \'pop\' : \'shift\']();            '],[0,'            position.x += tileSize.w * sign;'],[0,'            tile.moveTo(this.getTileBoundsForGridIndex(i, colIndex), position);'],[0,'            row[prepend ? \'unshift\' : \'push\'](tile);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: removeExcessTiles'],[-1,'     * When the size of the map or the buffer changes, we may need to'],[-1,'     *     remove some excess rows and columns.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * rows - {Integer} Maximum number of rows we want our grid to have.'],[-1,'     * columns - {Integer} Maximum number of columns we want our grid to have.'],[-1,'     *\/'],[-1,'    removeExcessTiles: function(rows, columns) {'],[0,'        var i, l;'],[-1,'        '],[-1,'        \/\/ remove extra rows'],[0,'        while (this.grid.length &gt; rows) {'],[0,'            var row = this.grid.pop();'],[0,'            for (i=0, l=row.length; i&lt;l; i++) {'],[0,'                var tile = row[i];'],[0,'                this.destroyTile(tile);'],[-1,'            }'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ remove extra columns'],[0,'        for (i=0, l=this.grid.length; i&lt;l; i++) {'],[0,'            while (this.grid[i].length &gt; columns) {'],[0,'                var row = this.grid[i];'],[0,'                var tile = row.pop();'],[0,'                this.destroyTile(tile);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: onMapResize'],[-1,'     * For singleTile layers, this will set a new tile size according to the'],[-1,'     * dimensions of the map pane.'],[-1,'     *\/'],[-1,'    onMapResize: function() {'],[0,'        if (this.singleTile) {'],[0,'            this.clearGrid();'],[0,'            this.setTileSize();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getTileBounds'],[-1,'     * Returns The tile bounds for a layer given a pixel location.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * viewPortPx - {&lt;OpenLayers.Pixel&gt;} The location in the viewport.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} Bounds of the tile at the given pixel location.'],[-1,'     *\/'],[-1,'    getTileBounds: function(viewPortPx) {'],[0,'        var maxExtent = this.maxExtent;'],[0,'        var resolution = this.getResolution();'],[0,'        var tileMapWidth = resolution * this.tileSize.w;'],[0,'        var tileMapHeight = resolution * this.tileSize.h;'],[0,'        var mapPoint = this.getLonLatFromViewPortPx(viewPortPx);'],[0,'        var tileLeft = maxExtent.left + (tileMapWidth *'],[-1,'                                         Math.floor((mapPoint.lon -'],[-1,'                                                     maxExtent.left) \/'],[-1,'                                                    tileMapWidth));'],[0,'        var tileBottom = maxExtent.bottom + (tileMapHeight *'],[-1,'                                             Math.floor((mapPoint.lat -'],[-1,'                                                         maxExtent.bottom) \/'],[-1,'                                                        tileMapHeight));'],[0,'        return new OpenLayers.Bounds(tileLeft, tileBottom,'],[-1,'                                     tileLeft + tileMapWidth,'],[-1,'                                     tileBottom + tileMapHeight);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.Grid\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/ArcXML.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Geometry\/Polygon.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' * @requires OpenLayers\/Geometry\/MultiPolygon.js'],[-1,' * @requires OpenLayers\/Geometry\/LinearRing.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.ArcXML'],[-1,' * Read\/Write ArcXML. Create a new instance with the &lt;OpenLayers.Format.ArcXML&gt;'],[-1,' *     constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.ArcXML = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: fontStyleKeys'],[-1,'     * {Array} List of keys used in font styling.'],[-1,'     *\/'],[-1,'    fontStyleKeys: ['],[-1,'        \'antialiasing\', \'blockout\', \'font\', \'fontcolor\',\'fontsize\', \'fontstyle\','],[-1,'        \'glowing\', \'interval\', \'outline\', \'printmode\', \'shadow\', \'transparency\''],[-1,'    ],'],[-1,''],[-1,'    \/**'],[-1,'     * Property: request'],[-1,'     * A get_image request destined for an ArcIMS server.'],[-1,'     *\/'],[-1,'    request: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: response'],[-1,'     * A parsed response from an ArcIMS server.'],[-1,'     *\/'],[-1,'    response: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.ArcXML'],[-1,'     * Create a new parser\/writer for ArcXML.  Create an instance of this class'],[-1,'     *    to begin authoring a request to an ArcIMS service.  This is used'],[-1,'     *    primarily by the ArcIMS layer, but could be used to do other wild'],[-1,'     *    stuff, like geocoding.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        this.request = new OpenLayers.Format.ArcXML.Request();'],[0,'        this.response = new OpenLayers.Format.ArcXML.Response();'],[-1,''],[0,'        if (options) {'],[0,'            if (options.requesttype == \&quot;feature\&quot;) {'],[0,'                this.request.get_image = null;'],[-1,'            '],[0,'                var qry = this.request.get_feature.query;'],[0,'                this.addCoordSys(qry.featurecoordsys, options.featureCoordSys);'],[0,'                this.addCoordSys(qry.filtercoordsys, options.filterCoordSys);'],[-1,'            '],[0,'                if (options.polygon) {'],[0,'                    qry.isspatial = true;'],[0,'                    qry.spatialfilter.polygon = options.polygon;'],[0,'                } else if (options.envelope) {'],[0,'                    qry.isspatial = true;'],[0,'                    qry.spatialfilter.envelope = {minx:0, miny:0, maxx:0, maxy:0};'],[0,'                    this.parseEnvelope(qry.spatialfilter.envelope, options.envelope);'],[-1,'                }'],[0,'            } else if (options.requesttype == \&quot;image\&quot;) {'],[0,'                this.request.get_feature = null;'],[-1,'            '],[0,'                var props = this.request.get_image.properties;'],[0,'                this.parseEnvelope(props.envelope, options.envelope);'],[-1,'            '],[0,'                this.addLayers(props.layerlist, options.layers);'],[0,'                this.addImageSize(props.imagesize, options.tileSize);'],[0,'                this.addCoordSys(props.featurecoordsys, options.featureCoordSys);'],[0,'                this.addCoordSys(props.filtercoordsys, options.filterCoordSys);'],[-1,'            } else {'],[-1,'                \/\/ if an arcxml object is being created with no request type, it is'],[-1,'                \/\/ probably going to consume a response, so do not throw an error if'],[-1,'                \/\/ the requesttype is not defined'],[0,'                this.request = null;'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseEnvelope'],[-1,'     * Parse an array of coordinates into an ArcXML envelope structure.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * env - {Object} An envelope object that will contain the parsed coordinates.'],[-1,'     * arr - {Array(double)} An array of coordinates in the order: [ minx, miny, maxx, maxy ]'],[-1,'     *\/'],[-1,'    parseEnvelope: function(env, arr) {'],[0,'        if (arr &amp;&amp; arr.length == 4) {          '],[0,'            env.minx = arr[0];'],[0,'            env.miny = arr[1];'],[0,'            env.maxx = arr[2];'],[0,'            env.maxy = arr[3];'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: addLayers'],[-1,'     * Add a collection of layers to another collection of layers. Each layer in the list is tuple of'],[-1,'     * { id, visible }.  These layer collections represent the '],[-1,'     * \/ARCXML\/REQUEST\/get_image\/PROPERTIES\/LAYERLIST\/LAYERDEF items in ArcXML'],[-1,'     *'],[-1,'     * TODO: Add support for dynamic layer rendering.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * ll - {Array({id,visible})} A list of layer definitions.'],[-1,'     * lyrs - {Array({id,visible})} A list of layer definitions.'],[-1,'     *\/'],[-1,'    addLayers: function(ll, lyrs) {'],[0,'        for(var lind = 0, len=lyrs.length; lind &lt; len; lind++) {'],[0,'            ll.push(lyrs[lind]);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addImageSize'],[-1,'     * Set the size of the requested image.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * imsize - {Object} An ArcXML imagesize object.'],[-1,'     * olsize - {&lt;OpenLayers.Size&gt;} The image size to set.'],[-1,'     *\/'],[-1,'    addImageSize: function(imsize, olsize) {'],[0,'        if (olsize !== null) {'],[0,'            imsize.width = olsize.w;'],[0,'            imsize.height = olsize.h;'],[0,'            imsize.printwidth = olsize.w;'],[0,'            imsize.printheight = olsize.h;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: addCoordSys'],[-1,'     * Add the coordinate system information to an object. The object may be '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * featOrFilt - {Object} A featurecoordsys or filtercoordsys ArcXML structure.'],[-1,'     * fsys - {String} or {&lt;OpenLayers.Projection&gt;} or {filtercoordsys} or '],[-1,'     * {featurecoordsys} A projection representation. If it\'s a {String}, '],[-1,'     * the value is assumed to be the SRID.  If it\'s a {OpenLayers.Projection} '],[-1,'     * AND Proj4js is available, the projection number and name are extracted '],[-1,'     * from there.  If it\'s a filter or feature ArcXML structure, it is copied.'],[-1,'     *\/'],[-1,'    addCoordSys: function(featOrFilt, fsys) {'],[0,'        if (typeof fsys == \&quot;string\&quot;) {'],[0,'            featOrFilt.id = parseInt(fsys);'],[0,'            featOrFilt.string = fsys;'],[-1,'        }'],[-1,'        \/\/ is this a proj4js instance?'],[0,'        else if (typeof fsys == \&quot;object\&quot; &amp;&amp; fsys.proj !== null){'],[0,'            featOrFilt.id = fsys.proj.srsProjNumber;'],[0,'            featOrFilt.string = fsys.proj.srsCode;'],[-1,'        } else {'],[0,'            featOrFilt = fsys;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: iserror'],[-1,'     * Check to see if the response from the server was an error.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {String} or {DOMElement} data to read\/parse. If nothing is supplied,'],[-1,'     * the current response is examined.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} true if the response was an error.'],[-1,'     *\/'],[-1,'    iserror: function(data) {'],[0,'        var ret = null; '],[-1,'        '],[0,'        if (!data) {'],[0,'            ret = (this.response.error !== \'\');'],[-1,'        } else {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[0,'            var errorNodes = data.documentElement.getElementsByTagName(\&quot;ERROR\&quot;);'],[0,'            ret = (errorNodes !== null &amp;&amp; errorNodes.length &gt; 0);'],[-1,'        }'],[-1,''],[0,'        return ret;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read data from a string, and return an response. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Format.ArcXML.Response&gt;} An ArcXML response. Note that this response'],[-1,'     *     data may change in the future. '],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[-1,'        '],[0,'        var arcNode = null;'],[0,'        if (data &amp;&amp; data.documentElement) {'],[0,'            if(data.documentElement.nodeName == \&quot;ARCXML\&quot;) {'],[0,'                arcNode = data.documentElement;'],[-1,'            } else {'],[0,'                arcNode = data.documentElement.getElementsByTagName(\&quot;ARCXML\&quot;)[0];'],[-1,'            }'],[-1,'        }'],[-1,'          '],[-1,'        \/\/ in Safari, arcNode will be there but will have a child named '],[-1,'        \/\/ parsererror'],[0,'        if (!arcNode || arcNode.firstChild.nodeName === \'parsererror\') {'],[0,'            var error, source;'],[0,'            try {'],[0,'                error = data.firstChild.nodeValue;'],[0,'                source = data.firstChild.childNodes[1].firstChild.nodeValue;'],[-1,'            } catch (err) {'],[-1,'                \/\/ pass'],[-1,'            }'],[0,'            throw {'],[-1,'                message: \&quot;Error parsing the ArcXML request\&quot;, '],[-1,'                error: error,'],[-1,'                source: source'],[-1,'            };'],[-1,'        }'],[-1,'        '],[0,'        var response = this.parseResponse(arcNode);'],[0,'        return response;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Generate an ArcXml document string for sending to an ArcIMS server. '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} A string representing the ArcXML document request.'],[-1,'     *\/'],[-1,'    write: function(request) {       '],[0,'        if (!request) {'],[0,'            request = this.request;'],[-1,'        }    '],[0,'        var root = this.createElementNS(\&quot;\&quot;, \&quot;ARCXML\&quot;);'],[0,'        root.setAttribute(\&quot;version\&quot;,\&quot;1.1\&quot;);'],[-1,''],[0,'        var reqElem = this.createElementNS(\&quot;\&quot;, \&quot;REQUEST\&quot;);'],[-1,'        '],[0,'        if (request.get_image != null) {'],[0,'            var getElem = this.createElementNS(\&quot;\&quot;, \&quot;GET_IMAGE\&quot;);'],[0,'            reqElem.appendChild(getElem);'],[-1,''],[0,'            var propElem = this.createElementNS(\&quot;\&quot;, \&quot;PROPERTIES\&quot;);'],[0,'            getElem.appendChild(propElem);'],[-1,''],[0,'            var props = request.get_image.properties;'],[0,'            if (props.featurecoordsys != null) {'],[0,'                var feat = this.createElementNS(\&quot;\&quot;, \&quot;FEATURECOORDSYS\&quot;);'],[0,'                propElem.appendChild(feat);'],[-1,'                '],[0,'                if (props.featurecoordsys.id === 0) {'],[0,'                    feat.setAttribute(\&quot;string\&quot;, props.featurecoordsys[\'string\']);'],[-1,'                }'],[-1,'                else {'],[0,'                    feat.setAttribute(\&quot;id\&quot;, props.featurecoordsys.id);'],[-1,'                }'],[-1,'            }'],[-1,'          '],[0,'            if (props.filtercoordsys != null) {'],[0,'                var filt = this.createElementNS(\&quot;\&quot;, \&quot;FILTERCOORDSYS\&quot;);'],[0,'                propElem.appendChild(filt);'],[-1,''],[0,'                if (props.filtercoordsys.id === 0) {'],[0,'                    filt.setAttribute(\&quot;string\&quot;, props.filtercoordsys.string);'],[-1,'                }'],[-1,'                else {'],[0,'                    filt.setAttribute(\&quot;id\&quot;, props.filtercoordsys.id);'],[-1,'                }'],[-1,'            }'],[-1,'          '],[0,'            if (props.envelope != null) {'],[0,'                var env = this.createElementNS(\&quot;\&quot;, \&quot;ENVELOPE\&quot;);'],[0,'                propElem.appendChild(env);'],[-1,''],[0,'                env.setAttribute(\&quot;minx\&quot;, props.envelope.minx);'],[0,'                env.setAttribute(\&quot;miny\&quot;, props.envelope.miny);'],[0,'                env.setAttribute(\&quot;maxx\&quot;, props.envelope.maxx);'],[0,'                env.setAttribute(\&quot;maxy\&quot;, props.envelope.maxy);'],[-1,'            }        '],[-1,'          '],[0,'            var imagesz = this.createElementNS(\&quot;\&quot;, \&quot;IMAGESIZE\&quot;);'],[0,'            propElem.appendChild(imagesz);'],[-1,'          '],[0,'            imagesz.setAttribute(\&quot;height\&quot;, props.imagesize.height);'],[0,'            imagesz.setAttribute(\&quot;width\&quot;, props.imagesize.width);'],[-1,'          '],[0,'            if (props.imagesize.height != props.imagesize.printheight ||'],[-1,'                 props.imagesize.width != props.imagesize.printwidth) {'],[0,'                imagesz.setAttribute(\&quot;printheight\&quot;, props.imagesize.printheight);'],[0,'                imagesz.setArrtibute(\&quot;printwidth\&quot;, props.imagesize.printwidth);'],[-1,'            }'],[-1,'          '],[0,'            if (props.background != null) {'],[0,'                var backgrnd = this.createElementNS(\&quot;\&quot;, \&quot;BACKGROUND\&quot;);'],[0,'                propElem.appendChild(backgrnd);'],[-1,'            '],[0,'                backgrnd.setAttribute(\&quot;color\&quot;, '],[-1,'                    props.background.color.r + \&quot;,\&quot; + '],[-1,'                    props.background.color.g + \&quot;,\&quot; + '],[-1,'                    props.background.color.b);'],[-1,'              '],[0,'                if (props.background.transcolor !== null) {'],[0,'                    backgrnd.setAttribute(\&quot;transcolor\&quot;, '],[-1,'                        props.background.transcolor.r + \&quot;,\&quot; + '],[-1,'                        props.background.transcolor.g + \&quot;,\&quot; + '],[-1,'                        props.background.transcolor.b);'],[-1,'                }'],[-1,'            }'],[-1,'          '],[0,'            if (props.layerlist != null &amp;&amp; props.layerlist.length &gt; 0) {'],[0,'                var layerlst = this.createElementNS(\&quot;\&quot;, \&quot;LAYERLIST\&quot;);'],[0,'                propElem.appendChild(layerlst);'],[-1,'            '],[0,'                for (var ld = 0; ld &lt; props.layerlist.length; ld++) {'],[0,'                    var ldef = this.createElementNS(\&quot;\&quot;, \&quot;LAYERDEF\&quot;);'],[0,'                    layerlst.appendChild(ldef);'],[-1,'              '],[0,'                    ldef.setAttribute(\&quot;id\&quot;, props.layerlist[ld].id);'],[0,'                    ldef.setAttribute(\&quot;visible\&quot;, props.layerlist[ld].visible);'],[-1,'              '],[0,'                    if (typeof props.layerlist[ld].query == \&quot;object\&quot;) {'],[0,'                        var query = props.layerlist[ld].query;'],[-1,''],[0,'                        if (query.where.length &lt; 0) {'],[0,'                            continue;'],[-1,'                        }'],[-1,'                  '],[0,'                        var queryElem = null;'],[0,'                        if (typeof query.spatialfilter == \&quot;boolean\&quot; &amp;&amp; query.spatialfilter) {'],[-1,'                            \/\/ handle spatial filter madness'],[0,'                            queryElem = this.createElementNS(\&quot;\&quot;, \&quot;SPATIALQUERY\&quot;);'],[-1,'                        }'],[-1,'                        else {'],[0,'                            queryElem = this.createElementNS(\&quot;\&quot;, \&quot;QUERY\&quot;);'],[-1,'                        }'],[-1,'                '],[0,'                        queryElem.setAttribute(\&quot;where\&quot;, query.where);'],[-1,'                '],[0,'                        if (typeof query.accuracy == \&quot;number\&quot; &amp;&amp; query.accuracy &gt; 0) {'],[0,'                            queryElem.setAttribute(\&quot;accuracy\&quot;, query.accuracy);'],[-1,'                        }'],[0,'                        if (typeof query.featurelimit == \&quot;number\&quot; &amp;&amp; query.featurelimit &lt; 2000) {'],[0,'                            queryElem.setAttribute(\&quot;featurelimit\&quot;, query.featurelimit);'],[-1,'                        }'],[0,'                        if (typeof query.subfields == \&quot;string\&quot; &amp;&amp; query.subfields != \&quot;#ALL#\&quot;) {'],[0,'                            queryElem.setAttribute(\&quot;subfields\&quot;, query.subfields);'],[-1,'                        }'],[0,'                        if (typeof query.joinexpression == \&quot;string\&quot; &amp;&amp; query.joinexpression.length &gt; 0) {'],[0,'                            queryElem.setAttribute(\&quot;joinexpression\&quot;, query.joinexpression);'],[-1,'                        }'],[0,'                        if (typeof query.jointables == \&quot;string\&quot; &amp;&amp; query.jointables.length &gt; 0) {'],[0,'                            queryElem.setAttribute(\&quot;jointables\&quot;, query.jointables);'],[-1,'                        }'],[-1,''],[0,'                        ldef.appendChild(queryElem);'],[-1,'                    }'],[-1,'              '],[0,'                    if (typeof props.layerlist[ld].renderer == \&quot;object\&quot;) {'],[0,'                        this.addRenderer(ldef, props.layerlist[ld].renderer);                  '],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'        } else if (request.get_feature != null) {'],[0,'            var getElem = this.createElementNS(\&quot;\&quot;, \&quot;GET_FEATURES\&quot;);'],[0,'            getElem.setAttribute(\&quot;outputmode\&quot;, \&quot;newxml\&quot;);'],[0,'            getElem.setAttribute(\&quot;checkesc\&quot;, \&quot;true\&quot;);'],[-1,'          '],[0,'            if (request.get_feature.geometry) {'],[0,'                getElem.setAttribute(\&quot;geometry\&quot;, request.get_feature.geometry);'],[-1,'            }'],[-1,'            else {'],[0,'                getElem.setAttribute(\&quot;geometry\&quot;, \&quot;false\&quot;);'],[-1,'            }'],[-1,'          '],[0,'            if (request.get_feature.compact) {'],[0,'                getElem.setAttribute(\&quot;compact\&quot;, request.get_feature.compact);'],[-1,'            }'],[-1,'          '],[0,'            if (request.get_feature.featurelimit == \&quot;number\&quot;) {'],[0,'                getElem.setAttribute(\&quot;featurelimit\&quot;, request.get_feature.featurelimit);'],[-1,'            }'],[-1,'          '],[0,'            getElem.setAttribute(\&quot;globalenvelope\&quot;, \&quot;true\&quot;);'],[0,'            reqElem.appendChild(getElem);'],[-1,'          '],[0,'            if (request.get_feature.layer != null &amp;&amp; request.get_feature.layer.length &gt; 0) {'],[0,'                var lyrElem = this.createElementNS(\&quot;\&quot;, \&quot;LAYER\&quot;);'],[0,'                lyrElem.setAttribute(\&quot;id\&quot;, request.get_feature.layer);'],[0,'                getElem.appendChild(lyrElem);'],[-1,'            }'],[-1,'          '],[0,'            var fquery = request.get_feature.query;'],[0,'            if (fquery != null) {'],[0,'                var qElem = null;'],[0,'                if (fquery.isspatial) {'],[0,'                    qElem = this.createElementNS(\&quot;\&quot;, \&quot;SPATIALQUERY\&quot;);'],[-1,'                } else {'],[0,'                    qElem = this.createElementNS(\&quot;\&quot;, \&quot;QUERY\&quot;);'],[-1,'                }'],[0,'                getElem.appendChild(qElem);'],[-1,'                '],[0,'                if (typeof fquery.accuracy == \&quot;number\&quot;) {'],[0,'                    qElem.setAttribute(\&quot;accuracy\&quot;, fquery.accuracy);'],[-1,'                }'],[-1,'                \/\/qElem.setAttribute(\&quot;featurelimit\&quot;, \&quot;5\&quot;);'],[-1,'            '],[0,'                if (fquery.featurecoordsys != null) {'],[0,'                    var fcsElem1 = this.createElementNS(\&quot;\&quot;, \&quot;FEATURECOORDSYS\&quot;);'],[-1,'              '],[0,'                    if (fquery.featurecoordsys.id == 0) {'],[0,'                        fcsElem1.setAttribute(\&quot;string\&quot;, fquery.featurecoordsys.string);'],[-1,'                    } else {'],[0,'                        fcsElem1.setAttribute(\&quot;id\&quot;, fquery.featurecoordsys.id);'],[-1,'                    }'],[0,'                    qElem.appendChild(fcsElem1);'],[-1,'                }'],[-1,'            '],[0,'                if (fquery.filtercoordsys != null) {'],[0,'                    var fcsElem2 = this.createElementNS(\&quot;\&quot;, \&quot;FILTERCOORDSYS\&quot;);'],[-1,'              '],[0,'                    if (fquery.filtercoordsys.id === 0) {'],[0,'                        fcsElem2.setAttribute(\&quot;string\&quot;, fquery.filtercoordsys.string);'],[-1,'                    } else {'],[0,'                        fcsElem2.setAttribute(\&quot;id\&quot;, fquery.filtercoordsys.id);'],[-1,'                    }'],[0,'                    qElem.appendChild(fcsElem2);'],[-1,'                }'],[-1,'            '],[0,'                if (fquery.buffer &gt; 0) {   '],[0,'                    var bufElem = this.createElementNS(\&quot;\&quot;, \&quot;BUFFER\&quot;);'],[0,'                    bufElem.setAttribute(\&quot;distance\&quot;, fquery.buffer);'],[0,'                    qElem.appendChild(bufElem);'],[-1,'                }'],[-1,'            '],[0,'                if (fquery.isspatial) {'],[0,'                    var spfElem = this.createElementNS(\&quot;\&quot;, \&quot;SPATIALFILTER\&quot;);'],[0,'                    spfElem.setAttribute(\&quot;relation\&quot;, fquery.spatialfilter.relation);'],[0,'                    qElem.appendChild(spfElem);'],[-1,'              '],[0,'                    if (fquery.spatialfilter.envelope) {'],[0,'                        var envElem = this.createElementNS(\&quot;\&quot;, \&quot;ENVELOPE\&quot;); '],[0,'                        envElem.setAttribute(\&quot;minx\&quot;, fquery.spatialfilter.envelope.minx);'],[0,'                        envElem.setAttribute(\&quot;miny\&quot;, fquery.spatialfilter.envelope.miny);'],[0,'                        envElem.setAttribute(\&quot;maxx\&quot;, fquery.spatialfilter.envelope.maxx);'],[0,'                        envElem.setAttribute(\&quot;maxy\&quot;, fquery.spatialfilter.envelope.maxy);'],[0,'                        spfElem.appendChild(envElem);'],[0,'                    } else if(typeof fquery.spatialfilter.polygon == \&quot;object\&quot;) {'],[0,'                        spfElem.appendChild(this.writePolygonGeometry(fquery.spatialfilter.polygon));                '],[-1,'                    }'],[-1,'                }'],[-1,'            '],[0,'                if (fquery.where != null &amp;&amp; fquery.where.length &gt; 0) {'],[0,'                    qElem.setAttribute(\&quot;where\&quot;, fquery.where);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        root.appendChild(reqElem);'],[-1,''],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [root]);'],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    addGroupRenderer: function(ldef, toprenderer) {'],[0,'        var topRelem = this.createElementNS(\&quot;\&quot;, \&quot;GROUPRENDERER\&quot;);'],[0,'        ldef.appendChild(topRelem);'],[-1,'      '],[0,'        for (var rind = 0; rind &lt; toprenderer.length; rind++) {'],[0,'            var renderer = toprenderer[rind];'],[0,'            this.addRenderer(topRelem, renderer);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    addRenderer: function(topRelem, renderer) {'],[0,'        if (OpenLayers.Util.isArray(renderer)) {'],[0,'            this.addGroupRenderer(topRelem, renderer);'],[-1,'        } else {'],[0,'            var renderElem = this.createElementNS(\&quot;\&quot;, renderer.type.toUpperCase() + \&quot;RENDERER\&quot;);'],[0,'            topRelem.appendChild(renderElem);'],[-1,'          '],[0,'            if (renderElem.tagName == \&quot;VALUEMAPRENDERER\&quot;) {'],[0,'                this.addValueMapRenderer(renderElem, renderer);'],[0,'            } else if (renderElem.tagName == \&quot;VALUEMAPLABELRENDERER\&quot;) {'],[0,'                this.addValueMapLabelRenderer(renderElem, renderer);'],[0,'            } else if (renderElem.tagName == \&quot;SIMPLELABELRENDERER\&quot;) {'],[0,'                this.addSimpleLabelRenderer(renderElem, renderer);'],[0,'            } else if (renderElem.tagName == \&quot;SCALEDEPENDENTRENDERER\&quot;) {'],[0,'                this.addScaleDependentRenderer(renderElem, renderer);'],[-1,'            }'],[-1,'        }             '],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    addScaleDependentRenderer: function(renderElem, renderer) {'],[0,'        if (typeof renderer.lower == \&quot;string\&quot; || typeof renderer.lower == \&quot;number\&quot;) {'],[0,'            renderElem.setAttribute(\&quot;lower\&quot;, renderer.lower);'],[-1,'        }'],[0,'        if (typeof renderer.upper == \&quot;string\&quot; || typeof renderer.upper == \&quot;number\&quot;) {'],[0,'            renderElem.setAttribute(\&quot;upper\&quot;, renderer.upper);'],[-1,'        }'],[-1,'        '],[0,'        this.addRenderer(renderElem, renderer.renderer);'],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    addValueMapLabelRenderer: function(renderElem, renderer) {'],[0,'        renderElem.setAttribute(\&quot;lookupfield\&quot;, renderer.lookupfield);'],[0,'        renderElem.setAttribute(\&quot;labelfield\&quot;, renderer.labelfield);'],[-1,'      '],[0,'        if (typeof renderer.exacts == \&quot;object\&quot;) {'],[0,'            for (var ext=0, extlen=renderer.exacts.length; ext&lt;extlen; ext++) {'],[0,'                var exact = renderer.exacts[ext];'],[-1,'          '],[0,'                var eelem = this.createElementNS(\&quot;\&quot;, \&quot;EXACT\&quot;);'],[-1,'          '],[0,'                if (typeof exact.value == \&quot;string\&quot;) {'],[0,'                    eelem.setAttribute(\&quot;value\&quot;, exact.value);'],[-1,'                }'],[0,'                if (typeof exact.label == \&quot;string\&quot;) {'],[0,'                    eelem.setAttribute(\&quot;label\&quot;, exact.label);'],[-1,'                }'],[0,'                if (typeof exact.method == \&quot;string\&quot;) {'],[0,'                    eelem.setAttribute(\&quot;method\&quot;, exact.method);'],[-1,'                }'],[-1,''],[0,'                renderElem.appendChild(eelem);'],[-1,'            '],[0,'                if (typeof exact.symbol == \&quot;object\&quot;) {'],[0,'                    var selem = null;'],[-1,'                '],[0,'                    if (exact.symbol.type == \&quot;text\&quot;) {'],[0,'                        selem = this.createElementNS(\&quot;\&quot;, \&quot;TEXTSYMBOL\&quot;);'],[-1,'                    }'],[-1,'                '],[0,'                    if (selem != null) {'],[0,'                        var keys = this.fontStyleKeys;'],[0,'                        for (var i = 0, len = keys.length; i &lt; len; i++) {'],[0,'                            var key = keys[i];'],[0,'                            if (exact.symbol[key]) {'],[0,'                                selem.setAttribute(key, exact.symbol[key]);'],[-1,'                            }'],[-1,'                        }    '],[0,'                        eelem.appendChild(selem);'],[-1,'                    }'],[-1,'                }'],[-1,'            } \/\/ for each exact'],[-1,'        }      '],[-1,'    },'],[-1,'    '],[-1,'    addValueMapRenderer: function(renderElem, renderer) {'],[0,'        renderElem.setAttribute(\&quot;lookupfield\&quot;, renderer.lookupfield);'],[-1,'        '],[0,'        if (typeof renderer.ranges == \&quot;object\&quot;) {'],[0,'            for(var rng=0, rnglen=renderer.ranges.length; rng&lt;rnglen; rng++) {'],[0,'                var range = renderer.ranges[rng];'],[-1,'                '],[0,'                var relem = this.createElementNS(\&quot;\&quot;, \&quot;RANGE\&quot;);'],[0,'                relem.setAttribute(\&quot;lower\&quot;, range.lower);'],[0,'                relem.setAttribute(\&quot;upper\&quot;, range.upper);'],[-1,'                '],[0,'                renderElem.appendChild(relem);'],[-1,'                '],[0,'                if (typeof range.symbol == \&quot;object\&quot;) {'],[0,'                    var selem = null;'],[-1,'              '],[0,'                    if (range.symbol.type == \&quot;simplepolygon\&quot;) {'],[0,'                        selem = this.createElementNS(\&quot;\&quot;, \&quot;SIMPLEPOLYGONSYMBOL\&quot;);'],[-1,'                    }'],[-1,'              '],[0,'                    if (selem != null) {'],[0,'                        if (typeof range.symbol.boundarycolor == \&quot;string\&quot;) {'],[0,'                            selem.setAttribute(\&quot;boundarycolor\&quot;, range.symbol.boundarycolor);'],[-1,'                        }'],[0,'                        if (typeof range.symbol.fillcolor == \&quot;string\&quot;) {'],[0,'                            selem.setAttribute(\&quot;fillcolor\&quot;, range.symbol.fillcolor);'],[-1,'                        }'],[0,'                        if (typeof range.symbol.filltransparency == \&quot;number\&quot;) {'],[0,'                            selem.setAttribute(\&quot;filltransparency\&quot;, range.symbol.filltransparency);'],[-1,'                        }'],[0,'                        relem.appendChild(selem);'],[-1,'                    }   '],[-1,'                }'],[-1,'            } \/\/ for each range'],[0,'        } else if (typeof renderer.exacts == \&quot;object\&quot;) {'],[0,'            for (var ext=0, extlen=renderer.exacts.length; ext&lt;extlen; ext++) {'],[0,'                var exact = renderer.exacts[ext];'],[-1,'          '],[0,'                var eelem = this.createElementNS(\&quot;\&quot;, \&quot;EXACT\&quot;);'],[0,'                if (typeof exact.value == \&quot;string\&quot;) {'],[0,'                    eelem.setAttribute(\&quot;value\&quot;, exact.value);'],[-1,'                }'],[0,'                if (typeof exact.label == \&quot;string\&quot;) {'],[0,'                    eelem.setAttribute(\&quot;label\&quot;, exact.label);'],[-1,'                }'],[0,'                if (typeof exact.method == \&quot;string\&quot;) {'],[0,'                    eelem.setAttribute(\&quot;method\&quot;, exact.method);'],[-1,'                }'],[-1,'            '],[0,'                renderElem.appendChild(eelem);'],[-1,'            '],[0,'                if (typeof exact.symbol == \&quot;object\&quot;) {'],[0,'                    var selem = null;'],[-1,'            '],[0,'                    if (exact.symbol.type == \&quot;simplemarker\&quot;) {'],[0,'                        selem = this.createElementNS(\&quot;\&quot;, \&quot;SIMPLEMARKERSYMBOL\&quot;);'],[-1,'                    }'],[-1,'            '],[0,'                    if (selem != null) {'],[0,'                        if (typeof exact.symbol.antialiasing == \&quot;string\&quot;) {'],[0,'                            selem.setAttribute(\&quot;antialiasing\&quot;, exact.symbol.antialiasing);'],[-1,'                        }'],[0,'                        if (typeof exact.symbol.color == \&quot;string\&quot;) {'],[0,'                            selem.setAttribute(\&quot;color\&quot;, exact.symbol.color);'],[-1,'                        }'],[0,'                        if (typeof exact.symbol.outline == \&quot;string\&quot;) {'],[0,'                            selem.setAttribute(\&quot;outline\&quot;, exact.symbol.outline);'],[-1,'                        }'],[0,'                        if (typeof exact.symbol.overlap == \&quot;string\&quot;) {'],[0,'                            selem.setAttribute(\&quot;overlap\&quot;, exact.symbol.overlap);'],[-1,'                        }'],[0,'                        if (typeof exact.symbol.shadow == \&quot;string\&quot;) {'],[0,'                            selem.setAttribute(\&quot;shadow\&quot;, exact.symbol.shadow);'],[-1,'                        }'],[0,'                        if (typeof exact.symbol.transparency == \&quot;number\&quot;) {'],[0,'                            selem.setAttribute(\&quot;transparency\&quot;, exact.symbol.transparency);'],[-1,'                        }'],[-1,'                        \/\/if (typeof exact.symbol.type == \&quot;string\&quot;)'],[-1,'                        \/\/    selem.setAttribute(\&quot;type\&quot;, exact.symbol.type);'],[0,'                        if (typeof exact.symbol.usecentroid == \&quot;string\&quot;) {'],[0,'                            selem.setAttribute(\&quot;usecentroid\&quot;, exact.symbol.usecentroid);'],[-1,'                        }'],[0,'                        if (typeof exact.symbol.width == \&quot;number\&quot;) {'],[0,'                            selem.setAttribute(\&quot;width\&quot;, exact.symbol.width);'],[-1,'                        }'],[-1,'                '],[0,'                        eelem.appendChild(selem);'],[-1,'                    }'],[-1,'                }'],[-1,'            } \/\/ for each exact'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    addSimpleLabelRenderer: function(renderElem, renderer) {'],[0,'        renderElem.setAttribute(\&quot;field\&quot;, renderer.field);'],[0,'        var keys = [\'featureweight\', \'howmanylabels\', \'labelbufferratio\', '],[-1,'                    \'labelpriorities\', \'labelweight\', \'linelabelposition\','],[-1,'                    \'rotationalangles\'];'],[0,'        for (var i=0, len=keys.length; i&lt;len; i++) {'],[0,'            var key = keys[i];'],[0,'            if (renderer[key]) {'],[0,'                renderElem.setAttribute(key, renderer[key]);'],[-1,'            }'],[-1,'        }     '],[-1,'           '],[0,'        if (renderer.symbol.type == \&quot;text\&quot;) {'],[0,'            var symbol = renderer.symbol;'],[0,'            var selem = this.createElementNS(\&quot;\&quot;, \&quot;TEXTSYMBOL\&quot;);'],[0,'            renderElem.appendChild(selem);'],[-1,'          '],[0,'            var keys = this.fontStyleKeys;'],[0,'            for (var i=0, len=keys.length; i&lt;len; i++) {'],[0,'                var key = keys[i];'],[0,'                if (symbol[key]) {'],[0,'                    selem.setAttribute(key, renderer[key]);'],[-1,'                }'],[-1,'            }    '],[-1,'        }    '],[-1,'    },'],[-1,'    '],[-1,'    writePolygonGeometry: function(polygon) {'],[0,'        if (!(polygon instanceof OpenLayers.Geometry.Polygon)) {'],[0,'            throw { '],[-1,'                message:\'Cannot write polygon geometry to ArcXML with an \' +'],[-1,'                    polygon.CLASS_NAME + \' object.\','],[-1,'                geometry: polygon'],[-1,'            };'],[-1,'        }'],[-1,'        '],[0,'        var polyElem = this.createElementNS(\&quot;\&quot;, \&quot;POLYGON\&quot;);'],[-1,'      '],[0,'        for (var ln=0, lnlen=polygon.components.length; ln&lt;lnlen; ln++) {'],[0,'            var ring = polygon.components[ln];'],[0,'            var ringElem = this.createElementNS(\&quot;\&quot;, \&quot;RING\&quot;);'],[-1,'        '],[0,'            for (var rn=0, rnlen=ring.components.length; rn&lt;rnlen; rn++) {'],[0,'                var point = ring.components[rn];'],[0,'                var pointElem = this.createElementNS(\&quot;\&quot;, \&quot;POINT\&quot;);'],[-1,'            '],[0,'                pointElem.setAttribute(\&quot;x\&quot;, point.x);'],[0,'                pointElem.setAttribute(\&quot;y\&quot;, point.y);'],[-1,'            '],[0,'                ringElem.appendChild(pointElem);'],[-1,'            }'],[-1,'        '],[0,'            polyElem.appendChild(ringElem);'],[-1,'        }'],[-1,'      '],[0,'        return polyElem;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseResponse'],[-1,'     * Take an ArcXML response, and parse in into this object\'s internal properties.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {String} or {DOMElement} The ArcXML response, as either a string or the'],[-1,'     * top level DOMElement of the response.'],[-1,'     *\/'],[-1,'    parseResponse: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) { '],[0,'            var newData = new OpenLayers.Format.XML();'],[0,'            data = newData.read(data);'],[-1,'        }'],[0,'        var response = new OpenLayers.Format.ArcXML.Response();'],[-1,'        '],[0,'        var errorNode = data.getElementsByTagName(\&quot;ERROR\&quot;);'],[-1,'        '],[0,'        if (errorNode != null &amp;&amp; errorNode.length &gt; 0) {'],[0,'            response.error = this.getChildValue(errorNode, \&quot;Unknown error.\&quot;);'],[-1,'        } else {'],[0,'            var responseNode = data.getElementsByTagName(\&quot;RESPONSE\&quot;);'],[-1,'          '],[0,'            if (responseNode == null || responseNode.length == 0) {'],[0,'                response.error = \&quot;No RESPONSE tag found in ArcXML response.\&quot;;'],[0,'                return response;'],[-1,'            }'],[-1,'          '],[0,'            var rtype = responseNode[0].firstChild.nodeName;'],[0,'            if (rtype == \&quot;#text\&quot;) {'],[0,'                rtype = responseNode[0].firstChild.nextSibling.nodeName;'],[-1,'            }'],[-1,'          '],[0,'            if (rtype == \&quot;IMAGE\&quot;) {'],[0,'                var envelopeNode = data.getElementsByTagName(\&quot;ENVELOPE\&quot;);'],[0,'                var outputNode = data.getElementsByTagName(\&quot;OUTPUT\&quot;);'],[-1,'                '],[0,'                if (envelopeNode == null || envelopeNode.length == 0) {'],[0,'                    response.error = \&quot;No ENVELOPE tag found in ArcXML response.\&quot;;'],[0,'                } else if (outputNode == null || outputNode.length == 0) {'],[0,'                    response.error = \&quot;No OUTPUT tag found in ArcXML response.\&quot;;'],[-1,'                } else {'],[0,'                    var envAttr = this.parseAttributes(envelopeNode[0]);            '],[0,'                    var outputAttr = this.parseAttributes(outputNode[0]);'],[-1,'                  '],[0,'                    if (typeof outputAttr.type == \&quot;string\&quot;) {'],[0,'                        response.image = { '],[-1,'                            envelope: envAttr, '],[-1,'                            output: { '],[-1,'                                type: outputAttr.type, '],[-1,'                                data: this.getChildValue(outputNode[0])'],[-1,'                            }'],[-1,'                        };'],[-1,'                    } else {'],[0,'                        response.image = { envelope: envAttr, output: outputAttr };'],[-1,'                    }'],[-1,'                }'],[0,'            } else if (rtype == \&quot;FEATURES\&quot;) {'],[0,'                var features = responseNode[0].getElementsByTagName(\&quot;FEATURES\&quot;);'],[-1,'            '],[-1,'                \/\/ get the feature count'],[0,'                var featureCount = features[0].getElementsByTagName(\&quot;FEATURECOUNT\&quot;);'],[0,'                response.features.featurecount = featureCount[0].getAttribute(\&quot;count\&quot;);'],[-1,'            '],[0,'                if (response.features.featurecount &gt; 0) {'],[-1,'                    \/\/ get the feature envelope'],[0,'                    var envelope = features[0].getElementsByTagName(\&quot;ENVELOPE\&quot;);'],[0,'                    response.features.envelope = this.parseAttributes(envelope[0], typeof(0));'],[-1,''],[-1,'                    \/\/ get the field values per feature'],[0,'                    var featureList = features[0].getElementsByTagName(\&quot;FEATURE\&quot;);'],[0,'                    for (var fn = 0; fn &lt; featureList.length; fn++) {'],[0,'                        var feature = new OpenLayers.Feature.Vector();'],[0,'                        var fields = featureList[fn].getElementsByTagName(\&quot;FIELD\&quot;);'],[-1,''],[0,'                        for (var fdn = 0; fdn &lt; fields.length; fdn++) {'],[0,'                            var fieldName = fields[fdn].getAttribute(\&quot;name\&quot;);'],[0,'                            var fieldValue = fields[fdn].getAttribute(\&quot;value\&quot;);'],[0,'                            feature.attributes[ fieldName ] = fieldValue;'],[-1,'                        }'],[-1,''],[0,'                        var geom = featureList[fn].getElementsByTagName(\&quot;POLYGON\&quot;);'],[-1,''],[0,'                        if (geom.length &gt; 0) {'],[-1,'                            \/\/ if there is a polygon, create an openlayers polygon, and assign'],[-1,'                            \/\/ it to the .geometry property of the feature'],[0,'                            var ring = geom[0].getElementsByTagName(\&quot;RING\&quot;);'],[-1,''],[0,'                            var polys = [];'],[0,'                            for (var rn = 0; rn &lt; ring.length; rn++) {'],[0,'                                var linearRings = [];'],[0,'                                linearRings.push(this.parsePointGeometry(ring[rn]));'],[-1,''],[0,'                                var holes = ring[rn].getElementsByTagName(\&quot;HOLE\&quot;);'],[0,'                                for (var hn = 0; hn &lt; holes.length; hn++) {'],[0,'                                    linearRings.push(this.parsePointGeometry(holes[hn]));'],[-1,'                                }'],[0,'                                holes = null;'],[0,'                                polys.push(new OpenLayers.Geometry.Polygon(linearRings));'],[0,'                                linearRings = null;'],[-1,'                            }'],[0,'                            ring = null;'],[-1,'                          '],[0,'                            if (polys.length == 1) {'],[0,'                                feature.geometry = polys[0];'],[-1,'                            } else'],[-1,'                            {'],[0,'                                feature.geometry = new OpenLayers.Geometry.MultiPolygon(polys);'],[-1,'                            }'],[-1,'                        }'],[-1,''],[0,'                        response.features.feature.push(feature);'],[-1,'                    }'],[-1,'                }'],[-1,'            } else {'],[0,'                response.error = \&quot;Unidentified response type.\&quot;;'],[-1,'            }'],[-1,'        }'],[0,'        return response;'],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseAttributes'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {&lt;DOMElement&gt;} An element to parse attributes from.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An attributes object, with properties set to attribute values.'],[-1,'     *\/'],[-1,'    parseAttributes: function(node,type) {'],[0,'        var attributes = {};'],[0,'        for(var attr = 0; attr &lt; node.attributes.length; attr++) {'],[0,'            if (type == \&quot;number\&quot;) {'],[0,'                attributes[node.attributes[attr].nodeName] = parseFloat(node.attributes[attr].nodeValue);'],[-1,'            } else {'],[0,'                attributes[node.attributes[attr].nodeName] = node.attributes[attr].nodeValue;'],[-1,'            }'],[-1,'        }'],[0,'        return attributes;'],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parsePointGeometry'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {&lt;DOMElement&gt;} An element to parse &lt;COORDS&gt; or &lt;POINT&gt; arcxml data from.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry.LinearRing&gt;} A linear ring represented by the node\'s points.'],[-1,'     *\/'],[-1,'    parsePointGeometry: function(node) {'],[0,'        var ringPoints = [];'],[0,'        var coords = node.getElementsByTagName(\&quot;COORDS\&quot;);'],[-1,''],[0,'        if (coords.length &gt; 0) {'],[-1,'            \/\/ if coords is present, it\'s the only coords item'],[0,'            var coordArr = this.getChildValue(coords[0]);'],[0,'            coordArr = coordArr.split(\/;\/);'],[0,'            for (var cn = 0; cn &lt; coordArr.length; cn++) {'],[0,'                var coordItems = coordArr[cn].split(\/ \/);'],[0,'                ringPoints.push(new OpenLayers.Geometry.Point(coordItems[0], coordItems[1]));'],[-1,'            }'],[0,'            coords = null;'],[-1,'        } else {'],[0,'            var point = node.getElementsByTagName(\&quot;POINT\&quot;);'],[0,'            if (point.length &gt; 0) {'],[0,'                for (var pn = 0; pn &lt; point.length; pn++) {'],[0,'                    ringPoints.push('],[-1,'                        new OpenLayers.Geometry.Point('],[-1,'                            parseFloat(point[pn].getAttribute(\&quot;x\&quot;)),'],[-1,'                            parseFloat(point[pn].getAttribute(\&quot;y\&quot;))'],[-1,'                        )'],[-1,'                    );'],[-1,'                }'],[-1,'            }'],[0,'            point = null;'],[-1,'        }'],[-1,''],[0,'        return new OpenLayers.Geometry.LinearRing(ringPoints);      '],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.ArcXML\&quot; '],[-1,'});'],[-1,''],[1,'OpenLayers.Format.ArcXML.Request = OpenLayers.Class({'],[-1,'    initialize: function(params) {'],[0,'        var defaults = {'],[-1,'            get_image: {'],[-1,'                properties: {'],[-1,'                    background: null,'],[-1,'                    \/*{ '],[-1,'                        color: { r:255, g:255, b:255 },'],[-1,'                        transcolor: null'],[-1,'                    },*\/'],[-1,'                    draw: true,'],[-1,'                    envelope: {'],[-1,'                        minx: 0, '],[-1,'                        miny: 0, '],[-1,'                        maxx: 0, '],[-1,'                        maxy: 0'],[-1,'                    },'],[-1,'                    featurecoordsys: { '],[-1,'                        id:0, '],[-1,'                        string:\&quot;\&quot;,'],[-1,'                        datumtransformid:0,'],[-1,'                        datumtransformstring:\&quot;\&quot;'],[-1,'                    },'],[-1,'                    filtercoordsys:{'],[-1,'                        id:0,'],[-1,'                        string:\&quot;\&quot;,'],[-1,'                        datumtransformid:0,'],[-1,'                        datumtransformstring:\&quot;\&quot;'],[-1,'                    },'],[-1,'                    imagesize:{'],[-1,'                        height:0,'],[-1,'                        width:0,'],[-1,'                        dpi:96,'],[-1,'                        printheight:0,'],[-1,'                        printwidth:0,'],[-1,'                        scalesymbols:false'],[-1,'                    },'],[-1,'                    layerlist:[],'],[-1,'                    \/* no support for legends *\/'],[-1,'                    output:{'],[-1,'                        baseurl:\&quot;\&quot;,'],[-1,'                        legendbaseurl:\&quot;\&quot;,'],[-1,'                        legendname:\&quot;\&quot;,'],[-1,'                        legendpath:\&quot;\&quot;,'],[-1,'                        legendurl:\&quot;\&quot;,'],[-1,'                        name:\&quot;\&quot;,'],[-1,'                        path:\&quot;\&quot;,'],[-1,'                        type:\&quot;jpg\&quot;,'],[-1,'                        url:\&quot;\&quot;'],[-1,'                    }'],[-1,'                }'],[-1,'            },'],[-1,''],[-1,'            get_feature: {'],[-1,'                layer: \&quot;\&quot;,'],[-1,'                query: {'],[-1,'                    isspatial: false,'],[-1,'                    featurecoordsys: {'],[-1,'                        id:0,'],[-1,'                        string:\&quot;\&quot;,'],[-1,'                        datumtransformid:0,'],[-1,'                        datumtransformstring:\&quot;\&quot;'],[-1,'                    },'],[-1,'                    filtercoordsys: {'],[-1,'                        id:0,'],[-1,'                        string:\&quot;\&quot;,'],[-1,'                        datumtransformid:0,'],[-1,'                        datumtransformstring:\&quot;\&quot;'],[-1,'                    },'],[-1,'                    buffer:0,'],[-1,'                    where:\&quot;\&quot;,'],[-1,'                    spatialfilter: {'],[-1,'                        relation: \&quot;envelope_intersection\&quot;,'],[-1,'                        envelope: null'],[-1,'                    }'],[-1,'                }'],[-1,'            },'],[-1,'      '],[-1,'            environment: {'],[-1,'                separators: {'],[-1,'                    cs:\&quot; \&quot;,'],[-1,'                    ts:\&quot;;\&quot;'],[-1,'                }'],[-1,'            },'],[-1,'      '],[-1,'            layer: [],'],[-1,'            workspaces: []'],[-1,'        };'],[-1,'      '],[0,'        return OpenLayers.Util.extend(this, defaults);      '],[-1,'    },'],[-1,'  '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.ArcXML.Request\&quot;'],[-1,'});'],[-1,''],[1,'OpenLayers.Format.ArcXML.Response = OpenLayers.Class({  '],[-1,'    initialize: function(params) {'],[0,'        var defaults = {'],[-1,'            image: {'],[-1,'                envelope:null,'],[-1,'                output:\'\''],[-1,'            },'],[-1,'      '],[-1,'            features: {'],[-1,'                featurecount: 0,'],[-1,'                envelope: null,'],[-1,'                feature: []'],[-1,'            },'],[-1,'      '],[-1,'            error:\'\''],[-1,'        };'],[-1,'  '],[0,'        return OpenLayers.Util.extend(this, defaults);'],[-1,'    },'],[-1,'  '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.ArcXML.Response\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/ArcIMS.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' * @requires OpenLayers\/Format\/ArcXML.js'],[-1,' * @requires OpenLayers\/Request.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.ArcIMS'],[-1,' * Instances of OpenLayers.Layer.ArcIMS are used to display data from ESRI ArcIMS'],[-1,' *     Mapping Services. Create a new ArcIMS layer with the &lt;OpenLayers.Layer.ArcIMS&gt;'],[-1,' *     constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.ArcIMS = OpenLayers.Class(OpenLayers.Layer.Grid, {'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: DEFAULT_PARAMS'],[-1,'     * {Object} Default query string parameters.'],[-1,'     *\/'],[-1,'    DEFAULT_PARAMS: { '],[-1,'        ClientVersion: \&quot;9.2\&quot;,'],[-1,'        ServiceName: \'\''],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: featureCoordSys'],[-1,'     * {String} Code for feature coordinate system.  Default is \&quot;4326\&quot;.'],[-1,'     *\/'],[-1,'    featureCoordSys: \&quot;4326\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: filterCoordSys'],[-1,'     * {String} Code for filter coordinate system.  Default is \&quot;4326\&quot;.'],[-1,'     *\/'],[-1,'    filterCoordSys: \&quot;4326\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: layers'],[-1,'     * {Array} An array of objects with layer properties.'],[-1,'     *\/'],[-1,'    layers: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: async'],[-1,'     * {Boolean} Request images asynchronously.  Default is true.'],[-1,'     *\/'],[-1,'    async: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: name'],[-1,'     * {String} Layer name.  Default is \&quot;ArcIMS\&quot;.'],[-1,'     *\/'],[-1,'    name: \&quot;ArcIMS\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * {Boolean} The layer is a base layer.  Default is true.'],[-1,'     *\/'],[-1,'    isBaseLayer: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: DEFAULT_OPTIONS'],[-1,'     * {Object} Default layers properties.'],[-1,'     *\/'],[-1,'    DEFAULT_OPTIONS: {'],[-1,'        tileSize: new OpenLayers.Size(512, 512),'],[-1,'        featureCoordSys: \&quot;4326\&quot;,'],[-1,'        filterCoordSys: \&quot;4326\&quot;,'],[-1,'        layers: null,'],[-1,'        isBaseLayer: true,'],[-1,'        async: true,'],[-1,'        name: \&quot;ArcIMS\&quot;'],[-1,'    }, '],[-1,' '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.ArcIMS'],[-1,'     * Create a new ArcIMS layer object.'],[-1,'     *'],[-1,'     * Example:'],[-1,'     * (code)'],[-1,'     * var arcims = new OpenLayers.Layer.ArcIMS('],[-1,'     *     \&quot;Global Sample\&quot;,'],[-1,'     *     \&quot;http:\/\/sample.avencia.com\/servlet\/com.esri.esrimap.Esrimap\&quot;, '],[-1,'     *     {'],[-1,'     *         service: \&quot;OpenLayers_Sample\&quot;, '],[-1,'     *         layers: ['],[-1,'     *             \/\/ layers to manipulate'],[-1,'     *             {id: \&quot;1\&quot;, visible: true}'],[-1,'     *         ]'],[-1,'     *     }'],[-1,'     * );'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} A name for the layer'],[-1,'     * url - {String} Base url for the ArcIMS server'],[-1,'     * options - {Object} Optional object with properties to be set on the'],[-1,'     *     layer.'],[-1,'     *\/'],[-1,'    initialize: function(name, url, options) {'],[-1,'        '],[0,'        this.tileSize = new OpenLayers.Size(512, 512);'],[-1,''],[-1,'        \/\/ parameters'],[0,'        this.params = OpenLayers.Util.applyDefaults('],[-1,'            {ServiceName: options.serviceName},'],[-1,'            this.DEFAULT_PARAMS'],[-1,'        );'],[0,'        this.options = OpenLayers.Util.applyDefaults('],[-1,'            options, this.DEFAULT_OPTIONS'],[-1,'        );'],[-1,'          '],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply('],[-1,'            this, [name, url, this.params, options]'],[-1,'        );'],[-1,''],[-1,'        \/\/layer is transparent        '],[0,'        if (this.transparent) {'],[-1,'            '],[-1,'            \/\/ unless explicitly set in options, make layer an overlay'],[0,'            if (!this.isBaseLayer) {'],[0,'                this.isBaseLayer = false;'],[-1,'            } '],[-1,'            '],[-1,'            \/\/ jpegs can never be transparent, so intelligently switch the '],[-1,'            \/\/  format, depending on the browser\'s capabilities'],[0,'            if (this.format == \&quot;image\/jpeg\&quot;) {'],[0,'                this.format = OpenLayers.Util.alphaHack() ? \&quot;image\/gif\&quot; : \&quot;image\/png\&quot;;'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ create an empty layer list if no layers specified in the options'],[0,'        if (this.options.layers === null) {'],[0,'            this.options.layers = [];'],[-1,'        }'],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     * Return an image url this layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} A bounds representing the bbox for the'],[-1,'     *     request.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string with the map image\'s url.'],[-1,'     *\/'],[-1,'    getURL: function(bounds) {'],[0,'        var url = \&quot;\&quot;;'],[0,'        bounds = this.adjustBounds(bounds);'],[-1,'        '],[-1,'        \/\/ create an arcxml request to generate the image'],[0,'        var axlReq = new OpenLayers.Format.ArcXML( '],[-1,'            OpenLayers.Util.extend(this.options, {'],[-1,'                requesttype: \&quot;image\&quot;,'],[-1,'                envelope: bounds.toArray(),'],[-1,'                tileSize: this.tileSize'],[-1,'            })'],[-1,'        );'],[-1,'        '],[-1,'        \/\/ create a synchronous ajax request to get an arcims image'],[0,'        var req = new OpenLayers.Request.POST({'],[-1,'            url: this.getFullRequestString(),'],[-1,'            data: axlReq.write(),'],[-1,'            async: false'],[-1,'        });'],[-1,'        '],[-1,'        \/\/ if the response exists'],[0,'        if (req != null) {'],[0,'            var doc = req.responseXML;'],[-1,''],[0,'            if (!doc || !doc.documentElement) {            '],[0,'                doc = req.responseText;'],[-1,'            }'],[-1,''],[-1,'            \/\/ create a new arcxml format to read the response'],[0,'            var axlResp = new OpenLayers.Format.ArcXML();'],[0,'            var arcxml = axlResp.read(doc);'],[0,'            url = this.getUrlOrImage(arcxml.image.output);'],[-1,'        }'],[-1,'        '],[0,'        return url;'],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getURLasync'],[-1,'     * Get an image url this layer asynchronously, and execute a callback'],[-1,'     *     when the image url is generated.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} A bounds representing the bbox for the'],[-1,'     *     request.'],[-1,'     * callback - {Function} Function to call when image url is retrieved.'],[-1,'     * scope - {Object} The scope of the callback method.'],[-1,'     *\/'],[-1,'    getURLasync: function(bounds, callback, scope) {'],[0,'        bounds = this.adjustBounds(bounds);'],[-1,'        '],[-1,'        \/\/ create an arcxml request to generate the image'],[0,'        var axlReq = new OpenLayers.Format.ArcXML(  '],[-1,'            OpenLayers.Util.extend(this.options, { '],[-1,'                requesttype: \&quot;image\&quot;,'],[-1,'                envelope: bounds.toArray(),'],[-1,'                tileSize: this.tileSize'],[-1,'            })'],[-1,'        );'],[-1,'        '],[-1,'        \/\/ create an asynchronous ajax request to get an arcims image'],[0,'        OpenLayers.Request.POST({'],[-1,'            url: this.getFullRequestString(),'],[-1,'            async: true,'],[-1,'            data: axlReq.write(),'],[-1,'            callback: function(req) {'],[-1,'                \/\/ process the response from ArcIMS, and call the callback function'],[-1,'                \/\/ to set the image URL'],[0,'                var doc = req.responseXML;'],[0,'                if (!doc || !doc.documentElement) {            '],[0,'                    doc = req.responseText;'],[-1,'                }'],[-1,''],[-1,'                \/\/ create a new arcxml format to read the response'],[0,'                var axlResp = new OpenLayers.Format.ArcXML();'],[0,'                var arcxml = axlResp.read(doc);'],[-1,'                '],[0,'                callback.call(scope, this.getUrlOrImage(arcxml.image.output));'],[-1,'            },'],[-1,'            scope: this'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getUrlOrImage'],[-1,'     * Extract a url or image from the ArcXML image output.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * output - {Object} The image.output property of the object returned from'],[-1,'     *     the ArcXML format read method.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A URL for an image (potentially with the data protocol).'],[-1,'     *\/'],[-1,'    getUrlOrImage: function(output) {'],[0,'        var ret = \&quot;\&quot;;'],[0,'        if(output.url) {'],[-1,'            \/\/ If the image response output url is a string, then the image'],[-1,'            \/\/ data is not inline.'],[0,'            ret = output.url;'],[0,'        } else if(output.data) {'],[-1,'            \/\/ The image data is inline and base64 encoded, create a data'],[-1,'            \/\/ url for the image.  This will only work for small images,'],[-1,'            \/\/ due to browser url length limits.'],[0,'            ret = \&quot;data:image\/\&quot; + output.type + '],[-1,'                  \&quot;;base64,\&quot; + output.data;'],[-1,'        }'],[0,'        return ret;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setLayerQuery'],[-1,'     * Set the query definition on this layer. Query definitions are used to'],[-1,'     *     render parts of the spatial data in an image, and can be used to'],[-1,'     *     filter features or layers in the ArcIMS service.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * id - {String} The ArcIMS layer ID.'],[-1,'     * querydef - {Object} The query definition to apply to this layer.'],[-1,'     *\/'],[-1,'    setLayerQuery: function(id, querydef) {'],[-1,'        \/\/ find the matching layer, if it exists'],[0,'        for (var lyr = 0; lyr &lt; this.options.layers.length; lyr++) {'],[0,'            if (id == this.options.layers[lyr].id) {'],[-1,'                \/\/ replace this layer definition'],[0,'                this.options.layers[lyr].query = querydef;'],[0,'                return;'],[-1,'            }'],[-1,'        }'],[-1,'      '],[-1,'        \/\/ no layer found, create a new definition'],[0,'        this.options.layers.push({id: id, visible: true, query: querydef});'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getFeatureInfo'],[-1,'     * Get feature information from ArcIMS.  Using the applied geometry, apply'],[-1,'     *     the options to the query (buffer, area\/envelope intersection), and'],[-1,'     *     query the ArcIMS service.'],[-1,'     *'],[-1,'     * A note about accuracy:'],[-1,'     * ArcIMS interprets the accuracy attribute in feature requests to be'],[-1,'     *     something like the \'modulus\' operator on feature coordinates,'],[-1,'     *     applied to the database geometry of the feature.  It doesn\'t round,'],[-1,'     *     so your feature coordinates may be up to (1 x accuracy) offset from'],[-1,'     *     the actual feature coordinates.  If the accuracy of the layer is not'],[-1,'     *     specified, the accuracy will be computed to be approximately 1'],[-1,'     *     feature coordinate per screen  pixel.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.LonLat&gt;} or {&lt;OpenLayers.Geometry.Polygon&gt;} The'],[-1,'     *     geometry to use when making the query. This should be a closed'],[-1,'     *     polygon for behavior approximating a free selection.'],[-1,'     * layer - {Object} The ArcIMS layer definition. This is an anonymous object'],[-1,'     *     that looks like:'],[-1,'     * (code)'],[-1,'     * {'],[-1,'     *     id: \&quot;ArcXML layer ID\&quot;,  \/\/ the ArcXML layer ID'],[-1,'     *     query: {'],[-1,'     *         where: \&quot;STATE = \'PA\'\&quot;,  \/\/ the where clause of the query'],[-1,'     *         accuracy: 100           \/\/ the accuracy of the returned feature'],[-1,'     *     }'],[-1,'     * }'],[-1,'     * (end)'],[-1,'     * options - {Object} Object with non-default properties to set on the layer.'],[-1,'     *     Supported properties are buffer, callback, scope, and any other'],[-1,'     *     properties applicable to the ArcXML format.  Set the \'callback\' and'],[-1,'     *     \'scope\' for an object and function to recieve the parsed features'],[-1,'     *     from ArcIMS.'],[-1,'     *\/'],[-1,'    getFeatureInfo: function(geometry, layer, options) {'],[-1,'        \/\/ set the buffer to 1 unit (dd\/m\/ft?) by default'],[0,'        var buffer = options.buffer || 1;'],[-1,'        \/\/ empty callback by default'],[0,'        var callback = options.callback || function() {};'],[-1,'        \/\/ default scope is window (global)'],[0,'        var scope = options.scope || window;'],[-1,''],[-1,'        \/\/ apply these option to the request options'],[0,'        var requestOptions = {};'],[0,'        OpenLayers.Util.extend(requestOptions, this.options);'],[-1,''],[-1,'        \/\/ this is a feature request'],[0,'        requestOptions.requesttype = \&quot;feature\&quot;;'],[-1,''],[0,'        if (geometry instanceof OpenLayers.LonLat) {'],[-1,'            \/\/ create an envelope if the geometry is really a lon\/lat'],[0,'            requestOptions.polygon = null;'],[0,'            requestOptions.envelope = [ '],[-1,'                geometry.lon - buffer, '],[-1,'                geometry.lat - buffer,'],[-1,'                geometry.lon + buffer,'],[-1,'                geometry.lat + buffer'],[-1,'            ];'],[0,'        } else if (geometry instanceof OpenLayers.Geometry.Polygon) {'],[-1,'            \/\/ use the polygon assigned, and empty the envelope'],[0,'            requestOptions.envelope = null;'],[0,'            requestOptions.polygon = geometry;'],[-1,'        }'],[-1,'      '],[-1,'        \/\/ create an arcxml request to get feature requests'],[0,'        var arcxml = new OpenLayers.Format.ArcXML(requestOptions);'],[-1,''],[-1,'        \/\/ apply any get feature options to the arcxml request'],[0,'        OpenLayers.Util.extend(arcxml.request.get_feature, options);'],[-1,''],[0,'        arcxml.request.get_feature.layer = layer.id;'],[0,'        if (typeof layer.query.accuracy == \&quot;number\&quot;) {'],[-1,'            \/\/ set the accuracy if it was specified'],[0,'            arcxml.request.get_feature.query.accuracy = layer.query.accuracy;'],[-1,'        } else {'],[-1,'            \/\/ guess that the accuracy is 1 per screen pixel'],[0,'            var mapCenter = this.map.getCenter();'],[0,'            var viewPx = this.map.getViewPortPxFromLonLat(mapCenter);'],[0,'            viewPx.x++;'],[0,'            var mapOffCenter = this.map.getLonLatFromPixel(viewPx);'],[0,'            arcxml.request.get_feature.query.accuracy = mapOffCenter.lon - mapCenter.lon;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ set the get_feature query to be the same as the layer passed in'],[0,'        arcxml.request.get_feature.query.where = layer.query.where;'],[-1,'        '],[-1,'        \/\/ use area_intersection'],[0,'        arcxml.request.get_feature.query.spatialfilter.relation = \&quot;area_intersection\&quot;;'],[-1,'      '],[-1,'        \/\/ create a new asynchronous request to get the feature info'],[0,'        OpenLayers.Request.POST({'],[-1,'            url: this.getFullRequestString({\'CustomService\': \'Query\'}),'],[-1,'            data: arcxml.write(),'],[-1,'            callback: function(request) {'],[-1,'                \/\/ parse the arcxml response'],[0,'                var response = arcxml.parseResponse(request.responseText);'],[-1,'                '],[0,'                if (!arcxml.iserror()) {'],[-1,'                    \/\/ if the arcxml is not an error, call the callback with the features parsed'],[0,'                    callback.call(scope, response.features);'],[-1,'                } else {'],[-1,'                    \/\/ if the arcxml is an error, return null features selected'],[0,'                    callback.call(scope, null);'],[-1,'                }'],[-1,'            }'],[-1,'        });'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clone'],[-1,'     * Create a clone of this layer'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.ArcIMS&gt;} An exact clone of this layer'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[-1,''],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.ArcIMS(this.name,'],[-1,'                                           this.url,'],[-1,'                                           this.getOptions());'],[-1,'        }'],[-1,''],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);'],[-1,''],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[-1,''],[0,'        return obj;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.ArcIMS\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/PanZoom.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Events\/buttonclick.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.PanZoom'],[-1,' * The PanZoom is a visible control, composed of a'],[-1,' * &lt;OpenLayers.Control.PanPanel&gt; and a &lt;OpenLayers.Control.ZoomPanel&gt;. By'],[-1,' * default it is drawn in the upper left corner of the map.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.PanZoom = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: slideFactor'],[-1,'     * {Integer} Number of pixels by which we\'ll pan the map in any direction '],[-1,'     *     on clicking the arrow buttons.  If you want to pan by some ratio'],[-1,'     *     of the map dimensions, use &lt;slideRatio&gt; instead.'],[-1,'     *\/'],[-1,'    slideFactor: 50,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: slideRatio'],[-1,'     * {Number} The fraction of map width\/height by which we\'ll pan the map            '],[-1,'     *     on clicking the arrow buttons.  Default is null.  If set, will'],[-1,'     *     override &lt;slideFactor&gt;. E.g. if slideRatio is .5, then the Pan Up'],[-1,'     *     button will pan up half the map height. '],[-1,'     *\/'],[-1,'    slideRatio: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: buttons'],[-1,'     * {Array(DOMElement)} Array of Button Divs '],[-1,'     *\/'],[-1,'    buttons: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: position'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} '],[-1,'     *\/'],[-1,'    position: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.PanZoom'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * options - {Object}'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        this.position = new OpenLayers.Pixel(OpenLayers.Control.PanZoom.X,'],[-1,'                                             OpenLayers.Control.PanZoom.Y);'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if (this.map) {'],[0,'            this.map.events.unregister(\&quot;buttonclick\&quot;, this, this.onButtonClick);'],[-1,'        }'],[0,'        this.removeButtons();'],[0,'        this.buttons = null;'],[0,'        this.position = null;'],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: setMap'],[-1,'     *'],[-1,'     * Properties:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} '],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Control.prototype.setMap.apply(this, arguments);'],[0,'        this.map.events.register(\&quot;buttonclick\&quot;, this, this.onButtonClick);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} A reference to the container div for the PanZoom control.'],[-1,'     *\/'],[-1,'    draw: function(px) {'],[-1,'        \/\/ initialize our internal div'],[0,'        OpenLayers.Control.prototype.draw.apply(this, arguments);'],[0,'        px = this.position;'],[-1,''],[-1,'        \/\/ place the controls'],[0,'        this.buttons = [];'],[-1,''],[0,'        var sz = {w: 18, h: 18};'],[0,'        var centered = new OpenLayers.Pixel(px.x+sz.w\/2, px.y);'],[-1,''],[0,'        this._addButton(\&quot;panup\&quot;, \&quot;north-mini.png\&quot;, centered, sz);'],[0,'        px.y = centered.y+sz.h;'],[0,'        this._addButton(\&quot;panleft\&quot;, \&quot;west-mini.png\&quot;, px, sz);'],[0,'        this._addButton(\&quot;panright\&quot;, \&quot;east-mini.png\&quot;, px.add(sz.w, 0), sz);'],[0,'        this._addButton(\&quot;pandown\&quot;, \&quot;south-mini.png\&quot;, '],[-1,'                        centered.add(0, sz.h*2), sz);'],[0,'        this._addButton(\&quot;zoomin\&quot;, \&quot;zoom-plus-mini.png\&quot;, '],[-1,'                        centered.add(0, sz.h*3+5), sz);'],[0,'        this._addButton(\&quot;zoomworld\&quot;, \&quot;zoom-world-mini.png\&quot;, '],[-1,'                        centered.add(0, sz.h*4+5), sz);'],[0,'        this._addButton(\&quot;zoomout\&quot;, \&quot;zoom-minus-mini.png\&quot;, '],[-1,'                        centered.add(0, sz.h*5+5), sz);'],[0,'        return this.div;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: _addButton'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * id - {String} '],[-1,'     * img - {String} '],[-1,'     * xy - {&lt;OpenLayers.Pixel&gt;} '],[-1,'     * sz - {&lt;OpenLayers.Size&gt;} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} A Div (an alphaImageDiv, to be precise) that contains the'],[-1,'     *     image of the button, and has all the proper event handlers set.'],[-1,'     *\/'],[-1,'    _addButton:function(id, img, xy, sz) {'],[0,'        var imgLocation = OpenLayers.Util.getImageLocation(img);'],[0,'        var btn = OpenLayers.Util.createAlphaImageDiv('],[-1,'                                    this.id + \&quot;_\&quot; + id, '],[-1,'                                    xy, sz, imgLocation, \&quot;absolute\&quot;);'],[0,'        btn.style.cursor = \&quot;pointer\&quot;;'],[-1,'        \/\/we want to add the outer div'],[0,'        this.div.appendChild(btn);'],[0,'        btn.action = id;'],[0,'        btn.className = \&quot;olButton\&quot;;'],[-1,'    '],[-1,'        \/\/we want to remember\/reference the outer div'],[0,'        this.buttons.push(btn);'],[0,'        return btn;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: _removeButton'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * btn - {Object}'],[-1,'     *\/'],[-1,'    _removeButton: function(btn) {'],[0,'        this.div.removeChild(btn);'],[0,'        OpenLayers.Util.removeItem(this.buttons, btn);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: removeButtons'],[-1,'     *\/'],[-1,'    removeButtons: function() {'],[0,'        for(var i=this.buttons.length-1; i&gt;=0; --i) {'],[0,'            this._removeButton(this.buttons[i]);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onButtonClick'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *\/'],[-1,'    onButtonClick: function(evt) {'],[0,'        var btn = evt.buttonElement;'],[0,'        switch (btn.action) {'],[-1,'            case \&quot;panup\&quot;: '],[0,'                this.map.pan(0, -this.getSlideFactor(\&quot;h\&quot;));'],[0,'                break;'],[-1,'            case \&quot;pandown\&quot;: '],[0,'                this.map.pan(0, this.getSlideFactor(\&quot;h\&quot;));'],[0,'                break;'],[-1,'            case \&quot;panleft\&quot;: '],[0,'                this.map.pan(-this.getSlideFactor(\&quot;w\&quot;), 0);'],[0,'                break;'],[-1,'            case \&quot;panright\&quot;: '],[0,'                this.map.pan(this.getSlideFactor(\&quot;w\&quot;), 0);'],[0,'                break;'],[-1,'            case \&quot;zoomin\&quot;: '],[0,'                this.map.zoomIn(); '],[0,'                break;'],[-1,'            case \&quot;zoomout\&quot;: '],[0,'                this.map.zoomOut(); '],[0,'                break;'],[-1,'            case \&quot;zoomworld\&quot;: '],[0,'                this.map.zoomToMaxExtent(); '],[0,'                break;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getSlideFactor'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * dim - {String} \&quot;w\&quot; or \&quot;h\&quot; (for width or height).'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number} The slide factor for panning in the requested direction.'],[-1,'     *\/'],[-1,'    getSlideFactor: function(dim) {'],[0,'        return this.slideRatio ?'],[-1,'            this.map.getSize()[dim] * this.slideRatio :'],[-1,'            this.slideFactor;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.PanZoom\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Constant: X'],[-1,' * {Integer}'],[-1,' *\/'],[1,'OpenLayers.Control.PanZoom.X = 4;'],[-1,''],[-1,'\/**'],[-1,' * Constant: Y'],[-1,' * {Integer}'],[-1,' *\/'],[1,'OpenLayers.Control.PanZoom.Y = 4;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/PanZoomBar.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control\/PanZoom.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.PanZoomBar'],[-1,' * The PanZoomBar is a visible control composed of a'],[-1,' * &lt;OpenLayers.Control.PanPanel&gt; and a &lt;OpenLayers.Control.ZoomBar&gt;. '],[-1,' * By default it is displayed in the upper left corner of the map as 4'],[-1,' * directional arrows above a vertical slider.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control.PanZoom&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.PanZoomBar = OpenLayers.Class(OpenLayers.Control.PanZoom, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: zoomStopWidth'],[-1,'     *\/'],[-1,'    zoomStopWidth: 18,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: zoomStopHeight'],[-1,'     *\/'],[-1,'    zoomStopHeight: 11,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: slider'],[-1,'     *\/'],[-1,'    slider: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: sliderEvents'],[-1,'     * {&lt;OpenLayers.Events&gt;}'],[-1,'     *\/'],[-1,'    sliderEvents: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: zoombarDiv'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    zoombarDiv: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: zoomWorldIcon'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    zoomWorldIcon: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: panIcons'],[-1,'     * {Boolean} Set this property to false not to display the pan icons. If'],[-1,'     * false the zoom world icon is placed under the zoom bar. Defaults to'],[-1,'     * true.'],[-1,'     *\/'],[-1,'    panIcons: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: forceFixedZoomLevel'],[-1,'     * {Boolean} Force a fixed zoom level even though the map has '],[-1,'     *     fractionalZoom'],[-1,'     *\/'],[-1,'    forceFixedZoomLevel: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: mouseDragStart'],[-1,'     * {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *\/'],[-1,'    mouseDragStart: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: deltaY'],[-1,'     * {Number} The cumulative vertical pixel offset during a zoom bar drag.'],[-1,'     *\/'],[-1,'    deltaY: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: zoomStart'],[-1,'     * {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *\/'],[-1,'    zoomStart: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.PanZoomBar'],[-1,'     *\/ '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,''],[0,'        this._removeZoomBar();'],[-1,''],[0,'        this.map.events.un({'],[-1,'            \&quot;changebaselayer\&quot;: this.redraw,'],[-1,'            \&quot;updatesize\&quot;: this.redraw,'],[-1,'            scope: this'],[-1,'        });'],[-1,''],[0,'        OpenLayers.Control.PanZoom.prototype.destroy.apply(this, arguments);'],[-1,''],[0,'        delete this.mouseDragStart;'],[0,'        delete this.zoomStart;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} '],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Control.PanZoom.prototype.setMap.apply(this, arguments);'],[0,'        this.map.events.on({'],[-1,'            \&quot;changebaselayer\&quot;: this.redraw,'],[-1,'            \&quot;updatesize\&quot;: this.redraw,'],[-1,'            scope: this'],[-1,'        });'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: redraw'],[-1,'     * clear the div and start over.'],[-1,'     *\/'],[-1,'    redraw: function() {'],[0,'        if (this.div != null) {'],[0,'            this.removeButtons();'],[0,'            this._removeZoomBar();'],[-1,'        }  '],[0,'        this.draw();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'    * Method: draw '],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * px - {&lt;OpenLayers.Pixel&gt;} '],[-1,'    *\/'],[-1,'    draw: function(px) {'],[-1,'        \/\/ initialize our internal div'],[0,'        OpenLayers.Control.prototype.draw.apply(this, arguments);'],[0,'        px = this.position.clone();'],[-1,''],[-1,'        \/\/ place the controls'],[0,'        this.buttons = [];'],[-1,''],[0,'        var sz = {w: 18, h: 18};'],[0,'        if (this.panIcons) {'],[0,'            var centered = new OpenLayers.Pixel(px.x+sz.w\/2, px.y);'],[0,'            var wposition = sz.w;'],[-1,''],[0,'            if (this.zoomWorldIcon) {'],[0,'                centered = new OpenLayers.Pixel(px.x+sz.w, px.y);'],[-1,'            }'],[-1,''],[0,'            this._addButton(\&quot;panup\&quot;, \&quot;north-mini.png\&quot;, centered, sz);'],[0,'            px.y = centered.y+sz.h;'],[0,'            this._addButton(\&quot;panleft\&quot;, \&quot;west-mini.png\&quot;, px, sz);'],[0,'            if (this.zoomWorldIcon) {'],[0,'                this._addButton(\&quot;zoomworld\&quot;, \&quot;zoom-world-mini.png\&quot;, px.add(sz.w, 0), sz);'],[-1,''],[0,'                wposition *= 2;'],[-1,'            }'],[0,'            this._addButton(\&quot;panright\&quot;, \&quot;east-mini.png\&quot;, px.add(wposition, 0), sz);'],[0,'            this._addButton(\&quot;pandown\&quot;, \&quot;south-mini.png\&quot;, centered.add(0, sz.h*2), sz);'],[0,'            this._addButton(\&quot;zoomin\&quot;, \&quot;zoom-plus-mini.png\&quot;, centered.add(0, sz.h*3+5), sz);'],[0,'            centered = this._addZoomBar(centered.add(0, sz.h*4 + 5));'],[0,'            this._addButton(\&quot;zoomout\&quot;, \&quot;zoom-minus-mini.png\&quot;, centered, sz);'],[-1,'        }'],[-1,'        else {'],[0,'            this._addButton(\&quot;zoomin\&quot;, \&quot;zoom-plus-mini.png\&quot;, px, sz);'],[0,'            centered = this._addZoomBar(px.add(0, sz.h));'],[0,'            this._addButton(\&quot;zoomout\&quot;, \&quot;zoom-minus-mini.png\&quot;, centered, sz);'],[0,'            if (this.zoomWorldIcon) {'],[0,'                centered = centered.add(0, sz.h+3);'],[0,'                this._addButton(\&quot;zoomworld\&quot;, \&quot;zoom-world-mini.png\&quot;, centered, sz);'],[-1,'            }'],[-1,'        }'],[0,'        return this.div;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'    * Method: _addZoomBar'],[-1,'    * '],[-1,'    * Parameters:'],[-1,'    * centered - {&lt;OpenLayers.Pixel&gt;} where zoombar drawing is to start.'],[-1,'    *\/'],[-1,'    _addZoomBar:function(centered) {'],[0,'        var imgLocation = OpenLayers.Util.getImageLocation(\&quot;slider.png\&quot;);'],[0,'        var id = this.id + \&quot;_\&quot; + this.map.id;'],[0,'        var minZoom = this.map.getMinZoom();'],[0,'        var zoomsToEnd = this.map.getNumZoomLevels() - 1 - this.map.getZoom();'],[0,'        var slider = OpenLayers.Util.createAlphaImageDiv(id,'],[-1,'                       centered.add(-1, zoomsToEnd * this.zoomStopHeight), '],[-1,'                       {w: 20, h: 9},'],[-1,'                       imgLocation,'],[-1,'                       \&quot;absolute\&quot;);'],[0,'        slider.style.cursor = \&quot;move\&quot;;'],[0,'        this.slider = slider;'],[-1,'        '],[0,'        this.sliderEvents = new OpenLayers.Events(this, slider, null, true,'],[-1,'                                            {includeXY: true});'],[0,'        this.sliderEvents.on({'],[-1,'            \&quot;touchstart\&quot;: this.zoomBarDown,'],[-1,'            \&quot;touchmove\&quot;: this.zoomBarDrag,'],[-1,'            \&quot;touchend\&quot;: this.zoomBarUp,'],[-1,'            \&quot;mousedown\&quot;: this.zoomBarDown,'],[-1,'            \&quot;mousemove\&quot;: this.zoomBarDrag,'],[-1,'            \&quot;mouseup\&quot;: this.zoomBarUp'],[-1,'        });'],[-1,'        '],[0,'        var sz = {'],[-1,'            w: this.zoomStopWidth,'],[-1,'            h: this.zoomStopHeight * (this.map.getNumZoomLevels() - minZoom)'],[-1,'        };'],[0,'        var imgLocation = OpenLayers.Util.getImageLocation(\&quot;zoombar.png\&quot;);'],[0,'        var div = null;'],[-1,'        '],[0,'        if (OpenLayers.Util.alphaHack()) {'],[0,'            var id = this.id + \&quot;_\&quot; + this.map.id;'],[0,'            div = OpenLayers.Util.createAlphaImageDiv(id, centered,'],[-1,'                                      {w: sz.w, h: this.zoomStopHeight},'],[-1,'                                      imgLocation,'],[-1,'                                      \&quot;absolute\&quot;, null, \&quot;crop\&quot;);'],[0,'            div.style.height = sz.h + \&quot;px\&quot;;'],[-1,'        } else {'],[0,'            div = OpenLayers.Util.createDiv('],[-1,'                        \'OpenLayers_Control_PanZoomBar_Zoombar\' + this.map.id,'],[-1,'                        centered,'],[-1,'                        sz,'],[-1,'                        imgLocation);'],[-1,'        }'],[0,'        div.style.cursor = \&quot;pointer\&quot;;'],[0,'        div.className = \&quot;olButton\&quot;;'],[0,'        this.zoombarDiv = div;'],[-1,'        '],[0,'        this.div.appendChild(div);'],[-1,''],[0,'        this.startTop = parseInt(div.style.top);'],[0,'        this.div.appendChild(slider);'],[-1,''],[0,'        this.map.events.register(\&quot;zoomend\&quot;, this, this.moveZoomBar);'],[-1,''],[0,'        centered = centered.add(0, '],[-1,'            this.zoomStopHeight * (this.map.getNumZoomLevels() - minZoom));'],[0,'        return centered; '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: _removeZoomBar'],[-1,'     *\/'],[-1,'    _removeZoomBar: function() {'],[0,'        this.sliderEvents.un({'],[-1,'            \&quot;touchstart\&quot;: this.zoomBarDown,'],[-1,'            \&quot;touchmove\&quot;: this.zoomBarDrag,'],[-1,'            \&quot;touchend\&quot;: this.zoomBarUp,'],[-1,'            \&quot;mousedown\&quot;: this.zoomBarDown,'],[-1,'            \&quot;mousemove\&quot;: this.zoomBarDrag,'],[-1,'            \&quot;mouseup\&quot;: this.zoomBarUp'],[-1,'        });'],[0,'        this.sliderEvents.destroy();'],[-1,'        '],[0,'        this.div.removeChild(this.zoombarDiv);'],[0,'        this.zoombarDiv = null;'],[0,'        this.div.removeChild(this.slider);'],[0,'        this.slider = null;'],[-1,'        '],[0,'        this.map.events.unregister(\&quot;zoomend\&quot;, this, this.moveZoomBar);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onButtonClick'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *\/'],[-1,'    onButtonClick: function(evt) {'],[0,'        OpenLayers.Control.PanZoom.prototype.onButtonClick.apply(this, arguments);'],[0,'        if (evt.buttonElement === this.zoombarDiv) {'],[0,'            var levels = evt.buttonXY.y \/ this.zoomStopHeight;'],[0,'            if(this.forceFixedZoomLevel || !this.map.fractionalZoom) {'],[0,'                levels = Math.floor(levels);'],[-1,'            }    '],[0,'            var zoom = (this.map.getNumZoomLevels() - 1) - levels; '],[0,'            zoom = Math.min(Math.max(zoom, 0), this.map.getNumZoomLevels() - 1);'],[0,'            this.map.zoomTo(zoom);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: passEventToSlider'],[-1,'     * This function is used to pass events that happen on the div, or the map,'],[-1,'     * through to the slider, which then does its moving thing.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;} '],[-1,'     *\/'],[-1,'    passEventToSlider:function(evt) {'],[0,'        this.sliderEvents.handleBrowserEvent(evt);'],[-1,'    },'],[-1,'    '],[-1,'    \/*'],[-1,'     * Method: zoomBarDown'],[-1,'     * event listener for clicks on the slider'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;} '],[-1,'     *\/'],[-1,'    zoomBarDown:function(evt) {'],[0,'        if (!OpenLayers.Event.isLeftClick(evt) &amp;&amp; !OpenLayers.Event.isSingleTouch(evt)) {'],[0,'            return;'],[-1,'        }'],[0,'        this.map.events.on({'],[-1,'            \&quot;touchmove\&quot;: this.passEventToSlider,'],[-1,'            \&quot;mousemove\&quot;: this.passEventToSlider,'],[-1,'            \&quot;mouseup\&quot;: this.passEventToSlider,'],[-1,'            scope: this'],[-1,'        });'],[0,'        this.mouseDragStart = evt.xy.clone();'],[0,'        this.zoomStart = evt.xy.clone();'],[0,'        this.div.style.cursor = \&quot;move\&quot;;'],[-1,'        \/\/ reset the div offsets just in case the div moved'],[0,'        this.zoombarDiv.offsets = null; '],[0,'        OpenLayers.Event.stop(evt);'],[-1,'    },'],[-1,'    '],[-1,'    \/*'],[-1,'     * Method: zoomBarDrag'],[-1,'     * This is what happens when a click has occurred, and the client is'],[-1,'     * dragging.  Here we must ensure that the slider doesn\'t go beyond the'],[-1,'     * bottom\/top of the zoombar div, as well as moving the slider to its new'],[-1,'     * visual location'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;} '],[-1,'     *\/'],[-1,'    zoomBarDrag:function(evt) {'],[0,'        if (this.mouseDragStart != null) {'],[0,'            var deltaY = this.mouseDragStart.y - evt.xy.y;'],[0,'            var offsets = OpenLayers.Util.pagePosition(this.zoombarDiv);'],[0,'            if ((evt.clientY - offsets[1]) &gt; 0 &amp;&amp; '],[-1,'                (evt.clientY - offsets[1]) &lt; parseInt(this.zoombarDiv.style.height) - 2) {'],[0,'                var newTop = parseInt(this.slider.style.top) - deltaY;'],[0,'                this.slider.style.top = newTop+\&quot;px\&quot;;'],[0,'                this.mouseDragStart = evt.xy.clone();'],[-1,'            }'],[-1,'            \/\/ set cumulative displacement'],[0,'            this.deltaY = this.zoomStart.y - evt.xy.y;'],[0,'            OpenLayers.Event.stop(evt);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/*'],[-1,'     * Method: zoomBarUp'],[-1,'     * Perform cleanup when a mouseup event is received -- discover new zoom'],[-1,'     * level and switch to it.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;} '],[-1,'     *\/'],[-1,'    zoomBarUp:function(evt) {'],[0,'        if (!OpenLayers.Event.isLeftClick(evt) &amp;&amp; evt.type !== \&quot;touchend\&quot;) {'],[0,'            return;'],[-1,'        }'],[0,'        if (this.mouseDragStart) {'],[0,'            this.div.style.cursor=\&quot;\&quot;;'],[0,'            this.map.events.un({'],[-1,'                \&quot;touchmove\&quot;: this.passEventToSlider,'],[-1,'                \&quot;mouseup\&quot;: this.passEventToSlider,'],[-1,'                \&quot;mousemove\&quot;: this.passEventToSlider,'],[-1,'                scope: this'],[-1,'            });'],[0,'            var zoomLevel = this.map.zoom;'],[0,'            if (!this.forceFixedZoomLevel &amp;&amp; this.map.fractionalZoom) {'],[0,'                zoomLevel += this.deltaY\/this.zoomStopHeight;'],[0,'                zoomLevel = Math.min(Math.max(zoomLevel, 0), '],[-1,'                                     this.map.getNumZoomLevels() - 1);'],[-1,'            } else {'],[0,'                zoomLevel += this.deltaY\/this.zoomStopHeight;'],[0,'                zoomLevel = Math.max(Math.round(zoomLevel), 0);      '],[-1,'            }'],[0,'            this.map.zoomTo(zoomLevel);'],[0,'            this.mouseDragStart = null;'],[0,'            this.zoomStart = null;'],[0,'            this.deltaY = 0;'],[0,'            OpenLayers.Event.stop(evt);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/*'],[-1,'    * Method: moveZoomBar'],[-1,'    * Change the location of the slider to match the current zoom level.'],[-1,'    *\/'],[-1,'    moveZoomBar:function() {'],[0,'        var newTop = '],[-1,'            ((this.map.getNumZoomLevels()-1) - this.map.getZoom()) * '],[-1,'            this.zoomStopHeight + this.startTop + 1;'],[0,'        this.slider.style.top = newTop + \&quot;px\&quot;;'],[-1,'    },    '],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.PanZoomBar\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WFSCapabilities\/v1_1_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WFSCapabilities\/v1.js'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WFSCapabilities\/v1_1_0'],[-1,' * Read WFS Capabilities version 1.1.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WFSCapabilities&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WFSCapabilities.v1_1_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.WFSCapabilities.v1, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WFSCapabilities.v1_1_0'],[-1,'     * Create a new parser for WFS capabilities version 1.1.0.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wfs\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;DefaultSRS\&quot;: function(node, obj) {'],[0,'                var defaultSRS = this.getChildValue(node);'],[0,'                if (defaultSRS) {'],[0,'                    obj.srs = defaultSRS;'],[-1,'                }'],[-1,'            }'],[-1,'        }, OpenLayers.Format.WFSCapabilities.v1.prototype.readers[\&quot;wfs\&quot;]),'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1.prototype.readers.ows'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WFSCapabilities.v1_1_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/Image.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,' '],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer.js'],[-1,' * @requires OpenLayers\/Tile\/Image.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.Image'],[-1,' * Instances of OpenLayers.Layer.Image are used to display data from a web'],[-1,' * accessible image as a map layer.  Create a new image layer with the'],[-1,' * &lt;OpenLayers.Layer.Image&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.Image = OpenLayers.Class(OpenLayers.Layer, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: isBaseLayer'],[-1,'     * {Boolean} The layer is a base layer.  Default is true.  Set this property'],[-1,'     * in the layer options'],[-1,'     *\/'],[-1,'    isBaseLayer: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: url'],[-1,'     * {String} URL of the image to use'],[-1,'     *\/'],[-1,'    url: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: extent'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} The image bounds in map units.  This extent will'],[-1,'     *     also be used as the default maxExtent for the layer.  If you wish'],[-1,'     *     to have a maxExtent that is different than the image extent, set the'],[-1,'     *     maxExtent property of the options argument (as with any other layer).'],[-1,'     *\/'],[-1,'    extent: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: size'],[-1,'     * {&lt;OpenLayers.Size&gt;} The image size in pixels'],[-1,'     *\/'],[-1,'    size: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: tile'],[-1,'     * {&lt;OpenLayers.Tile.Image&gt;}'],[-1,'     *\/'],[-1,'    tile: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: aspectRatio'],[-1,'     * {Float} The ratio of height\/width represented by a single pixel in the'],[-1,'     * graphic'],[-1,'     *\/'],[-1,'    aspectRatio: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.Image'],[-1,'     * Create a new image layer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} A name for the layer.'],[-1,'     * url - {String} Relative or absolute path to the image'],[-1,'     * extent - {&lt;OpenLayers.Bounds&gt;} The extent represented by the image'],[-1,'     * size - {&lt;OpenLayers.Size&gt;} The size (in pixels) of the image'],[-1,'     * options - {Object} Hashtable of extra options to tag onto the layer'],[-1,'     *\/'],[-1,'    initialize: function(name, url, extent, size, options) {'],[0,'        this.url = url;'],[0,'        this.extent = extent;'],[0,'        this.maxExtent = extent;'],[0,'        this.size = size;'],[0,'        OpenLayers.Layer.prototype.initialize.apply(this, [name, options]);'],[-1,''],[0,'        this.aspectRatio = (this.extent.getHeight() \/ this.size.h) \/'],[-1,'                           (this.extent.getWidth() \/ this.size.w);'],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     * Destroy this layer'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if (this.tile) {'],[0,'            this.removeTileMonitoringHooks(this.tile);'],[0,'            this.tile.destroy();'],[0,'            this.tile = null;'],[-1,'        }'],[0,'        OpenLayers.Layer.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: clone'],[-1,'     * Create a clone of this layer'],[-1,'     *'],[-1,'     * Paramters:'],[-1,'     * obj - {Object} An optional layer (is this ever used?)'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.Image&gt;} An exact copy of this layer'],[-1,'     *\/'],[-1,'    clone: function(obj) {'],[-1,'        '],[0,'        if(obj == null) {'],[0,'            obj = new OpenLayers.Layer.Image(this.name,'],[-1,'                                               this.url,'],[-1,'                                               this.extent,'],[-1,'                                               this.size,'],[-1,'                                               this.getOptions());'],[-1,'        }'],[-1,''],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.prototype.clone.apply(this, [obj]);'],[-1,''],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[-1,''],[0,'        return obj;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setMap'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[-1,'        \/**'],[-1,'         * If nothing to do with resolutions has been set, assume a single'],[-1,'         * resolution determined by ratio*extent\/size - if an image has a'],[-1,'         * pixel aspect ratio different than one (as calculated above), the'],[-1,'         * image will be stretched in one dimension only.'],[-1,'         *\/'],[0,'        if( this.options.maxResolution == null ) {'],[0,'            this.options.maxResolution = this.aspectRatio *'],[-1,'                                         this.extent.getWidth() \/'],[-1,'                                         this.size.w;'],[-1,'        }'],[0,'        OpenLayers.Layer.prototype.setMap.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: moveTo'],[-1,'     * Create the tile for the image or resize it for the new resolution'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * zoomChanged - {Boolean}'],[-1,'     * dragging - {Boolean}'],[-1,'     *\/'],[-1,'    moveTo:function(bounds, zoomChanged, dragging) {'],[0,'        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);'],[-1,''],[0,'        var firstRendering = (this.tile == null);'],[-1,''],[0,'        if(zoomChanged || firstRendering) {'],[-1,''],[-1,'            \/\/determine new tile size'],[0,'            this.setTileSize();'],[-1,''],[-1,'            \/\/determine new position (upper left corner of new bounds)'],[0,'            var ulPx = this.map.getLayerPxFromLonLat({'],[-1,'                lon: this.extent.left,'],[-1,'                lat: this.extent.top'],[-1,'            });'],[-1,''],[0,'            if(firstRendering) {'],[-1,'                \/\/create the new tile'],[0,'                this.tile = new OpenLayers.Tile.Image(this, ulPx, this.extent, '],[-1,'                                                      null, this.tileSize);'],[0,'                this.addTileMonitoringHooks(this.tile);'],[-1,'            } else {'],[-1,'                \/\/just resize the tile and set it\'s new position'],[0,'                this.tile.size = this.tileSize.clone();'],[0,'                this.tile.position = ulPx.clone();'],[-1,'            }'],[0,'            this.tile.draw();'],[-1,'        }'],[-1,'    }, '],[-1,''],[-1,'    \/**'],[-1,'     * Set the tile size based on the map size.'],[-1,'     *\/'],[-1,'    setTileSize: function() {'],[0,'        var tileWidth = this.extent.getWidth() \/ this.map.getResolution();'],[0,'        var tileHeight = this.extent.getHeight() \/ this.map.getResolution();'],[0,'        this.tileSize = new OpenLayers.Size(tileWidth, tileHeight);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: addTileMonitoringHooks'],[-1,'     * This function takes a tile as input and adds the appropriate hooks to '],[-1,'     *     the tile so that the layer can keep track of the loading tiles.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * tile - {&lt;OpenLayers.Tile&gt;}'],[-1,'     *\/'],[-1,'    addTileMonitoringHooks: function(tile) {'],[0,'        tile.onLoadStart = function() {'],[0,'            this.events.triggerEvent(\&quot;loadstart\&quot;);'],[-1,'        };'],[0,'        tile.events.register(\&quot;loadstart\&quot;, this, tile.onLoadStart);'],[-1,'      '],[0,'        tile.onLoadEnd = function() {'],[0,'            this.events.triggerEvent(\&quot;loadend\&quot;);'],[-1,'        };'],[0,'        tile.events.register(\&quot;loadend\&quot;, this, tile.onLoadEnd);'],[0,'        tile.events.register(\&quot;unload\&quot;, this, tile.onLoadEnd);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: removeTileMonitoringHooks'],[-1,'     * This function takes a tile as input and removes the tile hooks '],[-1,'     *     that were added in &lt;addTileMonitoringHooks&gt;.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * tile - {&lt;OpenLayers.Tile&gt;}'],[-1,'     *\/'],[-1,'    removeTileMonitoringHooks: function(tile) {'],[0,'        tile.unload();'],[0,'        tile.events.un({'],[-1,'            \&quot;loadstart\&quot;: tile.onLoadStart,'],[-1,'            \&quot;loadend\&quot;: tile.onLoadEnd,'],[-1,'            \&quot;unload\&quot;: tile.onLoadEnd,'],[-1,'            scope: this'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setUrl'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * newUrl - {String}'],[-1,'     *\/'],[-1,'    setUrl: function(newUrl) {'],[0,'        this.url = newUrl;'],[0,'        this.tile.draw();'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: getURL'],[-1,'     * The url we return is always the same (the image itself never changes)'],[-1,'     *     so we can ignore the bounds parameter (it will always be the same, '],[-1,'     *     anyways) '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    getURL: function(bounds) {'],[0,'        return this.url;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.Image\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Strategy.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Strategy'],[-1,' * Abstract vector layer strategy class.  Not to be instantiated directly.  Use'],[-1,' *     one of the strategy subclasses instead.'],[-1,' *\/'],[1,'OpenLayers.Strategy = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: layer'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;} The layer this strategy belongs to.'],[-1,'     *\/'],[-1,'    layer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: options'],[-1,'     * {Object} Any options sent to the constructor.'],[-1,'     *\/'],[-1,'    options: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: active '],[-1,'     * {Boolean} The control is active.'],[-1,'     *\/'],[-1,'    active: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: autoActivate'],[-1,'     * {Boolean} The creator of the strategy can set autoActivate to false'],[-1,'     *      to fully control when the protocol is activated and deactivated.'],[-1,'     *      Defaults to true.'],[-1,'     *\/'],[-1,'    autoActivate: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: autoDestroy'],[-1,'     * {Boolean} The creator of the strategy can set autoDestroy to false'],[-1,'     *      to fully control when the strategy is destroyed. Defaults to'],[-1,'     *      true.'],[-1,'     *\/'],[-1,'    autoDestroy: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Strategy'],[-1,'     * Abstract class for vector strategies.  Create instances of a subclass.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Util.extend(this, options);'],[0,'        this.options = options;'],[-1,'        \/\/ set the active property here, so that user cannot override it'],[0,'        this.active = false;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Clean up the strategy.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.deactivate();'],[0,'        this.layer = null;'],[0,'        this.options = null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setLayer'],[-1,'     * Called to set the &lt;layer&gt; property.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;}'],[-1,'     *\/'],[-1,'    setLayer: function(layer) {'],[0,'        this.layer = layer;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: activate'],[-1,'     * Activate the strategy.  Register any listeners, do appropriate setup.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} True if the strategy was successfully activated or false if'],[-1,'     *      the strategy was already active.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        if (!this.active) {'],[0,'            this.active = true;'],[0,'            return true;'],[-1,'        }'],[0,'        return false;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: deactivate'],[-1,'     * Deactivate the strategy.  Unregister any listeners, do appropriate'],[-1,'     *     tear-down.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} True if the strategy was successfully deactivated or false if'],[-1,'     *      the strategy was already inactive.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        if (this.active) {'],[0,'            this.active = false;'],[0,'            return true;'],[-1,'        }'],[0,'        return false;'],[-1,'    },'],[-1,'   '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Strategy\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Strategy\/Save.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Strategy.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Strategy.Save'],[-1,' * A strategy that commits newly created or modified features.  By default'],[-1,' *     the strategy waits for a call to &lt;save&gt; before persisting changes.  By'],[-1,' *     configuring the strategy with the &lt;auto&gt; option, changes can be saved'],[-1,' *     automatically.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Strategy&gt;'],[-1,' *\/'],[1,'OpenLayers.Strategy.Save = OpenLayers.Class(OpenLayers.Strategy, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} An events object that handles all '],[-1,'     *     events on the strategy object.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * strategy.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types:'],[-1,'     * start - Triggered before saving'],[-1,'     * success - Triggered after a successful transaction'],[-1,'     * fail - Triggered after a failed transaction'],[-1,'     * '],[-1,'     *\/'],[-1,' '],[-1,'    \/** '],[-1,'     * Property: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for triggering this protocol'],[-1,'     *    events.'],[-1,'     *\/'],[-1,'    events: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: auto'],[-1,'     * {Boolean | Number} Auto-save.  Default is false.  If true, features will be'],[-1,'     *     saved immediately after being added to the layer and with each'],[-1,'     *     modification or deletion.  If auto is a number, features will be'],[-1,'     *     saved on an interval provided by the value (in seconds).'],[-1,'     *\/'],[-1,'    auto: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: timer'],[-1,'     * {Number} The id of the timer.'],[-1,'     *\/'],[-1,'    timer: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Strategy.Save'],[-1,'     * Create a new Save strategy.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Strategy.prototype.initialize.apply(this, [options]);'],[0,'        this.events = new OpenLayers.Events(this);'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Activate the strategy.  Register any listeners, do appropriate setup.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The strategy was successfully activated.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = OpenLayers.Strategy.prototype.activate.call(this);'],[0,'        if(activated) {'],[0,'            if(this.auto) {'],[0,'                if(typeof this.auto === \&quot;number\&quot;) {'],[0,'                    this.timer = window.setInterval('],[-1,'                        OpenLayers.Function.bind(this.save, this),'],[-1,'                        this.auto * 1000'],[-1,'                    );'],[-1,'                } else {'],[0,'                    this.layer.events.on({'],[-1,'                        \&quot;featureadded\&quot;: this.triggerSave,'],[-1,'                        \&quot;afterfeaturemodified\&quot;: this.triggerSave,'],[-1,'                        scope: this'],[-1,'                    });'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the strategy.  Unregister any listeners, do appropriate'],[-1,'     *     tear-down.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The strategy was successfully deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);'],[0,'        if(deactivated) {'],[0,'            if(this.auto) {'],[0,'                if(typeof this.auto === \&quot;number\&quot;) {'],[0,'                    window.clearInterval(this.timer);'],[-1,'                } else {'],[0,'                    this.layer.events.un({'],[-1,'                        \&quot;featureadded\&quot;: this.triggerSave,'],[-1,'                        \&quot;afterfeaturemodified\&quot;: this.triggerSave,'],[-1,'                        scope: this'],[-1,'                    });'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: triggerSave'],[-1,'     * Registered as a listener.  Calls save if a feature has insert, update,'],[-1,'     *     or delete state.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Object} The event this function is listening for.'],[-1,'     *\/'],[-1,'    triggerSave: function(event) {'],[0,'        var feature = event.feature;'],[0,'        if(feature.state === OpenLayers.State.INSERT ||'],[-1,'           feature.state === OpenLayers.State.UPDATE ||'],[-1,'           feature.state === OpenLayers.State.DELETE) {'],[0,'            this.save([event.feature]);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: save'],[-1,'     * Tell the layer protocol to commit unsaved features.  If the layer'],[-1,'     *     projection differs from the map projection, features will be'],[-1,'     *     transformed into the layer projection before being committed.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array} Features to be saved.  If null, then default is all'],[-1,'     *     features in the layer.  Features are assumed to be in the map'],[-1,'     *     projection.'],[-1,'     *\/'],[-1,'    save: function(features) {'],[0,'        if(!features) {'],[0,'            features = this.layer.features;'],[-1,'        }'],[0,'        this.events.triggerEvent(\&quot;start\&quot;, {features:features});'],[0,'        var remote = this.layer.projection;'],[0,'        var local = this.layer.map.getProjectionObject();'],[0,'        if(!local.equals(remote)) {'],[0,'            var len = features.length;'],[0,'            var clones = new Array(len);'],[0,'            var orig, clone;'],[0,'            for(var i=0; i&lt;len; ++i) {'],[0,'                orig = features[i];'],[0,'                clone = orig.clone();'],[0,'                clone.fid = orig.fid;'],[0,'                clone.state = orig.state;'],[0,'                if(orig.url) {'],[0,'                    clone.url = orig.url;'],[-1,'                }'],[0,'                clone._original = orig;'],[0,'                clone.geometry.transform(local, remote);'],[0,'                clones[i] = clone;'],[-1,'            }'],[0,'            features = clones;'],[-1,'        }'],[0,'        this.layer.protocol.commit(features, {'],[-1,'            callback: this.onCommit,'],[-1,'            scope: this'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onCommit'],[-1,'     * Called after protocol commit.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * response - {&lt;OpenLayers.Protocol.Response&gt;} A response object.'],[-1,'     *\/'],[-1,'    onCommit: function(response) {'],[0,'        var evt = {\&quot;response\&quot;: response};'],[0,'        if(response.success()) {'],[0,'            var features = response.reqFeatures;'],[-1,'            \/\/ deal with inserts, updates, and deletes'],[0,'            var state, feature;'],[0,'            var destroys = [];'],[0,'            var insertIds = response.insertIds || [];'],[0,'            var j = 0;'],[0,'            for(var i=0, len=features.length; i&lt;len; ++i) {'],[0,'                feature = features[i];'],[-1,'                \/\/ if projection was different, we may be dealing with clones'],[0,'                feature = feature._original || feature;'],[0,'                state = feature.state;'],[0,'                if(state) {'],[0,'                    if(state == OpenLayers.State.DELETE) {'],[0,'                        destroys.push(feature);'],[0,'                    } else if(state == OpenLayers.State.INSERT) {'],[0,'                        feature.fid = insertIds[j];'],[0,'                        ++j;'],[-1,'                    }'],[0,'                    feature.state = null;'],[-1,'                }'],[-1,'            }'],[-1,''],[0,'            if(destroys.length &gt; 0) {'],[0,'                this.layer.destroyFeatures(destroys);'],[-1,'            }'],[-1,''],[0,'            this.events.triggerEvent(\&quot;success\&quot;, evt);'],[-1,''],[-1,'        } else {'],[0,'            this.events.triggerEvent(\&quot;fail\&quot;, evt);'],[-1,'        }'],[-1,'    },'],[-1,'   '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Strategy.Save\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/GPX.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' * @requires OpenLayers\/Geometry\/LineString.js'],[-1,' * @requires OpenLayers\/Projection.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.GPX'],[-1,' * Read\/write GPX parser. Create a new instance with the '],[-1,' *     &lt;OpenLayers.Format.GPX&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.GPX = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: defaultDesc'],[-1,'     * {String} Default description for the waypoints\/tracks in the case'],[-1,'     *     where the feature has no \&quot;description\&quot; attribute.'],[-1,'     *     Default is \&quot;No description available\&quot;.'],[-1,'     *\/'],[-1,'    defaultDesc: \&quot;No description available\&quot;,'],[-1,''],[-1,'   \/**'],[-1,'    * APIProperty: extractWaypoints'],[-1,'    * {Boolean} Extract waypoints from GPX. (default: true)'],[-1,'    *\/'],[-1,'    extractWaypoints: true,'],[-1,'    '],[-1,'   \/**'],[-1,'    * APIProperty: extractTracks'],[-1,'    * {Boolean} Extract tracks from GPX. (default: true)'],[-1,'    *\/'],[-1,'    extractTracks: true,'],[-1,'    '],[-1,'   \/**'],[-1,'    * APIProperty: extractRoutes'],[-1,'    * {Boolean} Extract routes from GPX. (default: true)'],[-1,'    *\/'],[-1,'    extractRoutes: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: extractAttributes'],[-1,'     * {Boolean} Extract feature attributes from GPX. (default: true)'],[-1,'     *     NOTE: Attributes as part of extensions to the GPX standard may not'],[-1,'     *     be extracted.'],[-1,'     *\/'],[-1,'    extractAttributes: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        gpx: \&quot;http:\/\/www.topografix.com\/GPX\/1\/1\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location. Defaults to'],[-1,'     *  \&quot;http:\/\/www.topografix.com\/GPX\/1\/1 http:\/\/www.topografix.com\/GPX\/1\/1\/gpx.xsd\&quot;'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.topografix.com\/GPX\/1\/1 http:\/\/www.topografix.com\/GPX\/1\/1\/gpx.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: creator'],[-1,'     * {String} The creator attribute to be added to the written GPX files.'],[-1,'     * Defaults to \&quot;OpenLayers\&quot;'],[-1,'     *\/'],[-1,'    creator: \&quot;OpenLayers\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.GPX'],[-1,'     * Create a new parser for GPX.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[-1,'        \/\/ GPX coordinates are always in longlat WGS84'],[0,'        this.externalProjection = new OpenLayers.Projection(\&quot;EPSG:4326\&quot;);'],[-1,''],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Return a list of features from a GPX doc'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * doc - {Element} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * Array({&lt;OpenLayers.Feature.Vector&gt;})'],[-1,'     *\/'],[-1,'    read: function(doc) {'],[0,'        if (typeof doc == \&quot;string\&quot;) { '],[0,'            doc = OpenLayers.Format.XML.prototype.read.apply(this, [doc]);'],[-1,'        }'],[0,'        var features = [];'],[-1,'        '],[0,'        if(this.extractTracks) {'],[0,'            var tracks = doc.getElementsByTagName(\&quot;trk\&quot;);'],[0,'            for (var i=0, len=tracks.length; i&lt;len; i++) {'],[-1,'                \/\/ Attributes are only in trk nodes, not trkseg nodes'],[0,'                var attrs = {};'],[0,'                if(this.extractAttributes) {'],[0,'                    attrs = this.parseAttributes(tracks[i]);'],[-1,'                }'],[-1,'                '],[0,'                var segs = this.getElementsByTagNameNS(tracks[i], tracks[i].namespaceURI, \&quot;trkseg\&quot;);'],[0,'                for (var j = 0, seglen = segs.length; j &lt; seglen; j++) {'],[-1,'                    \/\/ We don\'t yet support extraction of trkpt attributes'],[-1,'                    \/\/ All trksegs of a trk get that trk\'s attributes'],[0,'                    var track = this.extractSegment(segs[j], \&quot;trkpt\&quot;);'],[0,'                    features.push(new OpenLayers.Feature.Vector(track, attrs));'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        if(this.extractRoutes) {'],[0,'            var routes = doc.getElementsByTagName(\&quot;rte\&quot;);'],[0,'            for (var k=0, klen=routes.length; k&lt;klen; k++) {'],[0,'                var attrs = {};'],[0,'                if(this.extractAttributes) {'],[0,'                    attrs = this.parseAttributes(routes[k]);'],[-1,'                }'],[0,'                var route = this.extractSegment(routes[k], \&quot;rtept\&quot;);'],[0,'                features.push(new OpenLayers.Feature.Vector(route, attrs));'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        if(this.extractWaypoints) {'],[0,'            var waypoints = doc.getElementsByTagName(\&quot;wpt\&quot;);'],[0,'            for (var l = 0, len = waypoints.length; l &lt; len; l++) {'],[0,'                var attrs = {};'],[0,'                if(this.extractAttributes) {'],[0,'                    attrs = this.parseAttributes(waypoints[l]);'],[-1,'                }'],[0,'                var wpt = new OpenLayers.Geometry.Point(waypoints[l].getAttribute(\&quot;lon\&quot;), waypoints[l].getAttribute(\&quot;lat\&quot;));'],[0,'                features.push(new OpenLayers.Feature.Vector(wpt, attrs));'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'            for (var g = 0, featLength = features.length; g &lt; featLength; g++) {'],[0,'                features[g].geometry.transform(this.externalProjection,'],[-1,'                                    this.internalProjection);'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        return features;'],[-1,'    },'],[-1,'    '],[-1,'   \/**'],[-1,'    * Method: extractSegment'],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * segment - {DOMElement} a trkseg or rte node to parse'],[-1,'    * segmentType - {String} nodeName of waypoints that form the line'],[-1,'    *'],[-1,'    * Returns:'],[-1,'    * {&lt;OpenLayers.Geometry.LineString&gt;} A linestring geometry'],[-1,'    *\/'],[-1,'    extractSegment: function(segment, segmentType) {'],[0,'        var points = this.getElementsByTagNameNS(segment, segment.namespaceURI, segmentType);'],[0,'        var point_features = [];'],[0,'        for (var i = 0, len = points.length; i &lt; len; i++) {'],[0,'            point_features.push(new OpenLayers.Geometry.Point(points[i].getAttribute(\&quot;lon\&quot;), points[i].getAttribute(\&quot;lat\&quot;)));'],[-1,'        }'],[0,'        return new OpenLayers.Geometry.LineString(point_features);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseAttributes'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {&lt;DOMElement&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An attributes object.'],[-1,'     *\/'],[-1,'    parseAttributes: function(node) {'],[-1,'        \/\/ node is either a wpt, trk or rte'],[-1,'        \/\/ attributes are children of the form &lt;attr&gt;value&lt;\/attr&gt;'],[0,'        var attributes = {};'],[0,'        var attrNode = node.firstChild, value, name;'],[0,'        while(attrNode) {'],[0,'            if(attrNode.nodeType == 1 &amp;&amp; attrNode.firstChild) {'],[0,'                value = attrNode.firstChild;'],[0,'                if(value.nodeType == 3 || value.nodeType == 4) {'],[0,'                    name = (attrNode.prefix) ?'],[-1,'                        attrNode.nodeName.split(\&quot;:\&quot;)[1] :'],[-1,'                        attrNode.nodeName;'],[0,'                    if(name != \&quot;trkseg\&quot; &amp;&amp; name != \&quot;rtept\&quot;) {'],[0,'                        attributes[name] = value.nodeValue;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            attrNode = attrNode.nextSibling;'],[-1,'        }'],[0,'        return attributes;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Accepts Feature Collection, and returns a string. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} List of features to serialize into a string.'],[-1,'     * metadata - {Object} A key\/value pairs object to build a metadata node to'],[-1,'     *      add to the gpx. Supported keys are \'name\', \'desc\', \'author\'.'],[-1,'     *\/'],[-1,'    write: function(features, metadata) {'],[0,'        features = OpenLayers.Util.isArray(features) ?'],[-1,'            features : [features];'],[0,'        var gpx = this.createElementNS(this.namespaces.gpx, \&quot;gpx\&quot;);'],[0,'        gpx.setAttribute(\&quot;version\&quot;, \&quot;1.1\&quot;);'],[0,'        gpx.setAttribute(\&quot;creator\&quot;, this.creator);'],[0,'        this.setAttributes(gpx, {'],[-1,'            \&quot;xsi:schemaLocation\&quot;: this.schemaLocation'],[-1,'        });'],[-1,''],[0,'        if (metadata &amp;&amp; typeof metadata == \'object\') {'],[0,'            gpx.appendChild(this.buildMetadataNode(metadata));'],[-1,'        }'],[0,'        for(var i=0, len=features.length; i&lt;len; i++) {'],[0,'            gpx.appendChild(this.buildFeatureNode(features[i]));'],[-1,'        }'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [gpx]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: buildMetadataNode'],[-1,'     * Creates a \&quot;metadata\&quot; node.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    buildMetadataNode: function(metadata) {'],[0,'        var types = [\'name\', \'desc\', \'author\'],'],[-1,'            node = this.createElementNS(this.namespaces.gpx, \'metadata\');'],[0,'        for (var i=0; i &lt; types.length; i++) {'],[0,'            var type = types[i];'],[0,'            if (metadata[type]) {'],[0,'                var n = this.createElementNS(this.namespaces.gpx, type);'],[0,'                n.appendChild(this.createTextNode(metadata[type]));'],[0,'                node.appendChild(n);'],[-1,'            }'],[-1,'        }'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: buildFeatureNode'],[-1,'     * Accepts an &lt;OpenLayers.Feature.Vector&gt;, and builds a node for it.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} - The created node, either a \'wpt\' or a \'trk\'.'],[-1,'     *\/'],[-1,'    buildFeatureNode: function(feature) {'],[0,'        var geometry = feature.geometry;'],[0,'            geometry = geometry.clone();'],[0,'        if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'            geometry.transform(this.internalProjection, '],[-1,'                               this.externalProjection);'],[-1,'        }'],[0,'        if (geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'            var wpt = this.buildWptNode(geometry);'],[0,'            this.appendAttributesNode(wpt, feature);'],[0,'            return wpt;'],[-1,'        } else {'],[0,'            var trkNode = this.createElementNS(this.namespaces.gpx, \&quot;trk\&quot;);'],[0,'            this.appendAttributesNode(trkNode, feature);'],[0,'            var trkSegNodes = this.buildTrkSegNode(geometry);'],[0,'            trkSegNodes = OpenLayers.Util.isArray(trkSegNodes) ?'],[-1,'                trkSegNodes : [trkSegNodes];'],[0,'            for (var i = 0, len = trkSegNodes.length; i &lt; len; i++) {'],[0,'                trkNode.appendChild(trkSegNodes[i]);'],[-1,'            }'],[0,'            return trkNode;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: buildTrkSegNode'],[-1,'     * Builds trkseg node(s) given a geometry'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * trknode'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     *\/'],[-1,'    buildTrkSegNode: function(geometry) {'],[0,'        var node,'],[-1,'            i,'],[-1,'            len,'],[-1,'            point,'],[-1,'            nodes;'],[0,'        if (geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.LineString\&quot; ||'],[-1,'            geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.LinearRing\&quot;) {'],[0,'            node = this.createElementNS(this.namespaces.gpx, \&quot;trkseg\&quot;);'],[0,'            for (i = 0, len=geometry.components.length; i &lt; len; i++) {'],[0,'                point = geometry.components[i];'],[0,'                node.appendChild(this.buildTrkPtNode(point));'],[-1,'            }'],[0,'            return node;'],[-1,'        } else {'],[0,'            nodes = [];'],[0,'            for (i = 0, len = geometry.components.length; i &lt; len; i++) {'],[0,'                nodes.push(this.buildTrkSegNode(geometry.components[i]));'],[-1,'            }'],[0,'            return nodes;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: buildTrkPtNode'],[-1,'     * Builds a trkpt node given a point '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} A trkpt node'],[-1,'     *\/'],[-1,'    buildTrkPtNode: function(point) {'],[0,'        var node = this.createElementNS(this.namespaces.gpx, \&quot;trkpt\&quot;);'],[0,'        node.setAttribute(\&quot;lon\&quot;, point.x);'],[0,'        node.setAttribute(\&quot;lat\&quot;, point.y);'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: buildWptNode'],[-1,'     * Builds a wpt node given a point'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} A wpt node'],[-1,'     *\/'],[-1,'    buildWptNode: function(geometry) {'],[0,'        var node = this.createElementNS(this.namespaces.gpx, \&quot;wpt\&quot;);'],[0,'        node.setAttribute(\&quot;lon\&quot;, geometry.x);'],[0,'        node.setAttribute(\&quot;lat\&quot;, geometry.y);'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: appendAttributesNode'],[-1,'     * Adds some attributes node.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} the node to append the attribute nodes to.'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    appendAttributesNode: function(node, feature) {'],[0,'        var name = this.createElementNS(this.namespaces.gpx, \'name\');'],[0,'        name.appendChild(this.createTextNode('],[-1,'            feature.attributes.name || feature.id));'],[0,'        node.appendChild(name);'],[0,'        var desc = this.createElementNS(this.namespaces.gpx, \'desc\');'],[0,'        desc.appendChild(this.createTextNode('],[-1,'            feature.attributes.description || this.defaultDesc));'],[0,'        node.appendChild(desc);'],[-1,'        \/\/ TBD - deal with remaining (non name\/description) attributes.'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.GPX\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WFSDescribeFeatureType.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/OGCExceptionReport.js'],[-1,' *\/'],[-1,' '],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WFSDescribeFeatureType'],[-1,' * Read WFS DescribeFeatureType response'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WFSDescribeFeatureType = OpenLayers.Class('],[-1,'    OpenLayers.Format.XML, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g)'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        xsd: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema\&quot;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WFSDescribeFeatureType'],[-1,'     * Create a new parser for WFS DescribeFeatureType responses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;xsd\&quot;: {'],[-1,'            \&quot;schema\&quot;: function(node, obj) {'],[0,'                var complexTypes = [];'],[0,'                var customTypes = {};'],[0,'                var schema = {'],[-1,'                    complexTypes: complexTypes,'],[-1,'                    customTypes: customTypes'],[-1,'                };'],[0,'                var i, len;'],[-1,'                '],[0,'                this.readChildNodes(node, schema);'],[-1,''],[0,'                var attributes = node.attributes;'],[0,'                var attr, name;'],[0,'                for(i=0, len=attributes.length; i&lt;len; ++i) {'],[0,'                    attr = attributes[i];'],[0,'                    name = attr.name;'],[0,'                    if(name.indexOf(\&quot;xmlns\&quot;) === 0) {'],[0,'                        this.setNamespace(name.split(\&quot;:\&quot;)[1] || \&quot;\&quot;, attr.value);'],[-1,'                    } else {'],[0,'                        obj[name] = attr.value;'],[-1,'                    }'],[-1,'                }'],[0,'                obj.featureTypes = complexTypes;                '],[0,'                obj.targetPrefix = this.namespaceAlias[obj.targetNamespace];'],[-1,'                '],[-1,'                \/\/ map complexTypes to names of customTypes'],[0,'                var complexType, customType;'],[0,'                for(i=0, len=complexTypes.length; i&lt;len; ++i) {'],[0,'                    complexType = complexTypes[i];'],[0,'                    customType = customTypes[complexType.typeName];'],[0,'                    if(customTypes[complexType.typeName]) {'],[0,'                        complexType.typeName = customType.name;'],[-1,'                    }'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;complexType\&quot;: function(node, obj) {'],[0,'                var complexType = {'],[-1,'                    \/\/ this is a temporary typeName, it will be overwritten by'],[-1,'                    \/\/ the schema reader with the metadata found in the'],[-1,'                    \/\/ customTypes hash'],[-1,'                    \&quot;typeName\&quot;: node.getAttribute(\&quot;name\&quot;)'],[-1,'                };'],[0,'                this.readChildNodes(node, complexType);'],[0,'                obj.complexTypes.push(complexType);'],[-1,'            },'],[-1,'            \&quot;complexContent\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;extension\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;sequence\&quot;: function(node, obj) {'],[0,'                var sequence = {'],[-1,'                    elements: []'],[-1,'                };'],[0,'                this.readChildNodes(node, sequence);'],[0,'                obj.properties = sequence.elements;'],[-1,'            },'],[-1,'            \&quot;element\&quot;: function(node, obj) {'],[0,'                var type;'],[0,'                if(obj.elements) {'],[0,'                    var element = {};'],[0,'                    var attributes = node.attributes;'],[0,'                    var attr;'],[0,'                    for(var i=0, len=attributes.length; i&lt;len; ++i) {'],[0,'                        attr = attributes[i];'],[0,'                        element[attr.name] = attr.value;'],[-1,'                    }'],[-1,'                    '],[0,'                    type = element.type;'],[0,'                    if(!type) {'],[0,'                        type = {};'],[0,'                        this.readChildNodes(node, type);'],[0,'                        element.restriction = type;'],[0,'                        element.type = type.base;'],[-1,'                    }'],[0,'                    var fullType = type.base || type;'],[0,'                    element.localType = fullType.split(\&quot;:\&quot;).pop();'],[0,'                    obj.elements.push(element);'],[0,'                    this.readChildNodes(node, element);'],[-1,'                }'],[-1,'                '],[0,'                if(obj.complexTypes) {'],[0,'                    type = node.getAttribute(\&quot;type\&quot;);'],[0,'                    var localType = type.split(\&quot;:\&quot;).pop();'],[0,'                    obj.customTypes[localType] = {'],[-1,'                        \&quot;name\&quot;: node.getAttribute(\&quot;name\&quot;),'],[-1,'                        \&quot;type\&quot;: type'],[-1,'                    };'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;annotation\&quot;: function(node, obj) {'],[0,'                obj.annotation = {};'],[0,'                this.readChildNodes(node, obj.annotation);'],[-1,'            },'],[-1,'            \&quot;appinfo\&quot;: function(node, obj) {'],[0,'                if (!obj.appinfo) {'],[0,'                    obj.appinfo = [];'],[-1,'                }'],[0,'                obj.appinfo.push(this.getChildValue(node));'],[-1,'            },'],[-1,'            \&quot;documentation\&quot;: function(node, obj) {'],[0,'                if (!obj.documentation) {'],[0,'                    obj.documentation = [];'],[-1,'                }'],[0,'                var value = this.getChildValue(node);'],[0,'                obj.documentation.push({'],[-1,'                    lang: node.getAttribute(\&quot;xml:lang\&quot;),'],[-1,'                    textContent: value.replace(this.regExes.trimSpace, \&quot;\&quot;)'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;simpleType\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;restriction\&quot;: function(node, obj) {'],[0,'                obj.base = node.getAttribute(\&quot;base\&quot;);'],[0,'                this.readRestriction(node, obj);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: readRestriction'],[-1,'     * Reads restriction defined in the child nodes of a restriction element'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} the node to parse'],[-1,'     * obj - {Object} the object that receives the read result'],[-1,'     *\/'],[-1,'    readRestriction: function(node, obj) {'],[0,'        var children = node.childNodes;'],[0,'        var child, nodeName, value;'],[0,'        for(var i=0, len=children.length; i&lt;len; ++i) {'],[0,'            child = children[i];'],[0,'            if(child.nodeType == 1) {'],[0,'                nodeName = child.nodeName.split(\&quot;:\&quot;).pop();'],[0,'                value = child.getAttribute(\&quot;value\&quot;);'],[0,'                if(!obj[nodeName]) {'],[0,'                    obj[nodeName] = value;'],[-1,'                } else {'],[0,'                    if(typeof obj[nodeName] == \&quot;string\&quot;) {'],[0,'                        obj[nodeName] = [obj[nodeName]];'],[-1,'                    }'],[0,'                    obj[nodeName].push(value);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {DOMElement|String} A WFS DescribeFeatureType document.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object representing the WFS DescribeFeatureType response.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) { '],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var schema = {};'],[0,'        if (data.nodeName.split(\&quot;:\&quot;).pop() === \'ExceptionReport\') {'],[-1,'            \/\/ an exception must have occurred, so parse it'],[0,'            var parser = new OpenLayers.Format.OGCExceptionReport();'],[0,'            schema.error = parser.read(data);'],[-1,'        } else {'],[0,'            this.readNode(data, schema);'],[-1,'        }'],[0,'        return schema;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WFSDescribeFeatureType\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Renderer.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Renderer '],[-1,' * This is the base class for all renderers.'],[-1,' *'],[-1,' * This is based on a merger code written by Paul Spencer and Bertil Chapuis.'],[-1,' * It is largely composed of virtual functions that are to be implemented'],[-1,' * in technology-specific subclasses, but there is some generic code too.'],[-1,' * '],[-1,' * The functions that *are* implemented here merely deal with the maintenance'],[-1,' *  of the size and extent variables, as well as the cached \'resolution\' '],[-1,' *  value. '],[-1,' * '],[-1,' * A note to the user that all subclasses should use getResolution() instead'],[-1,' *  of directly accessing this.resolution in order to correctly use the '],[-1,' *  cacheing system.'],[-1,' *'],[-1,' *\/'],[1,'OpenLayers.Renderer = OpenLayers.Class({'],[-1,''],[-1,'    \/** '],[-1,'     * Property: container'],[-1,'     * {DOMElement} '],[-1,'     *\/'],[-1,'    container: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: root'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    root: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: extent'],[-1,'     * {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    extent: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: locked'],[-1,'     * {Boolean} If the renderer is currently in a state where many things'],[-1,'     *     are changing, the \'locked\' property is set to true. This means '],[-1,'     *     that renderers can expect at least one more drawFeature event to be'],[-1,'     *     called with the \'locked\' property set to \'true\': In some renderers,'],[-1,'     *     this might make sense to use as a \'only update local information\''],[-1,'     *     flag. '],[-1,'     *\/  '],[-1,'    locked: false,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: size'],[-1,'     * {&lt;OpenLayers.Size&gt;} '],[-1,'     *\/'],[-1,'    size: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: resolution'],[-1,'     * {Float} cache of current map resolution'],[-1,'     *\/'],[-1,'    resolution: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: map  '],[-1,'     * {&lt;OpenLayers.Map&gt;} Reference to the map -- this is set in Vector\'s setMap()'],[-1,'     *\/'],[-1,'    map: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: featureDx'],[-1,'     * {Number} Feature offset in x direction. Will be calculated for and'],[-1,'     * applied to the current feature while rendering (see'],[-1,'     * &lt;calculateFeatureDx&gt;).'],[-1,'     *\/'],[-1,'    featureDx: 0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Renderer '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * containerID - {&lt;String&gt;} '],[-1,'     * options - {Object} options for this renderer. See sublcasses for'],[-1,'     *     supported options.'],[-1,'     *\/'],[-1,'    initialize: function(containerID, options) {'],[0,'        this.container = OpenLayers.Util.getElement(containerID);'],[0,'        OpenLayers.Util.extend(this, options);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.container = null;'],[0,'        this.extent = null;'],[0,'        this.size =  null;'],[0,'        this.resolution = null;'],[0,'        this.map = null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: supported'],[-1,'     * This should be overridden by specific subclasses'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the browser supports the renderer class'],[-1,'     *\/'],[-1,'    supported: function() {'],[0,'        return false;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setExtent'],[-1,'     * Set the visible part of the layer.'],[-1,'     *'],[-1,'     * Resolution has probably changed, so we nullify the resolution '],[-1,'     * cache (this.resolution) -- this way it will be re-computed when '],[-1,'     * next it is needed.'],[-1,'     * We nullify the resolution cache (this.resolution) if resolutionChanged'],[-1,'     * is set to true - this way it will be re-computed on the next'],[-1,'     * getResolution() request.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * extent - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * resolutionChanged - {Boolean}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} true to notify the layer that the new extent does not exceed'],[-1,'     *     the coordinate range, and the features will not need to be redrawn.'],[-1,'     *     False otherwise.'],[-1,'     *\/'],[-1,'    setExtent: function(extent, resolutionChanged) {'],[0,'        this.extent = extent.clone();'],[0,'        if (this.map.baseLayer &amp;&amp; this.map.baseLayer.wrapDateLine) {'],[0,'            var ratio = extent.getWidth() \/ this.map.getExtent().getWidth(),'],[-1,'                extent = extent.scale(1 \/ ratio);'],[0,'            this.extent = extent.wrapDateLine(this.map.getMaxExtent()).scale(ratio);'],[-1,'        }'],[0,'        if (resolutionChanged) {'],[0,'            this.resolution = null;'],[-1,'        }'],[0,'        return true;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setSize'],[-1,'     * Sets the size of the drawing surface.'],[-1,'     * '],[-1,'     * Resolution has probably changed, so we nullify the resolution '],[-1,'     * cache (this.resolution) -- this way it will be re-computed when '],[-1,'     * next it is needed.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * size - {&lt;OpenLayers.Size&gt;} '],[-1,'     *\/'],[-1,'    setSize: function(size) {'],[0,'        this.size = size.clone();'],[0,'        this.resolution = null;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: getResolution'],[-1,'     * Uses cached copy of resolution if available to minimize computing'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} The current map\'s resolution'],[-1,'     *\/'],[-1,'    getResolution: function() {'],[0,'        this.resolution = this.resolution || this.map.getResolution();'],[0,'        return this.resolution;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawFeature'],[-1,'     * Draw the feature.  The optional style argument can be used'],[-1,'     * to override the feature\'s own style.  This method should only'],[-1,'     * be called from layer.drawFeature().'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     * style - {&lt;Object&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} true if the feature has been drawn completely, false if not,'],[-1,'     *     undefined if the feature had no geometry'],[-1,'     *\/'],[-1,'    drawFeature: function(feature, style) {'],[0,'        if(style == null) {'],[0,'            style = feature.style;'],[-1,'        }'],[0,'        if (feature.geometry) {'],[0,'            var bounds = feature.geometry.getBounds();'],[0,'            if(bounds) {'],[0,'                var worldBounds;'],[0,'                if (this.map.baseLayer &amp;&amp; this.map.baseLayer.wrapDateLine) {'],[0,'                    worldBounds = this.map.getMaxExtent();'],[-1,'                }'],[0,'                if (!bounds.intersectsBounds(this.extent, {worldBounds: worldBounds})) {'],[0,'                    style = {display: \&quot;none\&quot;};'],[-1,'                } else {'],[0,'                    this.calculateFeatureDx(bounds, worldBounds);'],[-1,'                }'],[0,'                var rendered = this.drawGeometry(feature.geometry, style, feature.id);'],[0,'                if(style.display != \&quot;none\&quot; &amp;&amp; style.label &amp;&amp; rendered !== false) {'],[-1,''],[0,'                    var location = feature.geometry.getCentroid(); '],[0,'                    if(style.labelXOffset || style.labelYOffset) {'],[0,'                        var xOffset = isNaN(style.labelXOffset) ? 0 : style.labelXOffset;'],[0,'                        var yOffset = isNaN(style.labelYOffset) ? 0 : style.labelYOffset;'],[0,'                        var res = this.getResolution();'],[0,'                        location.move(xOffset*res, yOffset*res);'],[-1,'                    }'],[0,'                    this.drawText(feature.id, style, location);'],[-1,'                } else {'],[0,'                    this.removeText(feature.id);'],[-1,'                }'],[0,'                return rendered;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: calculateFeatureDx'],[-1,'     * {Number} Calculates the feature offset in x direction. Looking at the'],[-1,'     * center of the feature bounds and the renderer extent, we calculate how'],[-1,'     * many world widths the two are away from each other. This distance is'],[-1,'     * used to shift the feature as close as possible to the center of the'],[-1,'     * current enderer extent, which ensures that the feature is visible in the'],[-1,'     * current viewport.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} Bounds of the feature'],[-1,'     * worldBounds - {&lt;OpenLayers.Bounds&gt;} Bounds of the world'],[-1,'     *\/'],[-1,'    calculateFeatureDx: function(bounds, worldBounds) {'],[0,'        this.featureDx = 0;'],[0,'        if (worldBounds) {'],[0,'            var worldWidth = worldBounds.getWidth(),'],[-1,'                rendererCenterX = (this.extent.left + this.extent.right) \/ 2,'],[-1,'                featureCenterX = (bounds.left + bounds.right) \/ 2,'],[-1,'                worldsAway = Math.round((featureCenterX - rendererCenterX) \/ worldWidth);'],[0,'            this.featureDx = worldsAway * worldWidth;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: drawGeometry'],[-1,'     * '],[-1,'     * Draw a geometry.  This should only be called from the renderer itself.'],[-1,'     * Use layer.drawFeature() from outside the renderer.'],[-1,'     * virtual function'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} '],[-1,'     * style - {Object} '],[-1,'     * featureId - {&lt;String&gt;} '],[-1,'     *\/'],[-1,'    drawGeometry: function(geometry, style, featureId) {},'],[-1,'        '],[-1,'    \/**'],[-1,'     * Method: drawText'],[-1,'     * Function for drawing text labels.'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * featureId - {String}'],[-1,'     * style -'],[-1,'     * location - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     *\/'],[-1,'    drawText: function(featureId, style, location) {},'],[-1,''],[-1,'    \/**'],[-1,'     * Method: removeText'],[-1,'     * Function for removing text labels.'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * featureId - {String}'],[-1,'     *\/'],[-1,'    removeText: function(featureId) {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: clear'],[-1,'     * Clear all vectors from the renderer.'],[-1,'     * virtual function.'],[-1,'     *\/    '],[-1,'    clear: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getFeatureIdFromEvent'],[-1,'     * Returns a feature id from an event on the renderer.  '],[-1,'     * How this happens is specific to the renderer.  This should be'],[-1,'     * called from layer.getFeatureFromEvent().'],[-1,'     * Virtual function.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A feature id or undefined.'],[-1,'     *\/'],[-1,'    getFeatureIdFromEvent: function(evt) {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: eraseFeatures '],[-1,'     * This is called by the layer to erase features'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} '],[-1,'     *\/'],[-1,'    eraseFeatures: function(features) {'],[0,'        if(!(OpenLayers.Util.isArray(features))) {'],[0,'            features = [features];'],[-1,'        }'],[0,'        for(var i=0, len=features.length; i&lt;len; ++i) {'],[0,'            var feature = features[i];'],[0,'            this.eraseGeometry(feature.geometry, feature.id);'],[0,'            this.removeText(feature.id);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: eraseGeometry'],[-1,'     * Remove a geometry from the renderer (by id).'],[-1,'     * virtual function.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} '],[-1,'     * featureId - {String}'],[-1,'     *\/'],[-1,'    eraseGeometry: function(geometry, featureId) {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: moveRoot'],[-1,'     * moves this renderer\'s root to a (different) renderer.'],[-1,'     * To be implemented by subclasses that require a common renderer root for'],[-1,'     * feature selection.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * renderer - {&lt;OpenLayers.Renderer&gt;} target renderer for the moved root'],[-1,'     *\/'],[-1,'    moveRoot: function(renderer) {},'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getRenderLayerId'],[-1,'     * Gets the layer that this renderer\'s output appears on. If moveRoot was'],[-1,'     * used, this will be different from the id of the layer containing the'],[-1,'     * features rendered by this renderer.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} the id of the output layer.'],[-1,'     *\/'],[-1,'    getRenderLayerId: function() {'],[0,'        return this.container.id;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: applyDefaultSymbolizer'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * symbolizer - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object}'],[-1,'     *\/'],[-1,'    applyDefaultSymbolizer: function(symbolizer) {'],[0,'        var result = OpenLayers.Util.extend({},'],[-1,'            OpenLayers.Renderer.defaultSymbolizer);'],[0,'        if(symbolizer.stroke === false) {'],[0,'            delete result.strokeWidth;'],[0,'            delete result.strokeColor;'],[-1,'        }'],[0,'        if(symbolizer.fill === false) {'],[0,'            delete result.fillColor;'],[-1,'        }'],[0,'        OpenLayers.Util.extend(result, symbolizer);'],[0,'        return result;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Renderer\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Renderer.defaultSymbolizer'],[-1,' * {Object} Properties from this symbolizer will be applied to symbolizers'],[-1,' *     with missing properties. This can also be used to set a global'],[-1,' *     symbolizer default in OpenLayers. To be SLD 1.x compliant, add the'],[-1,' *     following code before rendering any vector features:'],[-1,' * (code)'],[-1,' * OpenLayers.Renderer.defaultSymbolizer = {'],[-1,' *     fillColor: \&quot;#808080\&quot;,'],[-1,' *     fillOpacity: 1,'],[-1,' *     strokeColor: \&quot;#000000\&quot;,'],[-1,' *     strokeOpacity: 1,'],[-1,' *     strokeWidth: 1,'],[-1,' *     pointRadius: 3,'],[-1,' *     graphicName: \&quot;square\&quot;'],[-1,' * };'],[-1,' * (end)'],[-1,' *\/'],[1,'OpenLayers.Renderer.defaultSymbolizer = {'],[-1,'    fillColor: \&quot;#000000\&quot;,'],[-1,'    strokeColor: \&quot;#000000\&quot;,'],[-1,'    strokeWidth: 2,'],[-1,'    fillOpacity: 1,'],[-1,'    strokeOpacity: 1,'],[-1,'    pointRadius: 0,'],[-1,'    labelAlign: \'cm\''],[-1,'};'],[-1,'    '],[-1,''],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Renderer.symbol'],[-1,' * Coordinate arrays for well known (named) symbols.'],[-1,' *\/'],[1,'OpenLayers.Renderer.symbol = {'],[-1,'    \&quot;star\&quot;: [350,75, 379,161, 469,161, 397,215, 423,301, 350,250, 277,301,'],[-1,'            303,215, 231,161, 321,161, 350,75],'],[-1,'    \&quot;cross\&quot;: [4,0, 6,0, 6,4, 10,4, 10,6, 6,6, 6,10, 4,10, 4,6, 0,6, 0,4, 4,4,'],[-1,'            4,0],'],[-1,'    \&quot;x\&quot;: [0,0, 25,0, 50,35, 75,0, 100,0, 65,50, 100,100, 75,100, 50,65, 25,100, 0,100, 35,50, 0,0],'],[-1,'    \&quot;square\&quot;: [0,0, 0,1, 1,1, 1,0, 0,0],'],[-1,'    \&quot;triangle\&quot;: [0,10, 10,10, 5,0, 0,10]'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Renderer\/Canvas.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Renderer.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Renderer.Canvas '],[-1,' * A renderer based on the 2D \'canvas\' drawing element.'],[-1,' * '],[-1,' * Inherits:'],[-1,' *  - &lt;OpenLayers.Renderer&gt;'],[-1,' *\/'],[1,'OpenLayers.Renderer.Canvas = OpenLayers.Class(OpenLayers.Renderer, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: hitDetection'],[-1,'     * {Boolean} Allow for hit detection of features.  Default is true.'],[-1,'     *\/'],[-1,'    hitDetection: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: hitOverflow'],[-1,'     * {Number} The method for converting feature identifiers to color values'],[-1,'     *     supports 16777215 sequential values.  Two features cannot be '],[-1,'     *     predictably detected if their identifiers differ by more than this'],[-1,'     *     value.  The hitOverflow allows for bigger numbers (but the '],[-1,'     *     difference in values is still limited).'],[-1,'     *\/'],[-1,'    hitOverflow: 0,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: canvas'],[-1,'     * {Canvas} The canvas context object.'],[-1,'     *\/'],[-1,'    canvas: null, '],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: features'],[-1,'     * {Object} Internal object of feature\/style pairs for use in redrawing the layer.'],[-1,'     *\/'],[-1,'    features: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: pendingRedraw'],[-1,'     * {Boolean} The renderer needs a redraw call to render features added while'],[-1,'     *     the renderer was locked.'],[-1,'     *\/'],[-1,'    pendingRedraw: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: cachedSymbolBounds'],[-1,'     * {Object} Internal cache of calculated symbol extents.'],[-1,'     *\/'],[-1,'    cachedSymbolBounds: {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Renderer.Canvas'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * containerID - {&lt;String&gt;}'],[-1,'     * options - {Object} Optional properties to be set on the renderer.'],[-1,'     *\/'],[-1,'    initialize: function(containerID, options) {'],[0,'        OpenLayers.Renderer.prototype.initialize.apply(this, arguments);'],[0,'        this.root = document.createElement(\&quot;canvas\&quot;);'],[0,'        this.container.appendChild(this.root);'],[0,'        this.canvas = this.root.getContext(\&quot;2d\&quot;);'],[0,'        this.features = {};'],[0,'        if (this.hitDetection) {'],[0,'            this.hitCanvas = document.createElement(\&quot;canvas\&quot;);'],[0,'            this.hitContext = this.hitCanvas.getContext(\&quot;2d\&quot;);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setExtent'],[-1,'     * Set the visible part of the layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * extent - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * resolutionChanged - {Boolean}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} true to notify the layer that the new extent does not exceed'],[-1,'     *     the coordinate range, and the features will not need to be redrawn.'],[-1,'     *     False otherwise.'],[-1,'     *\/'],[-1,'    setExtent: function() {'],[0,'        OpenLayers.Renderer.prototype.setExtent.apply(this, arguments);'],[-1,'        \/\/ always redraw features'],[0,'        return false;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: eraseGeometry'],[-1,'     * Erase a geometry from the renderer. Because the Canvas renderer has'],[-1,'     *     \'memory\' of the features that it has drawn, we have to remove the'],[-1,'     *     feature so it doesn\'t redraw.   '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * featureId - {String}'],[-1,'     *\/'],[-1,'    eraseGeometry: function(geometry, featureId) {'],[0,'        this.eraseFeatures(this.features[featureId][0]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: supported'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the browser supports the renderer class'],[-1,'     *\/'],[-1,'    supported: function() {'],[0,'        return OpenLayers.CANVAS_SUPPORTED;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setSize'],[-1,'     * Sets the size of the drawing surface.'],[-1,'     *'],[-1,'     * Once the size is updated, redraw the canvas.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * size - {&lt;OpenLayers.Size&gt;} '],[-1,'     *\/'],[-1,'    setSize: function(size) {'],[0,'        this.size = size.clone();'],[0,'        var root = this.root;'],[0,'        root.style.width = size.w + \&quot;px\&quot;;'],[0,'        root.style.height = size.h + \&quot;px\&quot;;'],[0,'        root.width = size.w;'],[0,'        root.height = size.h;'],[0,'        this.resolution = null;'],[0,'        if (this.hitDetection) {'],[0,'            var hitCanvas = this.hitCanvas;'],[0,'            hitCanvas.style.width = size.w + \&quot;px\&quot;;'],[0,'            hitCanvas.style.height = size.h + \&quot;px\&quot;;'],[0,'            hitCanvas.width = size.w;'],[0,'            hitCanvas.height = size.h;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawFeature'],[-1,'     * Draw the feature. Stores the feature in the features list,'],[-1,'     * then redraws the layer. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     * style - {&lt;Object&gt;} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The feature has been drawn completely.  If the feature has no'],[-1,'     *     geometry, undefined will be returned.  If the feature is not rendered'],[-1,'     *     for other reasons, false will be returned.'],[-1,'     *\/'],[-1,'    drawFeature: function(feature, style) {'],[0,'        var rendered;'],[0,'        if (feature.geometry) {'],[0,'            style = this.applyDefaultSymbolizer(style || feature.style);'],[-1,'            \/\/ don\'t render if display none or feature outside extent'],[0,'            var bounds = feature.geometry.getBounds();'],[-1,''],[0,'            var worldBounds;'],[0,'            if (this.map.baseLayer &amp;&amp; this.map.baseLayer.wrapDateLine) {'],[0,'                worldBounds = this.map.getMaxExtent();'],[-1,'            }'],[-1,''],[0,'            var intersects = bounds &amp;&amp; bounds.intersectsBounds(this.extent, {worldBounds: worldBounds});'],[-1,''],[0,'            rendered = (style.display !== \&quot;none\&quot;) &amp;&amp; !!bounds &amp;&amp; intersects;'],[0,'            if (rendered) {'],[-1,'                \/\/ keep track of what we have rendered for redraw'],[0,'                this.features[feature.id] = [feature, style];'],[-1,'            }'],[-1,'            else {'],[-1,'                \/\/ remove from features tracked for redraw'],[0,'                delete(this.features[feature.id]);'],[-1,'            }'],[0,'            this.pendingRedraw = true;'],[-1,'        }'],[0,'        if (this.pendingRedraw &amp;&amp; !this.locked) {'],[0,'            this.redraw();'],[0,'            this.pendingRedraw = false;'],[-1,'        }'],[0,'        return rendered;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: drawGeometry'],[-1,'     * Used when looping (in redraw) over the features; draws'],[-1,'     * the canvas. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} '],[-1,'     * style - {Object} '],[-1,'     *\/'],[-1,'    drawGeometry: function(geometry, style, featureId) {'],[0,'        var className = geometry.CLASS_NAME;'],[0,'        if ((className == \&quot;OpenLayers.Geometry.Collection\&quot;) ||'],[-1,'            (className == \&quot;OpenLayers.Geometry.MultiPoint\&quot;) ||'],[-1,'            (className == \&quot;OpenLayers.Geometry.MultiLineString\&quot;) ||'],[-1,'            (className == \&quot;OpenLayers.Geometry.MultiPolygon\&quot;)) {'],[0,'            for (var i = 0; i &lt; geometry.components.length; i++) {'],[0,'                this.drawGeometry(geometry.components[i], style, featureId);'],[-1,'            }'],[0,'            return;'],[-1,'        }'],[0,'        switch (geometry.CLASS_NAME) {'],[-1,'            case \&quot;OpenLayers.Geometry.Point\&quot;:'],[0,'                this.drawPoint(geometry, style, featureId);'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.LineString\&quot;:'],[0,'                this.drawLineString(geometry, style, featureId);'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.LinearRing\&quot;:'],[0,'                this.drawLinearRing(geometry, style, featureId);'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.Polygon\&quot;:'],[0,'                this.drawPolygon(geometry, style, featureId);'],[0,'                break;'],[-1,'            default:'],[0,'                break;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawExternalGraphic'],[-1,'     * Called to draw External graphics. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style    - {Object}'],[-1,'     * featureId - {String}'],[-1,'     *\/ '],[-1,'    drawExternalGraphic: function(geometry, style, featureId) {'],[0,'        var img = new Image();'],[-1,''],[0,'        var title = style.title || style.graphicTitle;        '],[0,'        if (title) {'],[0,'            img.title = title;           '],[-1,'        }'],[-1,''],[0,'        var width = style.graphicWidth || style.graphicHeight;'],[0,'        var height = style.graphicHeight || style.graphicWidth;'],[0,'        width = width ? width : style.pointRadius * 2;'],[0,'        height = height ? height : style.pointRadius * 2;'],[0,'        var xOffset = (style.graphicXOffset != undefined) ?'],[-1,'           style.graphicXOffset : -(0.5 * width);'],[0,'        var yOffset = (style.graphicYOffset != undefined) ?'],[-1,'           style.graphicYOffset : -(0.5 * height);'],[-1,''],[0,'        var opacity = style.graphicOpacity || style.fillOpacity;'],[-1,'        '],[0,'        var onLoad = function() {'],[0,'            if(!this.features[featureId]) {'],[0,'                return;'],[-1,'            }'],[0,'            var pt = this.getLocalXY(geometry);'],[0,'            var p0 = pt[0];'],[0,'            var p1 = pt[1];'],[0,'            if(!isNaN(p0) &amp;&amp; !isNaN(p1)) {'],[0,'                var x = (p0 + xOffset) | 0;'],[0,'                var y = (p1 + yOffset) | 0;'],[0,'                var canvas = this.canvas;'],[0,'                canvas.globalAlpha = opacity;'],[0,'                var factor = OpenLayers.Renderer.Canvas.drawImageScaleFactor ||'],[-1,'                    (OpenLayers.Renderer.Canvas.drawImageScaleFactor ='],[-1,'                        \/android 2.1\/.test(navigator.userAgent.toLowerCase()) ?'],[-1,'                            \/\/ 320 is the screen width of the G1 phone, for'],[-1,'                            \/\/ which drawImage works out of the box.'],[-1,'                            320 \/ window.screen.width : 1'],[-1,'                    );'],[0,'                canvas.drawImage('],[-1,'                    img, x*factor, y*factor, width*factor, height*factor'],[-1,'                );'],[0,'                if (this.hitDetection) {'],[0,'                    this.setHitContextStyle(\&quot;fill\&quot;, featureId);'],[0,'                    this.hitContext.fillRect(x, y, width, height);'],[-1,'                }'],[-1,'            }'],[-1,'        };'],[-1,''],[0,'        img.onload = OpenLayers.Function.bind(onLoad, this);'],[0,'        img.src = style.externalGraphic;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawNamedSymbol'],[-1,'     * Called to draw Well Known Graphic Symbol Name. '],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style    - {Object}'],[-1,'     * featureId - {String}'],[-1,'     *\/ '],[-1,'    drawNamedSymbol: function(geometry, style, featureId) {'],[0,'        var x, y, cx, cy, i, symbolBounds, scaling, angle;'],[0,'        var unscaledStrokeWidth;'],[0,'        var deg2rad = Math.PI \/ 180.0;'],[-1,'        '],[0,'        var symbol = OpenLayers.Renderer.symbol[style.graphicName];'],[-1,'         '],[0,'        if (!symbol) {'],[0,'            throw new Error(style.graphicName + \' is not a valid symbol name\');'],[-1,'        }'],[-1,'        '],[0,'        if (!symbol.length || symbol.length &lt; 2) return;'],[-1,'        '],[0,'        var pt = this.getLocalXY(geometry);'],[0,'        var p0 = pt[0];'],[0,'        var p1 = pt[1];'],[-1,'       '],[0,'        if (isNaN(p0) || isNaN(p1)) return;'],[-1,'        '],[-1,'        \/\/ Use rounded line caps'],[0,'        this.canvas.lineCap = \&quot;round\&quot;;'],[0,'        this.canvas.lineJoin = \&quot;round\&quot;;'],[-1,'        '],[0,'        if (this.hitDetection) {'],[0,'            this.hitContext.lineCap = \&quot;round\&quot;;'],[0,'            this.hitContext.lineJoin = \&quot;round\&quot;;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ Scale and rotate symbols, using precalculated bounds whenever possible.'],[0,'        if (style.graphicName in this.cachedSymbolBounds) {'],[0,'            symbolBounds = this.cachedSymbolBounds[style.graphicName];'],[-1,'        } else {'],[0,'            symbolBounds = new OpenLayers.Bounds();'],[0,'            for(i = 0; i &lt; symbol.length; i+=2) {'],[0,'                symbolBounds.extend(new OpenLayers.LonLat(symbol[i], symbol[i+1]));'],[-1,'            }'],[0,'            this.cachedSymbolBounds[style.graphicName] = symbolBounds;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ Push symbol scaling, translation and rotation onto the transformation stack in reverse order.'],[-1,'        \/\/ Don\'t forget to apply all canvas transformations to the hitContext canvas as well(!)'],[0,'        this.canvas.save();'],[0,'        if (this.hitDetection) { this.hitContext.save(); }'],[-1,'        '],[-1,'        \/\/ Step 3: place symbol at the desired location'],[0,'        this.canvas.translate(p0,p1);'],[0,'        if (this.hitDetection) { this.hitContext.translate(p0,p1); }'],[-1,'        '],[-1,'        \/\/ Step 2a. rotate the symbol if necessary'],[0,'        angle = deg2rad * style.rotation; \/\/ will be NaN when style.rotation is undefined.'],[0,'        if (!isNaN(angle)) {'],[0,'            this.canvas.rotate(angle);'],[0,'            if (this.hitDetection) { this.hitContext.rotate(angle); }'],[-1,'        }'],[-1,'                '],[-1,'        \/\/ \/\/ Step 2: scale symbol such that pointRadius equals half the maximum symbol dimension.'],[0,'        scaling = 2.0 * style.pointRadius \/ Math.max(symbolBounds.getWidth(), symbolBounds.getHeight());'],[0,'        this.canvas.scale(scaling,scaling);'],[0,'        if (this.hitDetection) { this.hitContext.scale(scaling,scaling); }'],[-1,'        '],[-1,'        \/\/ Step 1: center the symbol at the origin        '],[0,'        cx = symbolBounds.getCenterLonLat().lon;'],[0,'        cy = symbolBounds.getCenterLonLat().lat;'],[0,'        this.canvas.translate(-cx,-cy);'],[0,'        if (this.hitDetection) { this.hitContext.translate(-cx,-cy); }        '],[-1,''],[-1,'        \/\/ Don\'t forget to scale stroke widths, because they are affected by canvas scale transformations as well(!)'],[-1,'        \/\/ Alternative: scale symbol coordinates manually, so stroke width scaling is not needed anymore.'],[0,'        unscaledStrokeWidth = style.strokeWidth;'],[0,'        style.strokeWidth = unscaledStrokeWidth \/ scaling;'],[-1,'            '],[0,'        if (style.fill !== false) {'],[0,'            this.setCanvasStyle(\&quot;fill\&quot;, style);'],[0,'            this.canvas.beginPath();'],[0,'            for (i=0; i&lt;symbol.length; i=i+2) {'],[0,'                x = symbol[i];'],[0,'                y = symbol[i+1];'],[0,'                if (i == 0) this.canvas.moveTo(x,y);'],[0,'                this.canvas.lineTo(x,y);'],[-1,'            }'],[0,'            this.canvas.closePath();'],[0,'            this.canvas.fill();'],[-1,''],[0,'            if (this.hitDetection) {'],[0,'                this.setHitContextStyle(\&quot;fill\&quot;, featureId, style);'],[0,'                this.hitContext.beginPath();'],[0,'                for (i=0; i&lt;symbol.length; i=i+2) {'],[0,'                    x = symbol[i];'],[0,'                    y = symbol[i+1];'],[0,'                    if (i == 0) this.canvas.moveTo(x,y);'],[0,'                    this.hitContext.lineTo(x,y);'],[-1,'                }'],[0,'                this.hitContext.closePath();'],[0,'                this.hitContext.fill();'],[-1,'            }'],[-1,'        }  '],[-1,'        '],[0,'        if (style.stroke !== false) {'],[0,'            this.setCanvasStyle(\&quot;stroke\&quot;, style);'],[0,'            this.canvas.beginPath();'],[0,'            for (i=0; i&lt;symbol.length; i=i+2) {'],[0,'                x = symbol[i];'],[0,'                y = symbol[i+1];'],[0,'                if (i == 0) this.canvas.moveTo(x,y);'],[0,'                this.canvas.lineTo(x,y);'],[-1,'            }'],[0,'            this.canvas.closePath();'],[0,'            this.canvas.stroke();'],[-1,'            '],[-1,'            '],[0,'            if (this.hitDetection) {'],[0,'                this.setHitContextStyle(\&quot;stroke\&quot;, featureId, style, scaling);'],[0,'                this.hitContext.beginPath();'],[0,'                for (i=0; i&lt;symbol.length; i=i+2) {'],[0,'                    x = symbol[i];'],[0,'                    y = symbol[i+1];'],[0,'                    if (i == 0) this.hitContext.moveTo(x,y);'],[0,'                    this.hitContext.lineTo(x,y);'],[-1,'                }'],[0,'                this.hitContext.closePath();'],[0,'                this.hitContext.stroke();'],[-1,'            }'],[-1,'            '],[-1,'        }'],[-1,'        '],[0,'        style.strokeWidth = unscaledStrokeWidth;'],[0,'        this.canvas.restore();'],[0,'        if (this.hitDetection) { this.hitContext.restore(); }'],[0,'        this.setCanvasStyle(\&quot;reset\&quot;);  '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setCanvasStyle'],[-1,'     * Prepare the canvas for drawing by setting various global settings.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * type - {String} one of \'stroke\', \'fill\', or \'reset\''],[-1,'     * style - {Object} Symbolizer hash'],[-1,'     *\/'],[-1,'    setCanvasStyle: function(type, style) {'],[0,'        if (type === \&quot;fill\&quot;) {     '],[0,'            this.canvas.globalAlpha = style[\'fillOpacity\'];'],[0,'            this.canvas.fillStyle = style[\'fillColor\'];'],[0,'        } else if (type === \&quot;stroke\&quot;) {  '],[0,'            this.canvas.globalAlpha = style[\'strokeOpacity\'];'],[0,'            this.canvas.strokeStyle = style[\'strokeColor\'];'],[0,'            this.canvas.lineWidth = style[\'strokeWidth\'];'],[-1,'        } else {'],[0,'            this.canvas.globalAlpha = 0;'],[0,'            this.canvas.lineWidth = 1;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: featureIdToHex'],[-1,'     * Convert a feature ID string into an RGB hex string.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * featureId - {String} Feature id'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} RGB hex string.'],[-1,'     *\/'],[-1,'    featureIdToHex: function(featureId) {'],[0,'        var id = Number(featureId.split(\&quot;_\&quot;).pop()) + 1; \/\/ zero for no feature'],[0,'        if (id &gt;= 16777216) {'],[0,'            this.hitOverflow = id - 16777215;'],[0,'            id = id % 16777216 + 1;'],[-1,'        }'],[0,'        var hex = \&quot;000000\&quot; + id.toString(16);'],[0,'        var len = hex.length;'],[0,'        hex = \&quot;#\&quot; + hex.substring(len-6, len);'],[0,'        return hex;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setHitContextStyle'],[-1,'     * Prepare the hit canvas for drawing by setting various global settings.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * type - {String} one of \'stroke\', \'fill\', or \'reset\''],[-1,'     * featureId - {String} The feature id.'],[-1,'     * symbolizer - {&lt;OpenLayers.Symbolizer&gt;} The symbolizer.'],[-1,'     *\/'],[-1,'    setHitContextStyle: function(type, featureId, symbolizer, strokeScaling) {'],[0,'        var hex = this.featureIdToHex(featureId);'],[0,'        if (type == \&quot;fill\&quot;) {'],[0,'            this.hitContext.globalAlpha = 1.0;'],[0,'            this.hitContext.fillStyle = hex;'],[0,'        } else if (type == \&quot;stroke\&quot;) {  '],[0,'            this.hitContext.globalAlpha = 1.0;'],[0,'            this.hitContext.strokeStyle = hex;'],[-1,'            \/\/ bump up stroke width to deal with antialiasing. If strokeScaling is defined, we\'re rendering a symbol '],[-1,'            \/\/ on a transformed canvas, so the antialias width bump has to scale as well.'],[0,'            if (typeof strokeScaling === \&quot;undefined\&quot;) {'],[0,'                this.hitContext.lineWidth = symbolizer.strokeWidth + 2;'],[-1,'            } else {'],[0,'                if (!isNaN(strokeScaling)) { this.hitContext.lineWidth = symbolizer.strokeWidth + 2.0 \/ strokeScaling; }'],[-1,'            }'],[-1,'        } else {'],[0,'            this.hitContext.globalAlpha = 0;'],[0,'            this.hitContext.lineWidth = 1;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawPoint'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style    - {Object}'],[-1,'     * featureId - {String}'],[-1,'     *\/ '],[-1,'    drawPoint: function(geometry, style, featureId) {'],[0,'        if(style.graphic !== false) {'],[0,'            if(style.externalGraphic) {'],[0,'                this.drawExternalGraphic(geometry, style, featureId);'],[0,'            } else if (style.graphicName &amp;&amp; (style.graphicName != \&quot;circle\&quot;)) {'],[0,'                this.drawNamedSymbol(geometry, style, featureId);'],[-1,'            } else {'],[0,'                var pt = this.getLocalXY(geometry);'],[0,'                var p0 = pt[0];'],[0,'                var p1 = pt[1];'],[0,'                if(!isNaN(p0) &amp;&amp; !isNaN(p1)) {'],[0,'                    var twoPi = Math.PI*2;'],[0,'                    var radius = style.pointRadius;'],[0,'                    if(style.fill !== false) {'],[0,'                        this.setCanvasStyle(\&quot;fill\&quot;, style);'],[0,'                        this.canvas.beginPath();'],[0,'                        this.canvas.arc(p0, p1, radius, 0, twoPi, true);'],[0,'                        this.canvas.fill();'],[0,'                        if (this.hitDetection) {'],[0,'                            this.setHitContextStyle(\&quot;fill\&quot;, featureId, style);'],[0,'                            this.hitContext.beginPath();'],[0,'                            this.hitContext.arc(p0, p1, radius, 0, twoPi, true);'],[0,'                            this.hitContext.fill();'],[-1,'                        }'],[-1,'                    }'],[-1,''],[0,'                    if(style.stroke !== false) {'],[0,'                        this.setCanvasStyle(\&quot;stroke\&quot;, style);'],[0,'                        this.canvas.beginPath();'],[0,'                        this.canvas.arc(p0, p1, radius, 0, twoPi, true);'],[0,'                        this.canvas.stroke();'],[0,'                        if (this.hitDetection) {'],[0,'                            this.setHitContextStyle(\&quot;stroke\&quot;, featureId, style);'],[0,'                            this.hitContext.beginPath();'],[0,'                            this.hitContext.arc(p0, p1, radius, 0, twoPi, true);'],[0,'                            this.hitContext.stroke();'],[-1,'                        }'],[0,'                        this.setCanvasStyle(\&quot;reset\&quot;);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawLineString'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style    - {Object}'],[-1,'     * featureId - {String}'],[-1,'     *\/ '],[-1,'    drawLineString: function(geometry, style, featureId) {'],[0,'        style = OpenLayers.Util.applyDefaults({fill: false}, style);'],[0,'        this.drawLinearRing(geometry, style, featureId);'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawLinearRing'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style    - {Object}'],[-1,'     * featureId - {String}'],[-1,'     *\/ '],[-1,'    drawLinearRing: function(geometry, style, featureId) {'],[0,'        if (style.fill !== false) {'],[0,'            this.setCanvasStyle(\&quot;fill\&quot;, style);'],[0,'            this.renderPath(this.canvas, geometry, style, featureId, \&quot;fill\&quot;);'],[0,'            if (this.hitDetection) {'],[0,'                this.setHitContextStyle(\&quot;fill\&quot;, featureId, style);'],[0,'                this.renderPath(this.hitContext, geometry, style, featureId, \&quot;fill\&quot;);'],[-1,'            }'],[-1,'        }'],[0,'        if (style.stroke !== false) {'],[0,'            this.setCanvasStyle(\&quot;stroke\&quot;, style);'],[0,'            this.renderPath(this.canvas, geometry, style, featureId, \&quot;stroke\&quot;);'],[0,'            if (this.hitDetection) {'],[0,'                this.setHitContextStyle(\&quot;stroke\&quot;, featureId, style);'],[0,'                this.renderPath(this.hitContext, geometry, style, featureId, \&quot;stroke\&quot;);'],[-1,'            }'],[-1,'        }'],[0,'        this.setCanvasStyle(\&quot;reset\&quot;);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: renderPath'],[-1,'     * Render a path with stroke and optional fill.'],[-1,'     *\/'],[-1,'    renderPath: function(context, geometry, style, featureId, type) {'],[0,'        var components = geometry.components;'],[0,'        var len = components.length;'],[0,'        context.beginPath();'],[0,'        var start = this.getLocalXY(components[0]);'],[0,'        var x = start[0];'],[0,'        var y = start[1];'],[0,'        if (!isNaN(x) &amp;&amp; !isNaN(y)) {'],[0,'            context.moveTo(start[0], start[1]);'],[0,'            for (var i=1; i&lt;len; ++i) {'],[0,'                var pt = this.getLocalXY(components[i]);'],[0,'                context.lineTo(pt[0], pt[1]);'],[-1,'            }'],[0,'            if (type === \&quot;fill\&quot;) {'],[0,'                context.fill();'],[-1,'            } else {'],[0,'                context.stroke();'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawPolygon'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style    - {Object}'],[-1,'     * featureId - {String}'],[-1,'     *\/ '],[-1,'    drawPolygon: function(geometry, style, featureId) {'],[0,'        var components = geometry.components;'],[0,'        var len = components.length;'],[0,'        this.drawLinearRing(components[0], style, featureId);'],[-1,'        \/\/ erase inner rings'],[0,'        for (var i=1; i&lt;len; ++i) {'],[-1,'            \/** '],[-1,'             * Note that this is overly agressive.  Here we punch holes through '],[-1,'             * all previously rendered features on the same canvas.  A better '],[-1,'             * solution for polygons with interior rings would be to draw the '],[-1,'             * polygon on a sketch canvas first.  We could erase all holes '],[-1,'             * there and then copy the drawing to the layer canvas. '],[-1,'             * TODO: http:\/\/trac.osgeo.org\/openlayers\/ticket\/3130 '],[-1,'             *\/'],[0,'            this.canvas.globalCompositeOperation = \&quot;destination-out\&quot;;'],[0,'            if (this.hitDetection) {'],[0,'                this.hitContext.globalCompositeOperation = \&quot;destination-out\&quot;;'],[-1,'            }'],[0,'            this.drawLinearRing('],[-1,'                components[i], '],[-1,'                OpenLayers.Util.applyDefaults({stroke: false, fillOpacity: 1.0}, style),'],[-1,'                featureId'],[-1,'            );'],[0,'            this.canvas.globalCompositeOperation = \&quot;source-over\&quot;;'],[0,'            if (this.hitDetection) {'],[0,'                this.hitContext.globalCompositeOperation = \&quot;source-over\&quot;;'],[-1,'            }'],[0,'            this.drawLinearRing('],[-1,'                components[i], '],[-1,'                OpenLayers.Util.applyDefaults({fill: false}, style),'],[-1,'                featureId'],[-1,'            );'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawText'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * location - {&lt;OpenLayers.Point&gt;}'],[-1,'     * style    - {Object}'],[-1,'     *\/'],[-1,'    drawText: function(location, style) {'],[0,'        var pt = this.getLocalXY(location);'],[-1,''],[0,'        this.setCanvasStyle(\&quot;reset\&quot;);'],[0,'        this.canvas.fillStyle = style.fontColor;'],[0,'        this.canvas.globalAlpha = style.fontOpacity || 1.0;'],[0,'        var fontStyle = [style.fontStyle ? style.fontStyle : \&quot;normal\&quot;,'],[-1,'                         \&quot;normal\&quot;, \/\/ \&quot;font-variant\&quot; not supported'],[-1,'                         style.fontWeight ? style.fontWeight : \&quot;normal\&quot;,'],[-1,'                         style.fontSize ? style.fontSize : \&quot;1em\&quot;,'],[-1,'                         style.fontFamily ? style.fontFamily : \&quot;sans-serif\&quot;].join(\&quot; \&quot;);'],[0,'        var labelRows = style.label.split(\'\\n\');'],[0,'        var numRows = labelRows.length;'],[0,'        if (this.canvas.fillText) {'],[-1,'            \/\/ HTML5'],[0,'            this.canvas.font = fontStyle;'],[0,'            this.canvas.textAlign ='],[-1,'                OpenLayers.Renderer.Canvas.LABEL_ALIGN[style.labelAlign[0]] ||'],[-1,'                \&quot;center\&quot;;'],[0,'            this.canvas.textBaseline ='],[-1,'                OpenLayers.Renderer.Canvas.LABEL_ALIGN[style.labelAlign[1]] ||'],[-1,'                \&quot;middle\&quot;;'],[0,'            var vfactor ='],[-1,'                OpenLayers.Renderer.Canvas.LABEL_FACTOR[style.labelAlign[1]];'],[0,'            if (vfactor == null) {'],[0,'                vfactor = -.5;'],[-1,'            }'],[0,'            var lineHeight ='],[-1,'                this.canvas.measureText(\'Mg\').height ||'],[-1,'                this.canvas.measureText(\'xx\').width;'],[0,'            pt[1] += lineHeight*vfactor*(numRows-1);'],[0,'            for (var i = 0; i &lt; numRows; i++) {'],[0,'                if (style.labelOutlineWidth) {'],[0,'                    this.canvas.save();'],[0,'                    this.canvas.strokeStyle = style.labelOutlineColor;'],[0,'                    this.canvas.lineWidth = style.labelOutlineWidth;'],[0,'                    this.canvas.strokeText(labelRows[i], pt[0], pt[1] + (lineHeight*i) + 1);'],[0,'                    this.canvas.restore();'],[-1,'                }'],[0,'                this.canvas.fillText(labelRows[i], pt[0], pt[1] + (lineHeight*i));'],[-1,'            }'],[0,'        } else if (this.canvas.mozDrawText) {'],[-1,'            \/\/ Mozilla pre-Gecko1.9.1 (&lt;FF3.1)'],[0,'            this.canvas.mozTextStyle = fontStyle;'],[-1,'            \/\/ No built-in text alignment, so we measure and adjust the position'],[0,'            var hfactor ='],[-1,'                OpenLayers.Renderer.Canvas.LABEL_FACTOR[style.labelAlign[0]];'],[0,'            if (hfactor == null) {'],[0,'                hfactor = -.5;'],[-1,'            }'],[0,'            var vfactor ='],[-1,'                OpenLayers.Renderer.Canvas.LABEL_FACTOR[style.labelAlign[1]];'],[0,'            if (vfactor == null) {'],[0,'                vfactor = -.5;'],[-1,'            }'],[0,'            var lineHeight = this.canvas.mozMeasureText(\'xx\');'],[0,'            pt[1] += lineHeight*(1 + (vfactor*numRows));'],[0,'            for (var i = 0; i &lt; numRows; i++) {'],[0,'                var x = pt[0] + (hfactor*this.canvas.mozMeasureText(labelRows[i]));'],[0,'                var y = pt[1] + (i*lineHeight);'],[0,'                this.canvas.translate(x, y);'],[0,'                this.canvas.mozDrawText(labelRows[i]);'],[0,'                this.canvas.translate(-x, -y);'],[-1,'            }'],[-1,'        }'],[0,'        this.setCanvasStyle(\&quot;reset\&quot;);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getLocalXY'],[-1,'     * transform geographic xy into pixel xy'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     *\/'],[-1,'    getLocalXY: function(point) {'],[0,'        var resolution = this.getResolution();'],[0,'        var extent = this.extent;'],[0,'        var x = ((point.x - this.featureDx) \/ resolution + (-extent.left \/ resolution));'],[0,'        var y = ((extent.top \/ resolution) - point.y \/ resolution);'],[0,'        return [x, y];'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clear'],[-1,'     * Clear all vectors from the renderer.'],[-1,'     *\/    '],[-1,'    clear: function() {'],[0,'        var height = this.root.height;'],[0,'        var width = this.root.width;'],[0,'        this.canvas.clearRect(0, 0, width, height);'],[0,'        this.features = {};'],[0,'        if (this.hitDetection) {'],[0,'            this.hitContext.clearRect(0, 0, width, height);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getFeatureIdFromEvent'],[-1,'     * Returns a feature id from an event on the renderer.  '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector} A feature or undefined.  This method returns a '],[-1,'     *     feature instead of a feature id to avoid an unnecessary lookup on the'],[-1,'     *     layer.'],[-1,'     *\/'],[-1,'    getFeatureIdFromEvent: function(evt) {'],[0,'        var featureId, feature;'],[-1,'        '],[0,'        if (this.hitDetection &amp;&amp; this.root.style.display !== \&quot;none\&quot;) {'],[-1,'            \/\/ this dragging check should go in the feature handler'],[0,'            if (!this.map.dragging) {'],[0,'                var xy = evt.xy;'],[0,'                var x = xy.x | 0;'],[0,'                var y = xy.y | 0;'],[0,'                var data = this.hitContext.getImageData(x, y, 1, 1).data;'],[0,'                if (data[3] === 255) { \/\/ antialiased'],[0,'                    var id = data[2] + (256 * (data[1] + (256 * data[0])));'],[0,'                    if (id) {'],[0,'                        featureId = \&quot;OpenLayers_Feature_Vector_\&quot; + (id - 1 + this.hitOverflow);'],[0,'                        try {'],[0,'                            feature = this.features[featureId][0];'],[-1,'                        } catch(err) {'],[-1,'                            \/\/ Because of antialiasing on the canvas, when the hit location is at a point where the edge of'],[-1,'                            \/\/ one symbol intersects the interior of another symbol, a wrong hit color (and therefore id) results.'],[-1,'                            \/\/ todo: set Antialiasing = \'off\' on the hitContext as soon as browsers allow it.'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return feature;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: eraseFeatures '],[-1,'     * This is called by the layer to erase features; removes the feature from'],[-1,'     *     the list, then redraws the layer.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} '],[-1,'     *\/'],[-1,'    eraseFeatures: function(features) {'],[0,'        if(!(OpenLayers.Util.isArray(features))) {'],[0,'            features = [features];'],[-1,'        }'],[0,'        for(var i=0; i&lt;features.length; ++i) {'],[0,'            delete this.features[features[i].id];'],[-1,'        }'],[0,'        this.redraw();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: redraw'],[-1,'     * The real \'meat\' of the function: any time things have changed,'],[-1,'     *     redraw() can be called to loop over all the data and (you guessed'],[-1,'     *     it) redraw it.  Unlike Elements-based Renderers, we can\'t interact'],[-1,'     *     with things once they\'re drawn, to remove them, for example, so'],[-1,'     *     instead we have to just clear everything and draw from scratch.'],[-1,'     *\/'],[-1,'    redraw: function() {'],[0,'        if (!this.locked) {'],[0,'            var height = this.root.height;'],[0,'            var width = this.root.width;'],[0,'            this.canvas.clearRect(0, 0, width, height);'],[0,'            if (this.hitDetection) {'],[0,'                this.hitContext.clearRect(0, 0, width, height);'],[-1,'            }'],[0,'            var labelMap = [];'],[0,'            var feature, geometry, style;'],[0,'            var worldBounds = (this.map.baseLayer &amp;&amp; this.map.baseLayer.wrapDateLine) &amp;&amp; this.map.getMaxExtent();'],[0,'            for (var id in this.features) {'],[0,'                if (!this.features.hasOwnProperty(id)) { continue; }'],[0,'                feature = this.features[id][0];'],[0,'                geometry = feature.geometry;'],[0,'                this.calculateFeatureDx(geometry.getBounds(), worldBounds);'],[0,'                style = this.features[id][1];'],[0,'                this.drawGeometry(geometry, style, feature.id);'],[0,'                if(style.label) {'],[0,'                    labelMap.push([feature, style]);'],[-1,'                }'],[-1,'            }'],[0,'            var item;'],[0,'            for (var i=0, len=labelMap.length; i&lt;len; ++i) {'],[0,'                item = labelMap[i];'],[0,'                this.drawText(item[0].geometry.getCentroid(), item[1]);'],[-1,'            }'],[-1,'        }    '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Renderer.Canvas\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Renderer.Canvas.LABEL_ALIGN'],[-1,' * {Object}'],[-1,' *\/'],[1,'OpenLayers.Renderer.Canvas.LABEL_ALIGN = {'],[-1,'    \&quot;l\&quot;: \&quot;left\&quot;,'],[-1,'    \&quot;r\&quot;: \&quot;right\&quot;,'],[-1,'    \&quot;t\&quot;: \&quot;top\&quot;,'],[-1,'    \&quot;b\&quot;: \&quot;bottom\&quot;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Renderer.Canvas.LABEL_FACTOR'],[-1,' * {Object}'],[-1,' *\/'],[1,'OpenLayers.Renderer.Canvas.LABEL_FACTOR = {'],[-1,'    \&quot;l\&quot;: 0,'],[-1,'    \&quot;r\&quot;: -1,'],[-1,'    \&quot;t\&quot;: 0,'],[-1,'    \&quot;b\&quot;: -1'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Renderer.Canvas.drawImageScaleFactor'],[-1,' * {Number} Scale factor to apply to the canvas drawImage arguments. This'],[-1,' *     is always 1 except for Android 2.1 devices, to work around'],[-1,' *     http:\/\/code.google.com\/p\/android\/issues\/detail?id=5141.'],[-1,' *\/'],[1,'OpenLayers.Renderer.Canvas.drawImageScaleFactor = null;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/OSM.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' * @requires OpenLayers\/Geometry\/LineString.js'],[-1,' * @requires OpenLayers\/Geometry\/Polygon.js'],[-1,' * @requires OpenLayers\/Projection.js'],[-1,' *\/'],[-1,''],[-1,'\/**  '],[-1,' * Class: OpenLayers.Format.OSM'],[-1,' * OSM parser. Create a new instance with the '],[-1,' *     &lt;OpenLayers.Format.OSM&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.OSM = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: checkTags'],[-1,'     * {Boolean} Should tags be checked to determine whether something'],[-1,'     * should be treated as a seperate node. Will slow down parsing.'],[-1,'     * Default is false.'],[-1,'     *\/'],[-1,'    checkTags: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: interestingTagsExclude'],[-1,'     * {Array} List of tags to exclude from \'interesting\' checks on nodes.'],[-1,'     * Must be set when creating the format. Will only be used if checkTags'],[-1,'     * is set.'],[-1,'     *\/'],[-1,'    interestingTagsExclude: null, '],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: areaTags'],[-1,'     * {Array} List of tags indicating that something is an area.  '],[-1,'     * Must be set when creating the format. Will only be used if '],[-1,'     * checkTags is true.'],[-1,'     *\/'],[-1,'    areaTags: null, '],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.OSM'],[-1,'     * Create a new parser for OSM.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        var layer_defaults = {'],[-1,'          \'interestingTagsExclude\': [\'source\', \'source_ref\', '],[-1,'              \'source:ref\', \'history\', \'attribution\', \'created_by\'],'],[-1,'          \'areaTags\': [\'area\', \'building\', \'leisure\', \'tourism\', \'ruins\','],[-1,'              \'historic\', \'landuse\', \'military\', \'natural\', \'sport\'] '],[-1,'        };'],[-1,'          '],[0,'        layer_defaults = OpenLayers.Util.extend(layer_defaults, options);'],[-1,'        '],[0,'        var interesting = {};'],[0,'        for (var i = 0; i &lt; layer_defaults.interestingTagsExclude.length; i++) {'],[0,'            interesting[layer_defaults.interestingTagsExclude[i]] = true;'],[-1,'        }'],[0,'        layer_defaults.interestingTagsExclude = interesting;'],[-1,'        '],[0,'        var area = {};'],[0,'        for (var i = 0; i &lt; layer_defaults.areaTags.length; i++) {'],[0,'            area[layer_defaults.areaTags[i]] = true;'],[-1,'        }'],[0,'        layer_defaults.areaTags = area;'],[-1,''],[-1,'        \/\/ OSM coordinates are always in longlat WGS84'],[0,'        this.externalProjection = new OpenLayers.Projection(\&quot;EPSG:4326\&quot;);'],[-1,'        '],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [layer_defaults]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Return a list of features from a OSM doc'],[-1,'     '],[-1,'     * Parameters:'],[-1,'     * doc - {Element} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * Array({&lt;OpenLayers.Feature.Vector&gt;})'],[-1,'     *\/'],[-1,'    read: function(doc) {'],[0,'        if (typeof doc == \&quot;string\&quot;) { '],[0,'            doc = OpenLayers.Format.XML.prototype.read.apply(this, [doc]);'],[-1,'        }'],[-1,''],[0,'        var nodes = this.getNodes(doc);'],[0,'        var ways = this.getWays(doc);'],[-1,'        '],[-1,'        \/\/ Geoms will contain at least ways.length entries.'],[0,'        var feat_list = new Array(ways.length);'],[-1,'        '],[0,'        for (var i = 0; i &lt; ways.length; i++) {'],[-1,'            \/\/ We know the minimal of this one ahead of time. (Could be -1'],[-1,'            \/\/ due to areas\/polygons)'],[0,'            var point_list = new Array(ways[i].nodes.length);'],[-1,'            '],[0,'            var poly = this.isWayArea(ways[i]) ? 1 : 0; '],[0,'            for (var j = 0; j &lt; ways[i].nodes.length; j++) {'],[0,'               var node = nodes[ways[i].nodes[j]];'],[-1,'               '],[0,'               var point = new OpenLayers.Geometry.Point(node.lon, node.lat);'],[-1,'               '],[-1,'               \/\/ Since OSM is topological, we stash the node ID internally. '],[0,'               point.osm_id = parseInt(ways[i].nodes[j]);'],[0,'               point_list[j] = point;'],[-1,'               '],[-1,'               \/\/ We don\'t display nodes if they\'re used inside other '],[-1,'               \/\/ elements.'],[0,'               node.used = true; '],[-1,'            }'],[0,'            var geometry = null;'],[0,'            if (poly) { '],[0,'                geometry = new OpenLayers.Geometry.Polygon('],[-1,'                    new OpenLayers.Geometry.LinearRing(point_list));'],[-1,'            } else {    '],[0,'                geometry = new OpenLayers.Geometry.LineString(point_list);'],[-1,'            }'],[0,'            if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'                geometry.transform(this.externalProjection, '],[-1,'                    this.internalProjection);'],[-1,'            }        '],[0,'            var feat = new OpenLayers.Feature.Vector(geometry,'],[-1,'                ways[i].tags);'],[0,'            feat.osm_id = parseInt(ways[i].id);'],[0,'            feat.fid = \&quot;way.\&quot; + feat.osm_id;'],[0,'            feat_list[i] = feat;'],[-1,'        } '],[0,'        for (var node_id in nodes) {'],[0,'            var node = nodes[node_id];'],[0,'            if (!node.used || this.checkTags) {'],[0,'                var tags = null;'],[-1,'                '],[0,'                if (this.checkTags) {'],[0,'                    var result = this.getTags(node.node, true);'],[0,'                    if (node.used &amp;&amp; !result[1]) {'],[0,'                        continue;'],[-1,'                    }'],[0,'                    tags = result[0];'],[-1,'                } else { '],[0,'                    tags = this.getTags(node.node);'],[-1,'                }    '],[-1,'                '],[0,'                var feat = new OpenLayers.Feature.Vector('],[-1,'                    new OpenLayers.Geometry.Point(node[\'lon\'], node[\'lat\']),'],[-1,'                    tags);'],[0,'                if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'                    feat.geometry.transform(this.externalProjection, '],[-1,'                        this.internalProjection);'],[-1,'                }        '],[0,'                feat.osm_id = parseInt(node_id); '],[0,'                feat.fid = \&quot;node.\&quot; + feat.osm_id;'],[0,'                feat_list.push(feat);'],[-1,'            }   '],[-1,'            \/\/ Memory cleanup'],[0,'            node.node = null;'],[-1,'        }        '],[0,'        return feat_list;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getNodes'],[-1,'     * Return the node items from a doc.  '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * doc - {DOMElement} node to parse tags from'],[-1,'     *\/'],[-1,'    getNodes: function(doc) {'],[0,'        var node_list = doc.getElementsByTagName(\&quot;node\&quot;);'],[0,'        var nodes = {};'],[0,'        for (var i = 0; i &lt; node_list.length; i++) {'],[0,'            var node = node_list[i];'],[0,'            var id = node.getAttribute(\&quot;id\&quot;);'],[0,'            nodes[id] = {'],[-1,'                \'lat\': node.getAttribute(\&quot;lat\&quot;),'],[-1,'                \'lon\': node.getAttribute(\&quot;lon\&quot;),'],[-1,'                \'node\': node'],[-1,'            };'],[-1,'        }'],[0,'        return nodes;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getWays'],[-1,'     * Return the way items from a doc.  '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * doc - {DOMElement} node to parse tags from'],[-1,'     *\/'],[-1,'    getWays: function(doc) {'],[0,'        var way_list = doc.getElementsByTagName(\&quot;way\&quot;);'],[0,'        var return_ways = [];'],[0,'        for (var i = 0; i &lt; way_list.length; i++) {'],[0,'            var way = way_list[i];'],[0,'            var way_object = {'],[-1,'              id: way.getAttribute(\&quot;id\&quot;)'],[-1,'            };'],[-1,'            '],[0,'            way_object.tags = this.getTags(way);'],[-1,'            '],[0,'            var node_list = way.getElementsByTagName(\&quot;nd\&quot;);'],[-1,'            '],[0,'            way_object.nodes = new Array(node_list.length);'],[-1,'            '],[0,'            for (var j = 0; j &lt; node_list.length; j++) {'],[0,'                way_object.nodes[j] = node_list[j].getAttribute(\&quot;ref\&quot;);'],[-1,'            }  '],[0,'            return_ways.push(way_object);'],[-1,'        }'],[0,'        return return_ways; '],[-1,'        '],[-1,'    },  '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getTags'],[-1,'     * Return the tags list attached to a specific DOM element.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * dom_node - {DOMElement} node to parse tags from'],[-1,'     * interesting_tags - {Boolean} whether the return from this function should'],[-1,'     *    return a boolean indicating that it has \'interesting tags\' -- '],[-1,'     *    tags like attribution and source are ignored. (To change the list'],[-1,'     *    of tags, see interestingTagsExclude)'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * tags - {Object} hash of tags'],[-1,'     * interesting - {Boolean} if interesting_tags is passed, returns'],[-1,'     *     whether there are any interesting tags on this element.'],[-1,'     *\/'],[-1,'    getTags: function(dom_node, interesting_tags) {'],[0,'        var tag_list = dom_node.getElementsByTagName(\&quot;tag\&quot;);'],[0,'        var tags = {};'],[0,'        var interesting = false;'],[0,'        for (var j = 0; j &lt; tag_list.length; j++) {'],[0,'            var key = tag_list[j].getAttribute(\&quot;k\&quot;);'],[0,'            tags[key] = tag_list[j].getAttribute(\&quot;v\&quot;);'],[0,'            if (interesting_tags) {'],[0,'                if (!this.interestingTagsExclude[key]) {'],[0,'                    interesting = true;'],[-1,'                }'],[-1,'            }    '],[-1,'        }  '],[0,'        return interesting_tags ? [tags, interesting] : tags;     '],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: isWayArea'],[-1,'     * Given a way object from getWays, check whether the tags and geometry'],[-1,'     * indicate something is an area.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    isWayArea: function(way) { '],[0,'        var poly_shaped = false;'],[0,'        var poly_tags = false;'],[-1,'        '],[0,'        if (way.nodes[0] == way.nodes[way.nodes.length - 1]) {'],[0,'            poly_shaped = true;'],[-1,'        }'],[0,'        if (this.checkTags) {'],[0,'            for(var key in way.tags) {'],[0,'                if (this.areaTags[key]) {'],[0,'                    poly_tags = true;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }    '],[0,'        return poly_shaped &amp;&amp; (this.checkTags ? poly_tags : true);            '],[-1,'    }, '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write '],[-1,'     * Takes a list of features, returns a serialized OSM format file for use'],[-1,'     * in tools like JOSM.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)}'],[-1,'     *\/'],[-1,'    write: function(features) { '],[0,'        if (!(OpenLayers.Util.isArray(features))) {'],[0,'            features = [features];'],[-1,'        }'],[-1,'        '],[0,'        this.osm_id = 1;'],[0,'        this.created_nodes = {};'],[0,'        var root_node = this.createElementNS(null, \&quot;osm\&quot;);'],[0,'        root_node.setAttribute(\&quot;version\&quot;, \&quot;0.5\&quot;);'],[0,'        root_node.setAttribute(\&quot;generator\&quot;, \&quot;OpenLayers \&quot;+ OpenLayers.VERSION_NUMBER);'],[-1,''],[-1,'        \/\/ Loop backwards, because the deserializer puts nodes last, and '],[-1,'        \/\/ we want them first if possible'],[0,'        for(var i = features.length - 1; i &gt;= 0; i--) {'],[0,'            var nodes = this.createFeatureNodes(features[i]);'],[0,'            for (var j = 0; j &lt; nodes.length; j++) {'],[0,'                root_node.appendChild(nodes[j]);'],[-1,'            }    '],[-1,'        }'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [root_node]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createFeatureNodes'],[-1,'     * Takes a feature, returns a list of nodes from size 0-&gt;n.'],[-1,'     * Will include all pieces of the serialization that are required which'],[-1,'     * have not already been created. Calls out to createXML based on geometry'],[-1,'     * type.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    createFeatureNodes: function(feature) {'],[0,'        var nodes = [];'],[0,'        var className = feature.geometry.CLASS_NAME;'],[0,'        var type = className.substring(className.lastIndexOf(\&quot;.\&quot;) + 1);'],[0,'        type = type.toLowerCase();'],[0,'        var builder = this.createXML[type];'],[0,'        if (builder) {'],[0,'            nodes = builder.apply(this, [feature]);'],[-1,'        }'],[0,'        return nodes;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createXML'],[-1,'     * Takes a feature, returns a list of nodes from size 0-&gt;n.'],[-1,'     * Will include all pieces of the serialization that are required which'],[-1,'     * have not already been created.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    createXML: {'],[-1,'        \'point\': function(point) {'],[0,'            var id = null;'],[0,'            var geometry = point.geometry ? point.geometry : point;'],[-1,'            '],[0,'            if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'                geometry = geometry.clone();'],[0,'                geometry.transform(this.internalProjection, '],[-1,'                                   this.externalProjection);'],[-1,'            }                       '],[-1,'            '],[0,'            var already_exists = false; \/\/ We don\'t return anything if the node'],[-1,'                                        \/\/ has already been created'],[0,'            if (point.osm_id) {'],[0,'                id = point.osm_id;'],[0,'                if (this.created_nodes[id]) {'],[0,'                    already_exists = true;'],[-1,'                }    '],[-1,'            } else {'],[0,'               id = -this.osm_id;'],[0,'               this.osm_id++; '],[-1,'            }'],[0,'            if (already_exists) {'],[0,'                node = this.created_nodes[id];'],[-1,'            } else {    '],[0,'                var node = this.createElementNS(null, \&quot;node\&quot;);'],[-1,'            }'],[0,'            this.created_nodes[id] = node;'],[0,'            node.setAttribute(\&quot;id\&quot;, id);'],[0,'            node.setAttribute(\&quot;lon\&quot;, geometry.x); '],[0,'            node.setAttribute(\&quot;lat\&quot;, geometry.y);'],[0,'            if (point.attributes) {'],[0,'                this.serializeTags(point, node);'],[-1,'            }'],[0,'            this.setState(point, node);'],[0,'            return already_exists ? [] : [node];'],[-1,'        }, '],[-1,'        linestring: function(feature) {'],[0,'            var id;'],[0,'            var nodes = [];'],[0,'            var geometry = feature.geometry;'],[0,'            if (feature.osm_id) {'],[0,'                id = feature.osm_id;'],[-1,'            } else {'],[0,'                id = -this.osm_id;'],[0,'                this.osm_id++; '],[-1,'            }'],[0,'            var way = this.createElementNS(null, \&quot;way\&quot;);'],[0,'            way.setAttribute(\&quot;id\&quot;, id);'],[0,'            for (var i = 0; i &lt; geometry.components.length; i++) {'],[0,'                var node = this.createXML[\'point\'].apply(this, [geometry.components[i]]);'],[0,'                if (node.length) {'],[0,'                    node = node[0];'],[0,'                    var node_ref = node.getAttribute(\&quot;id\&quot;);'],[0,'                    nodes.push(node);'],[-1,'                } else {'],[0,'                    node_ref = geometry.components[i].osm_id;'],[0,'                    node = this.created_nodes[node_ref];'],[-1,'                }'],[0,'                this.setState(feature, node);'],[0,'                var nd_dom = this.createElementNS(null, \&quot;nd\&quot;);'],[0,'                nd_dom.setAttribute(\&quot;ref\&quot;, node_ref);'],[0,'                way.appendChild(nd_dom);'],[-1,'            }'],[0,'            this.serializeTags(feature, way);'],[0,'            nodes.push(way);'],[-1,'            '],[0,'            return nodes;'],[-1,'        },'],[-1,'        polygon: function(feature) {'],[0,'            var attrs = OpenLayers.Util.extend({\'area\':\'yes\'}, feature.attributes);'],[0,'            var feat = new OpenLayers.Feature.Vector(feature.geometry.components[0], attrs); '],[0,'            feat.osm_id = feature.osm_id;'],[0,'            return this.createXML[\'linestring\'].apply(this, [feat]);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: serializeTags'],[-1,'     * Given a feature, serialize the attributes onto the given node.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     * node - {DOMNode}'],[-1,'     *\/'],[-1,'    serializeTags: function(feature, node) {'],[0,'        for (var key in feature.attributes) {'],[0,'            var tag = this.createElementNS(null, \&quot;tag\&quot;);'],[0,'            tag.setAttribute(\&quot;k\&quot;, key);'],[0,'            tag.setAttribute(\&quot;v\&quot;, feature.attributes[key]);'],[0,'            node.appendChild(tag);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setState '],[-1,'     * OpenStreetMap has a convention that \'state\' is stored for modification or deletion.'],[-1,'     * This allows the file to be uploaded via JOSM or the bulk uploader tool.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     * node - {DOMNode}'],[-1,'     *\/'],[-1,'    setState: function(feature, node) {'],[0,'        if (feature.state) {'],[0,'            var state = null;'],[0,'            switch(feature.state) {'],[-1,'                case OpenLayers.State.UPDATE:'],[0,'                    state = \&quot;modify\&quot;;'],[-1,'                case OpenLayers.State.DELETE:'],[0,'                    state = \&quot;delete\&quot;;'],[-1,'            }'],[0,'            if (state) {'],[0,'                node.setAttribute(\&quot;action\&quot;, state);'],[-1,'            }'],[-1,'        }    '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.OSM\&quot; '],[-1,'});     '],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler\/Keyboard.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler.js'],[-1,' * @requires OpenLayers\/Events.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.handler.Keyboard'],[-1,' * A handler for keyboard events.  Create a new instance with the'],[-1,' *     &lt;OpenLayers.Handler.Keyboard&gt; constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Handler&gt; '],[-1,' *\/'],[1,'OpenLayers.Handler.Keyboard = OpenLayers.Class(OpenLayers.Handler, {'],[-1,''],[-1,'    \/* http:\/\/www.quirksmode.org\/js\/keys.html explains key x-browser'],[-1,'        key handling quirks in pretty nice detail *\/'],[-1,''],[-1,'    \/** '],[-1,'     * Constant: KEY_EVENTS'],[-1,'     * keydown, keypress, keyup'],[-1,'     *\/'],[-1,'    KEY_EVENTS: [\&quot;keydown\&quot;, \&quot;keyup\&quot;],'],[-1,''],[-1,'    \/** '],[-1,'    * Property: eventListener'],[-1,'    * {Function}'],[-1,'    *\/'],[-1,'    eventListener: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: observeElement'],[-1,'     * {DOMElement|String} The DOM element on which we listen for'],[-1,'     *     key events. Default to the document.'],[-1,'     *\/'],[-1,'    observeElement: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler.Keyboard'],[-1,'     * Returns a new keyboard handler.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} The control that is making use of'],[-1,'     *     this handler.  If a handler is being used without a control, the'],[-1,'     *     handlers setMap method must be overridden to deal properly with'],[-1,'     *     the map.'],[-1,'     * callbacks - {Object} An object containing a single function to be'],[-1,'     *     called when the drag operation is finished. The callback should'],[-1,'     *     expect to recieve a single argument, the pixel location of the event.'],[-1,'     *     Callbacks for \'keydown\', \'keypress\', and \'keyup\' are supported.'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     handler.'],[-1,'     *\/'],[-1,'    initialize: function(control, callbacks, options) {'],[0,'        OpenLayers.Handler.prototype.initialize.apply(this, arguments);'],[-1,'        \/\/ cache the bound event listener method so it can be unobserved later'],[0,'        this.eventListener = OpenLayers.Function.bindAsEventListener('],[-1,'            this.handleKeyEvent, this'],[-1,'        );'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.deactivate();'],[0,'        this.eventListener = null;'],[0,'        OpenLayers.Handler.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: activate'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {'],[0,'            this.observeElement = this.observeElement || document;'],[0,'            for (var i=0, len=this.KEY_EVENTS.length; i&lt;len; i++) {'],[0,'                OpenLayers.Event.observe('],[-1,'                    this.observeElement, this.KEY_EVENTS[i], this.eventListener);'],[-1,'            }'],[0,'            return true;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: deactivate'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = false;'],[0,'        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {'],[0,'            for (var i=0, len=this.KEY_EVENTS.length; i&lt;len; i++) {'],[0,'                OpenLayers.Event.stopObserving('],[-1,'                    this.observeElement, this.KEY_EVENTS[i], this.eventListener);'],[-1,'            }'],[0,'            deactivated = true;'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleKeyEvent '],[-1,'     *\/'],[-1,'    handleKeyEvent: function (evt) {'],[0,'        if (this.checkModifiers(evt)) {'],[0,'            this.callback(evt.type, [evt]);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler.Keyboard\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/ModifyFeature.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler\/Drag.js'],[-1,' * @requires OpenLayers\/Handler\/Keyboard.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.ModifyFeature'],[-1,' * Control to modify features.  When activated, a click renders the vertices'],[-1,' *     of a feature - these vertices can then be dragged.  By default, the'],[-1,' *     delete key will delete the vertex under the mouse.  New features are'],[-1,' *     added by dragging \&quot;virtual vertices\&quot; between vertices.  Create a new'],[-1,' *     control with the &lt;OpenLayers.Control.ModifyFeature&gt; constructor.'],[-1,' *'],[-1,' * Inherits From:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.ModifyFeature = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: documentDrag'],[-1,'     * {Boolean} If set to true, dragging vertices will continue even if the'],[-1,'     *     mouse cursor leaves the map viewport. Default is false.'],[-1,'     *\/'],[-1,'    documentDrag: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: geometryTypes'],[-1,'     * {Array(String)} To restrict modification to a limited set of geometry'],[-1,'     *     types, send a list of strings corresponding to the geometry class'],[-1,'     *     names.'],[-1,'     *\/'],[-1,'    geometryTypes: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: clickout'],[-1,'     * {Boolean} Unselect features when clicking outside any feature.'],[-1,'     *     Default is true.'],[-1,'     *\/'],[-1,'    clickout: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: toggle'],[-1,'     * {Boolean} Unselect a selected feature on click.'],[-1,'     *      Default is true.'],[-1,'     *\/'],[-1,'    toggle: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: standalone'],[-1,'     * {Boolean} Set to true to create a control without SelectFeature'],[-1,'     *     capabilities. Default is false.  If standalone is true, to modify'],[-1,'     *     a feature, call the &lt;selectFeature&gt; method with the target feature.'],[-1,'     *     Note that you must call the &lt;unselectFeature&gt; method to finish'],[-1,'     *     feature modification in standalone mode (before starting to modify'],[-1,'     *     another feature).'],[-1,'     *\/'],[-1,'    standalone: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layer'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;}'],[-1,'     *\/'],[-1,'    layer: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: feature'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} Feature currently available for modification.'],[-1,'     *\/'],[-1,'    feature: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: vertex'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} Vertex currently being modified.'],[-1,'     *\/'],[-1,'    vertex: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: vertices'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} Verticies currently available'],[-1,'     *     for dragging.'],[-1,'     *\/'],[-1,'    vertices: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: virtualVertices'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} Virtual vertices in the middle'],[-1,'     *     of each edge.'],[-1,'     *\/'],[-1,'    virtualVertices: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: handlers'],[-1,'     * {Object}'],[-1,'     *\/'],[-1,'    handlers: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: deleteCodes'],[-1,'     * {Array(Integer)} Keycodes for deleting verticies.  Set to null to disable'],[-1,'     *     vertex deltion by keypress.  If non-null, keypresses with codes'],[-1,'     *     in this array will delete vertices under the mouse. Default'],[-1,'     *     is 46 and 68, the \'delete\' and lowercase \'d\' keys.'],[-1,'     *\/'],[-1,'    deleteCodes: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: virtualStyle'],[-1,'     * {Object} A symbolizer to be used for virtual vertices.'],[-1,'     *\/'],[-1,'    virtualStyle: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: vertexRenderIntent'],[-1,'     * {String} The renderIntent to use for vertices. If no &lt;virtualStyle&gt; is'],[-1,'     * provided, this renderIntent will also be used for virtual vertices, with'],[-1,'     * a fillOpacity and strokeOpacity of 0.3. Default is null, which means'],[-1,'     * that the layer\'s default style will be used for vertices.'],[-1,'     *\/'],[-1,'    vertexRenderIntent: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: mode'],[-1,'     * {Integer} Bitfields specifying the modification mode. Defaults to'],[-1,'     *      OpenLayers.Control.ModifyFeature.RESHAPE. To set the mode to a'],[-1,'     *      combination of options, use the | operator. For example, to allow'],[-1,'     *      the control to both resize and rotate features, use the following'],[-1,'     *      syntax'],[-1,'     * (code)'],[-1,'     * control.mode = OpenLayers.Control.ModifyFeature.RESIZE |'],[-1,'     *                OpenLayers.Control.ModifyFeature.ROTATE;'],[-1,'     *  (end)'],[-1,'     *\/'],[-1,'    mode: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: createVertices'],[-1,'     * {Boolean} Create new vertices by dragging the virtual vertices'],[-1,'     *     in the middle of each edge. Default is true.'],[-1,'     *\/'],[-1,'    createVertices: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: modified'],[-1,'     * {Boolean} The currently selected feature has been modified.'],[-1,'     *\/'],[-1,'    modified: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: radiusHandle'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} A handle for rotating\/resizing a feature.'],[-1,'     *\/'],[-1,'    radiusHandle: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: dragHandle'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} A handle for dragging a feature.'],[-1,'     *\/'],[-1,'    dragHandle: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: onModificationStart '],[-1,'     * {Function} *Deprecated*.  Register for \&quot;beforefeaturemodified\&quot; instead.'],[-1,'     *     The \&quot;beforefeaturemodified\&quot; event is triggered on the layer before'],[-1,'     *     any modification begins.'],[-1,'     *'],[-1,'     * Optional function to be called when a feature is selected'],[-1,'     *     to be modified. The function should expect to be called with a'],[-1,'     *     feature.  This could be used for example to allow to lock the'],[-1,'     *     feature on server-side.'],[-1,'     *\/'],[-1,'    onModificationStart: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: onModification'],[-1,'     * {Function} *Deprecated*.  Register for \&quot;featuremodified\&quot; instead.'],[-1,'     *     The \&quot;featuremodified\&quot; event is triggered on the layer with each'],[-1,'     *     feature modification.'],[-1,'     *'],[-1,'     * Optional function to be called when a feature has been'],[-1,'     *     modified.  The function should expect to be called with a feature.'],[-1,'     *\/'],[-1,'    onModification: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: onModificationEnd'],[-1,'     * {Function} *Deprecated*.  Register for \&quot;afterfeaturemodified\&quot; instead.'],[-1,'     *     The \&quot;afterfeaturemodified\&quot; event is triggered on the layer after'],[-1,'     *     a feature has been modified.'],[-1,'     *'],[-1,'     * Optional function to be called when a feature is finished '],[-1,'     *     being modified.  The function should expect to be called with a'],[-1,'     *     feature.'],[-1,'     *\/'],[-1,'    onModificationEnd: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.ModifyFeature'],[-1,'     * Create a new modify feature control.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;} Layer that contains features that'],[-1,'     *     will be modified.'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     control.'],[-1,'     *\/'],[-1,'    initialize: function(layer, options) {'],[0,'        options = options || {};'],[0,'        this.layer = layer;'],[0,'        this.vertices = [];'],[0,'        this.virtualVertices = [];'],[0,'        this.virtualStyle = OpenLayers.Util.extend({},'],[-1,'            this.layer.style ||'],[-1,'            this.layer.styleMap.createSymbolizer(null, options.vertexRenderIntent)'],[-1,'        );'],[0,'        this.virtualStyle.fillOpacity = 0.3;'],[0,'        this.virtualStyle.strokeOpacity = 0.3;'],[0,'        this.deleteCodes = [46, 68];'],[0,'        this.mode = OpenLayers.Control.ModifyFeature.RESHAPE;'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[0,'        if(!(OpenLayers.Util.isArray(this.deleteCodes))) {'],[0,'            this.deleteCodes = [this.deleteCodes];'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ configure the drag handler'],[0,'        var dragCallbacks = {'],[-1,'            down: function(pixel) {'],[0,'                this.vertex = null;'],[0,'                var feature = this.layer.getFeatureFromEvent('],[-1,'                        this.handlers.drag.evt);'],[0,'                if (feature) {'],[0,'                    this.dragStart(feature);'],[0,'                } else if (this.feature &amp;&amp; this.clickout) {'],[0,'                    this.unselectFeature(this.feature);'],[-1,'                }'],[-1,'            },'],[-1,'            move: function(pixel) {'],[0,'                delete this._unselect;'],[0,'                if (this.vertex) {'],[0,'                    this.dragVertex(this.vertex, pixel);'],[-1,'                }'],[-1,'            },'],[-1,'            up: function() {'],[0,'                this.handlers.drag.stopDown = false;'],[0,'                if (this._unselect) {'],[0,'                    this.unselectFeature(this._unselect);'],[0,'                    delete this._unselect;'],[-1,'                }'],[-1,'            },'],[-1,'            done: function(pixel) {'],[0,'                if (this.vertex) {'],[0,'                    this.dragComplete(this.vertex);'],[-1,'                }'],[-1,'            }'],[-1,'        };'],[0,'        var dragOptions = {'],[-1,'            documentDrag: this.documentDrag,'],[-1,'            stopDown: false'],[-1,'        };'],[-1,''],[-1,'        \/\/ configure the keyboard handler'],[0,'        var keyboardOptions = {'],[-1,'            keydown: this.handleKeypress'],[-1,'        };'],[0,'        this.handlers = {'],[-1,'            keyboard: new OpenLayers.Handler.Keyboard(this, keyboardOptions),'],[-1,'            drag: new OpenLayers.Handler.Drag(this, dragCallbacks, dragOptions)'],[-1,'        };'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Take care of things that are not handled in superclass.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.layer = null;'],[0,'        OpenLayers.Control.prototype.destroy.apply(this, []);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Activate the control.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Successfully activated the control.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        return (this.handlers.keyboard.activate() &amp;&amp;'],[-1,'                this.handlers.drag.activate() &amp;&amp;'],[-1,'                OpenLayers.Control.prototype.activate.apply(this, arguments));'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the control.'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Successfully deactivated the control.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = false;'],[-1,'        \/\/ the return from the controls is unimportant in this case'],[0,'        if(OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {'],[0,'            this.layer.removeFeatures(this.vertices, {silent: true});'],[0,'            this.layer.removeFeatures(this.virtualVertices, {silent: true});'],[0,'            this.vertices = [];'],[0,'            this.handlers.drag.deactivate();'],[0,'            this.handlers.keyboard.deactivate();'],[0,'            var feature = this.feature;'],[0,'            if (feature &amp;&amp; feature.geometry &amp;&amp; feature.layer) {'],[0,'                this.unselectFeature(feature);'],[-1,'            }'],[0,'            deactivated = true;'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: beforeSelectFeature'],[-1,'     * Called before a feature is selected.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The feature about to be selected.'],[-1,'     *\/'],[-1,'    beforeSelectFeature: function(feature) {'],[0,'        return this.layer.events.triggerEvent('],[-1,'            \&quot;beforefeaturemodified\&quot;, {feature: feature}'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: selectFeature'],[-1,'     * Select a feature for modification in standalone mode. In non-standalone'],[-1,'     * mode, this method is called when the select feature control selects a'],[-1,'     * feature. Register a listener to the beforefeaturemodified event and'],[-1,'     * return false to prevent feature modification.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} the selected feature.'],[-1,'     *\/'],[-1,'    selectFeature: function(feature) {'],[0,'        if (this.geometryTypes &amp;&amp; OpenLayers.Util.indexOf(this.geometryTypes,'],[-1,'                feature.geometry.CLASS_NAME) == -1) {'],[0,'            return;'],[-1,'        }'],[0,'        if (!this.standalone || this.beforeSelectFeature(feature) !== false) {'],[0,'            if (this.feature) {'],[0,'                this.unselectFeature(this.feature);'],[-1,'            }'],[0,'            this.feature = feature;'],[0,'            this.layer.selectedFeatures.push(feature);'],[0,'            this.layer.drawFeature(feature, \'select\');'],[0,'            this.modified = false;'],[0,'            this.resetVertices();'],[0,'            this.onModificationStart(this.feature);'],[-1,'        }'],[-1,'        \/\/ keep track of geometry modifications'],[0,'        var modified = feature.modified;'],[0,'        if (feature.geometry &amp;&amp; !(modified &amp;&amp; modified.geometry)) {'],[0,'            this._originalGeometry = feature.geometry.clone();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: unselectFeature'],[-1,'     * Called when the select feature control unselects a feature.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The unselected feature.'],[-1,'     *\/'],[-1,'    unselectFeature: function(feature) {'],[0,'        this.layer.removeFeatures(this.vertices, {silent: true});'],[0,'        this.vertices = [];'],[0,'        this.layer.destroyFeatures(this.virtualVertices, {silent: true});'],[0,'        this.virtualVertices = [];'],[0,'        if(this.dragHandle) {'],[0,'            this.layer.destroyFeatures([this.dragHandle], {silent: true});'],[0,'            delete this.dragHandle;'],[-1,'        }'],[0,'        if(this.radiusHandle) {'],[0,'            this.layer.destroyFeatures([this.radiusHandle], {silent: true});'],[0,'            delete this.radiusHandle;'],[-1,'        }'],[0,'        this.layer.drawFeature(this.feature, \'default\');'],[0,'        this.feature = null;'],[0,'        OpenLayers.Util.removeItem(this.layer.selectedFeatures, feature);'],[0,'        this.onModificationEnd(feature);'],[0,'        this.layer.events.triggerEvent(\&quot;afterfeaturemodified\&quot;, {'],[-1,'            feature: feature,'],[-1,'            modified: this.modified'],[-1,'        });'],[0,'        this.modified = false;'],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: dragStart'],[-1,'     * Called by the drag handler before a feature is dragged.  This method is'],[-1,'     *     used to differentiate between points and vertices'],[-1,'     *     of higher order geometries.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The point or vertex about to be'],[-1,'     *     dragged.'],[-1,'     *\/'],[-1,'    dragStart: function(feature) {'],[0,'        var isPoint = feature.geometry.CLASS_NAME =='],[-1,'                \'OpenLayers.Geometry.Point\';'],[0,'        if (!this.standalone &amp;&amp;'],[-1,'                ((!feature._sketch &amp;&amp; isPoint) || !feature._sketch)) {'],[0,'            if (this.toggle &amp;&amp; this.feature === feature) {'],[-1,'                \/\/ mark feature for unselection'],[0,'                this._unselect = feature;'],[-1,'            }'],[0,'            this.selectFeature(feature);'],[-1,'        }'],[0,'        if (feature._sketch || isPoint) {'],[-1,'            \/\/ feature is a drag or virtual handle or point'],[0,'            this.vertex = feature;'],[0,'            this.handlers.drag.stopDown = true;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: dragVertex'],[-1,'     * Called by the drag handler with each drag move of a vertex.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * vertex - {&lt;OpenLayers.Feature.Vector&gt;} The vertex being dragged.'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} Pixel location of the mouse event.'],[-1,'     *\/'],[-1,'    dragVertex: function(vertex, pixel) {'],[0,'        var pos = this.map.getLonLatFromViewPortPx(pixel);'],[0,'        var geom = vertex.geometry;'],[0,'        geom.move(pos.lon - geom.x, pos.lat - geom.y);'],[0,'        this.modified = true;'],[-1,'        \/**'],[-1,'         * Five cases:'],[-1,'         * 1) dragging a simple point'],[-1,'         * 2) dragging a virtual vertex'],[-1,'         * 3) dragging a drag handle'],[-1,'         * 4) dragging a real vertex'],[-1,'         * 5) dragging a radius handle'],[-1,'         *\/'],[0,'        if(this.feature.geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.Point\&quot;) {'],[-1,'            \/\/ dragging a simple point'],[0,'            this.layer.events.triggerEvent(\&quot;vertexmodified\&quot;, {'],[-1,'                vertex: vertex.geometry,'],[-1,'                feature: this.feature,'],[-1,'                pixel: pixel'],[-1,'            });'],[-1,'        } else {'],[0,'            if(vertex._index) {'],[-1,'                \/\/ dragging a virtual vertex'],[0,'                vertex.geometry.parent.addComponent(vertex.geometry,'],[-1,'                                                    vertex._index);'],[-1,'                \/\/ move from virtual to real vertex'],[0,'                delete vertex._index;'],[0,'                OpenLayers.Util.removeItem(this.virtualVertices, vertex);'],[0,'                this.vertices.push(vertex);'],[0,'            } else if(vertex == this.dragHandle) {'],[-1,'                \/\/ dragging a drag handle'],[0,'                this.layer.removeFeatures(this.vertices, {silent: true});'],[0,'                this.vertices = [];'],[0,'                if(this.radiusHandle) {'],[0,'                    this.layer.destroyFeatures([this.radiusHandle], {silent: true});'],[0,'                    this.radiusHandle = null;'],[-1,'                }'],[0,'            } else if(vertex !== this.radiusHandle) {'],[-1,'                \/\/ dragging a real vertex'],[0,'                this.layer.events.triggerEvent(\&quot;vertexmodified\&quot;, {'],[-1,'                    vertex: vertex.geometry,'],[-1,'                    feature: this.feature,'],[-1,'                    pixel: pixel'],[-1,'                });'],[-1,'            }'],[-1,'            \/\/ dragging a radius handle - no special treatment'],[0,'            if(this.virtualVertices.length &gt; 0) {'],[0,'                this.layer.destroyFeatures(this.virtualVertices, {silent: true});'],[0,'                this.virtualVertices = [];'],[-1,'            }'],[0,'            this.layer.drawFeature(this.feature, this.standalone ? undefined :'],[-1,'                                            \'select\');'],[-1,'        }'],[-1,'        \/\/ keep the vertex on top so it gets the mouseout after dragging'],[-1,'        \/\/ this should be removed in favor of an option to draw under or'],[-1,'        \/\/ maintain node z-index'],[0,'        this.layer.drawFeature(vertex);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: dragComplete'],[-1,'     * Called by the drag handler when the feature dragging is complete.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * vertex - {&lt;OpenLayers.Feature.Vector&gt;} The vertex being dragged.'],[-1,'     *\/'],[-1,'    dragComplete: function(vertex) {'],[0,'        this.resetVertices();'],[0,'        this.setFeatureState();'],[0,'        this.onModification(this.feature);'],[0,'        this.layer.events.triggerEvent(\&quot;featuremodified\&quot;, '],[-1,'                                       {feature: this.feature});'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setFeatureState'],[-1,'     * Called when the feature is modified.  If the current state is not'],[-1,'     *     INSERT or DELETE, the state is set to UPDATE.'],[-1,'     *\/'],[-1,'    setFeatureState: function() {'],[0,'        if(this.feature.state != OpenLayers.State.INSERT &amp;&amp;'],[-1,'           this.feature.state != OpenLayers.State.DELETE) {'],[0,'            this.feature.state = OpenLayers.State.UPDATE;'],[0,'            if (this.modified &amp;&amp; this._originalGeometry) {'],[0,'                var feature = this.feature;'],[0,'                feature.modified = OpenLayers.Util.extend(feature.modified, {'],[-1,'                    geometry: this._originalGeometry'],[-1,'                });'],[0,'                delete this._originalGeometry;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: resetVertices'],[-1,'     *\/'],[-1,'    resetVertices: function() {'],[0,'        if(this.vertices.length &gt; 0) {'],[0,'            this.layer.removeFeatures(this.vertices, {silent: true});'],[0,'            this.vertices = [];'],[-1,'        }'],[0,'        if(this.virtualVertices.length &gt; 0) {'],[0,'            this.layer.removeFeatures(this.virtualVertices, {silent: true});'],[0,'            this.virtualVertices = [];'],[-1,'        }'],[0,'        if(this.dragHandle) {'],[0,'            this.layer.destroyFeatures([this.dragHandle], {silent: true});'],[0,'            this.dragHandle = null;'],[-1,'        }'],[0,'        if(this.radiusHandle) {'],[0,'            this.layer.destroyFeatures([this.radiusHandle], {silent: true});'],[0,'            this.radiusHandle = null;'],[-1,'        }'],[0,'        if(this.feature &amp;&amp;'],[-1,'           this.feature.geometry.CLASS_NAME != \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'            if((this.mode &amp; OpenLayers.Control.ModifyFeature.DRAG)) {'],[0,'                this.collectDragHandle();'],[-1,'            }'],[0,'            if((this.mode &amp; (OpenLayers.Control.ModifyFeature.ROTATE |'],[-1,'                             OpenLayers.Control.ModifyFeature.RESIZE))) {'],[0,'                this.collectRadiusHandle();'],[-1,'            }'],[0,'            if(this.mode &amp; OpenLayers.Control.ModifyFeature.RESHAPE){'],[-1,'                \/\/ Don\'t collect vertices when we\'re resizing'],[0,'                if (!(this.mode &amp; OpenLayers.Control.ModifyFeature.RESIZE)){'],[0,'                    this.collectVertices();'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: handleKeypress'],[-1,'     * Called by the feature handler on keypress.  This is used to delete'],[-1,'     *     vertices. If the &lt;deleteCode&gt; property is set, vertices will'],[-1,'     *     be deleted when a feature is selected for modification and'],[-1,'     *     the mouse is over a vertex.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} Keypress event.'],[-1,'     *\/'],[-1,'    handleKeypress: function(evt) {'],[0,'        var code = evt.keyCode;'],[-1,'        '],[-1,'        \/\/ check for delete key'],[0,'        if(this.feature &amp;&amp;'],[-1,'           OpenLayers.Util.indexOf(this.deleteCodes, code) != -1) {'],[0,'            var vertex = this.layer.getFeatureFromEvent(this.handlers.drag.evt);'],[0,'            if (vertex &amp;&amp;'],[-1,'                    OpenLayers.Util.indexOf(this.vertices, vertex) != -1 &amp;&amp;'],[-1,'                    !this.handlers.drag.dragging &amp;&amp; vertex.geometry.parent) {'],[-1,'                \/\/ remove the vertex'],[0,'                vertex.geometry.parent.removeComponent(vertex.geometry);'],[0,'                this.layer.events.triggerEvent(\&quot;vertexremoved\&quot;, {'],[-1,'                    vertex: vertex.geometry,'],[-1,'                    feature: this.feature,'],[-1,'                    pixel: evt.xy'],[-1,'                });'],[0,'                this.layer.drawFeature(this.feature, this.standalone ?'],[-1,'                                       undefined : \'select\');'],[0,'                this.modified = true;'],[0,'                this.resetVertices();'],[0,'                this.setFeatureState();'],[0,'                this.onModification(this.feature);'],[0,'                this.layer.events.triggerEvent(\&quot;featuremodified\&quot;, '],[-1,'                                               {feature: this.feature});'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: collectVertices'],[-1,'     * Collect the vertices from the modifiable feature\'s geometry and push'],[-1,'     *     them on to the control\'s vertices array.'],[-1,'     *\/'],[-1,'    collectVertices: function() {'],[0,'        this.vertices = [];'],[0,'        this.virtualVertices = [];        '],[0,'        var control = this;'],[0,'        function collectComponentVertices(geometry) {'],[0,'            var i, vertex, component, len;'],[0,'            if(geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'                vertex = new OpenLayers.Feature.Vector(geometry);'],[0,'                vertex._sketch = true;'],[0,'                vertex.renderIntent = control.vertexRenderIntent;'],[0,'                control.vertices.push(vertex);'],[-1,'            } else {'],[0,'                var numVert = geometry.components.length;'],[0,'                if(geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.LinearRing\&quot;) {'],[0,'                    numVert -= 1;'],[-1,'                }'],[0,'                for(i=0; i&lt;numVert; ++i) {'],[0,'                    component = geometry.components[i];'],[0,'                    if(component.CLASS_NAME == \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'                        vertex = new OpenLayers.Feature.Vector(component);'],[0,'                        vertex._sketch = true;'],[0,'                        vertex.renderIntent = control.vertexRenderIntent;'],[0,'                        control.vertices.push(vertex);'],[-1,'                    } else {'],[0,'                        collectComponentVertices(component);'],[-1,'                    }'],[-1,'                }'],[-1,'                '],[-1,'                \/\/ add virtual vertices in the middle of each edge'],[0,'                if (control.createVertices &amp;&amp; geometry.CLASS_NAME != \&quot;OpenLayers.Geometry.MultiPoint\&quot;) {'],[0,'                    for(i=0, len=geometry.components.length; i&lt;len-1; ++i) {'],[0,'                        var prevVertex = geometry.components[i];'],[0,'                        var nextVertex = geometry.components[i + 1];'],[0,'                        if(prevVertex.CLASS_NAME == \&quot;OpenLayers.Geometry.Point\&quot; &amp;&amp;'],[-1,'                           nextVertex.CLASS_NAME == \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'                            var x = (prevVertex.x + nextVertex.x) \/ 2;'],[0,'                            var y = (prevVertex.y + nextVertex.y) \/ 2;'],[0,'                            var point = new OpenLayers.Feature.Vector('],[-1,'                                new OpenLayers.Geometry.Point(x, y),'],[-1,'                                null, control.virtualStyle'],[-1,'                            );'],[-1,'                            \/\/ set the virtual parent and intended index'],[0,'                            point.geometry.parent = geometry;'],[0,'                            point._index = i + 1;'],[0,'                            point._sketch = true;'],[0,'                            control.virtualVertices.push(point);'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        collectComponentVertices.call(this, this.feature.geometry);'],[0,'        this.layer.addFeatures(this.virtualVertices, {silent: true});'],[0,'        this.layer.addFeatures(this.vertices, {silent: true});'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: collectDragHandle'],[-1,'     * Collect the drag handle for the selected geometry.'],[-1,'     *\/'],[-1,'    collectDragHandle: function() {'],[0,'        var geometry = this.feature.geometry;'],[0,'        var center = geometry.getBounds().getCenterLonLat();'],[0,'        var originGeometry = new OpenLayers.Geometry.Point('],[-1,'            center.lon, center.lat'],[-1,'        );'],[0,'        var origin = new OpenLayers.Feature.Vector(originGeometry);'],[0,'        originGeometry.move = function(x, y) {'],[0,'            OpenLayers.Geometry.Point.prototype.move.call(this, x, y);'],[0,'            geometry.move(x, y);'],[-1,'        };'],[0,'        origin._sketch = true;'],[0,'        this.dragHandle = origin;'],[0,'        this.dragHandle.renderIntent = this.vertexRenderIntent;'],[0,'        this.layer.addFeatures([this.dragHandle], {silent: true});'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: collectRadiusHandle'],[-1,'     * Collect the radius handle for the selected geometry.'],[-1,'     *\/'],[-1,'    collectRadiusHandle: function() {'],[0,'        var geometry = this.feature.geometry;'],[0,'        var bounds = geometry.getBounds();'],[0,'        var center = bounds.getCenterLonLat();'],[0,'        var originGeometry = new OpenLayers.Geometry.Point('],[-1,'            center.lon, center.lat'],[-1,'        );'],[0,'        var radiusGeometry = new OpenLayers.Geometry.Point('],[-1,'            bounds.right, bounds.bottom'],[-1,'        );'],[0,'        var radius = new OpenLayers.Feature.Vector(radiusGeometry);'],[0,'        var resize = (this.mode &amp; OpenLayers.Control.ModifyFeature.RESIZE);'],[0,'        var reshape = (this.mode &amp; OpenLayers.Control.ModifyFeature.RESHAPE);'],[0,'        var rotate = (this.mode &amp; OpenLayers.Control.ModifyFeature.ROTATE);'],[-1,''],[0,'        radiusGeometry.move = function(x, y) {'],[0,'            OpenLayers.Geometry.Point.prototype.move.call(this, x, y);'],[0,'            var dx1 = this.x - originGeometry.x;'],[0,'            var dy1 = this.y - originGeometry.y;'],[0,'            var dx0 = dx1 - x;'],[0,'            var dy0 = dy1 - y;'],[0,'            if(rotate) {'],[0,'                var a0 = Math.atan2(dy0, dx0);'],[0,'                var a1 = Math.atan2(dy1, dx1);'],[0,'                var angle = a1 - a0;'],[0,'                angle *= 180 \/ Math.PI;'],[0,'                geometry.rotate(angle, originGeometry);'],[-1,'            }'],[0,'            if(resize) {'],[0,'                var scale, ratio;'],[-1,'                \/\/ \'resize\' together with \'reshape\' implies that the aspect '],[-1,'                \/\/ ratio of the geometry will not be preserved whilst resizing '],[0,'                if (reshape) {'],[0,'                    scale = dy1 \/ dy0;'],[0,'                    ratio = (dx1 \/ dx0) \/ scale;'],[-1,'                } else {'],[0,'                    var l0 = Math.sqrt((dx0 * dx0) + (dy0 * dy0));'],[0,'                    var l1 = Math.sqrt((dx1 * dx1) + (dy1 * dy1));'],[0,'                    scale = l1 \/ l0;'],[-1,'                }'],[0,'                geometry.resize(scale, originGeometry, ratio);'],[-1,'            }'],[-1,'        };'],[0,'        radius._sketch = true;'],[0,'        this.radiusHandle = radius;'],[0,'        this.radiusHandle.renderIntent = this.vertexRenderIntent;'],[0,'        this.layer.addFeatures([this.radiusHandle], {silent: true});'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     * Set the map property for the control and all handlers.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} The control\'s map.'],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        this.handlers.drag.setMap(map);'],[0,'        OpenLayers.Control.prototype.setMap.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.ModifyFeature\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Constant: RESHAPE'],[-1,' * {Integer} Constant used to make the control work in reshape mode'],[-1,' *\/'],[1,'OpenLayers.Control.ModifyFeature.RESHAPE = 1;'],[-1,'\/**'],[-1,' * Constant: RESIZE'],[-1,' * {Integer} Constant used to make the control work in resize mode'],[-1,' *\/'],[1,'OpenLayers.Control.ModifyFeature.RESIZE = 2;'],[-1,'\/**'],[-1,' * Constant: ROTATE'],[-1,' * {Integer} Constant used to make the control work in rotate mode'],[-1,' *\/'],[1,'OpenLayers.Control.ModifyFeature.ROTATE = 4;'],[-1,'\/**'],[-1,' * Constant: DRAG'],[-1,' * {Integer} Constant used to make the control work in drag mode'],[-1,' *\/'],[1,'OpenLayers.Control.ModifyFeature.DRAG = 8;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/XYZ.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' *\/'],[-1,''],[-1,'\/** '],[-1,' * Class: OpenLayers.Layer.XYZ'],[-1,' * The XYZ class is designed to make it easier for people who have tiles'],[-1,' * arranged by a standard XYZ grid. '],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.XYZ = OpenLayers.Class(OpenLayers.Layer.Grid, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * Default is true, as this is designed to be a base tile source. '],[-1,'     *\/'],[-1,'    isBaseLayer: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: sphericalMercator'],[-1,'     * Whether the tile extents should be set to the defaults for '],[-1,'     *    spherical mercator. Useful for things like OpenStreetMap.'],[-1,'     *    Default is false, except for the OSM subclass.'],[-1,'     *\/'],[-1,'    sphericalMercator: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: zoomOffset'],[-1,'     * {Number} If your cache has more zoom levels than you want to provide'],[-1,'     *     access to with this layer, supply a zoomOffset.  This zoom offset'],[-1,'     *     is added to the current map zoom level to determine the level'],[-1,'     *     for a requested tile.  For example, if you supply a zoomOffset'],[-1,'     *     of 3, when the map is at the zoom 0, tiles will be requested from'],[-1,'     *     level 3 of your cache.  Default is 0 (assumes cache level and map'],[-1,'     *     zoom are equivalent).  Using &lt;zoomOffset&gt; is an alternative to'],[-1,'     *     setting &lt;serverResolutions&gt; if you only want to expose a subset'],[-1,'     *     of the server resolutions.'],[-1,'     *\/'],[-1,'    zoomOffset: 0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: serverResolutions'],[-1,'     * {Array} A list of all resolutions available on the server.  Only set this'],[-1,'     *     property if the map resolutions differ from the server. This'],[-1,'     *     property serves two purposes. (a) &lt;serverResolutions&gt; can include'],[-1,'     *     resolutions that the server supports and that you don\'t want to'],[-1,'     *     provide with this layer; you can also look at &lt;zoomOffset&gt;, which is'],[-1,'     *     an alternative to &lt;serverResolutions&gt; for that specific purpose.'],[-1,'     *     (b) The map can work with resolutions that aren\'t supported by'],[-1,'     *     the server, i.e. that aren\'t in &lt;serverResolutions&gt;. When the'],[-1,'     *     map is displayed in such a resolution data for the closest'],[-1,'     *     server-supported resolution is loaded and the layer div is'],[-1,'     *     stretched as necessary.'],[-1,'     *\/'],[-1,'    serverResolutions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.XYZ'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String}'],[-1,'     * url - {String}'],[-1,'     * options - {Object} Hashtable of extra options to tag onto the layer'],[-1,'     *\/'],[-1,'    initialize: function(name, url, options) {'],[0,'        if (options &amp;&amp; options.sphericalMercator || this.sphericalMercator) {'],[0,'            options = OpenLayers.Util.extend({'],[-1,'                projection: \&quot;EPSG:900913\&quot;,'],[-1,'                numZoomLevels: 19'],[-1,'            }, options);'],[-1,'        }'],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply(this, ['],[-1,'            name || this.name, url || this.url, {}, options'],[-1,'        ]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Create a clone of this layer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object} Is this ever used?'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.XYZ&gt;} An exact clone of this OpenLayers.Layer.XYZ'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[-1,'        '],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.XYZ(this.name,'],[-1,'                                            this.url,'],[-1,'                                            this.getOptions());'],[-1,'        }'],[-1,''],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);'],[-1,''],[0,'        return obj;'],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string with the layer\'s url and parameters and also the'],[-1,'     *          passed-in bounds and appropriate tile size specified as'],[-1,'     *          parameters'],[-1,'     *\/'],[-1,'    getURL: function (bounds) {'],[0,'        var xyz = this.getXYZ(bounds);'],[0,'        var url = this.url;'],[0,'        if (OpenLayers.Util.isArray(url)) {'],[0,'            var s = \'\' + xyz.x + xyz.y + xyz.z;'],[0,'            url = this.selectUrl(s, url);'],[-1,'        }'],[-1,'        '],[0,'        return OpenLayers.String.format(url, xyz);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getXYZ'],[-1,'     * Calculates x, y and z for the given bounds.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} - an object with x, y and z properties.'],[-1,'     *\/'],[-1,'    getXYZ: function(bounds) {'],[0,'        var res = this.getServerResolution();'],[0,'        var x = Math.round((bounds.left - this.maxExtent.left) \/'],[-1,'            (res * this.tileSize.w));'],[0,'        var y = Math.round((this.maxExtent.top - bounds.top) \/'],[-1,'            (res * this.tileSize.h));'],[0,'        var z = this.getServerZoom();'],[-1,''],[0,'        if (this.wrapDateLine) {'],[0,'            var limit = Math.pow(2, z);'],[0,'            x = ((x % limit) + limit) % limit;'],[-1,'        }'],[-1,''],[0,'        return {\'x\': x, \'y\': y, \'z\': z};'],[-1,'    },'],[-1,'    '],[-1,'    \/* APIMethod: setMap'],[-1,'     * When the layer is added to a map, then we can fetch our origin '],[-1,'     *    (if we don\'t have one.) '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments);'],[0,'        if (!this.tileOrigin) { '],[0,'            this.tileOrigin = new OpenLayers.LonLat(this.maxExtent.left,'],[-1,'                                                this.maxExtent.bottom);'],[-1,'        }                                       '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.XYZ\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/Bing.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/XYZ.js'],[-1,' *\/'],[-1,''],[-1,'\/** '],[-1,' * Class: OpenLayers.Layer.Bing'],[-1,' * Bing layer using direct tile access as provided by Bing Maps REST Services.'],[-1,' * See http:\/\/msdn.microsoft.com\/en-us\/library\/ff701713.aspx for more'],[-1,' * information. Note: Terms of Service compliant use requires the map to be'],[-1,' * configured with an &lt;OpenLayers.Control.Attribution&gt; control and the'],[-1,' * attribution placed on or near the map.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.XYZ&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.Bing = OpenLayers.Class(OpenLayers.Layer.XYZ, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: key'],[-1,'     * {String} API key for Bing maps, get your own key '],[-1,'     *     at http:\/\/bingmapsportal.com\/ .'],[-1,'     *\/'],[-1,'    key: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: serverResolutions'],[-1,'     * {Array} the resolutions provided by the Bing servers.'],[-1,'     *\/'],[-1,'    serverResolutions: ['],[-1,'        156543.03390625, 78271.516953125, 39135.7584765625,'],[-1,'        19567.87923828125, 9783.939619140625, 4891.9698095703125,'],[-1,'        2445.9849047851562, 1222.9924523925781, 611.4962261962891,'],[-1,'        305.74811309814453, 152.87405654907226, 76.43702827453613,'],[-1,'        38.218514137268066, 19.109257068634033, 9.554628534317017,'],[-1,'        4.777314267158508, 2.388657133579254, 1.194328566789627,'],[-1,'        0.5971642833948135, 0.29858214169740677, 0.14929107084870338,'],[-1,'        0.07464553542435169'],[-1,'    ],'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: attributionTemplate'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    attributionTemplate: \'&lt;span class=\&quot;olBingAttribution ${type}\&quot;&gt;\' +'],[-1,'         \'&lt;div&gt;&lt;a target=\&quot;_blank\&quot; href=\&quot;http:\/\/www.bing.com\/maps\/\&quot;&gt;\' +'],[-1,'         \'&lt;img src=\&quot;${logo}\&quot; \/&gt;&lt;\/a&gt;&lt;\/div&gt;${copyrights}\' +'],[-1,'         \'&lt;a style=\&quot;white-space: nowrap\&quot; target=\&quot;_blank\&quot; \'+'],[-1,'         \'href=\&quot;http:\/\/www.microsoft.com\/maps\/product\/terms.html\&quot;&gt;\' +'],[-1,'         \'Terms of Use&lt;\/a&gt;&lt;\/span&gt;\','],[-1,''],[-1,'    \/**'],[-1,'     * Property: metadata'],[-1,'     * {Object} Metadata for this layer, as returned by the callback script'],[-1,'     *\/'],[-1,'    metadata: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: protocolRegex'],[-1,'     * {RegExp} Regular expression to match and replace http: in bing urls'],[-1,'     *\/'],[-1,'    protocolRegex: \/^http:\/i,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: type'],[-1,'     * {String} The layer identifier.  Any non-birdseye imageryType'],[-1,'     *     from http:\/\/msdn.microsoft.com\/en-us\/library\/ff701716.aspx can be'],[-1,'     *     used.  Default is \&quot;Road\&quot;.'],[-1,'     *\/'],[-1,'    type: \&quot;Road\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: culture'],[-1,'     * {String} The culture identifier.  See http:\/\/msdn.microsoft.com\/en-us\/library\/ff701709.aspx'],[-1,'     * for the definition and the possible values.  Default is \&quot;en-US\&quot;.'],[-1,'     *\/'],[-1,'    culture: \&quot;en-US\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: metadataParams'],[-1,'     * {Object} Optional url parameters for the Get Imagery Metadata request'],[-1,'     * as described here: http:\/\/msdn.microsoft.com\/en-us\/library\/ff701716.aspx'],[-1,'     *\/'],[-1,'    metadataParams: null,'],[-1,''],[-1,'    \/** APIProperty: tileOptions'],[-1,'     *  {Object} optional configuration options for &lt;OpenLayers.Tile&gt; instances'],[-1,'     *  created by this Layer. Default is'],[-1,'     *'],[-1,'     *  (code)'],[-1,'     *  {crossOriginKeyword: \'anonymous\'}'],[-1,'     *  (end)'],[-1,'     *\/'],[-1,'    tileOptions: null,'],[-1,''],[-1,'    \/** APIProperty: protocol'],[-1,'     *  {String} Protocol to use to fetch Imagery Metadata, tiles and bing logo'],[-1,'     *  Can be \'http:\' \'https:\' or \'\''],[-1,'     *'],[-1,'     *  Warning: tiles may not be available under both HTTP and HTTPS protocols.'],[-1,'     *  Microsoft approved use of both HTTP and HTTPS urls for tiles. However'],[-1,'     *  this is undocumented and the Imagery Metadata API always returns HTTP'],[-1,'     *  urls.'],[-1,'     *'],[-1,'     *  Default is \'\', unless when executed from a file:\/\/\/ uri, in which case'],[-1,'     *  it is \'http:\'.'],[-1,'     *\/'],[-1,'    protocol: ~window.location.href.indexOf(\'http\') ? \'\' : \'http:\','],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.Bing'],[-1,'     * Create a new Bing layer.'],[-1,'     *'],[-1,'     * Example:'],[-1,'     * (code)'],[-1,'     * var road = new OpenLayers.Layer.Bing({'],[-1,'     *     name: \&quot;My Bing Aerial Layer\&quot;,'],[-1,'     *     type: \&quot;Aerial\&quot;,'],[-1,'     *     key: \&quot;my-api-key-here\&quot;,'],[-1,'     * });'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Configuration properties for the layer.'],[-1,'     *'],[-1,'     * Required configuration properties:'],[-1,'     * key - {String} Bing Maps API key for your application. Get one at'],[-1,'     *     http:\/\/bingmapsportal.com\/.'],[-1,'     * type - {String} The layer identifier.  Any non-birdseye imageryType'],[-1,'     *     from http:\/\/msdn.microsoft.com\/en-us\/library\/ff701716.aspx can be'],[-1,'     *     used.'],[-1,'     *'],[-1,'     * Any other documented layer properties can be provided in the config object.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        options = OpenLayers.Util.applyDefaults({'],[-1,'            sphericalMercator: true'],[-1,'        }, options);'],[0,'        var name = options.name || \&quot;Bing \&quot; + (options.type || this.type);'],[-1,'        '],[0,'        var newArgs = [name, null, options];'],[0,'        OpenLayers.Layer.XYZ.prototype.initialize.apply(this, newArgs);'],[0,'        this.tileOptions = OpenLayers.Util.extend({'],[-1,'            crossOriginKeyword: \'anonymous\''],[-1,'        }, this.options.tileOptions);'],[0,'        this.loadMetadata(); '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: loadMetadata'],[-1,'     *\/'],[-1,'    loadMetadata: function() {'],[0,'        this._callbackId = \&quot;_callback_\&quot; + this.id.replace(\/\\.\/g, \&quot;_\&quot;);'],[-1,'        \/\/ link the processMetadata method to the global scope and bind it'],[-1,'        \/\/ to this instance'],[0,'        window[this._callbackId] = OpenLayers.Function.bind('],[-1,'            OpenLayers.Layer.Bing.processMetadata, this'],[-1,'        );'],[0,'        var params = OpenLayers.Util.applyDefaults({'],[-1,'            key: this.key,'],[-1,'            jsonp: this._callbackId,'],[-1,'            include: \&quot;ImageryProviders\&quot;'],[-1,'        }, this.metadataParams);'],[0,'        var url = this.protocol + \&quot;\/\/dev.virtualearth.net\/REST\/v1\/Imagery\/Metadata\/\&quot; +'],[-1,'            this.type + \&quot;?\&quot; + OpenLayers.Util.getParameterString(params);'],[0,'        var script = document.createElement(\&quot;script\&quot;);'],[0,'        script.type = \&quot;text\/javascript\&quot;;'],[0,'        script.src = url;'],[0,'        script.id = this._callbackId;'],[0,'        document.getElementsByTagName(\&quot;head\&quot;)[0].appendChild(script);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: initLayer'],[-1,'     *'],[-1,'     * Sets layer properties according to the metadata provided by the API'],[-1,'     *\/'],[-1,'    initLayer: function() {'],[0,'        var res = this.metadata.resourceSets[0].resources[0];'],[0,'        var url = res.imageUrl.replace(\&quot;{quadkey}\&quot;, \&quot;${quadkey}\&quot;);'],[0,'        url = url.replace(\&quot;{culture}\&quot;, this.culture);'],[0,'        url = url.replace(this.protocolRegex, this.protocol);'],[0,'        this.url = [];'],[0,'        for (var i=0; i&lt;res.imageUrlSubdomains.length; ++i) {'],[0,'            this.url.push(url.replace(\&quot;{subdomain}\&quot;, res.imageUrlSubdomains[i]));'],[-1,'        }'],[0,'        this.addOptions({'],[-1,'            maxResolution: Math.min('],[-1,'                this.serverResolutions[res.zoomMin],'],[-1,'                this.maxResolution || Number.POSITIVE_INFINITY'],[-1,'            ),'],[-1,'            numZoomLevels: Math.min('],[-1,'                res.zoomMax + 1 - res.zoomMin, this.numZoomLevels'],[-1,'            )'],[-1,'        }, true);'],[0,'        if (!this.isBaseLayer) {'],[0,'            this.redraw();'],[-1,'        }'],[0,'        this.updateAttribution();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     *'],[-1,'     * Paramters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    getURL: function(bounds) {'],[0,'        if (!this.url) {'],[0,'            return;'],[-1,'        }'],[0,'        var xyz = this.getXYZ(bounds), x = xyz.x, y = xyz.y, z = xyz.z;'],[0,'        var quadDigits = [];'],[0,'        for (var i = z; i &gt; 0; --i) {'],[0,'            var digit = \'0\';'],[0,'            var mask = 1 &lt;&lt; (i - 1);'],[0,'            if ((x &amp; mask) != 0) {'],[0,'                digit++;'],[-1,'            }'],[0,'            if ((y &amp; mask) != 0) {'],[0,'                digit++;'],[0,'                digit++;'],[-1,'            }'],[0,'            quadDigits.push(digit);'],[-1,'        }'],[0,'        var quadKey = quadDigits.join(\&quot;\&quot;);'],[0,'        var url = this.selectUrl(\'\' + x + y + z, this.url);'],[-1,''],[0,'        return OpenLayers.String.format(url, {\'quadkey\': quadKey});'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: updateAttribution'],[-1,'     * Updates the attribution according to the requirements outlined in'],[-1,'     * http:\/\/gis.638310.n2.nabble.com\/Bing-imagery-td5789168.html'],[-1,'     *\/'],[-1,'    updateAttribution: function() {'],[0,'        var metadata = this.metadata;'],[0,'        if (!metadata.resourceSets || !this.map || !this.map.center) {'],[0,'            return;'],[-1,'        }'],[0,'        var res = metadata.resourceSets[0].resources[0];'],[0,'        var extent = this.map.getExtent().transform('],[-1,'            this.map.getProjectionObject(),'],[-1,'            new OpenLayers.Projection(\&quot;EPSG:4326\&quot;)'],[-1,'        );'],[0,'        var providers = res.imageryProviders || [],'],[-1,'            zoom = OpenLayers.Util.indexOf(this.serverResolutions,'],[-1,'                                           this.getServerResolution()),'],[-1,'            copyrights = \&quot;\&quot;, provider, i, ii, j, jj, bbox, coverage;'],[0,'        for (i=0,ii=providers.length; i&lt;ii; ++i) {'],[0,'            provider = providers[i];'],[0,'            for (j=0,jj=provider.coverageAreas.length; j&lt;jj; ++j) {'],[0,'                coverage = provider.coverageAreas[j];'],[-1,'                \/\/ axis order provided is Y,X'],[0,'                bbox = OpenLayers.Bounds.fromArray(coverage.bbox, true);'],[0,'                if (extent.intersectsBounds(bbox) &amp;&amp;'],[-1,'                        zoom &lt;= coverage.zoomMax &amp;&amp; zoom &gt;= coverage.zoomMin) {'],[0,'                    copyrights += provider.attribution + \&quot; \&quot;;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        var logo = metadata.brandLogoUri.replace(this.protocolRegex, this.protocol);'],[0,'        this.attribution = OpenLayers.String.format(this.attributionTemplate, {'],[-1,'            type: this.type.toLowerCase(),'],[-1,'            logo: logo,'],[-1,'            copyrights: copyrights'],[-1,'        });'],[0,'        this.map &amp;&amp; this.map.events.triggerEvent(\&quot;changelayer\&quot;, {'],[-1,'            layer: this,'],[-1,'            property: \&quot;attribution\&quot;'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     *\/'],[-1,'    setMap: function() {'],[0,'        OpenLayers.Layer.XYZ.prototype.setMap.apply(this, arguments);'],[0,'        this.map.events.register(\&quot;moveend\&quot;, this, this.updateAttribution);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * obj - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.Bing&gt;} An exact clone of this &lt;OpenLayers.Layer.Bing&gt;'],[-1,'     *\/'],[-1,'    clone: function(obj) {'],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.Bing(this.options);'],[-1,'        }'],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.XYZ.prototype.clone.apply(this, [obj]);'],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[0,'        return obj;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.map &amp;&amp;'],[-1,'            this.map.events.unregister(\&quot;moveend\&quot;, this, this.updateAttribution);'],[0,'        OpenLayers.Layer.XYZ.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.Bing\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Function: OpenLayers.Layer.Bing.processMetadata'],[-1,' * This function will be bound to an instance, linked to the global scope with'],[-1,' * an id, and called by the JSONP script returned by the API.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * metadata - {Object} metadata as returned by the API'],[-1,' *\/'],[1,'OpenLayers.Layer.Bing.processMetadata = function(metadata) {'],[0,'    this.metadata = metadata;'],[0,'    this.initLayer();'],[0,'    var script = document.getElementById(this._callbackId);'],[0,'    script.parentNode.removeChild(script);'],[0,'    window[this._callbackId] = undefined; \/\/ cannot delete from window in IE'],[0,'    delete this._callbackId;'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/SOSGetFeatureOfInterest.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,' '],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/GML\/v3.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.SOSGetFeatureOfInterest'],[-1,' * Read and write SOS GetFeatureOfInterest. This is used to get to'],[-1,' * the location of the features (stations). The stations can have 1 or more'],[-1,' * sensors.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.SOSGetFeatureOfInterest = OpenLayers.Class('],[-1,'    OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: VERSION'],[-1,'     * {String} 1.0.0'],[-1,'     *\/'],[-1,'    VERSION: \&quot;1.0.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        sos: \&quot;http:\/\/www.opengis.net\/sos\/1.0\&quot;,'],[-1,'        gml: \&quot;http:\/\/www.opengis.net\/gml\&quot;,'],[-1,'        sa: \&quot;http:\/\/www.opengis.net\/sampling\/1.0\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/sos\/1.0 http:\/\/schemas.opengis.net\/sos\/1.0.0\/sosAll.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;sos\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.SOSGetFeatureOfInterest'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Parse a GetFeatureOfInterest response and return an array of features'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} An array of features. '],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[-1,''],[0,'        var info = {features: []};'],[0,'        this.readNode(data, info);'],[-1,'       '],[0,'        var features = [];'],[0,'        for (var i=0, len=info.features.length; i&lt;len; i++) {'],[0,'            var container = info.features[i];'],[-1,'            \/\/ reproject features if needed'],[0,'            if(this.internalProjection &amp;&amp; this.externalProjection &amp;&amp;'],[-1,'                container.components[0]) {'],[0,'                    container.components[0].transform('],[-1,'                        this.externalProjection, this.internalProjection'],[-1,'                    );'],[-1,'            }             '],[0,'            var feature = new OpenLayers.Feature.Vector('],[-1,'                container.components[0], container.attributes);'],[0,'            features.push(feature);'],[-1,'        }'],[0,'        return features;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;sa\&quot;: {'],[-1,'            \&quot;SamplingPoint\&quot;: function(node, obj) {'],[-1,'                \/\/ sampling point can also be without a featureMember if '],[-1,'                \/\/ there is only 1'],[0,'                if (!obj.attributes) {'],[0,'                    var feature = {attributes: {}};'],[0,'                    obj.features.push(feature);'],[0,'                    obj = feature;'],[-1,'                }'],[0,'                obj.attributes.id = this.getAttributeNS(node, '],[-1,'                    this.namespaces.gml, \&quot;id\&quot;);'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;position\&quot;: function (node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;gml\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;FeatureCollection\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;featureMember\&quot;: function(node, obj) {'],[0,'                var feature = {attributes: {}};'],[0,'                obj.features.push(feature);'],[0,'                this.readChildNodes(node, feature);'],[-1,'            },'],[-1,'            \&quot;name\&quot;: function(node, obj) {'],[0,'                obj.attributes.name = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;pos\&quot;: function(node, obj) {'],[-1,'                \/\/ we need to parse the srsName to get to the '],[-1,'                \/\/ externalProjection, that\'s why we cannot use'],[-1,'                \/\/ GML v3 for this'],[0,'                if (!this.externalProjection) {'],[0,'                    this.externalProjection = new OpenLayers.Projection('],[-1,'                        node.getAttribute(\&quot;srsName\&quot;));'],[-1,'                }'],[0,'             OpenLayers.Format.GML.v3.prototype.readers.gml.pos.apply('],[-1,'                    this, [node, obj]);'],[-1,'            }'],[-1,'        }, OpenLayers.Format.GML.v3.prototype.readers.gml)'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;sos\&quot;: {'],[-1,'            \&quot;GetFeatureOfInterest\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;GetFeatureOfInterest\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        version: this.VERSION,'],[-1,'                        service: \'SOS\','],[-1,'                        \&quot;xsi:schemaLocation\&quot;: this.schemaLocation'],[-1,'                    } '],[-1,'                }); '],[0,'                for (var i=0, len=options.fois.length; i&lt;len; i++) {'],[0,'                    this.writeNode(\&quot;FeatureOfInterestId\&quot;, {foi: options.fois[i]}, node);'],[-1,'                }'],[0,'                return node; '],[-1,'            },'],[-1,'            \&quot;FeatureOfInterestId\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;FeatureOfInterestId\&quot;, {value: options.foi});'],[0,'                return node;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.SOSGetFeatureOfInterest\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/SOSGetObservation.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/SOSGetFeatureOfInterest.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.SOSGetObservation'],[-1,' * Read and write SOS GetObersation (to get the actual values from a sensor) '],[-1,' *     version 1.0.0'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.SOSGetObservation = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\&quot;,'],[-1,'        gml: \&quot;http:\/\/www.opengis.net\/gml\&quot;,'],[-1,'        sos: \&quot;http:\/\/www.opengis.net\/sos\/1.0\&quot;,'],[-1,'        ogc: \&quot;http:\/\/www.opengis.net\/ogc\&quot;,'],[-1,'        om: \&quot;http:\/\/www.opengis.net\/om\/1.0\&quot;,'],[-1,'        sa: \&quot;http:\/\/www.opengis.net\/sampling\/1.0\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: VERSION'],[-1,'     * {String} 1.0.0'],[-1,'     *\/'],[-1,'    VERSION: \&quot;1.0.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/sos\/1.0 http:\/\/schemas.opengis.net\/sos\/1.0.0\/sosGetObservation.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;sos\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.SOSGetObservation'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object containing the measurements'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var info = {measurements: [], observations: []};'],[0,'        this.readNode(data, info);'],[0,'        return info;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} An SOS GetObservation request XML string.'],[-1,'     *\/'],[-1,'    write: function(options) {'],[0,'        var node = this.writeNode(\&quot;sos:GetObservation\&quot;, options);'],[0,'        node.setAttribute(\&quot;xmlns:om\&quot;, this.namespaces.om);'],[0,'        node.setAttribute(\&quot;xmlns:ogc\&quot;, this.namespaces.ogc);'],[0,'        this.setAttributeNS('],[-1,'            node, this.namespaces.xsi,'],[-1,'            \&quot;xsi:schemaLocation\&quot;, this.schemaLocation'],[-1,'        );'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [node]);'],[-1,'    }, '],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;om\&quot;: {'],[-1,'            \&quot;ObservationCollection\&quot;: function(node, obj) {'],[0,'                obj.id = this.getAttributeNS(node, this.namespaces.gml, \&quot;id\&quot;);'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;member\&quot;: function(node, observationCollection) {'],[0,'                this.readChildNodes(node, observationCollection);'],[-1,'            },'],[-1,'            \&quot;Measurement\&quot;: function(node, observationCollection) {'],[0,'                var measurement = {};'],[0,'                observationCollection.measurements.push(measurement);'],[0,'                this.readChildNodes(node, measurement);'],[-1,'            },'],[-1,'            \&quot;Observation\&quot;: function(node, observationCollection) {'],[0,'                var observation = {};'],[0,'                observationCollection.observations.push(observation);'],[0,'                this.readChildNodes(node, observation);'],[-1,'            },'],[-1,'            \&quot;samplingTime\&quot;: function(node, measurement) {'],[0,'                var samplingTime = {};'],[0,'                measurement.samplingTime = samplingTime;'],[0,'                this.readChildNodes(node, samplingTime);'],[-1,'            },'],[-1,'            \&quot;observedProperty\&quot;: function(node, measurement) {'],[0,'                measurement.observedProperty = '],[-1,'                    this.getAttributeNS(node, this.namespaces.xlink, \&quot;href\&quot;);'],[0,'                this.readChildNodes(node, measurement);'],[-1,'            },'],[-1,'            \&quot;procedure\&quot;: function(node, measurement) {'],[0,'                measurement.procedure = '],[-1,'                    this.getAttributeNS(node, this.namespaces.xlink, \&quot;href\&quot;);'],[0,'                this.readChildNodes(node, measurement);'],[-1,'            },'],[-1,'            \&quot;featureOfInterest\&quot;: function(node, observation) {'],[0,'                var foi = {features: []};'],[0,'                observation.fois = [];'],[0,'                observation.fois.push(foi);'],[0,'                this.readChildNodes(node, foi);'],[-1,'                \/\/ postprocessing to get actual features'],[0,'                var features = [];'],[0,'                for (var i=0, len=foi.features.length; i&lt;len; i++) {'],[0,'                    var feature = foi.features[i];'],[0,'                    features.push(new OpenLayers.Feature.Vector('],[-1,'                        feature.components[0], feature.attributes));'],[-1,'                }'],[0,'                foi.features = features;'],[-1,'            },'],[-1,'            \&quot;result\&quot;: function(node, measurement) {'],[0,'                var result = {};'],[0,'                measurement.result = result;'],[0,'                if (this.getChildValue(node) !== \'\') {'],[0,'                    result.value = this.getChildValue(node);'],[0,'                    result.uom = node.getAttribute(\&quot;uom\&quot;);'],[-1,'                } else {'],[0,'                    this.readChildNodes(node, result);'],[-1,'                }'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;sa\&quot;: OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.sa,'],[-1,'        \&quot;gml\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;TimeInstant\&quot;: function(node, samplingTime) {'],[0,'               var timeInstant = {};'],[0,'                samplingTime.timeInstant = timeInstant;'],[0,'                this.readChildNodes(node, timeInstant);'],[-1,'            },'],[-1,'            \&quot;timePosition\&quot;: function(node, timeInstant) {'],[0,'                timeInstant.timePosition = this.getChildValue(node);'],[-1,'            }'],[-1,'        }, OpenLayers.Format.SOSGetFeatureOfInterest.prototype.readers.gml)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;sos\&quot;: {'],[-1,'            \&quot;GetObservation\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;GetObservation\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        version: this.VERSION,'],[-1,'                        service: \'SOS\''],[-1,'                    } '],[-1,'                }); '],[0,'                this.writeNode(\&quot;offering\&quot;, options, node);'],[0,'                if (options.eventTime) {'],[0,'                    this.writeNode(\&quot;eventTime\&quot;, options, node);'],[-1,'                }'],[0,'                for (var procedure in options.procedures) {'],[0,'                    this.writeNode(\&quot;procedure\&quot;, options.procedures[procedure], node);'],[-1,'                }'],[0,'                for (var observedProperty in options.observedProperties) {'],[0,'                    this.writeNode(\&quot;observedProperty\&quot;, options.observedProperties[observedProperty], node);'],[-1,'                }'],[0,'                if (options.foi) {'],[0,'                    this.writeNode(\&quot;featureOfInterest\&quot;, options.foi, node);'],[-1,'                }'],[0,'                this.writeNode(\&quot;responseFormat\&quot;, options, node);'],[0,'                if (options.resultModel) {'],[0,'                    this.writeNode(\&quot;resultModel\&quot;, options, node);'],[-1,'                }'],[0,'                if (options.responseMode) {'],[0,'                    this.writeNode(\&quot;responseMode\&quot;, options, node);'],[-1,'                }'],[0,'                return node; '],[-1,'            },'],[-1,'            \&quot;featureOfInterest\&quot;: function(foi) {'],[0,'                var node = this.createElementNSPlus(\&quot;featureOfInterest\&quot;);'],[0,'                this.writeNode(\&quot;ObjectID\&quot;, foi.objectId, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;ObjectID\&quot;: function(options) {'],[0,'                return this.createElementNSPlus(\&quot;ObjectID\&quot;,'],[-1,'                    {value: options});'],[-1,'            },'],[-1,'            \&quot;responseFormat\&quot;: function(options) {'],[0,'                return this.createElementNSPlus(\&quot;responseFormat\&quot;, '],[-1,'                    {value: options.responseFormat});'],[-1,'            },'],[-1,'            \&quot;procedure\&quot;: function(procedure) {'],[0,'                return this.createElementNSPlus(\&quot;procedure\&quot;, '],[-1,'                    {value: procedure});'],[-1,'            },'],[-1,'            \&quot;offering\&quot;: function(options) {'],[0,'                return this.createElementNSPlus(\&quot;offering\&quot;, {value: '],[-1,'                    options.offering});'],[-1,'            },'],[-1,'            \&quot;observedProperty\&quot;: function(observedProperty) {'],[0,'                return this.createElementNSPlus(\&quot;observedProperty\&quot;, '],[-1,'                    {value: observedProperty});'],[-1,'            },'],[-1,'            \&quot;eventTime\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;eventTime\&quot;);'],[0,'                if (options.eventTime === \'latest\') {'],[0,'                    this.writeNode(\&quot;ogc:TM_Equals\&quot;, options, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;resultModel\&quot;: function(options) {'],[0,'                return this.createElementNSPlus(\&quot;resultModel\&quot;, {value: '],[-1,'                    options.resultModel});'],[-1,'            },'],[-1,'            \&quot;responseMode\&quot;: function(options) {'],[0,'                return this.createElementNSPlus(\&quot;responseMode\&quot;, {value: '],[-1,'                    options.responseMode});'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;ogc\&quot;: {'],[-1,'            \&quot;TM_Equals\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;ogc:TM_Equals\&quot;);'],[0,'                this.writeNode(\&quot;ogc:PropertyName\&quot;, {property: '],[-1,'                    \&quot;urn:ogc:data:time:iso8601\&quot;}, node);'],[0,'                if (options.eventTime === \'latest\') {'],[0,'                    this.writeNode(\&quot;gml:TimeInstant\&quot;, {value: \'latest\'}, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyName\&quot;: function(options) {'],[0,'                return this.createElementNSPlus(\&quot;ogc:PropertyName\&quot;, '],[-1,'                    {value: options.property});'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;gml\&quot;: {'],[-1,'            \&quot;TimeInstant\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:TimeInstant\&quot;);'],[0,'                this.writeNode(\&quot;gml:timePosition\&quot;, options, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;timePosition\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;gml:timePosition\&quot;, '],[-1,'                    {value: options.value});'],[0,'                return node;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.SOSGetObservation\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler\/MouseWheel.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Handler.MouseWheel'],[-1,' * Handler for wheel up\/down events.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Handler&gt;'],[-1,' *\/'],[1,'OpenLayers.Handler.MouseWheel = OpenLayers.Class(OpenLayers.Handler, {'],[-1,'    \/** '],[-1,'     * Property: wheelListener '],[-1,'     * {function} '],[-1,'     *\/'],[-1,'    wheelListener: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: interval'],[-1,'     * {Integer} In order to increase server performance, an interval (in '],[-1,'     *     milliseconds) can be set to reduce the number of up\/down events '],[-1,'     *     called. If set, a new up\/down event will not be set until the '],[-1,'     *     interval has passed. '],[-1,'     *     Defaults to 0, meaning no interval. '],[-1,'     *\/'],[-1,'    interval: 0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: maxDelta'],[-1,'     * {Integer} Maximum delta to collect before breaking from the current'],[-1,'     *    interval. In cumulative mode, this also limits the maximum delta'],[-1,'     *    returned from the handler. Default is Number.POSITIVE_INFINITY.'],[-1,'     *\/'],[-1,'    maxDelta: Number.POSITIVE_INFINITY,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: delta'],[-1,'     * {Integer} When interval is set, delta collects the mousewheel z-deltas'],[-1,'     *     of the events that occur within the interval.'],[-1,'     *      See also the cumulative option'],[-1,'     *\/'],[-1,'    delta: 0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: cumulative'],[-1,'     * {Boolean} When interval is set: true to collect all the mousewheel '],[-1,'     *     z-deltas, false to only record the delta direction (positive or'],[-1,'     *     negative)'],[-1,'     *\/'],[-1,'    cumulative: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler.MouseWheel'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} '],[-1,'     * callbacks - {Object} An object containing a single function to be'],[-1,'     *                          called when the drag operation is finished.'],[-1,'     *                          The callback should expect to recieve a single'],[-1,'     *                          argument, the point geometry.'],[-1,'     * options - {Object} '],[-1,'     *\/'],[-1,'    initialize: function(control, callbacks, options) {'],[0,'        OpenLayers.Handler.prototype.initialize.apply(this, arguments);'],[0,'        this.wheelListener = OpenLayers.Function.bindAsEventListener('],[-1,'            this.onWheelEvent, this'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     *\/    '],[-1,'    destroy: function() {'],[0,'        OpenLayers.Handler.prototype.destroy.apply(this, arguments);'],[0,'        this.wheelListener = null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     *  Mouse ScrollWheel code thanks to http:\/\/adomas.org\/javascript-mouse-wheel\/'],[-1,'     *\/'],[-1,''],[-1,'    \/** '],[-1,'     * Method: onWheelEvent'],[-1,'     * Catch the wheel event and handle it xbrowserly'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * e - {Event} '],[-1,'     *\/'],[-1,'    onWheelEvent: function(e){'],[-1,'        '],[-1,'        \/\/ make sure we have a map and check keyboard modifiers'],[0,'        if (!this.map || !this.checkModifiers(e)) {'],[0,'            return;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ Ride up the element\'s DOM hierarchy to determine if it or any of '],[-1,'        \/\/  its ancestors was: '],[-1,'        \/\/   * specifically marked as scrollable (CSS overflow property)'],[-1,'        \/\/   * one of our layer divs or a div marked as scrollable'],[-1,'        \/\/     (\'olScrollable\' CSS class)'],[-1,'        \/\/   * the map div'],[-1,'        \/\/'],[0,'        var overScrollableDiv = false;'],[0,'        var allowScroll = false;'],[0,'        var overMapDiv = false;'],[-1,'        '],[0,'        var elem = OpenLayers.Event.element(e);'],[0,'        while((elem != null) &amp;&amp; !overMapDiv &amp;&amp; !overScrollableDiv) {'],[-1,''],[0,'            if (!overScrollableDiv) {'],[0,'                try {'],[0,'                    var overflow;'],[0,'                    if (elem.currentStyle) {'],[0,'                        overflow = elem.currentStyle[\&quot;overflow\&quot;];'],[-1,'                    } else {'],[0,'                        var style = '],[-1,'                            document.defaultView.getComputedStyle(elem, null);'],[0,'                        overflow = style.getPropertyValue(\&quot;overflow\&quot;);'],[-1,'                    }'],[0,'                    overScrollableDiv = ( overflow &amp;&amp; '],[-1,'                        (overflow == \&quot;auto\&quot;) || (overflow == \&quot;scroll\&quot;) );'],[-1,'                } catch(err) {'],[-1,'                    \/\/sometimes when scrolling in a popup, this causes '],[-1,'                    \/\/ obscure browser error'],[-1,'                }'],[-1,'            }'],[-1,''],[0,'            if (!allowScroll) {'],[0,'                allowScroll = OpenLayers.Element.hasClass(elem, \'olScrollable\');'],[0,'                if (!allowScroll) {'],[0,'                    for (var i = 0, len = this.map.layers.length; i &lt; len; i++) {'],[-1,'                        \/\/ Are we in the layer div? Note that we have two cases'],[-1,'                        \/\/ here: one is to catch EventPane layers, which have a'],[-1,'                        \/\/ pane above the layer (layer.pane)'],[0,'                        var layer = this.map.layers[i];'],[0,'                        if (elem == layer.div || elem == layer.pane) {'],[0,'                            allowScroll = true;'],[0,'                            break;'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            overMapDiv = (elem == this.map.div);'],[-1,''],[0,'            elem = elem.parentNode;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ Logic below is the following:'],[-1,'        \/\/'],[-1,'        \/\/ If we are over a scrollable div or not over the map div:'],[-1,'        \/\/  * do nothing (let the browser handle scrolling)'],[-1,'        \/\/'],[-1,'        \/\/    otherwise '],[-1,'        \/\/ '],[-1,'        \/\/    If we are over the layer div or a \'olScrollable\' div:'],[-1,'        \/\/     * zoom\/in out'],[-1,'        \/\/     then'],[-1,'        \/\/     * kill event (so as not to also scroll the page after zooming)'],[-1,'        \/\/'],[-1,'        \/\/       otherwise'],[-1,'        \/\/'],[-1,'        \/\/       Kill the event (dont scroll the page if we wheel over the '],[-1,'        \/\/        layerswitcher or the pan\/zoom control)'],[-1,'        \/\/'],[0,'        if (!overScrollableDiv &amp;&amp; overMapDiv) {'],[0,'            if (allowScroll) {'],[0,'                var delta = 0;'],[-1,'                '],[0,'                if (e.wheelDelta) {'],[0,'                    delta = e.wheelDelta;'],[0,'                    if (delta % 160 === 0) {'],[-1,'                        \/\/ opera have steps of 160 instead of 120'],[0,'                        delta = delta * 0.75;'],[-1,'                    }'],[0,'                    delta = delta \/ 120;'],[0,'                } else if (e.detail) {'],[-1,'                    \/\/ detail in Firefox on OS X is 1\/3 of Windows'],[-1,'                    \/\/ so force delta 1 \/ -1'],[0,'                    delta = - (e.detail \/ Math.abs(e.detail));'],[-1,'                }'],[0,'                this.delta += delta;'],[-1,''],[0,'                window.clearTimeout(this._timeoutId);'],[0,'                if(this.interval &amp;&amp; Math.abs(this.delta) &lt; this.maxDelta) {'],[-1,'                    \/\/ store e because window.event might change during delay'],[0,'                    var evt = OpenLayers.Util.extend({}, e);'],[0,'                    this._timeoutId = window.setTimeout('],[-1,'                        OpenLayers.Function.bind(function(){'],[0,'                            this.wheelZoom(evt);'],[-1,'                        }, this),'],[-1,'                        this.interval'],[-1,'                    );'],[-1,'                } else {'],[0,'                    this.wheelZoom(e);'],[-1,'                }'],[-1,'            }'],[0,'            OpenLayers.Event.stop(e);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: wheelZoom'],[-1,'     * Given the wheel event, we carry out the appropriate zooming in or out,'],[-1,'     *     based on the \'wheelDelta\' or \'detail\' property of the event.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * e - {Event}'],[-1,'     *\/'],[-1,'    wheelZoom: function(e) {'],[0,'        var delta = this.delta;'],[0,'        this.delta = 0;'],[-1,'        '],[0,'        if (delta) {'],[0,'            e.xy = this.map.events.getMousePosition(e);'],[0,'            if (delta &lt; 0) {'],[0,'                this.callback(\&quot;down\&quot;,'],[-1,'                    [e, this.cumulative ? Math.max(-this.maxDelta, delta) : -1]);'],[-1,'            } else {'],[0,'                this.callback(\&quot;up\&quot;,'],[-1,'                    [e, this.cumulative ? Math.min(this.maxDelta, delta) : 1]);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: activate '],[-1,'     *\/'],[-1,'    activate: function (evt) {'],[0,'        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {'],[-1,'            \/\/register mousewheel events specifically on the window and document'],[0,'            var wheelListener = this.wheelListener;'],[0,'            OpenLayers.Event.observe(window, \&quot;DOMMouseScroll\&quot;, wheelListener);'],[0,'            OpenLayers.Event.observe(window, \&quot;mousewheel\&quot;, wheelListener);'],[0,'            OpenLayers.Event.observe(document, \&quot;mousewheel\&quot;, wheelListener);'],[0,'            return true;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: deactivate '],[-1,'     *\/'],[-1,'    deactivate: function (evt) {'],[0,'        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {'],[-1,'            \/\/ unregister mousewheel events specifically on the window and document'],[0,'            var wheelListener = this.wheelListener;'],[0,'            OpenLayers.Event.stopObserving(window, \&quot;DOMMouseScroll\&quot;, wheelListener);'],[0,'            OpenLayers.Event.stopObserving(window, \&quot;mousewheel\&quot;, wheelListener);'],[0,'            OpenLayers.Event.stopObserving(document, \&quot;mousewheel\&quot;, wheelListener);'],[0,'            return true;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler.MouseWheel\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WFST\/v1_0_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WFST\/v1.js'],[-1,' * @requires OpenLayers\/Format\/Filter\/v1_0_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WFST.v1_0_0'],[-1,' * A format for creating WFS v1.0.0 transactions.  Create a new instance with the'],[-1,' *     &lt;OpenLayers.Format.WFST.v1_0_0&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.Filter.v1_0_0&gt;'],[-1,' *  - &lt;OpenLayers.Format.WFST.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WFST.v1_0_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.Filter.v1_0_0, OpenLayers.Format.WFST.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} WFS version number.'],[-1,'     *\/'],[-1,'    version: \&quot;1.0.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: srsNameInQuery'],[-1,'     * {Boolean} If true the reference system is passed in Query requests'],[-1,'     *     via the \&quot;srsName\&quot; attribute to the \&quot;wfs:Query\&quot; element, this'],[-1,'     *     property defaults to false as it isn\'t WFS 1.0.0 compliant.'],[-1,'     *\/'],[-1,'    srsNameInQuery: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schemaLocations'],[-1,'     * {Object} Properties are namespace aliases, values are schema locations.'],[-1,'     *\/'],[-1,'    schemaLocations: {'],[-1,'        \&quot;wfs\&quot;: \&quot;http:\/\/schemas.opengis.net\/wfs\/1.0.0\/WFS-transaction.xsd\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WFST.v1_0_0'],[-1,'     * A class for parsing and generating WFS v1.0.0 transactions.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *'],[-1,'     * Valid options properties:'],[-1,'     * featureType - {String} Local (without prefix) feature typeName (required).'],[-1,'     * featureNS - {String} Feature namespace (optional).'],[-1,'     * featurePrefix - {String} Feature namespace alias (optional - only used'],[-1,'     *     if featureNS is provided).  Default is \'feature\'.'],[-1,'     * geometryName - {String} Name of geometry attribute.  Default is \'the_geom\'.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.Filter.v1_0_0.prototype.initialize.apply(this, [options]);'],[0,'        OpenLayers.Format.WFST.v1.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: readNode'],[-1,'     * Shorthand for applying one of the named readers given the node'],[-1,'     *     namespace and local name.  Readers take two args (node, obj) and'],[-1,'     *     generally extend or modify the second.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The node to be read (required).'],[-1,'     * obj - {Object} The object to be modified (optional).'],[-1,'     * first - {Boolean} Should be set to true for the first node read. This'],[-1,'     *     is usually the readNode call in the read method. Without this being'],[-1,'     *     set, auto-configured properties will stick on subsequent reads.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} The input object, modified (or a new one if none was provided).'],[-1,'     *\/'],[-1,'    readNode: function(node, obj, first) {'],[-1,'        \/\/ Not the superclass, only the mixin classes inherit from'],[-1,'        \/\/ Format.GML.v2. We need this because we don\'t want to get readNode'],[-1,'        \/\/ from the superclass\'s superclass, which is OpenLayers.Format.XML.'],[0,'        return OpenLayers.Format.GML.v2.prototype.readNode.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wfs\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;WFS_TransactionResponse\&quot;: function(node, obj) {'],[0,'                obj.insertIds = [];'],[0,'                obj.success = false;'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;InsertResult\&quot;: function(node, container) {'],[0,'                var obj = {fids: []};'],[0,'                this.readChildNodes(node, obj);'],[0,'                container.insertIds = container.insertIds.concat(obj.fids);'],[-1,'            },'],[-1,'            \&quot;TransactionResult\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Status\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;SUCCESS\&quot;: function(node, obj) {'],[0,'                obj.success = true;'],[-1,'            }'],[-1,'        }, OpenLayers.Format.WFST.v1.prototype.readers[\&quot;wfs\&quot;]),'],[-1,'        \&quot;gml\&quot;: OpenLayers.Format.GML.v2.prototype.readers[\&quot;gml\&quot;],'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.v2.prototype.readers[\&quot;feature\&quot;],'],[-1,'        \&quot;ogc\&quot;: OpenLayers.Format.Filter.v1_0_0.prototype.readers[\&quot;ogc\&quot;]'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;wfs\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;Query\&quot;: function(options) {'],[0,'                options = OpenLayers.Util.extend({'],[-1,'                    featureNS: this.featureNS,'],[-1,'                    featurePrefix: this.featurePrefix,'],[-1,'                    featureType: this.featureType,'],[-1,'                    srsName: this.srsName,'],[-1,'                    srsNameInQuery: this.srsNameInQuery'],[-1,'                }, options);'],[0,'                var prefix = options.featurePrefix;'],[0,'                var node = this.createElementNSPlus(\&quot;wfs:Query\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        typeName: (prefix ? prefix + \&quot;:\&quot; : \&quot;\&quot;) +'],[-1,'                            options.featureType'],[-1,'                    }'],[-1,'                });'],[0,'                if(options.srsNameInQuery &amp;&amp; options.srsName) {'],[0,'                    node.setAttribute(\&quot;srsName\&quot;, options.srsName);'],[-1,'                }'],[0,'                if(options.featureNS) {'],[0,'                    node.setAttribute(\&quot;xmlns:\&quot; + prefix, options.featureNS);'],[-1,'                }'],[0,'                if(options.propertyNames) {'],[0,'                    for(var i=0,len = options.propertyNames.length; i&lt;len; i++) {'],[0,'                        this.writeNode('],[-1,'                            \&quot;ogc:PropertyName\&quot;, '],[-1,'                            {property: options.propertyNames[i]},'],[-1,'                            node'],[-1,'                        );'],[-1,'                    }'],[-1,'                }'],[0,'                if(options.filter) {'],[0,'                    this.setFilterProperty(options.filter);'],[0,'                    this.writeNode(\&quot;ogc:Filter\&quot;, options.filter, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            }'],[-1,'        }, OpenLayers.Format.WFST.v1.prototype.writers[\&quot;wfs\&quot;]),'],[-1,'        \&quot;gml\&quot;: OpenLayers.Format.GML.v2.prototype.writers[\&quot;gml\&quot;],'],[-1,'        \&quot;feature\&quot;: OpenLayers.Format.GML.v2.prototype.writers[\&quot;feature\&quot;],'],[-1,'        \&quot;ogc\&quot;: OpenLayers.Format.Filter.v1_0_0.prototype.writers[\&quot;ogc\&quot;]'],[-1,'    },'],[-1,'   '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WFST.v1_0_0\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Renderer\/Elements.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Renderer.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.ElementsIndexer'],[-1,' * This class takes care of figuring out which order elements should be'],[-1,' *     placed in the DOM based on given indexing methods. '],[-1,' *\/'],[1,'OpenLayers.ElementsIndexer = OpenLayers.Class({'],[-1,'   '],[-1,'    \/**'],[-1,'     * Property: maxZIndex'],[-1,'     * {Integer} This is the largest-most z-index value for a node'],[-1,'     *     contained within the indexer.'],[-1,'     *\/'],[-1,'    maxZIndex: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: order'],[-1,'     * {Array&lt;String&gt;} This is an array of node id\'s stored in the'],[-1,'     *     order that they should show up on screen. Id\'s higher up in the'],[-1,'     *     array (higher array index) represent nodes with higher z-indeces.'],[-1,'     *\/'],[-1,'    order: null, '],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: indices'],[-1,'     * {Object} This is a hash that maps node ids to their z-index value'],[-1,'     *     stored in the indexer. This is done to make finding a nodes z-index '],[-1,'     *     value O(1).'],[-1,'     *\/'],[-1,'    indices: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: compare'],[-1,'     * {Function} This is the function used to determine placement of'],[-1,'     *     of a new node within the indexer. If null, this defaults to to'],[-1,'     *     the Z_ORDER_DRAWING_ORDER comparison method.'],[-1,'     *\/'],[-1,'    compare: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: initialize'],[-1,'     * Create a new indexer with '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * yOrdering - {Boolean} Whether to use y-ordering.'],[-1,'     *\/'],[-1,'    initialize: function(yOrdering) {'],[-1,''],[0,'        this.compare = yOrdering ? '],[-1,'            OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_Y_ORDER :'],[-1,'            OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER_DRAWING_ORDER;'],[-1,''],[0,'        this.clear();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: insert'],[-1,'     * Insert a new node into the indexer. In order to find the correct '],[-1,'     *     positioning for the node to be inserted, this method uses a binary '],[-1,'     *     search. This makes inserting O(log(n)). '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * newNode - {DOMElement} The new node to be inserted.'],[-1,'     * '],[-1,'     * Returns'],[-1,'     * {DOMElement} the node before which we should insert our newNode, or'],[-1,'     *     null if newNode can just be appended.'],[-1,'     *\/'],[-1,'    insert: function(newNode) {'],[-1,'        \/\/ If the node is known to the indexer, remove it so we can'],[-1,'        \/\/ recalculate where it should go.'],[0,'        if (this.exists(newNode)) {'],[0,'            this.remove(newNode);'],[-1,'        }'],[-1,'        '],[0,'        var nodeId = newNode.id;'],[-1,'        '],[0,'        this.determineZIndex(newNode);       '],[-1,''],[0,'        var leftIndex = -1;'],[0,'        var rightIndex = this.order.length;'],[0,'        var middle;'],[-1,''],[0,'        while (rightIndex - leftIndex &gt; 1) {'],[0,'            middle = parseInt((leftIndex + rightIndex) \/ 2);'],[-1,'            '],[0,'            var placement = this.compare(this, newNode,'],[-1,'                OpenLayers.Util.getElement(this.order[middle]));'],[-1,'            '],[0,'            if (placement &gt; 0) {'],[0,'                leftIndex = middle;'],[-1,'            } else {'],[0,'                rightIndex = middle;'],[-1,'            } '],[-1,'        }'],[-1,'        '],[0,'        this.order.splice(rightIndex, 0, nodeId);'],[0,'        this.indices[nodeId] = this.getZIndex(newNode);'],[-1,'        '],[-1,'        \/\/ If the new node should be before another in the index'],[-1,'        \/\/ order, return the node before which we have to insert the new one;'],[-1,'        \/\/ else, return null to indicate that the new node can be appended.'],[0,'        return this.getNextElement(rightIndex);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: remove'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The node to be removed.'],[-1,'     *\/'],[-1,'    remove: function(node) {'],[0,'        var nodeId = node.id;'],[0,'        var arrayIndex = OpenLayers.Util.indexOf(this.order, nodeId);'],[0,'        if (arrayIndex &gt;= 0) {'],[-1,'            \/\/ Remove it from the order array, as well as deleting the node'],[-1,'            \/\/ from the indeces hash.'],[0,'            this.order.splice(arrayIndex, 1);'],[0,'            delete this.indices[nodeId];'],[-1,'            '],[-1,'            \/\/ Reset the maxium z-index based on the last item in the '],[-1,'            \/\/ order array.'],[0,'            if (this.order.length &gt; 0) {'],[0,'                var lastId = this.order[this.order.length - 1];'],[0,'                this.maxZIndex = this.indices[lastId];'],[-1,'            } else {'],[0,'                this.maxZIndex = 0;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clear'],[-1,'     *\/'],[-1,'    clear: function() {'],[0,'        this.order = [];'],[0,'        this.indices = {};'],[0,'        this.maxZIndex = 0;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: exists'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The node to test for existence.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the node exists in the indexer?'],[-1,'     *\/'],[-1,'    exists: function(node) {'],[0,'        return (this.indices[node.id] != null);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getZIndex'],[-1,'     * Get the z-index value for the current node from the node data itself.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} The node whose z-index to get.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer} The z-index value for the specified node (from the node '],[-1,'     *     data itself).'],[-1,'     *\/'],[-1,'    getZIndex: function(node) {'],[0,'        return node._style.graphicZIndex;  '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: determineZIndex'],[-1,'     * Determine the z-index for the current node if there isn\'t one, '],[-1,'     *     and set the maximum value if we\'ve found a new maximum.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} '],[-1,'     *\/'],[-1,'    determineZIndex: function(node) {'],[0,'        var zIndex = node._style.graphicZIndex;'],[-1,'        '],[-1,'        \/\/ Everything must have a zIndex. If none is specified,'],[-1,'        \/\/ this means the user *must* (hint: assumption) want this'],[-1,'        \/\/ node to succomb to drawing order. To enforce drawing order'],[-1,'        \/\/ over all indexing methods, we\'ll create a new z-index that\'s'],[-1,'        \/\/ greater than any currently in the indexer.'],[0,'        if (zIndex == null) {'],[0,'            zIndex = this.maxZIndex;'],[0,'            node._style.graphicZIndex = zIndex; '],[0,'        } else if (zIndex &gt; this.maxZIndex) {'],[0,'            this.maxZIndex = zIndex;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getNextElement'],[-1,'     * Get the next element in the order stack.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * index - {Integer} The index of the current node in this.order.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} the node following the index passed in, or'],[-1,'     *     null.'],[-1,'     *\/'],[-1,'    getNextElement: function(index) {'],[0,'        var nextIndex = index + 1;'],[0,'        if (nextIndex &lt; this.order.length) {'],[0,'            var nextElement = OpenLayers.Util.getElement(this.order[nextIndex]);'],[0,'            if (nextElement == undefined) {'],[0,'                nextElement = this.getNextElement(nextIndex);'],[-1,'            }'],[0,'            return nextElement;'],[-1,'        } else {'],[0,'            return null;'],[-1,'        } '],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.ElementsIndexer\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Namespace: OpenLayers.ElementsIndexer.IndexingMethods'],[-1,' * These are the compare methods for figuring out where a new node should be '],[-1,' *     placed within the indexer. These methods are very similar to general '],[-1,' *     sorting methods in that they return -1, 0, and 1 to specify the '],[-1,' *     direction in which new nodes fall in the ordering.'],[-1,' *\/'],[1,'OpenLayers.ElementsIndexer.IndexingMethods = {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: Z_ORDER'],[-1,'     * This compare method is used by other comparison methods.'],[-1,'     *     It can be used individually for ordering, but is not recommended,'],[-1,'     *     because it doesn\'t subscribe to drawing order.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * indexer - {&lt;OpenLayers.ElementsIndexer&gt;}'],[-1,'     * newNode - {DOMElement}'],[-1,'     * nextNode - {DOMElement}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer}'],[-1,'     *\/'],[-1,'    Z_ORDER: function(indexer, newNode, nextNode) {'],[0,'        var newZIndex = indexer.getZIndex(newNode);'],[-1,''],[0,'        var returnVal = 0;'],[0,'        if (nextNode) {'],[0,'            var nextZIndex = indexer.getZIndex(nextNode);'],[0,'            returnVal = newZIndex - nextZIndex; '],[-1,'        }'],[-1,'        '],[0,'        return returnVal;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: Z_ORDER_DRAWING_ORDER'],[-1,'     * This method orders nodes by their z-index, but does so in a way'],[-1,'     *     that, if there are other nodes with the same z-index, the newest '],[-1,'     *     drawn will be the front most within that z-index. This is the '],[-1,'     *     default indexing method.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * indexer - {&lt;OpenLayers.ElementsIndexer&gt;}'],[-1,'     * newNode - {DOMElement}'],[-1,'     * nextNode - {DOMElement}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer}'],[-1,'     *\/'],[-1,'    Z_ORDER_DRAWING_ORDER: function(indexer, newNode, nextNode) {'],[0,'        var returnVal = OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER('],[-1,'            indexer, '],[-1,'            newNode, '],[-1,'            nextNode'],[-1,'        );'],[-1,'        '],[-1,'        \/\/ Make Z_ORDER subscribe to drawing order by pushing it above'],[-1,'        \/\/ all of the other nodes with the same z-index.'],[0,'        if (nextNode &amp;&amp; returnVal == 0) {'],[0,'            returnVal = 1;'],[-1,'        }'],[-1,'        '],[0,'        return returnVal;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: Z_ORDER_Y_ORDER'],[-1,'     * This one should really be called Z_ORDER_Y_ORDER_DRAWING_ORDER, as it'],[-1,'     *     best describes which ordering methods have precedence (though, the '],[-1,'     *     name would be too long). This method orders nodes by their z-index, '],[-1,'     *     but does so in a way that, if there are other nodes with the same '],[-1,'     *     z-index, the nodes with the lower y position will be \&quot;closer\&quot; than '],[-1,'     *     those with a higher y position. If two nodes have the exact same y '],[-1,'     *     position, however, then this method will revert to using drawing  '],[-1,'     *     order to decide placement.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * indexer - {&lt;OpenLayers.ElementsIndexer&gt;}'],[-1,'     * newNode - {DOMElement}'],[-1,'     * nextNode - {DOMElement}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Integer}'],[-1,'     *\/'],[-1,'    Z_ORDER_Y_ORDER: function(indexer, newNode, nextNode) {'],[0,'        var returnVal = OpenLayers.ElementsIndexer.IndexingMethods.Z_ORDER('],[-1,'            indexer, '],[-1,'            newNode, '],[-1,'            nextNode'],[-1,'        );'],[-1,'        '],[0,'        if (nextNode &amp;&amp; returnVal === 0) {            '],[0,'            var result = nextNode._boundsBottom - newNode._boundsBottom;'],[0,'            returnVal = (result === 0) ? 1 : result;'],[-1,'        }'],[-1,'        '],[0,'        return returnVal;       '],[-1,'    }'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Renderer.Elements'],[-1,' * This is another virtual class in that it should never be instantiated by '],[-1,' *  itself as a Renderer. It exists because there is *tons* of shared '],[-1,' *  functionality between different vector libraries which use nodes\/elements'],[-1,' *  as a base for rendering vectors. '],[-1,' * '],[-1,' * The highlevel bits of code that are implemented here are the adding and '],[-1,' *  removing of geometries, which is essentially the same for any '],[-1,' *  element-based renderer. The details of creating each node and drawing the'],[-1,' *  paths are of course different, but the machinery is the same. '],[-1,' * '],[-1,' * Inherits:'],[-1,' *  - &lt;OpenLayers.Renderer&gt;'],[-1,' *\/'],[1,'OpenLayers.Renderer.Elements = OpenLayers.Class(OpenLayers.Renderer, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: rendererRoot'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    rendererRoot: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: root'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    root: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: vectorRoot'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    vectorRoot: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: textRoot'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    textRoot: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: xmlns'],[-1,'     * {String}'],[-1,'     *\/    '],[-1,'    xmlns: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: xOffset'],[-1,'     * {Number} Offset to apply to the renderer viewport translation in x'],[-1,'     * direction. If the renderer extent\'s center is on the right of the'],[-1,'     * dateline (i.e. exceeds the world bounds), we shift the viewport to the'],[-1,'     * left by one world width. This avoids that features disappear from the'],[-1,'     * map viewport. Because our dateline handling logic in other places'],[-1,'     * ensures that extents crossing the dateline always have a center'],[-1,'     * exceeding the world bounds on the left, we need this offset to make sure'],[-1,'     * that the same is true for the renderer extent in pixel space as well.'],[-1,'     *\/'],[-1,'    xOffset: 0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: rightOfDateLine'],[-1,'     * {Boolean} Keeps track of the location of the map extent relative to the'],[-1,'     * date line. The &lt;setExtent&gt; method compares this value (which is the one'],[-1,'     * from the previous &lt;setExtent&gt; call) with the current position of the map'],[-1,'     * extent relative to the date line and updates the xOffset when the extent'],[-1,'     * has moved from one side of the date line to the other.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: Indexer'],[-1,'     * {&lt;OpenLayers.ElementIndexer&gt;} An instance of OpenLayers.ElementsIndexer '],[-1,'     *     created upon initialization if the zIndexing or yOrdering options'],[-1,'     *     passed to this renderer\'s constructor are set to true.'],[-1,'     *\/'],[-1,'    indexer: null, '],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: BACKGROUND_ID_SUFFIX'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    BACKGROUND_ID_SUFFIX: \&quot;_background\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: LABEL_ID_SUFFIX'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    LABEL_ID_SUFFIX: \&quot;_label\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: LABEL_OUTLINE_SUFFIX'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    LABEL_OUTLINE_SUFFIX: \&quot;_outline\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Renderer.Elements'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * containerID - {String}'],[-1,'     * options - {Object} options for this renderer. '],[-1,'     *'],[-1,'     * Supported options are:'],[-1,'     *     yOrdering - {Boolean} Whether to use y-ordering'],[-1,'     *     zIndexing - {Boolean} Whether to use z-indexing. Will be ignored'],[-1,'     *         if yOrdering is set to true.'],[-1,'     *\/'],[-1,'    initialize: function(containerID, options) {'],[0,'        OpenLayers.Renderer.prototype.initialize.apply(this, arguments);'],[-1,''],[0,'        this.rendererRoot = this.createRenderRoot();'],[0,'        this.root = this.createRoot(\&quot;_root\&quot;);'],[0,'        this.vectorRoot = this.createRoot(\&quot;_vroot\&quot;);'],[0,'        this.textRoot = this.createRoot(\&quot;_troot\&quot;);'],[-1,'        '],[0,'        this.root.appendChild(this.vectorRoot);'],[0,'        this.root.appendChild(this.textRoot);'],[-1,'        '],[0,'        this.rendererRoot.appendChild(this.root);'],[0,'        this.container.appendChild(this.rendererRoot);'],[-1,'        '],[0,'        if(options &amp;&amp; (options.zIndexing || options.yOrdering)) {'],[0,'            this.indexer = new OpenLayers.ElementsIndexer(options.yOrdering);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,''],[0,'        this.clear(); '],[-1,''],[0,'        this.rendererRoot = null;'],[0,'        this.root = null;'],[0,'        this.xmlns = null;'],[-1,''],[0,'        OpenLayers.Renderer.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: clear'],[-1,'     * Remove all the elements from the root'],[-1,'     *\/    '],[-1,'    clear: function() {'],[0,'        var child;'],[0,'        var root = this.vectorRoot;'],[0,'        if (root) {'],[0,'            while (child = root.firstChild) {'],[0,'                root.removeChild(child);'],[-1,'            }'],[-1,'        }'],[0,'        root = this.textRoot;'],[0,'        if (root) {'],[0,'            while (child = root.firstChild) {'],[0,'                root.removeChild(child);'],[-1,'            }'],[-1,'        }'],[0,'        if (this.indexer) {'],[0,'            this.indexer.clear();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setExtent'],[-1,'     * Set the visible part of the layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * extent - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * resolutionChanged - {Boolean}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} true to notify the layer that the new extent does not exceed'],[-1,'     *     the coordinate range, and the features will not need to be redrawn.'],[-1,'     *     False otherwise.'],[-1,'     *\/'],[-1,'    setExtent: function(extent, resolutionChanged) {'],[0,'        var coordSysUnchanged = OpenLayers.Renderer.prototype.setExtent.apply(this, arguments);'],[0,'        var resolution = this.getResolution();'],[0,'        if (this.map.baseLayer &amp;&amp; this.map.baseLayer.wrapDateLine) {'],[0,'            var rightOfDateLine,'],[-1,'                ratio = extent.getWidth() \/ this.map.getExtent().getWidth(),'],[-1,'                extent = extent.scale(1 \/ ratio),'],[-1,'                world = this.map.getMaxExtent();'],[0,'            if (world.right &gt; extent.left &amp;&amp; world.right &lt; extent.right) {'],[0,'                rightOfDateLine = true;'],[0,'            } else if (world.left &gt; extent.left &amp;&amp; world.left &lt; extent.right) {'],[0,'                rightOfDateLine = false;'],[-1,'            }'],[0,'            if (rightOfDateLine !== this.rightOfDateLine || resolutionChanged) {'],[0,'                coordSysUnchanged = false;'],[0,'                this.xOffset = rightOfDateLine === true ?'],[-1,'                    world.getWidth() \/ resolution : 0;'],[-1,'            }'],[0,'            this.rightOfDateLine = rightOfDateLine;'],[-1,'        }'],[0,'        return coordSysUnchanged;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: getNodeType'],[-1,'     * This function is in charge of asking the specific renderer which type'],[-1,'     *     of node to create for the given geometry and style. All geometries'],[-1,'     *     in an Elements-based renderer consist of one node and some'],[-1,'     *     attributes. We have the nodeFactory() function which creates a node'],[-1,'     *     for us, but it takes a \'type\' as input, and that is precisely what'],[-1,'     *     this function tells us.  '],[-1,'     *  '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} The corresponding node type for the specified geometry'],[-1,'     *\/'],[-1,'    getNodeType: function(geometry, style) { },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: drawGeometry '],[-1,'     * Draw the geometry, creating new nodes, setting paths, setting style,'],[-1,'     *     setting featureId on the node.  This method should only be called'],[-1,'     *     by the renderer itself.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style - {Object}'],[-1,'     * featureId - {String}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} true if the geometry has been drawn completely; null if'],[-1,'     *     incomplete; false otherwise'],[-1,'     *\/'],[-1,'    drawGeometry: function(geometry, style, featureId) {'],[0,'        var className = geometry.CLASS_NAME;'],[0,'        var rendered = true;'],[0,'        if ((className == \&quot;OpenLayers.Geometry.Collection\&quot;) ||'],[-1,'            (className == \&quot;OpenLayers.Geometry.MultiPoint\&quot;) ||'],[-1,'            (className == \&quot;OpenLayers.Geometry.MultiLineString\&quot;) ||'],[-1,'            (className == \&quot;OpenLayers.Geometry.MultiPolygon\&quot;)) {'],[0,'            for (var i = 0, len=geometry.components.length; i&lt;len; i++) {'],[0,'                rendered = this.drawGeometry('],[-1,'                    geometry.components[i], style, featureId) &amp;&amp; rendered;'],[-1,'            }'],[0,'            return rendered;'],[-1,'        }'],[-1,''],[0,'        rendered = false;'],[0,'        var removeBackground = false;'],[0,'        if (style.display != \&quot;none\&quot;) {'],[0,'            if (style.backgroundGraphic) {'],[0,'                this.redrawBackgroundNode(geometry.id, geometry, style,'],[-1,'                    featureId);'],[-1,'            } else {'],[0,'                removeBackground = true;'],[-1,'            }'],[0,'            rendered = this.redrawNode(geometry.id, geometry, style,'],[-1,'                featureId);'],[-1,'        }'],[0,'        if (rendered == false) {'],[0,'            var node = document.getElementById(geometry.id);'],[0,'            if (node) {'],[0,'                if (node._style.backgroundGraphic) {'],[0,'                    removeBackground = true;'],[-1,'                }'],[0,'                node.parentNode.removeChild(node);'],[-1,'            }'],[-1,'        }'],[0,'        if (removeBackground) {'],[0,'            var node = document.getElementById('],[-1,'                geometry.id + this.BACKGROUND_ID_SUFFIX);'],[0,'            if (node) {'],[0,'                node.parentNode.removeChild(node);'],[-1,'            }'],[-1,'        }'],[0,'        return rendered;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: redrawNode'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * id - {String}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style - {Object}'],[-1,'     * featureId - {String}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} true if the complete geometry could be drawn, null if parts of'],[-1,'     *     the geometry could not be drawn, false otherwise'],[-1,'     *\/'],[-1,'    redrawNode: function(id, geometry, style, featureId) {'],[0,'        style = this.applyDefaultSymbolizer(style);'],[-1,'        \/\/ Get the node if it\'s already on the map.'],[0,'        var node = this.nodeFactory(id, this.getNodeType(geometry, style));'],[-1,'        '],[-1,'        \/\/ Set the data for the node, then draw it.'],[0,'        node._featureId = featureId;'],[0,'        node._boundsBottom = geometry.getBounds().bottom;'],[0,'        node._geometryClass = geometry.CLASS_NAME;'],[0,'        node._style = style;'],[-1,''],[0,'        var drawResult = this.drawGeometryNode(node, geometry, style);'],[0,'        if(drawResult === false) {'],[0,'            return false;'],[-1,'        }'],[-1,'         '],[0,'        node = drawResult.node;'],[-1,'        '],[-1,'        \/\/ Insert the node into the indexer so it can show us where to'],[-1,'        \/\/ place it. Note that this operation is O(log(n)). If there\'s a'],[-1,'        \/\/ performance problem (when dragging, for instance) this is'],[-1,'        \/\/ likely where it would be.'],[0,'        if (this.indexer) {'],[0,'            var insert = this.indexer.insert(node);'],[0,'            if (insert) {'],[0,'                this.vectorRoot.insertBefore(node, insert);'],[-1,'            } else {'],[0,'                this.vectorRoot.appendChild(node);'],[-1,'            }'],[-1,'        } else {'],[-1,'            \/\/ if there\'s no indexer, simply append the node to root,'],[-1,'            \/\/ but only if the node is a new one'],[0,'            if (node.parentNode !== this.vectorRoot){ '],[0,'                this.vectorRoot.appendChild(node);'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        this.postDraw(node);'],[-1,'        '],[0,'        return drawResult.complete;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: redrawBackgroundNode'],[-1,'     * Redraws the node using special \'background\' style properties. Basically'],[-1,'     *     just calls redrawNode(), but instead of directly using the '],[-1,'     *     \'externalGraphic\', \'graphicXOffset\', \'graphicYOffset\', and '],[-1,'     *     \'graphicZIndex\' properties directly from the specified \'style\' '],[-1,'     *     parameter, we create a new style object and set those properties '],[-1,'     *     from the corresponding \'background\'-prefixed properties from '],[-1,'     *     specified \'style\' parameter.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * id - {String}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style - {Object}'],[-1,'     * featureId - {String}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} true if the complete geometry could be drawn, null if parts of'],[-1,'     *     the geometry could not be drawn, false otherwise'],[-1,'     *\/'],[-1,'    redrawBackgroundNode: function(id, geometry, style, featureId) {'],[0,'        var backgroundStyle = OpenLayers.Util.extend({}, style);'],[-1,'        '],[-1,'        \/\/ Set regular style attributes to apply to the background styles.'],[0,'        backgroundStyle.externalGraphic = backgroundStyle.backgroundGraphic;'],[0,'        backgroundStyle.graphicXOffset = backgroundStyle.backgroundXOffset;'],[0,'        backgroundStyle.graphicYOffset = backgroundStyle.backgroundYOffset;'],[0,'        backgroundStyle.graphicZIndex = backgroundStyle.backgroundGraphicZIndex;'],[0,'        backgroundStyle.graphicWidth = backgroundStyle.backgroundWidth || backgroundStyle.graphicWidth;'],[0,'        backgroundStyle.graphicHeight = backgroundStyle.backgroundHeight || backgroundStyle.graphicHeight;'],[-1,'        '],[-1,'        \/\/ Erase background styles.'],[0,'        backgroundStyle.backgroundGraphic = null;'],[0,'        backgroundStyle.backgroundXOffset = null;'],[0,'        backgroundStyle.backgroundYOffset = null;'],[0,'        backgroundStyle.backgroundGraphicZIndex = null;'],[-1,'        '],[0,'        return this.redrawNode('],[-1,'            id + this.BACKGROUND_ID_SUFFIX, '],[-1,'            geometry, '],[-1,'            backgroundStyle, '],[-1,'            null'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawGeometryNode'],[-1,'     * Given a node, draw a geometry on the specified layer.'],[-1,'     *     node and geometry are required arguments, style is optional.'],[-1,'     *     This method is only called by the render itself.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} a hash with properties \&quot;node\&quot; (the drawn node) and \&quot;complete\&quot;'],[-1,'     *     (null if parts of the geometry could not be drawn, false if nothing'],[-1,'     *     could be drawn)'],[-1,'     *\/'],[-1,'    drawGeometryNode: function(node, geometry, style) {'],[0,'        style = style || node._style;'],[-1,''],[0,'        var options = {'],[-1,'            \'isFilled\': style.fill === undefined ?'],[-1,'                true :'],[-1,'                style.fill,'],[-1,'            \'isStroked\': style.stroke === undefined ?'],[-1,'                !!style.strokeWidth :'],[-1,'                style.stroke'],[-1,'        };'],[0,'        var drawn;'],[0,'        switch (geometry.CLASS_NAME) {'],[-1,'            case \&quot;OpenLayers.Geometry.Point\&quot;:'],[0,'                if(style.graphic === false) {'],[0,'                    options.isFilled = false;'],[0,'                    options.isStroked = false;'],[-1,'                }'],[0,'                drawn = this.drawPoint(node, geometry);'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.LineString\&quot;:'],[0,'                options.isFilled = false;'],[0,'                drawn = this.drawLineString(node, geometry);'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.LinearRing\&quot;:'],[0,'                drawn = this.drawLinearRing(node, geometry);'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.Polygon\&quot;:'],[0,'                drawn = this.drawPolygon(node, geometry);'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.Rectangle\&quot;:'],[0,'                drawn = this.drawRectangle(node, geometry);'],[0,'                break;'],[-1,'            default:'],[0,'                break;'],[-1,'        }'],[-1,''],[0,'        node._options = options; '],[-1,''],[-1,'        \/\/set style'],[-1,'        \/\/TBD simplify this'],[0,'        if (drawn != false) {'],[0,'            return {'],[-1,'                node: this.setStyle(node, style, options, geometry),'],[-1,'                complete: drawn'],[-1,'            };'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: postDraw'],[-1,'     * Things that have do be done after the geometry node is appended'],[-1,'     *     to its parent node. To be overridden by subclasses.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     *\/'],[-1,'    postDraw: function(node) {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawPoint'],[-1,'     * Virtual function for drawing Point Geometry. '],[-1,'     *     Should be implemented by subclasses.'],[-1,'     *     This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or false if the renderer could not draw the point'],[-1,'     *\/ '],[-1,'    drawPoint: function(node, geometry) {},'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawLineString'],[-1,'     * Virtual function for drawing LineString Geometry. '],[-1,'     *     Should be implemented by subclasses.'],[-1,'     *     This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or null if the renderer could not draw all components of'],[-1,'     *     the linestring, or false if nothing could be drawn'],[-1,'     *\/ '],[-1,'    drawLineString: function(node, geometry) {},'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawLinearRing'],[-1,'     * Virtual function for drawing LinearRing Geometry. '],[-1,'     *     Should be implemented by subclasses.'],[-1,'     *     This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or null if the renderer could not draw all components'],[-1,'     *     of the linear ring, or false if nothing could be drawn'],[-1,'     *\/ '],[-1,'    drawLinearRing: function(node, geometry) {},'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawPolygon'],[-1,'     * Virtual function for drawing Polygon Geometry. '],[-1,'     *    Should be implemented by subclasses.'],[-1,'     *    This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or null if the renderer could not draw all components'],[-1,'     *     of the polygon, or false if nothing could be drawn'],[-1,'     *\/ '],[-1,'    drawPolygon: function(node, geometry) {},'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawRectangle'],[-1,'     * Virtual function for drawing Rectangle Geometry. '],[-1,'     *     Should be implemented by subclasses.'],[-1,'     *     This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or false if the renderer could not draw the rectangle'],[-1,'     *\/ '],[-1,'    drawRectangle: function(node, geometry) {},'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawCircle'],[-1,'     * Virtual function for drawing Circle Geometry. '],[-1,'     *     Should be implemented by subclasses.'],[-1,'     *     This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or false if the renderer could not draw the circle'],[-1,'     *\/ '],[-1,'    drawCircle: function(node, geometry) {},'],[-1,''],[-1,'    \/**'],[-1,'     * Method: removeText'],[-1,'     * Removes a label'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * featureId - {String}'],[-1,'     *\/'],[-1,'    removeText: function(featureId) {'],[0,'        var label = document.getElementById(featureId + this.LABEL_ID_SUFFIX);'],[0,'        if (label) {'],[0,'            this.textRoot.removeChild(label);'],[-1,'        }'],[0,'        var outline = document.getElementById(featureId + this.LABEL_OUTLINE_SUFFIX);'],[0,'        if (outline) {'],[0,'            this.textRoot.removeChild(outline);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getFeatureIdFromEvent'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Object} An &lt;OpenLayers.Event&gt; object'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A feature id or undefined.'],[-1,'     *\/'],[-1,'    getFeatureIdFromEvent: function(evt) {'],[0,'        var target = evt.target;'],[0,'        var useElement = target &amp;&amp; target.correspondingUseElement;'],[0,'        var node = useElement ? useElement : (target || evt.srcElement);'],[0,'        return node._featureId;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: eraseGeometry'],[-1,'     * Erase a geometry from the renderer. In the case of a multi-geometry, '],[-1,'     *     we cycle through and recurse on ourselves. Otherwise, we look for a '],[-1,'     *     node with the geometry.id, destroy its geometry, and remove it from'],[-1,'     *     the DOM.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * featureId - {String}'],[-1,'     *\/'],[-1,'    eraseGeometry: function(geometry, featureId) {'],[0,'        if ((geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.MultiPoint\&quot;) ||'],[-1,'            (geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.MultiLineString\&quot;) ||'],[-1,'            (geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.MultiPolygon\&quot;) ||'],[-1,'            (geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.Collection\&quot;)) {'],[0,'            for (var i=0, len=geometry.components.length; i&lt;len; i++) {'],[0,'                this.eraseGeometry(geometry.components[i], featureId);'],[-1,'            }'],[-1,'        } else {    '],[0,'            var element = OpenLayers.Util.getElement(geometry.id);'],[0,'            if (element &amp;&amp; element.parentNode) {'],[0,'                if (element.geometry) {'],[0,'                    element.geometry.destroy();'],[0,'                    element.geometry = null;'],[-1,'                }'],[0,'                element.parentNode.removeChild(element);'],[-1,''],[0,'                if (this.indexer) {'],[0,'                    this.indexer.remove(element);'],[-1,'                }'],[-1,'                '],[0,'                if (element._style.backgroundGraphic) {'],[0,'                    var backgroundId = geometry.id + this.BACKGROUND_ID_SUFFIX;'],[0,'                    var bElem = OpenLayers.Util.getElement(backgroundId);'],[0,'                    if (bElem &amp;&amp; bElem.parentNode) {'],[-1,'                        \/\/ No need to destroy the geometry since the element and the background'],[-1,'                        \/\/ node share the same geometry.'],[0,'                        bElem.parentNode.removeChild(bElem);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: nodeFactory'],[-1,'     * Create new node of the specified type, with the (optional) specified id.'],[-1,'     * '],[-1,'     * If node already exists with same ID and a different type, we remove it'],[-1,'     *     and then call ourselves again to recreate it.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * id - {String}'],[-1,'     * type - {String} type Kind of node to draw.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} A new node of the given type and id.'],[-1,'     *\/'],[-1,'    nodeFactory: function(id, type) {'],[0,'        var node = OpenLayers.Util.getElement(id);'],[0,'        if (node) {'],[0,'            if (!this.nodeTypeCompare(node, type)) {'],[0,'                node.parentNode.removeChild(node);'],[0,'                node = this.nodeFactory(id, type);'],[-1,'            }'],[-1,'        } else {'],[0,'            node = this.createNode(type, id);'],[-1,'        }'],[0,'        return node;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: nodeTypeCompare'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * type - {String} Kind of node'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the specified node is of the specified type'],[-1,'     *     This function must be overridden by subclasses.'],[-1,'     *\/'],[-1,'    nodeTypeCompare: function(node, type) {},'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: createNode'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * type - {String} Kind of node to draw.'],[-1,'     * id - {String} Id for node.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} A new node of the given type and id.'],[-1,'     *     This function must be overridden by subclasses.'],[-1,'     *\/'],[-1,'    createNode: function(type, id) {},'],[-1,''],[-1,'    \/**'],[-1,'     * Method: moveRoot'],[-1,'     * moves this renderer\'s root to a different renderer.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * renderer - {&lt;OpenLayers.Renderer&gt;} target renderer for the moved root'],[-1,'     *\/'],[-1,'    moveRoot: function(renderer) {'],[0,'        var root = this.root;'],[0,'        if(renderer.root.parentNode == this.rendererRoot) {'],[0,'            root = renderer.root;'],[-1,'        }'],[0,'        root.parentNode.removeChild(root);'],[0,'        renderer.rendererRoot.appendChild(root);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getRenderLayerId'],[-1,'     * Gets the layer that this renderer\'s output appears on. If moveRoot was'],[-1,'     * used, this will be different from the id of the layer containing the'],[-1,'     * features rendered by this renderer.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} the id of the output layer.'],[-1,'     *\/'],[-1,'    getRenderLayerId: function() {'],[0,'        return this.root.parentNode.parentNode.id;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: isComplexSymbol'],[-1,'     * Determines if a symbol cannot be rendered using drawCircle'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * graphicName - {String}'],[-1,'     * '],[-1,'     * Returns'],[-1,'     * {Boolean} true if the symbol is complex, false if not'],[-1,'     *\/'],[-1,'    isComplexSymbol: function(graphicName) {'],[0,'        return (graphicName != \&quot;circle\&quot;) &amp;&amp; !!graphicName;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Renderer.Elements\&quot;'],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/ArgParser.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.ArgParser'],[-1,' * The ArgParser control adds location bar query string parsing functionality '],[-1,' * to an OpenLayers Map.'],[-1,' * When added to a Map control, on a page load\/refresh, the Map will '],[-1,' * automatically take the href string and parse it for lon, lat, zoom, and '],[-1,' * layers information. '],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.ArgParser = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: center'],[-1,'     * {&lt;OpenLayers.LonLat&gt;}'],[-1,'     *\/'],[-1,'    center: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: zoom'],[-1,'     * {int}'],[-1,'     *\/'],[-1,'    zoom: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layers'],[-1,'     * {String} Each character represents the state of the corresponding layer '],[-1,'     *     on the map.'],[-1,'     *\/'],[-1,'    layers: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: displayProjection'],[-1,'     * {&lt;OpenLayers.Projection&gt;} Requires proj4js support. '],[-1,'     *     Projection used when reading the coordinates from the URL. This will'],[-1,'     *     reproject the map coordinates from the URL into the map\'s'],[-1,'     *     projection.'],[-1,'     *'],[-1,'     *     If you are using this functionality, be aware that any permalink'],[-1,'     *     which is added to the map will determine the coordinate type which'],[-1,'     *     is read from the URL, which means you should not add permalinks with'],[-1,'     *     different displayProjections to the same map. '],[-1,'     *\/'],[-1,'    displayProjection: null, '],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.ArgParser'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object}'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getParameters'],[-1,'     *\/    '],[-1,'    getParameters: function(url) {'],[0,'        url = url || window.location.href;'],[0,'        var parameters = OpenLayers.Util.getParameters(url);'],[-1,''],[-1,'        \/\/ If we have an anchor in the url use it to split the url'],[0,'        var index = url.indexOf(\'#\');'],[0,'        if (index &gt; 0) {'],[-1,'            \/\/ create an url to parse on the getParameters'],[0,'            url = \'?\' + url.substring(index + 1, url.length);'],[-1,''],[0,'            OpenLayers.Util.extend(parameters,'],[-1,'                    OpenLayers.Util.getParameters(url));'],[-1,'        }'],[0,'        return parameters;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     * Set the map property for the control. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} '],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Control.prototype.setMap.apply(this, arguments);'],[-1,''],[-1,'        \/\/make sure we dont already have an arg parser attached'],[0,'        for(var i=0, len=this.map.controls.length; i&lt;len; i++) {'],[0,'            var control = this.map.controls[i];'],[0,'            if ( (control != this) &amp;&amp;'],[-1,'                 (control.CLASS_NAME == \&quot;OpenLayers.Control.ArgParser\&quot;) ) {'],[-1,'                '],[-1,'                \/\/ If a second argparser is added to the map, then we '],[-1,'                \/\/ override the displayProjection to be the one added to the'],[-1,'                \/\/ map. '],[0,'                if (control.displayProjection != this.displayProjection) {'],[0,'                    this.displayProjection = control.displayProjection;'],[-1,'                }    '],[-1,'                '],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        if (i == this.map.controls.length) {'],[-1,''],[0,'            var args = this.getParameters();'],[-1,'            \/\/ Be careful to set layer first, to not trigger unnecessary layer loads'],[0,'            if (args.layers) {'],[0,'                this.layers = args.layers;'],[-1,'    '],[-1,'                \/\/ when we add a new layer, set its visibility '],[0,'                this.map.events.register(\'addlayer\', this, '],[-1,'                                         this.configureLayers);'],[0,'                this.configureLayers();'],[-1,'            }'],[0,'            if (args.lat &amp;&amp; args.lon) {'],[0,'                this.center = new OpenLayers.LonLat(parseFloat(args.lon),'],[-1,'                                                    parseFloat(args.lat));'],[0,'                if (args.zoom) {'],[0,'                    this.zoom = parseFloat(args.zoom);'],[-1,'                }'],[-1,'    '],[-1,'                \/\/ when we add a new baselayer to see when we can set the center'],[0,'                this.map.events.register(\'changebaselayer\', this, '],[-1,'                                         this.setCenter);'],[0,'                this.setCenter();'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'   '],[-1,'    \/** '],[-1,'     * Method: setCenter'],[-1,'     * As soon as a baseLayer has been loaded, we center and zoom'],[-1,'     *   ...and remove the handler.'],[-1,'     *\/'],[-1,'    setCenter: function() {'],[-1,'        '],[0,'        if (this.map.baseLayer) {'],[-1,'            \/\/dont need to listen for this one anymore'],[0,'            this.map.events.unregister(\'changebaselayer\', this, '],[-1,'                                       this.setCenter);'],[-1,'            '],[0,'            if (this.displayProjection) {'],[0,'                this.center.transform(this.displayProjection, '],[-1,'                                      this.map.getProjectionObject()); '],[-1,'            }      '],[-1,''],[0,'            this.map.setCenter(this.center, this.zoom);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: configureLayers'],[-1,'     * As soon as all the layers are loaded, cycle through them and '],[-1,'     *   hide or show them. '],[-1,'     *\/'],[-1,'    configureLayers: function() {'],[-1,''],[0,'        if (this.layers.length == this.map.layers.length) { '],[0,'            this.map.events.unregister(\'addlayer\', this, this.configureLayers);'],[-1,''],[0,'            for(var i=0, len=this.layers.length; i&lt;len; i++) {'],[-1,'                '],[0,'                var layer = this.map.layers[i];'],[0,'                var c = this.layers.charAt(i);'],[-1,'                '],[0,'                if (c == \&quot;B\&quot;) {'],[0,'                    this.map.setBaseLayer(layer);'],[0,'                } else if ( (c == \&quot;T\&quot;) || (c == \&quot;F\&quot;) ) {'],[0,'                    layer.setVisibility(c == \&quot;T\&quot;);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },     '],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.ArgParser\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Permalink.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Control\/ArgParser.js'],[-1,' * @requires OpenLayers\/Lang.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Permalink'],[-1,' * The Permalink control is hyperlink that will return the user to the '],[-1,' * current map view. By default it is drawn in the lower right corner of the'],[-1,' * map. The href is updated as the map is zoomed, panned and whilst layers'],[-1,' * are switched.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.Permalink = OpenLayers.Class(OpenLayers.Control, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: argParserClass'],[-1,'     * {Class} The ArgParser control class (not instance) to use with this'],[-1,'     *     control.'],[-1,'     *\/'],[-1,'    argParserClass: OpenLayers.Control.ArgParser,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: element '],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    element: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: anchor'],[-1,'     * {Boolean} This option changes 3 things:'],[-1,'     *     the character \'#\' is used in place of the character \'?\','],[-1,'     *     the window.href is updated if no element is provided.'],[-1,'     *     When this option is set to true it\'s not recommend to provide'],[-1,'     *     a base without provide an element.'],[-1,'     *\/'],[-1,'    anchor: false,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: base'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    base: \'\','],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: displayProjection'],[-1,'     * {&lt;OpenLayers.Projection&gt;} Requires proj4js support.  Projection used'],[-1,'     *     when creating the coordinates in the link. This will reproject the'],[-1,'     *     map coordinates into display coordinates. If you are using this'],[-1,'     *     functionality, the permalink which is last added to the map will'],[-1,'     *     determine the coordinate type which is read from the URL, which'],[-1,'     *     means you should not add permalinks with different'],[-1,'     *     displayProjections to the same map. '],[-1,'     *\/'],[-1,'    displayProjection: null, '],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.Permalink'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * element - {DOMElement} '],[-1,'     * base - {String} '],[-1,'     * options - {Object} options to the control.'],[-1,'     *'],[-1,'     * Or for anchor:'],[-1,'     * options - {Object} options to the control.'],[-1,'     *\/'],[-1,'    initialize: function(element, base, options) {'],[0,'        if (element !== null &amp;&amp; typeof element == \'object\' &amp;&amp; !OpenLayers.Util.isElement(element)) {'],[0,'            options = element;'],[0,'            this.base = document.location.href;'],[0,'            OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[0,'            if (this.element != null) {'],[0,'                this.element = OpenLayers.Util.getElement(this.element);'],[-1,'            }'],[-1,'        }'],[-1,'        else {'],[0,'            OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[0,'            this.element = OpenLayers.Util.getElement(element);'],[0,'            this.base = base || document.location.href;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     *\/'],[-1,'    destroy: function()  {'],[0,'        if (this.element &amp;&amp; this.element.parentNode == this.div) {'],[0,'            this.div.removeChild(this.element);'],[0,'            this.element = null;'],[-1,'        }'],[0,'        if (this.map) {'],[0,'            this.map.events.unregister(\'moveend\', this, this.updateLink);'],[-1,'        }'],[-1,''],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments); '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     * Set the map property for the control. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} '],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Control.prototype.setMap.apply(this, arguments);'],[-1,''],[-1,'        \/\/make sure we have an arg parser attached'],[0,'        for(var i=0, len=this.map.controls.length; i&lt;len; i++) {'],[0,'            var control = this.map.controls[i];'],[0,'            if (control.CLASS_NAME == this.argParserClass.CLASS_NAME) {'],[-1,'                '],[-1,'                \/\/ If a permalink is added to the map, and an ArgParser already'],[-1,'                \/\/ exists, we override the displayProjection to be the one'],[-1,'                \/\/ on the permalink. '],[0,'                if (control.displayProjection != this.displayProjection) {'],[0,'                    this.displayProjection = control.displayProjection;'],[-1,'                }    '],[-1,'                '],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        if (i == this.map.controls.length) {'],[0,'            this.map.addControl(new this.argParserClass('],[-1,'                { \'displayProjection\': this.displayProjection }));       '],[-1,'        }'],[-1,''],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/    '],[-1,'    draw: function() {'],[0,'        OpenLayers.Control.prototype.draw.apply(this, arguments);'],[-1,'          '],[0,'        if (!this.element &amp;&amp; !this.anchor) {'],[0,'            this.element = document.createElement(\&quot;a\&quot;);'],[0,'            this.element.innerHTML = OpenLayers.i18n(\&quot;Permalink\&quot;);'],[0,'            this.element.href=\&quot;\&quot;;'],[0,'            this.div.appendChild(this.element);'],[-1,'        }'],[0,'        this.map.events.on({'],[-1,'            \'moveend\': this.updateLink,'],[-1,'            \'changelayer\': this.updateLink,'],[-1,'            \'changebaselayer\': this.updateLink,'],[-1,'            scope: this'],[-1,'        });'],[-1,'        '],[-1,'        \/\/ Make it so there is at least a link even though the map may not have'],[-1,'        \/\/ moved yet.'],[0,'        this.updateLink();'],[-1,'        '],[0,'        return this.div;'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * Method: updateLink '],[-1,'     *\/'],[-1,'    updateLink: function() {'],[0,'        var separator = this.anchor ? \'#\' : \'?\';'],[0,'        var href = this.base;'],[0,'        var anchor = null;'],[0,'        if (href.indexOf(\&quot;#\&quot;) != -1 &amp;&amp; this.anchor == false) {'],[0,'            anchor = href.substring( href.indexOf(\&quot;#\&quot;), href.length);'],[-1,'        }'],[0,'        if (href.indexOf(separator) != -1) {'],[0,'            href = href.substring( 0, href.indexOf(separator) );'],[-1,'        }'],[0,'        var splits = href.split(\&quot;#\&quot;);'],[0,'        href = splits[0] + separator+ OpenLayers.Util.getParameterString(this.createParams());'],[0,'        if (anchor) {'],[0,'            href += anchor;'],[-1,'        }'],[0,'        if (this.anchor &amp;&amp; !this.element) {'],[0,'            window.location.href = href;'],[-1,'        }'],[-1,'        else {'],[0,'            this.element.href = href;'],[-1,'        }'],[-1,'    }, '],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: createParams'],[-1,'     * Creates the parameters that need to be encoded into the permalink url.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * center - {&lt;OpenLayers.LonLat&gt;} center to encode in the permalink.'],[-1,'     *     Defaults to the current map center.'],[-1,'     * zoom - {Integer} zoom level to encode in the permalink. Defaults to the'],[-1,'     *     current map zoom level.'],[-1,'     * layers - {Array(&lt;OpenLayers.Layer&gt;)} layers to encode in the permalink.'],[-1,'     *     Defaults to the current map layers.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} Hash of parameters that will be url-encoded into the'],[-1,'     * permalink.'],[-1,'     *\/'],[-1,'    createParams: function(center, zoom, layers) {'],[0,'        center = center || this.map.getCenter();'],[-1,'          '],[0,'        var params = OpenLayers.Util.getParameters(this.base);'],[-1,'        '],[-1,'        \/\/ If there\'s still no center, map is not initialized yet. '],[-1,'        \/\/ Break out of this function, and simply return the params from the'],[-1,'        \/\/ base link.'],[0,'        if (center) { '],[-1,''],[-1,'            \/\/zoom'],[0,'            params.zoom = zoom || this.map.getZoom(); '],[-1,''],[-1,'            \/\/lon,lat'],[0,'            var lat = center.lat;'],[0,'            var lon = center.lon;'],[-1,'            '],[0,'            if (this.displayProjection) {'],[0,'                var mapPosition = OpenLayers.Projection.transform('],[-1,'                  { x: lon, y: lat }, '],[-1,'                  this.map.getProjectionObject(), '],[-1,'                  this.displayProjection );'],[0,'                lon = mapPosition.x;  '],[0,'                lat = mapPosition.y;  '],[-1,'            }       '],[0,'            params.lat = Math.round(lat*100000)\/100000;'],[0,'            params.lon = Math.round(lon*100000)\/100000;'],[-1,'    '],[-1,'            \/\/layers        '],[0,'            layers = layers || this.map.layers;  '],[0,'            params.layers = \'\';'],[0,'            for (var i=0, len=layers.length; i&lt;len; i++) {'],[0,'                var layer = layers[i];'],[-1,'    '],[0,'                if (layer.isBaseLayer) {'],[0,'                    params.layers += (layer == this.map.baseLayer) ? \&quot;B\&quot; : \&quot;0\&quot;;'],[-1,'                } else {'],[0,'                    params.layers += (layer.getVisibility()) ? \&quot;T\&quot; : \&quot;F\&quot;;           '],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        return params;'],[-1,'    }, '],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Permalink\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/TMS.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.TMS'],[-1,' * Create a layer for accessing tiles from services that conform with the '],[-1,' *     Tile Map Service Specification '],[-1,' *     (http:\/\/wiki.osgeo.org\/wiki\/Tile_Map_Service_Specification).'],[-1,' *'],[-1,' * Example:'],[-1,' * (code)'],[-1,' *     var layer = new OpenLayers.Layer.TMS('],[-1,' *         \&quot;My Layer\&quot;, \/\/ name for display in LayerSwitcher'],[-1,' *         \&quot;http:\/\/tilecache.osgeo.org\/wms-c\/Basic.py\/\&quot;, \/\/ service endpoint'],[-1,' *         {layername: \&quot;basic\&quot;, type: \&quot;png\&quot;} \/\/ required properties'],[-1,' *     );'],[-1,' * (end)'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.TMS = OpenLayers.Class(OpenLayers.Layer.Grid, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: serviceVersion'],[-1,'     * {String} Service version for tile requests.  Default is \&quot;1.0.0\&quot;.'],[-1,'     *\/'],[-1,'    serviceVersion: \&quot;1.0.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layername'],[-1,'     * {String} The identifier for the &lt;TileMap&gt; as advertised by the service.  '],[-1,'     *     For example, if the service advertises a &lt;TileMap&gt; with '],[-1,'     *    \'href=\&quot;http:\/\/tms.osgeo.org\/1.0.0\/vmap0\&quot;\', the &lt;layername&gt; property '],[-1,'     *     would be set to \&quot;vmap0\&quot;.'],[-1,'     *\/'],[-1,'    layername: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: type'],[-1,'     * {String} The format extension corresponding to the requested tile image'],[-1,'     *     type.  This is advertised in a &lt;TileFormat&gt; element as the '],[-1,'     *     \&quot;extension\&quot; attribute.  For example, if the service advertises a '],[-1,'     *     &lt;TileMap&gt; with &lt;TileFormat width=\&quot;256\&quot; height=\&quot;256\&quot; mime-type=\&quot;image\/jpeg\&quot; extension=\&quot;jpg\&quot; \/&gt;,'],[-1,'     *     the &lt;type&gt; property would be set to \&quot;jpg\&quot;.'],[-1,'     *\/'],[-1,'    type: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * {Boolean} Make this layer a base layer.  Default is true.  Set false to'],[-1,'     *     use the layer as an overlay.'],[-1,'     *\/'],[-1,'    isBaseLayer: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: tileOrigin'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} Optional origin for aligning the grid of tiles.'],[-1,'     *     If provided, requests for tiles at all resolutions will be aligned'],[-1,'     *     with this location (no tiles shall overlap this location).  If'],[-1,'     *     not provided, the grid of tiles will be aligned with the bottom-left'],[-1,'     *     corner of the map\'s &lt;maxExtent&gt;.  Default is ``null``.'],[-1,'     *'],[-1,'     * Example:'],[-1,'     * (code)'],[-1,'     *     var layer = new OpenLayers.Layer.TMS('],[-1,'     *         \&quot;My Layer\&quot;,'],[-1,'     *         \&quot;http:\/\/tilecache.osgeo.org\/wms-c\/Basic.py\/\&quot;,'],[-1,'     *         {'],[-1,'     *             layername: \&quot;basic\&quot;, '],[-1,'     *             type: \&quot;png\&quot;,'],[-1,'     *             \/\/ set if different than the bottom left of map.maxExtent'],[-1,'     *             tileOrigin: new OpenLayers.LonLat(-180, -90)'],[-1,'     *         }'],[-1,'     *     );'],[-1,'     * (end)'],[-1,'     *\/'],[-1,'    tileOrigin: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: serverResolutions'],[-1,'     * {Array} A list of all resolutions available on the server.  Only set this'],[-1,'     *     property if the map resolutions differ from the server. This'],[-1,'     *     property serves two purposes. (a) &lt;serverResolutions&gt; can include'],[-1,'     *     resolutions that the server supports and that you don\'t want to'],[-1,'     *     provide with this layer; you can also look at &lt;zoomOffset&gt;, which is'],[-1,'     *     an alternative to &lt;serverResolutions&gt; for that specific purpose.'],[-1,'     *     (b) The map can work with resolutions that aren\'t supported by'],[-1,'     *     the server, i.e. that aren\'t in &lt;serverResolutions&gt;. When the'],[-1,'     *     map is displayed in such a resolution data for the closest'],[-1,'     *     server-supported resolution is loaded and the layer div is'],[-1,'     *     stretched as necessary.'],[-1,'     *\/'],[-1,'    serverResolutions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: zoomOffset'],[-1,'     * {Number} If your cache has more zoom levels than you want to provide'],[-1,'     *     access to with this layer, supply a zoomOffset.  This zoom offset'],[-1,'     *     is added to the current map zoom level to determine the level'],[-1,'     *     for a requested tile.  For example, if you supply a zoomOffset'],[-1,'     *     of 3, when the map is at the zoom 0, tiles will be requested from'],[-1,'     *     level 3 of your cache.  Default is 0 (assumes cache level and map'],[-1,'     *     zoom are equivalent).  Using &lt;zoomOffset&gt; is an alternative to'],[-1,'     *     setting &lt;serverResolutions&gt; if you only want to expose a subset'],[-1,'     *     of the server resolutions.'],[-1,'     *\/'],[-1,'    zoomOffset: 0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.TMS'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * name - {String} Title to be displayed in a &lt;OpenLayers.Control.LayerSwitcher&gt;'],[-1,'     * url - {String} Service endpoint (without the version number).  E.g.'],[-1,'     *     \&quot;http:\/\/tms.osgeo.org\/\&quot;.'],[-1,'     * options - {Object} Additional properties to be set on the layer.  The'],[-1,'     *     &lt;layername&gt; and &lt;type&gt; properties must be set here.'],[-1,'     *\/'],[-1,'    initialize: function(name, url, options) {'],[0,'        var newArguments = [];'],[0,'        newArguments.push(name, url, {}, options);'],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply(this, newArguments);'],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Create a complete copy of this layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object} Should only be provided by subclasses that call this'],[-1,'     *     method.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.TMS&gt;} An exact clone of this &lt;OpenLayers.Layer.TMS&gt;'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[-1,'        '],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.TMS(this.name,'],[-1,'                                           this.url,'],[-1,'                                           this.getOptions());'],[-1,'        }'],[-1,''],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);'],[-1,''],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[-1,''],[0,'        return obj;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} A string with the layer\'s url and parameters and also the '],[-1,'     *          passed-in bounds and appropriate tile size specified as '],[-1,'     *          parameters'],[-1,'     *\/'],[-1,'    getURL: function (bounds) {'],[0,'        bounds = this.adjustBounds(bounds);'],[0,'        var res = this.getServerResolution();'],[0,'        var x = Math.round((bounds.left - this.tileOrigin.lon) \/ (res * this.tileSize.w));'],[0,'        var y = Math.round((bounds.bottom - this.tileOrigin.lat) \/ (res * this.tileSize.h));'],[0,'        var z = this.getServerZoom();'],[0,'        var path = this.serviceVersion + \&quot;\/\&quot; + this.layername + \&quot;\/\&quot; + z + \&quot;\/\&quot; + x + \&quot;\/\&quot; + y + \&quot;.\&quot; + this.type; '],[0,'        var url = this.url;'],[0,'        if (OpenLayers.Util.isArray(url)) {'],[0,'            url = this.selectUrl(path, url);'],[-1,'        }'],[0,'        return url + path;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: setMap'],[-1,'     * When the layer is added to a map, then we can fetch our origin '],[-1,'     *    (if we don\'t have one.) '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments);'],[0,'        if (!this.tileOrigin) { '],[0,'            this.tileOrigin = new OpenLayers.LonLat(this.map.maxExtent.left,'],[-1,'                                                this.map.maxExtent.bottom);'],[-1,'        }                                       '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.TMS\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WCSCapabilities.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WCSCapabilities'],[-1,' * Read WCS Capabilities.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML.VersionedOGC&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WCSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;1.1.0\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;1.1.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WCSCapabilities'],[-1,'     * Create a new parser for WCS capabilities.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read capabilities data from a string, and return a list of coverages. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} List of named coverages.'],[-1,'     *\/'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WCSCapabilities\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WCSCapabilities\/v1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WCSCapabilities.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WCSCapabilities.v1'],[-1,' * Abstract class not to be instantiated directly.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WCSCapabilities.v1 = OpenLayers.Class('],[-1,'    OpenLayers.Format.XML, {'],[-1,''],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        splitSpace: (\/\\s+\/)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;wcs\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read capabilities data from a string, and return a list of coverages. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} List of named coverages.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        var raw = data;'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var capabilities = {};'],[0,'        this.readNode(data, capabilities);'],[0,'        return capabilities;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WCSCapabilities.v1\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WCSCapabilities\/v1_0_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WCSCapabilities\/v1.js'],[-1,' * @requires OpenLayers\/Format\/GML\/v3.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WCSCapabilities\/v1_0_0'],[-1,' * Read WCS Capabilities version 1.0.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WCSCapabilities.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WCSCapabilities.v1_0_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.WCSCapabilities.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WCSCapabilities.v1_0_0'],[-1,'     * Create a new parser for WCS capabilities version 1.0.0.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        wcs: \&quot;http:\/\/www.opengis.net\/wcs\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;,'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: errorProperty'],[-1,'     * {String} Which property of the returned object to check for in order to'],[-1,'     * determine whether or not parsing has failed. In the case that the'],[-1,'     * errorProperty is undefined on the returned object, the document will be'],[-1,'     * run through an OGCExceptionReport parser.'],[-1,'     *\/'],[-1,'    errorProperty: \&quot;service\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wcs\&quot;: {'],[-1,'             \&quot;WCS_Capabilities\&quot;: function(node, obj) {          '],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Service\&quot;: function(node, obj) {'],[0,'                obj.service = {};'],[0,'                this.readChildNodes(node, obj.service);'],[-1,'            },'],[-1,'            \&quot;name\&quot;: function(node, service) {  '],[0,'                service.name = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;label\&quot;: function(node, service) {  '],[0,'                service.label = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;keywords\&quot;: function(node, service) { '],[0,'                service.keywords = []; '],[0,'                this.readChildNodes(node, service.keywords);'],[-1,'            },'],[-1,'            \&quot;keyword\&quot;: function(node, keywords) { '],[-1,'                \/\/ Append the keyword to the keywords list'],[0,'                keywords.push(this.getChildValue(node));      '],[-1,'            },'],[-1,'            \&quot;responsibleParty\&quot;: function(node, service) {'],[0,'                service.responsibleParty = {};'],[0,'                this.readChildNodes(node, service.responsibleParty);   '],[-1,'            },'],[-1,'            \&quot;individualName\&quot;: function(node, responsibleParty) {'],[0,'                responsibleParty.individualName = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;organisationName\&quot;: function(node, responsibleParty) {'],[0,'                responsibleParty.organisationName = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;positionName\&quot;: function(node, responsibleParty) {'],[0,'                responsibleParty.positionName = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;contactInfo\&quot;: function(node, responsibleParty) {'],[0,'                responsibleParty.contactInfo = {};'],[0,'                this.readChildNodes(node, responsibleParty.contactInfo);'],[-1,'            },'],[-1,'            \&quot;phone\&quot;: function(node, contactInfo) {'],[0,'                contactInfo.phone = {};'],[0,'                this.readChildNodes(node, contactInfo.phone);'],[-1,'            },'],[-1,'            \&quot;voice\&quot;: function(node, phone) {'],[0,'                phone.voice = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;facsimile\&quot;: function(node, phone) {'],[0,'                phone.facsimile = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;address\&quot;: function(node, contactInfo) {'],[0,'                contactInfo.address = {};'],[0,'                this.readChildNodes(node, contactInfo.address);'],[-1,'            },'],[-1,'            \&quot;deliveryPoint\&quot;: function(node, address) {'],[0,'                address.deliveryPoint = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;city\&quot;: function(node, address) {'],[0,'                address.city = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;postalCode\&quot;: function(node, address) {'],[0,'                address.postalCode = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;country\&quot;: function(node, address) {'],[0,'                address.country = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;electronicMailAddress\&quot;: function(node, address) {'],[0,'                address.electronicMailAddress = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;fees\&quot;: function(node, service) {'],[0,'                service.fees = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;accessConstraints\&quot;: function(node, service) {'],[0,'                service.accessConstraints = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ContentMetadata\&quot;: function(node, obj) {'],[0,'                obj.contentMetadata = [];'],[0,'                this.readChildNodes(node, obj.contentMetadata);'],[-1,'            },'],[-1,'            \&quot;CoverageOfferingBrief\&quot;: function(node, contentMetadata) {'],[0,'                var coverageOfferingBrief = {};'],[0,'                this.readChildNodes(node, coverageOfferingBrief);'],[0,'                contentMetadata.push(coverageOfferingBrief);'],[-1,'            },'],[-1,'            \&quot;name\&quot;: function(node, coverageOfferingBrief) {'],[0,'                coverageOfferingBrief.name = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;label\&quot;: function(node, coverageOfferingBrief) {'],[0,'                coverageOfferingBrief.label = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;lonLatEnvelope\&quot;: function(node, coverageOfferingBrief) {'],[0,'                var nodeList = this.getElementsByTagNameNS(node, \&quot;http:\/\/www.opengis.net\/gml\&quot;, \&quot;pos\&quot;);'],[-1,''],[-1,'                \/\/ We expect two nodes here, to create the corners of a bounding box'],[0,'                if(nodeList.length == 2) {'],[0,'                    var min = {};'],[0,'                    var max = {};'],[-1,''],[0,'                    OpenLayers.Format.GML.v3.prototype.readers[\&quot;gml\&quot;].pos.apply(this, [nodeList[0], min]);'],[0,'                    OpenLayers.Format.GML.v3.prototype.readers[\&quot;gml\&quot;].pos.apply(this, [nodeList[1], max]);'],[-1,''],[0,'                    coverageOfferingBrief.lonLatEnvelope = {};'],[0,'                    coverageOfferingBrief.lonLatEnvelope.srsName = node.getAttribute(\&quot;srsName\&quot;);'],[0,'                    coverageOfferingBrief.lonLatEnvelope.min = min.points[0];'],[0,'                    coverageOfferingBrief.lonLatEnvelope.max = max.points[0];'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WCSCapabilities.v1_0_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Strategy\/Fixed.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Strategy.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Strategy.Fixed'],[-1,' * A simple strategy that requests features once and never requests new data.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Strategy&gt;'],[-1,' *\/'],[1,'OpenLayers.Strategy.Fixed = OpenLayers.Class(OpenLayers.Strategy, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: preload'],[-1,'     * {Boolean} Load data before layer made visible. Enabling this may result'],[-1,'     *   in considerable overhead if your application loads many data layers'],[-1,'     *   that are not visible by default. Default is false.'],[-1,'     *\/'],[-1,'    preload: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Strategy.Fixed'],[-1,'     * Create a new Fixed strategy.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: activate'],[-1,'     * Activate the strategy: load data or add listener to load when visible'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} True if the strategy was successfully activated or false if'],[-1,'     *      the strategy was already active.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        if(OpenLayers.Strategy.prototype.activate.apply(this, arguments)) {'],[0,'            this.layer.events.on({'],[-1,'                \&quot;refresh\&quot;: this.load,'],[-1,'                scope: this'],[-1,'            });'],[0,'            if(this.layer.visibility == true || this.preload) {'],[0,'                this.load();'],[-1,'            } else {'],[0,'                this.layer.events.on({'],[-1,'                    \&quot;visibilitychanged\&quot;: this.load,'],[-1,'                    scope: this'],[-1,'                });'],[-1,'            }'],[0,'            return true;'],[-1,'        }'],[0,'        return false;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: deactivate'],[-1,'     * Deactivate the strategy.  Undo what is done in &lt;activate&gt;.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The strategy was successfully deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);'],[0,'        if(deactivated) {'],[0,'            this.layer.events.un({'],[-1,'                \&quot;refresh\&quot;: this.load,'],[-1,'                \&quot;visibilitychanged\&quot;: this.load,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: load'],[-1,'     * Tells protocol to load data and unhooks the visibilitychanged event'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} options to pass to protocol read.'],[-1,'     *\/'],[-1,'    load: function(options) {'],[0,'        var layer = this.layer;'],[0,'        layer.events.triggerEvent(\&quot;loadstart\&quot;, {filter: layer.filter});'],[0,'        layer.protocol.read(OpenLayers.Util.applyDefaults({'],[-1,'            callback: OpenLayers.Function.bind(this.merge, this,'],[-1,'                layer.map.getProjectionObject()),'],[-1,'            filter: layer.filter'],[-1,'        }, options));'],[0,'        layer.events.un({'],[-1,'            \&quot;visibilitychanged\&quot;: this.load,'],[-1,'            scope: this'],[-1,'        });'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: merge'],[-1,'     * Add all features to the layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * mapProjection - {&lt;OpenLayers.Projection&gt;} the map projection'],[-1,'     * resp - {&lt;OpenLayers.Protocol.Response&gt;} The response object passed'],[-1,'     *      by the protocol.'],[-1,'     *\/'],[-1,'    merge: function(mapProjection, resp) {'],[0,'        var layer = this.layer;'],[0,'        layer.destroyFeatures();'],[0,'        var features = resp.features;'],[0,'        if (features &amp;&amp; features.length &gt; 0) {'],[0,'            if(!mapProjection.equals(layer.projection)) {'],[0,'                var geom;'],[0,'                for(var i=0, len=features.length; i&lt;len; ++i) {'],[0,'                    geom = features[i].geometry;'],[0,'                    if(geom) {'],[0,'                        geom.transform(layer.projection, mapProjection);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            layer.addFeatures(features);'],[-1,'        }'],[0,'        layer.events.triggerEvent(\&quot;loadend\&quot;, {response: resp});'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Strategy.Fixed\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Zoom.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Events\/buttonclick.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Zoom'],[-1,' * The Zoom control is a pair of +\/- links for zooming in and out.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.Zoom = OpenLayers.Class(OpenLayers.Control, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: zoomInText'],[-1,'     * {String}'],[-1,'     * Text for zoom-in link.  Default is \&quot;+\&quot;.'],[-1,'     *\/'],[-1,'    zoomInText: \&quot;+\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: zoomInId'],[-1,'     * {String}'],[-1,'     * Instead of having the control create a zoom in link, you can provide '],[-1,'     *     the identifier for an anchor element already added to the document.'],[-1,'     *     By default, an element with id \&quot;olZoomInLink\&quot; will be searched for'],[-1,'     *     and used if it exists.'],[-1,'     *\/'],[-1,'    zoomInId: \&quot;olZoomInLink\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: zoomOutText'],[-1,'     * {String}'],[-1,'     * Text for zoom-out link.  Default is \&quot;\\u2212\&quot;.'],[-1,'     *\/'],[-1,'    zoomOutText: \&quot;\\u2212\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: zoomOutId'],[-1,'     * {String}'],[-1,'     * Instead of having the control create a zoom out link, you can provide '],[-1,'     *     the identifier for an anchor element already added to the document.'],[-1,'     *     By default, an element with id \&quot;olZoomOutLink\&quot; will be searched for'],[-1,'     *     and used if it exists.'],[-1,'     *\/'],[-1,'    zoomOutId: \&quot;olZoomOutLink\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} A reference to the DOMElement containing the zoom links.'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        var div = OpenLayers.Control.prototype.draw.apply(this),'],[-1,'            links = this.getOrCreateLinks(div),'],[-1,'            zoomIn = links.zoomIn,'],[-1,'            zoomOut = links.zoomOut,'],[-1,'            eventsInstance = this.map.events;'],[-1,'        '],[0,'        if (zoomOut.parentNode !== div) {'],[0,'            eventsInstance = this.events;'],[0,'            eventsInstance.attachToElement(zoomOut.parentNode);'],[-1,'        }'],[0,'        eventsInstance.register(\&quot;buttonclick\&quot;, this, this.onZoomClick);'],[-1,'        '],[0,'        this.zoomInLink = zoomIn;'],[0,'        this.zoomOutLink = zoomOut;'],[0,'        return div;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getOrCreateLinks'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * el - {DOMElement}'],[-1,'     *'],[-1,'     * Return: '],[-1,'     * {Object} Object with zoomIn and zoomOut properties referencing links.'],[-1,'     *\/'],[-1,'    getOrCreateLinks: function(el) {'],[0,'        var zoomIn = document.getElementById(this.zoomInId),'],[-1,'            zoomOut = document.getElementById(this.zoomOutId);'],[0,'        if (!zoomIn) {'],[0,'            zoomIn = document.createElement(\&quot;a\&quot;);'],[0,'            zoomIn.href = \&quot;#zoomIn\&quot;;'],[0,'            zoomIn.appendChild(document.createTextNode(this.zoomInText));'],[0,'            zoomIn.className = \&quot;olControlZoomIn\&quot;;'],[0,'            el.appendChild(zoomIn);'],[-1,'        }'],[0,'        OpenLayers.Element.addClass(zoomIn, \&quot;olButton\&quot;);'],[0,'        if (!zoomOut) {'],[0,'            zoomOut = document.createElement(\&quot;a\&quot;);'],[0,'            zoomOut.href = \&quot;#zoomOut\&quot;;'],[0,'            zoomOut.appendChild(document.createTextNode(this.zoomOutText));'],[0,'            zoomOut.className = \&quot;olControlZoomOut\&quot;;'],[0,'            el.appendChild(zoomOut);'],[-1,'        }'],[0,'        OpenLayers.Element.addClass(zoomOut, \&quot;olButton\&quot;);'],[0,'        return {'],[-1,'            zoomIn: zoomIn, zoomOut: zoomOut'],[-1,'        };'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onZoomClick'],[-1,'     * Called when zoomin\/out link is clicked.'],[-1,'     *\/'],[-1,'    onZoomClick: function(evt) {'],[0,'        var button = evt.buttonElement;'],[0,'        if (button === this.zoomInLink) {'],[0,'            this.map.zoomIn();'],[0,'        } else if (button === this.zoomOutLink) {'],[0,'            this.map.zoomOut();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: destroy'],[-1,'     * Clean up.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if (this.map) {'],[0,'            this.map.events.unregister(\&quot;buttonclick\&quot;, this, this.onZoomClick);'],[-1,'        }'],[0,'        delete this.zoomInLink;'],[0,'        delete this.zoomOutLink;'],[0,'        OpenLayers.Control.prototype.destroy.apply(this);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Zoom\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/StyleMap.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Style.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' *\/'],[-1,' '],[-1,'\/**'],[-1,' * Class: OpenLayers.StyleMap'],[-1,' *\/'],[1,'OpenLayers.StyleMap = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: styles'],[-1,'     * {Object} Hash of {&lt;OpenLayers.Style&gt;}, keyed by names of well known'],[-1,'     * rendering intents (e.g. \&quot;default\&quot;, \&quot;temporary\&quot;, \&quot;select\&quot;, \&quot;delete\&quot;).'],[-1,'     *\/'],[-1,'    styles: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: extendDefault'],[-1,'     * {Boolean} if true, every render intent will extend the symbolizers'],[-1,'     * specified for the \&quot;default\&quot; intent at rendering time. Otherwise, every'],[-1,'     * rendering intent will be treated as a completely independent style.'],[-1,'     *\/'],[-1,'    extendDefault: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.StyleMap'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * style   - {Object} Optional. Either a style hash, or a style object, or'],[-1,'     *           a hash of style objects (style hashes) keyed by rendering'],[-1,'     *           intent. If just one style hash or style object is passed,'],[-1,'     *           this will be used for all known render intents (default,'],[-1,'     *           select, temporary)'],[-1,'     * options - {Object} optional hash of additional options for this'],[-1,'     *           instance'],[-1,'     *\/'],[-1,'    initialize: function (style, options) {'],[0,'        this.styles = {'],[-1,'            \&quot;default\&quot;: new OpenLayers.Style('],[-1,'                OpenLayers.Feature.Vector.style[\&quot;default\&quot;]),'],[-1,'            \&quot;select\&quot;: new OpenLayers.Style('],[-1,'                OpenLayers.Feature.Vector.style[\&quot;select\&quot;]),'],[-1,'            \&quot;temporary\&quot;: new OpenLayers.Style('],[-1,'                OpenLayers.Feature.Vector.style[\&quot;temporary\&quot;]),'],[-1,'            \&quot;delete\&quot;: new OpenLayers.Style('],[-1,'                OpenLayers.Feature.Vector.style[\&quot;delete\&quot;])'],[-1,'        };'],[-1,'        '],[-1,'        \/\/ take whatever the user passed as style parameter and convert it'],[-1,'        \/\/ into parts of stylemap.'],[0,'        if(style instanceof OpenLayers.Style) {'],[-1,'            \/\/ user passed a style object'],[0,'            this.styles[\&quot;default\&quot;] = style;'],[0,'            this.styles[\&quot;select\&quot;] = style;'],[0,'            this.styles[\&quot;temporary\&quot;] = style;'],[0,'            this.styles[\&quot;delete\&quot;] = style;'],[0,'        } else if(typeof style == \&quot;object\&quot;) {'],[0,'            for(var key in style) {'],[0,'                if(style[key] instanceof OpenLayers.Style) {'],[-1,'                    \/\/ user passed a hash of style objects'],[0,'                    this.styles[key] = style[key];'],[0,'                } else if(typeof style[key] == \&quot;object\&quot;) {'],[-1,'                    \/\/ user passsed a hash of style hashes'],[0,'                    this.styles[key] = new OpenLayers.Style(style[key]);'],[-1,'                } else {'],[-1,'                    \/\/ user passed a style hash (i.e. symbolizer)'],[0,'                    this.styles[\&quot;default\&quot;] = new OpenLayers.Style(style);'],[0,'                    this.styles[\&quot;select\&quot;] = new OpenLayers.Style(style);'],[0,'                    this.styles[\&quot;temporary\&quot;] = new OpenLayers.Style(style);'],[0,'                    this.styles[\&quot;delete\&quot;] = new OpenLayers.Style(style);'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        OpenLayers.Util.extend(this, options);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        for(var key in this.styles) {'],[0,'            this.styles[key].destroy();'],[-1,'        }'],[0,'        this.styles = null;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createSymbolizer'],[-1,'     * Creates the symbolizer for a feature for a render intent.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature&gt;} The feature to evaluate the rules'],[-1,'     *           of the intended style against.'],[-1,'     * intent  - {String} The intent determines the symbolizer that will be'],[-1,'     *           used to draw the feature. Well known intents are \&quot;default\&quot;'],[-1,'     *           (for just drawing the features), \&quot;select\&quot; (for selected'],[-1,'     *           features) and \&quot;temporary\&quot; (for drawing features).'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} symbolizer hash'],[-1,'     *\/'],[-1,'    createSymbolizer: function(feature, intent) {'],[0,'        if(!feature) {'],[0,'            feature = new OpenLayers.Feature.Vector();'],[-1,'        }'],[0,'        if(!this.styles[intent]) {'],[0,'            intent = \&quot;default\&quot;;'],[-1,'        }'],[0,'        feature.renderIntent = intent;'],[0,'        var defaultSymbolizer = {};'],[0,'        if(this.extendDefault &amp;&amp; intent != \&quot;default\&quot;) {'],[0,'            defaultSymbolizer = this.styles[\&quot;default\&quot;].createSymbolizer(feature);'],[-1,'        }'],[0,'        return OpenLayers.Util.extend(defaultSymbolizer,'],[-1,'            this.styles[intent].createSymbolizer(feature));'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addUniqueValueRules'],[-1,'     * Convenience method to create comparison rules for unique values of a'],[-1,'     * property. The rules will be added to the style object for a specified'],[-1,'     * rendering intent. This method is a shortcut for creating something like'],[-1,'     * the \&quot;unique value legends\&quot; familiar from well known desktop GIS systems'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * renderIntent - {String} rendering intent to add the rules to'],[-1,'     * property     - {String} values of feature attributes to create the'],[-1,'     *                rules for'],[-1,'     * symbolizers  - {Object} Hash of symbolizers, keyed by the desired'],[-1,'     *                property values '],[-1,'     * context      - {Object} An optional object with properties that'],[-1,'     *                symbolizers\' property values should be evaluated'],[-1,'     *                against. If no context is specified, feature.attributes'],[-1,'     *                will be used'],[-1,'     *\/'],[-1,'    addUniqueValueRules: function(renderIntent, property, symbolizers, context) {'],[0,'        var rules = [];'],[0,'        for (var value in symbolizers) {'],[0,'            rules.push(new OpenLayers.Rule({'],[-1,'                symbolizer: symbolizers[value],'],[-1,'                context: context,'],[-1,'                filter: new OpenLayers.Filter.Comparison({'],[-1,'                    type: OpenLayers.Filter.Comparison.EQUAL_TO,'],[-1,'                    property: property,'],[-1,'                    value: value'],[-1,'                })'],[-1,'            }));'],[-1,'        }'],[0,'        this.styles[renderIntent].addRules(rules);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.StyleMap\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/Vector.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer.js'],[-1,' * @requires OpenLayers\/Renderer.js'],[-1,' * @requires OpenLayers\/StyleMap.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Console.js'],[-1,' * @requires OpenLayers\/Lang.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.Vector'],[-1,' * Instances of OpenLayers.Layer.Vector are used to render vector data from'],[-1,' *     a variety of sources. Create a new vector layer with the'],[-1,' *     &lt;OpenLayers.Layer.Vector&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.Vector = OpenLayers.Class(OpenLayers.Layer, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;}'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * layer.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Listeners will be called with a reference to an event object.  The'],[-1,'     *     properties of this event depends on exactly what happened.'],[-1,'     *'],[-1,'     * All event objects have at least the following properties:'],[-1,'     * object - {Object} A reference to layer.events.object.'],[-1,'     * element - {DOMElement} A reference to layer.events.element.'],[-1,'     *'],[-1,'     * Supported map event types (in addition to those from &lt;OpenLayers.Layer.events&gt;):'],[-1,'     * beforefeatureadded - Triggered before a feature is added.  Listeners'],[-1,'     *      will receive an object with a *feature* property referencing the'],[-1,'     *      feature to be added.  To stop the feature from being added, a'],[-1,'     *      listener should return false.'],[-1,'     * beforefeaturesadded - Triggered before an array of features is added.'],[-1,'     *      Listeners will receive an object with a *features* property'],[-1,'     *      referencing the feature to be added. To stop the features from'],[-1,'     *      being added, a listener should return false.'],[-1,'     * featureadded - Triggered after a feature is added.  The event'],[-1,'     *      object passed to listeners will have a *feature* property with a'],[-1,'     *      reference to the added feature.'],[-1,'     * featuresadded - Triggered after features are added.  The event'],[-1,'     *      object passed to listeners will have a *features* property with a'],[-1,'     *      reference to an array of added features.'],[-1,'     * beforefeatureremoved - Triggered before a feature is removed. Listeners'],[-1,'     *      will receive an object with a *feature* property referencing the'],[-1,'     *      feature to be removed.'],[-1,'     * beforefeaturesremoved - Triggered before multiple features are removed. '],[-1,'     *      Listeners will receive an object with a *features* property'],[-1,'     *      referencing the features to be removed.'],[-1,'     * featureremoved - Triggerd after a feature is removed. The event'],[-1,'     *      object passed to listeners will have a *feature* property with a'],[-1,'     *      reference to the removed feature.'],[-1,'     * featuresremoved - Triggered after features are removed. The event'],[-1,'     *      object passed to listeners will have a *features* property with a'],[-1,'     *      reference to an array of removed features.'],[-1,'     * beforefeatureselected - Triggered before a feature is selected.  Listeners'],[-1,'     *      will receive an object with a *feature* property referencing the'],[-1,'     *      feature to be selected. To stop the feature from being selectd, a'],[-1,'     *      listener should return false.'],[-1,'     * featureselected - Triggered after a feature is selected.  Listeners'],[-1,'     *      will receive an object with a *feature* property referencing the'],[-1,'     *      selected feature.'],[-1,'     * featureunselected - Triggered after a feature is unselected.'],[-1,'     *      Listeners will receive an object with a *feature* property'],[-1,'     *      referencing the unselected feature.'],[-1,'     * beforefeaturemodified - Triggered when a feature is selected to '],[-1,'     *      be modified.  Listeners will receive an object with a *feature* '],[-1,'     *      property referencing the selected feature.'],[-1,'     * featuremodified - Triggered when a feature has been modified.'],[-1,'     *      Listeners will receive an object with a *feature* property referencing '],[-1,'     *      the modified feature.'],[-1,'     * afterfeaturemodified - Triggered when a feature is finished being modified.'],[-1,'     *      Listeners will receive an object with a *feature* property referencing '],[-1,'     *      the modified feature.'],[-1,'     * vertexmodified - Triggered when a vertex within any feature geometry'],[-1,'     *      has been modified.  Listeners will receive an object with a'],[-1,'     *      *feature* property referencing the modified feature, a *vertex*'],[-1,'     *      property referencing the vertex modified (always a point geometry),'],[-1,'     *      and a *pixel* property referencing the pixel location of the'],[-1,'     *      modification.'],[-1,'     * vertexremoved - Triggered when a vertex within any feature geometry'],[-1,'     *      has been deleted.  Listeners will receive an object with a'],[-1,'     *      *feature* property referencing the modified feature, a *vertex*'],[-1,'     *      property referencing the vertex modified (always a point geometry),'],[-1,'     *      and a *pixel* property referencing the pixel location of the'],[-1,'     *      removal.'],[-1,'     * sketchstarted - Triggered when a feature sketch bound for this layer'],[-1,'     *      is started.  Listeners will receive an object with a *feature*'],[-1,'     *      property referencing the new sketch feature and a *vertex* property'],[-1,'     *      referencing the creation point.'],[-1,'     * sketchmodified - Triggered when a feature sketch bound for this layer'],[-1,'     *      is modified.  Listeners will receive an object with a *vertex*'],[-1,'     *      property referencing the modified vertex and a *feature* property'],[-1,'     *      referencing the sketch feature.'],[-1,'     * sketchcomplete - Triggered when a feature sketch bound for this layer'],[-1,'     *      is complete.  Listeners will receive an object with a *feature*'],[-1,'     *      property referencing the sketch feature.  By returning false, a'],[-1,'     *      listener can stop the sketch feature from being added to the layer.'],[-1,'     * refresh - Triggered when something wants a strategy to ask the protocol'],[-1,'     *      for a new set of features.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * {Boolean} The layer is a base layer.  Default is false.  Set this property'],[-1,'     * in the layer options.'],[-1,'     *\/'],[-1,'    isBaseLayer: false,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: isFixed'],[-1,'     * {Boolean} Whether the layer remains in one place while dragging the'],[-1,'     * map. Note that setting this to true will move the layer to the bottom'],[-1,'     * of the layer stack.'],[-1,'     *\/'],[-1,'    isFixed: false,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: features'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} '],[-1,'     *\/'],[-1,'    features: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: filter'],[-1,'     * {&lt;OpenLayers.Filter&gt;} The filter set in this layer,'],[-1,'     *     a strategy launching read requests can combined'],[-1,'     *     this filter with its own filter.'],[-1,'     *\/'],[-1,'    filter: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: selectedFeatures'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} '],[-1,'     *\/'],[-1,'    selectedFeatures: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: unrenderedFeatures'],[-1,'     * {Object} hash of features, keyed by feature.id, that the renderer'],[-1,'     *     failed to draw'],[-1,'     *\/'],[-1,'    unrenderedFeatures: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: reportError'],[-1,'     * {Boolean} report friendly error message when loading of renderer'],[-1,'     * fails.'],[-1,'     *\/'],[-1,'    reportError: true, '],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: style'],[-1,'     * {Object} Default style for the layer'],[-1,'     *\/'],[-1,'    style: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: styleMap'],[-1,'     * {&lt;OpenLayers.StyleMap&gt;}'],[-1,'     *\/'],[-1,'    styleMap: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: strategies'],[-1,'     * {Array(&lt;OpenLayers.Strategy&gt;})} Optional list of strategies for the layer.'],[-1,'     *\/'],[-1,'    strategies: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: protocol'],[-1,'     * {&lt;OpenLayers.Protocol&gt;} Optional protocol for the layer.'],[-1,'     *\/'],[-1,'    protocol: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: renderers'],[-1,'     * {Array(String)} List of supported Renderer classes. Add to this list to'],[-1,'     * add support for additional renderers. This list is ordered:'],[-1,'     * the first renderer which returns true for the  \'supported()\''],[-1,'     * method will be used, if not defined in the \'renderer\' option.'],[-1,'     *\/'],[-1,'    renderers: [\'SVG\', \'VML\', \'Canvas\'],'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: renderer'],[-1,'     * {&lt;OpenLayers.Renderer&gt;}'],[-1,'     *\/'],[-1,'    renderer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: rendererOptions'],[-1,'     * {Object} Options for the renderer. See {&lt;OpenLayers.Renderer&gt;} for'],[-1,'     *     supported options.'],[-1,'     *\/'],[-1,'    rendererOptions: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: geometryType'],[-1,'     * {String} geometryType allows you to limit the types of geometries this'],[-1,'     * layer supports. This should be set to something like'],[-1,'     * \&quot;OpenLayers.Geometry.Point\&quot; to limit types.'],[-1,'     *\/'],[-1,'    geometryType: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: drawn'],[-1,'     * {Boolean} Whether the Vector Layer features have been drawn yet.'],[-1,'     *\/'],[-1,'    drawn: false,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: ratio'],[-1,'     * {Float} This specifies the ratio of the size of the visiblity of the Vector Layer features to the size of the map.'],[-1,'     *\/   '],[-1,'    ratio: 1,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.Vector'],[-1,'     * Create a new vector layer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} A name for the layer'],[-1,'     * options - {Object} Optional object with non-default properties to set on'],[-1,'     *           the layer.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;} A new vector layer'],[-1,'     *\/'],[-1,'    initialize: function(name, options) {'],[0,'        OpenLayers.Layer.prototype.initialize.apply(this, arguments);'],[-1,''],[-1,'        \/\/ allow user-set renderer, otherwise assign one'],[0,'        if (!this.renderer || !this.renderer.supported()) {  '],[0,'            this.assignRenderer();'],[-1,'        }'],[-1,''],[-1,'        \/\/ if no valid renderer found, display error'],[0,'        if (!this.renderer || !this.renderer.supported()) {'],[0,'            this.renderer = null;'],[0,'            this.displayError();'],[-1,'        } '],[-1,''],[0,'        if (!this.styleMap) {'],[0,'            this.styleMap = new OpenLayers.StyleMap();'],[-1,'        }'],[-1,''],[0,'        this.features = [];'],[0,'        this.selectedFeatures = [];'],[0,'        this.unrenderedFeatures = {};'],[-1,'        '],[-1,'        \/\/ Allow for custom layer behavior'],[0,'        if(this.strategies){'],[0,'            for(var i=0, len=this.strategies.length; i&lt;len; i++) {'],[0,'                this.strategies[i].setLayer(this);'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Destroy this layer'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if (this.strategies) {'],[0,'            var strategy, i, len;'],[0,'            for(i=0, len=this.strategies.length; i&lt;len; i++) {'],[0,'                strategy = this.strategies[i];'],[0,'                if(strategy.autoDestroy) {'],[0,'                    strategy.destroy();'],[-1,'                }'],[-1,'            }'],[0,'            this.strategies = null;'],[-1,'        }'],[0,'        if (this.protocol) {'],[0,'            if(this.protocol.autoDestroy) {'],[0,'                this.protocol.destroy();'],[-1,'            }'],[0,'            this.protocol = null;'],[-1,'        }'],[0,'        this.destroyFeatures();'],[0,'        this.features = null;'],[0,'        this.selectedFeatures = null;'],[0,'        this.unrenderedFeatures = null;'],[0,'        if (this.renderer) {'],[0,'            this.renderer.destroy();'],[-1,'        }'],[0,'        this.renderer = null;'],[0,'        this.geometryType = null;'],[0,'        this.drawn = null;'],[0,'        OpenLayers.Layer.prototype.destroy.apply(this, arguments);  '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clone'],[-1,'     * Create a clone of this layer.'],[-1,'     * '],[-1,'     * Note: Features of the layer are also cloned.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;} An exact clone of this layer'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[-1,'        '],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.Vector(this.name, this.getOptions());'],[-1,'        }'],[-1,''],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.prototype.clone.apply(this, [obj]);'],[-1,''],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[0,'        var features = this.features;'],[0,'        var len = features.length;'],[0,'        var clonedFeatures = new Array(len);'],[0,'        for(var i=0; i&lt;len; ++i) {'],[0,'            clonedFeatures[i] = features[i].clone();'],[-1,'        }'],[0,'        obj.features = clonedFeatures;'],[-1,''],[0,'        return obj;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: refresh'],[-1,'     * Ask the layer to request features again and redraw them.  Triggers'],[-1,'     *     the refresh event if the layer is in range and visible.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object} Optional object with properties for any listener of'],[-1,'     *     the refresh event.'],[-1,'     *\/'],[-1,'    refresh: function(obj) {'],[0,'        if(this.calculateInRange() &amp;&amp; this.visibility) {'],[0,'            this.events.triggerEvent(\&quot;refresh\&quot;, obj);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: assignRenderer'],[-1,'     * Iterates through the available renderer implementations and selects '],[-1,'     * and assigns the first one whose \&quot;supported()\&quot; function returns true.'],[-1,'     *\/    '],[-1,'    assignRenderer: function()  {'],[0,'        for (var i=0, len=this.renderers.length; i&lt;len; i++) {'],[0,'            var rendererClass = this.renderers[i];'],[0,'            var renderer = (typeof rendererClass == \&quot;function\&quot;) ?'],[-1,'                rendererClass :'],[-1,'                OpenLayers.Renderer[rendererClass];'],[0,'            if (renderer &amp;&amp; renderer.prototype.supported()) {'],[0,'                this.renderer = new renderer(this.div, this.rendererOptions);'],[0,'                break;'],[-1,'            }  '],[-1,'        }  '],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: displayError '],[-1,'     * Let the user know their browser isn\'t supported.'],[-1,'     *\/'],[-1,'    displayError: function() {'],[0,'        if (this.reportError) {'],[0,'            OpenLayers.Console.userError(OpenLayers.i18n(\&quot;browserNotSupported\&quot;, '],[-1,'                                     {renderers: this. renderers.join(\'\\n\')}));'],[-1,'        }    '],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: setMap'],[-1,'     * The layer has been added to the map. '],[-1,'     * '],[-1,'     * If there is no renderer set, the layer can\'t be used. Remove it.'],[-1,'     * Otherwise, give the renderer a reference to the map and set its size.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} '],[-1,'     *\/'],[-1,'    setMap: function(map) {        '],[0,'        OpenLayers.Layer.prototype.setMap.apply(this, arguments);'],[-1,''],[0,'        if (!this.renderer) {'],[0,'            this.map.removeLayer(this);'],[-1,'        } else {'],[0,'            this.renderer.map = this.map;'],[-1,''],[0,'            var newSize = this.map.getSize();'],[0,'            newSize.w = newSize.w * this.ratio;'],[0,'            newSize.h = newSize.h * this.ratio;'],[0,'            this.renderer.setSize(newSize);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: afterAdd'],[-1,'     * Called at the end of the map.addLayer sequence.  At this point, the map'],[-1,'     *     will have a base layer.  Any autoActivate strategies will be'],[-1,'     *     activated here.'],[-1,'     *\/'],[-1,'    afterAdd: function() {'],[0,'        if(this.strategies) {'],[0,'            var strategy, i, len;'],[0,'            for(i=0, len=this.strategies.length; i&lt;len; i++) {'],[0,'                strategy = this.strategies[i];'],[0,'                if(strategy.autoActivate) {'],[0,'                    strategy.activate();'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: removeMap'],[-1,'     * The layer has been removed from the map.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    removeMap: function(map) {'],[0,'        this.drawn = false;'],[0,'        if(this.strategies) {'],[0,'            var strategy, i, len;'],[0,'            for(i=0, len=this.strategies.length; i&lt;len; i++) {'],[0,'                strategy = this.strategies[i];'],[0,'                if(strategy.autoActivate) {'],[0,'                    strategy.deactivate();'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onMapResize'],[-1,'     * Notify the renderer of the change in size. '],[-1,'     * '],[-1,'     *\/'],[-1,'    onMapResize: function() {'],[0,'        OpenLayers.Layer.prototype.onMapResize.apply(this, arguments);'],[-1,'        '],[0,'        var newSize = this.map.getSize();'],[0,'        newSize.w = newSize.w * this.ratio;'],[0,'        newSize.h = newSize.h * this.ratio;'],[0,'        this.renderer.setSize(newSize);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     *  Reset the vector layer\'s div so that it once again is lined up with '],[-1,'     *   the map. Notify the renderer of the change of extent, and in the'],[-1,'     *   case of a change of zoom level (resolution), have the '],[-1,'     *   renderer redraw features.'],[-1,'     * '],[-1,'     *  If the layer has not yet been drawn, cycle through the layer\'s '],[-1,'     *   features and draw each one.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} '],[-1,'     * zoomChanged - {Boolean} '],[-1,'     * dragging - {Boolean} '],[-1,'     *\/'],[-1,'    moveTo: function(bounds, zoomChanged, dragging) {'],[0,'        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);'],[-1,'        '],[0,'        var coordSysUnchanged = true;'],[0,'        if (!dragging) {'],[0,'            this.renderer.root.style.visibility = \'hidden\';'],[-1,''],[0,'            var viewSize = this.map.getSize(),'],[-1,'                viewWidth = viewSize.w,'],[-1,'                viewHeight = viewSize.h,'],[-1,'                offsetLeft = (viewWidth \/ 2 * this.ratio) - viewWidth \/ 2,'],[-1,'                offsetTop = (viewHeight \/ 2 * this.ratio) - viewHeight \/ 2;'],[0,'            offsetLeft += this.map.layerContainerOriginPx.x;'],[0,'            offsetLeft = -Math.round(offsetLeft);'],[0,'            offsetTop += this.map.layerContainerOriginPx.y;'],[0,'            offsetTop = -Math.round(offsetTop);'],[-1,''],[0,'            this.div.style.left = offsetLeft + \'px\';'],[0,'            this.div.style.top = offsetTop + \'px\';'],[-1,''],[0,'            var extent = this.map.getExtent().scale(this.ratio);'],[0,'            coordSysUnchanged = this.renderer.setExtent(extent, zoomChanged);'],[-1,''],[0,'            this.renderer.root.style.visibility = \'visible\';'],[-1,''],[-1,'            \/\/ Force a reflow on gecko based browsers to prevent jump\/flicker.'],[-1,'            \/\/ This seems to happen on only certain configurations; it was originally'],[-1,'            \/\/ noticed in FF 2.0 and Linux.'],[0,'            if (OpenLayers.IS_GECKO === true) {'],[0,'                this.div.scrollLeft = this.div.scrollLeft;'],[-1,'            }'],[-1,'            '],[0,'            if (!zoomChanged &amp;&amp; coordSysUnchanged) {'],[0,'                for (var i in this.unrenderedFeatures) {'],[0,'                    var feature = this.unrenderedFeatures[i];'],[0,'                    this.drawFeature(feature);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        if (!this.drawn || zoomChanged || !coordSysUnchanged) {'],[0,'            this.drawn = true;'],[0,'            var feature;'],[0,'            for(var i=0, len=this.features.length; i&lt;len; i++) {'],[0,'                this.renderer.locked = (i !== (len - 1));'],[0,'                feature = this.features[i];'],[0,'                this.drawFeature(feature);'],[-1,'            }'],[-1,'        }    '],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: display'],[-1,'     * Hide or show the Layer'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * display - {Boolean}'],[-1,'     *\/'],[-1,'    display: function(display) {'],[0,'        OpenLayers.Layer.prototype.display.apply(this, arguments);'],[-1,'        \/\/ we need to set the display style of the root in case it is attached'],[-1,'        \/\/ to a foreign layer'],[0,'        var currentDisplay = this.div.style.display;'],[0,'        if(currentDisplay != this.renderer.root.style.display) {'],[0,'            this.renderer.root.style.display = currentDisplay;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: addFeatures'],[-1,'     * Add Features to the layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} '],[-1,'     * options - {Object}'],[-1,'     *\/'],[-1,'    addFeatures: function(features, options) {'],[0,'        if (!(OpenLayers.Util.isArray(features))) {'],[0,'            features = [features];'],[-1,'        }'],[-1,'        '],[0,'        var notify = !options || !options.silent;'],[0,'        if(notify) {'],[0,'            var event = {features: features};'],[0,'            var ret = this.events.triggerEvent(\&quot;beforefeaturesadded\&quot;, event);'],[0,'            if(ret === false) {'],[0,'                return;'],[-1,'            }'],[0,'            features = event.features;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ Track successfully added features for featuresadded event, since'],[-1,'        \/\/ beforefeatureadded can veto single features.'],[0,'        var featuresAdded = [];'],[0,'        for (var i=0, len=features.length; i&lt;len; i++) {'],[0,'            if (i != (features.length - 1)) {'],[0,'                this.renderer.locked = true;'],[-1,'            } else {'],[0,'                this.renderer.locked = false;'],[-1,'            }    '],[0,'            var feature = features[i];'],[-1,'            '],[0,'            if (this.geometryType &amp;&amp;'],[-1,'              !(feature.geometry instanceof this.geometryType)) {'],[0,'                throw new TypeError(\'addFeatures: component should be an \' +'],[-1,'                                    this.geometryType.prototype.CLASS_NAME);'],[-1,'              }'],[-1,''],[-1,'            \/\/give feature reference to its layer'],[0,'            feature.layer = this;'],[-1,''],[0,'            if (!feature.style &amp;&amp; this.style) {'],[0,'                feature.style = OpenLayers.Util.extend({}, this.style);'],[-1,'            }'],[-1,''],[0,'            if (notify) {'],[0,'                if(this.events.triggerEvent(\&quot;beforefeatureadded\&quot;,'],[-1,'                                            {feature: feature}) === false) {'],[0,'                    continue;'],[-1,'                }'],[0,'                this.preFeatureInsert(feature);'],[-1,'            }'],[-1,''],[0,'            featuresAdded.push(feature);'],[0,'            this.features.push(feature);'],[0,'            this.drawFeature(feature);'],[-1,'            '],[0,'            if (notify) {'],[0,'                this.events.triggerEvent(\&quot;featureadded\&quot;, {'],[-1,'                    feature: feature'],[-1,'                });'],[0,'                this.onFeatureInsert(feature);'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        if(notify) {'],[0,'            this.events.triggerEvent(\&quot;featuresadded\&quot;, {features: featuresAdded});'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: removeFeatures'],[-1,'     * Remove features from the layer.  This erases any drawn features and'],[-1,'     *     removes them from the layer\'s control.  The beforefeatureremoved'],[-1,'     *     and featureremoved events will be triggered for each feature.  The'],[-1,'     *     featuresremoved event will be triggered after all features have'],[-1,'     *     been removed.  To supress event triggering, use the silent option.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} List of features to be'],[-1,'     *     removed.'],[-1,'     * options - {Object} Optional properties for changing behavior of the'],[-1,'     *     removal.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * silent - {Boolean} Supress event triggering.  Default is false.'],[-1,'     *\/'],[-1,'    removeFeatures: function(features, options) {'],[0,'        if(!features || features.length === 0) {'],[0,'            return;'],[-1,'        }'],[0,'        if (features === this.features) {'],[0,'            return this.removeAllFeatures(options);'],[-1,'        }'],[0,'        if (!(OpenLayers.Util.isArray(features))) {'],[0,'            features = [features];'],[-1,'        }'],[0,'        if (features === this.selectedFeatures) {'],[0,'            features = features.slice();'],[-1,'        }'],[-1,''],[0,'        var notify = !options || !options.silent;'],[-1,'        '],[0,'        if (notify) {'],[0,'            this.events.triggerEvent('],[-1,'                \&quot;beforefeaturesremoved\&quot;, {features: features}'],[-1,'            );'],[-1,'        }'],[-1,''],[0,'        for (var i = features.length - 1; i &gt;= 0; i--) {'],[-1,'            \/\/ We remain locked so long as we\'re not at 0'],[-1,'            \/\/ and the \'next\' feature has a geometry. We do the geometry check'],[-1,'            \/\/ because if all the features after the current one are \'null\', we'],[-1,'            \/\/ won\'t call eraseGeometry, so we break the \'renderer functions'],[-1,'            \/\/ will always be called with locked=false *last*\' rule. The end result'],[-1,'            \/\/ is a possible gratiutious unlocking to save a loop through the rest '],[-1,'            \/\/ of the list checking the remaining features every time. So long as'],[-1,'            \/\/ null geoms are rare, this is probably okay.    '],[0,'            if (i != 0 &amp;&amp; features[i-1].geometry) {'],[0,'                this.renderer.locked = true;'],[-1,'            } else {'],[0,'                this.renderer.locked = false;'],[-1,'            }'],[-1,'    '],[0,'            var feature = features[i];'],[0,'            delete this.unrenderedFeatures[feature.id];'],[-1,''],[0,'            if (notify) {'],[0,'                this.events.triggerEvent(\&quot;beforefeatureremoved\&quot;, {'],[-1,'                    feature: feature'],[-1,'                });'],[-1,'            }'],[-1,''],[0,'            this.features = OpenLayers.Util.removeItem(this.features, feature);'],[-1,'            \/\/ feature has no layer at this point'],[0,'            feature.layer = null;'],[-1,''],[0,'            if (feature.geometry) {'],[0,'                this.renderer.eraseFeatures(feature);'],[-1,'            }'],[-1,'                    '],[-1,'            \/\/in the case that this feature is one of the selected features, '],[-1,'            \/\/ remove it from that array as well.'],[0,'            if (OpenLayers.Util.indexOf(this.selectedFeatures, feature) != -1){'],[0,'                OpenLayers.Util.removeItem(this.selectedFeatures, feature);'],[-1,'            }'],[-1,''],[0,'            if (notify) {'],[0,'                this.events.triggerEvent(\&quot;featureremoved\&quot;, {'],[-1,'                    feature: feature'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        if (notify) {'],[0,'            this.events.triggerEvent(\&quot;featuresremoved\&quot;, {features: features});'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: removeAllFeatures'],[-1,'     * Remove all features from the layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional properties for changing behavior of the'],[-1,'     *     removal.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * silent - {Boolean} Supress event triggering.  Default is false.'],[-1,'     *\/'],[-1,'    removeAllFeatures: function(options) {'],[0,'        var notify = !options || !options.silent;'],[0,'        var features = this.features;'],[0,'        if (notify) {'],[0,'            this.events.triggerEvent('],[-1,'                \&quot;beforefeaturesremoved\&quot;, {features: features}'],[-1,'            );'],[-1,'        }'],[0,'        var feature;'],[0,'        for (var i = features.length-1; i &gt;= 0; i--) {'],[0,'            feature = features[i];'],[0,'            if (notify) {'],[0,'                this.events.triggerEvent(\&quot;beforefeatureremoved\&quot;, {'],[-1,'                    feature: feature'],[-1,'                });'],[-1,'            }'],[0,'            feature.layer = null;'],[0,'            if (notify) {'],[0,'                this.events.triggerEvent(\&quot;featureremoved\&quot;, {'],[-1,'                    feature: feature'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[0,'        this.renderer.clear();'],[0,'        this.features = [];'],[0,'        this.unrenderedFeatures = {};'],[0,'        this.selectedFeatures = [];'],[0,'        if (notify) {'],[0,'            this.events.triggerEvent(\&quot;featuresremoved\&quot;, {features: features});'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroyFeatures'],[-1,'     * Erase and destroy features on the layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} An optional array of'],[-1,'     *     features to destroy.  If not supplied, all features on the layer'],[-1,'     *     will be destroyed.'],[-1,'     * options - {Object}'],[-1,'     *\/'],[-1,'    destroyFeatures: function(features, options) {'],[0,'        var all = (features == undefined); \/\/ evaluates to true if'],[-1,'                                           \/\/ features is null'],[0,'        if(all) {'],[0,'            features = this.features;'],[-1,'        }'],[0,'        if(features) {'],[0,'            this.removeFeatures(features, options);'],[0,'            for(var i=features.length-1; i&gt;=0; i--) {'],[0,'                features[i].destroy();'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: drawFeature'],[-1,'     * Draw (or redraw) a feature on the layer.  If the optional style argument'],[-1,'     * is included, this style will be used.  If no style is included, the'],[-1,'     * feature\'s style will be used.  If the feature doesn\'t have a style,'],[-1,'     * the layer\'s style will be used.'],[-1,'     * '],[-1,'     * This function is not designed to be used when adding features to '],[-1,'     * the layer (use addFeatures instead). It is meant to be used when'],[-1,'     * the style of a feature has changed, or in some other way needs to '],[-1,'     * visually updated *after* it has already been added to a layer. You'],[-1,'     * must add the feature to the layer for most layer-related events to '],[-1,'     * happen.'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     * style - {String | Object} Named render intent or full symbolizer object.'],[-1,'     *\/'],[-1,'    drawFeature: function(feature, style) {'],[-1,'        \/\/ don\'t try to draw the feature with the renderer if the layer is not '],[-1,'        \/\/ drawn itself'],[0,'        if (!this.drawn) {'],[0,'            return;'],[-1,'        }'],[0,'        if (typeof style != \&quot;object\&quot;) {'],[0,'            if(!style &amp;&amp; feature.state === OpenLayers.State.DELETE) {'],[0,'                style = \&quot;delete\&quot;;'],[-1,'            }'],[0,'            var renderIntent = style || feature.renderIntent;'],[0,'            style = feature.style || this.style;'],[0,'            if (!style) {'],[0,'                style = this.styleMap.createSymbolizer(feature, renderIntent);'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        var drawn = this.renderer.drawFeature(feature, style);'],[-1,'        \/\/TODO remove the check for null when we get rid of Renderer.SVG'],[0,'        if (drawn === false || drawn === null) {'],[0,'            this.unrenderedFeatures[feature.id] = feature;'],[-1,'        } else {'],[0,'            delete this.unrenderedFeatures[feature.id];'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: eraseFeatures'],[-1,'     * Erase features from the layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} '],[-1,'     *\/'],[-1,'    eraseFeatures: function(features) {'],[0,'        this.renderer.eraseFeatures(features);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getFeatureFromEvent'],[-1,'     * Given an event, return a feature if the event occurred over one.'],[-1,'     * Otherwise, return null.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} A feature if one was under the event.'],[-1,'     *\/'],[-1,'    getFeatureFromEvent: function(evt) {'],[0,'        if (!this.renderer) {'],[0,'            throw new Error(\'getFeatureFromEvent called on layer with no \' +'],[-1,'                            \'renderer. This usually means you destroyed a \' +'],[-1,'                            \'layer, but not some handler which is associated \' +'],[-1,'                            \'with it.\');'],[-1,'        }'],[0,'        var feature = null;'],[0,'        var featureId = this.renderer.getFeatureIdFromEvent(evt);'],[0,'        if (featureId) {'],[0,'            if (typeof featureId === \&quot;string\&quot;) {'],[0,'                feature = this.getFeatureById(featureId);'],[-1,'            } else {'],[0,'                feature = featureId;'],[-1,'            }'],[-1,'        }'],[0,'        return feature;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getFeatureBy'],[-1,'     * Given a property value, return the feature if it exists in the features array'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * property - {String}'],[-1,'     * value - {String}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} A feature corresponding to the given'],[-1,'     * property value or null if there is no such feature.'],[-1,'     *\/'],[-1,'    getFeatureBy: function(property, value) {'],[-1,'        \/\/TBD - would it be more efficient to use a hash for this.features?'],[0,'        var feature = null;'],[0,'        for(var i=0, len=this.features.length; i&lt;len; ++i) {'],[0,'            if(this.features[i][property] == value) {'],[0,'                feature = this.features[i];'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        return feature;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getFeatureById'],[-1,'     * Given a feature id, return the feature if it exists in the features array'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * featureId - {String}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} A feature corresponding to the given'],[-1,'     * featureId or null if there is no such feature.'],[-1,'     *\/'],[-1,'    getFeatureById: function(featureId) {'],[0,'        return this.getFeatureBy(\'id\', featureId);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getFeatureByFid'],[-1,'     * Given a feature fid, return the feature if it exists in the features array'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * featureFid - {String}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} A feature corresponding to the given'],[-1,'     * featureFid or null if there is no such feature.'],[-1,'     *\/'],[-1,'    getFeatureByFid: function(featureFid) {'],[0,'        return this.getFeatureBy(\'fid\', featureFid);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getFeaturesByAttribute'],[-1,'     * Returns an array of features that have the given attribute key set to the'],[-1,'     * given value. Comparison of attribute values takes care of datatypes, e.g.'],[-1,'     * the string \'1234\' is not equal to the number 1234.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * attrName - {String}'],[-1,'     * attrValue - {Mixed}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * Array({&lt;OpenLayers.Feature.Vector&gt;}) An array of features that have the '],[-1,'     * passed named attribute set to the given value.'],[-1,'     *\/'],[-1,'    getFeaturesByAttribute: function(attrName, attrValue) {'],[0,'        var i,'],[-1,'            feature,    '],[-1,'            len = this.features.length,'],[-1,'            foundFeatures = [];'],[0,'        for(i = 0; i &lt; len; i++) {            '],[0,'            feature = this.features[i];'],[0,'            if(feature &amp;&amp; feature.attributes) {'],[0,'                if (feature.attributes[attrName] === attrValue) {'],[0,'                    foundFeatures.push(feature);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return foundFeatures;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Unselect the selected features'],[-1,'     * i.e. clears the featureSelection array'],[-1,'     * change the style back'],[-1,'    clearSelection: function() {'],[-1,''],[-1,'       var vectorLayer = this.map.vectorLayer;'],[-1,'        for (var i = 0; i &lt; this.map.featureSelection.length; i++) {'],[-1,'            var featureSelection = this.map.featureSelection[i];'],[-1,'            vectorLayer.drawFeature(featureSelection, vectorLayer.style);'],[-1,'        }'],[-1,'        this.map.featureSelection = [];'],[-1,'    },'],[-1,'     *\/'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: onFeatureInsert'],[-1,'     * method called after a feature is inserted.'],[-1,'     * Does nothing by default. Override this if you'],[-1,'     * need to do something on feature updates.'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *\/'],[-1,'    onFeatureInsert: function(feature) {'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: preFeatureInsert'],[-1,'     * method called before a feature is inserted.'],[-1,'     * Does nothing by default. Override this if you'],[-1,'     * need to do something when features are first added to the'],[-1,'     * layer, but before they are drawn, such as adjust the style.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *\/'],[-1,'    preFeatureInsert: function(feature) {'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: getDataExtent'],[-1,'     * Calculates the max extent which includes all of the features.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} or null if the layer has no features with'],[-1,'     * geometries.'],[-1,'     *\/'],[-1,'    getDataExtent: function () {'],[0,'        var maxExtent = null;'],[0,'        var features = this.features;'],[0,'        if(features &amp;&amp; (features.length &gt; 0)) {'],[0,'            var geometry = null;'],[0,'            for(var i=0, len=features.length; i&lt;len; i++) {'],[0,'                geometry = features[i].geometry;'],[0,'                if (geometry) {'],[0,'                    if (maxExtent === null) {'],[0,'                        maxExtent = new OpenLayers.Bounds();'],[-1,'                    }'],[0,'                    maxExtent.extend(geometry.getBounds());'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return maxExtent;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.Vector\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/PointTrack.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Vector.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.PointTrack'],[-1,' * Vector layer to display ordered point features as a line, creating one'],[-1,' * LineString feature for each pair of two points.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Vector&gt; '],[-1,' *\/'],[1,'OpenLayers.Layer.PointTrack = OpenLayers.Class(OpenLayers.Layer.Vector, {'],[-1,'  '],[-1,'    \/**'],[-1,'     * APIProperty: dataFrom'],[-1,'     *     {&lt;OpenLayers.Layer.PointTrack.TARGET_NODE&gt;} or'],[-1,'     *     {&lt;OpenLayers.Layer.PointTrack.SOURCE_NODE&gt;} optional. If the lines'],[-1,'     *     should get the data\/attributes from one of the two points it is'],[-1,'     *     composed of, which one should it be?'],[-1,'     *\/'],[-1,'    dataFrom: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: styleFrom'],[-1,'     *     {&lt;OpenLayers.Layer.PointTrack.TARGET_NODE&gt;} or'],[-1,'     *     {&lt;OpenLayers.Layer.PointTrack.SOURCE_NODE&gt;} optional. If the lines'],[-1,'     *     should get the style from one of the two points it is composed of,'],[-1,'     *     which one should it be?'],[-1,'     *\/'],[-1,'    styleFrom: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.PointTrack'],[-1,'     * Constructor for a new OpenLayers.PointTrack instance.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name     - {String} name of the layer'],[-1,'     * options  - {Object} Optional object with properties to tag onto the'],[-1,'     *            instance.'],[-1,'     *\/    '],[-1,'        '],[-1,'    \/**'],[-1,'     * APIMethod: addNodes'],[-1,'     * Adds point features that will be used to create lines from, using point'],[-1,'     * pairs. The first point of a pair will be the source node, the second'],[-1,'     * will be the target node.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * pointFeatures - {Array(&lt;OpenLayers.Feature&gt;)}'],[-1,'     * options - {Object}'],[-1,'     * '],[-1,'     * Supported options:'],[-1,'     * silent - {Boolean} true to suppress (before)feature(s)added events'],[-1,'     *\/'],[-1,'    addNodes: function(pointFeatures, options) {'],[0,'        if (pointFeatures.length &lt; 2) {'],[0,'            throw new Error(\&quot;At least two point features have to be added to \&quot; +'],[-1,'                            \&quot;create a line from\&quot;);'],[-1,'        }'],[-1,'        '],[0,'        var lines = new Array(pointFeatures.length-1);'],[-1,'        '],[0,'        var pointFeature, startPoint, endPoint;'],[0,'        for(var i=0, len=pointFeatures.length; i&lt;len; i++) {'],[0,'            pointFeature = pointFeatures[i];'],[0,'            endPoint = pointFeature.geometry;'],[-1,'            '],[0,'            if (!endPoint) {'],[0,'              var lonlat = pointFeature.lonlat;'],[0,'              endPoint = new OpenLayers.Geometry.Point(lonlat.lon, lonlat.lat);'],[0,'            } else if(endPoint.CLASS_NAME != \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'                throw new TypeError(\&quot;Only features with point geometries are supported.\&quot;);'],[-1,'            }'],[-1,'            '],[0,'            if(i &gt; 0) {'],[0,'                var attributes = (this.dataFrom != null) ?'],[-1,'                        (pointFeatures[i+this.dataFrom].data ||'],[-1,'                                pointFeatures[i+this.dataFrom].attributes) :'],[-1,'                        null;'],[0,'                var style = (this.styleFrom != null) ?'],[-1,'                        (pointFeatures[i+this.styleFrom].style) :'],[-1,'                        null;'],[0,'                var line = new OpenLayers.Geometry.LineString([startPoint,'],[-1,'                        endPoint]);'],[-1,'                        '],[0,'                lines[i-1] = new OpenLayers.Feature.Vector(line, attributes,'],[-1,'                    style);'],[-1,'            }'],[-1,'            '],[0,'            startPoint = endPoint;'],[-1,'        }'],[-1,''],[0,'        this.addFeatures(lines, options);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.PointTrack\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Layer.PointTrack.SOURCE_NODE'],[-1,' * {Number} value for &lt;OpenLayers.Layer.PointTrack.dataFrom&gt; and'],[-1,' * &lt;OpenLayers.Layer.PointTrack.styleFrom&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.PointTrack.SOURCE_NODE = -1;'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Layer.PointTrack.TARGET_NODE'],[-1,' * {Number} value for &lt;OpenLayers.Layer.PointTrack.dataFrom&gt; and'],[-1,' * &lt;OpenLayers.Layer.PointTrack.styleFrom&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.PointTrack.TARGET_NODE = 0;'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Layer.PointTrack.dataFrom'],[-1,' * {Object} with the following keys - *deprecated*'],[-1,' * - SOURCE_NODE: take data\/attributes from the source node of the line'],[-1,' * - TARGET_NODE: take data\/attributes from the target node of the line'],[-1,' *\/'],[1,'OpenLayers.Layer.PointTrack.dataFrom = {\'SOURCE_NODE\': -1, \'TARGET_NODE\': 0};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Protocol.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Protocol'],[-1,' * Abstract vector layer protocol class.  Not to be instantiated directly.  Use'],[-1,' *     one of the protocol subclasses instead.'],[-1,' *\/'],[1,'OpenLayers.Protocol = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: format'],[-1,'     * {&lt;OpenLayers.Format&gt;} The format used by this protocol.'],[-1,'     *\/'],[-1,'    format: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: options'],[-1,'     * {Object} Any options sent to the constructor.'],[-1,'     *\/'],[-1,'    options: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: autoDestroy'],[-1,'     * {Boolean} The creator of the protocol can set autoDestroy to false'],[-1,'     *      to fully control when the protocol is destroyed. Defaults to'],[-1,'     *      true.'],[-1,'     *\/'],[-1,'    autoDestroy: true,'],[-1,'   '],[-1,'    \/**'],[-1,'     * Property: defaultFilter'],[-1,'     * {&lt;OpenLayers.Filter&gt;} Optional default filter to read requests'],[-1,'     *\/'],[-1,'    defaultFilter: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Protocol'],[-1,'     * Abstract class for vector protocols.  Create instances of a subclass.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        options = options || {};'],[0,'        OpenLayers.Util.extend(this, options);'],[0,'        this.options = options;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mergeWithDefaultFilter'],[-1,'     * Merge filter passed to the read method with the default one'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * filter - {&lt;OpenLayers.Filter&gt;}'],[-1,'     *\/'],[-1,'    mergeWithDefaultFilter: function(filter) {'],[0,'        var merged;'],[0,'        if (filter &amp;&amp; this.defaultFilter) {'],[0,'            merged = new OpenLayers.Filter.Logical({'],[-1,'                type: OpenLayers.Filter.Logical.AND,'],[-1,'                filters: [this.defaultFilter, filter]'],[-1,'            });'],[-1,'        } else {'],[0,'            merged = filter || this.defaultFilter || undefined;'],[-1,'        }'],[0,'        return merged;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Clean up the protocol.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.options = null;'],[0,'        this.format = null;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Construct a request for reading new features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object for configuring the request.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} An &lt;OpenLayers.Protocol.Response&gt;'],[-1,'     * object, the same object will be passed to the callback function passed'],[-1,'     * if one exists in the options object.'],[-1,'     *\/'],[-1,'    read: function(options) {'],[0,'        options = options || {};'],[0,'        options.filter = this.mergeWithDefaultFilter(options.filter);'],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: create'],[-1,'     * Construct a request for writing newly created features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array({&lt;OpenLayers.Feature.Vector&gt;})} or'],[-1,'     *            {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     * options - {Object} Optional object for configuring the request.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} An &lt;OpenLayers.Protocol.Response&gt;'],[-1,'     * object, the same object will be passed to the callback function passed'],[-1,'     * if one exists in the options object.'],[-1,'     *\/'],[-1,'    create: function() {'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: update'],[-1,'     * Construct a request updating modified features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array({&lt;OpenLayers.Feature.Vector&gt;})} or'],[-1,'     *            {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     * options - {Object} Optional object for configuring the request.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} An &lt;OpenLayers.Protocol.Response&gt;'],[-1,'     * object, the same object will be passed to the callback function passed'],[-1,'     * if one exists in the options object.'],[-1,'     *\/'],[-1,'    update: function() {'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: delete'],[-1,'     * Construct a request deleting a removed feature.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     * options - {Object} Optional object for configuring the request.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} An &lt;OpenLayers.Protocol.Response&gt;'],[-1,'     * object, the same object will be passed to the callback function passed'],[-1,'     * if one exists in the options object.'],[-1,'     *\/'],[-1,'    \&quot;delete\&quot;: function() {'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: commit'],[-1,'     * Go over the features and for each take action'],[-1,'     * based on the feature state. Possible actions are create,'],[-1,'     * update and delete.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array({&lt;OpenLayers.Feature.Vector&gt;})}'],[-1,'     * options - {Object} Object whose possible keys are \&quot;create\&quot;, \&quot;update\&quot;,'],[-1,'     *      \&quot;delete\&quot;, \&quot;callback\&quot; and \&quot;scope\&quot;, the values referenced by the'],[-1,'     *      first three are objects as passed to the \&quot;create\&quot;, \&quot;update\&quot;, and'],[-1,'     *      \&quot;delete\&quot; methods, the value referenced by the \&quot;callback\&quot; key is'],[-1,'     *      a function which is called when the commit operation is complete'],[-1,'     *      using the scope referenced by the \&quot;scope\&quot; key.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array({&lt;OpenLayers.Protocol.Response&gt;})} An array of'],[-1,'     * &lt;OpenLayers.Protocol.Response&gt; objects.'],[-1,'     *\/'],[-1,'    commit: function() {'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: abort'],[-1,'     * Abort an ongoing request.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * response - {&lt;OpenLayers.Protocol.Response&gt;}'],[-1,'     *\/'],[-1,'    abort: function(response) {'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * Method: createCallback'],[-1,'     * Returns a function that applies the given public method with resp and'],[-1,'     *     options arguments.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * method - {Function} The method to be applied by the callback.'],[-1,'     * response - {&lt;OpenLayers.Protocol.Response&gt;} The protocol response object.'],[-1,'     * options - {Object} Options sent to the protocol method'],[-1,'     *\/'],[-1,'    createCallback: function(method, response, options) {'],[0,'        return OpenLayers.Function.bind(function() {'],[0,'            method.apply(this, [response, options]);'],[-1,'        }, this);'],[-1,'    },'],[-1,'   '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Protocol\&quot; '],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Protocol.Response'],[-1,' * Protocols return Response objects to their users.'],[-1,' *\/'],[1,'OpenLayers.Protocol.Response = OpenLayers.Class({'],[-1,'    \/**'],[-1,'     * Property: code'],[-1,'     * {Number} - OpenLayers.Protocol.Response.SUCCESS or'],[-1,'     *            OpenLayers.Protocol.Response.FAILURE'],[-1,'     *\/'],[-1,'    code: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: requestType'],[-1,'     * {String} The type of request this response corresponds to. Either'],[-1,'     *      \&quot;create\&quot;, \&quot;read\&quot;, \&quot;update\&quot; or \&quot;delete\&quot;.'],[-1,'     *\/'],[-1,'    requestType: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: last'],[-1,'     * {Boolean} - true if this is the last response expected in a commit,'],[-1,'     * false otherwise, defaults to true.'],[-1,'     *\/'],[-1,'    last: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: features'],[-1,'     * {Array({&lt;OpenLayers.Feature.Vector&gt;})} or {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     * The features returned in the response by the server. Depending on the '],[-1,'     * protocol\'s read payload, either features or data will be populated.'],[-1,'     *\/'],[-1,'    features: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: data'],[-1,'     * {Object}'],[-1,'     * The data returned in the response by the server. Depending on the '],[-1,'     * protocol\'s read payload, either features or data will be populated.'],[-1,'     *\/'],[-1,'    data: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: reqFeatures'],[-1,'     * {Array({&lt;OpenLayers.Feature.Vector&gt;})} or {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     * The features provided by the user and placed in the request by the'],[-1,'     *      protocol.'],[-1,'     *\/'],[-1,'    reqFeatures: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: priv'],[-1,'     *\/'],[-1,'    priv: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: error'],[-1,'     * {Object} The error object in case a service exception was encountered.'],[-1,'     *\/'],[-1,'    error: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Protocol.Response'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Util.extend(this, options);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: success'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} - true on success, false otherwise'],[-1,'     *\/'],[-1,'    success: function() {'],[0,'        return this.code &gt; 0;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Protocol.Response\&quot;'],[-1,'});'],[-1,''],[1,'OpenLayers.Protocol.Response.SUCCESS = 1;'],[1,'OpenLayers.Protocol.Response.FAILURE = 0;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Protocol\/WFS.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Protocol.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Protocol.WFS'],[-1,' * Used to create a versioned WFS protocol.  Default version is 1.0.0.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.Protocol&gt;} A WFS protocol of the given version.'],[-1,' *'],[-1,' * Example:'],[-1,' * (code)'],[-1,' *     var protocol = new OpenLayers.Protocol.WFS({'],[-1,' *         version: \&quot;1.1.0\&quot;,'],[-1,' *         url:  \&quot;http:\/\/demo.opengeo.org\/geoserver\/wfs\&quot;,'],[-1,' *         featureType: \&quot;tasmania_roads\&quot;,'],[-1,' *         featureNS: \&quot;http:\/\/www.openplans.org\/topp\&quot;,'],[-1,' *         geometryName: \&quot;the_geom\&quot;'],[-1,' *     });'],[-1,' * (end)'],[-1,' *'],[-1,' * See the protocols for specific WFS versions for more detail.'],[-1,' *\/'],[1,'OpenLayers.Protocol.WFS = function(options) {'],[0,'    options = OpenLayers.Util.applyDefaults('],[-1,'        options, OpenLayers.Protocol.WFS.DEFAULTS'],[-1,'    );'],[0,'    var cls = OpenLayers.Protocol.WFS[\&quot;v\&quot;+options.version.replace(\/\\.\/g, \&quot;_\&quot;)];'],[0,'    if(!cls) {'],[0,'        throw \&quot;Unsupported WFS version: \&quot; + options.version;'],[-1,'    }'],[0,'    return new cls(options);'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: fromWMSLayer'],[-1,' * Convenience function to create a WFS protocol from a WMS layer.  This makes'],[-1,' *     the assumption that a WFS requests can be issued at the same URL as'],[-1,' *     WMS requests and that a WFS featureType exists with the same name as the'],[-1,' *     WMS layer.'],[-1,' *     '],[-1,' * This function is designed to auto-configure &lt;url&gt;, &lt;featureType&gt;,'],[-1,' *     &lt;featurePrefix&gt; and &lt;srsName&gt; for WFS &lt;version&gt; 1.1.0. Note that'],[-1,' *     srsName matching with the WMS layer will not work with WFS 1.0.0.'],[-1,' * '],[-1,' * Parameters:'],[-1,' * layer - {&lt;OpenLayers.Layer.WMS&gt;} WMS layer that has a matching WFS'],[-1,' *     FeatureType at the same server url with the same typename.'],[-1,' * options - {Object} Default properties to be set on the protocol.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.Protocol.WFS&gt;}'],[-1,' *\/'],[1,'OpenLayers.Protocol.WFS.fromWMSLayer = function(layer, options) {'],[0,'    var typeName, featurePrefix;'],[0,'    var param = layer.params[\&quot;LAYERS\&quot;];'],[0,'    var parts = (OpenLayers.Util.isArray(param) ? param[0] : param).split(\&quot;:\&quot;);'],[0,'    if(parts.length &gt; 1) {'],[0,'        featurePrefix = parts[0];'],[-1,'    }'],[0,'    typeName = parts.pop();'],[0,'    var protocolOptions = {'],[-1,'        url: layer.url,'],[-1,'        featureType: typeName,'],[-1,'        featurePrefix: featurePrefix,'],[-1,'        srsName: layer.projection &amp;&amp; layer.projection.getCode() ||'],[-1,'                 layer.map &amp;&amp; layer.map.getProjectionObject().getCode(),'],[-1,'        version: \&quot;1.1.0\&quot;'],[-1,'    };'],[0,'    return new OpenLayers.Protocol.WFS(OpenLayers.Util.applyDefaults('],[-1,'        options, protocolOptions'],[-1,'    ));'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Protocol.WFS.DEFAULTS'],[-1,' *\/'],[1,'OpenLayers.Protocol.WFS.DEFAULTS = {'],[-1,'    \&quot;version\&quot;: \&quot;1.0.0\&quot;'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/Markers.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.Markers'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer&gt; '],[-1,' *\/'],[1,'OpenLayers.Layer.Markers = OpenLayers.Class(OpenLayers.Layer, {'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: isBaseLayer '],[-1,'     * {Boolean} Markers layer is never a base layer.  '],[-1,'     *\/'],[-1,'    isBaseLayer: false,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: markers '],[-1,'     * {Array(&lt;OpenLayers.Marker&gt;)} internal marker list '],[-1,'     *\/'],[-1,'    markers: null,'],[-1,''],[-1,''],[-1,'    \/** '],[-1,'     * Property: drawn '],[-1,'     * {Boolean} internal state of drawing. This is a workaround for the fact'],[-1,'     * that the map does not call moveTo with a zoomChanged when the map is'],[-1,'     * first starting up. This lets us catch the case where we have *never*'],[-1,'     * drawn the layer, and draw it even if the zoom hasn\'t changed.'],[-1,'     *\/'],[-1,'    drawn: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.Markers '],[-1,'     * Create a Markers layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} '],[-1,'     * options - {Object} Hashtable of extra options to tag onto the layer'],[-1,'     *\/'],[-1,'    initialize: function(name, options) {'],[0,'        OpenLayers.Layer.prototype.initialize.apply(this, arguments);'],[0,'        this.markers = [];'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy '],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.clearMarkers();'],[0,'        this.markers = null;'],[0,'        OpenLayers.Layer.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setOpacity'],[-1,'     * Sets the opacity for all the markers.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * opacity - {Float}'],[-1,'     *\/'],[-1,'    setOpacity: function(opacity) {'],[0,'        if (opacity != this.opacity) {'],[0,'            this.opacity = opacity;'],[0,'            for (var i=0, len=this.markers.length; i&lt;len; i++) {'],[0,'                this.markers[i].setOpacity(this.opacity);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: moveTo'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} '],[-1,'     * zoomChanged - {Boolean} '],[-1,'     * dragging - {Boolean} '],[-1,'     *\/'],[-1,'    moveTo:function(bounds, zoomChanged, dragging) {'],[0,'        OpenLayers.Layer.prototype.moveTo.apply(this, arguments);'],[-1,''],[0,'        if (zoomChanged || !this.drawn) {'],[0,'            for(var i=0, len=this.markers.length; i&lt;len; i++) {'],[0,'                this.drawMarker(this.markers[i]);'],[-1,'            }'],[0,'            this.drawn = true;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: addMarker'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * marker - {&lt;OpenLayers.Marker&gt;} '],[-1,'     *\/'],[-1,'    addMarker: function(marker) {'],[0,'        this.markers.push(marker);'],[-1,''],[0,'        if (this.opacity &lt; 1) {'],[0,'            marker.setOpacity(this.opacity);'],[-1,'        }'],[-1,''],[0,'        if (this.map &amp;&amp; this.map.getExtent()) {'],[0,'            marker.map = this.map;'],[0,'            this.drawMarker(marker);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: removeMarker'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * marker - {&lt;OpenLayers.Marker&gt;} '],[-1,'     *\/'],[-1,'    removeMarker: function(marker) {'],[0,'        if (this.markers &amp;&amp; this.markers.length) {'],[0,'            OpenLayers.Util.removeItem(this.markers, marker);'],[0,'            marker.erase();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clearMarkers'],[-1,'     * This method removes all markers from a layer. The markers are not'],[-1,'     * destroyed by this function, but are removed from the list of markers.'],[-1,'     *\/'],[-1,'    clearMarkers: function() {'],[0,'        if (this.markers != null) {'],[0,'            while(this.markers.length &gt; 0) {'],[0,'                this.removeMarker(this.markers[0]);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: drawMarker'],[-1,'     * Calculate the pixel location for the marker, create it, and '],[-1,'     *    add it to the layer\'s div'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * marker - {&lt;OpenLayers.Marker&gt;} '],[-1,'     *\/'],[-1,'    drawMarker: function(marker) {'],[0,'        var px = this.map.getLayerPxFromLonLat(marker.lonlat);'],[0,'        if (px == null) {'],[0,'            marker.display(false);'],[-1,'        } else {'],[0,'            if (!marker.isDrawn()) {'],[0,'                var markerImg = marker.draw(px);'],[0,'                this.div.appendChild(markerImg);'],[0,'            } else if(marker.icon) {'],[0,'                marker.icon.moveTo(px);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIMethod: getDataExtent'],[-1,'     * Calculates the max extent which includes all of the markers.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    getDataExtent: function () {'],[0,'        var maxExtent = null;'],[-1,'        '],[0,'        if ( this.markers &amp;&amp; (this.markers.length &gt; 0)) {'],[0,'            var maxExtent = new OpenLayers.Bounds();'],[0,'            for(var i=0, len=this.markers.length; i&lt;len; i++) {'],[0,'                var marker = this.markers[i];'],[0,'                maxExtent.extend(marker.lonlat);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        return maxExtent;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.Markers\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Pan.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control\/Button.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Pan'],[-1,' * The Pan control is a single button to pan the map in one direction. For'],[-1,' * a more complete control see &lt;OpenLayers.Control.PanPanel&gt;.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.Pan = OpenLayers.Class(OpenLayers.Control.Button, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: slideFactor'],[-1,'     * {Integer} Number of pixels by which we\'ll pan the map in any direction '],[-1,'     *     on clicking the arrow buttons, defaults to 50.  If you want to pan'],[-1,'     *     by some ratio of the map dimensions, use &lt;slideRatio&gt; instead.'],[-1,'     *\/'],[-1,'    slideFactor: 50,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: slideRatio'],[-1,'     * {Number} The fraction of map width\/height by which we\'ll pan the map            '],[-1,'     *     on clicking the arrow buttons.  Default is null.  If set, will'],[-1,'     *     override &lt;slideFactor&gt;. E.g. if slideRatio is .5, then Pan Up will'],[-1,'     *     pan up half the map height. '],[-1,'     *\/'],[-1,'    slideRatio: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: direction'],[-1,'     * {String} in {\'North\', \'South\', \'East\', \'West\'}'],[-1,'     *\/'],[-1,'    direction: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.Pan '],[-1,'     * Control which handles the panning (in any of the cardinal directions)'],[-1,'     *     of the map by a set px distance. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * direction - {String} The direction this button should pan.'],[-1,'     * options - {Object} An optional object whose properties will be used'],[-1,'     *     to extend the control.'],[-1,'     *\/'],[-1,'    initialize: function(direction, options) {'],[-1,'    '],[0,'        this.direction = direction;'],[0,'        this.CLASS_NAME += this.direction;'],[-1,'        '],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: trigger'],[-1,'     *\/'],[-1,'    trigger: function(){'],[0,'        if (this.map) {'],[0,'            var getSlideFactor = OpenLayers.Function.bind(function (dim) {'],[0,'                return this.slideRatio ?'],[-1,'                    this.map.getSize()[dim] * this.slideRatio :'],[-1,'                    this.slideFactor;'],[-1,'            }, this);'],[-1,'    '],[0,'            switch (this.direction) {'],[-1,'                case OpenLayers.Control.Pan.NORTH: '],[0,'                    this.map.pan(0, -getSlideFactor(\&quot;h\&quot;));'],[0,'                    break;'],[-1,'                case OpenLayers.Control.Pan.SOUTH: '],[0,'                    this.map.pan(0, getSlideFactor(\&quot;h\&quot;));'],[0,'                    break;'],[-1,'                case OpenLayers.Control.Pan.WEST: '],[0,'                    this.map.pan(-getSlideFactor(\&quot;w\&quot;), 0);'],[0,'                    break;'],[-1,'                case OpenLayers.Control.Pan.EAST: '],[0,'                    this.map.pan(getSlideFactor(\&quot;w\&quot;), 0);'],[0,'                    break;'],[-1,'            }   '],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Pan\&quot;'],[-1,'});'],[-1,''],[1,'OpenLayers.Control.Pan.NORTH = \&quot;North\&quot;;'],[1,'OpenLayers.Control.Pan.SOUTH = \&quot;South\&quot;;'],[1,'OpenLayers.Control.Pan.EAST = \&quot;East\&quot;;'],[1,'OpenLayers.Control.Pan.WEST = \&quot;West\&quot;;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/CSWGetDomain.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.CSWGetDomain'],[-1,' * Default version is 2.0.2.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.Format&gt;} A CSWGetDomain format of the given version.'],[-1,' *\/'],[1,'OpenLayers.Format.CSWGetDomain = function(options) {'],[0,'    options = OpenLayers.Util.applyDefaults('],[-1,'        options, OpenLayers.Format.CSWGetDomain.DEFAULTS'],[-1,'    );'],[0,'    var cls = OpenLayers.Format.CSWGetDomain[\&quot;v\&quot;+options.version.replace(\/\\.\/g, \&quot;_\&quot;)];'],[0,'    if(!cls) {'],[0,'        throw \&quot;Unsupported CSWGetDomain version: \&quot; + options.version;'],[-1,'    }'],[0,'    return new cls(options);'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Constant: DEFAULTS'],[-1,' * {Object} Default properties for the CSWGetDomain format.'],[-1,' *\/'],[1,'OpenLayers.Format.CSWGetDomain.DEFAULTS = {'],[-1,'    \&quot;version\&quot;: \&quot;2.0.2\&quot;'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/CSWGetDomain\/v2_0_2.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/CSWGetDomain.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.CSWGetDomain.v2_0_2'],[-1,' *     A format for creating CSWGetDomain v2.0.2 transactions. '],[-1,' *     Create a new instance with the'],[-1,' *     &lt;OpenLayers.Format.CSWGetDomain.v2_0_2&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.CSWGetDomain.v2_0_2 = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;,'],[-1,'        csw: \&quot;http:\/\/www.opengis.net\/cat\/csw\/2.0.2\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     * {String} The default prefix (used by Format.XML).'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;csw\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} CSW version number.'],[-1,'     *\/'],[-1,'    version: \&quot;2.0.2\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} http:\/\/www.opengis.net\/cat\/csw\/2.0.2'],[-1,'     *   http:\/\/schemas.opengis.net\/csw\/2.0.2\/CSW-discovery.xsd'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/cat\/csw\/2.0.2 http:\/\/schemas.opengis.net\/csw\/2.0.2\/CSW-discovery.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: PropertyName'],[-1,'     * {String} Value of the csw:PropertyName element, used when'],[-1,'     *     writing a GetDomain document.'],[-1,'     *\/'],[-1,'    PropertyName: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: ParameterName'],[-1,'     * {String} Value of the csw:ParameterName element, used when'],[-1,'     *     writing a GetDomain document.'],[-1,'     *\/'],[-1,'    ParameterName: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.CSWGetDomain.v2_0_2'],[-1,'     * A class for parsing and generating CSWGetDomain v2.0.2 transactions.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *'],[-1,'     * Valid options properties:'],[-1,'     * - PropertyName'],[-1,'     * - ParameterName'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Parse the response from a GetDomain request.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) { '],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var obj = {};'],[0,'        this.readNode(data, obj);'],[0,'        return obj;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;csw\&quot;: {'],[-1,'            \&quot;GetDomainResponse\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;DomainValues\&quot;: function(node, obj) {'],[0,'                if (!(OpenLayers.Util.isArray(obj.DomainValues))) {'],[0,'                    obj.DomainValues = [];'],[-1,'                }'],[0,'                var attrs = node.attributes;'],[0,'                var domainValue = {};'],[0,'                for(var i=0, len=attrs.length; i&lt;len; ++i) {'],[0,'                    domainValue[attrs[i].name] = attrs[i].nodeValue;'],[-1,'                }'],[0,'                this.readChildNodes(node, domainValue);'],[0,'                obj.DomainValues.push(domainValue);'],[-1,'            },'],[-1,'            \&quot;PropertyName\&quot;: function(node, obj) {'],[0,'                obj.PropertyName = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ParameterName\&quot;: function(node, obj) {'],[0,'                obj.ParameterName = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ListOfValues\&quot;: function(node, obj) {'],[0,'                if (!(OpenLayers.Util.isArray(obj.ListOfValues))) {'],[0,'                    obj.ListOfValues = [];'],[-1,'                }'],[0,'                this.readChildNodes(node, obj.ListOfValues);'],[-1,'            },'],[-1,'            \&quot;Value\&quot;: function(node, obj) {'],[0,'                var attrs = node.attributes;'],[0,'                var value = {};'],[0,'                for(var i=0, len=attrs.length; i&lt;len; ++i) {'],[0,'                    value[attrs[i].name] = attrs[i].nodeValue;'],[-1,'                }'],[0,'                value.value = this.getChildValue(node);'],[0,'                obj.push({Value: value});'],[-1,'            },'],[-1,'            \&quot;ConceptualScheme\&quot;: function(node, obj) {'],[0,'                obj.ConceptualScheme = {};'],[0,'                this.readChildNodes(node, obj.ConceptualScheme);'],[-1,'            },'],[-1,'            \&quot;Name\&quot;: function(node, obj) {'],[0,'                obj.Name = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Document\&quot;: function(node, obj) {'],[0,'                obj.Document = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Authority\&quot;: function(node, obj) {'],[0,'                obj.Authority = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;RangeOfValues\&quot;: function(node, obj) {'],[0,'                obj.RangeOfValues = {};'],[0,'                this.readChildNodes(node, obj.RangeOfValues);'],[-1,'            },'],[-1,'            \&quot;MinValue\&quot;: function(node, obj) {'],[0,'                var attrs = node.attributes;'],[0,'                var value = {};'],[0,'                for(var i=0, len=attrs.length; i&lt;len; ++i) {'],[0,'                    value[attrs[i].name] = attrs[i].nodeValue;'],[-1,'                }'],[0,'                value.value = this.getChildValue(node);'],[0,'                obj.MinValue = value;'],[-1,'            },'],[-1,'            \&quot;MaxValue\&quot;: function(node, obj) {'],[0,'                var attrs = node.attributes;'],[0,'                var value = {};'],[0,'                for(var i=0, len=attrs.length; i&lt;len; ++i) {'],[0,'                    value[attrs[i].name] = attrs[i].nodeValue;'],[-1,'                }'],[0,'                value.value = this.getChildValue(node);'],[0,'                obj.MaxValue = value;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Given an configuration js object, write a CSWGetDomain request. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} A object mapping the request.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A serialized CSWGetDomain request.'],[-1,'     *\/'],[-1,'    write: function(options) {'],[0,'        var node = this.writeNode(\&quot;csw:GetDomain\&quot;, options);'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [node]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;csw\&quot;: {'],[-1,'            \&quot;GetDomain\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;csw:GetDomain\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        service: \&quot;CSW\&quot;,'],[-1,'                        version: this.version'],[-1,'                    }'],[-1,'                });'],[0,'                if (options.PropertyName || this.PropertyName) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;csw:PropertyName\&quot;,'],[-1,'                        options.PropertyName || this.PropertyName,'],[-1,'                        node'],[-1,'                    );'],[0,'                } else if (options.ParameterName || this.ParameterName) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;csw:ParameterName\&quot;,'],[-1,'                        options.ParameterName || this.ParameterName,'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                this.readChildNodes(node, options);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;PropertyName\&quot;: function(value) {'],[0,'                var node = this.createElementNSPlus(\&quot;csw:PropertyName\&quot;, {'],[-1,'                    value: value'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;ParameterName\&quot;: function(value) {'],[0,'                var node = this.createElementNSPlus(\&quot;csw:ParameterName\&quot;, {'],[-1,'                    value: value'],[-1,'                });'],[0,'                return node;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'   '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.CSWGetDomain.v2_0_2\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/ArcXML\/Features.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/ArcXML.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.ArcXML.Features'],[-1,' * Read\/Write ArcXML features. Create a new instance with the '],[-1,' *     &lt;OpenLayers.Format.ArcXML.Features&gt; constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.ArcXML.Features = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.ArcXML.Features'],[-1,'     * Create a new parser\/writer for ArcXML Features.  Create an instance of this class'],[-1,'     * to get a set of features from an ArcXML response.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read data from a string of ArcXML, and return a set of OpenLayers features. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} A collection of features.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        var axl = new OpenLayers.Format.ArcXML();'],[0,'        var parsed = axl.read(data);'],[-1,'        '],[0,'        return parsed.features.feature;'],[-1,'    }'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Snapping.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Layer\/Vector.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Snapping'],[-1,' * Acts as a snapping agent while editing vector features.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.Snapping = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to those from &lt;OpenLayers.Control.events&gt;):'],[-1,'     * beforesnap - Triggered before a snap occurs.  Listeners receive an'],[-1,'     *     event object with *point*, *x*, *y*, *distance*, *layer*, and'],[-1,'     *     *snapType* properties.  The point property will be original point'],[-1,'     *     geometry considered for snapping. The x and y properties represent'],[-1,'     *     coordinates the point will receive. The distance is the distance'],[-1,'     *     of the snap.  The layer is the target layer.  The snapType property'],[-1,'     *     will be one of \&quot;node\&quot;, \&quot;vertex\&quot;, or \&quot;edge\&quot;. Return false to stop'],[-1,'     *     snapping from occurring.'],[-1,'     * snap - Triggered when a snap occurs.  Listeners receive an event with'],[-1,'     *     *point*, *snapType*, *layer*, and *distance* properties.  The point'],[-1,'     *     will be the location snapped to.  The snapType will be one of \&quot;node\&quot;,'],[-1,'     *     \&quot;vertex\&quot;, or \&quot;edge\&quot;.  The layer will be the target layer.  The'],[-1,'     *     distance will be the distance of the snap in map units.'],[-1,'     * unsnap - Triggered when a vertex is unsnapped.  Listeners receive an'],[-1,'     *     event with a *point* property.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * CONSTANT: DEFAULTS'],[-1,'     * Default target properties.'],[-1,'     *\/'],[-1,'    DEFAULTS: {'],[-1,'        tolerance: 10,'],[-1,'        node: true,'],[-1,'        edge: true,'],[-1,'        vertex: true'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: greedy'],[-1,'     * {Boolean} Snap to closest feature in first layer with an eligible'],[-1,'     *     feature.  Default is true.'],[-1,'     *\/'],[-1,'    greedy: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: precedence'],[-1,'     * {Array} List representing precedence of different snapping types.'],[-1,'     *     Default is \&quot;node\&quot;, \&quot;vertex\&quot;, \&quot;edge\&quot;.'],[-1,'     *\/'],[-1,'    precedence: [\&quot;node\&quot;, \&quot;vertex\&quot;, \&quot;edge\&quot;],'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: resolution'],[-1,'     * {Float} The map resolution for the previously considered snap.'],[-1,'     *\/'],[-1,'    resolution: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: geoToleranceCache'],[-1,'     * {Object} A cache of geo-tolerances.  Tolerance values (in map units) are'],[-1,'     *     calculated when the map resolution changes.'],[-1,'     *\/'],[-1,'    geoToleranceCache: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: layer'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;} The current editable layer.  Set at'],[-1,'     *     construction or after construction with &lt;setLayer&gt;.'],[-1,'     *\/'],[-1,'    layer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: feature'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} The current editable feature.'],[-1,'     *\/'],[-1,'    feature: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: point'],[-1,'     * {&lt;OpenLayers.Geometry.Point&gt;} The currently snapped vertex.'],[-1,'     *\/'],[-1,'    point: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.Snapping'],[-1,'     * Creates a new snapping control. A control is constructed with an editable'],[-1,'     *     layer and a set of configuration objects for target layers. While the'],[-1,'     *     control is active, dragging vertices while drawing new features or'],[-1,'     *     modifying existing features on the editable layer will engage'],[-1,'     *     snapping to features on the target layers. Whether a vertex snaps to'],[-1,'     *     a feature on a target layer depends on the target layer configuration.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An object containing all configuration properties for'],[-1,'     *     the control.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;} The editable layer.  Features from this'],[-1,'     *     layer that are digitized or modified may have vertices snapped to'],[-1,'     *     features from any of the target layers.'],[-1,'     * targets - {Array(Object | OpenLayers.Layer.Vector)} A list of objects for'],[-1,'     *     configuring target layers.  See valid properties of the target'],[-1,'     *     objects below.  If the items in the targets list are vector layers'],[-1,'     *     (instead of configuration objects), the defaults from the &lt;defaults&gt;'],[-1,'     *     property will apply.  The editable layer itself may be a target'],[-1,'     *     layer, allowing newly created or edited features to be snapped to'],[-1,'     *     existing features from the same layer.  If no targets are provided'],[-1,'     *     the layer given in the constructor (as &lt;layer&gt;) will become the'],[-1,'     *     initial target.'],[-1,'     * defaults - {Object} An object with default properties to be applied'],[-1,'     *     to all target objects.'],[-1,'     * greedy - {Boolean} Snap to closest feature in first target layer that'],[-1,'     *     applies.  Default is true.  If false, all features in all target'],[-1,'     *     layers will be checked and the closest feature in all target layers'],[-1,'     *     will be chosen.  The greedy property determines if the order of the'],[-1,'     *     target layers is significant.  By default, the order of the target'],[-1,'     *     layers is significant where layers earlier in the target layer list'],[-1,'     *     have precedence over layers later in the list.  Within a single'],[-1,'     *     layer, the closest feature is always chosen for snapping.  This'],[-1,'     *     property only determines whether the search for a closer feature'],[-1,'     *     continues after an eligible feature is found in a target layer.'],[-1,'     *'],[-1,'     * Valid target properties:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;} A target layer.  Features from this'],[-1,'     *     layer will be eligible to act as snapping target for the editable'],[-1,'     *     layer.'],[-1,'     * tolerance - {Float} The distance (in pixels) at which snapping may occur.'],[-1,'     *     Default is 10.'],[-1,'     * node - {Boolean} Snap to nodes (first or last point in a geometry) in'],[-1,'     *     target layer.  Default is true.'],[-1,'     * nodeTolerance - {Float} Optional distance at which snapping may occur'],[-1,'     *     for nodes specifically.  If none is provided, &lt;tolerance&gt; will be'],[-1,'     *     used.'],[-1,'     * vertex - {Boolean} Snap to vertices in target layer.  Default is true.'],[-1,'     * vertexTolerance - {Float} Optional distance at which snapping may occur'],[-1,'     *     for vertices specifically.  If none is provided, &lt;tolerance&gt; will be'],[-1,'     *     used.'],[-1,'     * edge - {Boolean} Snap to edges in target layer.  Default is true.'],[-1,'     * edgeTolerance - {Float} Optional distance at which snapping may occur'],[-1,'     *     for edges specifically.  If none is provided, &lt;tolerance&gt; will be'],[-1,'     *     used.'],[-1,'     * filter - {&lt;OpenLayers.Filter&gt;} Optional filter to evaluate to determine if'],[-1,'     *     feature is eligible for snapping.  If filter evaluates to true for a'],[-1,'     *     target feature a vertex may be snapped to the feature. '],[-1,'     * minResolution - {Number} If a minResolution is provided, snapping to this'],[-1,'     *     target will only be considered if the map resolution is greater than'],[-1,'     *     or equal to this value (the minResolution is inclusive).  Default is'],[-1,'     *     no minimum resolution limit.'],[-1,'     * maxResolution - {Number} If a maxResolution is provided, snapping to this'],[-1,'     *     target will only be considered if the map resolution is strictly'],[-1,'     *     less than this value (the maxResolution is exclusive).  Default is'],[-1,'     *     no maximum resolution limit.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[0,'        this.options = options || {}; \/\/ TODO: this could be done by the super'],[-1,'        '],[-1,'        \/\/ set the editable layer if provided'],[0,'        if(this.options.layer) {'],[0,'            this.setLayer(this.options.layer);'],[-1,'        }'],[-1,'        \/\/ configure target layers'],[0,'        var defaults = OpenLayers.Util.extend({}, this.options.defaults);'],[0,'        this.defaults = OpenLayers.Util.applyDefaults(defaults, this.DEFAULTS);'],[0,'        this.setTargets(this.options.targets);'],[0,'        if(this.targets.length === 0 &amp;&amp; this.layer) {'],[0,'            this.addTargetLayer(this.layer);'],[-1,'        }'],[-1,''],[0,'        this.geoToleranceCache = {};'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setLayer'],[-1,'     * Set the editable layer.  Call the setLayer method if the editable layer'],[-1,'     *     changes and the same control should be used on a new editable layer.'],[-1,'     *     If the control is already active, it will be active after the new'],[-1,'     *     layer is set.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;}  The new editable layer.'],[-1,'     *\/'],[-1,'    setLayer: function(layer) {'],[0,'        if(this.active) {'],[0,'            this.deactivate();'],[0,'            this.layer = layer;'],[0,'            this.activate();'],[-1,'        } else {'],[0,'            this.layer = layer;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setTargets'],[-1,'     * Set the targets for the snapping agent.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * targets - {Array} An array of target configs or target layers.'],[-1,'     *\/'],[-1,'    setTargets: function(targets) {'],[0,'        this.targets = [];'],[0,'        if(targets &amp;&amp; targets.length) {'],[0,'            var target;'],[0,'            for(var i=0, len=targets.length; i&lt;len; ++i) {'],[0,'                target = targets[i];'],[0,'                if(target instanceof OpenLayers.Layer.Vector) {'],[0,'                    this.addTargetLayer(target);'],[-1,'                } else {'],[0,'                    this.addTarget(target);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addTargetLayer'],[-1,'     * Add a target layer with the default target config.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;} A target layer.'],[-1,'     *\/'],[-1,'    addTargetLayer: function(layer) {'],[0,'        this.addTarget({layer: layer});'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addTarget'],[-1,'     * Add a configured target layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * target - {Object} A target config.'],[-1,'     *\/'],[-1,'    addTarget: function(target) {'],[0,'        target = OpenLayers.Util.applyDefaults(target, this.defaults);'],[0,'        target.nodeTolerance = target.nodeTolerance || target.tolerance;'],[0,'        target.vertexTolerance = target.vertexTolerance || target.tolerance;'],[0,'        target.edgeTolerance = target.edgeTolerance || target.tolerance;'],[0,'        this.targets.push(target);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: removeTargetLayer'],[-1,'     * Remove a target layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;} The target layer to remove.'],[-1,'     *\/'],[-1,'    removeTargetLayer: function(layer) {'],[0,'        var target;'],[0,'        for(var i=this.targets.length-1; i&gt;=0; --i) {'],[0,'            target = this.targets[i];'],[0,'            if(target.layer === layer) {'],[0,'                this.removeTarget(target);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: removeTarget'],[-1,'     * Remove a target.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * target - {Object} A target config.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} The targets array.'],[-1,'     *\/'],[-1,'    removeTarget: function(target) {'],[0,'        return OpenLayers.Util.removeItem(this.targets, target);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Activate the control.  Activating the control registers listeners for'],[-1,'     *     editing related events so that during feature creation and'],[-1,'     *     modification, moving vertices will trigger snapping.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = OpenLayers.Control.prototype.activate.call(this);'],[0,'        if(activated) {'],[0,'            if(this.layer &amp;&amp; this.layer.events) {'],[0,'                this.layer.events.on({'],[-1,'                    sketchstarted: this.onSketchModified,'],[-1,'                    sketchmodified: this.onSketchModified,'],[-1,'                    vertexmodified: this.onVertexModified,'],[-1,'                    scope: this'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the control.  Deactivating the control unregisters listeners'],[-1,'     *     so feature editing may proceed without engaging the snapping agent.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = OpenLayers.Control.prototype.deactivate.call(this);'],[0,'        if(deactivated) {'],[0,'            if(this.layer &amp;&amp; this.layer.events) {'],[0,'                this.layer.events.un({'],[-1,'                    sketchstarted: this.onSketchModified,'],[-1,'                    sketchmodified: this.onSketchModified,'],[-1,'                    vertexmodified: this.onVertexModified,'],[-1,'                    scope: this'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[0,'        this.feature = null;'],[0,'        this.point = null;'],[0,'        return deactivated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onSketchModified'],[-1,'     * Registered as a listener for the sketchmodified event on the editable'],[-1,'     *     layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Object} The sketch modified event.'],[-1,'     *\/'],[-1,'    onSketchModified: function(event) {'],[0,'        this.feature = event.feature;'],[0,'        this.considerSnapping(event.vertex, event.vertex);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onVertexModified'],[-1,'     * Registered as a listener for the vertexmodified event on the editable'],[-1,'     *     layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Object} The vertex modified event.'],[-1,'     *\/'],[-1,'    onVertexModified: function(event) {'],[0,'        this.feature = event.feature;'],[0,'        var loc = this.layer.map.getLonLatFromViewPortPx(event.pixel);'],[0,'        this.considerSnapping('],[-1,'            event.vertex, new OpenLayers.Geometry.Point(loc.lon, loc.lat)'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: considerSnapping'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;} The vertex to be snapped (or'],[-1,'     *     unsnapped).'],[-1,'     * loc - {&lt;OpenLayers.Geometry.Point&gt;} The location of the mouse in map'],[-1,'     *     coords.'],[-1,'     *\/'],[-1,'    considerSnapping: function(point, loc) {'],[0,'        var best = {'],[-1,'            rank: Number.POSITIVE_INFINITY,'],[-1,'            dist: Number.POSITIVE_INFINITY,'],[-1,'            x: null, y: null'],[-1,'        };'],[0,'        var snapped = false;'],[0,'        var result, target;'],[0,'        for(var i=0, len=this.targets.length; i&lt;len; ++i) {'],[0,'            target = this.targets[i];'],[0,'            result = this.testTarget(target, loc);'],[0,'            if(result) {'],[0,'                if(this.greedy) {'],[0,'                    best = result;'],[0,'                    best.target = target; '],[0,'                    snapped = true;'],[0,'                    break;'],[-1,'                } else {'],[0,'                    if((result.rank &lt; best.rank) ||'],[-1,'                       (result.rank === best.rank &amp;&amp; result.dist &lt; best.dist)) {'],[0,'                        best = result;'],[0,'                        best.target = target;'],[0,'                        snapped = true;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        if(snapped) {'],[0,'            var proceed = this.events.triggerEvent(\&quot;beforesnap\&quot;, {'],[-1,'                point: point, x: best.x, y: best.y, distance: best.dist,'],[-1,'                layer: best.target.layer, snapType: this.precedence[best.rank]'],[-1,'            });'],[0,'            if(proceed !== false) {'],[0,'                point.x = best.x;'],[0,'                point.y = best.y;'],[0,'                this.point = point;'],[0,'                this.events.triggerEvent(\&quot;snap\&quot;, {'],[-1,'                    point: point,'],[-1,'                    snapType: this.precedence[best.rank],'],[-1,'                    layer: best.target.layer,'],[-1,'                    distance: best.dist'],[-1,'                });'],[-1,'            } else {'],[0,'                snapped = false;'],[-1,'            }'],[-1,'        }'],[0,'        if(this.point &amp;&amp; !snapped) {'],[0,'            point.x = loc.x;'],[0,'            point.y = loc.y;'],[0,'            this.point = null;'],[0,'            this.events.triggerEvent(\&quot;unsnap\&quot;, {point: point});'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: testTarget'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * target - {Object} Object with target layer configuration.'],[-1,'     * loc - {&lt;OpenLayers.Geometry.Point&gt;} The location of the mouse in map'],[-1,'     *     coords.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} A result object with rank, dist, x, and y properties.'],[-1,'     *     Returns null if candidate is not eligible for snapping.'],[-1,'     *\/'],[-1,'    testTarget: function(target, loc) {'],[0,'        var resolution = this.layer.map.getResolution();'],[0,'        if (\&quot;minResolution\&quot; in target) {'],[0,'            if (resolution &lt; target.minResolution) {'],[0,'                return null;'],[-1,'            }'],[-1,'        }'],[0,'        if (\&quot;maxResolution\&quot; in target) {'],[0,'            if (resolution &gt;= target.maxResolution) {'],[0,'                return null;'],[-1,'            }'],[-1,'        }'],[0,'        var tolerance = {'],[-1,'            node: this.getGeoTolerance(target.nodeTolerance, resolution),'],[-1,'            vertex: this.getGeoTolerance(target.vertexTolerance, resolution),'],[-1,'            edge: this.getGeoTolerance(target.edgeTolerance, resolution)'],[-1,'        };'],[-1,'        \/\/ this could be cached if we don\'t support setting tolerance values directly'],[0,'        var maxTolerance = Math.max('],[-1,'            tolerance.node, tolerance.vertex, tolerance.edge'],[-1,'        );'],[0,'        var result = {'],[-1,'            rank: Number.POSITIVE_INFINITY, dist: Number.POSITIVE_INFINITY'],[-1,'        };'],[0,'        var eligible = false;'],[0,'        var features = target.layer.features;'],[0,'        var feature, type, vertices, vertex, closest, dist, found;'],[0,'        var numTypes = this.precedence.length;'],[0,'        var ll = new OpenLayers.LonLat(loc.x, loc.y);'],[0,'        for(var i=0, len=features.length; i&lt;len; ++i) {'],[0,'            feature = features[i];'],[0,'            if(feature !== this.feature &amp;&amp; !feature._sketch &amp;&amp;'],[-1,'               feature.state !== OpenLayers.State.DELETE &amp;&amp;'],[-1,'               (!target.filter || target.filter.evaluate(feature))) {'],[0,'                if(feature.atPoint(ll, maxTolerance, maxTolerance)) {'],[0,'                    for(var j=0, stop=Math.min(result.rank+1, numTypes); j&lt;stop; ++j) {'],[0,'                        type = this.precedence[j];'],[0,'                        if(target[type]) {'],[0,'                            if(type === \&quot;edge\&quot;) {'],[0,'                                closest = feature.geometry.distanceTo(loc, {details: true});'],[0,'                                dist = closest.distance;'],[0,'                                if(dist &lt;= tolerance[type] &amp;&amp; dist &lt; result.dist) {'],[0,'                                    result = {'],[-1,'                                        rank: j, dist: dist,'],[-1,'                                        x: closest.x0, y: closest.y0 \/\/ closest coords on feature'],[-1,'                                    };'],[0,'                                    eligible = true;'],[-1,'                                    \/\/ don\'t look for lower precedence types for this feature'],[0,'                                    break;'],[-1,'                                }'],[-1,'                            } else {'],[-1,'                                \/\/ look for nodes or vertices'],[0,'                                vertices = feature.geometry.getVertices(type === \&quot;node\&quot;);'],[0,'                                found = false;'],[0,'                                for(var k=0, klen=vertices.length; k&lt;klen; ++k) {'],[0,'                                    vertex = vertices[k];'],[0,'                                    dist = vertex.distanceTo(loc);'],[0,'                                    if(dist &lt;= tolerance[type] &amp;&amp;'],[-1,'                                       (j &lt; result.rank || (j === result.rank &amp;&amp; dist &lt; result.dist))) {'],[0,'                                        result = {'],[-1,'                                            rank: j, dist: dist,'],[-1,'                                            x: vertex.x, y: vertex.y'],[-1,'                                        };'],[0,'                                        eligible = true;'],[0,'                                        found = true;'],[-1,'                                    }'],[-1,'                                }'],[0,'                                if(found) {'],[-1,'                                    \/\/ don\'t look for lower precedence types for this feature'],[0,'                                    break;'],[-1,'                                }'],[-1,'                            }'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return eligible ? result : null;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getGeoTolerance'],[-1,'     * Calculate a tolerance in map units given a tolerance in pixels.  This'],[-1,'     *     takes advantage of the &lt;geoToleranceCache&gt; when the map resolution'],[-1,'     *     has not changed.'],[-1,'     *     '],[-1,'     * Parameters:'],[-1,'     * tolerance - {Number} A tolerance value in pixels.'],[-1,'     * resolution - {Number} Map resolution.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number} A tolerance value in map units.'],[-1,'     *\/'],[-1,'    getGeoTolerance: function(tolerance, resolution) {'],[0,'        if(resolution !== this.resolution) {'],[0,'            this.resolution = resolution;'],[0,'            this.geoToleranceCache = {};'],[-1,'        }'],[0,'        var geoTolerance = this.geoToleranceCache[tolerance];'],[0,'        if(geoTolerance === undefined) {'],[0,'            geoTolerance = tolerance * resolution;'],[0,'            this.geoToleranceCache[tolerance] = geoTolerance;'],[-1,'        }'],[0,'        return geoTolerance;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     * Clean up the control.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if(this.active) {'],[0,'            this.deactivate(); \/\/ TODO: this should be handled by the super'],[-1,'        }'],[0,'        delete this.layer;'],[0,'        delete this.targets;'],[0,'        OpenLayers.Control.prototype.destroy.call(this);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Snapping\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/OWSCommon\/v1_1_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.OWSCommon.v1_1_0'],[-1,' * Parser for OWS Common version 1.1.0.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.OWSCommon.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.OWSCommon.v1_1_0 = OpenLayers.Class(OpenLayers.Format.OWSCommon.v1, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\/1.1\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;ows\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;ExceptionReport\&quot;: function(node, obj) {'],[0,'                obj.exceptionReport = {'],[-1,'                    version: node.getAttribute(\'version\'),'],[-1,'                    language: node.getAttribute(\'xml:lang\'),'],[-1,'                    exceptions: []'],[-1,'                };'],[0,'                this.readChildNodes(node, obj.exceptionReport);'],[-1,'            },'],[-1,'            \&quot;AllowedValues\&quot;: function(node, parameter) {'],[0,'                parameter.allowedValues = {};'],[0,'                this.readChildNodes(node, parameter.allowedValues);'],[-1,'            },'],[-1,'            \&quot;AnyValue\&quot;: function(node, parameter) {'],[0,'                parameter.anyValue = true;'],[-1,'            },'],[-1,'            \&quot;DataType\&quot;: function(node, parameter) {'],[0,'                parameter.dataType = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Range\&quot;: function(node, allowedValues) {'],[0,'                allowedValues.range = {};'],[0,'                this.readChildNodes(node, allowedValues.range);'],[-1,'            },'],[-1,'            \&quot;MinimumValue\&quot;: function(node, range) {'],[0,'                range.minValue = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;MaximumValue\&quot;: function(node, range) {'],[0,'                range.maxValue = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Identifier\&quot;: function(node, obj) {'],[0,'                obj.identifier = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;SupportedCRS\&quot;: function(node, obj) {'],[0,'                obj.supportedCRS = this.getChildValue(node);'],[-1,'            }'],[-1,'        }, OpenLayers.Format.OWSCommon.v1.prototype.readers[\&quot;ows\&quot;])'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;ows\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;Range\&quot;: function(range) {'],[0,'                var node = this.createElementNSPlus(\&quot;ows:Range\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        \'ows:rangeClosure\': range.closure'],[-1,'                    }'],[-1,'                });'],[0,'                this.writeNode(\&quot;ows:MinimumValue\&quot;, range.minValue, node);'],[0,'                this.writeNode(\&quot;ows:MaximumValue\&quot;, range.maxValue, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;MinimumValue\&quot;: function(minValue) {'],[0,'                var node = this.createElementNSPlus(\&quot;ows:MinimumValue\&quot;, {'],[-1,'                    value: minValue'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;MaximumValue\&quot;: function(maxValue) {'],[0,'                var node = this.createElementNSPlus(\&quot;ows:MaximumValue\&quot;, {'],[-1,'                    value: maxValue'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Value\&quot;: function(value) {'],[0,'                var node = this.createElementNSPlus(\&quot;ows:Value\&quot;, {'],[-1,'                    value: value'],[-1,'                });'],[0,'                return node;'],[-1,'            }'],[-1,'        }, OpenLayers.Format.OWSCommon.v1.prototype.writers[\&quot;ows\&quot;])'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.OWSCommon.v1_1_0\&quot;'],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WCSGetCoverage.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1_1_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WCSGetCoverage version 1.1.0'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WCSGetCoverage = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\/1.1\&quot;,'],[-1,'        wcs: \&quot;http:\/\/www.opengis.net\/wcs\/1.1\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: VERSION'],[-1,'     * {String} 1.1.2'],[-1,'     *\/'],[-1,'    VERSION: \&quot;1.1.2\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/wcs\/1.1 http:\/\/schemas.opengis.net\/wcs\/1.1\/wcsGetCoverage.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WCSGetCoverage'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A WCS GetCoverage request XML string.'],[-1,'     *\/'],[-1,'    write: function(options) {'],[0,'        var node = this.writeNode(\&quot;wcs:GetCoverage\&quot;, options);'],[0,'        this.setAttributeNS('],[-1,'            node, this.namespaces.xsi,'],[-1,'            \&quot;xsi:schemaLocation\&quot;, this.schemaLocation'],[-1,'        );'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [node]);'],[-1,'    }, '],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;wcs\&quot;: {'],[-1,'            \&quot;GetCoverage\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;wcs:GetCoverage\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        version: options.version || this.VERSION,'],[-1,'                        service: \'WCS\''],[-1,'                    } '],[-1,'                }); '],[0,'                this.writeNode(\&quot;ows:Identifier\&quot;, options.identifier, node);'],[0,'                this.writeNode(\&quot;wcs:DomainSubset\&quot;, options.domainSubset, node);'],[0,'                this.writeNode(\&quot;wcs:Output\&quot;, options.output, node);'],[0,'                return node; '],[-1,'            },'],[-1,'            \&quot;DomainSubset\&quot;: function(domainSubset) {'],[0,'                var node = this.createElementNSPlus(\&quot;wcs:DomainSubset\&quot;, {});'],[0,'                this.writeNode(\&quot;ows:BoundingBox\&quot;, domainSubset.boundingBox, node);'],[0,'                if (domainSubset.temporalSubset) {'],[0,'                    this.writeNode(\&quot;wcs:TemporalSubset\&quot;, domainSubset.temporalSubset, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;TemporalSubset\&quot;: function(temporalSubset) {'],[0,'                var node = this.createElementNSPlus(\&quot;wcs:TemporalSubset\&quot;, {});'],[0,'                for (var i=0, len=temporalSubset.timePeriods.length; i&lt;len; ++i) {'],[0,'                    this.writeNode(\&quot;wcs:TimePeriod\&quot;, temporalSubset.timePeriods[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;TimePeriod\&quot;: function(timePeriod) {'],[0,'                var node = this.createElementNSPlus(\&quot;wcs:TimePeriod\&quot;, {});'],[0,'                this.writeNode(\&quot;wcs:BeginPosition\&quot;, timePeriod.begin, node);'],[0,'                this.writeNode(\&quot;wcs:EndPosition\&quot;, timePeriod.end, node);'],[0,'                if (timePeriod.resolution) {'],[0,'                    this.writeNode(\&quot;wcs:TimeResolution\&quot;, timePeriod.resolution, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;BeginPosition\&quot;: function(begin) {'],[0,'                var node = this.createElementNSPlus(\&quot;wcs:BeginPosition\&quot;, {'],[-1,'                    value: begin'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;EndPosition\&quot;: function(end) {'],[0,'                var node = this.createElementNSPlus(\&quot;wcs:EndPosition\&quot;, {'],[-1,'                    value: end'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;TimeResolution\&quot;: function(resolution) {'],[0,'                var node = this.createElementNSPlus(\&quot;wcs:TimeResolution\&quot;, {'],[-1,'                    value: resolution'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Output\&quot;: function(output) {'],[0,'                var node = this.createElementNSPlus(\&quot;wcs:Output\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        format: output.format,'],[-1,'                        store: output.store'],[-1,'                    }'],[-1,'                });'],[0,'                if (output.gridCRS) {'],[0,'                    this.writeNode(\&quot;wcs:GridCRS\&quot;, output.gridCRS, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;GridCRS\&quot;: function(gridCRS) {'],[0,'                var node = this.createElementNSPlus(\&quot;wcs:GridCRS\&quot;, {});'],[0,'                this.writeNode(\&quot;wcs:GridBaseCRS\&quot;, gridCRS.baseCRS, node);'],[0,'                if (gridCRS.type) {'],[0,'                    this.writeNode(\&quot;wcs:GridType\&quot;, gridCRS.type, node);'],[-1,'                }'],[0,'                if (gridCRS.origin) {'],[0,'                    this.writeNode(\&quot;wcs:GridOrigin\&quot;, gridCRS.origin, node);'],[-1,'                }'],[0,'                this.writeNode(\&quot;wcs:GridOffsets\&quot;, gridCRS.offsets, node);'],[0,'                if (gridCRS.CS) {'],[0,'                    this.writeNode(\&quot;wcs:GridCS\&quot;, gridCRS.CS, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;GridBaseCRS\&quot;: function(baseCRS) {'],[0,'                return this.createElementNSPlus(\&quot;wcs:GridBaseCRS\&quot;, {'],[-1,'                    value: baseCRS'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;GridOrigin\&quot;: function(origin) {'],[0,'                return this.createElementNSPlus(\&quot;wcs:GridOrigin\&quot;, {'],[-1,'                    value: origin'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;GridType\&quot;: function(type) {'],[0,'                return this.createElementNSPlus(\&quot;wcs:GridType\&quot;, {'],[-1,'                    value: type'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;GridOffsets\&quot;: function(offsets) {'],[0,'                return this.createElementNSPlus(\&quot;wcs:GridOffsets\&quot;, {'],[-1,'                    value: offsets'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;GridCS\&quot;: function(CS) {'],[0,'                return this.createElementNSPlus(\&quot;wcs:GridCS\&quot;, {'],[-1,'                    value: CS'],[-1,'                });'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WCSGetCoverage\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMSCapabilities.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMSCapabilities'],[-1,' * Read WMS Capabilities.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML.VersionedOGC&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;1.1.1\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;1.1.1\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: profile'],[-1,'     * {String} If provided, use a custom profile.'],[-1,'     *'],[-1,'     * Currently supported profiles:'],[-1,'     * - WMSC - parses vendor specific capabilities for WMS-C.'],[-1,'     *\/'],[-1,'    profile: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMSCapabilities'],[-1,'     * Create a new parser for WMS capabilities.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read capabilities data from a string, and return a list of layers. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} List of named layers.'],[-1,'     *\/'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMSCapabilities\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMSCapabilities\/v1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WMSCapabilities.js'],[-1,' * @requires OpenLayers\/Format\/OGCExceptionReport.js'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMSCapabilities.v1'],[-1,' * Abstract class not to be instantiated directly. Creates'],[-1,' * the common parts for both WMS 1.1.X and WMS 1.3.X.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMSCapabilities.v1 = OpenLayers.Class('],[-1,'    OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        wms: \&quot;http:\/\/www.opengis.net\/wms\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;wms\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMSCapabilities.v1'],[-1,'     * Create an instance of one of the subclasses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read capabilities data from a string, and return a list of layers. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} List of named layers.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        var raw = data;'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var capabilities = {};'],[0,'        this.readNode(data, capabilities);'],[0,'        if (capabilities.service === undefined) {'],[-1,'            \/\/ an exception must have occurred, so parse it'],[0,'            var parser = new OpenLayers.Format.OGCExceptionReport();'],[0,'            capabilities.error = parser.read(raw);'],[-1,'        }'],[0,'        return capabilities;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wms\&quot;: {'],[-1,'            \&quot;Service\&quot;: function(node, obj) {'],[0,'                obj.service = {};'],[0,'                this.readChildNodes(node, obj.service);'],[-1,'            },'],[-1,'            \&quot;Name\&quot;: function(node, obj) {'],[0,'                obj.name = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Title\&quot;: function(node, obj) {'],[0,'                obj.title = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Abstract\&quot;: function(node, obj) {'],[0,'                obj[\&quot;abstract\&quot;] = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;BoundingBox\&quot;: function(node, obj) {'],[0,'                var bbox = {};'],[0,'                bbox.bbox = ['],[-1,'                    parseFloat(node.getAttribute(\&quot;minx\&quot;)),'],[-1,'                    parseFloat(node.getAttribute(\&quot;miny\&quot;)),'],[-1,'                    parseFloat(node.getAttribute(\&quot;maxx\&quot;)),'],[-1,'                    parseFloat(node.getAttribute(\&quot;maxy\&quot;))'],[-1,'                ];'],[0,'                var res = {'],[-1,'                    x: parseFloat(node.getAttribute(\&quot;resx\&quot;)),'],[-1,'                    y: parseFloat(node.getAttribute(\&quot;resy\&quot;))'],[-1,'                };'],[-1,''],[0,'                if (! (isNaN(res.x) &amp;&amp; isNaN(res.y))) {'],[0,'                    bbox.res = res;'],[-1,'                }'],[-1,'                \/\/ return the bbox so that descendant classes can set the'],[-1,'                \/\/ CRS and SRS and add it to the obj'],[0,'                return bbox;'],[-1,'            },'],[-1,'            \&quot;OnlineResource\&quot;: function(node, obj) {'],[0,'                obj.href = this.getAttributeNS(node, this.namespaces.xlink, '],[-1,'                    \&quot;href\&quot;);'],[-1,'            },'],[-1,'            \&quot;ContactInformation\&quot;: function(node, obj) {'],[0,'                obj.contactInformation = {};'],[0,'                this.readChildNodes(node, obj.contactInformation);'],[-1,'            },'],[-1,'            \&quot;ContactPersonPrimary\&quot;: function(node, obj) {'],[0,'                obj.personPrimary = {};'],[0,'                this.readChildNodes(node, obj.personPrimary);'],[-1,'            },'],[-1,'            \&quot;ContactPerson\&quot;: function(node, obj) {'],[0,'                obj.person = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ContactOrganization\&quot;: function(node, obj) {'],[0,'                obj.organization = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ContactPosition\&quot;: function(node, obj) {'],[0,'                obj.position = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ContactAddress\&quot;: function(node, obj) {'],[0,'                obj.contactAddress = {};'],[0,'                this.readChildNodes(node, obj.contactAddress);'],[-1,'            },'],[-1,'            \&quot;AddressType\&quot;: function(node, obj) {'],[0,'                obj.type = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Address\&quot;: function(node, obj) {'],[0,'                obj.address = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;City\&quot;: function(node, obj) {'],[0,'                obj.city = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;StateOrProvince\&quot;: function(node, obj) {'],[0,'                obj.stateOrProvince = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;PostCode\&quot;: function(node, obj) {'],[0,'                obj.postcode = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Country\&quot;: function(node, obj) {'],[0,'                obj.country = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ContactVoiceTelephone\&quot;: function(node, obj) {'],[0,'                obj.phone = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ContactFacsimileTelephone\&quot;: function(node, obj) {'],[0,'                obj.fax = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;ContactElectronicMailAddress\&quot;: function(node, obj) {'],[0,'                obj.email = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Fees\&quot;: function(node, obj) {'],[0,'                var fees = this.getChildValue(node);'],[0,'                if (fees &amp;&amp; fees.toLowerCase() != \&quot;none\&quot;) {'],[0,'                    obj.fees = fees;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;AccessConstraints\&quot;: function(node, obj) {'],[0,'                var constraints = this.getChildValue(node);'],[0,'                if (constraints &amp;&amp; constraints.toLowerCase() != \&quot;none\&quot;) {'],[0,'                    obj.accessConstraints = constraints;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Capability\&quot;: function(node, obj) {'],[0,'                obj.capability = {'],[-1,'                    nestedLayers: [],'],[-1,'                    layers: []'],[-1,'                };'],[0,'                this.readChildNodes(node, obj.capability);'],[-1,'            },'],[-1,'            \&quot;Request\&quot;: function(node, obj) {'],[0,'                obj.request = {};'],[0,'                this.readChildNodes(node, obj.request);'],[-1,'            },'],[-1,'            \&quot;GetCapabilities\&quot;: function(node, obj) {'],[0,'                obj.getcapabilities = {formats: []};'],[0,'                this.readChildNodes(node, obj.getcapabilities);'],[-1,'            },'],[-1,'            \&quot;Format\&quot;: function(node, obj) {'],[0,'                if (OpenLayers.Util.isArray(obj.formats)) {'],[0,'                    obj.formats.push(this.getChildValue(node));'],[-1,'                } else {'],[0,'                    obj.format = this.getChildValue(node);'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;DCPType\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;HTTP\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Get\&quot;: function(node, obj) {'],[0,'                obj.get = {};'],[0,'                this.readChildNodes(node, obj.get);'],[-1,'                \/\/ backwards compatibility'],[0,'                if (!obj.href) {'],[0,'                    obj.href = obj.get.href;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Post\&quot;: function(node, obj) {'],[0,'                obj.post = {};'],[0,'                this.readChildNodes(node, obj.post);'],[-1,'                \/\/ backwards compatibility'],[0,'                if (!obj.href) {'],[0,'                    obj.href = obj.get.href;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;GetMap\&quot;: function(node, obj) {'],[0,'                obj.getmap = {formats: []};'],[0,'                this.readChildNodes(node, obj.getmap);'],[-1,'            },'],[-1,'            \&quot;GetFeatureInfo\&quot;: function(node, obj) {'],[0,'                obj.getfeatureinfo = {formats: []};'],[0,'                this.readChildNodes(node, obj.getfeatureinfo);'],[-1,'            },'],[-1,'            \&quot;Exception\&quot;: function(node, obj) {'],[0,'                obj.exception = {formats: []};'],[0,'                this.readChildNodes(node, obj.exception);'],[-1,'            },'],[-1,'            \&quot;Layer\&quot;: function(node, obj) {'],[0,'                var parentLayer, capability;'],[0,'                if (obj.capability) {'],[0,'                    capability = obj.capability;'],[0,'                    parentLayer = obj;'],[-1,'                } else {'],[0,'                    capability = obj;'],[-1,'                }'],[0,'                var attrNode = node.getAttributeNode(\&quot;queryable\&quot;);'],[0,'                var queryable = (attrNode &amp;&amp; attrNode.specified) ? '],[-1,'                    node.getAttribute(\&quot;queryable\&quot;) : null;'],[0,'                attrNode = node.getAttributeNode(\&quot;cascaded\&quot;);'],[0,'                var cascaded = (attrNode &amp;&amp; attrNode.specified) ?'],[-1,'                    node.getAttribute(\&quot;cascaded\&quot;) : null;'],[0,'                attrNode = node.getAttributeNode(\&quot;opaque\&quot;);'],[0,'                var opaque = (attrNode &amp;&amp; attrNode.specified) ?'],[-1,'                    node.getAttribute(\'opaque\') : null;'],[0,'                var noSubsets = node.getAttribute(\'noSubsets\');'],[0,'                var fixedWidth = node.getAttribute(\'fixedWidth\');'],[0,'                var fixedHeight = node.getAttribute(\'fixedHeight\');'],[0,'                var parent = parentLayer || {},'],[-1,'                    extend = OpenLayers.Util.extend;'],[0,'                var layer = {'],[-1,'                    nestedLayers: [],'],[-1,'                    styles: parentLayer ? [].concat(parentLayer.styles) : [],'],[-1,'                    srs: parentLayer ? extend({}, parent.srs) : {}, '],[-1,'                    metadataURLs: [],'],[-1,'                    bbox: parentLayer ? extend({}, parent.bbox) : {},'],[-1,'                    llbbox: parent.llbbox,'],[-1,'                    dimensions: parentLayer ? extend({}, parent.dimensions) : {},'],[-1,'                    authorityURLs: parentLayer ? extend({}, parent.authorityURLs) : {},'],[-1,'                    identifiers: {},'],[-1,'                    keywords: [],'],[-1,'                    queryable: (queryable &amp;&amp; queryable !== \&quot;\&quot;) ? '],[-1,'                        (queryable === \&quot;1\&quot; || queryable === \&quot;true\&quot; ) :'],[-1,'                        (parent.queryable || false),'],[-1,'                    cascaded: (cascaded !== null) ? parseInt(cascaded) :'],[-1,'                        (parent.cascaded || 0),'],[-1,'                    opaque: opaque ? '],[-1,'                        (opaque === \&quot;1\&quot; || opaque === \&quot;true\&quot; ) :'],[-1,'                        (parent.opaque || false),'],[-1,'                    noSubsets: (noSubsets !== null) ? '],[-1,'                        (noSubsets === \&quot;1\&quot; || noSubsets === \&quot;true\&quot; ) :'],[-1,'                        (parent.noSubsets || false),'],[-1,'                    fixedWidth: (fixedWidth != null) ? '],[-1,'                        parseInt(fixedWidth) : (parent.fixedWidth || 0),'],[-1,'                    fixedHeight: (fixedHeight != null) ? '],[-1,'                        parseInt(fixedHeight) : (parent.fixedHeight || 0),'],[-1,'                    minScale: parent.minScale,'],[-1,'                    maxScale: parent.maxScale,'],[-1,'                    attribution: parent.attribution'],[-1,'                };'],[0,'                obj.nestedLayers.push(layer);'],[0,'                layer.capability = capability;'],[0,'                this.readChildNodes(node, layer);'],[0,'                delete layer.capability;'],[0,'                if(layer.name) {'],[0,'                    var parts = layer.name.split(\&quot;:\&quot;),'],[-1,'                        request = capability.request,'],[-1,'                        gfi = request.getfeatureinfo;'],[0,'                    if(parts.length &gt; 0) {'],[0,'                        layer.prefix = parts[0];'],[-1,'                    }'],[0,'                    capability.layers.push(layer);'],[0,'                    if (layer.formats === undefined) {'],[0,'                        layer.formats = request.getmap.formats;'],[-1,'                    }'],[0,'                    if (layer.infoFormats === undefined &amp;&amp; gfi) {'],[0,'                        layer.infoFormats = gfi.formats;'],[-1,'                    }'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Attribution\&quot;: function(node, obj) {'],[0,'                obj.attribution = {};'],[0,'                this.readChildNodes(node, obj.attribution);'],[-1,'            },'],[-1,'            \&quot;LogoURL\&quot;: function(node, obj) {'],[0,'                obj.logo = {'],[-1,'                    width: node.getAttribute(\&quot;width\&quot;),'],[-1,'                    height: node.getAttribute(\&quot;height\&quot;)'],[-1,'                };'],[0,'                this.readChildNodes(node, obj.logo);'],[-1,'            },'],[-1,'            \&quot;Style\&quot;: function(node, obj) {'],[0,'                var style = {};'],[0,'                obj.styles.push(style);'],[0,'                this.readChildNodes(node, style);'],[-1,'            },'],[-1,'            \&quot;LegendURL\&quot;: function(node, obj) {'],[0,'                var legend = {'],[-1,'                    width: node.getAttribute(\&quot;width\&quot;),'],[-1,'                    height: node.getAttribute(\&quot;height\&quot;)'],[-1,'                };'],[0,'                obj.legend = legend;'],[0,'                this.readChildNodes(node, legend);'],[-1,'            },'],[-1,'            \&quot;MetadataURL\&quot;: function(node, obj) {'],[0,'                var metadataURL = {type: node.getAttribute(\&quot;type\&quot;)};'],[0,'                obj.metadataURLs.push(metadataURL);'],[0,'                this.readChildNodes(node, metadataURL);'],[-1,'            },'],[-1,'            \&quot;DataURL\&quot;: function(node, obj) {'],[0,'                obj.dataURL = {};'],[0,'                this.readChildNodes(node, obj.dataURL);'],[-1,'            },'],[-1,'            \&quot;FeatureListURL\&quot;: function(node, obj) {'],[0,'                obj.featureListURL = {};'],[0,'                this.readChildNodes(node, obj.featureListURL);'],[-1,'            },'],[-1,'            \&quot;AuthorityURL\&quot;: function(node, obj) {'],[0,'                var name = node.getAttribute(\&quot;name\&quot;);'],[0,'                var authority = {};'],[0,'                this.readChildNodes(node, authority);'],[0,'                obj.authorityURLs[name] = authority.href;'],[-1,'            },'],[-1,'            \&quot;Identifier\&quot;: function(node, obj) {'],[0,'                var authority = node.getAttribute(\&quot;authority\&quot;);'],[0,'                obj.identifiers[authority] = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;KeywordList\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;SRS\&quot;: function(node, obj) {'],[0,'                obj.srs[this.getChildValue(node)] = true;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMSCapabilities.v1\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMSCapabilities\/v1_1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WMSCapabilities\/v1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMSCapabilities.v1_1'],[-1,' * Abstract class not to be instantiated directly.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WMSCapabilities.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMSCapabilities.v1_1 = OpenLayers.Class('],[-1,'    OpenLayers.Format.WMSCapabilities.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wms\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;WMT_MS_Capabilities\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Keyword\&quot;: function(node, obj) {'],[0,'                if (obj.keywords) {'],[0,'                    obj.keywords.push(this.getChildValue(node));'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;DescribeLayer\&quot;: function(node, obj) {'],[0,'                obj.describelayer = {formats: []};'],[0,'                this.readChildNodes(node, obj.describelayer);'],[-1,'            },'],[-1,'            \&quot;GetLegendGraphic\&quot;: function(node, obj) {'],[0,'                obj.getlegendgraphic = {formats: []};'],[0,'                this.readChildNodes(node, obj.getlegendgraphic);'],[-1,'            },'],[-1,'            \&quot;GetStyles\&quot;: function(node, obj) {'],[0,'                obj.getstyles = {formats: []};'],[0,'                this.readChildNodes(node, obj.getstyles);'],[-1,'            },'],[-1,'            \&quot;PutStyles\&quot;: function(node, obj) {'],[0,'                obj.putstyles = {formats: []};'],[0,'                this.readChildNodes(node, obj.putstyles);'],[-1,'            },'],[-1,'            \&quot;UserDefinedSymbolization\&quot;: function(node, obj) {'],[0,'                var userSymbols = {'],[-1,'                    supportSLD: parseInt(node.getAttribute(\&quot;SupportSLD\&quot;)) == 1,'],[-1,'                    userLayer: parseInt(node.getAttribute(\&quot;UserLayer\&quot;)) == 1,'],[-1,'                    userStyle: parseInt(node.getAttribute(\&quot;UserStyle\&quot;)) == 1,'],[-1,'                    remoteWFS: parseInt(node.getAttribute(\&quot;RemoteWFS\&quot;)) == 1'],[-1,'                };'],[0,'                obj.userSymbols = userSymbols;'],[-1,'            },'],[-1,'            \&quot;LatLonBoundingBox\&quot;: function(node, obj) {'],[0,'                obj.llbbox = ['],[-1,'                    parseFloat(node.getAttribute(\&quot;minx\&quot;)),'],[-1,'                    parseFloat(node.getAttribute(\&quot;miny\&quot;)),'],[-1,'                    parseFloat(node.getAttribute(\&quot;maxx\&quot;)),'],[-1,'                    parseFloat(node.getAttribute(\&quot;maxy\&quot;))'],[-1,'                ];'],[-1,'            },'],[-1,'            \&quot;BoundingBox\&quot;: function(node, obj) {'],[0,'                var bbox = OpenLayers.Format.WMSCapabilities.v1.prototype.readers[\&quot;wms\&quot;].BoundingBox.apply(this, [node, obj]);'],[0,'                bbox.srs  = node.getAttribute(\&quot;SRS\&quot;);'],[0,'                obj.bbox[bbox.srs] = bbox;'],[-1,'            },'],[-1,'            \&quot;ScaleHint\&quot;: function(node, obj) {'],[0,'                var min = node.getAttribute(\&quot;min\&quot;);'],[0,'                var max = node.getAttribute(\&quot;max\&quot;);'],[0,'                var rad2 = Math.pow(2, 0.5);'],[0,'                var ipm = OpenLayers.INCHES_PER_UNIT[\&quot;m\&quot;];'],[0,'                if (min != 0) {'],[0,'                    obj.maxScale = parseFloat('],[-1,'                        ((min \/ rad2) * ipm * '],[-1,'                            OpenLayers.DOTS_PER_INCH).toPrecision(13)'],[-1,'                    );'],[-1,'                }'],[0,'                if (max != Number.POSITIVE_INFINITY) {'],[0,'                    obj.minScale = parseFloat('],[-1,'                        ((max \/ rad2) * ipm * '],[-1,'                            OpenLayers.DOTS_PER_INCH).toPrecision(13)'],[-1,'                    );'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Dimension\&quot;: function(node, obj) {'],[0,'                var name = node.getAttribute(\&quot;name\&quot;).toLowerCase();'],[0,'                var dim = {'],[-1,'                    name: name,'],[-1,'                    units: node.getAttribute(\&quot;units\&quot;),'],[-1,'                    unitsymbol: node.getAttribute(\&quot;unitSymbol\&quot;)'],[-1,'                };'],[0,'                obj.dimensions[dim.name] = dim;'],[-1,'            },'],[-1,'            \&quot;Extent\&quot;: function(node, obj) {'],[0,'                var name = node.getAttribute(\&quot;name\&quot;).toLowerCase();'],[0,'                if (name in obj[\&quot;dimensions\&quot;]) {'],[0,'                    var extent = obj.dimensions[name];'],[0,'                    extent.nearestVal = '],[-1,'                        node.getAttribute(\&quot;nearestValue\&quot;) === \&quot;1\&quot;;'],[0,'                    extent.multipleVal = '],[-1,'                        node.getAttribute(\&quot;multipleValues\&quot;) === \&quot;1\&quot;;'],[0,'                    extent.current = node.getAttribute(\&quot;current\&quot;) === \&quot;1\&quot;;'],[0,'                    extent[\&quot;default\&quot;] = node.getAttribute(\&quot;default\&quot;) || \&quot;\&quot;;'],[0,'                    var values = this.getChildValue(node);'],[0,'                    extent.values = values.split(\&quot;,\&quot;);'],[-1,'                }'],[-1,'                }'],[-1,'        }, OpenLayers.Format.WMSCapabilities.v1.prototype.readers[\&quot;wms\&quot;])'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMSCapabilities.v1_1\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMSCapabilities\/v1_1_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WMSCapabilities\/v1_1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMSCapabilities\/v1_1_0'],[-1,' * Read WMS Capabilities version 1.1.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WMSCapabilities.v1_1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMSCapabilities.v1_1_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.WMSCapabilities.v1_1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} The specific parser version.'],[-1,'     *\/'],[-1,'    version: \&quot;1.1.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMSCapabilities.v1_1_0'],[-1,'     * Create a new parser for WMS capabilities version 1.1.0.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wms\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;SRS\&quot;: function(node, obj) {'],[0,'                var srs = this.getChildValue(node);'],[0,'                var values = srs.split(\/ +\/);'],[0,'                for (var i=0, len=values.length; i&lt;len; i++) {'],[0,'                    obj.srs[values[i]] = true;'],[-1,'                }'],[-1,'            }'],[-1,'        }, OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers[\&quot;wms\&quot;])'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMSCapabilities.v1_1_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Protocol\/WFS\/v1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Protocol\/WFS.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Protocol.WFS.v1'],[-1,' * Abstract class for for v1.0.0 and v1.1.0 protocol.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Protocol&gt;'],[-1,' *\/'],[1,'OpenLayers.Protocol.WFS.v1 = OpenLayers.Class(OpenLayers.Protocol, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} WFS version number.'],[-1,'     *\/'],[-1,'    version: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: srsName'],[-1,'     * {String} Name of spatial reference system.  Default is \&quot;EPSG:4326\&quot;.'],[-1,'     *\/'],[-1,'    srsName: \&quot;EPSG:4326\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: featureType'],[-1,'     * {String} Local feature typeName.'],[-1,'     *\/'],[-1,'    featureType: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: featureNS'],[-1,'     * {String} Feature namespace.'],[-1,'     *\/'],[-1,'    featureNS: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: geometryName'],[-1,'     * {String} Name of the geometry attribute for features.  Default is'],[-1,'     *     \&quot;the_geom\&quot; for WFS &lt;version&gt; 1.0, and null for higher versions.'],[-1,'     *\/'],[-1,'    geometryName: \&quot;the_geom\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: maxFeatures'],[-1,'     * {Integer} Optional maximum number of features to retrieve.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schema'],[-1,'     * {String} Optional schema location that will be included in the'],[-1,'     *     schemaLocation attribute value.  Note that the feature type schema'],[-1,'     *     is required for a strict XML validator (on transactions with an'],[-1,'     *     insert for example), but is *not* required by the WFS specification'],[-1,'     *     (since the server is supposed to know about feature type schemas).'],[-1,'     *\/'],[-1,'    schema: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: featurePrefix'],[-1,'     * {String} Namespace alias for feature type.  Default is \&quot;feature\&quot;.'],[-1,'     *\/'],[-1,'    featurePrefix: \&quot;feature\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: formatOptions'],[-1,'     * {Object} Optional options for the format.  If a format is not provided,'],[-1,'     *     this property can be used to extend the default format options.'],[-1,'     *\/'],[-1,'    formatOptions: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: readFormat '],[-1,'     * {&lt;OpenLayers.Format&gt;} For WFS requests it is possible to get a  '],[-1,'     *     different output format than GML. In that case, we cannot parse  '],[-1,'     *     the response with the default format (WFST) and we need a different '],[-1,'     *     format for reading. '],[-1,'     *\/ '],[-1,'    readFormat: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readOptions'],[-1,'     * {Object} Optional object to pass to format\'s read.'],[-1,'     *\/'],[-1,'    readOptions: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Protocol.WFS'],[-1,'     * A class for giving layers WFS protocol.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *'],[-1,'     * Valid options properties:'],[-1,'     * url - {String} URL to send requests to (required).'],[-1,'     * featureType - {String} Local (without prefix) feature typeName (required).'],[-1,'     * featureNS - {String} Feature namespace (required, but can be autodetected'],[-1,'     *     during the first query if GML is used as readFormat and'],[-1,'     *     featurePrefix is provided and matches the prefix used by the server'],[-1,'     *     for this featureType).'],[-1,'     * featurePrefix - {String} Feature namespace alias (optional - only used'],[-1,'     *     for writing if featureNS is provided).  Default is \'feature\'.'],[-1,'     * geometryName - {String} Name of geometry attribute.  The default is'],[-1,'     *     \'the_geom\' for WFS &lt;version&gt; 1.0, and null for higher versions. If'],[-1,'     *     null, it will be set to the name of the first geometry found in the'],[-1,'     *     first read operation.'],[-1,'     * multi - {Boolean} If set to true, geometries will be casted to Multi'],[-1,'     *     geometries before they are written in a transaction. No casting will'],[-1,'     *     be done when reading features.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Protocol.prototype.initialize.apply(this, [options]);'],[0,'        if(!options.format) {'],[0,'            this.format = OpenLayers.Format.WFST(OpenLayers.Util.extend({'],[-1,'                version: this.version,'],[-1,'                featureType: this.featureType,'],[-1,'                featureNS: this.featureNS,'],[-1,'                featurePrefix: this.featurePrefix,'],[-1,'                geometryName: this.geometryName,'],[-1,'                srsName: this.srsName,'],[-1,'                schema: this.schema'],[-1,'            }, this.formatOptions));'],[-1,'        }'],[0,'        if (!options.geometryName &amp;&amp; parseFloat(this.format.version) &gt; 1.0) {'],[0,'            this.setGeometryName(null);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Clean up the protocol.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if(this.options &amp;&amp; !this.options.format) {'],[0,'            this.format.destroy();'],[-1,'        }'],[0,'        this.format = null;'],[0,'        OpenLayers.Protocol.prototype.destroy.apply(this);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Construct a request for reading new features.  Since WFS splits the'],[-1,'     *     basic CRUD operations into GetFeature requests (for read) and'],[-1,'     *     Transactions (for all others), this method does not make use of the'],[-1,'     *     format\'s read method (that is only about reading transaction'],[-1,'     *     responses).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Options for the read operation, in addition to the'],[-1,'     *     options set on the instance (options set here will take precedence).'],[-1,'     *'],[-1,'     * To use a configured protocol to get e.g. a WFS hit count, applications'],[-1,'     * could do the following:'],[-1,'     *'],[-1,'     * (code)'],[-1,'     * protocol.read({'],[-1,'     *     readOptions: {output: \&quot;object\&quot;},'],[-1,'     *     resultType: \&quot;hits\&quot;,'],[-1,'     *     maxFeatures: null,'],[-1,'     *     callback: function(resp) {'],[-1,'     *         \/\/ process resp.numberOfFeatures here'],[-1,'     *     }'],[-1,'     * });'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * To use a configured protocol to use WFS paging (if supported by the'],[-1,'     * server), applications could do the following:'],[-1,'     *'],[-1,'     * (code)'],[-1,'     * protocol.read({'],[-1,'     *     startIndex: 0,'],[-1,'     *     count: 50'],[-1,'     * });'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * To limit the attributes returned by the GetFeature request, applications'],[-1,'     * can use the propertyNames option to specify the properties to include in'],[-1,'     * the response:'],[-1,'     *'],[-1,'     * (code)'],[-1,'     * protocol.read({'],[-1,'     *     propertyNames: [\&quot;DURATION\&quot;, \&quot;INTENSITY\&quot;]'],[-1,'     * });'],[-1,'     * (end)'],[-1,'     *\/'],[-1,'    read: function(options) {'],[0,'        OpenLayers.Protocol.prototype.read.apply(this, arguments);'],[0,'        options = OpenLayers.Util.extend({}, options);'],[0,'        OpenLayers.Util.applyDefaults(options, this.options || {});'],[0,'        var response = new OpenLayers.Protocol.Response({requestType: \&quot;read\&quot;});'],[-1,'        '],[0,'        var data = OpenLayers.Format.XML.prototype.write.apply('],[-1,'            this.format, [this.format.writeNode(\&quot;wfs:GetFeature\&quot;, options)]'],[-1,'        );'],[-1,''],[0,'        response.priv = OpenLayers.Request.POST({'],[-1,'            url: options.url,'],[-1,'            callback: this.createCallback(this.handleRead, response, options),'],[-1,'            params: options.params,'],[-1,'            headers: options.headers,'],[-1,'            data: data'],[-1,'        });'],[-1,''],[0,'        return response;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setFeatureType'],[-1,'     * Change the feature type on the fly.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * featureType - {String} Local (without prefix) feature typeName.'],[-1,'     *\/'],[-1,'    setFeatureType: function(featureType) {'],[0,'        this.featureType = featureType;'],[0,'        this.format.featureType = featureType;'],[-1,'    },'],[-1,' '],[-1,'    \/**'],[-1,'     * APIMethod: setGeometryName'],[-1,'     * Sets the geometryName option after instantiation.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometryName - {String} Name of geometry attribute.'],[-1,'     *\/'],[-1,'    setGeometryName: function(geometryName) {'],[0,'        this.geometryName = geometryName;'],[0,'        this.format.geometryName = geometryName;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: handleRead'],[-1,'     * Deal with response from the read request.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * response - {&lt;OpenLayers.Protocol.Response&gt;} The response object to pass'],[-1,'     *     to the user callback.'],[-1,'     * options - {Object} The user options passed to the read call.'],[-1,'     *\/'],[-1,'    handleRead: function(response, options) {'],[0,'        options = OpenLayers.Util.extend({}, options);'],[0,'        OpenLayers.Util.applyDefaults(options, this.options);'],[-1,''],[0,'        if(options.callback) {'],[0,'            var request = response.priv;'],[0,'            if(request.status &gt;= 200 &amp;&amp; request.status &lt; 300) {'],[-1,'                \/\/ success'],[0,'                var result = this.parseResponse(request, options.readOptions);'],[0,'                if (result &amp;&amp; result.success !== false) { '],[0,'                    if (options.readOptions &amp;&amp; options.readOptions.output == \&quot;object\&quot;) {'],[0,'                        OpenLayers.Util.extend(response, result);'],[-1,'                    } else {'],[0,'                        response.features = result;'],[-1,'                    }'],[0,'                    response.code = OpenLayers.Protocol.Response.SUCCESS;'],[-1,'                } else {'],[-1,'                    \/\/ failure (service exception)'],[0,'                    response.code = OpenLayers.Protocol.Response.FAILURE;'],[0,'                    response.error = result;'],[-1,'                }'],[-1,'            } else {'],[-1,'                \/\/ failure'],[0,'                response.code = OpenLayers.Protocol.Response.FAILURE;'],[-1,'            }'],[0,'            options.callback.call(options.scope, response);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseResponse'],[-1,'     * Read HTTP response body and return features'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * request - {XMLHttpRequest} The request object'],[-1,'     * options - {Object} Optional object to pass to format\'s read'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} or {Array({&lt;OpenLayers.Feature.Vector&gt;})} or'],[-1,'     *     {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     * An object with a features property, an array of features or a single '],[-1,'     * feature.'],[-1,'     *\/'],[-1,'    parseResponse: function(request, options) {'],[0,'        var doc = request.responseXML;'],[0,'        if(!doc || !doc.documentElement) {'],[0,'            doc = request.responseText;'],[-1,'        }'],[0,'        if(!doc || doc.length &lt;= 0) {'],[0,'            return null;'],[-1,'        }'],[0,'        var result = (this.readFormat !== null) ? this.readFormat.read(doc) : '],[-1,'            this.format.read(doc, options);'],[0,'        if (!this.featureNS) {'],[0,'            var format = this.readFormat || this.format;'],[0,'            this.featureNS = format.featureNS;'],[-1,'            \/\/ no need to auto-configure again on subsequent reads'],[0,'            format.autoConfig = false;'],[0,'            if (!this.geometryName) {'],[0,'                this.setGeometryName(format.geometryName);'],[-1,'            }'],[-1,'        }'],[0,'        return result;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: commit'],[-1,'     * Given a list of feature, assemble a batch request for update, create,'],[-1,'     *     and delete transactions.  A commit call on the prototype amounts'],[-1,'     *     to writing a WFS transaction - so the write method on the format'],[-1,'     *     is used.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)}'],[-1,'     * options - {Object}'],[-1,'     *'],[-1,'     * Valid options properties:'],[-1,'     * nativeElements - {Array({Object})} Array of objects with information for writing'],[-1,'     * out &lt;Native&gt; elements, these objects have vendorId, safeToIgnore and'],[-1,'     * value properties. The &lt;Native&gt; element is intended to allow access to '],[-1,'     * vendor specific capabilities of any particular web feature server or '],[-1,'     * datastore.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} A response object with a features'],[-1,'     *     property containing any insertIds and a priv property referencing'],[-1,'     *     the XMLHttpRequest object.'],[-1,'     *\/'],[-1,'    commit: function(features, options) {'],[-1,''],[0,'        options = OpenLayers.Util.extend({}, options);'],[0,'        OpenLayers.Util.applyDefaults(options, this.options);'],[-1,'        '],[0,'        var response = new OpenLayers.Protocol.Response({'],[-1,'            requestType: \&quot;commit\&quot;,'],[-1,'            reqFeatures: features'],[-1,'        });'],[0,'        response.priv = OpenLayers.Request.POST({'],[-1,'            url: options.url,'],[-1,'            headers: options.headers,'],[-1,'            data: this.format.write(features, options),'],[-1,'            callback: this.createCallback(this.handleCommit, response, options)'],[-1,'        });'],[-1,'        '],[0,'        return response;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: handleCommit'],[-1,'     * Called when the commit request returns.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * response - {&lt;OpenLayers.Protocol.Response&gt;} The response object to pass'],[-1,'     *     to the user callback.'],[-1,'     * options - {Object} The user options passed to the commit call.'],[-1,'     *\/'],[-1,'    handleCommit: function(response, options) {'],[0,'        if(options.callback) {'],[0,'            var request = response.priv;'],[-1,''],[-1,'            \/\/ ensure that we have an xml doc'],[0,'            var data = request.responseXML;'],[0,'            if(!data || !data.documentElement) {'],[0,'                data = request.responseText;'],[-1,'            }'],[-1,'            '],[0,'            var obj = this.format.read(data) || {};'],[-1,'            '],[0,'            response.insertIds = obj.insertIds || [];'],[0,'            if (obj.success) {'],[0,'                response.code = OpenLayers.Protocol.Response.SUCCESS;'],[-1,'            } else {'],[0,'                response.code = OpenLayers.Protocol.Response.FAILURE;'],[0,'                response.error = obj;'],[-1,'            }'],[0,'            options.callback.call(options.scope, response);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: filterDelete'],[-1,'     * Send a request that deletes all features by their filter.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * filter - {&lt;OpenLayers.Filter&gt;} filter'],[-1,'     *\/'],[-1,'    filterDelete: function(filter, options) {'],[0,'        options = OpenLayers.Util.extend({}, options);'],[0,'        OpenLayers.Util.applyDefaults(options, this.options);    '],[-1,'        '],[0,'        var response = new OpenLayers.Protocol.Response({'],[-1,'            requestType: \&quot;commit\&quot;'],[-1,'        });    '],[-1,'        '],[0,'        var root = this.format.createElementNSPlus(\&quot;wfs:Transaction\&quot;, {'],[-1,'            attributes: {'],[-1,'                service: \&quot;WFS\&quot;,'],[-1,'                version: this.version'],[-1,'            }'],[-1,'        });'],[-1,'        '],[0,'        var deleteNode = this.format.createElementNSPlus(\&quot;wfs:Delete\&quot;, {'],[-1,'            attributes: {'],[-1,'                typeName: (options.featureNS ? this.featurePrefix + \&quot;:\&quot; : \&quot;\&quot;) +'],[-1,'                    options.featureType'],[-1,'            }'],[-1,'        });       '],[-1,'        '],[0,'        if(options.featureNS) {'],[0,'            deleteNode.setAttribute(\&quot;xmlns:\&quot; + this.featurePrefix, options.featureNS);'],[-1,'        }'],[0,'        var filterNode = this.format.writeNode(\&quot;ogc:Filter\&quot;, filter);'],[-1,'        '],[0,'        deleteNode.appendChild(filterNode);'],[-1,'        '],[0,'        root.appendChild(deleteNode);'],[-1,'        '],[0,'        var data = OpenLayers.Format.XML.prototype.write.apply('],[-1,'            this.format, [root]'],[-1,'        );'],[-1,'        '],[0,'        return OpenLayers.Request.POST({'],[-1,'            url: this.url,'],[-1,'            callback : options.callback || function(){},'],[-1,'            data: data'],[-1,'        });   '],[-1,'        '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: abort'],[-1,'     * Abort an ongoing request, the response object passed to'],[-1,'     * this method must come from this protocol (as a result'],[-1,'     * of a read, or commit operation).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * response - {&lt;OpenLayers.Protocol.Response&gt;}'],[-1,'     *\/'],[-1,'    abort: function(response) {'],[0,'        if (response) {'],[0,'            response.priv.abort();'],[-1,'        }'],[-1,'    },'],[-1,'  '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Protocol.WFS.v1\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler\/Feature.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Handler.Feature '],[-1,' * Handler to respond to mouse events related to a drawn feature.  Callbacks'],[-1,' *     with the following keys will be notified of the following events'],[-1,' *     associated with features: click, clickout, over, out, and dblclick.'],[-1,' *'],[-1,' * This handler stops event propagation for mousedown and mouseup if those'],[-1,' *     browser events target features that can be selected.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Handler&gt;'],[-1,' *\/'],[1,'OpenLayers.Handler.Feature = OpenLayers.Class(OpenLayers.Handler, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: EVENTMAP'],[-1,'     * {Object} A object mapping the browser events to objects with callback'],[-1,'     *     keys for in and out.'],[-1,'     *\/'],[-1,'    EVENTMAP: {'],[-1,'        \'click\': {\'in\': \'click\', \'out\': \'clickout\'},'],[-1,'        \'mousemove\': {\'in\': \'over\', \'out\': \'out\'},'],[-1,'        \'dblclick\': {\'in\': \'dblclick\', \'out\': null},'],[-1,'        \'mousedown\': {\'in\': null, \'out\': null},'],[-1,'        \'mouseup\': {\'in\': null, \'out\': null},'],[-1,'        \'touchstart\': {\'in\': \'click\', \'out\': \'clickout\'}'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: feature'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} The last feature that was hovered.'],[-1,'     *\/'],[-1,'    feature: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: lastFeature'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} The last feature that was handled.'],[-1,'     *\/'],[-1,'    lastFeature: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: down'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} The location of the last mousedown.'],[-1,'     *\/'],[-1,'    down: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: up'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} The location of the last mouseup.'],[-1,'     *\/'],[-1,'    up: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: touch'],[-1,'     * {Boolean} When a touchstart event is fired, touch will be true and all'],[-1,'     *     mouse related listeners will do nothing.'],[-1,'     *\/'],[-1,'    touch: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: clickTolerance'],[-1,'     * {Number} The number of pixels the mouse can move between mousedown'],[-1,'     *     and mouseup for the event to still be considered a click.'],[-1,'     *     Dragging the map should not trigger the click and clickout callbacks'],[-1,'     *     unless the map is moved by less than this tolerance. Defaults to 4.'],[-1,'     *\/'],[-1,'    clickTolerance: 4,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: geometryTypes'],[-1,'     * To restrict dragging to a limited set of geometry types, send a list'],[-1,'     * of strings corresponding to the geometry class names.'],[-1,'     * '],[-1,'     * @type Array(String)'],[-1,'     *\/'],[-1,'    geometryTypes: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: stopClick'],[-1,'     * {Boolean} If stopClick is set to true, handled clicks do not'],[-1,'     *      propagate to other click listeners. Otherwise, handled clicks'],[-1,'     *      do propagate. Unhandled clicks always propagate, whatever the'],[-1,'     *      value of stopClick. Defaults to true.'],[-1,'     *\/'],[-1,'    stopClick: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: stopDown'],[-1,'     * {Boolean} If stopDown is set to true, handled mousedowns do not'],[-1,'     *      propagate to other mousedown listeners. Otherwise, handled'],[-1,'     *      mousedowns do propagate. Unhandled mousedowns always propagate,'],[-1,'     *      whatever the value of stopDown. Defaults to true.'],[-1,'     *\/'],[-1,'    stopDown: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: stopUp'],[-1,'     * {Boolean} If stopUp is set to true, handled mouseups do not'],[-1,'     *      propagate to other mouseup listeners. Otherwise, handled mouseups'],[-1,'     *      do propagate. Unhandled mouseups always propagate, whatever the'],[-1,'     *      value of stopUp. Defaults to false.'],[-1,'     *\/'],[-1,'    stopUp: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler.Feature'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} '],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;}'],[-1,'     * callbacks - {Object} An object with a \'over\' property whos value is'],[-1,'     *     a function to be called when the mouse is over a feature. The '],[-1,'     *     callback should expect to recieve a single argument, the feature.'],[-1,'     * options - {Object} '],[-1,'     *\/'],[-1,'    initialize: function(control, layer, callbacks, options) {'],[0,'        OpenLayers.Handler.prototype.initialize.apply(this, [control, callbacks, options]);'],[0,'        this.layer = layer;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: touchstart'],[-1,'     * Handle touchstart events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    touchstart: function(evt) {'],[0,'        if(!this.touch) {'],[0,'            this.touch =  true;'],[0,'            this.map.events.un({'],[-1,'                mousedown: this.mousedown,'],[-1,'                mouseup: this.mouseup,'],[-1,'                mousemove: this.mousemove,'],[-1,'                click: this.click,'],[-1,'                dblclick: this.dblclick,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        return OpenLayers.Event.isMultiTouch(evt) ?'],[-1,'                true : this.mousedown(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: touchmove'],[-1,'     * Handle touchmove events. We just prevent the browser default behavior,'],[-1,'     *    for Android Webkit not to select text when moving the finger after'],[-1,'     *    selecting a feature.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *\/'],[-1,'    touchmove: function(evt) {'],[0,'        OpenLayers.Event.stop(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mousedown'],[-1,'     * Handle mouse down.  Stop propagation if a feature is targeted by this'],[-1,'     *     event (stops map dragging during feature selection).'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    mousedown: function(evt) {'],[-1,'        \/\/ Feature selection is only done with a left click. Other handlers may stop the'],[-1,'        \/\/ propagation of left-click mousedown events but not right-click mousedown events.'],[-1,'        \/\/ This mismatch causes problems when comparing the location of the down and up'],[-1,'        \/\/ events in the click function so it is important ignore right-clicks.'],[0,'        if (OpenLayers.Event.isLeftClick(evt) || OpenLayers.Event.isSingleTouch(evt)) {'],[0,'            this.down = evt.xy;'],[-1,'        }'],[0,'        return this.handle(evt) ? !this.stopDown : true;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: mouseup'],[-1,'     * Handle mouse up.  Stop propagation if a feature is targeted by this'],[-1,'     *     event.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    mouseup: function(evt) {'],[0,'        this.up = evt.xy;'],[0,'        return this.handle(evt) ? !this.stopUp : true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: click'],[-1,'     * Handle click.  Call the \&quot;click\&quot; callback if click on a feature,'],[-1,'     *     or the \&quot;clickout\&quot; callback if click outside any feature.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    click: function(evt) {'],[0,'        return this.handle(evt) ? !this.stopClick : true;'],[-1,'    },'],[-1,'        '],[-1,'    \/**'],[-1,'     * Method: mousemove'],[-1,'     * Handle mouse moves.  Call the \&quot;over\&quot; callback if moving in to a feature,'],[-1,'     *     or the \&quot;out\&quot; callback if moving out of a feature.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    mousemove: function(evt) {'],[0,'        if (!this.callbacks[\'over\'] &amp;&amp; !this.callbacks[\'out\']) {'],[0,'            return true;'],[-1,'        }     '],[0,'        this.handle(evt);'],[0,'        return true;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: dblclick'],[-1,'     * Handle dblclick.  Call the \&quot;dblclick\&quot; callback if dblclick on a feature.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    dblclick: function(evt) {'],[0,'        return !this.handle(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: geometryTypeMatches'],[-1,'     * Return true if the geometry type of the passed feature matches'],[-1,'     *     one of the geometry types in the geometryTypes array.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Vector.Feature&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    geometryTypeMatches: function(feature) {'],[0,'        return this.geometryTypes == null ||'],[-1,'            OpenLayers.Util.indexOf(this.geometryTypes,'],[-1,'                                    feature.geometry.CLASS_NAME) &gt; -1;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handle'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The event occurred over a relevant feature.'],[-1,'     *\/'],[-1,'    handle: function(evt) {'],[0,'        if(this.feature &amp;&amp; !this.feature.layer) {'],[-1,'            \/\/ feature has been destroyed'],[0,'            this.feature = null;'],[-1,'        }'],[0,'        var type = evt.type;'],[0,'        var handled = false;'],[0,'        var previouslyIn = !!(this.feature); \/\/ previously in a feature'],[0,'        var click = (type == \&quot;click\&quot; || type == \&quot;dblclick\&quot; || type == \&quot;touchstart\&quot;);'],[0,'        this.feature = this.layer.getFeatureFromEvent(evt);'],[0,'        if(this.feature &amp;&amp; !this.feature.layer) {'],[-1,'            \/\/ feature has been destroyed'],[0,'            this.feature = null;'],[-1,'        }'],[0,'        if(this.lastFeature &amp;&amp; !this.lastFeature.layer) {'],[-1,'            \/\/ last feature has been destroyed'],[0,'            this.lastFeature = null;'],[-1,'        }'],[0,'        if(this.feature) {'],[0,'            if(type === \&quot;touchstart\&quot;) {'],[-1,'                \/\/ stop the event to prevent Android Webkit from'],[-1,'                \/\/ \&quot;flashing\&quot; the map div'],[0,'                OpenLayers.Event.stop(evt);'],[-1,'            }'],[0,'            var inNew = (this.feature != this.lastFeature);'],[0,'            if(this.geometryTypeMatches(this.feature)) {'],[-1,'                \/\/ in to a feature'],[0,'                if(previouslyIn &amp;&amp; inNew) {'],[-1,'                    \/\/ out of last feature and in to another'],[0,'                    if(this.lastFeature) {'],[0,'                        this.triggerCallback(type, \'out\', [this.lastFeature]);'],[-1,'                    }'],[0,'                    this.triggerCallback(type, \'in\', [this.feature]);'],[0,'                } else if(!previouslyIn || click) {'],[-1,'                    \/\/ in feature for the first time'],[0,'                    this.triggerCallback(type, \'in\', [this.feature]);'],[-1,'                }'],[0,'                this.lastFeature = this.feature;'],[0,'                handled = true;'],[-1,'            } else {'],[-1,'                \/\/ not in to a feature'],[0,'                if(this.lastFeature &amp;&amp; (previouslyIn &amp;&amp; inNew || click)) {'],[-1,'                    \/\/ out of last feature for the first time'],[0,'                    this.triggerCallback(type, \'out\', [this.lastFeature]);'],[-1,'                }'],[-1,'                \/\/ next time the mouse goes in a feature whose geometry type'],[-1,'                \/\/ doesn\'t match we don\'t want to call the \'out\' callback'],[-1,'                \/\/ again, so let\'s set this.feature to null so that'],[-1,'                \/\/ previouslyIn will evaluate to false the next time'],[-1,'                \/\/ we enter handle. Yes, a bit hackish...'],[0,'                this.feature = null;'],[-1,'            }'],[0,'        } else if(this.lastFeature &amp;&amp; (previouslyIn || click)) {'],[0,'            this.triggerCallback(type, \'out\', [this.lastFeature]);'],[-1,'        }'],[0,'        return handled;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: triggerCallback'],[-1,'     * Call the callback keyed in the event map with the supplied arguments.'],[-1,'     *     For click and clickout, the &lt;clickTolerance&gt; is checked first.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * type - {String}'],[-1,'     *\/'],[-1,'    triggerCallback: function(type, mode, args) {'],[0,'        var key = this.EVENTMAP[type][mode];'],[0,'        if(key) {'],[0,'            if(type == \'click\' &amp;&amp; this.up &amp;&amp; this.down) {'],[-1,'                \/\/ for click\/clickout, only trigger callback if tolerance is met'],[0,'                var dpx = Math.sqrt('],[-1,'                    Math.pow(this.up.x - this.down.x, 2) +'],[-1,'                    Math.pow(this.up.y - this.down.y, 2)'],[-1,'                );'],[0,'                if(dpx &lt;= this.clickTolerance) {'],[0,'                    this.callback(key, args);'],[-1,'                }'],[-1,'                \/\/ we\'re done with this set of events now: clear the cached'],[-1,'                \/\/ positions so we can\'t trip over them later (this can occur'],[-1,'                \/\/ if one of the up\/down events gets eaten before it gets to us'],[-1,'                \/\/ but we still get the click)'],[0,'                this.up = this.down = null;'],[-1,'            } else {'],[0,'                this.callback(key, args);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: activate '],[-1,'     * Turn on the handler.  Returns false if the handler was already active.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = false;'],[0,'        if(OpenLayers.Handler.prototype.activate.apply(this, arguments)) {'],[0,'            this.moveLayerToTop();'],[0,'            this.map.events.on({'],[-1,'                \&quot;removelayer\&quot;: this.handleMapEvents,'],[-1,'                \&quot;changelayer\&quot;: this.handleMapEvents,'],[-1,'                scope: this'],[-1,'            });'],[0,'            activated = true;'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: deactivate '],[-1,'     * Turn off the handler.  Returns false if the handler was already active.'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = false;'],[0,'        if(OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {'],[0,'            this.moveLayerBack();'],[0,'            this.feature = null;'],[0,'            this.lastFeature = null;'],[0,'            this.down = null;'],[0,'            this.up = null;'],[0,'            this.touch = false;'],[0,'            this.map.events.un({'],[-1,'                \&quot;removelayer\&quot;: this.handleMapEvents,'],[-1,'                \&quot;changelayer\&quot;: this.handleMapEvents,'],[-1,'                scope: this'],[-1,'            });'],[0,'            deactivated = true;'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: handleMapEvents'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Object}'],[-1,'     *\/'],[-1,'    handleMapEvents: function(evt) {'],[0,'        if (evt.type == \&quot;removelayer\&quot; || evt.property == \&quot;order\&quot;) {'],[0,'            this.moveLayerToTop();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: moveLayerToTop'],[-1,'     * Moves the layer for this handler to the top, so mouse events can reach'],[-1,'     * it.'],[-1,'     *\/'],[-1,'    moveLayerToTop: function() {'],[0,'        var index = Math.max(this.map.Z_INDEX_BASE[\'Feature\'] - 1,'],[-1,'            this.layer.getZIndex()) + 1;'],[0,'        this.layer.setZIndex(index);'],[-1,'        '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: moveLayerBack'],[-1,'     * Moves the layer back to the position determined by the map\'s layers'],[-1,'     * array.'],[-1,'     *\/'],[-1,'    moveLayerBack: function() {'],[0,'        var index = this.layer.getZIndex() - 1;'],[0,'        if (index &gt;= this.map.Z_INDEX_BASE[\'Feature\']) {'],[0,'            this.layer.setZIndex(index);'],[-1,'        } else {'],[0,'            this.map.setLayerZIndex(this.layer,'],[-1,'                this.map.getLayerIndex(this.layer));'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler.Feature\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/Vector\/RootContainer.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Vector.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.Vector.RootContainer'],[-1,' * A special layer type to combine multiple vector layers inside a single'],[-1,' *     renderer root container. This class is not supposed to be instantiated'],[-1,' *     from user space, it is a helper class for controls that require event'],[-1,' *     processing for multiple vector layers.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Vector&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.Vector.RootContainer = OpenLayers.Class(OpenLayers.Layer.Vector, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: displayInLayerSwitcher'],[-1,'     * Set to false for this layer type'],[-1,'     *\/'],[-1,'    displayInLayerSwitcher: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: layers'],[-1,'     * Layers that are attached to this container. Required config option.'],[-1,'     *\/'],[-1,'    layers: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.Vector.RootContainer'],[-1,'     * Create a new root container for multiple vector layer. This constructor'],[-1,'     * is not supposed to be used from user space, it is only to be used by'],[-1,'     * controls that need feature selection across multiple vector layers.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} A name for the layer'],[-1,'     * options - {Object} Optional object with non-default properties to set on'],[-1,'     *           the layer.'],[-1,'     * '],[-1,'     * Required options properties:'],[-1,'     * layers - {Array(&lt;OpenLayers.Layer.Vector&gt;)} The layers managed by this'],[-1,'     *     container'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.Vector.RootContainer&gt;} A new vector layer root'],[-1,'     *     container'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: display'],[-1,'     *\/'],[-1,'    display: function() {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getFeatureFromEvent'],[-1,'     * walk through the layers to find the feature returned by the event'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Object} event object with a feature property'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    getFeatureFromEvent: function(evt) {'],[0,'        var layers = this.layers;'],[0,'        var feature;'],[0,'        for(var i=0; i&lt;layers.length; i++) {'],[0,'            feature = layers[i].getFeatureFromEvent(evt);'],[0,'            if(feature) {'],[0,'                return feature;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Layer.Vector.prototype.setMap.apply(this, arguments);'],[0,'        this.collectRoots();'],[0,'        map.events.register(\&quot;changelayer\&quot;, this, this.handleChangeLayer);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: removeMap'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    removeMap: function(map) {'],[0,'        map.events.unregister(\&quot;changelayer\&quot;, this, this.handleChangeLayer);'],[0,'        this.resetRoots();'],[0,'        OpenLayers.Layer.Vector.prototype.removeMap.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: collectRoots'],[-1,'     * Collects the root nodes of all layers this control is configured with'],[-1,'     * and moveswien the nodes to this control\'s layer'],[-1,'     *\/'],[-1,'    collectRoots: function() {'],[0,'        var layer;'],[-1,'        \/\/ walk through all map layers, because we want to keep the order'],[0,'        for(var i=0; i&lt;this.map.layers.length; ++i) {'],[0,'            layer = this.map.layers[i];'],[0,'            if(OpenLayers.Util.indexOf(this.layers, layer) != -1) {'],[0,'                layer.renderer.moveRoot(this.renderer);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: resetRoots'],[-1,'     * Resets the root nodes back into the layers they belong to.'],[-1,'     *\/'],[-1,'    resetRoots: function() {'],[0,'        var layer;'],[0,'        for(var i=0; i&lt;this.layers.length; ++i) {'],[0,'            layer = this.layers[i];'],[0,'            if(this.renderer &amp;&amp; layer.renderer.getRenderLayerId() == this.id) {'],[0,'                this.renderer.moveRoot(layer.renderer);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: handleChangeLayer'],[-1,'     * Event handler for the map\'s changelayer event. We need to rebuild'],[-1,'     * this container\'s layer dom if order of one of its layers changes.'],[-1,'     * This handler is added with the setMap method, and removed with the'],[-1,'     * removeMap method.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Object}'],[-1,'     *\/'],[-1,'    handleChangeLayer: function(evt) {'],[0,'        var layer = evt.layer;'],[0,'        if(evt.property == \&quot;order\&quot; &amp;&amp;'],[-1,'                        OpenLayers.Util.indexOf(this.layers, layer) != -1) {'],[0,'            this.resetRoots();'],[0,'            this.collectRoots();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.Vector.RootContainer\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/SelectFeature.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Handler\/Feature.js'],[-1,' * @requires OpenLayers\/Layer\/Vector\/RootContainer.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.SelectFeature'],[-1,' * The SelectFeature control selects vector features from a given layer on '],[-1,' * click or hover. '],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.SelectFeature = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to those from &lt;OpenLayers.Control.events&gt;):'],[-1,'     * beforefeaturehighlighted - Triggered before a feature is highlighted'],[-1,'     * featurehighlighted - Triggered when a feature is highlighted'],[-1,'     * featureunhighlighted - Triggered when a feature is unhighlighted'],[-1,'     * boxselectionstart - Triggered before box selection starts'],[-1,'     * boxselectionend - Triggered after box selection ends'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: multipleKey'],[-1,'     * {String} An event modifier (\'altKey\' or \'shiftKey\') that temporarily sets'],[-1,'     *     the &lt;multiple&gt; property to true.  Default is null.'],[-1,'     *\/'],[-1,'    multipleKey: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: toggleKey'],[-1,'     * {String} An event modifier (\'altKey\' or \'shiftKey\') that temporarily sets'],[-1,'     *     the &lt;toggle&gt; property to true.  Default is null.'],[-1,'     *\/'],[-1,'    toggleKey: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: multiple'],[-1,'     * {Boolean} Allow selection of multiple geometries.  Default is false.'],[-1,'     *\/'],[-1,'    multiple: false, '],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: clickout'],[-1,'     * {Boolean} Unselect features when clicking outside any feature.'],[-1,'     *     Default is true.'],[-1,'     *\/'],[-1,'    clickout: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: toggle'],[-1,'     * {Boolean} Unselect a selected feature on click.  Default is false.  Only'],[-1,'     *     has meaning if hover is false.'],[-1,'     *\/'],[-1,'    toggle: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: hover'],[-1,'     * {Boolean} Select on mouse over and deselect on mouse out.  If true, this'],[-1,'     * ignores clicks and only listens to mouse moves.'],[-1,'     *\/'],[-1,'    hover: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: highlightOnly'],[-1,'     * {Boolean} If true do not actually select features (that is place them in '],[-1,'     * the layer\'s selected features array), just highlight them. This property'],[-1,'     * has no effect if hover is false. Defaults to false.'],[-1,'     *\/'],[-1,'    highlightOnly: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: box'],[-1,'     * {Boolean} Allow feature selection by drawing a box.'],[-1,'     *\/'],[-1,'    box: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: onBeforeSelect '],[-1,'     * {Function} Optional function to be called before a feature is selected.'],[-1,'     *     The function should expect to be called with a feature.'],[-1,'     *\/'],[-1,'    onBeforeSelect: function() {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: onSelect '],[-1,'     * {Function} Optional function to be called when a feature is selected.'],[-1,'     *     The function should expect to be called with a feature.'],[-1,'     *\/'],[-1,'    onSelect: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: onUnselect'],[-1,'     * {Function} Optional function to be called when a feature is unselected.'],[-1,'     *     The function should expect to be called with a feature.'],[-1,'     *\/'],[-1,'    onUnselect: function() {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: scope'],[-1,'     * {Object} The scope to use with the onBeforeSelect, onSelect, onUnselect'],[-1,'     *     callbacks. If null the scope will be this control.'],[-1,'     *\/'],[-1,'    scope: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: geometryTypes'],[-1,'     * {Array(String)} To restrict selecting to a limited set of geometry types,'],[-1,'     *     send a list of strings corresponding to the geometry class names.'],[-1,'     *\/'],[-1,'    geometryTypes: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layer'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;} The vector layer with a common renderer'],[-1,'     * root for all layers this control is configured with (if an array of'],[-1,'     * layers was passed to the constructor), or the vector layer the control'],[-1,'     * was configured with (if a single layer was passed to the constructor).'],[-1,'     *\/'],[-1,'    layer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: layers'],[-1,'     * {Array(&lt;OpenLayers.Layer.Vector&gt;)} The layers this control will work on,'],[-1,'     * or null if the control was configured with a single layer'],[-1,'     *\/'],[-1,'    layers: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: callbacks'],[-1,'     * {Object} The functions that are sent to the handlers.feature for callback'],[-1,'     *\/'],[-1,'    callbacks: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: selectStyle '],[-1,'     * {Object} Hash of styles'],[-1,'     *\/'],[-1,'    selectStyle: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: renderIntent'],[-1,'     * {String} key used to retrieve the select style from the layer\'s'],[-1,'     * style map.'],[-1,'     *\/'],[-1,'    renderIntent: \&quot;select\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: handlers'],[-1,'     * {Object} Object with references to multiple &lt;OpenLayers.Handler&gt;'],[-1,'     *     instances.'],[-1,'     *\/'],[-1,'    handlers: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.SelectFeature'],[-1,'     * Create a new control for selecting features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layers - {&lt;OpenLayers.Layer.Vector&gt;}, or an array of vector layers. The'],[-1,'     *     layer(s) this control will select features from.'],[-1,'     * options - {Object} '],[-1,'     *\/'],[-1,'    initialize: function(layers, options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[-1,'        '],[0,'        if(this.scope === null) {'],[0,'            this.scope = this;'],[-1,'        }'],[0,'        this.initLayer(layers);'],[0,'        var callbacks = {'],[-1,'            click: this.clickFeature,'],[-1,'            clickout: this.clickoutFeature'],[-1,'        };'],[0,'        if (this.hover) {'],[0,'            callbacks.over = this.overFeature;'],[0,'            callbacks.out = this.outFeature;'],[-1,'        }'],[-1,'             '],[0,'        this.callbacks = OpenLayers.Util.extend(callbacks, this.callbacks);'],[0,'        this.handlers = {'],[-1,'            feature: new OpenLayers.Handler.Feature('],[-1,'                this, this.layer, this.callbacks,'],[-1,'                {geometryTypes: this.geometryTypes}'],[-1,'            )'],[-1,'        };'],[-1,''],[0,'        if (this.box) {'],[0,'            this.handlers.box = new OpenLayers.Handler.Box('],[-1,'                this, {done: this.selectBox},'],[-1,'                {boxDivClassName: \&quot;olHandlerBoxSelectFeature\&quot;}'],[-1,'            ); '],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: initLayer'],[-1,'     * Assign the layer property. If layers is an array, we need to use'],[-1,'     *     a RootContainer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layers - {&lt;OpenLayers.Layer.Vector&gt;}, or an array of vector layers.'],[-1,'     *\/'],[-1,'    initLayer: function(layers) {'],[0,'        if(OpenLayers.Util.isArray(layers)) {'],[0,'            this.layers = layers;'],[0,'            this.layer = new OpenLayers.Layer.Vector.RootContainer('],[-1,'                this.id + \&quot;_container\&quot;, {'],[-1,'                    layers: layers'],[-1,'                }'],[-1,'            );'],[-1,'        } else {'],[0,'            this.layer = layers;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if(this.active &amp;&amp; this.layers) {'],[0,'            this.map.removeLayer(this.layer);'],[-1,'        }'],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments);'],[0,'        if(this.layers) {'],[0,'            this.layer.destroy();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: activate'],[-1,'     * Activates the control.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The control was effectively activated.'],[-1,'     *\/'],[-1,'    activate: function () {'],[0,'        if (!this.active) {'],[0,'            if(this.layers) {'],[0,'                this.map.addLayer(this.layer);'],[-1,'            }'],[0,'            this.handlers.feature.activate();'],[0,'            if(this.box &amp;&amp; this.handlers.box) {'],[0,'                this.handlers.box.activate();'],[-1,'            }'],[-1,'        }'],[0,'        return OpenLayers.Control.prototype.activate.apply('],[-1,'            this, arguments'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: deactivate'],[-1,'     * Deactivates the control.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The control was effectively deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function () {'],[0,'        if (this.active) {'],[0,'            this.handlers.feature.deactivate();'],[0,'            if(this.handlers.box) {'],[0,'                this.handlers.box.deactivate();'],[-1,'            }'],[0,'            if(this.layers) {'],[0,'                this.map.removeLayer(this.layer);'],[-1,'            }'],[-1,'        }'],[0,'        return OpenLayers.Control.prototype.deactivate.apply('],[-1,'            this, arguments'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: unselectAll'],[-1,'     * Unselect all selected features.  To unselect all except for a single'],[-1,'     *     feature, set the options.except property to the feature.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional configuration object.'],[-1,'     *\/'],[-1,'    unselectAll: function(options) {'],[-1,'        \/\/ we\'ll want an option to supress notification here'],[0,'        var layers = this.layers || [this.layer],'],[-1,'            layer, feature, l, numExcept;'],[0,'        for(l=0; l&lt;layers.length; ++l) {'],[0,'            layer = layers[l];'],[0,'            numExcept = 0;'],[-1,'            \/\/layer.selectedFeatures is null when layer is destroyed and '],[-1,'            \/\/one of it\'s preremovelayer listener calls setLayer '],[-1,'            \/\/with another layer on this control'],[0,'            if(layer.selectedFeatures != null) {'],[0,'                while(layer.selectedFeatures.length &gt; numExcept) {'],[0,'                    feature = layer.selectedFeatures[numExcept];'],[0,'                    if(!options || options.except != feature) {'],[0,'                        this.unselect(feature);'],[-1,'                    } else {'],[0,'                        ++numExcept;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clickFeature'],[-1,'     * Called on click in a feature'],[-1,'     * Only responds if this.hover is false.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *\/'],[-1,'    clickFeature: function(feature) {'],[0,'        if(!this.hover) {'],[0,'            var selected = (OpenLayers.Util.indexOf('],[-1,'                feature.layer.selectedFeatures, feature) &gt; -1);'],[0,'            if(selected) {'],[0,'                if(this.toggleSelect()) {'],[0,'                    this.unselect(feature);'],[0,'                } else if(!this.multipleSelect()) {'],[0,'                    this.unselectAll({except: feature});'],[-1,'                }'],[-1,'            } else {'],[0,'                if(!this.multipleSelect()) {'],[0,'                    this.unselectAll({except: feature});'],[-1,'                }'],[0,'                this.select(feature);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: multipleSelect'],[-1,'     * Allow for multiple selected features based on &lt;multiple&gt; property and'],[-1,'     *     &lt;multipleKey&gt; event modifier.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Allow for multiple selected features.'],[-1,'     *\/'],[-1,'    multipleSelect: function() {'],[0,'        return this.multiple || (this.handlers.feature.evt &amp;&amp;'],[-1,'                                 this.handlers.feature.evt[this.multipleKey]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: toggleSelect'],[-1,'     * Event should toggle the selected state of a feature based on &lt;toggle&gt;'],[-1,'     *     property and &lt;toggleKey&gt; event modifier.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Toggle the selected state of a feature.'],[-1,'     *\/'],[-1,'    toggleSelect: function() {'],[0,'        return this.toggle || (this.handlers.feature.evt &amp;&amp;'],[-1,'                               this.handlers.feature.evt[this.toggleKey]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clickoutFeature'],[-1,'     * Called on click outside a previously clicked (selected) feature.'],[-1,'     * Only responds if this.hover is false.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Vector.Feature&gt;} '],[-1,'     *\/'],[-1,'    clickoutFeature: function(feature) {'],[0,'        if(!this.hover &amp;&amp; this.clickout) {'],[0,'            this.unselectAll();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: overFeature'],[-1,'     * Called on over a feature.'],[-1,'     * Only responds if this.hover is true.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *\/'],[-1,'    overFeature: function(feature) {'],[0,'        var layer = feature.layer;'],[0,'        if(this.hover) {'],[0,'            if(this.highlightOnly) {'],[0,'                this.highlight(feature);'],[0,'            } else if(OpenLayers.Util.indexOf('],[-1,'                layer.selectedFeatures, feature) == -1) {'],[0,'                this.select(feature);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: outFeature'],[-1,'     * Called on out of a selected feature.'],[-1,'     * Only responds if this.hover is true.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *\/'],[-1,'    outFeature: function(feature) {'],[0,'        if(this.hover) {'],[0,'            if(this.highlightOnly) {'],[-1,'                \/\/ we do nothing if we\'re not the last highlighter of the'],[-1,'                \/\/ feature'],[0,'                if(feature._lastHighlighter == this.id) {'],[-1,'                    \/\/ if another select control had highlighted the feature before'],[-1,'                    \/\/ we did it ourself then we use that control to highlight the'],[-1,'                    \/\/ feature as it was before we highlighted it, else we just'],[-1,'                    \/\/ unhighlight it'],[0,'                    if(feature._prevHighlighter &amp;&amp;'],[-1,'                       feature._prevHighlighter != this.id) {'],[0,'                        delete feature._lastHighlighter;'],[0,'                        var control = this.map.getControl('],[-1,'                            feature._prevHighlighter);'],[0,'                        if(control) {'],[0,'                            control.highlight(feature);'],[-1,'                        }'],[-1,'                    } else {'],[0,'                        this.unhighlight(feature);'],[-1,'                    }'],[-1,'                }'],[-1,'            } else {'],[0,'                this.unselect(feature);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: highlight'],[-1,'     * Redraw feature with the select style.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *\/'],[-1,'    highlight: function(feature) {'],[0,'        var layer = feature.layer;'],[0,'        var cont = this.events.triggerEvent(\&quot;beforefeaturehighlighted\&quot;, {'],[-1,'            feature : feature'],[-1,'        });'],[0,'        if(cont !== false) {'],[0,'            feature._prevHighlighter = feature._lastHighlighter;'],[0,'            feature._lastHighlighter = this.id;'],[0,'            var style = this.selectStyle || this.renderIntent;'],[0,'            layer.drawFeature(feature, style);'],[0,'            this.events.triggerEvent(\&quot;featurehighlighted\&quot;, {feature : feature});'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: unhighlight'],[-1,'     * Redraw feature with the \&quot;default\&quot; style'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *\/'],[-1,'    unhighlight: function(feature) {'],[0,'        var layer = feature.layer;'],[-1,'        \/\/ three cases:'],[-1,'        \/\/ 1. there\'s no other highlighter, in that case _prev is undefined,'],[-1,'        \/\/    and we just need to undef _last'],[-1,'        \/\/ 2. another control highlighted the feature after we did it, in'],[-1,'        \/\/    that case _last references this other control, and we just'],[-1,'        \/\/    need to undef _prev'],[-1,'        \/\/ 3. another control highlighted the feature before we did it, in'],[-1,'        \/\/    that case _prev references this other control, and we need to'],[-1,'        \/\/    set _last to _prev and undef _prev'],[0,'        if(feature._prevHighlighter == undefined) {'],[0,'            delete feature._lastHighlighter;'],[0,'        } else if(feature._prevHighlighter == this.id) {'],[0,'            delete feature._prevHighlighter;'],[-1,'        } else {'],[0,'            feature._lastHighlighter = feature._prevHighlighter;'],[0,'            delete feature._prevHighlighter;'],[-1,'        }'],[0,'        layer.drawFeature(feature, feature.style || feature.layer.style ||'],[-1,'            \&quot;default\&quot;);'],[0,'        this.events.triggerEvent(\&quot;featureunhighlighted\&quot;, {feature : feature});'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: select'],[-1,'     * Add feature to the layer\'s selectedFeature array, render the feature as'],[-1,'     * selected, and call the onSelect function.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *\/'],[-1,'    select: function(feature) {'],[0,'        var cont = this.onBeforeSelect.call(this.scope, feature);'],[0,'        var layer = feature.layer;'],[0,'        if(cont !== false) {'],[0,'            cont = layer.events.triggerEvent(\&quot;beforefeatureselected\&quot;, {'],[-1,'                feature: feature'],[-1,'            });'],[0,'            if(cont !== false) {'],[0,'                layer.selectedFeatures.push(feature);'],[0,'                this.highlight(feature);'],[-1,'                \/\/ if the feature handler isn\'t involved in the feature'],[-1,'                \/\/ selection (because the box handler is used or the'],[-1,'                \/\/ feature is selected programatically) we fake the'],[-1,'                \/\/ feature handler to allow unselecting on click'],[0,'                if(!this.handlers.feature.lastFeature) {'],[0,'                    this.handlers.feature.lastFeature = layer.selectedFeatures[0];'],[-1,'                }'],[0,'                layer.events.triggerEvent(\&quot;featureselected\&quot;, {feature: feature});'],[0,'                this.onSelect.call(this.scope, feature);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: unselect'],[-1,'     * Remove feature from the layer\'s selectedFeature array, render the feature as'],[-1,'     * normal, and call the onUnselect function.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    unselect: function(feature) {'],[0,'        var layer = feature.layer;'],[-1,'        \/\/ Store feature style for restoration later'],[0,'        this.unhighlight(feature);'],[0,'        OpenLayers.Util.removeItem(layer.selectedFeatures, feature);'],[0,'        layer.events.triggerEvent(\&quot;featureunselected\&quot;, {feature: feature});'],[0,'        this.onUnselect.call(this.scope, feature);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: selectBox'],[-1,'     * Callback from the handlers.box set up when &lt;box&gt; selection is true'],[-1,'     *     on.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * position - {&lt;OpenLayers.Bounds&gt; || &lt;OpenLayers.Pixel&gt; }  '],[-1,'     *\/'],[-1,'    selectBox: function(position) {'],[0,'        if (position instanceof OpenLayers.Bounds) {'],[0,'            var minXY = this.map.getLonLatFromPixel({'],[-1,'                x: position.left,'],[-1,'                y: position.bottom'],[-1,'            });'],[0,'            var maxXY = this.map.getLonLatFromPixel({'],[-1,'                x: position.right,'],[-1,'                y: position.top'],[-1,'            });'],[0,'            var bounds = new OpenLayers.Bounds('],[-1,'                minXY.lon, minXY.lat, maxXY.lon, maxXY.lat'],[-1,'            );'],[-1,'            '],[-1,'            \/\/ if multiple is false, first deselect currently selected features'],[0,'            if (!this.multipleSelect()) {'],[0,'                this.unselectAll();'],[-1,'            }'],[-1,'            '],[-1,'            \/\/ because we\'re using a box, we consider we want multiple selection'],[0,'            var prevMultiple = this.multiple;'],[0,'            this.multiple = true;'],[0,'            var layers = this.layers || [this.layer];'],[0,'            this.events.triggerEvent(\&quot;boxselectionstart\&quot;, {layers: layers}); '],[0,'            var layer;'],[0,'            for(var l=0; l&lt;layers.length; ++l) {'],[0,'                layer = layers[l];'],[0,'                for(var i=0, len = layer.features.length; i&lt;len; ++i) {'],[0,'                    var feature = layer.features[i];'],[-1,'                    \/\/ check if the feature is displayed'],[0,'                    if (!feature.getVisibility()) {'],[0,'                        continue;'],[-1,'                    }'],[-1,''],[0,'                    if (this.geometryTypes == null || OpenLayers.Util.indexOf('],[-1,'                            this.geometryTypes, feature.geometry.CLASS_NAME) &gt; -1) {'],[0,'                        if (bounds.toGeometry().intersects(feature.geometry)) {'],[0,'                            if (OpenLayers.Util.indexOf(layer.selectedFeatures, feature) == -1) {'],[0,'                                this.select(feature);'],[-1,'                            }'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            this.multiple = prevMultiple;'],[0,'            this.events.triggerEvent(\&quot;boxselectionend\&quot;, {layers: layers}); '],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: setMap'],[-1,'     * Set the map property for the control. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} '],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        this.handlers.feature.setMap(map);'],[0,'        if (this.box) {'],[0,'            this.handlers.box.setMap(map);'],[-1,'        }'],[0,'        OpenLayers.Control.prototype.setMap.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setLayer'],[-1,'     * Attach a new layer to the control, overriding any existing layers.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layers - Array of {&lt;OpenLayers.Layer.Vector&gt;} or a single'],[-1,'     *     {&lt;OpenLayers.Layer.Vector&gt;}'],[-1,'     *\/'],[-1,'    setLayer: function(layers) {'],[0,'        var isActive = this.active;'],[0,'        this.unselectAll();'],[0,'        this.deactivate();'],[0,'        if(this.layers) {'],[0,'            this.layer.destroy();'],[0,'            this.layers = null;'],[-1,'        }'],[0,'        this.initLayer(layers);'],[0,'        this.handlers.feature.layer = this.layer;'],[0,'        if (isActive) {'],[0,'            this.activate();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.SelectFeature\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler\/Point.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Handler.Point'],[-1,' * Handler to draw a point on the map. Point is displayed on activation,'],[-1,' *     moves on mouse move, and is finished on mouse up. The handler triggers'],[-1,' *     callbacks for \'done\', \'cancel\', and \'modify\'. The modify callback is'],[-1,' *     called with each change in the sketch and will receive the latest point'],[-1,' *     drawn.  Create a new instance with the &lt;OpenLayers.Handler.Point&gt;'],[-1,' *     constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Handler&gt;'],[-1,' *\/'],[1,'OpenLayers.Handler.Point = OpenLayers.Class(OpenLayers.Handler, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: point'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} The currently drawn point'],[-1,'     *\/'],[-1,'    point: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layer'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;} The temporary drawing layer'],[-1,'     *\/'],[-1,'    layer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: multi'],[-1,'     * {Boolean} Cast features to multi-part geometries before passing to the'],[-1,'     *     layer.  Default is false.'],[-1,'     *\/'],[-1,'    multi: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: citeCompliant'],[-1,'     * {Boolean} If set to true, coordinates of features drawn in a map extent'],[-1,'     * crossing the date line won\'t exceed the world bounds. Default is false.'],[-1,'     *\/'],[-1,'    citeCompliant: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: mouseDown'],[-1,'     * {Boolean} The mouse is down'],[-1,'     *\/'],[-1,'    mouseDown: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: stoppedDown'],[-1,'     * {Boolean} Indicate whether the last mousedown stopped the event'],[-1,'     * propagation.'],[-1,'     *\/'],[-1,'    stoppedDown: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: lastDown'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} Location of the last mouse down'],[-1,'     *\/'],[-1,'    lastDown: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: lastUp'],[-1,'     * {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *\/'],[-1,'    lastUp: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: persist'],[-1,'     * {Boolean} Leave the feature rendered until destroyFeature is called.'],[-1,'     *     Default is false.  If set to true, the feature remains rendered until'],[-1,'     *     destroyFeature is called, typically by deactivating the handler or'],[-1,'     *     starting another drawing.'],[-1,'     *\/'],[-1,'    persist: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: stopDown'],[-1,'     * {Boolean} Stop event propagation on mousedown. Must be false to'],[-1,'     *     allow \&quot;pan while drawing\&quot;. Defaults to false.'],[-1,'     *\/'],[-1,'    stopDown: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIPropery: stopUp'],[-1,'     * {Boolean} Stop event propagation on mouse. Must be false to'],[-1,'     *     allow \&quot;pan while dragging\&quot;. Defaults to fase.'],[-1,'     *\/'],[-1,'    stopUp: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layerOptions'],[-1,'     * {Object} Any optional properties to be set on the sketch layer.'],[-1,'     *\/'],[-1,'    layerOptions: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: pixelTolerance'],[-1,'     * {Number} Maximum number of pixels between down and up (mousedown'],[-1,'     *     and mouseup, or touchstart and touchend) for the handler to'],[-1,'     *     add a new point. If set to an integer value, if the'],[-1,'     *     displacement between down and up is great to this value'],[-1,'     *     no point will be added. Default value is 5.'],[-1,'     *\/'],[-1,'    pixelTolerance: 5,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: touch'],[-1,'     * {Boolean} Indcates the support of touch events.'],[-1,'     *\/'],[-1,'    touch: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: lastTouchPx'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} The last pixel used to know the distance between'],[-1,'     * two touches (for double touch).'],[-1,'     *\/'],[-1,'    lastTouchPx: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler.Point'],[-1,'     * Create a new point handler.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} The control that owns this handler'],[-1,'     * callbacks - {Object} An object with a properties whose values are'],[-1,'     *     functions.  Various callbacks described below.'],[-1,'     * options - {Object} An optional object with properties to be set on the'],[-1,'     *           handler'],[-1,'     *'],[-1,'     * Named callbacks:'],[-1,'     * create - Called when a sketch is first created.  Callback called with'],[-1,'     *     the creation point geometry and sketch feature.'],[-1,'     * modify - Called with each move of a vertex with the vertex (point)'],[-1,'     *     geometry and the sketch feature.'],[-1,'     * done - Called when the point drawing is finished.  The callback will'],[-1,'     *     recieve a single argument, the point geometry.'],[-1,'     * cancel - Called when the handler is deactivated while drawing.  The'],[-1,'     *     cancel callback will receive a geometry.'],[-1,'     *\/'],[-1,'    initialize: function(control, callbacks, options) {'],[0,'        if(!(options &amp;&amp; options.layerOptions &amp;&amp; options.layerOptions.styleMap)) {'],[0,'            this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style[\'default\'], {});'],[-1,'        }'],[-1,''],[0,'        OpenLayers.Handler.prototype.initialize.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * turn on the handler'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        if(!OpenLayers.Handler.prototype.activate.apply(this, arguments)) {'],[0,'            return false;'],[-1,'        }'],[-1,'        \/\/ create temporary vector layer for rendering geometry sketch'],[-1,'        \/\/ TBD: this could be moved to initialize\/destroy - setting visibility here'],[0,'        var options = OpenLayers.Util.extend({'],[-1,'            displayInLayerSwitcher: false,'],[-1,'            \/\/ indicate that the temp vector layer will never be out of range'],[-1,'            \/\/ without this, resolution properties must be specified at the'],[-1,'            \/\/ map-level for this temporary layer to init its resolutions'],[-1,'            \/\/ correctly'],[-1,'            calculateInRange: OpenLayers.Function.True,'],[-1,'            wrapDateLine: this.citeCompliant'],[-1,'        }, this.layerOptions);'],[0,'        this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, options);'],[0,'        this.map.addLayer(this.layer);'],[0,'        return true;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createFeature'],[-1,'     * Add temporary features'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} A pixel location on the map.'],[-1,'     *\/'],[-1,'    createFeature: function(pixel) {'],[0,'        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); '],[0,'        var geometry = new OpenLayers.Geometry.Point('],[-1,'            lonlat.lon, lonlat.lat'],[-1,'        );'],[0,'        this.point = new OpenLayers.Feature.Vector(geometry);'],[0,'        this.callback(\&quot;create\&quot;, [this.point.geometry, this.point]);'],[0,'        this.point.geometry.clearBounds();'],[0,'        this.layer.addFeatures([this.point], {silent: true});'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * turn off the handler'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        if(!OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {'],[0,'            return false;'],[-1,'        }'],[0,'        this.cancel();'],[-1,'        \/\/ If a layer\'s map property is set to null, it means that that layer'],[-1,'        \/\/ isn\'t added to the map. Since we ourself added the layer to the map'],[-1,'        \/\/ in activate(), we can assume that if this.layer.map is null it means'],[-1,'        \/\/ that the layer has been destroyed (as a result of map.destroy() for'],[-1,'        \/\/ example.'],[0,'        if (this.layer.map != null) {'],[0,'            this.destroyFeature(true);'],[0,'            this.layer.destroy(false);'],[-1,'        }'],[0,'        this.layer = null;'],[0,'        this.touch = false;'],[0,'        return true;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroyFeature'],[-1,'     * Destroy the temporary geometries'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * force - {Boolean} Destroy even if persist is true.'],[-1,'     *\/'],[-1,'    destroyFeature: function(force) {'],[0,'        if(this.layer &amp;&amp; (force || !this.persist)) {'],[0,'            this.layer.destroyFeatures();'],[-1,'        }'],[0,'        this.point = null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroyPersistedFeature'],[-1,'     * Destroy the persisted feature.'],[-1,'     *\/'],[-1,'    destroyPersistedFeature: function() {'],[0,'        var layer = this.layer;'],[0,'        if(layer &amp;&amp; layer.features.length &gt; 1) {'],[0,'            this.layer.features[0].destroy();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: finalize'],[-1,'     * Finish the geometry and call the \&quot;done\&quot; callback.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * cancel - {Boolean} Call cancel instead of done callback.  Default'],[-1,'     *          is false.'],[-1,'     *\/'],[-1,'    finalize: function(cancel) {'],[0,'        var key = cancel ? \&quot;cancel\&quot; : \&quot;done\&quot;;'],[0,'        this.mouseDown = false;'],[0,'        this.lastDown = null;'],[0,'        this.lastUp = null;'],[0,'        this.lastTouchPx = null;'],[0,'        this.callback(key, [this.geometryClone()]);'],[0,'        this.destroyFeature(cancel);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: cancel'],[-1,'     * Finish the geometry and call the \&quot;cancel\&quot; callback.'],[-1,'     *\/'],[-1,'    cancel: function() {'],[0,'        this.finalize(true);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: click'],[-1,'     * Handle clicks.  Clicks are stopped from propagating to other listeners'],[-1,'     *     on map.events or other dom elements.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    click: function(evt) {'],[0,'        OpenLayers.Event.stop(evt);'],[0,'        return false;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: dblclick'],[-1,'     * Handle double-clicks.  Double-clicks are stopped from propagating to other'],[-1,'     *     listeners on map.events or other dom elements.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    dblclick: function(evt) {'],[0,'        OpenLayers.Event.stop(evt);'],[0,'        return false;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: modifyFeature'],[-1,'     * Modify the existing geometry given a pixel location.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} A pixel location on the map.'],[-1,'     *\/'],[-1,'    modifyFeature: function(pixel) {'],[0,'        if(!this.point) {'],[0,'            this.createFeature(pixel);'],[-1,'        }'],[0,'        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); '],[0,'        this.point.geometry.x = lonlat.lon;'],[0,'        this.point.geometry.y = lonlat.lat;'],[0,'        this.callback(\&quot;modify\&quot;, [this.point.geometry, this.point, false]);'],[0,'        this.point.geometry.clearBounds();'],[0,'        this.drawFeature();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawFeature'],[-1,'     * Render features on the temporary layer.'],[-1,'     *\/'],[-1,'    drawFeature: function() {'],[0,'        this.layer.drawFeature(this.point, this.style);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getGeometry'],[-1,'     * Return the sketch geometry.  If &lt;multi&gt; is true, this will return'],[-1,'     *     a multi-part geometry.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     *\/'],[-1,'    getGeometry: function() {'],[0,'        var geometry = this.point &amp;&amp; this.point.geometry;'],[0,'        if(geometry &amp;&amp; this.multi) {'],[0,'            geometry = new OpenLayers.Geometry.MultiPoint([geometry]);'],[-1,'        }'],[0,'        return geometry;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: geometryClone'],[-1,'     * Return a clone of the relevant geometry.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry&gt;}'],[-1,'     *\/'],[-1,'    geometryClone: function() {'],[0,'        var geom = this.getGeometry();'],[0,'        return geom &amp;&amp; geom.clone();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mousedown'],[-1,'     * Handle mousedown.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    mousedown: function(evt) {'],[0,'        return this.down(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: touchstart'],[-1,'     * Handle touchstart.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    touchstart: function(evt) {'],[0,'        if (!this.touch) {'],[0,'            this.touch = true;'],[-1,'            \/\/ unregister mouse listeners'],[0,'            this.map.events.un({'],[-1,'                mousedown: this.mousedown,'],[-1,'                mouseup: this.mouseup,'],[-1,'                mousemove: this.mousemove,'],[-1,'                click: this.click,'],[-1,'                dblclick: this.dblclick,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        this.lastTouchPx = evt.xy;'],[0,'        return this.down(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mousemove'],[-1,'     * Handle mousemove.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    mousemove: function(evt) {'],[0,'        return this.move(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: touchmove'],[-1,'     * Handle touchmove.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    touchmove: function(evt) {'],[0,'        this.lastTouchPx = evt.xy;'],[0,'        return this.move(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mouseup'],[-1,'     * Handle mouseup.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    mouseup: function(evt) {'],[0,'        return this.up(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: touchend'],[-1,'     * Handle touchend.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    touchend: function(evt) {'],[0,'        evt.xy = this.lastTouchPx;'],[0,'        return this.up(evt);'],[-1,'    },'],[-1,'  '],[-1,'    \/**'],[-1,'     * Method: down'],[-1,'     * Handle mousedown and touchstart.  Adjust the geometry and redraw.'],[-1,'     * Return determines whether to propagate the event on the map.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    down: function(evt) {'],[0,'        this.mouseDown = true;'],[0,'        this.lastDown = evt.xy;'],[0,'        if(!this.touch) { \/\/ no point displayed until up on touch devices'],[0,'            this.modifyFeature(evt.xy);'],[-1,'        }'],[0,'        this.stoppedDown = this.stopDown;'],[0,'        return !this.stopDown;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: move'],[-1,'     * Handle mousemove and touchmove.  Adjust the geometry and redraw.'],[-1,'     * Return determines whether to propagate the event on the map.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    move: function (evt) {'],[0,'        if(!this.touch \/\/ no point displayed until up on touch devices'],[-1,'           &amp;&amp; (!this.mouseDown || this.stoppedDown)) {'],[0,'            this.modifyFeature(evt.xy);'],[-1,'        }'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: up'],[-1,'     * Handle mouseup and touchend.  Send the latest point in the geometry to the control.'],[-1,'     * Return determines whether to propagate the event on the map.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    up: function (evt) {'],[0,'        this.mouseDown = false;'],[0,'        this.stoppedDown = this.stopDown;'],[-1,''],[-1,'        \/\/ check keyboard modifiers'],[0,'        if(!this.checkModifiers(evt)) {'],[0,'            return true;'],[-1,'        }'],[-1,'        \/\/ ignore double-clicks'],[0,'        if (this.lastUp &amp;&amp; this.lastUp.equals(evt.xy)) {'],[0,'            return true;'],[-1,'        }'],[0,'        if (this.lastDown &amp;&amp; this.passesTolerance(this.lastDown, evt.xy,'],[-1,'                                                  this.pixelTolerance)) {'],[0,'            if (this.touch) {'],[0,'                this.modifyFeature(evt.xy);'],[-1,'            }'],[0,'            if(this.persist) {'],[0,'                this.destroyPersistedFeature();'],[-1,'            }'],[0,'            this.lastUp = evt.xy;'],[0,'            this.finalize();'],[0,'            return !this.stopUp;'],[-1,'        } else {'],[0,'            return true;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mouseout'],[-1,'     * Handle mouse out.  For better user experience reset mouseDown'],[-1,'     * and stoppedDown when the mouse leaves the map viewport.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *\/'],[-1,'    mouseout: function(evt) {'],[0,'        if(OpenLayers.Util.mouseLeft(evt, this.map.viewPortDiv)) {'],[0,'            this.stoppedDown = this.stopDown;'],[0,'            this.mouseDown = false;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: passesTolerance'],[-1,'     * Determine whether the event is within the optional pixel tolerance.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The event is within the pixel tolerance (if specified).'],[-1,'     *\/'],[-1,'    passesTolerance: function(pixel1, pixel2, tolerance) {'],[0,'        var passes = true;'],[-1,''],[0,'        if (tolerance != null &amp;&amp; pixel1 &amp;&amp; pixel2) {'],[0,'            var dist = pixel1.distanceTo(pixel2);'],[0,'            if (dist &gt; tolerance) {'],[0,'                passes = false;'],[-1,'            }'],[-1,'        }'],[0,'        return passes;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler.Point\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler\/Path.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler\/Point.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' * @requires OpenLayers\/Geometry\/LineString.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Handler.Path'],[-1,' * Handler to draw a path on the map.  Path is displayed on mouse down,'],[-1,' * moves on mouse move, and is finished on mouse up.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Handler.Point&gt;'],[-1,' *\/'],[1,'OpenLayers.Handler.Path = OpenLayers.Class(OpenLayers.Handler.Point, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: line'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    line: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxVertices'],[-1,'     * {Number} The maximum number of vertices which can be drawn by this'],[-1,'     * handler. When the number of vertices reaches maxVertices, the'],[-1,'     * geometry is automatically finalized. Default is null.'],[-1,'     *\/'],[-1,'    maxVertices: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: doubleTouchTolerance'],[-1,'     * {Number} Maximum number of pixels between two touches for'],[-1,'     *     the gesture to be considered a \&quot;finalize feature\&quot; action.'],[-1,'     *     Default is 20.'],[-1,'     *\/'],[-1,'    doubleTouchTolerance: 20,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: freehand'],[-1,'     * {Boolean} In freehand mode, the handler starts the path on mouse down,'],[-1,'     * adds a point for every mouse move, and finishes the path on mouse up.'],[-1,'     * Outside of freehand mode, a point is added to the path on every mouse'],[-1,'     * click and double-click finishes the path.'],[-1,'     *\/'],[-1,'    freehand: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: freehandToggle'],[-1,'     * {String} If set, freehandToggle is checked on mouse events and will set'],[-1,'     * the freehand mode to the opposite of this.freehand.  To disallow'],[-1,'     * toggling between freehand and non-freehand mode, set freehandToggle to'],[-1,'     * null.  Acceptable toggle values are \'shiftKey\', \'ctrlKey\', and \'altKey\'.'],[-1,'     *\/'],[-1,'    freehandToggle: \'shiftKey\','],[-1,''],[-1,'    \/**'],[-1,'     * Property: timerId'],[-1,'     * {Integer} The timer used to test the double touch.'],[-1,'     *\/'],[-1,'    timerId: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: redoStack'],[-1,'     * {Array} Stack containing points removed with &lt;undo&gt;.'],[-1,'     *\/'],[-1,'    redoStack: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler.Path'],[-1,'     * Create a new path hander'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} The control that owns this handler'],[-1,'     * callbacks - {Object} An object with a properties whose values are'],[-1,'     *     functions.  Various callbacks described below.'],[-1,'     * options - {Object} An optional object with properties to be set on the'],[-1,'     *           handler'],[-1,'     *'],[-1,'     * Named callbacks:'],[-1,'     * create - Called when a sketch is first created.  Callback called with'],[-1,'     *     the creation point geometry and sketch feature.'],[-1,'     * modify - Called with each move of a vertex with the vertex (point)'],[-1,'     *     geometry and the sketch feature.'],[-1,'     * point - Called as each point is added.  Receives the new point geometry.'],[-1,'     * done - Called when the point drawing is finished.  The callback will'],[-1,'     *     recieve a single argument, the linestring geometry.'],[-1,'     * cancel - Called when the handler is deactivated while drawing.  The'],[-1,'     *     cancel callback will receive a geometry.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createFeature'],[-1,'     * Add temporary geometries'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} The initial pixel location for the new'],[-1,'     *     feature.'],[-1,'     *\/'],[-1,'    createFeature: function(pixel) {'],[0,'        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); '],[0,'        var geometry = new OpenLayers.Geometry.Point('],[-1,'            lonlat.lon, lonlat.lat'],[-1,'        );'],[0,'        this.point = new OpenLayers.Feature.Vector(geometry);'],[0,'        this.line = new OpenLayers.Feature.Vector('],[-1,'            new OpenLayers.Geometry.LineString([this.point.geometry])'],[-1,'        );'],[0,'        this.callback(\&quot;create\&quot;, [this.point.geometry, this.getSketch()]);'],[0,'        this.point.geometry.clearBounds();'],[0,'        this.layer.addFeatures([this.line, this.point], {silent: true});'],[-1,'    },'],[-1,'        '],[-1,'    \/**'],[-1,'     * Method: destroyFeature'],[-1,'     * Destroy temporary geometries'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * force - {Boolean} Destroy even if persist is true.'],[-1,'     *\/'],[-1,'    destroyFeature: function(force) {'],[0,'        OpenLayers.Handler.Point.prototype.destroyFeature.call('],[-1,'            this, force);'],[0,'        this.line = null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroyPersistedFeature'],[-1,'     * Destroy the persisted feature.'],[-1,'     *\/'],[-1,'    destroyPersistedFeature: function() {'],[0,'        var layer = this.layer;'],[0,'        if(layer &amp;&amp; layer.features.length &gt; 2) {'],[0,'            this.layer.features[0].destroy();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: removePoint'],[-1,'     * Destroy the temporary point.'],[-1,'     *\/'],[-1,'    removePoint: function() {'],[0,'        if(this.point) {'],[0,'            this.layer.removeFeatures([this.point]);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addPoint'],[-1,'     * Add point to geometry.  Send the point index to override'],[-1,'     * the behavior of LinearRing that disregards adding duplicate points.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} The pixel location for the new point.'],[-1,'     *\/'],[-1,'    addPoint: function(pixel) {'],[0,'        this.layer.removeFeatures([this.point]);'],[0,'        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); '],[0,'        this.point = new OpenLayers.Feature.Vector('],[-1,'            new OpenLayers.Geometry.Point(lonlat.lon, lonlat.lat)'],[-1,'        );'],[0,'        this.line.geometry.addComponent('],[-1,'            this.point.geometry, this.line.geometry.components.length'],[-1,'        );'],[0,'        this.layer.addFeatures([this.point]);'],[0,'        this.callback(\&quot;point\&quot;, [this.point.geometry, this.getGeometry()]);'],[0,'        this.callback(\&quot;modify\&quot;, [this.point.geometry, this.getSketch()]);'],[0,'        this.drawFeature();'],[0,'        delete this.redoStack;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: insertXY'],[-1,'     * Insert a point in the current sketch given x &amp; y coordinates.  The new'],[-1,'     *     point is inserted immediately before the most recently drawn point.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x - {Number} The x-coordinate of the point.'],[-1,'     * y - {Number} The y-coordinate of the point.'],[-1,'     *\/'],[-1,'    insertXY: function(x, y) {'],[0,'        this.line.geometry.addComponent('],[-1,'            new OpenLayers.Geometry.Point(x, y), '],[-1,'            this.getCurrentPointIndex()'],[-1,'        );'],[0,'        this.drawFeature();'],[0,'        delete this.redoStack;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: insertDeltaXY'],[-1,'     * Insert a point given offsets from the previously inserted point.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * dx - {Number} The x-coordinate offset of the point.'],[-1,'     * dy - {Number} The y-coordinate offset of the point.'],[-1,'     *\/'],[-1,'    insertDeltaXY: function(dx, dy) {'],[0,'        var previousIndex = this.getCurrentPointIndex() - 1;'],[0,'        var p0 = this.line.geometry.components[previousIndex];'],[0,'        if (p0 &amp;&amp; !isNaN(p0.x) &amp;&amp; !isNaN(p0.y)) {'],[0,'            this.insertXY(p0.x + dx, p0.y + dy);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: insertDirectionLength'],[-1,'     * Insert a point in the current sketch given a direction and a length.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * direction - {Number} Degrees clockwise from the positive x-axis.'],[-1,'     * length - {Number} Distance from the previously drawn point.'],[-1,'     *\/'],[-1,'    insertDirectionLength: function(direction, length) {'],[0,'        direction *= Math.PI \/ 180;'],[0,'        var dx = length * Math.cos(direction);'],[0,'        var dy = length * Math.sin(direction);'],[0,'        this.insertDeltaXY(dx, dy);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: insertDeflectionLength'],[-1,'     * Insert a point in the current sketch given a deflection and a length.'],[-1,'     *     The deflection should be degrees clockwise from the previously '],[-1,'     *     digitized segment.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * deflection - {Number} Degrees clockwise from the previous segment.'],[-1,'     * length - {Number} Distance from the previously drawn point.'],[-1,'     *\/'],[-1,'    insertDeflectionLength: function(deflection, length) {'],[0,'        var previousIndex = this.getCurrentPointIndex() - 1;'],[0,'        if (previousIndex &gt; 0) {'],[0,'            var p1 = this.line.geometry.components[previousIndex];'],[0,'            var p0 = this.line.geometry.components[previousIndex-1];'],[0,'            var theta = Math.atan2(p1.y - p0.y, p1.x - p0.x);'],[0,'            this.insertDirectionLength('],[-1,'                (theta * 180 \/ Math.PI) + deflection, length'],[-1,'            );'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getCurrentPointIndex'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Number} The index of the most recently drawn point.'],[-1,'     *\/'],[-1,'    getCurrentPointIndex: function() {'],[0,'        return this.line.geometry.components.length - 1;'],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: undo'],[-1,'     * Remove the most recently added point in the sketch geometry.'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} A point was removed.'],[-1,'     *\/'],[-1,'    undo: function() {'],[0,'        var geometry = this.line.geometry;'],[0,'        var components = geometry.components;'],[0,'        var index = this.getCurrentPointIndex() - 1;'],[0,'        var target = components[index];'],[0,'        var undone = geometry.removeComponent(target);'],[0,'        if (undone) {'],[0,'            if (!this.redoStack) {'],[0,'                this.redoStack = [];'],[-1,'            }'],[0,'            this.redoStack.push(target);'],[0,'            this.drawFeature();'],[-1,'        }'],[0,'        return undone;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: redo'],[-1,'     * Reinsert the most recently removed point resulting from an &lt;undo&gt; call.'],[-1,'     *     The undo stack is deleted whenever a point is added by other means.'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} A point was added.'],[-1,'     *\/'],[-1,'    redo: function() {'],[0,'        var target = this.redoStack &amp;&amp; this.redoStack.pop();'],[0,'        if (target) {'],[0,'            this.line.geometry.addComponent(target, this.getCurrentPointIndex());'],[0,'            this.drawFeature();'],[-1,'        }'],[0,'        return !!target;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: freehandMode'],[-1,'     * Determine whether to behave in freehand mode or not.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    freehandMode: function(evt) {'],[0,'        return (this.freehandToggle &amp;&amp; evt[this.freehandToggle]) ?'],[-1,'                    !this.freehand : this.freehand;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: modifyFeature'],[-1,'     * Modify the existing geometry given the new point'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} The updated pixel location for the latest'],[-1,'     *     point.'],[-1,'     * drawing - {Boolean} Indicate if we\'re currently drawing.'],[-1,'     *\/'],[-1,'    modifyFeature: function(pixel, drawing) {'],[0,'        if(!this.line) {'],[0,'            this.createFeature(pixel);'],[-1,'        }'],[0,'        var lonlat = this.layer.getLonLatFromViewPortPx(pixel); '],[0,'        this.point.geometry.x = lonlat.lon;'],[0,'        this.point.geometry.y = lonlat.lat;'],[0,'        this.callback(\&quot;modify\&quot;, [this.point.geometry, this.getSketch(), drawing]);'],[0,'        this.point.geometry.clearBounds();'],[0,'        this.drawFeature();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawFeature'],[-1,'     * Render geometries on the temporary layer.'],[-1,'     *\/'],[-1,'    drawFeature: function() {'],[0,'        this.layer.drawFeature(this.line, this.style);'],[0,'        this.layer.drawFeature(this.point, this.style);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getSketch'],[-1,'     * Return the sketch feature.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    getSketch: function() {'],[0,'        return this.line;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getGeometry'],[-1,'     * Return the sketch geometry.  If &lt;multi&gt; is true, this will return'],[-1,'     *     a multi-part geometry.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry.LineString&gt;}'],[-1,'     *\/'],[-1,'    getGeometry: function() {'],[0,'        var geometry = this.line &amp;&amp; this.line.geometry;'],[0,'        if(geometry &amp;&amp; this.multi) {'],[0,'            geometry = new OpenLayers.Geometry.MultiLineString([geometry]);'],[-1,'        }'],[0,'        return geometry;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * method: touchstart'],[-1,'     * handle touchstart.'],[-1,'     *'],[-1,'     * parameters:'],[-1,'     * evt - {event} the browser event'],[-1,'     *'],[-1,'     * returns:'],[-1,'     * {boolean} allow event propagation'],[-1,'     *\/'],[-1,'    touchstart: function(evt) {'],[0,'        if (this.timerId &amp;&amp;'],[-1,'            this.passesTolerance(this.lastTouchPx, evt.xy,'],[-1,'                                 this.doubleTouchTolerance)) {'],[-1,'            \/\/ double-tap, finalize the geometry'],[0,'            this.finishGeometry();'],[0,'            window.clearTimeout(this.timerId);'],[0,'            this.timerId = null;'],[0,'            return false;'],[-1,'        } else {'],[0,'            if (this.timerId) {'],[0,'                window.clearTimeout(this.timerId);'],[0,'                this.timerId = null;'],[-1,'            }'],[0,'            this.timerId = window.setTimeout('],[-1,'                OpenLayers.Function.bind(function() {'],[0,'                    this.timerId = null;'],[-1,'                }, this), 300);'],[0,'            return OpenLayers.Handler.Point.prototype.touchstart.call(this, evt);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: down'],[-1,'     * Handle mousedown and touchstart.  Add a new point to the geometry and'],[-1,'     * render it. Return determines whether to propagate the event on the map.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    down: function(evt) {'],[0,'        var stopDown = this.stopDown;'],[0,'        if(this.freehandMode(evt)) {'],[0,'            stopDown = true;'],[0,'            if (this.touch) {'],[0,'                this.modifyFeature(evt.xy, !!this.lastUp);'],[0,'                OpenLayers.Event.stop(evt);'],[-1,'            }'],[-1,'        }'],[0,'        if (!this.touch &amp;&amp; (!this.lastDown ||'],[-1,'                            !this.passesTolerance(this.lastDown, evt.xy,'],[-1,'                                                  this.pixelTolerance))) {'],[0,'            this.modifyFeature(evt.xy, !!this.lastUp);'],[-1,'        }'],[0,'        this.mouseDown = true;'],[0,'        this.lastDown = evt.xy;'],[0,'        this.stoppedDown = stopDown;'],[0,'        return !stopDown;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: move'],[-1,'     * Handle mousemove and touchmove.  Adjust the geometry and redraw.'],[-1,'     * Return determines whether to propagate the event on the map.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    move: function (evt) {'],[0,'        if(this.stoppedDown &amp;&amp; this.freehandMode(evt)) {'],[0,'            if(this.persist) {'],[0,'                this.destroyPersistedFeature();'],[-1,'            }'],[0,'            if(this.maxVertices &amp;&amp; this.line &amp;&amp;'],[-1,'                    this.line.geometry.components.length === this.maxVertices) {'],[0,'                this.removePoint();'],[0,'                this.finalize();'],[-1,'            } else {'],[0,'                this.addPoint(evt.xy);'],[-1,'            }'],[0,'            return false;'],[-1,'        }'],[0,'        if (!this.touch &amp;&amp; (!this.mouseDown || this.stoppedDown)) {'],[0,'            this.modifyFeature(evt.xy, !!this.lastUp);'],[-1,'        }'],[0,'        return true;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: up'],[-1,'     * Handle mouseup and touchend.  Send the latest point in the geometry to'],[-1,'     * the control. Return determines whether to propagate the event on the map.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    up: function (evt) {'],[0,'        if (this.mouseDown &amp;&amp; (!this.lastUp || !this.lastUp.equals(evt.xy))) {'],[0,'            if(this.stoppedDown &amp;&amp; this.freehandMode(evt)) {'],[0,'                if (this.persist) {'],[0,'                    this.destroyPersistedFeature();'],[-1,'                }'],[0,'                this.removePoint();'],[0,'                this.finalize();'],[-1,'            } else {'],[0,'                if (this.passesTolerance(this.lastDown, evt.xy,'],[-1,'                                         this.pixelTolerance)) {'],[0,'                    if (this.touch) {'],[0,'                        this.modifyFeature(evt.xy);'],[-1,'                    }'],[0,'                    if(this.lastUp == null &amp;&amp; this.persist) {'],[0,'                        this.destroyPersistedFeature();'],[-1,'                    }'],[0,'                    this.addPoint(evt.xy);'],[0,'                    this.lastUp = evt.xy;'],[0,'                    if(this.line.geometry.components.length === this.maxVertices + 1) {'],[0,'                        this.finishGeometry();'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        this.stoppedDown = this.stopDown;'],[0,'        this.mouseDown = false;'],[0,'        return !this.stopUp;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: finishGeometry'],[-1,'     * Finish the geometry and send it back to the control.'],[-1,'     *\/'],[-1,'    finishGeometry: function() {'],[0,'        var index = this.line.geometry.components.length - 1;'],[0,'        this.line.geometry.removeComponent(this.line.geometry.components[index]);'],[0,'        this.removePoint();'],[0,'        this.finalize();'],[-1,'    },'],[-1,'  '],[-1,'    \/**'],[-1,'     * Method: dblclick '],[-1,'     * Handle double-clicks.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The browser event'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} Allow event propagation'],[-1,'     *\/'],[-1,'    dblclick: function(evt) {'],[0,'        if(!this.freehandMode(evt)) {'],[0,'            this.finishGeometry();'],[-1,'        }'],[0,'        return false;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler.Path\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Spherical.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/SingleFile.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Namespace: Spherical'],[-1,' * The OpenLayers.Spherical namespace includes utility functions for'],[-1,' * calculations on the basis of a spherical earth (ignoring ellipsoidal'],[-1,' * effects), which is accurate enough for most purposes.'],[-1,' *'],[-1,' * Relevant links:'],[-1,' * * http:\/\/www.movable-type.co.uk\/scripts\/latlong.html'],[-1,' * * http:\/\/code.google.com\/apis\/maps\/documentation\/javascript\/reference.html#spherical'],[-1,' *\/'],[-1,''],[1,'OpenLayers.Spherical = OpenLayers.Spherical || {};'],[-1,''],[1,'OpenLayers.Spherical.DEFAULT_RADIUS = 6378137;'],[-1,''],[-1,'\/**'],[-1,' * APIFunction: computeDistanceBetween'],[-1,' * Computes the distance between two LonLats.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * from   - {&lt;OpenLayers.LonLat&gt;} or {Object} Starting point. A LonLat or'],[-1,' *          a JavaScript literal with lon lat properties.'],[-1,' * to     - {&lt;OpenLayers.LonLat&gt;} or {Object} Ending point. A LonLat or a'],[-1,' *          JavaScript literal with lon lat properties.'],[-1,' * radius - {Float} The radius. Optional. Defaults to 6378137 meters.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Float} The distance in meters.'],[-1,' *\/'],[1,'OpenLayers.Spherical.computeDistanceBetween = function(from, to, radius) {'],[0,'  var R = radius || OpenLayers.Spherical.DEFAULT_RADIUS;'],[0,'  var sinHalfDeltaLon = Math.sin(Math.PI * (to.lon - from.lon) \/ 360);'],[0,'  var sinHalfDeltaLat = Math.sin(Math.PI * (to.lat - from.lat) \/ 360);'],[0,'  var a = sinHalfDeltaLat * sinHalfDeltaLat +'],[-1,'      sinHalfDeltaLon * sinHalfDeltaLon * Math.cos(Math.PI * from.lat \/ 180) * Math.cos(Math.PI * to.lat \/ 180); '],[0,'  return 2 * R * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)); '],[-1,'};'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * APIFunction: computeHeading'],[-1,' * Computes the heading from one LonLat to another LonLat.'],[-1,' *'],[-1,' * Parameters:'],[-1,' * from   - {&lt;OpenLayers.LonLat&gt;} or {Object} Starting point. A LonLat or'],[-1,' *          a JavaScript literal with lon lat properties.'],[-1,' * to     - {&lt;OpenLayers.LonLat&gt;} or {Object} Ending point. A LonLat or a'],[-1,' *          JavaScript literal with lon lat properties.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {Float} The heading in degrees.'],[-1,' *\/'],[1,'OpenLayers.Spherical.computeHeading = function(from, to) {'],[0,'    var y = Math.sin(Math.PI * (from.lon - to.lon) \/ 180) * Math.cos(Math.PI * to.lat \/ 180);'],[0,'    var x = Math.cos(Math.PI * from.lat \/ 180) * Math.sin(Math.PI * to.lat \/ 180) -'],[-1,'        Math.sin(Math.PI * from.lat \/ 180) * Math.cos(Math.PI * to.lat \/ 180) * Math.cos(Math.PI * (from.lon - to.lon) \/ 180);'],[0,'    return 180 * Math.atan2(y, x) \/ Math.PI;'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/CacheWrite.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Request.js'],[-1,' * @requires OpenLayers\/Console.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.CacheWrite'],[-1,' * A control for caching image tiles in the browser\'s local storage. The'],[-1,' * &lt;OpenLayers.Control.CacheRead&gt; control is used to fetch and use the cached'],[-1,' * tile images.'],[-1,' *'],[-1,' * Note: Before using this control on any layer that is not your own, make sure'],[-1,' * that the terms of service of the tile provider allow local storage of tiles.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.CacheWrite = OpenLayers.Class(OpenLayers.Control, {'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * To register events in the constructor, configure &lt;eventListeners&gt;.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to those from &lt;OpenLayers.Control.events&gt;):'],[-1,'     * cachefull - Triggered when the cache is full. Listeners receive an'],[-1,'     *     object with a tile property as first argument. The tile references'],[-1,'     *     the tile that couldn\'t be cached.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: eventListeners'],[-1,'     * {Object} Object with event listeners, keyed by event name. An optional'],[-1,'     *     scope property defines the scope that listeners will be executed in.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layers'],[-1,'     * {Array(&lt;OpenLayers.Layer.Grid&gt;)}. Optional. If provided, caching'],[-1,'     *     will be enabled for these layers only, otherwise for all cacheable'],[-1,'     *     layers.'],[-1,'     *\/'],[-1,'    layers: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: imageFormat'],[-1,'     * {String} The image format used for caching. The default is \&quot;image\/png\&quot;.'],[-1,'     *     Supported formats depend on the user agent. If an unsupported'],[-1,'     *     &lt;imageFormat&gt; is provided, \&quot;image\/png\&quot; will be used. For aerial'],[-1,'     *     imagery, \&quot;image\/jpeg\&quot; is recommended.'],[-1,'     *\/'],[-1,'    imageFormat: \&quot;image\/png\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: quotaRegEx'],[-1,'     * {RegExp}'],[-1,'     *\/'],[-1,'    quotaRegEx: (\/quota\/i),'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.CacheWrite'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Object with API properties for this control.'],[-1,'     *\/'],[-1,''],[-1,'    \/** '],[-1,'     * Method: setMap'],[-1,'     * Set the map property for the control. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} '],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Control.prototype.setMap.apply(this, arguments);'],[0,'        var i, layers = this.layers || map.layers;'],[0,'        for (i=layers.length-1; i&gt;=0; --i) {'],[0,'            this.addLayer({layer: layers[i]});'],[-1,'        }'],[0,'        if (!this.layers) {'],[0,'            map.events.on({'],[-1,'                addlayer: this.addLayer,'],[-1,'                removeLayer: this.removeLayer,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addLayer'],[-1,'     * Adds a layer to the control. Once added, tiles requested for this layer'],[-1,'     *     will be cached.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} Object with a layer property referencing an'],[-1,'     *     &lt;OpenLayers.Layer&gt; instance'],[-1,'     *\/'],[-1,'    addLayer: function(evt) {'],[0,'        evt.layer.events.on({'],[-1,'            tileloadstart: this.makeSameOrigin,'],[-1,'            tileloaded: this.onTileLoaded,'],[-1,'            scope: this'],[-1,'        });        '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: removeLayer'],[-1,'     * Removes a layer from the control. Once removed, tiles requested for this'],[-1,'     *     layer will no longer be cached.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} Object with a layer property referencing an'],[-1,'     *     &lt;OpenLayers.Layer&gt; instance'],[-1,'     *\/'],[-1,'    removeLayer: function(evt) {'],[0,'        evt.layer.events.un({'],[-1,'            tileloadstart: this.makeSameOrigin,'],[-1,'            tileloaded: this.onTileLoaded,'],[-1,'            scope: this'],[-1,'        });'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: makeSameOrigin'],[-1,'     * If the tile does not have CORS image loading enabled and is from a'],[-1,'     * different origin, use OpenLayers.ProxyHost to make it a same origin url.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;}'],[-1,'     *\/'],[-1,'    makeSameOrigin: function(evt) {'],[0,'        if (this.active) {'],[0,'            var tile = evt.tile;'],[0,'            if (tile instanceof OpenLayers.Tile.Image &amp;&amp;'],[-1,'                    !tile.crossOriginKeyword &amp;&amp;'],[-1,'                    tile.url.substr(0, 5) !== \&quot;data:\&quot;) {'],[0,'                var sameOriginUrl = OpenLayers.Request.makeSameOrigin('],[-1,'                    tile.url, OpenLayers.ProxyHost'],[-1,'                );'],[0,'                OpenLayers.Control.CacheWrite.urlMap[sameOriginUrl] = tile.url;'],[0,'                tile.url = sameOriginUrl;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onTileLoaded'],[-1,'     * Decides whether a tile can be cached and calls the cache method.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *\/'],[-1,'    onTileLoaded: function(evt) {'],[0,'        if (this.active &amp;&amp; !evt.aborted &amp;&amp;'],[-1,'                evt.tile instanceof OpenLayers.Tile.Image &amp;&amp;'],[-1,'                evt.tile.url.substr(0, 5) !== \'data:\') {'],[0,'            this.cache({tile: evt.tile});'],[0,'            delete OpenLayers.Control.CacheWrite.urlMap[evt.tile.url];'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: cache'],[-1,'     * Adds a tile to the cache. When the cache is full, the \&quot;cachefull\&quot; event'],[-1,'     * is triggered.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object} Object with a tile property, tile being the'],[-1,'     *     &lt;OpenLayers.Tile.Image&gt; with the data to add to the cache'],[-1,'     *\/'],[-1,'    cache: function(obj) {'],[0,'        if (window.localStorage) {'],[0,'            var tile = obj.tile;'],[0,'            try {'],[0,'                var canvasContext = tile.getCanvasContext();'],[0,'                if (canvasContext) {'],[0,'                    var urlMap = OpenLayers.Control.CacheWrite.urlMap;'],[0,'                    var url = urlMap[tile.url] || tile.url;'],[0,'                    window.localStorage.setItem('],[-1,'                        \&quot;olCache_\&quot; + url,'],[-1,'                        canvasContext.canvas.toDataURL(this.imageFormat)'],[-1,'                    );'],[-1,'                }'],[-1,'            } catch(e) {'],[-1,'                \/\/ local storage full or CORS violation'],[0,'                var reason = e.name || e.message;'],[0,'                if (reason &amp;&amp; this.quotaRegEx.test(reason)) {'],[0,'                    this.events.triggerEvent(\&quot;cachefull\&quot;, {tile: tile});'],[-1,'                } else {'],[0,'                    OpenLayers.Console.error(e.toString());'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     * The destroy method is used to perform any clean up before the control'],[-1,'     * is dereferenced.  Typically this is where event listeners are removed'],[-1,'     * to prevent memory leaks.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if (this.layers || this.map) {'],[0,'            var i, layers = this.layers || this.map.layers;'],[0,'            for (i=layers.length-1; i&gt;=0; --i) {'],[0,'                this.removeLayer({layer: layers[i]});'],[-1,'            }'],[-1,'        }'],[0,'        if (this.map) {'],[0,'            this.map.events.un({'],[-1,'                addlayer: this.addLayer,'],[-1,'                removeLayer: this.removeLayer,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.CacheWrite\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * APIFunction: OpenLayers.Control.CacheWrite.clearCache'],[-1,' * Clears all tiles cached with &lt;OpenLayers.Control.CacheWrite&gt; from the cache.'],[-1,' *\/'],[1,'OpenLayers.Control.CacheWrite.clearCache = function() {'],[0,'    if (!window.localStorage) { return; }'],[0,'    var i, key;'],[0,'    for (i=window.localStorage.length-1; i&gt;=0; --i) {'],[0,'        key = window.localStorage.key(i);'],[0,'        if (key.substr(0, 8) === \&quot;olCache_\&quot;) {'],[0,'            window.localStorage.removeItem(key);'],[-1,'        }'],[-1,'    }'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Property: OpenLayers.Control.CacheWrite.urlMap'],[-1,' * {Object} Mapping of same origin urls to cache url keys. Entries will be'],[-1,' *     deleted as soon as a tile was cached.'],[-1,' *\/'],[1,'OpenLayers.Control.CacheWrite.urlMap = {};'],[-1,''],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/PanPanel.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control\/Panel.js'],[-1,' * @requires OpenLayers\/Control\/Pan.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.PanPanel'],[-1,' * The PanPanel is visible control for panning the map North, South, East or'],[-1,' * West in small steps. By default it is drawn in the top left corner of the'],[-1,' * map.'],[-1,' *'],[-1,' * Note: '],[-1,' * If you wish to use this class with the default images and you want '],[-1,' *       it to look nice in ie6, you should add the following, conditionally'],[-1,' *       added css stylesheet to your HTML file:'],[-1,' * '],[-1,' * (code)'],[-1,' * &lt;!--[if lte IE 6]&gt;'],[-1,' *   &lt;link rel=\&quot;stylesheet\&quot; href=\&quot;..\/theme\/default\/ie6-style.css\&quot; type=\&quot;text\/css\&quot; \/&gt;'],[-1,' * &lt;![endif]--&gt;'],[-1,' * (end)'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control.Panel&gt; '],[-1,' *\/'],[1,'OpenLayers.Control.PanPanel = OpenLayers.Class(OpenLayers.Control.Panel, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: slideFactor'],[-1,'     * {Integer} Number of pixels by which we\'ll pan the map in any direction '],[-1,'     *     on clicking the arrow buttons, defaults to 50.  If you want to pan'],[-1,'     *     by some ratio of the map dimensions, use &lt;slideRatio&gt; instead.'],[-1,'     *\/'],[-1,'    slideFactor: 50,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: slideRatio'],[-1,'     * {Number} The fraction of map width\/height by which we\'ll pan the map            '],[-1,'     *     on clicking the arrow buttons.  Default is null.  If set, will'],[-1,'     *     override &lt;slideFactor&gt;. E.g. if slideRatio is .5, then Pan Up will'],[-1,'     *     pan up half the map height. '],[-1,'     *\/'],[-1,'    slideRatio: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.PanPanel '],[-1,'     * Add the four directional pan buttons.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be used'],[-1,'     *     to extend the control.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Control.Panel.prototype.initialize.apply(this, [options]);'],[0,'        var options = {'],[-1,'            slideFactor: this.slideFactor,'],[-1,'            slideRatio: this.slideRatio'],[-1,'        };'],[0,'        this.addControls(['],[-1,'            new OpenLayers.Control.Pan(OpenLayers.Control.Pan.NORTH, options),'],[-1,'            new OpenLayers.Control.Pan(OpenLayers.Control.Pan.SOUTH, options),'],[-1,'            new OpenLayers.Control.Pan(OpenLayers.Control.Pan.EAST, options),'],[-1,'            new OpenLayers.Control.Pan(OpenLayers.Control.Pan.WEST, options)'],[-1,'        ]);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.PanPanel\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Attribution.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Attribution'],[-1,' * The attribution control adds attribution from layers to the map display. '],[-1,' * It uses \'attribution\' property of each layer.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.Attribution = '],[-1,'  OpenLayers.Class(OpenLayers.Control, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: separator'],[-1,'     * {String} String used to separate layers.'],[-1,'     *\/'],[-1,'    separator: \&quot;, \&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: template'],[-1,'     * {String} Template for the attribution. This has to include the substring'],[-1,'     *     \&quot;${layers}\&quot;, which will be replaced by the layer specific'],[-1,'     *     attributions, separated by &lt;separator&gt;. The default is \&quot;${layers}\&quot;.'],[-1,'     *\/'],[-1,'    template: \&quot;${layers}\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.Attribution '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * options - {Object} Options for control.'],[-1,'     *\/'],[-1,''],[-1,'    \/** '],[-1,'     * Method: destroy'],[-1,'     * Destroy control.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.map.events.un({'],[-1,'            \&quot;removelayer\&quot;: this.updateAttribution,'],[-1,'            \&quot;addlayer\&quot;: this.updateAttribution,'],[-1,'            \&quot;changelayer\&quot;: this.updateAttribution,'],[-1,'            \&quot;changebaselayer\&quot;: this.updateAttribution,'],[-1,'            scope: this'],[-1,'        });'],[-1,'        '],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments);'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * Initialize control.'],[-1,'     * '],[-1,'     * Returns: '],[-1,'     * {DOMElement} A reference to the DIV DOMElement containing the control'],[-1,'     *\/    '],[-1,'    draw: function() {'],[0,'        OpenLayers.Control.prototype.draw.apply(this, arguments);'],[-1,'        '],[0,'        this.map.events.on({'],[-1,'            \'changebaselayer\': this.updateAttribution,'],[-1,'            \'changelayer\': this.updateAttribution,'],[-1,'            \'addlayer\': this.updateAttribution,'],[-1,'            \'removelayer\': this.updateAttribution,'],[-1,'            scope: this'],[-1,'        });'],[0,'        this.updateAttribution();'],[-1,'        '],[0,'        return this.div;    '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: updateAttribution'],[-1,'     * Update attribution string.'],[-1,'     *\/'],[-1,'    updateAttribution: function() {'],[0,'        var attributions = [];'],[0,'        if (this.map &amp;&amp; this.map.layers) {'],[0,'            for(var i=0, len=this.map.layers.length; i&lt;len; i++) {'],[0,'                var layer = this.map.layers[i];'],[0,'                if (layer.attribution &amp;&amp; layer.getVisibility()) {'],[-1,'                    \/\/ add attribution only if attribution text is unique'],[0,'                    if (OpenLayers.Util.indexOf('],[-1,'                                    attributions, layer.attribution) === -1) {'],[0,'                        attributions.push( layer.attribution );'],[-1,'                    }'],[-1,'                }'],[-1,'            } '],[0,'            this.div.innerHTML = OpenLayers.String.format(this.template, {'],[-1,'                layers: attributions.join(this.separator)'],[-1,'            });'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Attribution\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Kinetic.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Animation.js'],[-1,' *\/'],[-1,''],[1,'OpenLayers.Kinetic = OpenLayers.Class({'],[-1,''],[-1,'    \/**'],[-1,'     * Property: threshold'],[-1,'     * In most cases changing the threshold isn\'t needed.'],[-1,'     * In px\/ms, default to 0.'],[-1,'     *\/'],[-1,'    threshold: 0,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: deceleration'],[-1,'     * {Float} the deseleration in px\/ms\u00B2, default to 0.0035.'],[-1,'     *\/'],[-1,'    deceleration: 0.0035,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: nbPoints'],[-1,'     * {Integer} the number of points we use to calculate the kinetic'],[-1,'     * initial values.'],[-1,'     *\/'],[-1,'    nbPoints: 100,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: delay'],[-1,'     * {Float} time to consider to calculate the kinetic initial values.'],[-1,'     * In ms, default to 200.'],[-1,'     *\/'],[-1,'    delay: 200,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: points'],[-1,'     * List of points use to calculate the kinetic initial values.'],[-1,'     *\/'],[-1,'    points: undefined,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: timerId'],[-1,'     * ID of the timer.'],[-1,'     *\/'],[-1,'    timerId: undefined,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Kinetic'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object}'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Util.extend(this, options);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: begin'],[-1,'     * Begins the dragging.'],[-1,'     *\/'],[-1,'    begin: function() {'],[0,'        OpenLayers.Animation.stop(this.timerId);'],[0,'        this.timerId = undefined;'],[0,'        this.points = [];'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: update'],[-1,'     * Updates during the dragging.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * xy - {&lt;OpenLayers.Pixel&gt;} The new position.'],[-1,'     *\/'],[-1,'    update: function(xy) {'],[0,'        this.points.unshift({xy: xy, tick: new Date().getTime()});'],[0,'        if (this.points.length &gt; this.nbPoints) {'],[0,'            this.points.pop();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: end'],[-1,'     * Ends the dragging, start the kinetic.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * xy - {&lt;OpenLayers.Pixel&gt;} The last position.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object with two properties: \&quot;speed\&quot;, and \&quot;theta\&quot;. The'],[-1,'     *     \&quot;speed\&quot; and \&quot;theta\&quot; values are to be passed to the move '],[-1,'     *     function when starting the animation.'],[-1,'     *\/'],[-1,'    end: function(xy) {'],[0,'        var last, now = new Date().getTime();'],[0,'        for (var i = 0, l = this.points.length, point; i &lt; l; i++) {'],[0,'            point = this.points[i];'],[0,'            if (now - point.tick &gt; this.delay) {'],[0,'                break;'],[-1,'            }'],[0,'            last = point;'],[-1,'        }'],[0,'        if (!last) {'],[0,'            return;'],[-1,'        }'],[0,'        var time = new Date().getTime() - last.tick;'],[0,'        var dist = Math.sqrt(Math.pow(xy.x - last.xy.x, 2) +'],[-1,'                             Math.pow(xy.y - last.xy.y, 2));'],[0,'        var speed = dist \/ time;'],[0,'        if (speed == 0 || speed &lt; this.threshold) {'],[0,'            return;'],[-1,'        }'],[0,'        var theta = Math.asin((xy.y - last.xy.y) \/ dist);'],[0,'        if (last.xy.x &lt;= xy.x) {'],[0,'            theta = Math.PI - theta;'],[-1,'        }'],[0,'        return {speed: speed, theta: theta};'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: move'],[-1,'     * Launch the kinetic move pan.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * info - {Object} An object with two properties, \&quot;speed\&quot;, and \&quot;theta\&quot;.'],[-1,'     *     These values are those returned from the \&quot;end\&quot; call.'],[-1,'     * callback - {Function} Function called on every step of the animation,'],[-1,'     *     receives x, y (values to pan), end (is the last point).'],[-1,'     *\/'],[-1,'    move: function(info, callback) {'],[0,'        var v0 = info.speed;'],[0,'        var fx = Math.cos(info.theta);'],[0,'        var fy = -Math.sin(info.theta);'],[-1,''],[0,'        var initialTime = new Date().getTime();'],[-1,''],[0,'        var lastX = 0;'],[0,'        var lastY = 0;'],[-1,''],[0,'        var timerCallback = function() {'],[0,'            if (this.timerId == null) {'],[0,'                return;'],[-1,'            }'],[-1,''],[0,'            var t = new Date().getTime() - initialTime;'],[-1,''],[0,'            var p = (-this.deceleration * Math.pow(t, 2)) \/ 2.0 + v0 * t;'],[0,'            var x = p * fx;'],[0,'            var y = p * fy;'],[-1,''],[0,'            var args = {};'],[0,'            args.end = false;'],[0,'            var v = -this.deceleration * t + v0;'],[-1,''],[0,'            if (v &lt;= 0) {'],[0,'                OpenLayers.Animation.stop(this.timerId);'],[0,'                this.timerId = null;'],[0,'                args.end = true;'],[-1,'            }'],[-1,''],[0,'            args.x = x - lastX;'],[0,'            args.y = y - lastY;'],[0,'            lastX = x;'],[0,'            lastY = y;'],[0,'            callback(args.x, args.y, args.end);'],[-1,'        };'],[-1,''],[0,'        this.timerId = OpenLayers.Animation.start('],[-1,'            OpenLayers.Function.bind(timerCallback, this)'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Kinetic\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WPSExecute.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1_1_0.js'],[-1,' * @requires OpenLayers\/Format\/WCSGetCoverage.js'],[-1,' * @requires OpenLayers\/Format\/WFST\/v1_1_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WPSExecute version 1.0.0'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WPSExecute = OpenLayers.Class(OpenLayers.Format.XML,'],[-1,'                                            OpenLayers.Format.Filter.v1_1_0, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\/1.1\&quot;,'],[-1,'        gml: \&quot;http:\/\/www.opengis.net\/gml\&quot;,'],[-1,'        wps: \&quot;http:\/\/www.opengis.net\/wps\/1.0.0\&quot;,'],[-1,'        wfs: \&quot;http:\/\/www.opengis.net\/wfs\&quot;,'],[-1,'        ogc: \&quot;http:\/\/www.opengis.net\/ogc\&quot;,'],[-1,'        wcs: \&quot;http:\/\/www.opengis.net\/wcs\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: VERSION'],[-1,'     * {String} 1.0.0'],[-1,'     *\/'],[-1,'    VERSION: \&quot;1.0.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/wps\/1.0.0 http:\/\/schemas.opengis.net\/wps\/1.0.0\/wpsAll.xsd\&quot;,'],[-1,''],[-1,'    schemaLocationAttr: function(options) {'],[0,'        return undefined;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WPSExecute'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} An WPS Execute request XML string.'],[-1,'     *\/'],[-1,'    write: function(options) {'],[0,'        var doc;'],[0,'        if (window.ActiveXObject) {'],[0,'            doc = new ActiveXObject(\&quot;Microsoft.XMLDOM\&quot;);'],[0,'            this.xmldom = doc;'],[-1,'        } else {'],[0,'            doc = document.implementation.createDocument(\&quot;\&quot;, \&quot;\&quot;, null);'],[-1,'        }'],[0,'        var node = this.writeNode(\&quot;wps:Execute\&quot;, options, doc);'],[0,'        this.setAttributeNS('],[-1,'            node, this.namespaces.xsi,'],[-1,'            \&quot;xsi:schemaLocation\&quot;, this.schemaLocation'],[-1,'        );'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [node]);'],[-1,'    }, '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Parse a WPS Execute and return an object with its information.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object}'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var info = {};'],[0,'        this.readNode(data, info);'],[0,'        return info;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;wps\&quot;: {'],[-1,'            \&quot;Execute\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;wps:Execute\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        version: this.VERSION,'],[-1,'                        service: \'WPS\''],[-1,'                    } '],[-1,'                }); '],[0,'                this.writeNode(\&quot;ows:Identifier\&quot;, options.identifier, node);'],[0,'                this.writeNode(\&quot;wps:DataInputs\&quot;, options.dataInputs, node);'],[0,'                this.writeNode(\&quot;wps:ResponseForm\&quot;, options.responseForm, node);'],[0,'                return node; '],[-1,'            },'],[-1,'            \&quot;ResponseForm\&quot;: function(responseForm) {'],[0,'                var node = this.createElementNSPlus(\&quot;wps:ResponseForm\&quot;, {});'],[0,'                if (responseForm.rawDataOutput) {'],[0,'                    this.writeNode(\&quot;wps:RawDataOutput\&quot;, responseForm.rawDataOutput, node);'],[-1,'                }'],[0,'                if (responseForm.responseDocument) {'],[0,'                    this.writeNode(\&quot;wps:ResponseDocument\&quot;, responseForm.responseDocument, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;ResponseDocument\&quot;: function(responseDocument) {'],[0,'                var node = this.createElementNSPlus(\&quot;wps:ResponseDocument\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        storeExecuteResponse: responseDocument.storeExecuteResponse,'],[-1,'                        lineage: responseDocument.lineage,'],[-1,'                        status: responseDocument.status'],[-1,'                    }'],[-1,'                });'],[0,'                if (responseDocument.outputs) {'],[0,'                    for (var i = 0, len = responseDocument.outputs.length; i &lt; len; i++) {'],[0,'                        this.writeNode(\&quot;wps:Output\&quot;, responseDocument.outputs[i], node);'],[-1,'                    }'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Output\&quot;: function(output) {'],[0,'                var node = this.createElementNSPlus(\&quot;wps:Output\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        asReference: output.asReference,'],[-1,'                        mimeType: output.mimeType,'],[-1,'                        encoding: output.encoding,'],[-1,'                        schema: output.schema'],[-1,'                    }'],[-1,'                });'],[0,'                this.writeNode(\&quot;ows:Identifier\&quot;, output.identifier, node);'],[0,'                this.writeNode(\&quot;ows:Title\&quot;, output.title, node);'],[0,'                this.writeNode(\&quot;ows:Abstract\&quot;, output[\&quot;abstract\&quot;], node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;RawDataOutput\&quot;: function(rawDataOutput) {'],[0,'                var node = this.createElementNSPlus(\&quot;wps:RawDataOutput\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        mimeType: rawDataOutput.mimeType,'],[-1,'                        encoding: rawDataOutput.encoding,'],[-1,'                        schema: rawDataOutput.schema'],[-1,'                    }'],[-1,'                });'],[0,'                this.writeNode(\&quot;ows:Identifier\&quot;, rawDataOutput.identifier, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;DataInputs\&quot;: function(dataInputs) {'],[0,'                var node = this.createElementNSPlus(\&quot;wps:DataInputs\&quot;, {});'],[0,'                for (var i=0, ii=dataInputs.length; i&lt;ii; ++i) {'],[0,'                    this.writeNode(\&quot;wps:Input\&quot;, dataInputs[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Input\&quot;: function(input) {'],[0,'                var node = this.createElementNSPlus(\&quot;wps:Input\&quot;, {});'],[0,'                this.writeNode(\&quot;ows:Identifier\&quot;, input.identifier, node);'],[0,'                if (input.title) {'],[0,'                    this.writeNode(\&quot;ows:Title\&quot;, input.title, node);'],[-1,'                }'],[0,'                if (input.data) {'],[0,'                    this.writeNode(\&quot;wps:Data\&quot;, input.data, node);'],[-1,'                }'],[0,'                if (input.reference) {'],[0,'                    this.writeNode(\&quot;wps:Reference\&quot;, input.reference, node);'],[-1,'                }'],[0,'                if (input.boundingBoxData) {'],[0,'                    this.writeNode(\&quot;wps:BoundingBoxData\&quot;, input.boundingBoxData, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Data\&quot;: function(data) {'],[0,'                var node = this.createElementNSPlus(\&quot;wps:Data\&quot;, {});'],[0,'                if (data.literalData) {'],[0,'                    this.writeNode(\&quot;wps:LiteralData\&quot;, data.literalData, node);'],[0,'                } else if (data.complexData) {'],[0,'                    this.writeNode(\&quot;wps:ComplexData\&quot;, data.complexData, node);'],[0,'                } else if (data.boundingBoxData) {'],[0,'                    this.writeNode(\&quot;ows:BoundingBox\&quot;, data.boundingBoxData, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;LiteralData\&quot;: function(literalData) {'],[0,'                var node = this.createElementNSPlus(\&quot;wps:LiteralData\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        uom: literalData.uom'],[-1,'                    },'],[-1,'                    value: literalData.value'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;ComplexData\&quot;: function(complexData) {'],[0,'                var node = this.createElementNSPlus(\&quot;wps:ComplexData\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        mimeType: complexData.mimeType,'],[-1,'                        encoding: complexData.encoding,'],[-1,'                        schema: complexData.schema'],[-1,'                    } '],[-1,'                });'],[0,'                var data = complexData.value;'],[0,'                if (typeof data === \&quot;string\&quot;) {'],[0,'                    node.appendChild('],[-1,'                        this.getXMLDoc().createCDATASection(complexData.value)'],[-1,'                    );'],[-1,'                } else {'],[0,'                    node.appendChild(data);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Reference\&quot;: function(reference) {'],[0,'                var node = this.createElementNSPlus(\&quot;wps:Reference\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        mimeType: reference.mimeType,'],[-1,'                        \&quot;xlink:href\&quot;: reference.href,'],[-1,'                        method: reference.method,'],[-1,'                        encoding: reference.encoding,'],[-1,'                        schema: reference.schema'],[-1,'                    }'],[-1,'                });'],[0,'                if (reference.body) {'],[0,'                    this.writeNode(\&quot;wps:Body\&quot;, reference.body, node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;BoundingBoxData\&quot;: function(node, obj) {'],[0,'                this.writers[\'ows\'][\'BoundingBox\'].apply(this, [node, obj, \&quot;wps:BoundingBoxData\&quot;]);'],[-1,'            },'],[-1,'            \&quot;Body\&quot;: function(body) {'],[0,'                var node = this.createElementNSPlus(\&quot;wps:Body\&quot;, {});'],[0,'                if (body.wcs) {'],[0,'                    this.writeNode(\&quot;wcs:GetCoverage\&quot;, body.wcs, node);'],[-1,'                }'],[0,'                else if (body.wfs) {'],[-1,'                    \/\/ OpenLayers.Format.WFST expects these to be on the '],[-1,'                    \/\/ instance and not in the options'],[0,'                    this.featureType = body.wfs.featureType;'],[0,'                    this.version = body.wfs.version;'],[0,'                    this.writeNode(\&quot;wfs:GetFeature\&quot;, body.wfs, node);'],[-1,'                } else {'],[0,'                    this.writeNode(\&quot;wps:Execute\&quot;, body, node);'],[-1,'                }'],[0,'                return node;                '],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;wcs\&quot;: OpenLayers.Format.WCSGetCoverage.prototype.writers.wcs,'],[-1,'        \&quot;wfs\&quot;: OpenLayers.Format.WFST.v1_1_0.prototype.writers.wfs,'],[-1,'        \&quot;ogc\&quot;: OpenLayers.Format.Filter.v1_1_0.prototype.writers.ogc,'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1_1_0.prototype.writers.ows'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wps\&quot;: {'],[-1,'            \&quot;ExecuteResponse\&quot;: function(node, obj) {'],[0,'                obj.executeResponse = {'],[-1,'                    lang: node.getAttribute(\&quot;lang\&quot;),'],[-1,'                    statusLocation: node.getAttribute(\&quot;statusLocation\&quot;),'],[-1,'                    serviceInstance: node.getAttribute(\&quot;serviceInstance\&quot;),'],[-1,'                    service: node.getAttribute(\&quot;service\&quot;)'],[-1,'                };'],[0,'                this.readChildNodes(node, obj.executeResponse);'],[-1,'            },'],[-1,'            \&quot;Process\&quot;:function(node,obj) {'],[0,'                obj.process = {};'],[0,'                this.readChildNodes(node, obj.process);'],[-1,'            },'],[-1,'            \&quot;Status\&quot;:function(node,obj) {'],[0,'                obj.status = {'],[-1,'                    creationTime: node.getAttribute(\&quot;creationTime\&quot;)'],[-1,'                };'],[0,'                this.readChildNodes(node, obj.status);'],[-1,'            },'],[-1,'            \&quot;ProcessSucceeded\&quot;: function(node,obj) {'],[0,'                obj.processSucceeded = true;'],[-1,'            },'],[-1,'            \&quot;ProcessOutputs\&quot;: function(node, processDescription) {'],[0,'                processDescription.processOutputs = [];'],[0,'                this.readChildNodes(node, processDescription.processOutputs);'],[-1,'            },'],[-1,'            \&quot;Output\&quot;: function(node, processOutputs) {'],[0,'                var output = {};'],[0,'                this.readChildNodes(node, output);'],[0,'                processOutputs.push(output);'],[-1,'            },'],[-1,'            \&quot;Reference\&quot;: function(node, output) {'],[0,'                output.reference = {'],[-1,'                    href: node.getAttribute(\&quot;href\&quot;),'],[-1,'                    mimeType: node.getAttribute(\&quot;mimeType\&quot;),'],[-1,'                    encoding: node.getAttribute(\&quot;encoding\&quot;),'],[-1,'                    schema: node.getAttribute(\&quot;schema\&quot;)'],[-1,'                };'],[-1,'            },'],[-1,'            \&quot;Data\&quot;: function(node, output) {'],[0,'                output.data = {};'],[0,'                this.readChildNodes(node, output);'],[-1,'            },'],[-1,'            \&quot;LiteralData\&quot;: function(node, output) {'],[0,'                output.literalData = {'],[-1,'                    dataType: node.getAttribute(\&quot;dataType\&quot;),'],[-1,'                    uom: node.getAttribute(\&quot;uom\&quot;),'],[-1,'                    value: this.getChildValue(node)'],[-1,'                };'],[-1,'            },'],[-1,'            \&quot;ComplexData\&quot;: function(node, output) {'],[0,'                output.complexData = {'],[-1,'                    mimeType: node.getAttribute(\&quot;mimeType\&quot;),'],[-1,'                    schema: node.getAttribute(\&quot;schema\&quot;),'],[-1,'                    encoding: node.getAttribute(\&quot;encoding\&quot;),'],[-1,'                    value: \&quot;\&quot;'],[-1,'                };'],[-1,'                '],[-1,'                \/\/ try to get *some* value, ignore the empty text values'],[0,'                if (this.isSimpleContent(node)) {'],[0,'                    var child;'],[0,'                    for(child=node.firstChild; child; child=child.nextSibling) {'],[0,'                        switch(child.nodeType) {'],[-1,'                            case 3: \/\/ text node'],[-1,'                            case 4: \/\/ cdata section'],[0,'                                output.complexData.value += child.nodeValue;'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'                else {'],[0,'                    for(child=node.firstChild; child; child=child.nextSibling) {'],[0,'                        if (child.nodeType == 1) {'],[0,'                            output.complexData.value = child;'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,''],[-1,'            },'],[-1,'            \&quot;BoundingBox\&quot;: function(node, output) {'],[0,'                output.boundingBoxData = {'],[-1,'                    dimensions: node.getAttribute(\&quot;dimensions\&quot;),'],[-1,'                    crs: node.getAttribute(\&quot;crs\&quot;)'],[-1,'                };'],[0,'                this.readChildNodes(node, output.boundingBoxData);'],[-1,'            }'],[-1,'        },'],[-1,''],[-1,'        \/\/ TODO: we should add Exception parsing here'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\&quot;ows\&quot;]'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WPSExecute\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/GeoRSS.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Markers.js'],[-1,' * @requires OpenLayers\/Request\/XMLHttpRequest.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.GeoRSS'],[-1,' * Add GeoRSS Point features to your map. '],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Markers&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.GeoRSS = OpenLayers.Class(OpenLayers.Layer.Markers, {'],[-1,''],[-1,'    \/** '],[-1,'     * Property: location '],[-1,'     * {String} store url of text file '],[-1,'     *\/'],[-1,'    location: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: features '],[-1,'     * {Array(&lt;OpenLayers.Feature&gt;)} '],[-1,'     *\/'],[-1,'    features: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: formatOptions'],[-1,'     * {Object} Hash of options which should be passed to the format when it is'],[-1,'     * created. Must be passed in the constructor.'],[-1,'     *\/'],[-1,'    formatOptions: null, '],[-1,''],[-1,'    \/** '],[-1,'     * Property: selectedFeature '],[-1,'     * {&lt;OpenLayers.Feature&gt;} '],[-1,'     *\/'],[-1,'    selectedFeature: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: icon '],[-1,'     * {&lt;OpenLayers.Icon&gt;}. This determines the Icon to be used on the map'],[-1,'     * for this GeoRSS layer.'],[-1,'     *\/'],[-1,'    icon: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: popupSize'],[-1,'     * {&lt;OpenLayers.Size&gt;} This determines the size of GeoRSS popups. If '],[-1,'     * not provided, defaults to 250px by 120px. '],[-1,'     *\/'],[-1,'    popupSize: null, '],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: useFeedTitle '],[-1,'     * {Boolean} Set layer.name to the first &lt;title&gt; element in the feed. Default is true. '],[-1,'     *\/'],[-1,'    useFeedTitle: true,'],[-1,'    '],[-1,'    \/**'],[-1,'    * Constructor: OpenLayers.Layer.GeoRSS'],[-1,'    * Create a GeoRSS Layer.'],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * name - {String} '],[-1,'    * location - {String} '],[-1,'    * options - {Object}'],[-1,'    *\/'],[-1,'    initialize: function(name, location, options) {'],[0,'        OpenLayers.Layer.Markers.prototype.initialize.apply(this, [name, options]);'],[0,'        this.location = location;'],[0,'        this.features = [];'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroy '],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,'        \/\/ Warning: Layer.Markers.destroy() must be called prior to calling'],[-1,'        \/\/ clearFeatures() here, otherwise we leak memory. Indeed, if'],[-1,'        \/\/ Layer.Markers.destroy() is called after clearFeatures(), it won\'t be'],[-1,'        \/\/ able to remove the marker image elements from the layer\'s div since'],[-1,'        \/\/ the markers will have been destroyed by clearFeatures().'],[0,'        OpenLayers.Layer.Markers.prototype.destroy.apply(this, arguments);'],[0,'        this.clearFeatures();'],[0,'        this.features = null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: loadRSS'],[-1,'     * Start the load of the RSS data. Don\'t do this when we first add the layer,'],[-1,'     * since we may not be visible at any point, and it would therefore be a waste.'],[-1,'     *\/'],[-1,'    loadRSS: function() {'],[0,'        if (!this.loaded) {'],[0,'            this.events.triggerEvent(\&quot;loadstart\&quot;);'],[0,'            OpenLayers.Request.GET({'],[-1,'                url: this.location,'],[-1,'                success: this.parseData,'],[-1,'                scope: this'],[-1,'            });'],[0,'            this.loaded = true;'],[-1,'        }    '],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     * If layer is visible and RSS has not been loaded, load RSS. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {Object} '],[-1,'     * zoomChanged - {Object} '],[-1,'     * minor - {Object} '],[-1,'     *\/'],[-1,'    moveTo:function(bounds, zoomChanged, minor) {'],[0,'        OpenLayers.Layer.Markers.prototype.moveTo.apply(this, arguments);'],[0,'        if(this.visibility &amp;&amp; !this.loaded){'],[0,'            this.loadRSS();'],[-1,'        }'],[-1,'    },'],[-1,'        '],[-1,'    \/**'],[-1,'     * Method: parseData'],[-1,'     * Parse the data returned from the Events call.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * ajaxRequest - {&lt;OpenLayers.Request.XMLHttpRequest&gt;} '],[-1,'     *\/'],[-1,'    parseData: function(ajaxRequest) {'],[0,'        var doc = ajaxRequest.responseXML;'],[0,'        if (!doc || !doc.documentElement) {'],[0,'            doc = OpenLayers.Format.XML.prototype.read(ajaxRequest.responseText);'],[-1,'        }'],[-1,'        '],[0,'        if (this.useFeedTitle) {'],[0,'            var name = null;'],[0,'            try {'],[0,'                name = doc.getElementsByTagNameNS(\'*\', \'title\')[0].firstChild.nodeValue;'],[-1,'            }'],[-1,'            catch (e) {'],[0,'                name = doc.getElementsByTagName(\'title\')[0].firstChild.nodeValue;'],[-1,'            }'],[0,'            if (name) {'],[0,'                this.setName(name);'],[-1,'            }    '],[-1,'        }'],[-1,'       '],[0,'        var options = {};'],[-1,'        '],[0,'        OpenLayers.Util.extend(options, this.formatOptions);'],[-1,'        '],[0,'        if (this.map &amp;&amp; !this.projection.equals(this.map.getProjectionObject())) {'],[0,'            options.externalProjection = this.projection;'],[0,'            options.internalProjection = this.map.getProjectionObject();'],[-1,'        }    '],[-1,'        '],[0,'        var format = new OpenLayers.Format.GeoRSS(options);'],[0,'        var features = format.read(doc);'],[-1,'        '],[0,'        for (var i=0, len=features.length; i&lt;len; i++) {'],[0,'            var data = {};'],[0,'            var feature = features[i];'],[-1,'            '],[-1,'            \/\/ we don\'t support features with no geometry in the GeoRSS'],[-1,'            \/\/ layer at this time. '],[0,'            if (!feature.geometry) {'],[0,'                continue;'],[-1,'            }    '],[-1,'            '],[0,'            var title = feature.attributes.title ? '],[-1,'                         feature.attributes.title : \&quot;Untitled\&quot;;'],[-1,'            '],[0,'            var description = feature.attributes.description ? '],[-1,'                         feature.attributes.description : \&quot;No description.\&quot;;'],[-1,'            '],[0,'            var link = feature.attributes.link ? feature.attributes.link : \&quot;\&quot;;'],[-1,''],[0,'            var location = feature.geometry.getBounds().getCenterLonLat();'],[-1,'            '],[-1,'            '],[0,'            data.icon = this.icon == null ? '],[-1,'                                     OpenLayers.Marker.defaultIcon() : '],[-1,'                                     this.icon.clone();'],[-1,'            '],[0,'            data.popupSize = this.popupSize ? '],[-1,'                             this.popupSize.clone() :'],[-1,'                             new OpenLayers.Size(250, 120);'],[-1,'            '],[0,'            if (title || description) {'],[-1,'                \/\/ we have supplemental data, store them.'],[0,'                data.title = title;'],[0,'                data.description = description;'],[-1,'            '],[0,'                var contentHTML = \'&lt;div class=\&quot;olLayerGeoRSSClose\&quot;&gt;[x]&lt;\/div&gt;\'; '],[0,'                contentHTML += \'&lt;div class=\&quot;olLayerGeoRSSTitle\&quot;&gt;\';'],[0,'                if (link) {'],[0,'                    contentHTML += \'&lt;a class=\&quot;link\&quot; href=\&quot;\'+link+\'\&quot; target=\&quot;_blank\&quot;&gt;\';'],[-1,'                }'],[0,'                contentHTML += title;'],[0,'                if (link) {'],[0,'                    contentHTML += \'&lt;\/a&gt;\';'],[-1,'                }'],[0,'                contentHTML += \'&lt;\/div&gt;\';'],[0,'                contentHTML += \'&lt;div style=\&quot;\&quot; class=\&quot;olLayerGeoRSSDescription\&quot;&gt;\';'],[0,'                contentHTML += description;'],[0,'                contentHTML += \'&lt;\/div&gt;\';'],[0,'                data[\'popupContentHTML\'] = contentHTML;                '],[-1,'            }'],[0,'            var feature = new OpenLayers.Feature(this, location, data);'],[0,'            this.features.push(feature);'],[0,'            var marker = feature.createMarker();'],[0,'            marker.events.register(\'click\', feature, this.markerClick);'],[0,'            this.addMarker(marker);'],[-1,'        }'],[0,'        this.events.triggerEvent(\&quot;loadend\&quot;);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: markerClick'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    markerClick: function(evt) {'],[0,'        var sameMarkerClicked = (this == this.layer.selectedFeature);'],[0,'        this.layer.selectedFeature = (!sameMarkerClicked) ? this : null;'],[0,'        for(var i=0, len=this.layer.map.popups.length; i&lt;len; i++) {'],[0,'            this.layer.map.removePopup(this.layer.map.popups[i]);'],[-1,'        }'],[0,'        if (!sameMarkerClicked) {'],[0,'            var popup = this.createPopup();'],[0,'            OpenLayers.Event.observe(popup.div, \&quot;click\&quot;,'],[-1,'                OpenLayers.Function.bind(function() { '],[0,'                    for(var i=0, len=this.layer.map.popups.length; i&lt;len; i++) { '],[0,'                        this.layer.map.removePopup(this.layer.map.popups[i]); '],[-1,'                    }'],[-1,'                }, this)'],[-1,'            );'],[0,'            this.layer.map.addPopup(popup); '],[-1,'        }'],[0,'        OpenLayers.Event.stop(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clearFeatures'],[-1,'     * Destroy all features in this layer.'],[-1,'     *\/'],[-1,'    clearFeatures: function() {'],[0,'        if (this.features != null) {'],[0,'            while(this.features.length &gt; 0) {'],[0,'                var feature = this.features[0];'],[0,'                OpenLayers.Util.removeItem(this.features, feature);'],[0,'                feature.destroy();'],[-1,'            }'],[-1,'        }        '],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.GeoRSS\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMSCapabilities\/v1_3.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WMSCapabilities\/v1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMSCapabilities\/v1_3'],[-1,' * Abstract base class for WMS Capabilities version 1.3.X. '],[-1,' * SLD 1.1.0 adds in the extra operations DescribeLayer and GetLegendGraphic, '],[-1,' * see: http:\/\/schemas.opengis.net\/sld\/1.1.0\/sld_capabilities.xsd'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WMSCapabilities.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMSCapabilities.v1_3 = OpenLayers.Class('],[-1,'    OpenLayers.Format.WMSCapabilities.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wms\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;WMS_Capabilities\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;LayerLimit\&quot;: function(node, obj) {'],[0,'                obj.layerLimit = parseInt(this.getChildValue(node));'],[-1,'            },'],[-1,'            \&quot;MaxWidth\&quot;: function(node, obj) {'],[0,'                obj.maxWidth = parseInt(this.getChildValue(node));'],[-1,'            },'],[-1,'            \&quot;MaxHeight\&quot;: function(node, obj) {'],[0,'                obj.maxHeight = parseInt(this.getChildValue(node));'],[-1,'            },'],[-1,'            \&quot;BoundingBox\&quot;: function(node, obj) {'],[0,'                var bbox = OpenLayers.Format.WMSCapabilities.v1.prototype.readers[\&quot;wms\&quot;].BoundingBox.apply(this, [node, obj]);'],[0,'                bbox.srs  = node.getAttribute(\&quot;CRS\&quot;);'],[0,'                obj.bbox[bbox.srs] = bbox;'],[-1,'            },'],[-1,'            \&quot;CRS\&quot;: function(node, obj) {'],[-1,'                \/\/ CRS is the synonym of SRS'],[0,'                this.readers.wms.SRS.apply(this, [node, obj]); '],[-1,'            },'],[-1,'            \&quot;EX_GeographicBoundingBox\&quot;: function(node, obj) {'],[-1,'                \/\/ replacement of LatLonBoundingBox'],[0,'                obj.llbbox = [];'],[0,'                this.readChildNodes(node, obj.llbbox);'],[-1,'                '],[-1,'            },'],[-1,'            \&quot;westBoundLongitude\&quot;: function(node, obj) {'],[0,'                obj[0] = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;eastBoundLongitude\&quot;: function(node, obj) {'],[0,'                obj[2] = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;southBoundLatitude\&quot;: function(node, obj) {'],[0,'                obj[1] = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;northBoundLatitude\&quot;: function(node, obj) {'],[0,'                obj[3] = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;MinScaleDenominator\&quot;: function(node, obj) {'],[0,'                obj.maxScale = parseFloat(this.getChildValue(node)).toPrecision(16);'],[-1,'            },'],[-1,'            \&quot;MaxScaleDenominator\&quot;: function(node, obj) {'],[0,'                obj.minScale = parseFloat(this.getChildValue(node)).toPrecision(16);'],[-1,'            },'],[-1,'            \&quot;Dimension\&quot;: function(node, obj) {'],[-1,'                \/\/ dimension has extra attributes: default, multipleValues, '],[-1,'                \/\/ nearestValue, current which used to be part of Extent. It now'],[-1,'                \/\/ also contains the values.'],[0,'                var name = node.getAttribute(\&quot;name\&quot;).toLowerCase();'],[0,'                var dim = {'],[-1,'                    name: name,'],[-1,'                    units: node.getAttribute(\&quot;units\&quot;),'],[-1,'                    unitsymbol: node.getAttribute(\&quot;unitSymbol\&quot;),'],[-1,'                    nearestVal: node.getAttribute(\&quot;nearestValue\&quot;) === \&quot;1\&quot;,'],[-1,'                    multipleVal: node.getAttribute(\&quot;multipleValues\&quot;) === \&quot;1\&quot;,'],[-1,'                    \&quot;default\&quot;: node.getAttribute(\&quot;default\&quot;) || \&quot;\&quot;,'],[-1,'                    current: node.getAttribute(\&quot;current\&quot;) === \&quot;1\&quot;,'],[-1,'                    values: this.getChildValue(node).split(\&quot;,\&quot;)'],[-1,'                    '],[-1,'                };'],[-1,'                \/\/ Theoretically there can be more dimensions with the same'],[-1,'                \/\/ name, but with a different unit. Until we meet such a case,'],[-1,'                \/\/ let\'s just keep the same structure as the WMS 1.1 '],[-1,'                \/\/ GetCapabilities parser uses. We will store the last'],[-1,'                \/\/ one encountered.'],[0,'                obj.dimensions[dim.name] = dim;'],[-1,'            },'],[-1,'            \&quot;Keyword\&quot;: function(node, obj) {'],[-1,'                \/\/ TODO: should we change the structure of keyword in v1.js?'],[-1,'                \/\/ Make it an object with a value instead of a string?'],[0,'                var keyword = {value: this.getChildValue(node), '],[-1,'                    vocabulary: node.getAttribute(\&quot;vocabulary\&quot;)};'],[0,'                if (obj.keywords) {'],[0,'                    obj.keywords.push(keyword);'],[-1,'                }'],[-1,'            }'],[-1,'        }, OpenLayers.Format.WMSCapabilities.v1.prototype.readers[\&quot;wms\&quot;]),'],[-1,'        \&quot;sld\&quot;: {'],[-1,'            \&quot;UserDefinedSymbolization\&quot;: function(node, obj) {'],[0,'                this.readers.wms.UserDefinedSymbolization.apply(this, [node, obj]);'],[-1,'                \/\/ add the two extra attributes'],[0,'                obj.userSymbols.inlineFeature = parseInt(node.getAttribute(\&quot;InlineFeature\&quot;)) == 1;'],[0,'                obj.userSymbols.remoteWCS = parseInt(node.getAttribute(\&quot;RemoteWCS\&quot;)) == 1;'],[-1,'            },'],[-1,'            \&quot;DescribeLayer\&quot;: function(node, obj) {'],[0,'                this.readers.wms.DescribeLayer.apply(this, [node, obj]);'],[-1,'            },'],[-1,'            \&quot;GetLegendGraphic\&quot;: function(node, obj) {'],[0,'                this.readers.wms.GetLegendGraphic.apply(this, [node, obj]);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMSCapabilities.v1_3\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/SOSCapabilities.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,' *\/'],[-1,' '],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.SOSCapabilities'],[-1,' * Read SOS Capabilities.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML.VersionedOGC&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.SOSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;1.0.0\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;1.0.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.SOSCapabilities'],[-1,'     * Create a new parser for SOS Capabilities.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read capabilities data from a string, and return information about'],[-1,'     * the service (offering and observedProperty mostly).'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Info about the SOS'],[-1,'     *\/'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.SOSCapabilities\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/WMS.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.WMS'],[-1,' * Instances of OpenLayers.Layer.WMS are used to display data from OGC Web'],[-1,' *     Mapping Services. Create a new WMS layer with the &lt;OpenLayers.Layer.WMS&gt;'],[-1,' *     constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.WMS = OpenLayers.Class(OpenLayers.Layer.Grid, {'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: DEFAULT_PARAMS'],[-1,'     * {Object} Hashtable of default parameter key\/value pairs '],[-1,'     *\/'],[-1,'    DEFAULT_PARAMS: { service: \&quot;WMS\&quot;,'],[-1,'                      version: \&quot;1.1.1\&quot;,'],[-1,'                      request: \&quot;GetMap\&quot;,'],[-1,'                      styles: \&quot;\&quot;,'],[-1,'                      format: \&quot;image\/jpeg\&quot;'],[-1,'                     },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * {Boolean} Default is true for WMS layer'],[-1,'     *\/'],[-1,'    isBaseLayer: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: encodeBBOX'],[-1,'     * {Boolean} Should the BBOX commas be encoded? The WMS spec says \'no\', '],[-1,'     * but some services want it that way. Default false.'],[-1,'     *\/'],[-1,'    encodeBBOX: false,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: noMagic '],[-1,'     * {Boolean} If true, the image format will not be automagicaly switched '],[-1,'     *     from image\/jpeg to image\/png or image\/gif when using '],[-1,'     *     TRANSPARENT=TRUE. Also isBaseLayer will not changed by the  '],[-1,'     *     constructor. Default false. '],[-1,'     *\/ '],[-1,'    noMagic: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: yx'],[-1,'     * {Object} Keys in this object are EPSG codes for which the axis order'],[-1,'     *     is to be reversed (yx instead of xy, LatLon instead of LonLat), with'],[-1,'     *     true as value. This is only relevant for WMS versions &gt;= 1.3.0, and'],[-1,'     *     only if yx is not set in &lt;OpenLayers.Projection.defaults&gt; for the'],[-1,'     *     used projection.'],[-1,'     *\/'],[-1,'    yx: {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.WMS'],[-1,'     * Create a new WMS layer object'],[-1,'     *'],[-1,'     * Examples:'],[-1,'     *'],[-1,'     * The code below creates a simple WMS layer using the image\/jpeg format.'],[-1,'     * (code)'],[-1,'     * var wms = new OpenLayers.Layer.WMS(\&quot;NASA Global Mosaic\&quot;,'],[-1,'     *                                    \&quot;http:\/\/wms.jpl.nasa.gov\/wms.cgi\&quot;, '],[-1,'     *                                    {layers: \&quot;modis,global_mosaic\&quot;});'],[-1,'     * (end)'],[-1,'     * Note the 3rd argument (params). Properties added to this object will be'],[-1,'     * added to the WMS GetMap requests used for this layer\'s tiles. The only'],[-1,'     * mandatory parameter is \&quot;layers\&quot;. Other common WMS params include'],[-1,'     * \&quot;transparent\&quot;, \&quot;styles\&quot; and \&quot;format\&quot;. Note that the \&quot;srs\&quot; param will'],[-1,'     * always be ignored. Instead, it will be derived from the baseLayer\'s or'],[-1,'     * map\'s projection.'],[-1,'     *'],[-1,'     * The code below creates a transparent WMS layer with additional options.'],[-1,'     * (code)'],[-1,'     * var wms = new OpenLayers.Layer.WMS(\&quot;NASA Global Mosaic\&quot;,'],[-1,'     *                                    \&quot;http:\/\/wms.jpl.nasa.gov\/wms.cgi\&quot;, '],[-1,'     *                                    {'],[-1,'     *                                        layers: \&quot;modis,global_mosaic\&quot;,'],[-1,'     *                                        transparent: true'],[-1,'     *                                    }, {'],[-1,'     *                                        opacity: 0.5,'],[-1,'     *                                        singleTile: true'],[-1,'     *                                    });'],[-1,'     * (end)'],[-1,'     * Note that by default, a WMS layer is configured as baseLayer. Setting'],[-1,'     * the \&quot;transparent\&quot; param to true will apply some magic (see &lt;noMagic&gt;).'],[-1,'     * The default image format changes from image\/jpeg to image\/png, and the'],[-1,'     * layer is not configured as baseLayer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} A name for the layer'],[-1,'     * url - {String} Base url for the WMS'],[-1,'     *                (e.g. http:\/\/wms.jpl.nasa.gov\/wms.cgi)'],[-1,'     * params - {Object} An object with key\/value pairs representing the'],[-1,'     *                   GetMap query string parameters and parameter values.'],[-1,'     * options - {Object} Hashtable of extra options to tag onto the layer.'],[-1,'     *     These options include all properties listed above, plus the ones'],[-1,'     *     inherited from superclasses.'],[-1,'     *\/'],[-1,'    initialize: function(name, url, params, options) {'],[0,'        var newArguments = [];'],[-1,'        \/\/uppercase params'],[0,'        params = OpenLayers.Util.upperCaseObject(params);'],[0,'        if (parseFloat(params.VERSION) &gt;= 1.3 &amp;&amp; !params.EXCEPTIONS) {'],[0,'            params.EXCEPTIONS = \&quot;INIMAGE\&quot;;'],[-1,'        } '],[0,'        newArguments.push(name, url, params, options);'],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply(this, newArguments);'],[0,'        OpenLayers.Util.applyDefaults('],[-1,'                       this.params, '],[-1,'                       OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)'],[-1,'                       );'],[-1,''],[-1,''],[-1,'        \/\/layer is transparent        '],[0,'        if (!this.noMagic &amp;&amp; this.params.TRANSPARENT &amp;&amp; '],[-1,'            this.params.TRANSPARENT.toString().toLowerCase() == \&quot;true\&quot;) {'],[-1,'            '],[-1,'            \/\/ unless explicitly set in options, make layer an overlay'],[0,'            if ( (options == null) || (!options.isBaseLayer) ) {'],[0,'                this.isBaseLayer = false;'],[-1,'            } '],[-1,'            '],[-1,'            \/\/ jpegs can never be transparent, so intelligently switch the '],[-1,'            \/\/  format, depending on the browser\'s capabilities'],[0,'            if (this.params.FORMAT == \&quot;image\/jpeg\&quot;) {'],[0,'                this.params.FORMAT = OpenLayers.Util.alphaHack() ? \&quot;image\/gif\&quot;'],[-1,'                                                                 : \&quot;image\/png\&quot;;'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'     * Method: clone'],[-1,'     * Create a clone of this layer'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.WMS&gt;} An exact clone of this layer'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[-1,'        '],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.WMS(this.name,'],[-1,'                                           this.url,'],[-1,'                                           this.params,'],[-1,'                                           this.getOptions());'],[-1,'        }'],[-1,''],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);'],[-1,''],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[-1,''],[0,'        return obj;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: reverseAxisOrder'],[-1,'     * Returns true if the axis order is reversed for the WMS version and'],[-1,'     * projection of the layer.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} true if the axis order is reversed, false otherwise.'],[-1,'     *\/'],[-1,'    reverseAxisOrder: function() {'],[0,'        var projCode = this.projection.getCode();'],[0,'        return parseFloat(this.params.VERSION) &gt;= 1.3 &amp;&amp; '],[-1,'            !!(this.yx[projCode] || (OpenLayers.Projection.defaults[projCode] &amp;&amp; '],[-1,'            OpenLayers.Projection.defaults[projCode].yx));'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     * Return a GetMap query string for this layer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} A bounds representing the bbox for the'],[-1,'     *                                request.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string with the layer\'s url and parameters and also the'],[-1,'     *          passed-in bounds and appropriate tile size specified as '],[-1,'     *          parameters.'],[-1,'     *\/'],[-1,'    getURL: function (bounds) {'],[0,'        bounds = this.adjustBounds(bounds);'],[-1,'        '],[0,'        var imageSize = this.getImageSize();'],[0,'        var newParams = {};'],[-1,'        \/\/ WMS 1.3 introduced axis order'],[0,'        var reverseAxisOrder = this.reverseAxisOrder();'],[0,'        newParams.BBOX = this.encodeBBOX ?'],[-1,'            bounds.toBBOX(null, reverseAxisOrder) :'],[-1,'            bounds.toArray(reverseAxisOrder);'],[0,'        newParams.WIDTH = imageSize.w;'],[0,'        newParams.HEIGHT = imageSize.h;'],[0,'        var requestString = this.getFullRequestString(newParams);'],[0,'        return requestString;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: mergeNewParams'],[-1,'     * Catch changeParams and uppercase the new params to be merged in'],[-1,'     *     before calling changeParams on the super class.'],[-1,'     * '],[-1,'     *     Once params have been changed, the tiles will be reloaded with'],[-1,'     *     the new parameters.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * newParams - {Object} Hashtable of new params to use'],[-1,'     *\/'],[-1,'    mergeNewParams:function(newParams) {'],[0,'        var upperParams = OpenLayers.Util.upperCaseObject(newParams);'],[0,'        var newArguments = [upperParams];'],[0,'        return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, '],[-1,'                                                             newArguments);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: getFullRequestString'],[-1,'     * Combine the layer\'s url with its params and these newParams. '],[-1,'     *   '],[-1,'     *     Add the SRS parameter from projection -- this is probably'],[-1,'     *     more eloquently done via a setProjection() method, but this '],[-1,'     *     works for now and always.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * newParams - {Object}'],[-1,'     * altUrl - {String} Use this as the url instead of the layer\'s url'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} '],[-1,'     *\/'],[-1,'    getFullRequestString:function(newParams, altUrl) {'],[0,'        var mapProjection = this.map.getProjectionObject();'],[0,'        var projectionCode = this.projection &amp;&amp; this.projection.equals(mapProjection) ?'],[-1,'            this.projection.getCode() :'],[-1,'            mapProjection.getCode();'],[0,'        var value = (projectionCode == \&quot;none\&quot;) ? null : projectionCode;'],[0,'        if (parseFloat(this.params.VERSION) &gt;= 1.3) {'],[0,'            this.params.CRS = value;'],[-1,'        } else {'],[0,'            this.params.SRS = value;'],[-1,'        }'],[-1,'        '],[0,'        if (typeof this.params.TRANSPARENT == \&quot;boolean\&quot;) {'],[0,'            newParams.TRANSPARENT = this.params.TRANSPARENT ? \&quot;TRUE\&quot; : \&quot;FALSE\&quot;;'],[-1,'        }'],[-1,''],[0,'        return OpenLayers.Layer.Grid.prototype.getFullRequestString.apply('],[-1,'                                                    this, arguments);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.WMS\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/KaMap.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.KaMap'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.KaMap = OpenLayers.Class(OpenLayers.Layer.Grid, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * {Boolean} KaMap Layer is always a base layer '],[-1,'     *\/    '],[-1,'    isBaseLayer: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: DEFAULT_PARAMS'],[-1,'     * {Object} parameters set by default. The default parameters set '],[-1,'     * the format via the \'i\' parameter to \'jpeg\'.    '],[-1,'     *\/'],[-1,'    DEFAULT_PARAMS: {'],[-1,'        i: \'jpeg\','],[-1,'        map: \'\''],[-1,'    },'],[-1,'        '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.KaMap'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * name - {String}'],[-1,'     * url - {String}'],[-1,'     * params - {Object} Parameters to be sent to the HTTP server in the'],[-1,'     *    query string for the tile. The format can be set via the \'i\''],[-1,'     *    parameter (defaults to jpg) , and the map should be set via '],[-1,'     *    the \'map\' parameter. It has been reported that ka-Map may behave'],[-1,'     *    inconsistently if your format parameter does not match the format'],[-1,'     *    parameter configured in your config.php. (See ticket #327 for more'],[-1,'     *    information.)'],[-1,'     * options - {Object} Additional options for the layer. Any of the '],[-1,'     *     APIProperties listed on this layer, and any layer types it'],[-1,'     *     extends, can be overridden through the options parameter. '],[-1,'     *\/'],[-1,'    initialize: function(name, url, params, options) {'],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments);'],[0,'        this.params = OpenLayers.Util.applyDefaults('],[-1,'            this.params, this.DEFAULT_PARAMS'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} A string with the layer\'s url and parameters and also the '],[-1,'     *          passed-in bounds and appropriate tile size specified as '],[-1,'     *          parameters'],[-1,'     *\/'],[-1,'    getURL: function (bounds) {'],[0,'        bounds = this.adjustBounds(bounds);'],[0,'        var mapRes = this.map.getResolution();'],[0,'        var scale = Math.round((this.map.getScale() * 10000)) \/ 10000;'],[0,'        var pX = Math.round(bounds.left \/ mapRes);'],[0,'        var pY = -Math.round(bounds.top \/ mapRes);'],[0,'        return this.getFullRequestString('],[-1,'                      { t: pY, '],[-1,'                        l: pX,'],[-1,'                        s: scale'],[-1,'                      });'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: calculateGridLayout'],[-1,'     * ka-Map uses the center point of the map as an origin for '],[-1,'     * its tiles. Override calculateGridLayout to center tiles '],[-1,'     * correctly for this case.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bound&gt;}'],[-1,'     * origin - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     * resolution - {Number}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Object containing properties tilelon, tilelat, startcol,'],[-1,'     * startrow'],[-1,'     *\/'],[-1,'    calculateGridLayout: function(bounds, origin, resolution) {'],[0,'        var tilelon = resolution*this.tileSize.w;'],[0,'        var tilelat = resolution*this.tileSize.h;'],[-1,'        '],[0,'        var offsetlon = bounds.left;'],[0,'        var tilecol = Math.floor(offsetlon\/tilelon) - this.buffer;'],[-1,'        '],[0,'        var offsetlat = bounds.top;  '],[0,'        var tilerow = Math.floor(offsetlat\/tilelat) + this.buffer;'],[-1,'        '],[0,'        return { '],[-1,'          tilelon: tilelon, tilelat: tilelat,'],[-1,'          startcol: tilecol, startrow: tilerow'],[-1,'        };'],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'     * Method: getTileBoundsForGridIndex'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * row - {Number} The row of the grid'],[-1,'     * col - {Number} The column of the grid'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} The bounds for the tile at (row, col)'],[-1,'     *\/'],[-1,'    getTileBoundsForGridIndex: function(row, col) {'],[0,'        var origin = this.getTileOrigin();'],[0,'        var tileLayout = this.gridLayout;'],[0,'        var tilelon = tileLayout.tilelon;'],[0,'        var tilelat = tileLayout.tilelat;'],[0,'        var minX = (tileLayout.startcol + col) * tilelon;'],[0,'        var minY = (tileLayout.startrow - row) * tilelat;'],[0,'        return new OpenLayers.Bounds('],[-1,'            minX, minY,'],[-1,'            minX + tilelon, minY + tilelat'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * obj - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.Kamap&gt;} An exact clone of this OpenLayers.Layer.KaMap'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[-1,'        '],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.KaMap(this.name,'],[-1,'                                            this.url,'],[-1,'                                            this.params,'],[-1,'                                            this.getOptions());'],[-1,'        }'],[-1,''],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);'],[-1,''],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[0,'        if (this.tileSize != null) {'],[0,'            obj.tileSize = this.tileSize.clone();'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ we do not want to copy reference to grid, so we make a new array'],[0,'        obj.grid = [];'],[-1,''],[0,'        return obj;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getTileBounds'],[-1,'     * Returns The tile bounds for a layer given a pixel location.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * viewPortPx - {&lt;OpenLayers.Pixel&gt;} The location in the viewport.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} Bounds of the tile at the given pixel location.'],[-1,'     *\/'],[-1,'    getTileBounds: function(viewPortPx) {'],[0,'        var resolution = this.getResolution();'],[0,'        var tileMapWidth = resolution * this.tileSize.w;'],[0,'        var tileMapHeight = resolution * this.tileSize.h;'],[0,'        var mapPoint = this.getLonLatFromViewPortPx(viewPortPx);'],[0,'        var tileLeft = tileMapWidth * Math.floor(mapPoint.lon \/ tileMapWidth);'],[0,'        var tileBottom = tileMapHeight * Math.floor(mapPoint.lat \/ tileMapHeight);'],[0,'        return new OpenLayers.Bounds(tileLeft, tileBottom,'],[-1,'                                     tileLeft + tileMapWidth,'],[-1,'                                     tileBottom + tileMapHeight);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.KaMap\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMC.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/Context.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMC'],[-1,' * Read and write Web Map Context documents.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.Context&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMC = OpenLayers.Class(OpenLayers.Format.Context, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;1.1.0\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;1.1.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMC'],[-1,'     * Create a new parser for Web Map Context documents.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: layerToContext'],[-1,'     * Create a layer context object given a wms layer object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.WMS&gt;} The layer.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} A layer context object.'],[-1,'     *\/'],[-1,'    layerToContext: function(layer) {'],[0,'        var parser = this.getParser();'],[0,'        var layerContext = {'],[-1,'            queryable: layer.queryable,'],[-1,'            visibility: layer.visibility,'],[-1,'            name: layer.params[\&quot;LAYERS\&quot;],'],[-1,'            title: layer.name,'],[-1,'            \&quot;abstract\&quot;: layer.metadata[\&quot;abstract\&quot;],'],[-1,'            dataURL: layer.metadata.dataURL,'],[-1,'            metadataURL: layer.metadataURL,'],[-1,'            server: {'],[-1,'            version: layer.params[\&quot;VERSION\&quot;],'],[-1,'                url: layer.url'],[-1,'            },'],[-1,'            maxExtent: layer.maxExtent,'],[-1,'            transparent: layer.params[\&quot;TRANSPARENT\&quot;],'],[-1,'            numZoomLevels: layer.numZoomLevels,'],[-1,'            units: layer.units,'],[-1,'            isBaseLayer: layer.isBaseLayer,'],[-1,'            opacity: layer.opacity == 1 ? undefined : layer.opacity,'],[-1,'            displayInLayerSwitcher: layer.displayInLayerSwitcher,'],[-1,'            singleTile: layer.singleTile,'],[-1,'            tileSize: (layer.singleTile || !layer.tileSize) ? '],[-1,'                undefined : {width: layer.tileSize.w, height: layer.tileSize.h},'],[-1,'            minScale : (layer.options.resolutions ||'],[-1,'                        layer.options.scales || '],[-1,'                        layer.options.maxResolution || '],[-1,'                        layer.options.minScale) ? '],[-1,'                        layer.minScale : undefined,'],[-1,'            maxScale : (layer.options.resolutions ||'],[-1,'                        layer.options.scales || '],[-1,'                        layer.options.minResolution || '],[-1,'                        layer.options.maxScale) ? '],[-1,'                        layer.maxScale : undefined,'],[-1,'            formats: [],'],[-1,'            styles: [],'],[-1,'            srs: layer.srs,'],[-1,'            dimensions: layer.dimensions'],[-1,'        };'],[-1,''],[-1,''],[0,'        if (layer.metadata.servertitle) {'],[0,'            layerContext.server.title = layer.metadata.servertitle;'],[-1,'        }'],[-1,''],[0,'        if (layer.metadata.formats &amp;&amp; layer.metadata.formats.length &gt; 0) {'],[0,'            for (var i=0, len=layer.metadata.formats.length; i&lt;len; i++) {'],[0,'                var format = layer.metadata.formats[i];'],[0,'                layerContext.formats.push({'],[-1,'                    value: format.value,'],[-1,'                    current: (format.value == layer.params[\&quot;FORMAT\&quot;])'],[-1,'                });'],[-1,'            }'],[-1,'        } else {'],[0,'            layerContext.formats.push({'],[-1,'                value: layer.params[\&quot;FORMAT\&quot;],'],[-1,'                current: true'],[-1,'            });'],[-1,'        }'],[-1,''],[0,'        if (layer.metadata.styles &amp;&amp; layer.metadata.styles.length &gt; 0) {'],[0,'            for (var i=0, len=layer.metadata.styles.length; i&lt;len; i++) {'],[0,'                var style = layer.metadata.styles[i];'],[0,'                if ((style.href == layer.params[\&quot;SLD\&quot;]) ||'],[-1,'                    (style.body == layer.params[\&quot;SLD_BODY\&quot;]) ||'],[-1,'                    (style.name == layer.params[\&quot;STYLES\&quot;])) {'],[0,'                    style.current = true;'],[-1,'                } else {'],[0,'                    style.current = false;'],[-1,'                }'],[0,'                layerContext.styles.push(style);'],[-1,'            }'],[-1,'        } else {'],[0,'            layerContext.styles.push({'],[-1,'                href: layer.params[\&quot;SLD\&quot;],'],[-1,'                body: layer.params[\&quot;SLD_BODY\&quot;],'],[-1,'                name: layer.params[\&quot;STYLES\&quot;] || parser.defaultStyleName,'],[-1,'                title: parser.defaultStyleTitle,'],[-1,'                current: true'],[-1,'            });'],[-1,'        }'],[-1,''],[0,'        return layerContext;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: toContext'],[-1,'     * Create a context object free from layer given a map or a'],[-1,'     * context object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {&lt;OpenLayers.Map&gt; | Object} The map or context.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} A context object.'],[-1,'     *\/'],[-1,'    toContext: function(obj) {'],[0,'        var context = {};'],[0,'        var layers = obj.layers;'],[0,'        if (obj.CLASS_NAME == \&quot;OpenLayers.Map\&quot;) {'],[0,'            var metadata = obj.metadata || {};'],[0,'            context.size = obj.getSize();'],[0,'            context.bounds = obj.getExtent();'],[0,'            context.projection = obj.projection;'],[0,'            context.title = obj.title;'],[0,'            context.keywords = metadata.keywords;'],[0,'            context[\&quot;abstract\&quot;] = metadata[\&quot;abstract\&quot;];'],[0,'            context.logo = metadata.logo;'],[0,'            context.descriptionURL = metadata.descriptionURL;'],[0,'            context.contactInformation = metadata.contactInformation;'],[0,'            context.maxExtent = obj.maxExtent;'],[-1,'        } else {'],[-1,'            \/\/ copy all obj properties except the \&quot;layers\&quot; property'],[0,'            OpenLayers.Util.applyDefaults(context, obj);'],[0,'            if (context.layers != undefined) {'],[0,'                delete(context.layers);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        if (context.layersContext == undefined) {'],[0,'            context.layersContext = [];'],[-1,'        }'],[-1,''],[-1,'        \/\/ let\'s convert layers into layersContext object (if any)'],[0,'        if (layers != undefined &amp;&amp; OpenLayers.Util.isArray(layers)) {'],[0,'            for (var i=0, len=layers.length; i&lt;len; i++) {'],[0,'                var layer = layers[i];'],[0,'                if (layer instanceof OpenLayers.Layer.WMS) {'],[0,'                    context.layersContext.push(this.layerToContext(layer));'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return context;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMC\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMC\/v1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WMC.js'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMC.v1'],[-1,' * Superclass for WMC version 1 parsers.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMC.v1 = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        ol: \&quot;http:\/\/openlayers.org\/context\&quot;,'],[-1,'        wmc: \&quot;http:\/\/www.opengis.net\/context\&quot;,'],[-1,'        sld: \&quot;http:\/\/www.opengis.net\/sld\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location for a particular minor version.'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getNamespacePrefix'],[-1,'     * Get the namespace prefix for a given uri from the &lt;namespaces&gt; object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A namespace prefix or null if none found.'],[-1,'     *\/'],[-1,'    getNamespacePrefix: function(uri) {'],[0,'        var prefix = null;'],[0,'        if(uri == null) {'],[0,'            prefix = this.namespaces[this.defaultPrefix];'],[-1,'        } else {'],[0,'            for(prefix in this.namespaces) {'],[0,'                if(this.namespaces[prefix] == uri) {'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return prefix;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;wmc\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: rootPrefix'],[-1,'     * {String} Prefix on the root node that maps to the context namespace URI.'],[-1,'     *\/'],[-1,'    rootPrefix: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: defaultStyleName'],[-1,'     * {String} Style name used if layer has no style param.  Default is \&quot;\&quot;.'],[-1,'     *\/'],[-1,'    defaultStyleName: \&quot;\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: defaultStyleTitle'],[-1,'     * {String} Default style title.  Default is \&quot;Default\&quot;.'],[-1,'     *\/'],[-1,'    defaultStyleTitle: \&quot;Default\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMC.v1'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.WMC&gt; constructor instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read'],[-1,'     * Read capabilities data from a string, and return a list of layers. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} List of named layers.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        var root = data.documentElement;'],[0,'        this.rootPrefix = root.prefix;'],[0,'        var context = {'],[-1,'            version: root.getAttribute(\&quot;version\&quot;)'],[-1,'        };'],[0,'        this.runChildNodes(context, root);'],[0,'        return context;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: runChildNodes'],[-1,'     *\/'],[-1,'    runChildNodes: function(obj, node) {'],[0,'        var children = node.childNodes;'],[0,'        var childNode, processor, prefix, local;'],[0,'        for(var i=0, len=children.length; i&lt;len; ++i) {'],[0,'            childNode = children[i];'],[0,'            if(childNode.nodeType == 1) {'],[0,'                prefix = this.getNamespacePrefix(childNode.namespaceURI);'],[0,'                local = childNode.nodeName.split(\&quot;:\&quot;).pop();'],[0,'                processor = this[\&quot;read_\&quot; + prefix + \&quot;_\&quot; + local];'],[0,'                if(processor) {'],[0,'                    processor.apply(this, [obj, childNode]);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_wmc_General'],[-1,'     *\/'],[-1,'    read_wmc_General: function(context, node) {'],[0,'        this.runChildNodes(context, node);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_wmc_BoundingBox'],[-1,'     *\/'],[-1,'    read_wmc_BoundingBox: function(context, node) {'],[0,'        context.projection = node.getAttribute(\&quot;SRS\&quot;);'],[0,'        context.bounds = new OpenLayers.Bounds('],[-1,'            node.getAttribute(\&quot;minx\&quot;), node.getAttribute(\&quot;miny\&quot;),'],[-1,'            node.getAttribute(\&quot;maxx\&quot;), node.getAttribute(\&quot;maxy\&quot;)'],[-1,'        );'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_wmc_LayerList'],[-1,'     *\/'],[-1,'    read_wmc_LayerList: function(context, node) {'],[-1,'        \/\/ layersContext is an array containing info for each layer'],[0,'        context.layersContext = [];'],[0,'        this.runChildNodes(context, node);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_wmc_Layer'],[-1,'     *\/'],[-1,'    read_wmc_Layer: function(context, node) {'],[0,'        var layerContext = {'],[-1,'            visibility: (node.getAttribute(\&quot;hidden\&quot;) != \&quot;1\&quot;),'],[-1,'            queryable: (node.getAttribute(\&quot;queryable\&quot;) == \&quot;1\&quot;),'],[-1,'            formats: [],'],[-1,'             styles: [],'],[-1,'             metadata: {}'],[-1,'        };'],[-1,''],[0,'        this.runChildNodes(layerContext, node);'],[-1,'        \/\/ set properties common to multiple objects on layer options\/params'],[0,'        context.layersContext.push(layerContext);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_wmc_Extension'],[-1,'     *\/'],[-1,'    read_wmc_Extension: function(obj, node) {'],[0,'        this.runChildNodes(obj, node);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_ol_units'],[-1,'     *\/'],[-1,'    read_ol_units: function(layerContext, node) {'],[0,'        layerContext.units = this.getChildValue(node);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_ol_maxExtent'],[-1,'     *\/'],[-1,'    read_ol_maxExtent: function(obj, node) {'],[0,'        var bounds = new OpenLayers.Bounds('],[-1,'            node.getAttribute(\&quot;minx\&quot;), node.getAttribute(\&quot;miny\&quot;),'],[-1,'            node.getAttribute(\&quot;maxx\&quot;), node.getAttribute(\&quot;maxy\&quot;)'],[-1,'        );'],[0,'        obj.maxExtent = bounds;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_ol_transparent'],[-1,'     *\/'],[-1,'    read_ol_transparent: function(layerContext, node) {'],[0,'        layerContext.transparent = this.getChildValue(node);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_ol_numZoomLevels'],[-1,'     *\/'],[-1,'    read_ol_numZoomLevels: function(layerContext, node) {'],[0,'        layerContext.numZoomLevels = parseInt(this.getChildValue(node));'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_ol_opacity'],[-1,'     *\/'],[-1,'    read_ol_opacity: function(layerContext, node) {'],[0,'        layerContext.opacity = parseFloat(this.getChildValue(node));'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_ol_singleTile'],[-1,'     *\/'],[-1,'    read_ol_singleTile: function(layerContext, node) {'],[0,'        layerContext.singleTile = (this.getChildValue(node) == \&quot;true\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_ol_tileSize'],[-1,'     *\/'],[-1,'    read_ol_tileSize: function(layerContext, node) {'],[0,'        var obj = {\&quot;width\&quot;: node.getAttribute(\&quot;width\&quot;), \&quot;height\&quot;: node.getAttribute(\&quot;height\&quot;)};'],[0,'        layerContext.tileSize = obj;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_ol_isBaseLayer'],[-1,'     *\/'],[-1,'    read_ol_isBaseLayer: function(layerContext, node) {'],[0,'        layerContext.isBaseLayer = (this.getChildValue(node) == \&quot;true\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_ol_displayInLayerSwitcher'],[-1,'     *\/'],[-1,'    read_ol_displayInLayerSwitcher: function(layerContext, node) {'],[0,'        layerContext.displayInLayerSwitcher = (this.getChildValue(node) == \&quot;true\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_wmc_Server'],[-1,'     *\/'],[-1,'    read_wmc_Server: function(layerContext, node) {'],[0,'        layerContext.version = node.getAttribute(\&quot;version\&quot;);'],[0,'         layerContext.url = this.getOnlineResource_href(node);'],[0,'         layerContext.metadata.servertitle = node.getAttribute(\&quot;title\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_wmc_FormatList'],[-1,'     *\/'],[-1,'    read_wmc_FormatList: function(layerContext, node) {'],[0,'        this.runChildNodes(layerContext, node);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_wmc_Format'],[-1,'     *\/'],[-1,'    read_wmc_Format: function(layerContext, node) {'],[0,'        var format = {'],[-1,'            value: this.getChildValue(node)'],[-1,'        };'],[0,'        if(node.getAttribute(\&quot;current\&quot;) == \&quot;1\&quot;) {'],[0,'            format.current = true;'],[-1,'        }'],[0,'        layerContext.formats.push(format);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_wmc_StyleList'],[-1,'     *\/'],[-1,'    read_wmc_StyleList: function(layerContext, node) {'],[0,'        this.runChildNodes(layerContext, node);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_wmc_Style'],[-1,'     *\/'],[-1,'    read_wmc_Style: function(layerContext, node) {'],[0,'        var style = {};'],[0,'        this.runChildNodes(style, node);'],[0,'        if(node.getAttribute(\&quot;current\&quot;) == \&quot;1\&quot;) {'],[0,'            style.current = true;'],[-1,'        }'],[0,'        layerContext.styles.push(style);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_wmc_SLD'],[-1,'     *\/'],[-1,'    read_wmc_SLD: function(style, node) {'],[0,'        this.runChildNodes(style, node);'],[-1,'        \/\/ style either comes back with an href or a body property'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_sld_StyledLayerDescriptor'],[-1,'     *\/'],[-1,'    read_sld_StyledLayerDescriptor: function(sld, node) {'],[0,'        var xml = OpenLayers.Format.XML.prototype.write.apply(this, [node]);'],[0,'        sld.body = xml;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'      * Method: read_sld_FeatureTypeStyle'],[-1,'      *\/'],[-1,'     read_sld_FeatureTypeStyle: function(sld, node) {'],[0,'         var xml = OpenLayers.Format.XML.prototype.write.apply(this, [node]);'],[0,'         sld.body = xml;'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'     * Method: read_wmc_OnlineResource'],[-1,'     *\/'],[-1,'    read_wmc_OnlineResource: function(obj, node) {'],[0,'        obj.href = this.getAttributeNS('],[-1,'            node, this.namespaces.xlink, \&quot;href\&quot;'],[-1,'        );'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_wmc_Name'],[-1,'     *\/'],[-1,'    read_wmc_Name: function(obj, node) {'],[0,'        var name = this.getChildValue(node);'],[0,'        if(name) {'],[0,'            obj.name = name;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_wmc_Title'],[-1,'     *\/'],[-1,'    read_wmc_Title: function(obj, node) {'],[0,'        var title = this.getChildValue(node);'],[0,'        if(title) {'],[0,'            obj.title = title;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_wmc_MetadataURL'],[-1,'     *\/'],[-1,'    read_wmc_MetadataURL: function(layerContext, node) {'],[0,'         layerContext.metadataURL = this.getOnlineResource_href(node);'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_KeywordList'],[-1,'      *\/'],[-1,'     read_wmc_KeywordList: function(context, node) {'],[0,'         context.keywords = [];'],[0,'         this.runChildNodes(context.keywords, node);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'      * Method: read_wmc_Keyword'],[-1,'      *\/'],[-1,'     read_wmc_Keyword: function(keywords, node) {'],[0,'         keywords.push(this.getChildValue(node));'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'     * Method: read_wmc_Abstract'],[-1,'     *\/'],[-1,'    read_wmc_Abstract: function(obj, node) {'],[0,'        var abst = this.getChildValue(node);'],[0,'        if(abst) {'],[0,'            obj[\&quot;abstract\&quot;] = abst;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'      * Method: read_wmc_LogoURL'],[-1,'      *\/'],[-1,'     read_wmc_LogoURL: function(context, node) {'],[0,'         context.logo = {'],[-1,'             width:  node.getAttribute(\&quot;width\&quot;),'],[-1,'             height: node.getAttribute(\&quot;height\&quot;),'],[-1,'             format: node.getAttribute(\&quot;format\&quot;),'],[-1,'             href:   this.getOnlineResource_href(node)'],[-1,'         };'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_DescriptionURL'],[-1,'      *\/'],[-1,'     read_wmc_DescriptionURL: function(context, node) {'],[0,'         context.descriptionURL = this.getOnlineResource_href(node);'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_ContactInformation'],[-1,'     *\/'],[-1,'     read_wmc_ContactInformation: function(obj, node) {'],[0,'         var contact = {};'],[0,'         this.runChildNodes(contact, node);'],[0,'         obj.contactInformation = contact;'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_ContactPersonPrimary'],[-1,'      *\/'],[-1,'     read_wmc_ContactPersonPrimary: function(contact, node) {'],[0,'         var personPrimary = {};'],[0,'         this.runChildNodes(personPrimary, node);'],[0,'         contact.personPrimary = personPrimary;'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_ContactPerson'],[-1,'      *\/'],[-1,'     read_wmc_ContactPerson: function(primaryPerson, node) {'],[0,'         var person = this.getChildValue(node);'],[0,'         if (person) {'],[0,'             primaryPerson.person = person;'],[-1,'         }'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_ContactOrganization'],[-1,'      *\/'],[-1,'     read_wmc_ContactOrganization: function(primaryPerson, node) {'],[0,'         var organization = this.getChildValue(node);'],[0,'         if (organization) {'],[0,'             primaryPerson.organization = organization;'],[-1,'         }'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_ContactPosition'],[-1,'      *\/'],[-1,'     read_wmc_ContactPosition: function(contact, node) {'],[0,'         var position = this.getChildValue(node);'],[0,'         if (position) {'],[0,'             contact.position = position;'],[-1,'         }'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_ContactAddress'],[-1,'      *\/'],[-1,'     read_wmc_ContactAddress: function(contact, node) {'],[0,'         var contactAddress = {};'],[0,'         this.runChildNodes(contactAddress, node);'],[0,'         contact.contactAddress = contactAddress;'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_AddressType'],[-1,'      *\/'],[-1,'     read_wmc_AddressType: function(contactAddress, node) {'],[0,'         var type = this.getChildValue(node);'],[0,'         if (type) {'],[0,'             contactAddress.type = type;'],[-1,'         }'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_Address'],[-1,'      *\/'],[-1,'     read_wmc_Address: function(contactAddress, node) {'],[0,'         var address = this.getChildValue(node);'],[0,'         if (address) {'],[0,'             contactAddress.address = address;'],[-1,'         }'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_City'],[-1,'      *\/'],[-1,'     read_wmc_City: function(contactAddress, node) {'],[0,'         var city = this.getChildValue(node);'],[0,'         if (city) {'],[0,'             contactAddress.city = city;'],[-1,'         }'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_StateOrProvince'],[-1,'      *\/'],[-1,'     read_wmc_StateOrProvince: function(contactAddress, node) {'],[0,'         var stateOrProvince = this.getChildValue(node);'],[0,'         if (stateOrProvince) {'],[0,'             contactAddress.stateOrProvince = stateOrProvince;'],[-1,'         }'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_PostCode'],[-1,'      *\/'],[-1,'     read_wmc_PostCode: function(contactAddress, node) {'],[0,'         var postcode = this.getChildValue(node);'],[0,'         if (postcode) {'],[0,'             contactAddress.postcode = postcode;'],[-1,'         }'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_Country'],[-1,'      *\/'],[-1,'     read_wmc_Country: function(contactAddress, node) {'],[0,'         var country = this.getChildValue(node);'],[0,'         if (country) {'],[0,'             contactAddress.country = country;'],[-1,'         }'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_ContactVoiceTelephone'],[-1,'      *\/'],[-1,'     read_wmc_ContactVoiceTelephone: function(contact, node) {'],[0,'         var phone = this.getChildValue(node);'],[0,'         if (phone) {'],[0,'             contact.phone = phone;'],[-1,'         }'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_ContactFacsimileTelephone'],[-1,'      *\/'],[-1,'     read_wmc_ContactFacsimileTelephone: function(contact, node) {'],[0,'         var fax = this.getChildValue(node);'],[0,'         if (fax) {'],[0,'             contact.fax = fax;'],[-1,'         }'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_ContactElectronicMailAddress'],[-1,'      *\/'],[-1,'     read_wmc_ContactElectronicMailAddress: function(contact, node) {'],[0,'         var email = this.getChildValue(node);'],[0,'         if (email) {'],[0,'             contact.email = email;'],[-1,'         }'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: read_wmc_DataURL'],[-1,'      *\/'],[-1,'     read_wmc_DataURL: function(layerContext, node) {'],[0,'         layerContext.dataURL = this.getOnlineResource_href(node);'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'     * Method: read_wmc_LegendURL'],[-1,'     *\/'],[-1,'    read_wmc_LegendURL: function(style, node) {'],[0,'        var legend = {'],[-1,'            width: node.getAttribute(\'width\'),'],[-1,'             height: node.getAttribute(\'height\'),'],[-1,'             format: node.getAttribute(\'format\'),'],[-1,'             href:   this.getOnlineResource_href(node)'],[-1,'        };'],[0,'        style.legend = legend;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'      * Method: read_wmc_DimensionList'],[-1,'      *\/'],[-1,'     read_wmc_DimensionList: function(layerContext, node) {'],[0,'         layerContext.dimensions = {};'],[0,'         this.runChildNodes(layerContext.dimensions, node);'],[-1,'     },'],[-1,'     \/**'],[-1,'      * Method: read_wmc_Dimension'],[-1,'      *\/'],[-1,'     read_wmc_Dimension: function(dimensions, node) {'],[0,'         var name = node.getAttribute(\&quot;name\&quot;).toLowerCase();'],[-1,''],[0,'         var dim = {'],[-1,'             name:           name,'],[-1,'             units:          node.getAttribute(\&quot;units\&quot;)          ||  \&quot;\&quot;,'],[-1,'             unitSymbol:     node.getAttribute(\&quot;unitSymbol\&quot;)     ||  \&quot;\&quot;,'],[-1,'             userValue:      node.getAttribute(\&quot;userValue\&quot;)      ||  \&quot;\&quot;,'],[-1,'             nearestValue:   node.getAttribute(\&quot;nearestValue\&quot;)   === \&quot;1\&quot;,'],[-1,'             multipleValues: node.getAttribute(\&quot;multipleValues\&quot;) === \&quot;1\&quot;,'],[-1,'             current:        node.getAttribute(\&quot;current\&quot;)        === \&quot;1\&quot;,'],[-1,'             \&quot;default\&quot;:      node.getAttribute(\&quot;default\&quot;)        ||  \&quot;\&quot;'],[-1,'         };'],[0,'         var values = this.getChildValue(node);'],[0,'         dim.values = values.split(\&quot;,\&quot;);'],[-1,''],[0,'         dimensions[dim.name] = dim;'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'     * Method: write'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * context - {Object} An object representing the map context.'],[-1,'     * options - {Object} Optional object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A WMC document string.'],[-1,'     *\/'],[-1,'    write: function(context, options) {'],[0,'        var root = this.createElementDefaultNS(\&quot;ViewContext\&quot;);'],[0,'        this.setAttributes(root, {'],[-1,'            version: this.VERSION,'],[-1,'            id: (options &amp;&amp; typeof options.id == \&quot;string\&quot;) ?'],[-1,'                    options.id :'],[-1,'                    OpenLayers.Util.createUniqueID(\&quot;OpenLayers_Context_\&quot;)'],[-1,'        });'],[-1,'        '],[-1,'        \/\/ add schemaLocation attribute'],[0,'        this.setAttributeNS('],[-1,'            root, this.namespaces.xsi,'],[-1,'            \&quot;xsi:schemaLocation\&quot;, this.schemaLocation'],[-1,'        );'],[-1,'        '],[-1,'        \/\/ required General element'],[0,'        root.appendChild(this.write_wmc_General(context));'],[-1,''],[-1,'        \/\/ required LayerList element'],[0,'        root.appendChild(this.write_wmc_LayerList(context));'],[-1,''],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [root]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createElementDefaultNS'],[-1,'     * Shorthand for createElementNS with namespace from &lt;defaultPrefix&gt;.'],[-1,'     *     Can optionally be used to set attributes and a text child value.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} The qualified node name.'],[-1,'     * childValue - {String} Optional value for text child node.'],[-1,'     * attributes - {Object} Optional object representing attributes.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} An element node.'],[-1,'     *\/'],[-1,'    createElementDefaultNS: function(name, childValue, attributes) {'],[0,'        var node = this.createElementNS('],[-1,'            this.namespaces[this.defaultPrefix],'],[-1,'            name'],[-1,'        );'],[0,'        if(childValue) {'],[0,'            node.appendChild(this.createTextNode(childValue));'],[-1,'        }'],[0,'        if(attributes) {'],[0,'            this.setAttributes(node, attributes);'],[-1,'        }'],[0,'        return node;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setAttributes'],[-1,'     * Set multiple attributes given key value pairs from an object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {Element} An element node.'],[-1,'     * obj - {Object} An object whose properties represent attribute names and'],[-1,'     *     values represent attribute values.'],[-1,'     *\/'],[-1,'    setAttributes: function(node, obj) {'],[0,'        var value;'],[0,'        for(var name in obj) {'],[0,'            value = obj[name].toString();'],[0,'            if(value.match(\/[A-Z]\/)) {'],[-1,'                \/\/ safari lowercases attributes with setAttribute'],[0,'                this.setAttributeNS(node, null, name, value);'],[-1,'            } else {'],[0,'                node.setAttribute(name, value);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write_wmc_General'],[-1,'     * Create a General node given an context object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * context - {Object} Context object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A WMC General element node.'],[-1,'     *\/'],[-1,'    write_wmc_General: function(context) {'],[0,'        var node = this.createElementDefaultNS(\&quot;General\&quot;);'],[-1,''],[-1,'        \/\/ optional Window element'],[0,'        if(context.size) {'],[0,'            node.appendChild(this.createElementDefaultNS('],[-1,'                \&quot;Window\&quot;, null,'],[-1,'                {'],[-1,'                    width: context.size.w,'],[-1,'                    height: context.size.h'],[-1,'                }'],[-1,'            ));'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ required BoundingBox element'],[0,'        var bounds = context.bounds;'],[0,'        node.appendChild(this.createElementDefaultNS('],[-1,'            \&quot;BoundingBox\&quot;, null,'],[-1,'            {'],[-1,'                minx: bounds.left.toPrecision(18),'],[-1,'                miny: bounds.bottom.toPrecision(18),'],[-1,'                maxx: bounds.right.toPrecision(18),'],[-1,'                maxy: bounds.top.toPrecision(18),'],[-1,'                SRS: context.projection'],[-1,'            }'],[-1,'        ));'],[-1,''],[-1,'        \/\/ required Title element'],[0,'        node.appendChild(this.createElementDefaultNS('],[-1,'            \&quot;Title\&quot;, context.title'],[-1,'        ));'],[-1,'        '],[-1,'         \/\/ optional KeywordList element'],[0,'         if (context.keywords) {'],[0,'             node.appendChild(this.write_wmc_KeywordList(context.keywords));'],[-1,'         }'],[-1,''],[-1,'         \/\/ optional Abstract element'],[0,'         if (context[\&quot;abstract\&quot;]) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;Abstract\&quot;, context[\&quot;abstract\&quot;]'],[-1,'             ));'],[-1,'         }'],[-1,''],[-1,'         \/\/ Optional LogoURL element'],[0,'         if (context.logo) {'],[0,'             node.appendChild(this.write_wmc_URLType(\&quot;LogoURL\&quot;, context.logo.href, context.logo));'],[-1,'         }'],[-1,''],[-1,'         \/\/ Optional DescriptionURL element'],[0,'         if (context.descriptionURL) {'],[0,'             node.appendChild(this.write_wmc_URLType(\&quot;DescriptionURL\&quot;, context.descriptionURL));'],[-1,'         }'],[-1,''],[-1,'         \/\/ Optional ContactInformation element'],[0,'         if (context.contactInformation) {'],[0,'             node.appendChild(this.write_wmc_ContactInformation(context.contactInformation));'],[-1,'         }'],[-1,''],[-1,'        \/\/ OpenLayers specific map properties'],[0,'        node.appendChild(this.write_ol_MapExtension(context));'],[-1,'        '],[0,'        return node;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'      * Method: write_wmc_KeywordList'],[-1,'      *\/'],[-1,'     write_wmc_KeywordList: function(keywords) {'],[0,'         var node = this.createElementDefaultNS(\&quot;KeywordList\&quot;);'],[-1,''],[0,'         for (var i=0, len=keywords.length; i&lt;len; i++) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;Keyword\&quot;, keywords[i]'],[-1,'             ));'],[-1,'         }'],[0,'         return node;'],[-1,'     },'],[-1,'     \/**'],[-1,'      * Method: write_wmc_ContactInformation'],[-1,'      *\/'],[-1,'     write_wmc_ContactInformation: function(contact) {'],[0,'         var node = this.createElementDefaultNS(\&quot;ContactInformation\&quot;);'],[-1,''],[0,'         if (contact.personPrimary) {'],[0,'             node.appendChild(this.write_wmc_ContactPersonPrimary(contact.personPrimary));'],[-1,'         }'],[0,'         if (contact.position) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;ContactPosition\&quot;, contact.position'],[-1,'             ));'],[-1,'         }'],[0,'         if (contact.contactAddress) {'],[0,'             node.appendChild(this.write_wmc_ContactAddress(contact.contactAddress));'],[-1,'         }'],[0,'         if (contact.phone) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;ContactVoiceTelephone\&quot;, contact.phone'],[-1,'             ));'],[-1,'         }'],[0,'         if (contact.fax) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;ContactFacsimileTelephone\&quot;, contact.fax'],[-1,'             ));'],[-1,'         }'],[0,'         if (contact.email) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;ContactElectronicMailAddress\&quot;, contact.email'],[-1,'             ));'],[-1,'         }'],[0,'         return node;'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: write_wmc_ContactPersonPrimary'],[-1,'      *\/'],[-1,'     write_wmc_ContactPersonPrimary: function(personPrimary) {'],[0,'         var node = this.createElementDefaultNS(\&quot;ContactPersonPrimary\&quot;);'],[0,'         if (personPrimary.person) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;ContactPerson\&quot;, personPrimary.person'],[-1,'             ));'],[-1,'         }'],[0,'         if (personPrimary.organization) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;ContactOrganization\&quot;, personPrimary.organization'],[-1,'             ));'],[-1,'         }'],[0,'         return node;'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: write_wmc_ContactAddress'],[-1,'      *\/'],[-1,'     write_wmc_ContactAddress: function(contactAddress) {'],[0,'         var node = this.createElementDefaultNS(\&quot;ContactAddress\&quot;);'],[0,'         if (contactAddress.type) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;AddressType\&quot;, contactAddress.type'],[-1,'             ));'],[-1,'         }'],[0,'         if (contactAddress.address) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;Address\&quot;, contactAddress.address'],[-1,'             ));'],[-1,'         }'],[0,'         if (contactAddress.city) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;City\&quot;, contactAddress.city'],[-1,'             ));'],[-1,'         }'],[0,'         if (contactAddress.stateOrProvince) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;StateOrProvince\&quot;, contactAddress.stateOrProvince'],[-1,'             ));'],[-1,'         }'],[0,'         if (contactAddress.postcode) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;PostCode\&quot;, contactAddress.postcode'],[-1,'             ));'],[-1,'         }'],[0,'         if (contactAddress.country) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;Country\&quot;, contactAddress.country'],[-1,'             ));'],[-1,'         }'],[0,'         return node;'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'     * Method: write_ol_MapExtension'],[-1,'     *\/'],[-1,'    write_ol_MapExtension: function(context) {'],[0,'        var node = this.createElementDefaultNS(\&quot;Extension\&quot;);'],[-1,'        '],[0,'        var bounds = context.maxExtent;'],[0,'        if(bounds) {'],[0,'            var maxExtent = this.createElementNS('],[-1,'                this.namespaces.ol, \&quot;ol:maxExtent\&quot;'],[-1,'            );'],[0,'            this.setAttributes(maxExtent, {'],[-1,'                minx: bounds.left.toPrecision(18),'],[-1,'                miny: bounds.bottom.toPrecision(18),'],[-1,'                maxx: bounds.right.toPrecision(18),'],[-1,'                maxy: bounds.top.toPrecision(18)'],[-1,'            });'],[0,'            node.appendChild(maxExtent);'],[-1,'        }'],[-1,'        '],[0,'        return node;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: write_wmc_LayerList'],[-1,'     * Create a LayerList node given an context object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * context - {Object} Context object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A WMC LayerList element node.'],[-1,'     *\/'],[-1,'    write_wmc_LayerList: function(context) {'],[0,'        var list = this.createElementDefaultNS(\&quot;LayerList\&quot;);'],[-1,'        '],[0,'        for(var i=0, len=context.layersContext.length; i&lt;len; ++i) {'],[0,'            list.appendChild(this.write_wmc_Layer(context.layersContext[i]));'],[-1,'        }'],[-1,'        '],[0,'        return list;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write_wmc_Layer'],[-1,'     * Create a Layer node given a layer context object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * context - {Object} A layer context object.}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A WMC Layer element node.'],[-1,'     *\/'],[-1,'    write_wmc_Layer: function(context) {'],[0,'        var node = this.createElementDefaultNS('],[-1,'            \&quot;Layer\&quot;, null, {'],[-1,'                queryable: context.queryable ? \&quot;1\&quot; : \&quot;0\&quot;,'],[-1,'                hidden: context.visibility ? \&quot;0\&quot; : \&quot;1\&quot;'],[-1,'            }'],[-1,'        );'],[-1,'        '],[-1,'        \/\/ required Server element'],[0,'        node.appendChild(this.write_wmc_Server(context));'],[-1,''],[-1,'        \/\/ required Name element'],[0,'        node.appendChild(this.createElementDefaultNS('],[-1,'            \&quot;Name\&quot;, context.name'],[-1,'        ));'],[-1,'        '],[-1,'        \/\/ required Title element'],[0,'        node.appendChild(this.createElementDefaultNS('],[-1,'            \&quot;Title\&quot;, context.title'],[-1,'        ));'],[-1,''],[-1,'         \/\/ optional Abstract element'],[0,'         if (context[\&quot;abstract\&quot;]) {'],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;Abstract\&quot;, context[\&quot;abstract\&quot;]'],[-1,'             ));'],[-1,'         }'],[-1,''],[-1,'         \/\/ optional DataURL element'],[0,'         if (context.dataURL) {'],[0,'             node.appendChild(this.write_wmc_URLType(\&quot;DataURL\&quot;, context.dataURL));'],[-1,'         }'],[-1,''],[-1,'        \/\/ optional MetadataURL element'],[0,'        if (context.metadataURL) {'],[0,'             node.appendChild(this.write_wmc_URLType(\&quot;MetadataURL\&quot;, context.metadataURL));'],[-1,'        }'],[-1,'        '],[0,'        return node;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: write_wmc_LayerExtension'],[-1,'     * Add OpenLayers specific layer parameters to an Extension element.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * context - {Object} A layer context object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A WMC Extension element (for a layer).'],[-1,'     *\/'],[-1,'    write_wmc_LayerExtension: function(context) {'],[0,'        var node = this.createElementDefaultNS(\&quot;Extension\&quot;);'],[-1,'        '],[0,'        var bounds = context.maxExtent;'],[0,'        var maxExtent = this.createElementNS('],[-1,'            this.namespaces.ol, \&quot;ol:maxExtent\&quot;'],[-1,'        );'],[0,'        this.setAttributes(maxExtent, {'],[-1,'            minx: bounds.left.toPrecision(18),'],[-1,'            miny: bounds.bottom.toPrecision(18),'],[-1,'            maxx: bounds.right.toPrecision(18),'],[-1,'            maxy: bounds.top.toPrecision(18)'],[-1,'        });'],[0,'        node.appendChild(maxExtent);'],[-1,'        '],[0,'        if (context.tileSize &amp;&amp; !context.singleTile) {'],[0,'            var size = this.createElementNS('],[-1,'                this.namespaces.ol, \&quot;ol:tileSize\&quot;'],[-1,'            );'],[0,'            this.setAttributes(size, context.tileSize);'],[0,'            node.appendChild(size);'],[-1,'        }'],[-1,'        '],[0,'        var properties = ['],[-1,'            \&quot;transparent\&quot;, \&quot;numZoomLevels\&quot;, \&quot;units\&quot;, \&quot;isBaseLayer\&quot;,'],[-1,'            \&quot;opacity\&quot;, \&quot;displayInLayerSwitcher\&quot;, \&quot;singleTile\&quot;'],[-1,'        ];'],[0,'        var child;'],[0,'        for(var i=0, len=properties.length; i&lt;len; ++i) {'],[0,'            child = this.createOLPropertyNode(context, properties[i]);'],[0,'            if(child) {'],[0,'                node.appendChild(child);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        return node;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createOLPropertyNode'],[-1,'     * Create a node representing an OpenLayers property.  If the property is'],[-1,'     *     null or undefined, null will be returned.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object} An object.'],[-1,'     * prop - {String} A property.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A property node.'],[-1,'     *\/'],[-1,'    createOLPropertyNode: function(obj, prop) {'],[0,'        var node = null;'],[0,'        if(obj[prop] != null) {'],[0,'            node = this.createElementNS(this.namespaces.ol, \&quot;ol:\&quot; + prop);'],[0,'            node.appendChild(this.createTextNode(obj[prop].toString()));'],[-1,'        }'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write_wmc_Server'],[-1,'     * Create a Server node given a layer context object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * context - {Object} Layer context object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A WMC Server element node.'],[-1,'     *\/'],[-1,'    write_wmc_Server: function(context) {'],[0,'         var server = context.server;'],[0,'        var node = this.createElementDefaultNS(\&quot;Server\&quot;);'],[0,'         var attributes = {'],[-1,'            service: \&quot;OGC:WMS\&quot;,'],[-1,'             version: server.version'],[-1,'         };'],[0,'         if (server.title) {'],[0,'             attributes.title = server.title;'],[-1,'         }'],[0,'         this.setAttributes(node, attributes);'],[-1,'        '],[-1,'        \/\/ required OnlineResource element'],[0,'         node.appendChild(this.write_wmc_OnlineResource(server.url));'],[-1,'        '],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write_wmc_URLType'],[-1,'     * Create a LogoURL\/DescriptionURL\/MetadataURL\/DataURL\/LegendURL node given a object and elementName.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * elName - {String} Name of element (LogoURL\/DescriptionURL\/MetadataURL\/LegendURL)'],[-1,'     * url - {String} URL string value'],[-1,'     * attr - {Object} Optional attributes (width, height, format)'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A WMC element node.'],[-1,'     *\/'],[-1,'     write_wmc_URLType: function(elName, url, attr) {'],[0,'         var node = this.createElementDefaultNS(elName);'],[0,'         node.appendChild(this.write_wmc_OnlineResource(url));'],[0,'         if (attr) {'],[0,'             var optionalAttributes = [\&quot;width\&quot;, \&quot;height\&quot;, \&quot;format\&quot;];'],[0,'             for (var i=0; i&lt;optionalAttributes.length; i++) {'],[0,'                 if (optionalAttributes[i] in attr) {'],[0,'                     node.setAttribute(optionalAttributes[i], attr[optionalAttributes[i]]);'],[-1,'                 }'],[-1,'             }'],[-1,'         }'],[0,'         return node;'],[-1,'     },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: write_wmc_DimensionList'],[-1,'      *\/'],[-1,'     write_wmc_DimensionList: function(context) {'],[0,'         var node = this.createElementDefaultNS(\&quot;DimensionList\&quot;);'],[0,'         var required_attributes = {'],[-1,'             name: true,'],[-1,'             units: true,'],[-1,'             unitSymbol: true,'],[-1,'             userValue: true'],[-1,'         };'],[0,'         for (var dim in context.dimensions) {'],[0,'             var attributes = {};'],[0,'             var dimension = context.dimensions[dim];'],[0,'             for (var name in dimension) {'],[0,'                 if (typeof dimension[name] == \&quot;boolean\&quot;) {'],[0,'                     attributes[name] = Number(dimension[name]);'],[-1,'                 } else {'],[0,'                     attributes[name] = dimension[name];'],[-1,'                 }'],[-1,'             }'],[0,'             var values = \&quot;\&quot;;'],[0,'             if (attributes.values) {'],[0,'                 values = attributes.values.join(\&quot;,\&quot;);'],[0,'                 delete attributes.values;'],[-1,'             }'],[-1,''],[0,'             node.appendChild(this.createElementDefaultNS('],[-1,'                 \&quot;Dimension\&quot;, values, attributes'],[-1,'             ));'],[-1,'         }'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write_wmc_FormatList'],[-1,'     * Create a FormatList node given a layer context.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * context - {Object} Layer context object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A WMC FormatList element node.'],[-1,'     *\/'],[-1,'    write_wmc_FormatList: function(context) {'],[0,'        var node = this.createElementDefaultNS(\&quot;FormatList\&quot;);'],[0,'        for (var i=0, len=context.formats.length; i&lt;len; i++) {'],[0,'            var format = context.formats[i];'],[0,'            node.appendChild(this.createElementDefaultNS('],[-1,'                \&quot;Format\&quot;,'],[-1,'                format.value,'],[-1,'                (format.current &amp;&amp; format.current == true) ?'],[-1,'                    {current: \&quot;1\&quot;} : null'],[-1,'            ));'],[-1,'        }'],[-1,''],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write_wmc_StyleList'],[-1,'     * Create a StyleList node given a layer context.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {Object} Layer context object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A WMC StyleList element node.'],[-1,'     *\/'],[-1,'    write_wmc_StyleList: function(layer) {'],[0,'        var node = this.createElementDefaultNS(\&quot;StyleList\&quot;);'],[-1,''],[0,'        var styles = layer.styles;'],[0,'        if (styles &amp;&amp; OpenLayers.Util.isArray(styles)) {'],[0,'            var sld;'],[0,'            for (var i=0, len=styles.length; i&lt;len; i++) {'],[0,'                var s = styles[i];'],[-1,'                \/\/ three style types to consider'],[-1,'                \/\/ [1] linked SLD'],[-1,'                \/\/ [2] inline SLD'],[-1,'                \/\/ [3] named style'],[-1,'                \/\/ running child nodes always gets name, optionally gets href or body'],[0,'                var style = this.createElementDefaultNS('],[-1,'                    \&quot;Style\&quot;,'],[-1,'                    null,'],[-1,'                    (s.current &amp;&amp; s.current == true) ?'],[-1,'                    {current: \&quot;1\&quot;} : null'],[-1,'                );'],[0,'                if(s.href) { \/\/ [1]'],[0,'                    sld = this.createElementDefaultNS(\&quot;SLD\&quot;);'],[-1,'                     \/\/ Name is optional.'],[0,'                     if (s.name) {'],[0,'                    sld.appendChild(this.createElementDefaultNS(\&quot;Name\&quot;, s.name));'],[-1,'                     }'],[-1,'                    \/\/ Title is optional.'],[0,'                    if (s.title) {'],[0,'                        sld.appendChild(this.createElementDefaultNS(\&quot;Title\&quot;, s.title));'],[-1,'                    }'],[-1,'                     \/\/ LegendURL is optional'],[0,'                     if (s.legend) {'],[0,'                         sld.appendChild(this.write_wmc_URLType(\&quot;LegendURL\&quot;, s.legend.href, s.legend));'],[-1,'                     }'],[-1,''],[0,'                     var link = this.write_wmc_OnlineResource(s.href);'],[0,'                     sld.appendChild(link);'],[0,'                    style.appendChild(sld);'],[0,'                } else if(s.body) { \/\/ [2]'],[0,'                    sld = this.createElementDefaultNS(\&quot;SLD\&quot;);'],[-1,'                     \/\/ Name is optional.'],[0,'                     if (s.name) {'],[0,'                         sld.appendChild(this.createElementDefaultNS(\&quot;Name\&quot;, s.name));'],[-1,'                     }'],[-1,'                     \/\/ Title is optional.'],[0,'                     if (s.title) {'],[0,'                         sld.appendChild(this.createElementDefaultNS(\&quot;Title\&quot;, s.title));'],[-1,'                     }'],[-1,'                     \/\/ LegendURL is optional'],[0,'                     if (s.legend) {'],[0,'                         sld.appendChild(this.write_wmc_URLType(\&quot;LegendURL\&quot;, s.legend.href, s.legend));'],[-1,'                     }'],[-1,''],[-1,'                    \/\/ read in body as xml doc - assume proper namespace declarations'],[0,'                    var doc = OpenLayers.Format.XML.prototype.read.apply(this, [s.body]);'],[-1,'                    \/\/ append to StyledLayerDescriptor node'],[0,'                    var imported = doc.documentElement;'],[0,'                    if(sld.ownerDocument &amp;&amp; sld.ownerDocument.importNode) {'],[0,'                        imported = sld.ownerDocument.importNode(imported, true);'],[-1,'                    }'],[0,'                    sld.appendChild(imported);'],[0,'                    style.appendChild(sld);            '],[-1,'                } else { \/\/ [3]'],[-1,'                    \/\/ both Name and Title are required.'],[0,'                    style.appendChild(this.createElementDefaultNS(\&quot;Name\&quot;, s.name));'],[0,'                    style.appendChild(this.createElementDefaultNS(\&quot;Title\&quot;, s.title));'],[-1,'                    \/\/ Abstract is optional'],[0,'                    if (s[\'abstract\']) { \/\/ abstract is a js keyword'],[0,'                        style.appendChild(this.createElementDefaultNS('],[-1,'                            \&quot;Abstract\&quot;, s[\'abstract\']'],[-1,'                        ));'],[-1,'                    }'],[-1,'                     \/\/ LegendURL is optional'],[0,'                     if (s.legend) {'],[0,'                         style.appendChild(this.write_wmc_URLType(\&quot;LegendURL\&quot;, s.legend.href, s.legend));'],[-1,'                }'],[-1,'                 }'],[0,'                node.appendChild(style);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write_wmc_OnlineResource'],[-1,'     * Create an OnlineResource node given a URL.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * href - {String} URL for the resource.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A WMC OnlineResource element node.'],[-1,'     *\/'],[-1,'    write_wmc_OnlineResource: function(href) {'],[0,'        var node = this.createElementDefaultNS(\&quot;OnlineResource\&quot;);'],[0,'        this.setAttributeNS(node, this.namespaces.xlink, \&quot;xlink:type\&quot;, \&quot;simple\&quot;);'],[0,'        this.setAttributeNS(node, this.namespaces.xlink, \&quot;xlink:href\&quot;, href);'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'     \/**'],[-1,'      * Method: getOnlineResource_href'],[-1,'      *\/'],[-1,'     getOnlineResource_href: function(node) {'],[0,'         var object = {};'],[0,'         var links = node.getElementsByTagName(\&quot;OnlineResource\&quot;);'],[0,'         if(links.length &gt; 0) {'],[0,'             this.read_wmc_OnlineResource(object, links[0]);'],[-1,'         }'],[0,'         return object.href;'],[-1,'     },'],[-1,''],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMC.v1\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMC\/v1_1_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WMC\/v1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMC.v1_1_0'],[-1,' * Read and write WMC version 1.1.0.'],[-1,' *'],[-1,' * Differences between 1.1.0 and 1.0.0:'],[-1,' *     - 1.1.0 Layers have optional sld:MinScaleDenominator and'],[-1,' *       sld:MaxScaleDenominator'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WMC.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMC.v1_1_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.WMC.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: VERSION'],[-1,'     * {String} 1.1.0'],[-1,'     *\/'],[-1,'    VERSION: \&quot;1.1.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} http:\/\/www.opengis.net\/context'],[-1,'     *     http:\/\/schemas.opengis.net\/context\/1.1.0\/context.xsd'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/context http:\/\/schemas.opengis.net\/context\/1.1.0\/context.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMC.v1_1_0'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.WMC&gt; constructor instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.WMC.v1.prototype.initialize.apply('],[-1,'            this, [options]'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_sld_MinScaleDenominator'],[-1,'     * Read a sld:MinScaleDenominator node.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layerContext - {Object} An object representing a layer.'],[-1,'     * node - {Element} An element node.'],[-1,'     *\/'],[-1,'    read_sld_MinScaleDenominator: function(layerContext, node) {'],[0,'        var minScaleDenominator = parseFloat(this.getChildValue(node));'],[0,'        if (minScaleDenominator &gt; 0) {'],[0,'            layerContext.maxScale = minScaleDenominator;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_sld_MaxScaleDenominator'],[-1,'     * Read a sld:MaxScaleDenominator node.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layerContext - {Object} An object representing a layer.'],[-1,'     * node - {Element} An element node.'],[-1,'     *\/'],[-1,'    read_sld_MaxScaleDenominator: function(layerContext, node) {'],[0,'        layerContext.minScale = parseFloat(this.getChildValue(node));'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_wmc_SRS'],[-1,'     *\/'],[-1,'    read_wmc_SRS: function(layerContext, node) {'],[0,'        if (! (\&quot;srs\&quot; in layerContext)) {'],[0,'            layerContext.srs = {};'],[-1,'        }'],[0,'        layerContext.srs[this.getChildValue(node)] = true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write_wmc_Layer'],[-1,'     * Create a Layer node given a layer context object. This method adds'],[-1,'     *     elements specific to version 1.1.0.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * context - {Object} A layer context object.}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A WMC Layer element node.'],[-1,'     *\/'],[-1,'    write_wmc_Layer: function(context) {'],[0,'        var node = OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply('],[-1,'            this, [context]'],[-1,'        );'],[-1,'        '],[-1,'        \/\/ min\/max scale denominator elements go before the 4th element in v1'],[0,'        if(context.maxScale) {'],[0,'            var minSD = this.createElementNS('],[-1,'                this.namespaces.sld, \&quot;sld:MinScaleDenominator\&quot;'],[-1,'            );'],[0,'            minSD.appendChild(this.createTextNode(context.maxScale.toPrecision(16)));'],[0,'            node.appendChild(minSD);'],[-1,'        }'],[-1,'        '],[0,'        if(context.minScale) {'],[0,'            var maxSD = this.createElementNS('],[-1,'                this.namespaces.sld, \&quot;sld:MaxScaleDenominator\&quot;'],[-1,'            );'],[0,'            maxSD.appendChild(this.createTextNode(context.minScale.toPrecision(16)));'],[0,'            node.appendChild(maxSD);'],[-1,'        }'],[-1,''],[-1,'        \/\/ optional SRS element(s)'],[0,'        if (context.srs) {'],[0,'            for(var name in context.srs) {'],[0,'                node.appendChild(this.createElementDefaultNS(\&quot;SRS\&quot;, name));'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ optional FormatList element'],[0,'        node.appendChild(this.write_wmc_FormatList(context));'],[-1,''],[-1,'        \/\/ optional StyleList element'],[0,'        node.appendChild(this.write_wmc_StyleList(context));'],[-1,'        '],[-1,'        \/\/ optional DimensionList element'],[0,'        if (context.dimensions) {'],[0,'            node.appendChild(this.write_wmc_DimensionList(context));'],[-1,'        }'],[-1,''],[-1,'        \/\/ OpenLayers specific properties go in an Extension element'],[0,'        node.appendChild(this.write_wmc_LayerExtension(context));'],[-1,'        '],[0,'        return node;'],[-1,'        '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMC.v1_1_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/XLS.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.XLS'],[-1,' * Read\/Write XLS (OpenLS). Create a new instance with the &lt;OpenLayers.Format.XLS&gt;'],[-1,' *     constructor. Currently only implemented for Location Utility Services, more'],[-1,' *     specifically only for Geocoding. No support for Reverse Geocoding as yet.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML.VersionedOGC&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.XLS = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;1.1.0\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;1.1.0\&quot;,'],[-1,' '],[-1,'    \/**'],[-1,'     * APIProperty: stringifyOutput'],[-1,'     * {Boolean} If true, write will return a string otherwise a DOMElement.'],[-1,'     * Default is true.'],[-1,'     *\/'],[-1,'    stringifyOutput: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.XLS'],[-1,'     * Create a new parser for XLS.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Write out an XLS request.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * request - {Object} An object representing the LUS request.'],[-1,'     * options - {Object} Optional configuration object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} An XLS document string.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read an XLS doc and return an object representing the result.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {String | DOMElement} Data to read.'],[-1,'     * options - {Object} Options for the reader.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object representing the GeocodeResponse.'],[-1,'     *\/'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.XLS\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/XLS\/v1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XLS.js'],[-1,' * @requires OpenLayers\/Format\/GML\/v3.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.XLS.v1'],[-1,' * Superclass for XLS version 1 parsers. Only supports GeocodeRequest for now.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.XLS.v1 = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        xls: \&quot;http:\/\/www.opengis.net\/xls\&quot;,'],[-1,'        gml: \&quot;http:\/\/www.opengis.net\/gml\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: xy'],[-1,'     * {Boolean} Order of the GML coordinate true:(x,y) or false:(y,x)'],[-1,'     * Changing is not recommended, a new Format should be instantiated.'],[-1,'     *\/'],[-1,'    xy: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;xls\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location for a particular minor version.'],[-1,'     *\/'],[-1,'    schemaLocation: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.XLS.v1'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.XLS&gt; constructor instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {DOMElement} An XLS document element.'],[-1,'     * options - {Object} Options for the reader.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object representing the XLSResponse.'],[-1,'     *\/'],[-1,'    read: function(data, options) {'],[0,'        options = OpenLayers.Util.applyDefaults(options, this.options);'],[0,'        var xls = {};'],[0,'        this.readChildNodes(data, xls);'],[0,'        return xls;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;xls\&quot;: {'],[-1,'            \&quot;XLS\&quot;: function(node, xls) {'],[0,'                xls.version = node.getAttribute(\&quot;version\&quot;);'],[0,'                this.readChildNodes(node, xls);'],[-1,'            },'],[-1,'            \&quot;Response\&quot;: function(node, xls) {'],[0,'               this.readChildNodes(node, xls);'],[-1,'            },'],[-1,'            \&quot;GeocodeResponse\&quot;: function(node, xls) {'],[0,'               xls.responseLists = [];'],[0,'               this.readChildNodes(node, xls);'],[-1,'            },'],[-1,'            \&quot;GeocodeResponseList\&quot;: function(node, xls) {'],[0,'                var responseList = {'],[-1,'                    features: [], '],[-1,'                    numberOfGeocodedAddresses: '],[-1,'                        parseInt(node.getAttribute(\&quot;numberOfGeocodedAddresses\&quot;))'],[-1,'                };'],[0,'                xls.responseLists.push(responseList);'],[0,'                this.readChildNodes(node, responseList);'],[-1,'            },'],[-1,'            \&quot;GeocodedAddress\&quot;: function(node, responseList) {'],[0,'                var feature = new OpenLayers.Feature.Vector();'],[0,'                responseList.features.push(feature);'],[0,'                this.readChildNodes(node, feature);'],[-1,'                \/\/ post-process geometry'],[0,'                feature.geometry = feature.components[0];'],[-1,'            },'],[-1,'            \&quot;GeocodeMatchCode\&quot;: function(node, feature) {'],[0,'                feature.attributes.matchCode = {'],[-1,'                    accuracy: parseFloat(node.getAttribute(\&quot;accuracy\&quot;)),'],[-1,'                    matchType: node.getAttribute(\&quot;matchType\&quot;)'],[-1,'                };'],[-1,'            },'],[-1,'            \&quot;Address\&quot;: function(node, feature) {'],[0,'                var address = {'],[-1,'                    countryCode: node.getAttribute(\&quot;countryCode\&quot;),'],[-1,'                    addressee: node.getAttribute(\&quot;addressee\&quot;),'],[-1,'                    street: [],'],[-1,'                    place: []'],[-1,'                };'],[0,'                feature.attributes.address = address;'],[0,'                this.readChildNodes(node, address);'],[-1,'            },'],[-1,'            \&quot;freeFormAddress\&quot;: function(node, address) {'],[0,'                address.freeFormAddress = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;StreetAddress\&quot;: function(node, address) {'],[0,'                this.readChildNodes(node, address);'],[-1,'            },'],[-1,'            \&quot;Building\&quot;: function(node, address) {'],[0,'                address.building = {'],[-1,'                    \'number\': node.getAttribute(\&quot;number\&quot;),'],[-1,'                    subdivision: node.getAttribute(\&quot;subdivision\&quot;),'],[-1,'                    buildingName: node.getAttribute(\&quot;buildingName\&quot;)'],[-1,'                };'],[-1,'            },'],[-1,'            \&quot;Street\&quot;: function(node, address) {'],[-1,'                \/\/ only support the built-in primitive type for now'],[0,'                address.street.push(this.getChildValue(node));'],[-1,'            },'],[-1,'            \&quot;Place\&quot;: function(node, address) {'],[-1,'                \/\/ type is one of CountrySubdivision, '],[-1,'                \/\/ CountrySecondarySubdivision, Municipality or'],[-1,'                \/\/ MunicipalitySubdivision'],[0,'                address.place[node.getAttribute(\&quot;type\&quot;)] = '],[-1,'                    this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;PostalCode\&quot;: function(node, address) {'],[0,'                address.postalCode = this.getChildValue(node);'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;gml\&quot;: OpenLayers.Format.GML.v3.prototype.readers.gml'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: write'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * request - {Object} An object representing the geocode request.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The root of an XLS document.'],[-1,'     *\/'],[-1,'    write: function(request) {'],[0,'        return this.writers.xls.XLS.apply(this, [request]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;xls\&quot;: {'],[-1,'            \&quot;XLS\&quot;: function(request) {'],[0,'                var root = this.createElementNSPlus('],[-1,'                    \&quot;xls:XLS\&quot;,'],[-1,'                    {attributes: {'],[-1,'                        \&quot;version\&quot;: this.VERSION,'],[-1,'                        \&quot;xsi:schemaLocation\&quot;: this.schemaLocation'],[-1,'                    }}'],[-1,'                );'],[0,'                this.writeNode(\&quot;RequestHeader\&quot;, request.header, root);'],[0,'                this.writeNode(\&quot;Request\&quot;, request, root);'],[0,'                return root;'],[-1,'            },'],[-1,'            \&quot;RequestHeader\&quot;: function(header) {'],[0,'                return this.createElementNSPlus(\&quot;xls:RequestHeader\&quot;);'],[-1,'            },'],[-1,'            \&quot;Request\&quot;: function(request) {'],[0,'                var node = this.createElementNSPlus(\&quot;xls:Request\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        methodName: \&quot;GeocodeRequest\&quot;,'],[-1,'                        requestID: request.requestID || \&quot;\&quot;,'],[-1,'                        version: this.VERSION'],[-1,'                    }'],[-1,'                });'],[0,'                this.writeNode(\&quot;GeocodeRequest\&quot;, request.addresses, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;GeocodeRequest\&quot;: function(addresses) {'],[0,'                var node = this.createElementNSPlus(\&quot;xls:GeocodeRequest\&quot;);'],[0,'                for (var i=0, len=addresses.length; i&lt;len; i++) {'],[0,'                    this.writeNode(\&quot;Address\&quot;, addresses[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Address\&quot;: function(address) {'],[0,'                var node = this.createElementNSPlus(\&quot;xls:Address\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        countryCode: address.countryCode'],[-1,'                    }'],[-1,'                });'],[0,'                if (address.freeFormAddress) {'],[0,'                    this.writeNode(\&quot;freeFormAddress\&quot;, address.freeFormAddress, node);'],[-1,'                } else {'],[0,'                    if (address.street) {'],[0,'                        this.writeNode(\&quot;StreetAddress\&quot;, address, node);'],[-1,'                    }'],[0,'                    if (address.municipality) {'],[0,'                        this.writeNode(\&quot;Municipality\&quot;, address.municipality, node);'],[-1,'                    }'],[0,'                    if (address.countrySubdivision) {'],[0,'                        this.writeNode(\&quot;CountrySubdivision\&quot;, address.countrySubdivision, node);'],[-1,'                    }'],[0,'                    if (address.postalCode) {'],[0,'                        this.writeNode(\&quot;PostalCode\&quot;, address.postalCode, node);'],[-1,'                    }'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;freeFormAddress\&quot;: function(freeFormAddress) {'],[0,'                return this.createElementNSPlus(\&quot;freeFormAddress\&quot;, '],[-1,'                    {value: freeFormAddress});'],[-1,'            },'],[-1,'            \&quot;StreetAddress\&quot;: function(address) {'],[0,'                var node = this.createElementNSPlus(\&quot;xls:StreetAddress\&quot;);'],[0,'                if (address.building) {'],[0,'                    this.writeNode(node, \&quot;Building\&quot;, address.building);'],[-1,'                }'],[0,'                var street = address.street;'],[0,'                if (!(OpenLayers.Util.isArray(street))) {'],[0,'                    street = [street];'],[-1,'                }'],[0,'                for (var i=0, len=street.length; i &lt; len; i++) {'],[0,'                    this.writeNode(\&quot;Street\&quot;, street[i], node);'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Building\&quot;: function(building) {'],[0,'                return this.createElementNSPlus(\&quot;xls:Building\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        \&quot;number\&quot;: building[\&quot;number\&quot;],'],[-1,'                        \&quot;subdivision\&quot;: building.subdivision,'],[-1,'                        \&quot;buildingName\&quot;: building.buildingName'],[-1,'                    }'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;Street\&quot;: function(street) {'],[0,'                return this.createElementNSPlus(\&quot;xls:Street\&quot;, {value: street});'],[-1,'            },'],[-1,'            \&quot;Municipality\&quot;: function(municipality) {'],[0,'                return this.createElementNSPlus(\&quot;xls:Place\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        type: \&quot;Municipality\&quot;'],[-1,'                    },'],[-1,'                    value: municipality'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;CountrySubdivision\&quot;: function(countrySubdivision) {'],[0,'                return this.createElementNSPlus(\&quot;xls:Place\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        type: \&quot;CountrySubdivision\&quot;'],[-1,'                    },'],[-1,'                    value: countrySubdivision'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;PostalCode\&quot;: function(postalCode) {'],[0,'                return this.createElementNSPlus(\&quot;xls:PostalCode\&quot;, {'],[-1,'                    value: postalCode'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.XLS.v1\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/XLS\/v1_1_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XLS\/v1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.XLS.v1_1_0'],[-1,' * Read \/ write XLS version 1.1.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XLS.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.XLS.v1_1_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.XLS.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: VERSION'],[-1,'     * {String} 1.1'],[-1,'     *\/'],[-1,'    VERSION: \&quot;1.1\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} http:\/\/www.opengis.net\/xls'],[-1,'     *   http:\/\/schemas.opengis.net\/ols\/1.1.0\/LocationUtilityService.xsd'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/xls http:\/\/schemas.opengis.net\/ols\/1.1.0\/LocationUtilityService.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.XLS.v1_1_0'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.XLS&gt; constructor instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.XLS.v1_1_0\&quot;'],[-1,''],[-1,'});'],[-1,''],[-1,'\/\/ Support non standard implementation'],[1,'OpenLayers.Format.XLS.v1_1 = OpenLayers.Format.XLS.v1_1_0;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Renderer\/SVG.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Renderer\/Elements.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Renderer.SVG'],[-1,' * '],[-1,' * Inherits:'],[-1,' *  - &lt;OpenLayers.Renderer.Elements&gt;'],[-1,' *\/'],[1,'OpenLayers.Renderer.SVG = OpenLayers.Class(OpenLayers.Renderer.Elements, {'],[-1,''],[-1,'    \/** '],[-1,'     * Property: xmlns'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    xmlns: \&quot;http:\/\/www.w3.org\/2000\/svg\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: xlinkns'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    xlinkns: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: MAX_PIXEL'],[-1,'     * {Integer} Firefox has a limitation where values larger or smaller than  '],[-1,'     *           about 15000 in an SVG document lock the browser up. This '],[-1,'     *           works around it.'],[-1,'     *\/'],[-1,'    MAX_PIXEL: 15000,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: translationParameters'],[-1,'     * {Object} Hash with \&quot;x\&quot; and \&quot;y\&quot; properties'],[-1,'     *\/'],[-1,'    translationParameters: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: symbolMetrics'],[-1,'     * {Object} Cache for symbol metrics according to their svg coordinate'],[-1,'     *     space. This is an object keyed by the symbol\'s id, and values are'],[-1,'     *     an array of [width, centerX, centerY].'],[-1,'     *\/'],[-1,'    symbolMetrics: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Renderer.SVG'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * containerID - {String}'],[-1,'     *\/'],[-1,'    initialize: function(containerID) {'],[0,'        if (!this.supported()) { '],[0,'            return; '],[-1,'        }'],[0,'        OpenLayers.Renderer.Elements.prototype.initialize.apply(this, '],[-1,'                                                                arguments);'],[0,'        this.translationParameters = {x: 0, y: 0};'],[-1,'        '],[0,'        this.symbolMetrics = {};'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: supported'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the browser supports the SVG renderer'],[-1,'     *\/'],[-1,'    supported: function() {'],[0,'        var svgFeature = \&quot;http:\/\/www.w3.org\/TR\/SVG11\/feature#\&quot;;'],[0,'        return (document.implementation &amp;&amp; '],[-1,'           (document.implementation.hasFeature(\&quot;org.w3c.svg\&quot;, \&quot;1.0\&quot;) || '],[-1,'            document.implementation.hasFeature(svgFeature + \&quot;SVG\&quot;, \&quot;1.1\&quot;) || '],[-1,'            document.implementation.hasFeature(svgFeature + \&quot;BasicStructure\&quot;, \&quot;1.1\&quot;) ));'],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'     * Method: inValidRange'],[-1,'     * See #669 for more information'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x      - {Integer}'],[-1,'     * y      - {Integer}'],[-1,'     * xyOnly - {Boolean} whether or not to just check for x and y, which means'],[-1,'     *     to not take the current translation parameters into account if true.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the \'x\' and \'y\' coordinates are in the  '],[-1,'     *           valid range.'],[-1,'     *\/ '],[-1,'    inValidRange: function(x, y, xyOnly) {'],[0,'        var left = x + (xyOnly ? 0 : this.translationParameters.x);'],[0,'        var top = y + (xyOnly ? 0 : this.translationParameters.y);'],[0,'        return (left &gt;= -this.MAX_PIXEL &amp;&amp; left &lt;= this.MAX_PIXEL &amp;&amp;'],[-1,'                top &gt;= -this.MAX_PIXEL &amp;&amp; top &lt;= this.MAX_PIXEL);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setExtent'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * extent - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * resolutionChanged - {Boolean}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} true to notify the layer that the new extent does not exceed'],[-1,'     *     the coordinate range, and the features will not need to be redrawn.'],[-1,'     *     False otherwise.'],[-1,'     *\/'],[-1,'    setExtent: function(extent, resolutionChanged) {'],[0,'        var coordSysUnchanged = OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments);'],[-1,'        '],[0,'        var resolution = this.getResolution(),'],[-1,'            left = -extent.left \/ resolution,'],[-1,'            top = extent.top \/ resolution;'],[-1,''],[-1,'        \/\/ If the resolution has changed, start over changing the corner, because'],[-1,'        \/\/ the features will redraw.'],[0,'        if (resolutionChanged) {'],[0,'            this.left = left;'],[0,'            this.top = top;'],[-1,'            \/\/ Set the viewbox'],[0,'            var extentString = \&quot;0 0 \&quot; + this.size.w + \&quot; \&quot; + this.size.h;'],[-1,''],[0,'            this.rendererRoot.setAttributeNS(null, \&quot;viewBox\&quot;, extentString);'],[0,'            this.translate(this.xOffset, 0);'],[0,'            return true;'],[-1,'        } else {'],[0,'            var inRange = this.translate(left - this.left + this.xOffset, top - this.top);'],[0,'            if (!inRange) {'],[-1,'                \/\/ recenter the coordinate system'],[0,'                this.setExtent(extent, true);'],[-1,'            }'],[0,'            return coordSysUnchanged &amp;&amp; inRange;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: translate'],[-1,'     * Transforms the SVG coordinate system'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * x - {Float}'],[-1,'     * y - {Float}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} true if the translation parameters are in the valid coordinates'],[-1,'     *     range, false otherwise.'],[-1,'     *\/'],[-1,'    translate: function(x, y) {'],[0,'        if (!this.inValidRange(x, y, true)) {'],[0,'            return false;'],[-1,'        } else {'],[0,'            var transformString = \&quot;\&quot;;'],[0,'            if (x || y) {'],[0,'                transformString = \&quot;translate(\&quot; + x + \&quot;,\&quot; + y + \&quot;)\&quot;;'],[-1,'            }'],[0,'            this.root.setAttributeNS(null, \&quot;transform\&quot;, transformString);'],[0,'            this.translationParameters = {x: x, y: y};'],[0,'            return true;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setSize'],[-1,'     * Sets the size of the drawing surface.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * size - {&lt;OpenLayers.Size&gt;} The size of the drawing surface'],[-1,'     *\/'],[-1,'    setSize: function(size) {'],[0,'        OpenLayers.Renderer.prototype.setSize.apply(this, arguments);'],[-1,'        '],[0,'        this.rendererRoot.setAttributeNS(null, \&quot;width\&quot;, this.size.w);'],[0,'        this.rendererRoot.setAttributeNS(null, \&quot;height\&quot;, this.size.h);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: getNodeType '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} The corresponding node type for the specified geometry'],[-1,'     *\/'],[-1,'    getNodeType: function(geometry, style) {'],[0,'        var nodeType = null;'],[0,'        switch (geometry.CLASS_NAME) {'],[-1,'            case \&quot;OpenLayers.Geometry.Point\&quot;:'],[0,'                if (style.externalGraphic) {'],[0,'                    nodeType = \&quot;image\&quot;;'],[0,'                } else if (this.isComplexSymbol(style.graphicName)) {'],[0,'                    nodeType = \&quot;svg\&quot;;'],[-1,'                } else {'],[0,'                    nodeType = \&quot;circle\&quot;;'],[-1,'                }'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.Rectangle\&quot;:'],[0,'                nodeType = \&quot;rect\&quot;;'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.LineString\&quot;:'],[0,'                nodeType = \&quot;polyline\&quot;;'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.LinearRing\&quot;:'],[0,'                nodeType = \&quot;polygon\&quot;;'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.Polygon\&quot;:'],[-1,'            case \&quot;OpenLayers.Geometry.Curve\&quot;:'],[0,'                nodeType = \&quot;path\&quot;;'],[0,'                break;'],[-1,'            default:'],[0,'                break;'],[-1,'        }'],[0,'        return nodeType;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: setStyle'],[-1,'     * Use to set all the style attributes to a SVG node.'],[-1,'     * '],[-1,'     * Takes care to adjust stroke width and point radius to be'],[-1,'     * resolution-relative'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {SVGDomElement} An SVG element to decorate'],[-1,'     * style - {Object}'],[-1,'     * options - {Object} Currently supported options include '],[-1,'     *                              \'isFilled\' {Boolean} and'],[-1,'     *                              \'isStroked\' {Boolean}'],[-1,'     *\/'],[-1,'    setStyle: function(node, style, options) {'],[0,'        style = style  || node._style;'],[0,'        options = options || node._options;'],[-1,''],[0,'        var title = style.title || style.graphicTitle;'],[0,'        if (title) {'],[0,'            node.setAttributeNS(null, \&quot;title\&quot;, title);'],[-1,'            \/\/Standards-conformant SVG'],[-1,'            \/\/ Prevent duplicate nodes. See issue https:\/\/github.com\/openlayers\/openlayers\/issues\/92 '],[0,'            var titleNode = node.getElementsByTagName(\&quot;title\&quot;);'],[0,'            if (titleNode.length &gt; 0) {'],[0,'                titleNode[0].firstChild.textContent = title;'],[-1,'            } else {'],[0,'                var label = this.nodeFactory(null, \&quot;title\&quot;);'],[0,'                label.textContent = title;'],[0,'                node.appendChild(label);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        var r = parseFloat(node.getAttributeNS(null, \&quot;r\&quot;));'],[0,'        var widthFactor = 1;'],[0,'        var pos;'],[0,'        if (node._geometryClass == \&quot;OpenLayers.Geometry.Point\&quot; &amp;&amp; r) {'],[0,'            node.style.visibility = \&quot;\&quot;;'],[0,'            if (style.graphic === false) {'],[0,'                node.style.visibility = \&quot;hidden\&quot;;'],[0,'            } else if (style.externalGraphic) {'],[0,'                pos = this.getPosition(node);'],[0,'                if (style.graphicWidth &amp;&amp; style.graphicHeight) {'],[0,'                  node.setAttributeNS(null, \&quot;preserveAspectRatio\&quot;, \&quot;none\&quot;);'],[-1,'                }'],[0,'                var width = style.graphicWidth || style.graphicHeight;'],[0,'                var height = style.graphicHeight || style.graphicWidth;'],[0,'                width = width ? width : style.pointRadius*2;'],[0,'                height = height ? height : style.pointRadius*2;'],[0,'                var xOffset = (style.graphicXOffset != undefined) ?'],[-1,'                    style.graphicXOffset : -(0.5 * width);'],[0,'                var yOffset = (style.graphicYOffset != undefined) ?'],[-1,'                    style.graphicYOffset : -(0.5 * height);'],[-1,''],[0,'                var opacity = style.graphicOpacity || style.fillOpacity;'],[-1,'                '],[0,'                node.setAttributeNS(null, \&quot;x\&quot;, (pos.x + xOffset).toFixed());'],[0,'                node.setAttributeNS(null, \&quot;y\&quot;, (pos.y + yOffset).toFixed());'],[0,'                node.setAttributeNS(null, \&quot;width\&quot;, width);'],[0,'                node.setAttributeNS(null, \&quot;height\&quot;, height);'],[0,'                node.setAttributeNS(this.xlinkns, \&quot;xlink:href\&quot;, style.externalGraphic);'],[0,'                node.setAttributeNS(null, \&quot;style\&quot;, \&quot;opacity: \&quot;+opacity);'],[0,'                node.onclick = OpenLayers.Event.preventDefault;'],[0,'            } else if (this.isComplexSymbol(style.graphicName)) {'],[-1,'                \/\/ the symbol viewBox is three times as large as the symbol'],[0,'                var offset = style.pointRadius * 3;'],[0,'                var size = offset * 2;'],[0,'                var src = this.importSymbol(style.graphicName);'],[0,'                pos = this.getPosition(node);'],[0,'                widthFactor = this.symbolMetrics[src.id][0] * 3 \/ size;'],[-1,'                '],[-1,'                \/\/ remove the node from the dom before we modify it. This'],[-1,'                \/\/ prevents various rendering issues in Safari and FF'],[0,'                var parent = node.parentNode;'],[0,'                var nextSibling = node.nextSibling;'],[0,'                if(parent) {'],[0,'                    parent.removeChild(node);'],[-1,'                }'],[-1,'                '],[-1,'                \/\/ The more appropriate way to implement this would be use\/defs,'],[-1,'                \/\/ but due to various issues in several browsers, it is safer to'],[-1,'                \/\/ copy the symbols instead of referencing them. '],[-1,'                \/\/ See e.g. ticket http:\/\/trac.osgeo.org\/openlayers\/ticket\/2985 '],[-1,'                \/\/ and this email thread'],[-1,'                \/\/ http:\/\/osgeo-org.1803224.n2.nabble.com\/Select-Control-Ctrl-click-on-Feature-with-a-graphicName-opens-new-browser-window-tc5846039.html'],[0,'                node.firstChild &amp;&amp; node.removeChild(node.firstChild);'],[0,'                node.appendChild(src.firstChild.cloneNode(true));'],[0,'                node.setAttributeNS(null, \&quot;viewBox\&quot;, src.getAttributeNS(null, \&quot;viewBox\&quot;));'],[-1,'                '],[0,'                node.setAttributeNS(null, \&quot;width\&quot;, size);'],[0,'                node.setAttributeNS(null, \&quot;height\&quot;, size);'],[0,'                node.setAttributeNS(null, \&quot;x\&quot;, pos.x - offset);'],[0,'                node.setAttributeNS(null, \&quot;y\&quot;, pos.y - offset);'],[-1,'                '],[-1,'                \/\/ now that the node has all its new properties, insert it'],[-1,'                \/\/ back into the dom where it was'],[0,'                if(nextSibling) {'],[0,'                    parent.insertBefore(node, nextSibling);'],[0,'                } else if(parent) {'],[0,'                    parent.appendChild(node);'],[-1,'                }'],[-1,'            } else {'],[0,'                node.setAttributeNS(null, \&quot;r\&quot;, style.pointRadius);'],[-1,'            }'],[-1,''],[0,'            var rotation = style.rotation;'],[-1,'            '],[0,'            if ((rotation !== undefined || node._rotation !== undefined) &amp;&amp; pos) {'],[0,'                node._rotation = rotation;'],[0,'                rotation |= 0;'],[0,'                if (node.nodeName !== \&quot;svg\&quot;) { '],[0,'                    node.setAttributeNS(null, \&quot;transform\&quot;, '],[-1,'                        \&quot;rotate(\&quot; + rotation + \&quot; \&quot; + pos.x + \&quot; \&quot; + '],[-1,'                        pos.y + \&quot;)\&quot;); '],[-1,'                } else {'],[0,'                    var metrics = this.symbolMetrics[src.id];'],[0,'                    node.firstChild.setAttributeNS(null, \&quot;transform\&quot;, \&quot;rotate(\&quot; '],[-1,'                        + rotation + \&quot; \&quot; '],[-1,'                        + metrics[1] + \&quot; \&quot;'],[-1,'                        + metrics[2] + \&quot;)\&quot;);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        if (options.isFilled) {'],[0,'            node.setAttributeNS(null, \&quot;fill\&quot;, style.fillColor);'],[0,'            node.setAttributeNS(null, \&quot;fill-opacity\&quot;, style.fillOpacity);'],[-1,'        } else {'],[0,'            node.setAttributeNS(null, \&quot;fill\&quot;, \&quot;none\&quot;);'],[-1,'        }'],[-1,''],[0,'        if (options.isStroked) {'],[0,'            node.setAttributeNS(null, \&quot;stroke\&quot;, style.strokeColor);'],[0,'            node.setAttributeNS(null, \&quot;stroke-opacity\&quot;, style.strokeOpacity);'],[0,'            node.setAttributeNS(null, \&quot;stroke-width\&quot;, style.strokeWidth * widthFactor);'],[0,'            node.setAttributeNS(null, \&quot;stroke-linecap\&quot;, style.strokeLinecap || \&quot;round\&quot;);'],[-1,'            \/\/ Hard-coded linejoin for now, to make it look the same as in VML.'],[-1,'            \/\/ There is no strokeLinejoin property yet for symbolizers.'],[0,'            node.setAttributeNS(null, \&quot;stroke-linejoin\&quot;, \&quot;round\&quot;);'],[0,'            style.strokeDashstyle &amp;&amp; node.setAttributeNS(null,'],[-1,'                \&quot;stroke-dasharray\&quot;, this.dashStyle(style, widthFactor));'],[-1,'        } else {'],[0,'            node.setAttributeNS(null, \&quot;stroke\&quot;, \&quot;none\&quot;);'],[-1,'        }'],[-1,'        '],[0,'        if (style.pointerEvents) {'],[0,'            node.setAttributeNS(null, \&quot;pointer-events\&quot;, style.pointerEvents);'],[-1,'        }'],[-1,'                '],[0,'        if (style.cursor != null) {'],[0,'            node.setAttributeNS(null, \&quot;cursor\&quot;, style.cursor);'],[-1,'        }'],[-1,'        '],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: dashStyle'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * style - {Object}'],[-1,'     * widthFactor - {Number}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} A SVG compliant \'stroke-dasharray\' value'],[-1,'     *\/'],[-1,'    dashStyle: function(style, widthFactor) {'],[0,'        var w = style.strokeWidth * widthFactor;'],[0,'        var str = style.strokeDashstyle;'],[0,'        switch (str) {'],[-1,'            case \'solid\':'],[0,'                return \'none\';'],[-1,'            case \'dot\':'],[0,'                return [1, 4 * w].join();'],[-1,'            case \'dash\':'],[0,'                return [4 * w, 4 * w].join();'],[-1,'            case \'dashdot\':'],[0,'                return [4 * w, 4 * w, 1, 4 * w].join();'],[-1,'            case \'longdash\':'],[0,'                return [8 * w, 4 * w].join();'],[-1,'            case \'longdashdot\':'],[0,'                return [8 * w, 4 * w, 1, 4 * w].join();'],[-1,'            default:'],[0,'                return OpenLayers.String.trim(str).replace(\/\\s+\/g, \&quot;,\&quot;);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: createNode'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * type - {String} Kind of node to draw'],[-1,'     * id - {String} Id for node'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} A new node of the given type and id'],[-1,'     *\/'],[-1,'    createNode: function(type, id) {'],[0,'        var node = document.createElementNS(this.xmlns, type);'],[0,'        if (id) {'],[0,'            node.setAttributeNS(null, \&quot;id\&quot;, id);'],[-1,'        }'],[0,'        return node;    '],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: nodeTypeCompare'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {SVGDomElement} An SVG element'],[-1,'     * type - {String} Kind of node'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the specified node is of the specified type'],[-1,'     *\/'],[-1,'    nodeTypeCompare: function(node, type) {'],[0,'        return (type == node.nodeName);'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * Method: createRenderRoot'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} The specific render engine\'s root element'],[-1,'     *\/'],[-1,'    createRenderRoot: function() {'],[0,'        var svg = this.nodeFactory(this.container.id + \&quot;_svgRoot\&quot;, \&quot;svg\&quot;);'],[0,'        svg.style.display = \&quot;block\&quot;;'],[0,'        return svg;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createRoot'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * suffix - {String} suffix to append to the id'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    createRoot: function(suffix) {'],[0,'        return this.nodeFactory(this.container.id + suffix, \&quot;g\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createDefs'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The element to which we\'ll add the symbol definitions'],[-1,'     *\/'],[-1,'    createDefs: function() {'],[0,'        var defs = this.nodeFactory(this.container.id + \&quot;_defs\&quot;, \&quot;defs\&quot;);'],[0,'        this.rendererRoot.appendChild(defs);'],[0,'        return defs;'],[-1,'    },'],[-1,''],[-1,'    \/**************************************'],[-1,'     *                                    *'],[-1,'     *     GEOMETRY DRAWING FUNCTIONS     *'],[-1,'     *                                    *'],[-1,'     **************************************\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawPoint'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or false if the renderer could not draw the point'],[-1,'     *\/ '],[-1,'    drawPoint: function(node, geometry) {'],[0,'        return this.drawCircle(node, geometry, 1);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawCircle'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * radius - {Float}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or false if the renderer could not draw the circle'],[-1,'     *\/'],[-1,'    drawCircle: function(node, geometry, radius) {'],[0,'        var resolution = this.getResolution();'],[0,'        var x = ((geometry.x - this.featureDx) \/ resolution + this.left);'],[0,'        var y = (this.top - geometry.y \/ resolution);'],[-1,''],[0,'        if (this.inValidRange(x, y)) { '],[0,'            node.setAttributeNS(null, \&quot;cx\&quot;, x);'],[0,'            node.setAttributeNS(null, \&quot;cy\&quot;, y);'],[0,'            node.setAttributeNS(null, \&quot;r\&quot;, radius);'],[0,'            return node;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }    '],[-1,'            '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawLineString'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or null if the renderer could not draw all components of'],[-1,'     *     the linestring, or false if nothing could be drawn'],[-1,'     *\/ '],[-1,'    drawLineString: function(node, geometry) {'],[0,'        var componentsResult = this.getComponentsString(geometry.components);'],[0,'        if (componentsResult.path) {'],[0,'            node.setAttributeNS(null, \&quot;points\&quot;, componentsResult.path);'],[0,'            return (componentsResult.complete ? node : null);  '],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawLinearRing'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or null if the renderer could not draw all components'],[-1,'     *     of the linear ring, or false if nothing could be drawn'],[-1,'     *\/ '],[-1,'    drawLinearRing: function(node, geometry) {'],[0,'        var componentsResult = this.getComponentsString(geometry.components);'],[0,'        if (componentsResult.path) {'],[0,'            node.setAttributeNS(null, \&quot;points\&quot;, componentsResult.path);'],[0,'            return (componentsResult.complete ? node : null);  '],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawPolygon'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or null if the renderer could not draw all components'],[-1,'     *     of the polygon, or false if nothing could be drawn'],[-1,'     *\/ '],[-1,'    drawPolygon: function(node, geometry) {'],[0,'        var d = \&quot;\&quot;;'],[0,'        var draw = true;'],[0,'        var complete = true;'],[0,'        var linearRingResult, path;'],[0,'        for (var j=0, len=geometry.components.length; j&lt;len; j++) {'],[0,'            d += \&quot; M\&quot;;'],[0,'            linearRingResult = this.getComponentsString('],[-1,'                geometry.components[j].components, \&quot; \&quot;);'],[0,'            path = linearRingResult.path;'],[0,'            if (path) {'],[0,'                d += \&quot; \&quot; + path;'],[0,'                complete = linearRingResult.complete &amp;&amp; complete;'],[-1,'            } else {'],[0,'                draw = false;'],[-1,'            }'],[-1,'        }'],[0,'        d += \&quot; z\&quot;;'],[0,'        if (draw) {'],[0,'            node.setAttributeNS(null, \&quot;d\&quot;, d);'],[0,'            node.setAttributeNS(null, \&quot;fill-rule\&quot;, \&quot;evenodd\&quot;);'],[0,'            return complete ? node : null;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }    '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawRectangle'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or false if the renderer could not draw the rectangle'],[-1,'     *\/ '],[-1,'    drawRectangle: function(node, geometry) {'],[0,'        var resolution = this.getResolution();'],[0,'        var x = ((geometry.x - this.featureDx) \/ resolution + this.left);'],[0,'        var y = (this.top - geometry.y \/ resolution);'],[-1,''],[0,'        if (this.inValidRange(x, y)) { '],[0,'            node.setAttributeNS(null, \&quot;x\&quot;, x);'],[0,'            node.setAttributeNS(null, \&quot;y\&quot;, y);'],[0,'            node.setAttributeNS(null, \&quot;width\&quot;, geometry.width \/ resolution);'],[0,'            node.setAttributeNS(null, \&quot;height\&quot;, geometry.height \/ resolution);'],[0,'            return node;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawText'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * featureId - {String}'],[-1,'     * style -'],[-1,'     * location - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     *\/'],[-1,'    drawText: function(featureId, style, location) {'],[0,'        var drawOutline = (!!style.labelOutlineWidth);'],[-1,'        \/\/ First draw text in halo color and size and overlay the'],[-1,'        \/\/ normal text afterwards'],[0,'        if (drawOutline) {'],[0,'            var outlineStyle = OpenLayers.Util.extend({}, style);'],[0,'            outlineStyle.fontColor = outlineStyle.labelOutlineColor;'],[0,'            outlineStyle.fontStrokeColor = outlineStyle.labelOutlineColor;'],[0,'            outlineStyle.fontStrokeWidth = style.labelOutlineWidth;'],[0,'            delete outlineStyle.labelOutlineWidth;'],[0,'            this.drawText(featureId, outlineStyle, location);'],[-1,'        }'],[-1,''],[0,'        var resolution = this.getResolution();'],[-1,''],[0,'        var x = ((location.x - this.featureDx) \/ resolution + this.left);'],[0,'        var y = (location.y \/ resolution - this.top);'],[-1,''],[0,'        var suffix = (drawOutline)?this.LABEL_OUTLINE_SUFFIX:this.LABEL_ID_SUFFIX;'],[0,'        var label = this.nodeFactory(featureId + suffix, \&quot;text\&quot;);'],[-1,''],[0,'        label.setAttributeNS(null, \&quot;x\&quot;, x);'],[0,'        label.setAttributeNS(null, \&quot;y\&quot;, -y);'],[-1,''],[0,'        if (style.fontColor) {'],[0,'            label.setAttributeNS(null, \&quot;fill\&quot;, style.fontColor);'],[-1,'        }'],[0,'        if (style.fontStrokeColor) {'],[0,'            label.setAttributeNS(null, \&quot;stroke\&quot;, style.fontStrokeColor);'],[-1,'        }'],[0,'        if (style.fontStrokeWidth) {'],[0,'            label.setAttributeNS(null, \&quot;stroke-width\&quot;, style.fontStrokeWidth);'],[-1,'        }'],[0,'        if (style.fontOpacity) {'],[0,'            label.setAttributeNS(null, \&quot;opacity\&quot;, style.fontOpacity);'],[-1,'        }'],[0,'        if (style.fontFamily) {'],[0,'            label.setAttributeNS(null, \&quot;font-family\&quot;, style.fontFamily);'],[-1,'        }'],[0,'        if (style.fontSize) {'],[0,'            label.setAttributeNS(null, \&quot;font-size\&quot;, style.fontSize);'],[-1,'        }'],[0,'        if (style.fontWeight) {'],[0,'            label.setAttributeNS(null, \&quot;font-weight\&quot;, style.fontWeight);'],[-1,'        }'],[0,'        if (style.fontStyle) {'],[0,'            label.setAttributeNS(null, \&quot;font-style\&quot;, style.fontStyle);'],[-1,'        }'],[0,'        if (style.labelSelect === true) {'],[0,'            label.setAttributeNS(null, \&quot;pointer-events\&quot;, \&quot;visible\&quot;);'],[0,'            label._featureId = featureId;'],[-1,'        } else {'],[0,'            label.setAttributeNS(null, \&quot;pointer-events\&quot;, \&quot;none\&quot;);'],[-1,'        }'],[0,'        var align = style.labelAlign || OpenLayers.Renderer.defaultSymbolizer.labelAlign;'],[0,'        label.setAttributeNS(null, \&quot;text-anchor\&quot;,'],[-1,'            OpenLayers.Renderer.SVG.LABEL_ALIGN[align[0]] || \&quot;middle\&quot;);'],[-1,''],[0,'        if (OpenLayers.IS_GECKO === true) {'],[0,'            label.setAttributeNS(null, \&quot;dominant-baseline\&quot;,'],[-1,'                OpenLayers.Renderer.SVG.LABEL_ALIGN[align[1]] || \&quot;central\&quot;);'],[-1,'        }'],[-1,''],[0,'        var labelRows = style.label.split(\'\\n\');'],[0,'        var numRows = labelRows.length;'],[0,'        while (label.childNodes.length &gt; numRows) {'],[0,'            label.removeChild(label.lastChild);'],[-1,'        }'],[0,'        for (var i = 0; i &lt; numRows; i++) {'],[0,'            var tspan = this.nodeFactory(featureId + suffix + \&quot;_tspan_\&quot; + i, \&quot;tspan\&quot;);'],[0,'            if (style.labelSelect === true) {'],[0,'                tspan._featureId = featureId;'],[0,'                tspan._geometry = location;'],[0,'                tspan._geometryClass = location.CLASS_NAME;'],[-1,'            }'],[0,'            if (OpenLayers.IS_GECKO === false) {'],[0,'                tspan.setAttributeNS(null, \&quot;baseline-shift\&quot;,'],[-1,'                    OpenLayers.Renderer.SVG.LABEL_VSHIFT[align[1]] || \&quot;-35%\&quot;);'],[-1,'            }'],[0,'            tspan.setAttribute(\&quot;x\&quot;, x);'],[0,'            if (i == 0) {'],[0,'                var vfactor = OpenLayers.Renderer.SVG.LABEL_VFACTOR[align[1]];'],[0,'                if (vfactor == null) {'],[0,'                     vfactor = -.5;'],[-1,'                }'],[0,'                tspan.setAttribute(\&quot;dy\&quot;, (vfactor*(numRows-1)) + \&quot;em\&quot;);'],[-1,'            } else {'],[0,'                tspan.setAttribute(\&quot;dy\&quot;, \&quot;1em\&quot;);'],[-1,'            }'],[0,'            tspan.textContent = (labelRows[i] === \'\') ? \' \' : labelRows[i];'],[0,'            if (!tspan.parentNode) {'],[0,'                label.appendChild(tspan);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        if (!label.parentNode) {'],[0,'            this.textRoot.appendChild(label);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: getComponentString'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * components - {Array(&lt;OpenLayers.Geometry.Point&gt;)} Array of points'],[-1,'     * separator - {String} character between coordinate pairs. Defaults to \&quot;,\&quot;'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} hash with properties \&quot;path\&quot; (the string created from the'],[-1,'     *     components and \&quot;complete\&quot; (false if the renderer was unable to'],[-1,'     *     draw all components)'],[-1,'     *\/'],[-1,'    getComponentsString: function(components, separator) {'],[0,'        var renderCmp = [];'],[0,'        var complete = true;'],[0,'        var len = components.length;'],[0,'        var strings = [];'],[0,'        var str, component;'],[0,'        for(var i=0; i&lt;len; i++) {'],[0,'            component = components[i];'],[0,'            renderCmp.push(component);'],[0,'            str = this.getShortString(component);'],[0,'            if (str) {'],[0,'                strings.push(str);'],[-1,'            } else {'],[-1,'                \/\/ The current component is outside the valid range. Let\'s'],[-1,'                \/\/ see if the previous or next component is inside the range.'],[-1,'                \/\/ If so, add the coordinate of the intersection with the'],[-1,'                \/\/ valid range bounds.'],[0,'                if (i &gt; 0) {'],[0,'                    if (this.getShortString(components[i - 1])) {'],[0,'                        strings.push(this.clipLine(components[i],'],[-1,'                            components[i-1]));'],[-1,'                    }'],[-1,'                }'],[0,'                if (i &lt; len - 1) {'],[0,'                    if (this.getShortString(components[i + 1])) {'],[0,'                        strings.push(this.clipLine(components[i],'],[-1,'                            components[i+1]));'],[-1,'                    }'],[-1,'                }'],[0,'                complete = false;'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        return {'],[-1,'            path: strings.join(separator || \&quot;,\&quot;),'],[-1,'            complete: complete'],[-1,'        };'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: clipLine'],[-1,'     * Given two points (one inside the valid range, and one outside),'],[-1,'     * clips the line betweeen the two points so that the new points are both'],[-1,'     * inside the valid range.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * badComponent - {&lt;OpenLayers.Geometry.Point&gt;} original geometry of the'],[-1,'     *     invalid point'],[-1,'     * goodComponent - {&lt;OpenLayers.Geometry.Point&gt;} original geometry of the'],[-1,'     *     valid point'],[-1,'     * Returns'],[-1,'     * {String} the SVG coordinate pair of the clipped point (like'],[-1,'     *     getShortString), or an empty string if both passed componets are at'],[-1,'     *     the same point.'],[-1,'     *\/'],[-1,'    clipLine: function(badComponent, goodComponent) {'],[0,'        if (goodComponent.equals(badComponent)) {'],[0,'            return \&quot;\&quot;;'],[-1,'        }'],[0,'        var resolution = this.getResolution();'],[0,'        var maxX = this.MAX_PIXEL - this.translationParameters.x;'],[0,'        var maxY = this.MAX_PIXEL - this.translationParameters.y;'],[0,'        var x1 = (goodComponent.x - this.featureDx) \/ resolution + this.left;'],[0,'        var y1 = this.top - goodComponent.y \/ resolution;'],[0,'        var x2 = (badComponent.x - this.featureDx) \/ resolution + this.left;'],[0,'        var y2 = this.top - badComponent.y \/ resolution;'],[0,'        var k;'],[0,'        if (x2 &lt; -maxX || x2 &gt; maxX) {'],[0,'            k = (y2 - y1) \/ (x2 - x1);'],[0,'            x2 = x2 &lt; 0 ? -maxX : maxX;'],[0,'            y2 = y1 + (x2 - x1) * k;'],[-1,'        }'],[0,'        if (y2 &lt; -maxY || y2 &gt; maxY) {'],[0,'            k = (x2 - x1) \/ (y2 - y1);'],[0,'            y2 = y2 &lt; 0 ? -maxY : maxY;'],[0,'            x2 = x1 + (y2 - y1) * k;'],[-1,'        }'],[0,'        return x2 + \&quot;,\&quot; + y2;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: getShortString'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} or false if point is outside the valid range'],[-1,'     *\/'],[-1,'    getShortString: function(point) {'],[0,'        var resolution = this.getResolution();'],[0,'        var x = ((point.x - this.featureDx) \/ resolution + this.left);'],[0,'        var y = (this.top - point.y \/ resolution);'],[-1,''],[0,'        if (this.inValidRange(x, y)) { '],[0,'            return x + \&quot;,\&quot; + y;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getPosition'],[-1,'     * Finds the position of an svg node.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} hash with x and y properties, representing the coordinates'],[-1,'     *     within the svg coordinate system'],[-1,'     *\/'],[-1,'    getPosition: function(node) {'],[0,'        return({'],[-1,'            x: parseFloat(node.getAttributeNS(null, \&quot;cx\&quot;)),'],[-1,'            y: parseFloat(node.getAttributeNS(null, \&quot;cy\&quot;))'],[-1,'        });'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: importSymbol'],[-1,'     * add a new symbol definition from the rendererer\'s symbol hash'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * graphicName - {String} name of the symbol to import'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} - the imported symbol'],[-1,'     *\/      '],[-1,'    importSymbol: function (graphicName)  {'],[0,'        if (!this.defs) {'],[-1,'            \/\/ create svg defs tag'],[0,'            this.defs = this.createDefs();'],[-1,'        }'],[0,'        var id = this.container.id + \&quot;-\&quot; + graphicName;'],[-1,'        '],[-1,'        \/\/ check if symbol already exists in the defs'],[0,'        var existing = document.getElementById(id);'],[0,'        if (existing != null) {'],[0,'            return existing;'],[-1,'        }'],[-1,'        '],[0,'        var symbol = OpenLayers.Renderer.symbol[graphicName];'],[0,'        if (!symbol) {'],[0,'            throw new Error(graphicName + \' is not a valid symbol name\');'],[-1,'        }'],[-1,''],[0,'        var symbolNode = this.nodeFactory(id, \&quot;symbol\&quot;);'],[0,'        var node = this.nodeFactory(null, \&quot;polygon\&quot;);'],[0,'        symbolNode.appendChild(node);'],[0,'        var symbolExtent = new OpenLayers.Bounds('],[-1,'                                    Number.MAX_VALUE, Number.MAX_VALUE, 0, 0);'],[-1,''],[0,'        var points = [];'],[0,'        var x,y;'],[0,'        for (var i=0; i&lt;symbol.length; i=i+2) {'],[0,'            x = symbol[i];'],[0,'            y = symbol[i+1];'],[0,'            symbolExtent.left = Math.min(symbolExtent.left, x);'],[0,'            symbolExtent.bottom = Math.min(symbolExtent.bottom, y);'],[0,'            symbolExtent.right = Math.max(symbolExtent.right, x);'],[0,'            symbolExtent.top = Math.max(symbolExtent.top, y);'],[0,'            points.push(x, \&quot;,\&quot;, y);'],[-1,'        }'],[-1,'        '],[0,'        node.setAttributeNS(null, \&quot;points\&quot;, points.join(\&quot; \&quot;));'],[-1,'        '],[0,'        var width = symbolExtent.getWidth();'],[0,'        var height = symbolExtent.getHeight();'],[-1,'        \/\/ create a viewBox three times as large as the symbol itself,'],[-1,'        \/\/ to allow for strokeWidth being displayed correctly at the corners.'],[0,'        var viewBox = [symbolExtent.left - width,'],[-1,'                        symbolExtent.bottom - height, width * 3, height * 3];'],[0,'        symbolNode.setAttributeNS(null, \&quot;viewBox\&quot;, viewBox.join(\&quot; \&quot;));'],[0,'        this.symbolMetrics[id] = ['],[-1,'            Math.max(width, height),'],[-1,'            symbolExtent.getCenterLonLat().lon,'],[-1,'            symbolExtent.getCenterLonLat().lat'],[-1,'        ];'],[-1,'        '],[0,'        this.defs.appendChild(symbolNode);'],[0,'        return symbolNode;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getFeatureIdFromEvent'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Object} An &lt;OpenLayers.Event&gt; object'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A feature id or undefined.'],[-1,'     *\/'],[-1,'    getFeatureIdFromEvent: function(evt) {'],[0,'        var featureId = OpenLayers.Renderer.Elements.prototype.getFeatureIdFromEvent.apply(this, arguments);'],[0,'        if(!featureId) {'],[0,'            var target = evt.target;'],[0,'            featureId = target.parentNode &amp;&amp; target != this.rendererRoot ?'],[-1,'                target.parentNode._featureId : undefined;'],[-1,'        }'],[0,'        return featureId;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Renderer.SVG\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Renderer.SVG.LABEL_ALIGN'],[-1,' * {Object}'],[-1,' *\/'],[1,'OpenLayers.Renderer.SVG.LABEL_ALIGN = {'],[-1,'    \&quot;l\&quot;: \&quot;start\&quot;,'],[-1,'    \&quot;r\&quot;: \&quot;end\&quot;,'],[-1,'    \&quot;b\&quot;: \&quot;bottom\&quot;,'],[-1,'    \&quot;t\&quot;: \&quot;hanging\&quot;'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Renderer.SVG.LABEL_VSHIFT'],[-1,' * {Object}'],[-1,' *\/'],[1,'OpenLayers.Renderer.SVG.LABEL_VSHIFT = {'],[-1,'    \/\/ according to'],[-1,'    \/\/ http:\/\/www.w3.org\/Graphics\/SVG\/Test\/20061213\/htmlObjectHarness\/full-text-align-02-b.html'],[-1,'    \/\/ a baseline-shift of -70% shifts the text exactly from the'],[-1,'    \/\/ bottom to the top of the baseline, so -35% moves the text to'],[-1,'    \/\/ the center of the baseline.'],[-1,'    \&quot;t\&quot;: \&quot;-70%\&quot;,'],[-1,'    \&quot;b\&quot;: \&quot;0\&quot;    '],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Renderer.SVG.LABEL_VFACTOR'],[-1,' * {Object}'],[-1,' *\/'],[1,'OpenLayers.Renderer.SVG.LABEL_VFACTOR = {'],[-1,'    \&quot;t\&quot;: 0,'],[-1,'    \&quot;b\&quot;: -1'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Function: OpenLayers.Renderer.SVG.preventDefault'],[-1,' * *Deprecated*.  Use &lt;OpenLayers.Event.preventDefault&gt; method instead.'],[-1,' * Used to prevent default events (especially opening images in a new tab on'],[-1,' * ctrl-click) from being executed for externalGraphic symbols'],[-1,' *\/'],[1,'OpenLayers.Renderer.SVG.preventDefault = function(e) {'],[0,'    OpenLayers.Event.preventDefault(e);'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMSDescribeLayer.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMSDescribeLayer'],[-1,' * Read SLD WMS DescribeLayer response'],[-1,' * DescribeLayer is meant to couple WMS to WFS and WCS'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML.VersionedOGC&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMSDescribeLayer = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;1.1.1\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;1.1.1\&quot;,'],[-1,'   '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMSDescribeLayer'],[-1,'     * Create a new parser for WMS DescribeLayer responses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read DescribeLayer data from a string, and return the response. '],[-1,'     * The OGC currently defines 2 formats which are allowed for output,'],[-1,'     * so we need to parse these 2 types'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} Array of {&lt;LayerDescription&gt;} objects which have:'],[-1,'     * - {String} owsType: WFS\/WCS'],[-1,'     * - {String} owsURL: the online resource'],[-1,'     * - {String} typeName: the name of the typename on the service'],[-1,'     *\/'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMSDescribeLayer\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMSDescribeLayer\/v1_1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WMSDescribeLayer.js'],[-1,' * @requires OpenLayers\/Format\/OGCExceptionReport.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMSDescribeLayer.v1_1_1'],[-1,' * Read SLD WMS DescribeLayer response for WMS 1.1.X'],[-1,' * WMS 1.1.X is tightly coupled to SLD 1.0.0'],[-1,' *'],[-1,' * Example DescribeLayer request: '],[-1,' * http:\/\/demo.opengeo.org\/geoserver\/wms?request=DescribeLayer&amp;version=1.1.1&amp;layers=topp:states'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WMSDescribeLayer&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMSDescribeLayer.v1_1_1 = OpenLayers.Class('],[-1,'    OpenLayers.Format.WMSDescribeLayer, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMSDescribeLayer'],[-1,'     * Create a new parser for WMS DescribeLayer responses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.WMSDescribeLayer.prototype.initialize.apply(this, '],[-1,'            [options]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read DescribeLayer data from a string, and return the response. '],[-1,'     * The OGC defines 2 formats which are allowed for output,'],[-1,'     * so we need to parse these 2 types for version 1.1.X'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Object with a layerDescriptions property, which holds an Array'],[-1,'     * of {&lt;LayerDescription&gt;} objects which have:'],[-1,'     * - {String} owsType: WFS\/WCS'],[-1,'     * - {String} owsURL: the online resource'],[-1,'     * - {String} typeName: the name of the typename on the owsType service'],[-1,'     * - {String} layerName: the name of the WMS layer we did a lookup for'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        var root = data.documentElement;'],[0,'        var children = root.childNodes; '],[0,'        var describelayer = {layerDescriptions: []};'],[0,'        var childNode, nodeName;'],[0,'        for(var i=0; i&lt;children.length; ++i) { '],[0,'            childNode = children[i];'],[0,'            nodeName = childNode.nodeName; '],[0,'            if (nodeName == \'LayerDescription\') {'],[0,'                var layerName = childNode.getAttribute(\'name\');'],[0,'                var owsType = \'\';'],[0,'                var owsURL = \'\';'],[0,'                var typeName = \'\';'],[-1,'                \/\/ check for owsType and owsURL attributes'],[0,'                if (childNode.getAttribute(\'owsType\')) {'],[0,'                  owsType = childNode.getAttribute(\'owsType\');'],[0,'                  owsURL = childNode.getAttribute(\'owsURL\');'],[-1,'                } else {'],[-1,'                    \/\/ look for wfs or wcs attribute'],[0,'                    if (childNode.getAttribute(\'wfs\') != \'\') {'],[0,'                        owsType = \'WFS\';'],[0,'                        owsURL = childNode.getAttribute(\'wfs\');'],[0,'                    } else if (childNode.getAttribute(\'wcs\') != \'\') {'],[0,'                        owsType = \'WCS\';'],[0,'                        owsURL = childNode.getAttribute(\'wcs\');'],[-1,'                    }'],[-1,'                }'],[-1,'                \/\/ look for Query child'],[0,'                var query = childNode.getElementsByTagName(\'Query\');'],[0,'                if(query.length &gt; 0) {'],[0,'                    typeName = query[0].getAttribute(\'typeName\');'],[0,'                    if (!typeName) {'],[-1,'                        \/\/ because of Ionic bug'],[0,'                        typeName = query[0].getAttribute(\'typename\');'],[-1,'                    }'],[-1,'                }'],[0,'                var layerDescription = {'],[-1,'                    layerName: layerName, owsType: owsType, '],[-1,'                    owsURL: owsURL, typeName: typeName'],[-1,'                };'],[0,'                describelayer.layerDescriptions.push(layerDescription);'],[-1,'                '],[-1,'                \/\/TODO do this in deprecated.js instead:'],[-1,'                \/\/ array style index for backwards compatibility'],[0,'                describelayer.length = describelayer.layerDescriptions.length;'],[0,'                describelayer[describelayer.length - 1] = layerDescription; '],[-1,'                '],[0,'            } else if (nodeName == \'ServiceException\') {'],[-1,'                \/\/ an exception must have occurred, so parse it'],[0,'                var parser = new OpenLayers.Format.OGCExceptionReport();'],[0,'                return {'],[-1,'                    error: parser.read(data)'],[-1,'                };'],[-1,'            }'],[-1,'        }'],[0,'        return describelayer;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMSDescribeLayer.v1_1_1\&quot;'],[-1,''],[-1,'});'],[-1,''],[-1,'\/\/ Version alias - workaround for http:\/\/trac.osgeo.org\/mapserver\/ticket\/2257'],[1,'OpenLayers.Format.WMSDescribeLayer.v1_1_0 ='],[-1,'    OpenLayers.Format.WMSDescribeLayer.v1_1_1;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Popup.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Popup'],[-1,' * A popup is a small div that can opened and closed on the map.'],[-1,' * Typically opened in response to clicking on a marker.  '],[-1,' * See &lt;OpenLayers.Marker&gt;.  Popup\'s don\'t require their own'],[-1,' * layer and are added the the map using the &lt;OpenLayers.Map.addPopup&gt;'],[-1,' * method.'],[-1,' *'],[-1,' * Example:'],[-1,' * (code)'],[-1,' * popup = new OpenLayers.Popup(\&quot;chicken\&quot;, '],[-1,' *                    new OpenLayers.LonLat(5,40),'],[-1,' *                    new OpenLayers.Size(200,200),'],[-1,' *                    \&quot;example popup\&quot;,'],[-1,' *                    true);'],[-1,' *       '],[-1,' * map.addPopup(popup);'],[-1,' * (end)'],[-1,' *\/'],[1,'OpenLayers.Popup = OpenLayers.Class({'],[-1,''],[-1,'    \/** '],[-1,'     * Property: events  '],[-1,'     * {&lt;OpenLayers.Events&gt;} custom event manager '],[-1,'     *\/'],[-1,'    events: null,'],[-1,'    '],[-1,'    \/** Property: id'],[-1,'     * {String} the unique identifier assigned to this popup.'],[-1,'     *\/'],[-1,'    id: \&quot;\&quot;,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: lonlat '],[-1,'     * {&lt;OpenLayers.LonLat&gt;} the position of this popup on the map'],[-1,'     *\/'],[-1,'    lonlat: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: div '],[-1,'     * {DOMElement} the div that contains this popup.'],[-1,'     *\/'],[-1,'    div: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: contentSize '],[-1,'     * {&lt;OpenLayers.Size&gt;} the width and height of the content.'],[-1,'     *\/'],[-1,'    contentSize: null,    '],[-1,''],[-1,'    \/** '],[-1,'     * Property: size '],[-1,'     * {&lt;OpenLayers.Size&gt;} the width and height of the popup.'],[-1,'     *\/'],[-1,'    size: null,    '],[-1,''],[-1,'    \/** '],[-1,'     * Property: contentHTML '],[-1,'     * {String} An HTML string for this popup to display.'],[-1,'     *\/'],[-1,'    contentHTML: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: backgroundColor '],[-1,'     * {String} the background color used by the popup.'],[-1,'     *\/'],[-1,'    backgroundColor: \&quot;\&quot;,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: opacity '],[-1,'     * {float} the opacity of this popup (between 0.0 and 1.0)'],[-1,'     *\/'],[-1,'    opacity: \&quot;\&quot;,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: border '],[-1,'     * {String} the border size of the popup.  (eg 2px)'],[-1,'     *\/'],[-1,'    border: \&quot;\&quot;,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: contentDiv '],[-1,'     * {DOMElement} a reference to the element that holds the content of'],[-1,'     *              the div.'],[-1,'     *\/'],[-1,'    contentDiv: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: groupDiv '],[-1,'     * {DOMElement} First and only child of \'div\'. The group Div contains the'],[-1,'     *     \'contentDiv\' and the \'closeDiv\'.'],[-1,'     *\/'],[-1,'    groupDiv: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: closeDiv'],[-1,'     * {DOMElement} the optional closer image'],[-1,'     *\/'],[-1,'    closeDiv: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: autoSize'],[-1,'     * {Boolean} Resize the popup to auto-fit the contents.'],[-1,'     *     Default is false.'],[-1,'     *\/'],[-1,'    autoSize: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: minSize'],[-1,'     * {&lt;OpenLayers.Size&gt;} Minimum size allowed for the popup\'s contents.'],[-1,'     *\/'],[-1,'    minSize: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxSize'],[-1,'     * {&lt;OpenLayers.Size&gt;} Maximum size allowed for the popup\'s contents.'],[-1,'     *\/'],[-1,'    maxSize: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: displayClass'],[-1,'     * {String} The CSS class of the popup.'],[-1,'     *\/'],[-1,'    displayClass: \&quot;olPopup\&quot;,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: contentDisplayClass'],[-1,'     * {String} The CSS class of the popup content div.'],[-1,'     *\/'],[-1,'    contentDisplayClass: \&quot;olPopupContent\&quot;,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: padding '],[-1,'     * {int or &lt;OpenLayers.Bounds&gt;} An extra opportunity to specify internal '],[-1,'     *     padding of the content div inside the popup. This was originally'],[-1,'     *     confused with the css padding as specified in style.css\'s '],[-1,'     *     \'olPopupContent\' class. We would like to get rid of this altogether,'],[-1,'     *     except that it does come in handy for the framed and anchoredbubble'],[-1,'     *     popups, who need to maintain yet another barrier between their '],[-1,'     *     content and the outer border of the popup itself. '],[-1,'     * '],[-1,'     *     Note that in order to not break API, we must continue to support '],[-1,'     *     this property being set as an integer. Really, though, we\'d like to '],[-1,'     *     have this specified as a Bounds object so that user can specify'],[-1,'     *     distinct left, top, right, bottom paddings. With the 3.0 release'],[-1,'     *     we can make this only a bounds.'],[-1,'     *\/'],[-1,'    padding: 0,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: disableFirefoxOverflowHack'],[-1,'     * {Boolean} The hack for overflow in Firefox causes all elements '],[-1,'     *     to be re-drawn, which causes Flash elements to be '],[-1,'     *     re-initialized, which is troublesome.'],[-1,'     *     With this property the hack can be disabled.'],[-1,'     *\/'],[-1,'    disableFirefoxOverflowHack: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Method: fixPadding'],[-1,'     * To be removed in 3.0, this function merely helps us to deal with the '],[-1,'     *     case where the user may have set an integer value for padding, '],[-1,'     *     instead of an &lt;OpenLayers.Bounds&gt; object.'],[-1,'     *\/'],[-1,'    fixPadding: function() {'],[0,'        if (typeof this.padding == \&quot;number\&quot;) {'],[0,'            this.padding = new OpenLayers.Bounds('],[-1,'                this.padding, this.padding, this.padding, this.padding'],[-1,'            );'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: panMapIfOutOfView'],[-1,'     * {Boolean} When drawn, pan map such that the entire popup is visible in'],[-1,'     *     the current viewport (if necessary).'],[-1,'     *     Default is false.'],[-1,'     *\/'],[-1,'    panMapIfOutOfView: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: keepInMap '],[-1,'     * {Boolean} If panMapIfOutOfView is false, and this property is true, '],[-1,'     *     contrain the popup such that it always fits in the available map'],[-1,'     *     space. By default, this is not set on the base class. If you are'],[-1,'     *     creating popups that are near map edges and not allowing pannning,'],[-1,'     *     and especially if you have a popup which has a'],[-1,'     *     fixedRelativePosition, setting this to false may be a smart thing to'],[-1,'     *     do. Subclasses may want to override this setting.'],[-1,'     *   '],[-1,'     *     Default is false.'],[-1,'     *\/'],[-1,'    keepInMap: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: closeOnMove'],[-1,'     * {Boolean} When map pans, close the popup.'],[-1,'     *     Default is false.'],[-1,'     *\/'],[-1,'    closeOnMove: false,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: map '],[-1,'     * {&lt;OpenLayers.Map&gt;} this gets set in Map.js when the popup is added to the map'],[-1,'     *\/'],[-1,'    map: null,'],[-1,''],[-1,'    \/** '],[-1,'    * Constructor: OpenLayers.Popup'],[-1,'    * Create a popup.'],[-1,'    * '],[-1,'    * Parameters: '],[-1,'    * id - {String} a unqiue identifier for this popup.  If null is passed'],[-1,'    *               an identifier will be automatically generated. '],[-1,'    * lonlat - {&lt;OpenLayers.LonLat&gt;}  The position on the map the popup will'],[-1,'    *                                 be shown.'],[-1,'    * contentSize - {&lt;OpenLayers.Size&gt;} The size of the content.'],[-1,'    * contentHTML - {String}          An HTML string to display inside the   '],[-1,'    *                                 popup.'],[-1,'    * closeBox - {Boolean}            Whether to display a close box inside'],[-1,'    *                                 the popup.'],[-1,'    * closeBoxCallback - {Function}   Function to be called on closeBox click.'],[-1,'    *\/'],[-1,'    initialize:function(id, lonlat, contentSize, contentHTML, closeBox, closeBoxCallback) {'],[0,'        if (id == null) {'],[0,'            id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \&quot;_\&quot;);'],[-1,'        }'],[-1,''],[0,'        this.id = id;'],[0,'        this.lonlat = lonlat;'],[-1,''],[0,'        this.contentSize = (contentSize != null) ? contentSize '],[-1,'                                  : new OpenLayers.Size('],[-1,'                                                   OpenLayers.Popup.WIDTH,'],[-1,'                                                   OpenLayers.Popup.HEIGHT);'],[0,'        if (contentHTML != null) { '],[0,'             this.contentHTML = contentHTML;'],[-1,'        }'],[0,'        this.backgroundColor = OpenLayers.Popup.COLOR;'],[0,'        this.opacity = OpenLayers.Popup.OPACITY;'],[0,'        this.border = OpenLayers.Popup.BORDER;'],[-1,''],[0,'        this.div = OpenLayers.Util.createDiv(this.id, null, null, '],[-1,'                                             null, null, null, \&quot;hidden\&quot;);'],[0,'        this.div.className = this.displayClass;'],[-1,'        '],[0,'        var groupDivId = this.id + \&quot;_GroupDiv\&quot;;'],[0,'        this.groupDiv = OpenLayers.Util.createDiv(groupDivId, null, null, '],[-1,'                                                    null, \&quot;relative\&quot;, null,'],[-1,'                                                    \&quot;hidden\&quot;);'],[-1,''],[0,'        var id = this.div.id + \&quot;_contentDiv\&quot;;'],[0,'        this.contentDiv = OpenLayers.Util.createDiv(id, null, this.contentSize.clone(), '],[-1,'                                                    null, \&quot;relative\&quot;);'],[0,'        this.contentDiv.className = this.contentDisplayClass;'],[0,'        this.groupDiv.appendChild(this.contentDiv);'],[0,'        this.div.appendChild(this.groupDiv);'],[-1,''],[0,'        if (closeBox) {'],[0,'            this.addCloseBox(closeBoxCallback);'],[-1,'        } '],[-1,''],[0,'        this.registerEvents();'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: destroy'],[-1,'     * nullify references to prevent circular references and memory leaks'],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,''],[0,'        this.id = null;'],[0,'        this.lonlat = null;'],[0,'        this.size = null;'],[0,'        this.contentHTML = null;'],[-1,'        '],[0,'        this.backgroundColor = null;'],[0,'        this.opacity = null;'],[0,'        this.border = null;'],[-1,'        '],[0,'        if (this.closeOnMove &amp;&amp; this.map) {'],[0,'            this.map.events.unregister(\&quot;movestart\&quot;, this, this.hide);'],[-1,'        }'],[-1,''],[0,'        this.events.destroy();'],[0,'        this.events = null;'],[-1,'        '],[0,'        if (this.closeDiv) {'],[0,'            OpenLayers.Event.stopObservingElement(this.closeDiv); '],[0,'            this.groupDiv.removeChild(this.closeDiv);'],[-1,'        }'],[0,'        this.closeDiv = null;'],[-1,'        '],[0,'        this.div.removeChild(this.groupDiv);'],[0,'        this.groupDiv = null;'],[-1,''],[0,'        if (this.map != null) {'],[0,'            this.map.removePopup(this);'],[-1,'        }'],[0,'        this.map = null;'],[0,'        this.div = null;'],[-1,'        '],[0,'        this.autoSize = null;'],[0,'        this.minSize = null;'],[0,'        this.maxSize = null;'],[0,'        this.padding = null;'],[0,'        this.panMapIfOutOfView = null;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'    * Method: draw'],[-1,'    * Constructs the elements that make up the popup.'],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * px - {&lt;OpenLayers.Pixel&gt;} the position the popup in pixels.'],[-1,'    * '],[-1,'    * Returns:'],[-1,'    * {DOMElement} Reference to a div that contains the drawn popup'],[-1,'    *\/'],[-1,'    draw: function(px) {'],[0,'        if (px == null) {'],[0,'            if ((this.lonlat != null) &amp;&amp; (this.map != null)) {'],[0,'                px = this.map.getLayerPxFromLonLat(this.lonlat);'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ this assumes that this.map already exists, which is okay because '],[-1,'        \/\/ this.draw is only called once the popup has been added to the map.'],[0,'        if (this.closeOnMove) {'],[0,'            this.map.events.register(\&quot;movestart\&quot;, this, this.hide);'],[-1,'        }'],[-1,'        '],[-1,'        \/\/listen to movestart, moveend to disable overflow (FF bug)'],[0,'        if (!this.disableFirefoxOverflowHack &amp;&amp; OpenLayers.BROWSER_NAME == \'firefox\') {'],[0,'            this.map.events.register(\&quot;movestart\&quot;, this, function() {'],[0,'                var style = document.defaultView.getComputedStyle('],[-1,'                    this.contentDiv, null'],[-1,'                );'],[0,'                var currentOverflow = style.getPropertyValue(\&quot;overflow\&quot;);'],[0,'                if (currentOverflow != \&quot;hidden\&quot;) {'],[0,'                    this.contentDiv._oldOverflow = currentOverflow;'],[0,'                    this.contentDiv.style.overflow = \&quot;hidden\&quot;;'],[-1,'                }'],[-1,'            });'],[0,'            this.map.events.register(\&quot;moveend\&quot;, this, function() {'],[0,'                var oldOverflow = this.contentDiv._oldOverflow;'],[0,'                if (oldOverflow) {'],[0,'                    this.contentDiv.style.overflow = oldOverflow;'],[0,'                    this.contentDiv._oldOverflow = null;'],[-1,'                }'],[-1,'            });'],[-1,'        }'],[-1,''],[0,'        this.moveTo(px);'],[0,'        if (!this.autoSize &amp;&amp; !this.size) {'],[0,'            this.setSize(this.contentSize);'],[-1,'        }'],[0,'        this.setBackgroundColor();'],[0,'        this.setOpacity();'],[0,'        this.setBorder();'],[0,'        this.setContentHTML();'],[-1,'        '],[0,'        if (this.panMapIfOutOfView) {'],[0,'            this.panIntoView();'],[-1,'        }    '],[-1,''],[0,'        return this.div;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: updatePosition'],[-1,'     * if the popup has a lonlat and its map members set, '],[-1,'     * then have it move itself to its proper position'],[-1,'     *\/'],[-1,'    updatePosition: function() {'],[0,'        if ((this.lonlat) &amp;&amp; (this.map)) {'],[0,'            var px = this.map.getLayerPxFromLonLat(this.lonlat);'],[0,'            if (px) {'],[0,'                this.moveTo(px);           '],[-1,'            }    '],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;} the top and left position of the popup div. '],[-1,'     *\/'],[-1,'    moveTo: function(px) {'],[0,'        if ((px != null) &amp;&amp; (this.div != null)) {'],[0,'            this.div.style.left = px.x + \&quot;px\&quot;;'],[0,'            this.div.style.top = px.y + \&quot;px\&quot;;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: visible'],[-1,'     *'],[-1,'     * Returns:      '],[-1,'     * {Boolean} Boolean indicating whether or not the popup is visible'],[-1,'     *\/'],[-1,'    visible: function() {'],[0,'        return OpenLayers.Element.visible(this.div);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: toggle'],[-1,'     * Toggles visibility of the popup.'],[-1,'     *\/'],[-1,'    toggle: function() {'],[0,'        if (this.visible()) {'],[0,'            this.hide();'],[-1,'        } else {'],[0,'            this.show();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: show'],[-1,'     * Makes the popup visible.'],[-1,'     *\/'],[-1,'    show: function() {'],[0,'        this.div.style.display = \'\';'],[-1,''],[0,'        if (this.panMapIfOutOfView) {'],[0,'            this.panIntoView();'],[-1,'        }    '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: hide'],[-1,'     * Makes the popup invisible.'],[-1,'     *\/'],[-1,'    hide: function() {'],[0,'        this.div.style.display = \'none\';'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setSize'],[-1,'     * Used to adjust the size of the popup. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * contentSize - {&lt;OpenLayers.Size&gt;} the new size for the popup\'s '],[-1,'     *     contents div (in pixels).'],[-1,'     *\/'],[-1,'    setSize:function(contentSize) { '],[0,'        this.size = contentSize.clone(); '],[-1,'        '],[-1,'        \/\/ if our contentDiv has a css \'padding\' set on it by a stylesheet, we '],[-1,'        \/\/  must add that to the desired \&quot;size\&quot;. '],[0,'        var contentDivPadding = this.getContentDivPadding();'],[0,'        var wPadding = contentDivPadding.left + contentDivPadding.right;'],[0,'        var hPadding = contentDivPadding.top + contentDivPadding.bottom;'],[-1,''],[-1,'        \/\/ take into account the popup\'s \'padding\' property'],[0,'        this.fixPadding();'],[0,'        wPadding += this.padding.left + this.padding.right;'],[0,'        hPadding += this.padding.top + this.padding.bottom;'],[-1,''],[-1,'        \/\/ make extra space for the close div'],[0,'        if (this.closeDiv) {'],[0,'            var closeDivWidth = parseInt(this.closeDiv.style.width);'],[0,'            wPadding += closeDivWidth + contentDivPadding.right;'],[-1,'        }'],[-1,''],[-1,'        \/\/increase size of the main popup div to take into account the '],[-1,'        \/\/ users\'s desired padding and close div.        '],[0,'        this.size.w += wPadding;'],[0,'        this.size.h += hPadding;'],[-1,''],[-1,'        \/\/now if our browser is IE, we need to actually make the contents '],[-1,'        \/\/ div itself bigger to take its own padding into effect. this makes '],[-1,'        \/\/ me want to shoot someone, but so it goes.'],[0,'        if (OpenLayers.BROWSER_NAME == \&quot;msie\&quot;) {'],[0,'            this.contentSize.w += '],[-1,'                contentDivPadding.left + contentDivPadding.right;'],[0,'            this.contentSize.h += '],[-1,'                contentDivPadding.bottom + contentDivPadding.top;'],[-1,'        }'],[-1,''],[0,'        if (this.div != null) {'],[0,'            this.div.style.width = this.size.w + \&quot;px\&quot;;'],[0,'            this.div.style.height = this.size.h + \&quot;px\&quot;;'],[-1,'        }'],[0,'        if (this.contentDiv != null){'],[0,'            this.contentDiv.style.width = contentSize.w + \&quot;px\&quot;;'],[0,'            this.contentDiv.style.height = contentSize.h + \&quot;px\&quot;;'],[-1,'        }'],[-1,'    },  '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: updateSize'],[-1,'     * Auto size the popup so that it precisely fits its contents (as '],[-1,'     *     determined by this.contentDiv.innerHTML). Popup size will, of'],[-1,'     *     course, be limited by the available space on the current map'],[-1,'     *\/'],[-1,'    updateSize: function() {'],[-1,'        '],[-1,'        \/\/ determine actual render dimensions of the contents by putting its'],[-1,'        \/\/ contents into a fake contentDiv (for the CSS) and then measuring it'],[0,'        var preparedHTML = \&quot;&lt;div class=\'\&quot; + this.contentDisplayClass+ \&quot;\'&gt;\&quot; + '],[-1,'            this.contentDiv.innerHTML + '],[-1,'            \&quot;&lt;\/div&gt;\&quot;;'],[-1,' '],[0,'        var containerElement = (this.map) ? this.map.div : document.body;'],[0,'        var realSize = OpenLayers.Util.getRenderedDimensions('],[-1,'            preparedHTML, null, {'],[-1,'                displayClass: this.displayClass,'],[-1,'                containerElement: containerElement'],[-1,'            }'],[-1,'        );'],[-1,''],[-1,'        \/\/ is the \&quot;real\&quot; size of the div is safe to display in our map?'],[0,'        var safeSize = this.getSafeContentSize(realSize);'],[-1,''],[0,'        var newSize = null;'],[0,'        if (safeSize.equals(realSize)) {'],[-1,'            \/\/real size of content is small enough to fit on the map, '],[-1,'            \/\/ so we use real size.'],[0,'            newSize = realSize;'],[-1,''],[-1,'        } else {'],[-1,''],[-1,'            \/\/ make a new \'size\' object with the clipped dimensions '],[-1,'            \/\/ set or null if not clipped.'],[0,'            var fixedSize = {'],[-1,'                w: (safeSize.w &lt; realSize.w) ? safeSize.w : null,'],[-1,'                h: (safeSize.h &lt; realSize.h) ? safeSize.h : null'],[-1,'            };'],[-1,'        '],[0,'            if (fixedSize.w &amp;&amp; fixedSize.h) {'],[-1,'                \/\/content is too big in both directions, so we will use '],[-1,'                \/\/ max popup size (safeSize), knowing well that it will '],[-1,'                \/\/ overflow both ways.                '],[0,'                newSize = safeSize;'],[-1,'            } else {'],[-1,'                \/\/content is clipped in only one direction, so we need to '],[-1,'                \/\/ run getRenderedDimensions() again with a fixed dimension'],[0,'                var clippedSize = OpenLayers.Util.getRenderedDimensions('],[-1,'                    preparedHTML, fixedSize, {'],[-1,'                        displayClass: this.contentDisplayClass,'],[-1,'                        containerElement: containerElement'],[-1,'                    }'],[-1,'                );'],[-1,'                '],[-1,'                \/\/if the clipped size is still the same as the safeSize, '],[-1,'                \/\/ that means that our content must be fixed in the '],[-1,'                \/\/ offending direction. If overflow is \'auto\', this means '],[-1,'                \/\/ we are going to have a scrollbar for sure, so we must '],[-1,'                \/\/ adjust for that.'],[-1,'                \/\/'],[0,'                var currentOverflow = OpenLayers.Element.getStyle('],[-1,'                    this.contentDiv, \&quot;overflow\&quot;'],[-1,'                );'],[0,'                if ( (currentOverflow != \&quot;hidden\&quot;) &amp;&amp; '],[-1,'                     (clippedSize.equals(safeSize)) ) {'],[0,'                    var scrollBar = OpenLayers.Util.getScrollbarWidth();'],[0,'                    if (fixedSize.w) {'],[0,'                        clippedSize.h += scrollBar;'],[-1,'                    } else {'],[0,'                        clippedSize.w += scrollBar;'],[-1,'                    }'],[-1,'                }'],[-1,'                '],[0,'                newSize = this.getSafeContentSize(clippedSize);'],[-1,'            }'],[-1,'        }                        '],[0,'        this.setSize(newSize);     '],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'     * Method: setBackgroundColor'],[-1,'     * Sets the background color of the popup.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * color - {String} the background color.  eg \&quot;#FFBBBB\&quot;'],[-1,'     *\/'],[-1,'    setBackgroundColor:function(color) { '],[0,'        if (color != undefined) {'],[0,'            this.backgroundColor = color; '],[-1,'        }'],[-1,'        '],[0,'        if (this.div != null) {'],[0,'            this.div.style.backgroundColor = this.backgroundColor;'],[-1,'        }'],[-1,'    },  '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setOpacity'],[-1,'     * Sets the opacity of the popup.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * opacity - {float} A value between 0.0 (transparent) and 1.0 (solid).   '],[-1,'     *\/'],[-1,'    setOpacity:function(opacity) { '],[0,'        if (opacity != undefined) {'],[0,'            this.opacity = opacity; '],[-1,'        }'],[-1,'        '],[0,'        if (this.div != null) {'],[-1,'            \/\/ for Mozilla and Safari'],[0,'            this.div.style.opacity = this.opacity;'],[-1,''],[-1,'            \/\/ for IE'],[0,'            this.div.style.filter = \'alpha(opacity=\' + this.opacity*100 + \')\';'],[-1,'        }'],[-1,'    },  '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setBorder'],[-1,'     * Sets the border style of the popup.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * border - {String} The border style value. eg 2px '],[-1,'     *\/'],[-1,'    setBorder:function(border) { '],[0,'        if (border != undefined) {'],[0,'            this.border = border;'],[-1,'        }'],[-1,'        '],[0,'        if (this.div != null) {'],[0,'            this.div.style.border = this.border;'],[-1,'        }'],[-1,'    },      '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setContentHTML'],[-1,'     * Allows the user to set the HTML content of the popup.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * contentHTML - {String} HTML for the div.'],[-1,'     *\/'],[-1,'    setContentHTML:function(contentHTML) {'],[-1,''],[0,'        if (contentHTML != null) {'],[0,'            this.contentHTML = contentHTML;'],[-1,'        }'],[-1,'       '],[0,'        if ((this.contentDiv != null) &amp;&amp; '],[-1,'            (this.contentHTML != null) &amp;&amp;'],[-1,'            (this.contentHTML != this.contentDiv.innerHTML)) {'],[-1,'       '],[0,'            this.contentDiv.innerHTML = this.contentHTML;'],[-1,'       '],[0,'            if (this.autoSize) {'],[-1,'                '],[-1,'                \/\/if popup has images, listen for when they finish'],[-1,'                \/\/ loading and resize accordingly'],[0,'                this.registerImageListeners();'],[-1,''],[-1,'                \/\/auto size the popup to its current contents'],[0,'                this.updateSize();'],[-1,'            }'],[-1,'        }    '],[-1,''],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: registerImageListeners'],[-1,'     * Called when an image contained by the popup loaded. this function'],[-1,'     *     updates the popup size, then unregisters the image load listener.'],[-1,'     *\/   '],[-1,'    registerImageListeners: function() { '],[-1,''],[-1,'        \/\/ As the images load, this function will call updateSize() to '],[-1,'        \/\/ resize the popup to fit the content div (which presumably is now'],[-1,'        \/\/ bigger than when the image was not loaded).'],[-1,'        \/\/ '],[-1,'        \/\/ If the \'panMapIfOutOfView\' property is set, we will pan the newly'],[-1,'        \/\/ resized popup back into view.'],[-1,'        \/\/ '],[-1,'        \/\/ Note that this function, when called, will have \'popup\' and '],[-1,'        \/\/ \'img\' properties in the context.'],[-1,'        \/\/'],[0,'        var onImgLoad = function() {'],[0,'            if (this.popup.id === null) { \/\/ this.popup has been destroyed!'],[0,'                return;'],[-1,'            }'],[0,'            this.popup.updateSize();'],[-1,'     '],[0,'            if ( this.popup.visible() &amp;&amp; this.popup.panMapIfOutOfView ) {'],[0,'                this.popup.panIntoView();'],[-1,'            }'],[-1,''],[0,'            OpenLayers.Event.stopObserving('],[-1,'                this.img, \&quot;load\&quot;, this.img._onImgLoad'],[-1,'            );'],[-1,'    '],[-1,'        };'],[-1,''],[-1,'        \/\/cycle through the images and if their size is 0x0, that means that '],[-1,'        \/\/ they haven\'t been loaded yet, so we attach the listener, which '],[-1,'        \/\/ will fire when the images finish loading and will resize the '],[-1,'        \/\/ popup accordingly to its new size.'],[0,'        var images = this.contentDiv.getElementsByTagName(\&quot;img\&quot;);'],[0,'        for (var i = 0, len = images.length; i &lt; len; i++) {'],[0,'            var img = images[i];'],[0,'            if (img.width == 0 || img.height == 0) {'],[-1,''],[0,'                var context = {'],[-1,'                    \'popup\': this,'],[-1,'                    \'img\': img'],[-1,'                };'],[-1,''],[-1,'                \/\/expando this function to the image itself before registering'],[-1,'                \/\/ it. This way we can easily and properly unregister it.'],[0,'                img._onImgLoad = OpenLayers.Function.bind(onImgLoad, context);'],[-1,''],[0,'                OpenLayers.Event.observe(img, \'load\', img._onImgLoad);'],[-1,'            }    '],[-1,'        } '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getSafeContentSize'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * size - {&lt;OpenLayers.Size&gt;} Desired size to make the popup.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Size&gt;} A size to make the popup which is neither smaller'],[-1,'     *     than the specified minimum size, nor bigger than the maximum '],[-1,'     *     size (which is calculated relative to the size of the viewport).'],[-1,'     *\/'],[-1,'    getSafeContentSize: function(size) {'],[-1,''],[0,'        var safeContentSize = size.clone();'],[-1,''],[-1,'        \/\/ if our contentDiv has a css \'padding\' set on it by a stylesheet, we '],[-1,'        \/\/  must add that to the desired \&quot;size\&quot;. '],[0,'        var contentDivPadding = this.getContentDivPadding();'],[0,'        var wPadding = contentDivPadding.left + contentDivPadding.right;'],[0,'        var hPadding = contentDivPadding.top + contentDivPadding.bottom;'],[-1,''],[-1,'        \/\/ take into account the popup\'s \'padding\' property'],[0,'        this.fixPadding();'],[0,'        wPadding += this.padding.left + this.padding.right;'],[0,'        hPadding += this.padding.top + this.padding.bottom;'],[-1,''],[0,'        if (this.closeDiv) {'],[0,'            var closeDivWidth = parseInt(this.closeDiv.style.width);'],[0,'            wPadding += closeDivWidth + contentDivPadding.right;'],[-1,'        }'],[-1,''],[-1,'        \/\/ prevent the popup from being smaller than a specified minimal size'],[0,'        if (this.minSize) {'],[0,'            safeContentSize.w = Math.max(safeContentSize.w, '],[-1,'                (this.minSize.w - wPadding));'],[0,'            safeContentSize.h = Math.max(safeContentSize.h, '],[-1,'                (this.minSize.h - hPadding));'],[-1,'        }'],[-1,''],[-1,'        \/\/ prevent the popup from being bigger than a specified maximum size'],[0,'        if (this.maxSize) {'],[0,'            safeContentSize.w = Math.min(safeContentSize.w, '],[-1,'                (this.maxSize.w - wPadding));'],[0,'            safeContentSize.h = Math.min(safeContentSize.h, '],[-1,'                (this.maxSize.h - hPadding));'],[-1,'        }'],[-1,'        '],[-1,'        \/\/make sure the desired size to set doesn\'t result in a popup that '],[-1,'        \/\/ is bigger than the map\'s viewport.'],[-1,'        \/\/'],[0,'        if (this.map &amp;&amp; this.map.size) {'],[-1,'            '],[0,'            var extraX = 0, extraY = 0;'],[0,'            if (this.keepInMap &amp;&amp; !this.panMapIfOutOfView) {'],[0,'                var px = this.map.getPixelFromLonLat(this.lonlat);'],[0,'                switch (this.relativePosition) {'],[-1,'                    case \&quot;tr\&quot;:'],[0,'                        extraX = px.x;'],[0,'                        extraY = this.map.size.h - px.y;'],[0,'                        break;'],[-1,'                    case \&quot;tl\&quot;:'],[0,'                        extraX = this.map.size.w - px.x;'],[0,'                        extraY = this.map.size.h - px.y;'],[0,'                        break;'],[-1,'                    case \&quot;bl\&quot;:'],[0,'                        extraX = this.map.size.w - px.x;'],[0,'                        extraY = px.y;'],[0,'                        break;'],[-1,'                    case \&quot;br\&quot;:'],[0,'                        extraX = px.x;'],[0,'                        extraY = px.y;'],[0,'                        break;'],[-1,'                    default:    '],[0,'                        extraX = px.x;'],[0,'                        extraY = this.map.size.h - px.y;'],[0,'                        break;'],[-1,'                }'],[-1,'            }    '],[-1,'          '],[0,'            var maxY = this.map.size.h - '],[-1,'                this.map.paddingForPopups.top - '],[-1,'                this.map.paddingForPopups.bottom - '],[-1,'                hPadding - extraY;'],[-1,'            '],[0,'            var maxX = this.map.size.w - '],[-1,'                this.map.paddingForPopups.left - '],[-1,'                this.map.paddingForPopups.right - '],[-1,'                wPadding - extraX;'],[-1,'            '],[0,'            safeContentSize.w = Math.min(safeContentSize.w, maxX);'],[0,'            safeContentSize.h = Math.min(safeContentSize.h, maxY);'],[-1,'        }'],[-1,'        '],[0,'        return safeContentSize;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getContentDivPadding'],[-1,'     * Glorious, oh glorious hack in order to determine the css \'padding\' of '],[-1,'     *     the contentDiv. IE\/Opera return null here unless we actually add the '],[-1,'     *     popup\'s main \'div\' element (which contains contentDiv) to the DOM. '],[-1,'     *     So we make it invisible and then add it to the document temporarily. '],[-1,'     *'],[-1,'     *     Once we\'ve taken the padding readings we need, we then remove it '],[-1,'     *     from the DOM (it will actually get added to the DOM in '],[-1,'     *     Map.js\'s addPopup)'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    getContentDivPadding: function() {'],[-1,''],[-1,'        \/\/use cached value if we have it'],[0,'        var contentDivPadding = this._contentDivPadding;'],[0,'        if (!contentDivPadding) {'],[-1,''],[0,'            if (this.div.parentNode == null) {'],[-1,'                \/\/make the div invisible and add it to the page        '],[0,'                this.div.style.display = \&quot;none\&quot;;'],[0,'                document.body.appendChild(this.div);'],[-1,'            }'],[-1,'                    '],[-1,'            \/\/read the padding settings from css, put them in an OL.Bounds        '],[0,'            contentDivPadding = new OpenLayers.Bounds('],[-1,'                OpenLayers.Element.getStyle(this.contentDiv, \&quot;padding-left\&quot;),'],[-1,'                OpenLayers.Element.getStyle(this.contentDiv, \&quot;padding-bottom\&quot;),'],[-1,'                OpenLayers.Element.getStyle(this.contentDiv, \&quot;padding-right\&quot;),'],[-1,'                OpenLayers.Element.getStyle(this.contentDiv, \&quot;padding-top\&quot;)'],[-1,'            );'],[-1,'    '],[-1,'            \/\/cache the value'],[0,'            this._contentDivPadding = contentDivPadding;'],[-1,''],[0,'            if (this.div.parentNode == document.body) {'],[-1,'                \/\/remove the div from the page and make it visible again'],[0,'                document.body.removeChild(this.div);'],[0,'                this.div.style.display = \&quot;\&quot;;'],[-1,'            }'],[-1,'        }'],[0,'        return contentDivPadding;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: addCloseBox'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * callback - {Function} The callback to be called when the close button'],[-1,'     *     is clicked.'],[-1,'     *\/'],[-1,'    addCloseBox: function(callback) {'],[-1,''],[0,'        this.closeDiv = OpenLayers.Util.createDiv('],[-1,'            this.id + \&quot;_close\&quot;, null, {w: 17, h: 17}'],[-1,'        );'],[0,'        this.closeDiv.className = \&quot;olPopupCloseBox\&quot;; '],[-1,'        '],[-1,'        \/\/ use the content div\'s css padding to determine if we should'],[-1,'        \/\/  padd the close div'],[0,'        var contentDivPadding = this.getContentDivPadding();'],[-1,'         '],[0,'        this.closeDiv.style.right = contentDivPadding.right + \&quot;px\&quot;;'],[0,'        this.closeDiv.style.top = contentDivPadding.top + \&quot;px\&quot;;'],[0,'        this.groupDiv.appendChild(this.closeDiv);'],[-1,''],[0,'        var closePopup = callback || function(e) {'],[0,'            this.hide();'],[0,'            OpenLayers.Event.stop(e);'],[-1,'        };'],[0,'        OpenLayers.Event.observe(this.closeDiv, \&quot;touchend\&quot;, '],[-1,'                OpenLayers.Function.bindAsEventListener(closePopup, this));'],[0,'        OpenLayers.Event.observe(this.closeDiv, \&quot;click\&quot;, '],[-1,'                OpenLayers.Function.bindAsEventListener(closePopup, this));'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: panIntoView'],[-1,'     * Pans the map such that the popup is totaly viewable (if necessary)'],[-1,'     *\/'],[-1,'    panIntoView: function() {'],[-1,'        '],[0,'        var mapSize = this.map.getSize();'],[-1,'    '],[-1,'        \/\/start with the top left corner of the popup, in px, '],[-1,'        \/\/ relative to the viewport'],[0,'        var origTL = this.map.getViewPortPxFromLayerPx( new OpenLayers.Pixel('],[-1,'            parseInt(this.div.style.left),'],[-1,'            parseInt(this.div.style.top)'],[-1,'        ));'],[0,'        var newTL = origTL.clone();'],[-1,'    '],[-1,'        \/\/new left (compare to margins, using this.size to calculate right)'],[0,'        if (origTL.x &lt; this.map.paddingForPopups.left) {'],[0,'            newTL.x = this.map.paddingForPopups.left;'],[-1,'        } else '],[0,'        if ( (origTL.x + this.size.w) &gt; (mapSize.w - this.map.paddingForPopups.right)) {'],[0,'            newTL.x = mapSize.w - this.map.paddingForPopups.right - this.size.w;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/new top (compare to margins, using this.size to calculate bottom)'],[0,'        if (origTL.y &lt; this.map.paddingForPopups.top) {'],[0,'            newTL.y = this.map.paddingForPopups.top;'],[-1,'        } else '],[0,'        if ( (origTL.y + this.size.h) &gt; (mapSize.h - this.map.paddingForPopups.bottom)) {'],[0,'            newTL.y = mapSize.h - this.map.paddingForPopups.bottom - this.size.h;'],[-1,'        }'],[-1,'        '],[0,'        var dx = origTL.x - newTL.x;'],[0,'        var dy = origTL.y - newTL.y;'],[-1,'        '],[0,'        this.map.pan(dx, dy);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: registerEvents'],[-1,'     * Registers events on the popup.'],[-1,'     *'],[-1,'     * Do this in a separate function so that subclasses can '],[-1,'     *   choose to override it if they wish to deal differently'],[-1,'     *   with mouse events'],[-1,'     * '],[-1,'     *   Note in the following handler functions that some special'],[-1,'     *    care is needed to deal correctly with mousing and popups. '],[-1,'     *   '],[-1,'     *   Because the user might select the zoom-rectangle option and'],[-1,'     *    then drag it over a popup, we need a safe way to allow the'],[-1,'     *    mousemove and mouseup events to pass through the popup when'],[-1,'     *    they are initiated from outside. The same procedure is needed for'],[-1,'     *    touchmove and touchend events.'],[-1,'     * '],[-1,'     *   Otherwise, we want to essentially kill the event propagation'],[-1,'     *    for all other events, though we have to do so carefully, '],[-1,'     *    without disabling basic html functionality, like clicking on '],[-1,'     *    hyperlinks or drag-selecting text.'],[-1,'     *\/'],[-1,'     registerEvents:function() {'],[0,'        this.events = new OpenLayers.Events(this, this.div, null, true);'],[-1,''],[0,'        function onTouchstart(evt) {'],[0,'            OpenLayers.Event.stop(evt, true);'],[-1,'        }'],[0,'        this.events.on({'],[-1,'            \&quot;mousedown\&quot;: this.onmousedown,'],[-1,'            \&quot;mousemove\&quot;: this.onmousemove,'],[-1,'            \&quot;mouseup\&quot;: this.onmouseup,'],[-1,'            \&quot;click\&quot;: this.onclick,'],[-1,'            \&quot;mouseout\&quot;: this.onmouseout,'],[-1,'            \&quot;dblclick\&quot;: this.ondblclick,'],[-1,'            \&quot;touchstart\&quot;: onTouchstart,'],[-1,'            scope: this'],[-1,'        });'],[-1,'        '],[-1,'     },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: onmousedown '],[-1,'     * When mouse goes down within the popup, make a note of'],[-1,'     *   it locally, and then do not propagate the mousedown '],[-1,'     *   (but do so safely so that user can select text inside)'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    onmousedown: function (evt) {'],[0,'        this.mousedown = true;'],[0,'        OpenLayers.Event.stop(evt, true);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: onmousemove'],[-1,'     * If the drag was started within the popup, then '],[-1,'     *   do not propagate the mousemove (but do so safely'],[-1,'     *   so that user can select text inside)'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    onmousemove: function (evt) {'],[0,'        if (this.mousedown) {'],[0,'            OpenLayers.Event.stop(evt, true);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: onmouseup'],[-1,'     * When mouse comes up within the popup, after going down '],[-1,'     *   in it, reset the flag, and then (once again) do not '],[-1,'     *   propagate the event, but do so safely so that user can '],[-1,'     *   select text inside'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    onmouseup: function (evt) {'],[0,'        if (this.mousedown) {'],[0,'            this.mousedown = false;'],[0,'            OpenLayers.Event.stop(evt, true);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: onclick'],[-1,'     * Ignore clicks, but allowing default browser handling'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    onclick: function (evt) {'],[0,'        OpenLayers.Event.stop(evt, true);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: onmouseout'],[-1,'     * When mouse goes out of the popup set the flag to false so that'],[-1,'     *   if they let go and then drag back in, we won\'t be confused.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    onmouseout: function (evt) {'],[0,'        this.mousedown = false;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: ondblclick'],[-1,'     * Ignore double-clicks, but allowing default browser handling'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    ondblclick: function (evt) {'],[0,'        OpenLayers.Event.stop(evt, true);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Popup\&quot;'],[-1,'});'],[-1,''],[1,'OpenLayers.Popup.WIDTH = 200;'],[1,'OpenLayers.Popup.HEIGHT = 200;'],[1,'OpenLayers.Popup.COLOR = \&quot;white\&quot;;'],[1,'OpenLayers.Popup.OPACITY = 1;'],[1,'OpenLayers.Popup.BORDER = \&quot;0px\&quot;;'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/ScaleLine.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.ScaleLine'],[-1,' * The ScaleLine displays a small line indicator representing the current '],[-1,' * map scale on the map. By default it is drawn in the lower left corner of'],[-1,' * the map.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *  '],[-1,' * Is a very close copy of:'],[-1,' *  - &lt;OpenLayers.Control.Scale&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.ScaleLine = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: maxWidth'],[-1,'     * {Integer} Maximum width of the scale line in pixels.  Default is 100.'],[-1,'     *\/'],[-1,'    maxWidth: 100,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: topOutUnits'],[-1,'     * {String} Units for zoomed out on top bar.  Default is km.'],[-1,'     *\/'],[-1,'    topOutUnits: \&quot;km\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: topInUnits'],[-1,'     * {String} Units for zoomed in on top bar.  Default is m.'],[-1,'     *\/'],[-1,'    topInUnits: \&quot;m\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: bottomOutUnits'],[-1,'     * {String} Units for zoomed out on bottom bar.  Default is mi.'],[-1,'     *\/'],[-1,'    bottomOutUnits: \&quot;mi\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: bottomInUnits'],[-1,'     * {String} Units for zoomed in on bottom bar.  Default is ft.'],[-1,'     *\/'],[-1,'    bottomInUnits: \&quot;ft\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: eTop'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    eTop: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: eBottom'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    eBottom:null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: geodesic'],[-1,'     * {Boolean} Use geodesic measurement. Default is false. The recommended'],[-1,'     * setting for maps in EPSG:4326 is false, and true EPSG:900913. If set to'],[-1,'     * true, the scale will be calculated based on the horizontal size of the'],[-1,'     * pixel in the center of the map viewport.'],[-1,'     *\/'],[-1,'    geodesic: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.ScaleLine'],[-1,'     * Create a new scale line control.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be used'],[-1,'     *     to extend the control.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        OpenLayers.Control.prototype.draw.apply(this, arguments);'],[0,'        if (!this.eTop) {'],[-1,'            \/\/ stick in the top bar'],[0,'            this.eTop = document.createElement(\&quot;div\&quot;);'],[0,'            this.eTop.className = this.displayClass + \&quot;Top\&quot;;'],[0,'            var theLen = this.topInUnits.length;'],[0,'            this.div.appendChild(this.eTop);'],[0,'            if((this.topOutUnits == \&quot;\&quot;) || (this.topInUnits == \&quot;\&quot;)) {'],[0,'                this.eTop.style.visibility = \&quot;hidden\&quot;;'],[-1,'            } else {'],[0,'                this.eTop.style.visibility = \&quot;visible\&quot;;'],[-1,'            }'],[-1,''],[-1,'            \/\/ and the bottom bar'],[0,'            this.eBottom = document.createElement(\&quot;div\&quot;);'],[0,'            this.eBottom.className = this.displayClass + \&quot;Bottom\&quot;;'],[0,'            this.div.appendChild(this.eBottom);'],[0,'            if((this.bottomOutUnits == \&quot;\&quot;) || (this.bottomInUnits == \&quot;\&quot;)) {'],[0,'                this.eBottom.style.visibility = \&quot;hidden\&quot;;'],[-1,'            } else {'],[0,'                this.eBottom.style.visibility = \&quot;visible\&quot;;'],[-1,'            }'],[-1,'        }'],[0,'        this.map.events.register(\'moveend\', this, this.update);'],[0,'        this.update();'],[0,'        return this.div;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: getBarLen'],[-1,'     * Given a number, round it down to the nearest 1,2,5 times a power of 10.'],[-1,'     * That seems a fairly useful set of number groups to use.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * maxLen - {float}  the number we\'re rounding down from'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Float} the rounded number (less than or equal to maxLen)'],[-1,'     *\/'],[-1,'    getBarLen: function(maxLen) {'],[-1,'        \/\/ nearest power of 10 lower than maxLen'],[0,'        var digits = parseInt(Math.log(maxLen) \/ Math.log(10));'],[0,'        var pow10 = Math.pow(10, digits);'],[-1,'        '],[-1,'        \/\/ ok, find first character'],[0,'        var firstChar = parseInt(maxLen \/ pow10);'],[-1,''],[-1,'        \/\/ right, put it into the correct bracket'],[0,'        var barLen;'],[0,'        if(firstChar &gt; 5) {'],[0,'            barLen = 5;'],[0,'        } else if(firstChar &gt; 2) {'],[0,'            barLen = 2;'],[-1,'        } else {'],[0,'            barLen = 1;'],[-1,'        }'],[-1,''],[-1,'        \/\/ scale it up the correct power of 10'],[0,'        return barLen * pow10;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: update'],[-1,'     * Update the size of the bars, and the labels they contain.'],[-1,'     *\/'],[-1,'    update: function() {'],[0,'        var res = this.map.getResolution();'],[0,'        if (!res) {'],[0,'            return;'],[-1,'        }'],[-1,''],[0,'        var curMapUnits = this.map.getUnits();'],[0,'        var inches = OpenLayers.INCHES_PER_UNIT;'],[-1,''],[-1,'        \/\/ convert maxWidth to map units'],[0,'        var maxSizeData = this.maxWidth * res * inches[curMapUnits];'],[0,'        var geodesicRatio = 1;'],[0,'        if(this.geodesic === true) {'],[0,'            var maxSizeGeodesic = (this.map.getGeodesicPixelSize().w ||'],[-1,'                0.000001) * this.maxWidth;'],[0,'            var maxSizeKilometers = maxSizeData \/ inches[\&quot;km\&quot;];'],[0,'            geodesicRatio = maxSizeGeodesic \/ maxSizeKilometers;'],[0,'            maxSizeData *= geodesicRatio;'],[-1,'        }'],[-1,''],[-1,'        \/\/ decide whether to use large or small scale units     '],[0,'        var topUnits;'],[0,'        var bottomUnits;'],[0,'        if(maxSizeData &gt; 100000) {'],[0,'            topUnits = this.topOutUnits;'],[0,'            bottomUnits = this.bottomOutUnits;'],[-1,'        } else {'],[0,'            topUnits = this.topInUnits;'],[0,'            bottomUnits = this.bottomInUnits;'],[-1,'        }'],[-1,''],[-1,'        \/\/ and to map units units'],[0,'        var topMax = maxSizeData \/ inches[topUnits];'],[0,'        var bottomMax = maxSizeData \/ inches[bottomUnits];'],[-1,''],[-1,'        \/\/ now trim this down to useful block length'],[0,'        var topRounded = this.getBarLen(topMax);'],[0,'        var bottomRounded = this.getBarLen(bottomMax);'],[-1,''],[-1,'        \/\/ and back to display units'],[0,'        topMax = topRounded \/ inches[curMapUnits] * inches[topUnits];'],[0,'        bottomMax = bottomRounded \/ inches[curMapUnits] * inches[bottomUnits];'],[-1,''],[-1,'        \/\/ and to pixel units'],[0,'        var topPx = topMax \/ res \/ geodesicRatio;'],[0,'        var bottomPx = bottomMax \/ res \/ geodesicRatio;'],[-1,'        '],[-1,'        \/\/ now set the pixel widths'],[-1,'        \/\/ and the values inside them'],[-1,'        '],[0,'        if (this.eBottom.style.visibility == \&quot;visible\&quot;){'],[0,'            this.eBottom.style.width = Math.round(bottomPx) + \&quot;px\&quot;; '],[0,'            this.eBottom.innerHTML = bottomRounded + \&quot; \&quot; + bottomUnits ;'],[-1,'        }'],[-1,'            '],[0,'        if (this.eTop.style.visibility == \&quot;visible\&quot;){'],[0,'            this.eTop.style.width = Math.round(topPx) + \&quot;px\&quot;;'],[0,'            this.eTop.innerHTML = topRounded + \&quot; \&quot; + topUnits;'],[-1,'        }'],[-1,'        '],[-1,'    }, '],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.ScaleLine\&quot;'],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Icon.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Icon'],[-1,' * '],[-1,' * The icon represents a graphical icon on the screen.  Typically used in'],[-1,' * conjunction with a &lt;OpenLayers.Marker&gt; to represent markers on a screen.'],[-1,' *'],[-1,' * An icon has a url, size and position.  It also contains an offset which '],[-1,' * allows the center point to be represented correctly.  This can be'],[-1,' * provided either as a fixed offset or a function provided to calculate'],[-1,' * the desired offset. '],[-1,' * '],[-1,' *\/'],[1,'OpenLayers.Icon = OpenLayers.Class({'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: url '],[-1,'     * {String}  image url'],[-1,'     *\/'],[-1,'    url: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: size '],[-1,'     * {&lt;OpenLayers.Size&gt;|Object} An OpenLayers.Size or'],[-1,'     * an object with a \'w\' and \'h\' properties.'],[-1,'     *\/'],[-1,'    size: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: offset '],[-1,'     * {&lt;OpenLayers.Pixel&gt;|Object} distance in pixels to offset the'],[-1,'     * image when being rendered. An OpenLayers.Pixel or an object'],[-1,'     * with a \'x\' and \'y\' properties.'],[-1,'     *\/'],[-1,'    offset: null,    '],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: calculateOffset '],[-1,'     * {Function} Function to calculate the offset (based on the size)'],[-1,'     *\/'],[-1,'    calculateOffset: null,    '],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: imageDiv '],[-1,'     * {DOMElement} '],[-1,'     *\/'],[-1,'    imageDiv: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: px '],[-1,'     * {&lt;OpenLayers.Pixel&gt;|Object} An OpenLayers.Pixel or an object'],[-1,'     * with a \'x\' and \'y\' properties.'],[-1,'     *\/'],[-1,'    px: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Icon'],[-1,'     * Creates an icon, which is an image tag in a div.  '],[-1,'     *'],[-1,'     * url - {String} '],[-1,'     * size - {&lt;OpenLayers.Size&gt;|Object} An OpenLayers.Size or an'],[-1,'     *                                   object with a \'w\' and \'h\''],[-1,'     *                                   properties.'],[-1,'     * offset - {&lt;OpenLayers.Pixel&gt;|Object} An OpenLayers.Pixel or an'],[-1,'     *                                      object with a \'x\' and \'y\''],[-1,'     *                                      properties.'],[-1,'     * calculateOffset - {Function} '],[-1,'     *\/'],[-1,'    initialize: function(url, size, offset, calculateOffset) {'],[0,'        this.url = url;'],[0,'        this.size = size || {w: 20, h: 20};'],[0,'        this.offset = offset || {x: -(this.size.w\/2), y: -(this.size.h\/2)};'],[0,'        this.calculateOffset = calculateOffset;'],[-1,''],[0,'        var id = OpenLayers.Util.createUniqueID(\&quot;OL_Icon_\&quot;);'],[0,'        this.imageDiv = OpenLayers.Util.createAlphaImageDiv(id);'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: destroy'],[-1,'     * Nullify references and remove event listeners to prevent circular '],[-1,'     * references and memory leaks'],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,'        \/\/ erase any drawn elements'],[0,'        this.erase();'],[-1,''],[0,'        OpenLayers.Event.stopObservingElement(this.imageDiv.firstChild); '],[0,'        this.imageDiv.innerHTML = \&quot;\&quot;;'],[0,'        this.imageDiv = null;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: clone'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Icon&gt;} A fresh copy of the icon.'],[-1,'     *\/'],[-1,'    clone: function() {'],[0,'        return new OpenLayers.Icon(this.url, '],[-1,'                                   this.size, '],[-1,'                                   this.offset, '],[-1,'                                   this.calculateOffset);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setSize'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * size - {&lt;OpenLayers.Size&gt;|Object} An OpenLayers.Size or'],[-1,'     * an object with a \'w\' and \'h\' properties.'],[-1,'     *\/'],[-1,'    setSize: function(size) {'],[0,'        if (size != null) {'],[0,'            this.size = size;'],[-1,'        }'],[0,'        this.draw();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setUrl'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * url - {String} '],[-1,'     *\/'],[-1,'    setUrl: function(url) {'],[0,'        if (url != null) {'],[0,'            this.url = url;'],[-1,'        }'],[0,'        this.draw();'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: draw'],[-1,'     * Move the div to the given pixel.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;|Object} An OpenLayers.Pixel or an'],[-1,'     *                                  object with a \'x\' and \'y\' properties.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} A new DOM Image of this icon set at the location passed-in'],[-1,'     *\/'],[-1,'    draw: function(px) {'],[0,'        OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, '],[-1,'                                            null, '],[-1,'                                            null, '],[-1,'                                            this.size, '],[-1,'                                            this.url, '],[-1,'                                            \&quot;absolute\&quot;);'],[0,'        this.moveTo(px);'],[0,'        return this.imageDiv;'],[-1,'    }, '],[-1,''],[-1,'    \/** '],[-1,'     * Method: erase'],[-1,'     * Erase the underlying image element.'],[-1,'     *\/'],[-1,'    erase: function() {'],[0,'        if (this.imageDiv != null &amp;&amp; this.imageDiv.parentNode != null) {'],[0,'            OpenLayers.Element.remove(this.imageDiv);'],[-1,'        }'],[-1,'    }, '],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: setOpacity'],[-1,'     * Change the icon\'s opacity'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * opacity - {float} '],[-1,'     *\/'],[-1,'    setOpacity: function(opacity) {'],[0,'        OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, null, null, '],[-1,'                                            null, null, null, null, opacity);'],[-1,''],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     * move icon to passed in px.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;|Object} the pixel position to move to.'],[-1,'     * An OpenLayers.Pixel or an object with a \'x\' and \'y\' properties.'],[-1,'     *\/'],[-1,'    moveTo: function (px) {'],[-1,'        \/\/if no px passed in, use stored location'],[0,'        if (px != null) {'],[0,'            this.px = px;'],[-1,'        }'],[-1,''],[0,'        if (this.imageDiv != null) {'],[0,'            if (this.px == null) {'],[0,'                this.display(false);'],[-1,'            } else {'],[0,'                if (this.calculateOffset) {'],[0,'                    this.offset = this.calculateOffset(this.size);  '],[-1,'                }'],[0,'                OpenLayers.Util.modifyAlphaImageDiv(this.imageDiv, null, {'],[-1,'                    x: this.px.x + this.offset.x,'],[-1,'                    y: this.px.y + this.offset.y'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: display'],[-1,'     * Hide or show the icon'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * display - {Boolean} '],[-1,'     *\/'],[-1,'    display: function(display) {'],[0,'        this.imageDiv.style.display = (display) ? \&quot;\&quot; : \&quot;none\&quot;; '],[-1,'    },'],[-1,'    '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: isDrawn'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the icon is drawn.'],[-1,'     *\/'],[-1,'    isDrawn: function() {'],[-1,'        \/\/ nodeType 11 for ie, whose nodes *always* have a parentNode'],[-1,'        \/\/ (of type document fragment)'],[0,'        var isDrawn = (this.imageDiv &amp;&amp; this.imageDiv.parentNode &amp;&amp; '],[-1,'                       (this.imageDiv.parentNode.nodeType != 11));    '],[-1,''],[0,'        return isDrawn;   '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Icon\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Marker.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Events.js'],[-1,' * @requires OpenLayers\/Icon.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Marker'],[-1,' * Instances of OpenLayers.Marker are a combination of a '],[-1,' * &lt;OpenLayers.LonLat&gt; and an &lt;OpenLayers.Icon&gt;.  '],[-1,' *'],[-1,' * Markers are generally added to a special layer called'],[-1,' * &lt;OpenLayers.Layer.Markers&gt;.'],[-1,' *'],[-1,' * Example:'],[-1,' * (code)'],[-1,' * var markers = new OpenLayers.Layer.Markers( \&quot;Markers\&quot; );'],[-1,' * map.addLayer(markers);'],[-1,' *'],[-1,' * var size = new OpenLayers.Size(21,25);'],[-1,' * var offset = new OpenLayers.Pixel(-(size.w\/2), -size.h);'],[-1,' * var icon = new OpenLayers.Icon(\'http:\/\/www.openlayers.org\/dev\/img\/marker.png\', size, offset);'],[-1,' * markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(0,0),icon));'],[-1,' * markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(0,0),icon.clone()));'],[-1,' *'],[-1,' * (end)'],[-1,' *'],[-1,' * Note that if you pass an icon into the Marker constructor, it will take'],[-1,' * that icon and use it. This means that you should not share icons between'],[-1,' * markers -- you use them once, but you should clone() for any additional'],[-1,' * markers using that same icon.'],[-1,' *\/'],[1,'OpenLayers.Marker = OpenLayers.Class({'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: icon '],[-1,'     * {&lt;OpenLayers.Icon&gt;} The icon used by this marker.'],[-1,'     *\/'],[-1,'    icon: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: lonlat '],[-1,'     * {&lt;OpenLayers.LonLat&gt;} location of object'],[-1,'     *\/'],[-1,'    lonlat: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: events '],[-1,'     * {&lt;OpenLayers.Events&gt;} the event handler.'],[-1,'     *\/'],[-1,'    events: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: map '],[-1,'     * {&lt;OpenLayers.Map&gt;} the map this marker is attached to'],[-1,'     *\/'],[-1,'    map: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Marker'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;} the position of this marker'],[-1,'     * icon - {&lt;OpenLayers.Icon&gt;}  the icon for this marker'],[-1,'     *\/'],[-1,'    initialize: function(lonlat, icon) {'],[0,'        this.lonlat = lonlat;'],[-1,'        '],[0,'        var newIcon = (icon) ? icon : OpenLayers.Marker.defaultIcon();'],[0,'        if (this.icon == null) {'],[0,'            this.icon = newIcon;'],[-1,'        } else {'],[0,'            this.icon.url = newIcon.url;'],[0,'            this.icon.size = newIcon.size;'],[0,'            this.icon.offset = newIcon.offset;'],[0,'            this.icon.calculateOffset = newIcon.calculateOffset;'],[-1,'        }'],[0,'        this.events = new OpenLayers.Events(this, this.icon.imageDiv);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Destroy the marker. You must first remove the marker from any '],[-1,'     * layer which it has been added to, or you will get buggy behavior.'],[-1,'     * (This can not be done within the marker since the marker does not'],[-1,'     * know which layer it is attached to.)'],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,'        \/\/ erase any drawn features'],[0,'        this.erase();'],[-1,''],[0,'        this.map = null;'],[-1,''],[0,'        this.events.destroy();'],[0,'        this.events = null;'],[-1,''],[0,'        if (this.icon != null) {'],[0,'            this.icon.destroy();'],[0,'            this.icon = null;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'    * Method: draw'],[-1,'    * Calls draw on the icon, and returns that output.'],[-1,'    * '],[-1,'    * Parameters:'],[-1,'    * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'    * '],[-1,'    * Returns:'],[-1,'    * {DOMElement} A new DOM Image with this marker\'s icon set at the '],[-1,'    * location passed-in'],[-1,'    *\/'],[-1,'    draw: function(px) {'],[0,'        return this.icon.draw(px);'],[-1,'    }, '],[-1,''],[-1,'    \/** '],[-1,'    * Method: erase'],[-1,'    * Erases any drawn elements for this marker.'],[-1,'    *\/'],[-1,'    erase: function() {'],[0,'        if (this.icon != null) {'],[0,'            this.icon.erase();'],[-1,'        }'],[-1,'    }, '],[-1,''],[-1,'    \/**'],[-1,'    * Method: moveTo'],[-1,'    * Move the marker to the new location.'],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * px - {&lt;OpenLayers.Pixel&gt;|Object} the pixel position to move to.'],[-1,'    * An OpenLayers.Pixel or an object with a \'x\' and \'y\' properties.'],[-1,'    *\/'],[-1,'    moveTo: function (px) {'],[0,'        if ((px != null) &amp;&amp; (this.icon != null)) {'],[0,'            this.icon.moveTo(px);'],[-1,'        }           '],[0,'        this.lonlat = this.map.getLonLatFromLayerPx(px);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: isDrawn'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the marker is drawn.'],[-1,'     *\/'],[-1,'    isDrawn: function() {'],[0,'        var isDrawn = (this.icon &amp;&amp; this.icon.isDrawn());'],[0,'        return isDrawn;   '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: onScreen'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the marker is currently visible on screen.'],[-1,'     *\/'],[-1,'    onScreen:function() {'],[-1,'        '],[0,'        var onScreen = false;'],[0,'        if (this.map) {'],[0,'            var screenBounds = this.map.getExtent();'],[0,'            onScreen = screenBounds.containsLonLat(this.lonlat);'],[-1,'        }    '],[0,'        return onScreen;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: inflate'],[-1,'     * Englarges the markers icon by the specified ratio.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * inflate - {float} the ratio to enlarge the marker by (passing 2'],[-1,'     *                   will double the size).'],[-1,'     *\/'],[-1,'    inflate: function(inflate) {'],[0,'        if (this.icon) {'],[0,'            this.icon.setSize({'],[-1,'                w: this.icon.size.w * inflate,'],[-1,'                h: this.icon.size.h * inflate'],[-1,'            });'],[-1,'        }        '],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: setOpacity'],[-1,'     * Change the opacity of the marker by changin the opacity of '],[-1,'     *   its icon'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * opacity - {float}  Specified as fraction (0.4, etc)'],[-1,'     *\/'],[-1,'    setOpacity: function(opacity) {'],[0,'        this.icon.setOpacity(opacity);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setUrl'],[-1,'     * Change URL of the Icon Image.'],[-1,'     * '],[-1,'     * url - {String} '],[-1,'     *\/'],[-1,'    setUrl: function(url) {'],[0,'        this.icon.setUrl(url);'],[-1,'    },    '],[-1,''],[-1,'    \/** '],[-1,'     * Method: display'],[-1,'     * Hide or show the icon'],[-1,'     * '],[-1,'     * display - {Boolean} '],[-1,'     *\/'],[-1,'    display: function(display) {'],[0,'        this.icon.display(display);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Marker\&quot;'],[-1,'});'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * Function: defaultIcon'],[-1,' * Creates a default &lt;OpenLayers.Icon&gt;.'],[-1,' * '],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.Icon&gt;} A default OpenLayers.Icon to use for a marker'],[-1,' *\/'],[1,'OpenLayers.Marker.defaultIcon = function() {'],[0,'    return new OpenLayers.Icon(OpenLayers.Util.getImageLocation(\&quot;marker.png\&quot;),'],[-1,'                               {w: 21, h: 25}, {x: -10.5, y: -25});'],[-1,'};'],[-1,'    '],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/JSON.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * Note:'],[-1,' * This work draws heavily from the public domain JSON serializer\/deserializer'],[-1,' *     at http:\/\/www.json.org\/json.js. Rewritten so that it doesn\'t modify'],[-1,' *     basic data prototypes.'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.JSON'],[-1,' * A parser to read\/write JSON safely.  Create a new instance with the'],[-1,' *     &lt;OpenLayers.Format.JSON&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.JSON = OpenLayers.Class(OpenLayers.Format, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: indent'],[-1,'     * {String} For \&quot;pretty\&quot; printing, the indent string will be used once for'],[-1,'     *     each indentation level.'],[-1,'     *\/'],[-1,'    indent: \&quot;    \&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: space'],[-1,'     * {String} For \&quot;pretty\&quot; printing, the space string will be used after'],[-1,'     *     the \&quot;:\&quot; separating a name\/value pair.'],[-1,'     *\/'],[-1,'    space: \&quot; \&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: newline'],[-1,'     * {String} For \&quot;pretty\&quot; printing, the newline string will be used at the'],[-1,'     *     end of each name\/value pair or array item.'],[-1,'     *\/'],[-1,'    newline: \&quot;\\n\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: level'],[-1,'     * {Integer} For \&quot;pretty\&quot; printing, this is incremented\/decremented during'],[-1,'     *     serialization.'],[-1,'     *\/'],[-1,'    level: 0,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: pretty'],[-1,'     * {Boolean} Serialize with extra whitespace for structure.  This is set'],[-1,'     *     by the &lt;write&gt; method.'],[-1,'     *\/'],[-1,'    pretty: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: nativeJSON'],[-1,'     * {Boolean} Does the browser support native json?'],[-1,'     *\/'],[-1,'    nativeJSON: (function() {'],[1,'        return !!(window.JSON &amp;&amp; typeof JSON.parse == \&quot;function\&quot; &amp;&amp; typeof JSON.stringify == \&quot;function\&quot;);'],[-1,'    })(),'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.JSON'],[-1,'     * Create a new parser for JSON.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Deserialize a json string.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * json - {String} A JSON string'],[-1,'     * filter - {Function} A function which will be called for every key and'],[-1,'     *     value at every level of the final result. Each value will be'],[-1,'     *     replaced by the result of the filter function. This can be used to'],[-1,'     *     reform generic objects into instances of classes, or to transform'],[-1,'     *     date strings into Date objects.'],[-1,'     *     '],[-1,'     * Returns:'],[-1,'     * {Object} An object, array, string, or number .'],[-1,'     *\/'],[-1,'    read: function(json, filter) {'],[0,'        var object;'],[0,'        if (this.nativeJSON) {'],[0,'            object = JSON.parse(json, filter);'],[0,'        } else try {'],[-1,'            \/**'],[-1,'             * Parsing happens in three stages. In the first stage, we run the'],[-1,'             *     text against a regular expression which looks for non-JSON'],[-1,'             *     characters. We are especially concerned with \'()\' and \'new\''],[-1,'             *     because they can cause invocation, and \'=\' because it can'],[-1,'             *     cause mutation. But just to be safe, we will reject all'],[-1,'             *     unexpected characters.'],[-1,'             *\/'],[0,'            if (\/^[\\],:{}\\s]*$\/.test(json.replace(\/\\\\[\&quot;\\\\\\\/bfnrtu]\/g, \'@\').'],[-1,'                                replace(\/\&quot;[^\&quot;\\\\\\n\\r]*\&quot;|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?\/g, \']\').'],[-1,'                                replace(\/(?:^|:|,)(?:\\s*\\[)+\/g, \'\'))) {'],[-1,''],[-1,'                \/**'],[-1,'                 * In the second stage we use the eval function to compile the'],[-1,'                 *     text into a JavaScript structure. The \'{\' operator is'],[-1,'                 *     subject to a syntactic ambiguity in JavaScript - it can'],[-1,'                 *     begin a block or an object literal. We wrap the text in'],[-1,'                 *     parens to eliminate the ambiguity.'],[-1,'                 *\/'],[0,'                object = eval(\'(\' + json + \')\');'],[-1,''],[-1,'                \/**'],[-1,'                 * In the optional third stage, we recursively walk the new'],[-1,'                 *     structure, passing each name\/value pair to a filter'],[-1,'                 *     function for possible transformation.'],[-1,'                 *\/'],[0,'                if(typeof filter === \'function\') {'],[0,'                    function walk(k, v) {'],[0,'                        if(v &amp;&amp; typeof v === \'object\') {'],[0,'                            for(var i in v) {'],[0,'                                if(v.hasOwnProperty(i)) {'],[0,'                                    v[i] = walk(i, v[i]);'],[-1,'                                }'],[-1,'                            }'],[-1,'                        }'],[0,'                        return filter(k, v);'],[-1,'                    }'],[0,'                    object = walk(\'\', object);'],[-1,'                }'],[-1,'            }'],[-1,'        } catch(e) {'],[-1,'            \/\/ Fall through if the regexp test fails.'],[-1,'        }'],[-1,''],[0,'        if(this.keepData) {'],[0,'            this.data = object;'],[-1,'        }'],[-1,''],[0,'        return object;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Serialize an object into a JSON string.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * value - {String} The object, array, string, number, boolean or date'],[-1,'     *     to be serialized.'],[-1,'     * pretty - {Boolean} Structure the output with newlines and indentation.'],[-1,'     *     Default is false.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The JSON string representation of the input value.'],[-1,'     *\/'],[-1,'    write: function(value, pretty) {'],[0,'        this.pretty = !!pretty;'],[0,'        var json = null;'],[0,'        var type = typeof value;'],[0,'        if(this.serialize[type]) {'],[0,'            try {'],[0,'                json = (!this.pretty &amp;&amp; this.nativeJSON) ?'],[-1,'                    JSON.stringify(value) :'],[-1,'                    this.serialize[type].apply(this, [value]);'],[-1,'            } catch(err) {'],[0,'                OpenLayers.Console.error(\&quot;Trouble serializing: \&quot; + err);'],[-1,'            }'],[-1,'        }'],[0,'        return json;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: writeIndent'],[-1,'     * Output an indentation string depending on the indentation level.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} An appropriate indentation string.'],[-1,'     *\/'],[-1,'    writeIndent: function() {'],[0,'        var pieces = [];'],[0,'        if(this.pretty) {'],[0,'            for(var i=0; i&lt;this.level; ++i) {'],[0,'                pieces.push(this.indent);'],[-1,'            }'],[-1,'        }'],[0,'        return pieces.join(\'\');'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: writeNewline'],[-1,'     * Output a string representing a newline if in pretty printing mode.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string representing a new line.'],[-1,'     *\/'],[-1,'    writeNewline: function() {'],[0,'        return (this.pretty) ? this.newline : \'\';'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: writeSpace'],[-1,'     * Output a string representing a space if in pretty printing mode.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A space.'],[-1,'     *\/'],[-1,'    writeSpace: function() {'],[0,'        return (this.pretty) ? this.space : \'\';'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: serialize'],[-1,'     * Object with properties corresponding to the serializable data types.'],[-1,'     *     Property values are functions that do the actual serializing.'],[-1,'     *\/'],[-1,'    serialize: {'],[-1,'        \/**'],[-1,'         * Method: serialize.object'],[-1,'         * Transform an object into a JSON string.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * object - {Object} The object to be serialized.'],[-1,'         * '],[-1,'         * Returns:'],[-1,'         * {String} A JSON string representing the object.'],[-1,'         *\/'],[-1,'        \'object\': function(object) {'],[-1,'            \/\/ three special objects that we want to treat differently'],[0,'            if(object == null) {'],[0,'                return \&quot;null\&quot;;'],[-1,'            }'],[0,'            if(object.constructor == Date) {'],[0,'                return this.serialize.date.apply(this, [object]);'],[-1,'            }'],[0,'            if(object.constructor == Array) {'],[0,'                return this.serialize.array.apply(this, [object]);'],[-1,'            }'],[0,'            var pieces = [\'{\'];'],[0,'            this.level += 1;'],[0,'            var key, keyJSON, valueJSON;'],[-1,'            '],[0,'            var addComma = false;'],[0,'            for(key in object) {'],[0,'                if(object.hasOwnProperty(key)) {'],[-1,'                    \/\/ recursive calls need to allow for sub-classing'],[0,'                    keyJSON = OpenLayers.Format.JSON.prototype.write.apply(this,'],[-1,'                                                    [key, this.pretty]);'],[0,'                    valueJSON = OpenLayers.Format.JSON.prototype.write.apply(this,'],[-1,'                                                    [object[key], this.pretty]);'],[0,'                    if(keyJSON != null &amp;&amp; valueJSON != null) {'],[0,'                        if(addComma) {'],[0,'                            pieces.push(\',\');'],[-1,'                        }'],[0,'                        pieces.push(this.writeNewline(), this.writeIndent(),'],[-1,'                                    keyJSON, \':\', this.writeSpace(), valueJSON);'],[0,'                        addComma = true;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'            '],[0,'            this.level -= 1;'],[0,'            pieces.push(this.writeNewline(), this.writeIndent(), \'}\');'],[0,'            return pieces.join(\'\');'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: serialize.array'],[-1,'         * Transform an array into a JSON string.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * array - {Array} The array to be serialized'],[-1,'         * '],[-1,'         * Returns:'],[-1,'         * {String} A JSON string representing the array.'],[-1,'         *\/'],[-1,'        \'array\': function(array) {'],[0,'            var json;'],[0,'            var pieces = [\'[\'];'],[0,'            this.level += 1;'],[-1,'    '],[0,'            for(var i=0, len=array.length; i&lt;len; ++i) {'],[-1,'                \/\/ recursive calls need to allow for sub-classing'],[0,'                json = OpenLayers.Format.JSON.prototype.write.apply(this,'],[-1,'                                                    [array[i], this.pretty]);'],[0,'                if(json != null) {'],[0,'                    if(i &gt; 0) {'],[0,'                        pieces.push(\',\');'],[-1,'                    }'],[0,'                    pieces.push(this.writeNewline(), this.writeIndent(), json);'],[-1,'                }'],[-1,'            }'],[-1,''],[0,'            this.level -= 1;    '],[0,'            pieces.push(this.writeNewline(), this.writeIndent(), \']\');'],[0,'            return pieces.join(\'\');'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: serialize.string'],[-1,'         * Transform a string into a JSON string.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * string - {String} The string to be serialized'],[-1,'         * '],[-1,'         * Returns:'],[-1,'         * {String} A JSON string representing the string.'],[-1,'         *\/'],[-1,'        \'string\': function(string) {'],[-1,'            \/\/ If the string contains no control characters, no quote characters, and no'],[-1,'            \/\/ backslash characters, then we can simply slap some quotes around it.'],[-1,'            \/\/ Otherwise we must also replace the offending characters with safe'],[-1,'            \/\/ sequences.    '],[0,'            var m = {'],[-1,'                \'\\b\': \'\\\\b\','],[-1,'                \'\\t\': \'\\\\t\','],[-1,'                \'\\n\': \'\\\\n\','],[-1,'                \'\\f\': \'\\\\f\','],[-1,'                \'\\r\': \'\\\\r\','],[-1,'                \'\&quot;\' : \'\\\\\&quot;\','],[-1,'                \'\\\\\': \'\\\\\\\\\''],[-1,'            };'],[0,'            if(\/[\&quot;\\\\\\x00-\\x1f]\/.test(string)) {'],[0,'                return \'\&quot;\' + string.replace(\/([\\x00-\\x1f\\\\\&quot;])\/g, function(a, b) {'],[0,'                    var c = m[b];'],[0,'                    if(c) {'],[0,'                        return c;'],[-1,'                    }'],[0,'                    c = b.charCodeAt();'],[0,'                    return \'\\\\u00\' +'],[-1,'                        Math.floor(c \/ 16).toString(16) +'],[-1,'                        (c % 16).toString(16);'],[-1,'                }) + \'\&quot;\';'],[-1,'            }'],[0,'            return \'\&quot;\' + string + \'\&quot;\';'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Method: serialize.number'],[-1,'         * Transform a number into a JSON string.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * number - {Number} The number to be serialized.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {String} A JSON string representing the number.'],[-1,'         *\/'],[-1,'        \'number\': function(number) {'],[0,'            return isFinite(number) ? String(number) : \&quot;null\&quot;;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: serialize.boolean'],[-1,'         * Transform a boolean into a JSON string.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * bool - {Boolean} The boolean to be serialized.'],[-1,'         * '],[-1,'         * Returns:'],[-1,'         * {String} A JSON string representing the boolean.'],[-1,'         *\/'],[-1,'        \'boolean\': function(bool) {'],[0,'            return String(bool);'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: serialize.object'],[-1,'         * Transform a date into a JSON string.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * date - {Date} The date to be serialized.'],[-1,'         * '],[-1,'         * Returns:'],[-1,'         * {String} A JSON string representing the date.'],[-1,'         *\/'],[-1,'        \'date\': function(date) {    '],[0,'            function format(number) {'],[-1,'                \/\/ Format integers to have at least two digits.'],[0,'                return (number &lt; 10) ? \'0\' + number : number;'],[-1,'            }'],[0,'            return \'\&quot;\' + date.getFullYear() + \'-\' +'],[-1,'                    format(date.getMonth() + 1) + \'-\' +'],[-1,'                    format(date.getDate()) + \'T\' +'],[-1,'                    format(date.getHours()) + \':\' +'],[-1,'                    format(date.getMinutes()) + \':\' +'],[-1,'                    format(date.getSeconds()) + \'\&quot;\';'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.JSON\&quot; '],[-1,''],[-1,'});     '],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/GeoJSON.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/JSON.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' * @requires OpenLayers\/Geometry\/MultiPoint.js'],[-1,' * @requires OpenLayers\/Geometry\/LineString.js'],[-1,' * @requires OpenLayers\/Geometry\/MultiLineString.js'],[-1,' * @requires OpenLayers\/Geometry\/Polygon.js'],[-1,' * @requires OpenLayers\/Geometry\/MultiPolygon.js'],[-1,' * @requires OpenLayers\/Console.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.GeoJSON'],[-1,' * Read and write GeoJSON. Create a new parser with the'],[-1,' *     &lt;OpenLayers.Format.GeoJSON&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.JSON&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.GeoJSON = OpenLayers.Class(OpenLayers.Format.JSON, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: ignoreExtraDims'],[-1,'     * {Boolean} Ignore dimensions higher than 2 when reading geometry'],[-1,'     * coordinates.'],[-1,'     *\/ '],[-1,'    ignoreExtraDims: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.GeoJSON'],[-1,'     * Create a new parser for GeoJSON.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Deserialize a GeoJSON string.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * json - {String} A GeoJSON string'],[-1,'     * type - {String} Optional string that determines the structure of'],[-1,'     *     the output.  Supported values are \&quot;Geometry\&quot;, \&quot;Feature\&quot;, and'],[-1,'     *     \&quot;FeatureCollection\&quot;.  If absent or null, a default of'],[-1,'     *     \&quot;FeatureCollection\&quot; is assumed.'],[-1,'     * filter - {Function} A function which will be called for every key and'],[-1,'     *     value at every level of the final result. Each value will be'],[-1,'     *     replaced by the result of the filter function. This can be used to'],[-1,'     *     reform generic objects into instances of classes, or to transform'],[-1,'     *     date strings into Date objects.'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Object} The return depends on the value of the type argument. If type'],[-1,'     *     is \&quot;FeatureCollection\&quot; (the default), the return will be an array'],[-1,'     *     of &lt;OpenLayers.Feature.Vector&gt;. If type is \&quot;Geometry\&quot;, the input json'],[-1,'     *     must represent a single geometry, and the return will be an'],[-1,'     *     &lt;OpenLayers.Geometry&gt;.  If type is \&quot;Feature\&quot;, the input json must'],[-1,'     *     represent a single feature, and the return will be an'],[-1,'     *     &lt;OpenLayers.Feature.Vector&gt;.'],[-1,'     *\/'],[-1,'    read: function(json, type, filter) {'],[0,'        type = (type) ? type : \&quot;FeatureCollection\&quot;;'],[0,'        var results = null;'],[0,'        var obj = null;'],[0,'        if (typeof json == \&quot;string\&quot;) {'],[0,'            obj = OpenLayers.Format.JSON.prototype.read.apply(this,'],[-1,'                                                              [json, filter]);'],[-1,'        } else { '],[0,'            obj = json;'],[-1,'        }    '],[0,'        if(!obj) {'],[0,'            OpenLayers.Console.error(\&quot;Bad JSON: \&quot; + json);'],[0,'        } else if(typeof(obj.type) != \&quot;string\&quot;) {'],[0,'            OpenLayers.Console.error(\&quot;Bad GeoJSON - no type: \&quot; + json);'],[0,'        } else if(this.isValidType(obj, type)) {'],[0,'            switch(type) {'],[-1,'                case \&quot;Geometry\&quot;:'],[0,'                    try {'],[0,'                        results = this.parseGeometry(obj);'],[-1,'                    } catch(err) {'],[0,'                        OpenLayers.Console.error(err);'],[-1,'                    }'],[0,'                    break;'],[-1,'                case \&quot;Feature\&quot;:'],[0,'                    try {'],[0,'                        results = this.parseFeature(obj);'],[0,'                        results.type = \&quot;Feature\&quot;;'],[-1,'                    } catch(err) {'],[0,'                        OpenLayers.Console.error(err);'],[-1,'                    }'],[0,'                    break;'],[-1,'                case \&quot;FeatureCollection\&quot;:'],[-1,'                    \/\/ for type FeatureCollection, we allow input to be any type'],[0,'                    results = [];'],[0,'                    switch(obj.type) {'],[-1,'                        case \&quot;Feature\&quot;:'],[0,'                            try {'],[0,'                                results.push(this.parseFeature(obj));'],[-1,'                            } catch(err) {'],[0,'                                results = null;'],[0,'                                OpenLayers.Console.error(err);'],[-1,'                            }'],[0,'                            break;'],[-1,'                        case \&quot;FeatureCollection\&quot;:'],[0,'                            for(var i=0, len=obj.features.length; i&lt;len; ++i) {'],[0,'                                try {'],[0,'                                    results.push(this.parseFeature(obj.features[i]));'],[-1,'                                } catch(err) {'],[0,'                                    results = null;'],[0,'                                    OpenLayers.Console.error(err);'],[-1,'                                }'],[-1,'                            }'],[0,'                            break;'],[-1,'                        default:'],[0,'                            try {'],[0,'                                var geom = this.parseGeometry(obj);'],[0,'                                results.push(new OpenLayers.Feature.Vector(geom));'],[-1,'                            } catch(err) {'],[0,'                                results = null;'],[0,'                                OpenLayers.Console.error(err);'],[-1,'                            }'],[-1,'                    }'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        return results;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: isValidType'],[-1,'     * Check if a GeoJSON object is a valid representative of the given type.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The object is valid GeoJSON object of the given type.'],[-1,'     *\/'],[-1,'    isValidType: function(obj, type) {'],[0,'        var valid = false;'],[0,'        switch(type) {'],[-1,'            case \&quot;Geometry\&quot;:'],[0,'                if(OpenLayers.Util.indexOf('],[-1,'                    [\&quot;Point\&quot;, \&quot;MultiPoint\&quot;, \&quot;LineString\&quot;, \&quot;MultiLineString\&quot;,'],[-1,'                     \&quot;Polygon\&quot;, \&quot;MultiPolygon\&quot;, \&quot;Box\&quot;, \&quot;GeometryCollection\&quot;],'],[-1,'                    obj.type) == -1) {'],[-1,'                    \/\/ unsupported geometry type'],[0,'                    OpenLayers.Console.error(\&quot;Unsupported geometry type: \&quot; +'],[-1,'                                              obj.type);'],[-1,'                } else {'],[0,'                    valid = true;'],[-1,'                }'],[0,'                break;'],[-1,'            case \&quot;FeatureCollection\&quot;:'],[-1,'                \/\/ allow for any type to be converted to a feature collection'],[0,'                valid = true;'],[0,'                break;'],[-1,'            default:'],[-1,'                \/\/ for Feature types must match'],[0,'                if(obj.type == type) {'],[0,'                    valid = true;'],[-1,'                } else {'],[0,'                    OpenLayers.Console.error(\&quot;Cannot convert types from \&quot; +'],[-1,'                                              obj.type + \&quot; to \&quot; + type);'],[-1,'                }'],[-1,'        }'],[0,'        return valid;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseFeature'],[-1,'     * Convert a feature object from GeoJSON into an'],[-1,'     *     &lt;OpenLayers.Feature.Vector&gt;.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object} An object created from a GeoJSON object'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} A feature.'],[-1,'     *\/'],[-1,'    parseFeature: function(obj) {'],[0,'        var feature, geometry, attributes, bbox;'],[0,'        attributes = (obj.properties) ? obj.properties : {};'],[0,'        bbox = (obj.geometry &amp;&amp; obj.geometry.bbox) || obj.bbox;'],[0,'        try {'],[0,'            geometry = this.parseGeometry(obj.geometry);'],[-1,'        } catch(err) {'],[-1,'            \/\/ deal with bad geometries'],[0,'            throw err;'],[-1,'        }'],[0,'        feature = new OpenLayers.Feature.Vector(geometry, attributes);'],[0,'        if(bbox) {'],[0,'            feature.bounds = OpenLayers.Bounds.fromArray(bbox);'],[-1,'        }'],[0,'        if(obj.id) {'],[0,'            feature.fid = obj.id;'],[-1,'        }'],[0,'        return feature;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseGeometry'],[-1,'     * Convert a geometry object from GeoJSON into an &lt;OpenLayers.Geometry&gt;.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object} An object created from a GeoJSON object'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {&lt;OpenLayers.Geometry&gt;} A geometry.'],[-1,'     *\/'],[-1,'    parseGeometry: function(obj) {'],[0,'        if (obj == null) {'],[0,'            return null;'],[-1,'        }'],[0,'        var geometry, collection = false;'],[0,'        if(obj.type == \&quot;GeometryCollection\&quot;) {'],[0,'            if(!(OpenLayers.Util.isArray(obj.geometries))) {'],[0,'                throw \&quot;GeometryCollection must have geometries array: \&quot; + obj;'],[-1,'            }'],[0,'            var numGeom = obj.geometries.length;'],[0,'            var components = new Array(numGeom);'],[0,'            for(var i=0; i&lt;numGeom; ++i) {'],[0,'                components[i] = this.parseGeometry.apply('],[-1,'                    this, [obj.geometries[i]]'],[-1,'                );'],[-1,'            }'],[0,'            geometry = new OpenLayers.Geometry.Collection(components);'],[0,'            collection = true;'],[-1,'        } else {'],[0,'            if(!(OpenLayers.Util.isArray(obj.coordinates))) {'],[0,'                throw \&quot;Geometry must have coordinates array: \&quot; + obj;'],[-1,'            }'],[0,'            if(!this.parseCoords[obj.type.toLowerCase()]) {'],[0,'                throw \&quot;Unsupported geometry type: \&quot; + obj.type;'],[-1,'            }'],[0,'            try {'],[0,'                geometry = this.parseCoords[obj.type.toLowerCase()].apply('],[-1,'                    this, [obj.coordinates]'],[-1,'                );'],[-1,'            } catch(err) {'],[-1,'                \/\/ deal with bad coordinates'],[0,'                throw err;'],[-1,'            }'],[-1,'        }'],[-1,'        \/\/ We don\'t reproject collections because the children are reprojected'],[-1,'        \/\/ for us when they are created.'],[0,'        if (this.internalProjection &amp;&amp; this.externalProjection &amp;&amp; !collection) {'],[0,'            geometry.transform(this.externalProjection, '],[-1,'                               this.internalProjection); '],[-1,'        }                       '],[0,'        return geometry;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: parseCoords'],[-1,'     * Object with properties corresponding to the GeoJSON geometry types.'],[-1,'     *     Property values are functions that do the actual parsing.'],[-1,'     *\/'],[-1,'    parseCoords: {'],[-1,'        \/**'],[-1,'         * Method: parseCoords.point'],[-1,'         * Convert a coordinate array from GeoJSON into an'],[-1,'         *     &lt;OpenLayers.Geometry&gt;.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * array - {Object} The coordinates array from the GeoJSON fragment.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry&gt;} A geometry.'],[-1,'         *\/'],[-1,'        \&quot;point\&quot;: function(array) {'],[0,'            if (this.ignoreExtraDims == false &amp;&amp; '],[-1,'                  array.length != 2) {'],[0,'                    throw \&quot;Only 2D points are supported: \&quot; + array;'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.Point(array[0], array[1]);'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseCoords.multipoint'],[-1,'         * Convert a coordinate array from GeoJSON into an'],[-1,'         *     &lt;OpenLayers.Geometry&gt;.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * array - {Object} The coordinates array from the GeoJSON fragment.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry&gt;} A geometry.'],[-1,'         *\/'],[-1,'        \&quot;multipoint\&quot;: function(array) {'],[0,'            var points = [];'],[0,'            var p = null;'],[0,'            for(var i=0, len=array.length; i&lt;len; ++i) {'],[0,'                try {'],[0,'                    p = this.parseCoords[\&quot;point\&quot;].apply(this, [array[i]]);'],[-1,'                } catch(err) {'],[0,'                    throw err;'],[-1,'                }'],[0,'                points.push(p);'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.MultiPoint(points);'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Method: parseCoords.linestring'],[-1,'         * Convert a coordinate array from GeoJSON into an'],[-1,'         *     &lt;OpenLayers.Geometry&gt;.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * array - {Object} The coordinates array from the GeoJSON fragment.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry&gt;} A geometry.'],[-1,'         *\/'],[-1,'        \&quot;linestring\&quot;: function(array) {'],[0,'            var points = [];'],[0,'            var p = null;'],[0,'            for(var i=0, len=array.length; i&lt;len; ++i) {'],[0,'                try {'],[0,'                    p = this.parseCoords[\&quot;point\&quot;].apply(this, [array[i]]);'],[-1,'                } catch(err) {'],[0,'                    throw err;'],[-1,'                }'],[0,'                points.push(p);'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.LineString(points);'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseCoords.multilinestring'],[-1,'         * Convert a coordinate array from GeoJSON into an'],[-1,'         *     &lt;OpenLayers.Geometry&gt;.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * array - {Object} The coordinates array from the GeoJSON fragment.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry&gt;} A geometry.'],[-1,'         *\/'],[-1,'        \&quot;multilinestring\&quot;: function(array) {'],[0,'            var lines = [];'],[0,'            var l = null;'],[0,'            for(var i=0, len=array.length; i&lt;len; ++i) {'],[0,'                try {'],[0,'                    l = this.parseCoords[\&quot;linestring\&quot;].apply(this, [array[i]]);'],[-1,'                } catch(err) {'],[0,'                    throw err;'],[-1,'                }'],[0,'                lines.push(l);'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.MultiLineString(lines);'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: parseCoords.polygon'],[-1,'         * Convert a coordinate array from GeoJSON into an'],[-1,'         *     &lt;OpenLayers.Geometry&gt;.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry&gt;} A geometry.'],[-1,'         *\/'],[-1,'        \&quot;polygon\&quot;: function(array) {'],[0,'            var rings = [];'],[0,'            var r, l;'],[0,'            for(var i=0, len=array.length; i&lt;len; ++i) {'],[0,'                try {'],[0,'                    l = this.parseCoords[\&quot;linestring\&quot;].apply(this, [array[i]]);'],[-1,'                } catch(err) {'],[0,'                    throw err;'],[-1,'                }'],[0,'                r = new OpenLayers.Geometry.LinearRing(l.components);'],[0,'                rings.push(r);'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.Polygon(rings);'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Method: parseCoords.multipolygon'],[-1,'         * Convert a coordinate array from GeoJSON into an'],[-1,'         *     &lt;OpenLayers.Geometry&gt;.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * array - {Object} The coordinates array from the GeoJSON fragment.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry&gt;} A geometry.'],[-1,'         *\/'],[-1,'        \&quot;multipolygon\&quot;: function(array) {'],[0,'            var polys = [];'],[0,'            var p = null;'],[0,'            for(var i=0, len=array.length; i&lt;len; ++i) {'],[0,'                try {'],[0,'                    p = this.parseCoords[\&quot;polygon\&quot;].apply(this, [array[i]]);'],[-1,'                } catch(err) {'],[0,'                    throw err;'],[-1,'                }'],[0,'                polys.push(p);'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.MultiPolygon(polys);'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Method: parseCoords.box'],[-1,'         * Convert a coordinate array from GeoJSON into an'],[-1,'         *     &lt;OpenLayers.Geometry&gt;.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * array - {Object} The coordinates array from the GeoJSON fragment.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Geometry&gt;} A geometry.'],[-1,'         *\/'],[-1,'        \&quot;box\&quot;: function(array) {'],[0,'            if(array.length != 2) {'],[0,'                throw \&quot;GeoJSON box coordinates must have 2 elements\&quot;;'],[-1,'            }'],[0,'            return new OpenLayers.Geometry.Polygon(['],[-1,'                new OpenLayers.Geometry.LinearRing(['],[-1,'                    new OpenLayers.Geometry.Point(array[0][0], array[0][1]),'],[-1,'                    new OpenLayers.Geometry.Point(array[1][0], array[0][1]),'],[-1,'                    new OpenLayers.Geometry.Point(array[1][0], array[1][1]),'],[-1,'                    new OpenLayers.Geometry.Point(array[0][0], array[1][1]),'],[-1,'                    new OpenLayers.Geometry.Point(array[0][0], array[0][1])'],[-1,'                ])'],[-1,'            ]);'],[-1,'        }'],[-1,''],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Serialize a feature, geometry, array of features into a GeoJSON string.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object} An &lt;OpenLayers.Feature.Vector&gt;, &lt;OpenLayers.Geometry&gt;,'],[-1,'     *     or an array of features.'],[-1,'     * pretty - {Boolean} Structure the output with newlines and indentation.'],[-1,'     *     Default is false.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The GeoJSON string representation of the input geometry,'],[-1,'     *     features, or array of features.'],[-1,'     *\/'],[-1,'    write: function(obj, pretty) {'],[0,'        var geojson = {'],[-1,'            \&quot;type\&quot;: null'],[-1,'        };'],[0,'        if(OpenLayers.Util.isArray(obj)) {'],[0,'            geojson.type = \&quot;FeatureCollection\&quot;;'],[0,'            var numFeatures = obj.length;'],[0,'            geojson.features = new Array(numFeatures);'],[0,'            for(var i=0; i&lt;numFeatures; ++i) {'],[0,'                var element = obj[i];'],[0,'                if(!element instanceof OpenLayers.Feature.Vector) {'],[0,'                    var msg = \&quot;FeatureCollection only supports collections \&quot; +'],[-1,'                              \&quot;of features: \&quot; + element;'],[0,'                    throw msg;'],[-1,'                }'],[0,'                geojson.features[i] = this.extract.feature.apply('],[-1,'                    this, [element]'],[-1,'                );'],[-1,'            }'],[0,'        } else if (obj.CLASS_NAME.indexOf(\&quot;OpenLayers.Geometry\&quot;) == 0) {'],[0,'            geojson = this.extract.geometry.apply(this, [obj]);'],[0,'        } else if (obj instanceof OpenLayers.Feature.Vector) {'],[0,'            geojson = this.extract.feature.apply(this, [obj]);'],[0,'            if(obj.layer &amp;&amp; obj.layer.projection) {'],[0,'                geojson.crs = this.createCRSObject(obj);'],[-1,'            }'],[-1,'        }'],[0,'        return OpenLayers.Format.JSON.prototype.write.apply(this,'],[-1,'                                                            [geojson, pretty]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createCRSObject'],[-1,'     * Create the CRS object for an object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * object - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object which can be assigned to the crs property'],[-1,'     * of a GeoJSON object.'],[-1,'     *\/'],[-1,'    createCRSObject: function(object) {'],[0,'       var proj = object.layer.projection.toString();'],[0,'       var crs = {};'],[0,'       if (proj.match(\/epsg:\/i)) {'],[0,'           var code = parseInt(proj.substring(proj.indexOf(\&quot;:\&quot;) + 1));'],[0,'           if (code == 4326) {'],[0,'               crs = {'],[-1,'                   \&quot;type\&quot;: \&quot;name\&quot;,'],[-1,'                   \&quot;properties\&quot;: {'],[-1,'                       \&quot;name\&quot;: \&quot;urn:ogc:def:crs:OGC:1.3:CRS84\&quot;'],[-1,'                   }'],[-1,'               };'],[-1,'           } else {    '],[0,'               crs = {'],[-1,'                   \&quot;type\&quot;: \&quot;name\&quot;,'],[-1,'                   \&quot;properties\&quot;: {'],[-1,'                       \&quot;name\&quot;: \&quot;EPSG:\&quot; + code'],[-1,'                   }'],[-1,'               };'],[-1,'           }    '],[-1,'       }'],[0,'       return crs;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: extract'],[-1,'     * Object with properties corresponding to the GeoJSON types.'],[-1,'     *     Property values are functions that do the actual value extraction.'],[-1,'     *\/'],[-1,'    extract: {'],[-1,'        \/**'],[-1,'         * Method: extract.feature'],[-1,'         * Return a partial GeoJSON object representing a single feature.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {Object} An object representing the point.'],[-1,'         *\/'],[-1,'        \'feature\': function(feature) {'],[0,'            var geom = this.extract.geometry.apply(this, [feature.geometry]);'],[0,'            var json = {'],[-1,'                \&quot;type\&quot;: \&quot;Feature\&quot;,'],[-1,'                \&quot;properties\&quot;: feature.attributes,'],[-1,'                \&quot;geometry\&quot;: geom'],[-1,'            };'],[0,'            if (feature.fid != null) {'],[0,'                json.id = feature.fid;'],[-1,'            }'],[0,'            return json;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: extract.geometry'],[-1,'         * Return a GeoJSON object representing a single geometry.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {Object} An object representing the geometry.'],[-1,'         *\/'],[-1,'        \'geometry\': function(geometry) {'],[0,'            if (geometry == null) {'],[0,'                return null;'],[-1,'            }'],[0,'            if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'                geometry = geometry.clone();'],[0,'                geometry.transform(this.internalProjection, '],[-1,'                                   this.externalProjection);'],[-1,'            }                       '],[0,'            var geometryType = geometry.CLASS_NAME.split(\'.\')[2];'],[0,'            var data = this.extract[geometryType.toLowerCase()].apply(this, [geometry]);'],[0,'            var json;'],[0,'            if(geometryType == \&quot;Collection\&quot;) {'],[0,'                json = {'],[-1,'                    \&quot;type\&quot;: \&quot;GeometryCollection\&quot;,'],[-1,'                    \&quot;geometries\&quot;: data'],[-1,'                };'],[-1,'            } else {'],[0,'                json = {'],[-1,'                    \&quot;type\&quot;: geometryType,'],[-1,'                    \&quot;coordinates\&quot;: data'],[-1,'                };'],[-1,'            }'],[-1,'            '],[0,'            return json;'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Method: extract.point'],[-1,'         * Return an array of coordinates from a point.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * point - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'         *'],[-1,'         * Returns: '],[-1,'         * {Array} An array of coordinates representing the point.'],[-1,'         *\/'],[-1,'        \'point\': function(point) {'],[0,'            return [point.x, point.y];'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Method: extract.multipoint'],[-1,'         * Return an array of point coordinates from a multipoint.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * multipoint - {&lt;OpenLayers.Geometry.MultiPoint&gt;}'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {Array} An array of point coordinate arrays representing'],[-1,'         *     the multipoint.'],[-1,'         *\/'],[-1,'        \'multipoint\': function(multipoint) {'],[0,'            var array = [];'],[0,'            for(var i=0, len=multipoint.components.length; i&lt;len; ++i) {'],[0,'                array.push(this.extract.point.apply(this, [multipoint.components[i]]));'],[-1,'            }'],[0,'            return array;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: extract.linestring'],[-1,'         * Return an array of coordinate arrays from a linestring.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * linestring - {&lt;OpenLayers.Geometry.LineString&gt;}'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {Array} An array of coordinate arrays representing'],[-1,'         *     the linestring.'],[-1,'         *\/'],[-1,'        \'linestring\': function(linestring) {'],[0,'            var array = [];'],[0,'            for(var i=0, len=linestring.components.length; i&lt;len; ++i) {'],[0,'                array.push(this.extract.point.apply(this, [linestring.components[i]]));'],[-1,'            }'],[0,'            return array;'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Method: extract.multilinestring'],[-1,'         * Return an array of linestring arrays from a linestring.'],[-1,'         * '],[-1,'         * Parameters:'],[-1,'         * multilinestring - {&lt;OpenLayers.Geometry.MultiLineString&gt;}'],[-1,'         * '],[-1,'         * Returns:'],[-1,'         * {Array} An array of linestring arrays representing'],[-1,'         *     the multilinestring.'],[-1,'         *\/'],[-1,'        \'multilinestring\': function(multilinestring) {'],[0,'            var array = [];'],[0,'            for(var i=0, len=multilinestring.components.length; i&lt;len; ++i) {'],[0,'                array.push(this.extract.linestring.apply(this, [multilinestring.components[i]]));'],[-1,'            }'],[0,'            return array;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: extract.polygon'],[-1,'         * Return an array of linear ring arrays from a polygon.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * polygon - {&lt;OpenLayers.Geometry.Polygon&gt;}'],[-1,'         * '],[-1,'         * Returns:'],[-1,'         * {Array} An array of linear ring arrays representing the polygon.'],[-1,'         *\/'],[-1,'        \'polygon\': function(polygon) {'],[0,'            var array = [];'],[0,'            for(var i=0, len=polygon.components.length; i&lt;len; ++i) {'],[0,'                array.push(this.extract.linestring.apply(this, [polygon.components[i]]));'],[-1,'            }'],[0,'            return array;'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Method: extract.multipolygon'],[-1,'         * Return an array of polygon arrays from a multipolygon.'],[-1,'         * '],[-1,'         * Parameters:'],[-1,'         * multipolygon - {&lt;OpenLayers.Geometry.MultiPolygon&gt;}'],[-1,'         * '],[-1,'         * Returns:'],[-1,'         * {Array} An array of polygon arrays representing'],[-1,'         *     the multipolygon'],[-1,'         *\/'],[-1,'        \'multipolygon\': function(multipolygon) {'],[0,'            var array = [];'],[0,'            for(var i=0, len=multipolygon.components.length; i&lt;len; ++i) {'],[0,'                array.push(this.extract.polygon.apply(this, [multipolygon.components[i]]));'],[-1,'            }'],[0,'            return array;'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Method: extract.collection'],[-1,'         * Return an array of geometries from a geometry collection.'],[-1,'         * '],[-1,'         * Parameters:'],[-1,'         * collection - {&lt;OpenLayers.Geometry.Collection&gt;}'],[-1,'         * '],[-1,'         * Returns:'],[-1,'         * {Array} An array of geometry objects representing the geometry'],[-1,'         *     collection.'],[-1,'         *\/'],[-1,'        \'collection\': function(collection) {'],[0,'            var len = collection.components.length;'],[0,'            var array = new Array(len);'],[0,'            for(var i=0; i&lt;len; ++i) {'],[0,'                array[i] = this.extract.geometry.apply('],[-1,'                    this, [collection.components[i]]'],[-1,'                );'],[-1,'            }'],[0,'            return array;'],[-1,'        }'],[-1,'        '],[-1,''],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.GeoJSON\&quot; '],[-1,''],[-1,'});     '],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Strategy\/Paging.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Strategy.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Strategy.Paging'],[-1,' * Strategy for vector feature paging'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Strategy&gt;'],[-1,' *\/'],[1,'OpenLayers.Strategy.Paging = OpenLayers.Class(OpenLayers.Strategy, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: features'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} Cached features.'],[-1,'     *\/'],[-1,'    features: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: length'],[-1,'     * {Integer} Number of features per page.  Default is 10.'],[-1,'     *\/'],[-1,'    length: 10,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: num'],[-1,'     * {Integer} The currently displayed page number.'],[-1,'     *\/'],[-1,'    num: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: paging'],[-1,'     * {Boolean} The strategy is currently changing pages.'],[-1,'     *\/'],[-1,'    paging: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Strategy.Paging'],[-1,'     * Create a new paging strategy.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Activate the strategy.  Register any listeners, do appropriate setup.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The strategy was successfully activated.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = OpenLayers.Strategy.prototype.activate.call(this);'],[0,'        if(activated) {'],[0,'            this.layer.events.on({'],[-1,'                \&quot;beforefeaturesadded\&quot;: this.cacheFeatures,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the strategy.  Unregister any listeners, do appropriate'],[-1,'     *     tear-down.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The strategy was successfully deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);'],[0,'        if(deactivated) {'],[0,'            this.clearCache();'],[0,'            this.layer.events.un({'],[-1,'                \&quot;beforefeaturesadded\&quot;: this.cacheFeatures,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: cacheFeatures'],[-1,'     * Cache features before they are added to the layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Object} The event that this was listening for.  This will come'],[-1,'     *     with a batch of features to be paged.'],[-1,'     *\/'],[-1,'    cacheFeatures: function(event) {'],[0,'        if(!this.paging) {'],[0,'            this.clearCache();'],[0,'            this.features = event.features;'],[0,'            this.pageNext(event);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: clearCache'],[-1,'     * Clear out the cached features.  This destroys features, assuming'],[-1,'     *     nothing else has a reference.'],[-1,'     *\/'],[-1,'    clearCache: function() {'],[0,'        if(this.features) {'],[0,'            for(var i=0; i&lt;this.features.length; ++i) {'],[0,'                this.features[i].destroy();'],[-1,'            }'],[-1,'        }'],[0,'        this.features = null;'],[0,'        this.num = null;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: pageCount'],[-1,'     * Get the total count of pages given the current cache of features.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Integer} The page count.'],[-1,'     *\/'],[-1,'    pageCount: function() {'],[0,'        var numFeatures = this.features ? this.features.length : 0;'],[0,'        return Math.ceil(numFeatures \/ this.length);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: pageNum'],[-1,'     * Get the zero based page number.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Integer} The current page number being displayed.'],[-1,'     *\/'],[-1,'    pageNum: function() {'],[0,'        return this.num;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: pageLength'],[-1,'     * Gets or sets page length.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * newLength - {Integer} Optional length to be set.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Integer} The length of a page (number of features per page).'],[-1,'     *\/'],[-1,'    pageLength: function(newLength) {'],[0,'        if(newLength &amp;&amp; newLength &gt; 0) {'],[0,'            this.length = newLength;'],[-1,'        }'],[0,'        return this.length;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: pageNext'],[-1,'     * Display the next page of features.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} A new page was displayed.'],[-1,'     *\/'],[-1,'    pageNext: function(event) {'],[0,'        var changed = false;'],[0,'        if(this.features) {'],[0,'            if(this.num === null) {'],[0,'                this.num = -1;'],[-1,'            }'],[0,'            var start = (this.num + 1) * this.length;'],[0,'            changed = this.page(start, event);'],[-1,'        }'],[0,'        return changed;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: pagePrevious'],[-1,'     * Display the previous page of features.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} A new page was displayed.'],[-1,'     *\/'],[-1,'    pagePrevious: function() {'],[0,'        var changed = false;'],[0,'        if(this.features) {'],[0,'            if(this.num === null) {'],[0,'                this.num = this.pageCount();'],[-1,'            }'],[0,'            var start = (this.num - 1) * this.length;'],[0,'            changed = this.page(start);'],[-1,'        }'],[0,'        return changed;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: page'],[-1,'     * Display the page starting at the given index from the cache.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} A new page was displayed.'],[-1,'     *\/'],[-1,'    page: function(start, event) {'],[0,'        var changed = false;'],[0,'        if(this.features) {'],[0,'            if(start &gt;= 0 &amp;&amp; start &lt; this.features.length) {'],[0,'                var num = Math.floor(start \/ this.length);'],[0,'                if(num != this.num) {'],[0,'                    this.paging = true;'],[0,'                    var features = this.features.slice(start, start + this.length);'],[0,'                    this.layer.removeFeatures(this.layer.features);'],[0,'                    this.num = num;'],[-1,'                    \/\/ modify the event if any'],[0,'                    if(event &amp;&amp; event.features) {'],[-1,'                        \/\/ this.was called by an event listener'],[0,'                        event.features = features;'],[-1,'                    } else {'],[-1,'                        \/\/ this was called directly on the strategy'],[0,'                        this.layer.addFeatures(features);'],[-1,'                    }'],[0,'                    this.paging = false;'],[0,'                    changed = true;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return changed;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Strategy.Paging\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Popup\/Anchored.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Popup.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Popup.Anchored'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Popup&gt;'],[-1,' *\/'],[1,'OpenLayers.Popup.Anchored = '],[-1,'  OpenLayers.Class(OpenLayers.Popup, {'],[-1,''],[-1,'    \/** '],[-1,'     * Property: relativePosition'],[-1,'     * {String} Relative position of the popup (\&quot;br\&quot;, \&quot;tr\&quot;, \&quot;tl\&quot; or \&quot;bl\&quot;).'],[-1,'     *\/'],[-1,'    relativePosition: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: keepInMap '],[-1,'     * {Boolean} If panMapIfOutOfView is false, and this property is true, '],[-1,'     *     contrain the popup such that it always fits in the available map'],[-1,'     *     space. By default, this is set. If you are creating popups that are'],[-1,'     *     near map edges and not allowing pannning, and especially if you have'],[-1,'     *     a popup which has a fixedRelativePosition, setting this to false may'],[-1,'     *     be a smart thing to do.'],[-1,'     *   '],[-1,'     *     For anchored popups, default is true, since subclasses will'],[-1,'     *     usually want this functionality.'],[-1,'     *\/'],[-1,'    keepInMap: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: anchor'],[-1,'     * {Object} Object to which we\'ll anchor the popup. Must expose a '],[-1,'     *     \'size\' (&lt;OpenLayers.Size&gt;) and \'offset\' (&lt;OpenLayers.Pixel&gt;).'],[-1,'     *\/'],[-1,'    anchor: null,'],[-1,''],[-1,'    \/** '],[-1,'    * Constructor: OpenLayers.Popup.Anchored'],[-1,'    * '],[-1,'    * Parameters:'],[-1,'    * id - {String}'],[-1,'    * lonlat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'    * contentSize - {&lt;OpenLayers.Size&gt;}'],[-1,'    * contentHTML - {String}'],[-1,'    * anchor - {Object} Object which must expose a \'size\' &lt;OpenLayers.Size&gt; '],[-1,'    *     and \'offset\' &lt;OpenLayers.Pixel&gt; (generally an &lt;OpenLayers.Icon&gt;).'],[-1,'    * closeBox - {Boolean}'],[-1,'    * closeBoxCallback - {Function} Function to be called on closeBox click.'],[-1,'    *\/'],[-1,'    initialize:function(id, lonlat, contentSize, contentHTML, anchor, closeBox,'],[-1,'                        closeBoxCallback) {'],[0,'        var newArguments = ['],[-1,'            id, lonlat, contentSize, contentHTML, closeBox, closeBoxCallback'],[-1,'        ];'],[0,'        OpenLayers.Popup.prototype.initialize.apply(this, newArguments);'],[-1,''],[0,'        this.anchor = (anchor != null) ? anchor '],[-1,'                                       : { size: new OpenLayers.Size(0,0),'],[-1,'                                           offset: new OpenLayers.Pixel(0,0)};'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.anchor = null;'],[0,'        this.relativePosition = null;'],[-1,'        '],[0,'        OpenLayers.Popup.prototype.destroy.apply(this, arguments);        '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: show'],[-1,'     * Overridden from Popup since user might hide popup and then show() it '],[-1,'     *     in a new location (meaning we might want to update the relative'],[-1,'     *     position on the show)'],[-1,'     *\/'],[-1,'    show: function() {'],[0,'        this.updatePosition();'],[0,'        OpenLayers.Popup.prototype.show.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     * Since the popup is moving to a new px, it might need also to be moved'],[-1,'     *     relative to where the marker is. We first calculate the new '],[-1,'     *     relativePosition, and then we calculate the new px where we will '],[-1,'     *     put the popup, based on the new relative position. '],[-1,'     * '],[-1,'     *     If the relativePosition has changed, we must also call '],[-1,'     *     updateRelativePosition() to make any visual changes to the popup '],[-1,'     *     which are associated with putting it in a new relativePosition.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *\/'],[-1,'    moveTo: function(px) {'],[0,'        var oldRelativePosition = this.relativePosition;'],[0,'        this.relativePosition = this.calculateRelativePosition(px);'],[-1,''],[0,'        OpenLayers.Popup.prototype.moveTo.call(this, this.calculateNewPx(px));'],[-1,'        '],[-1,'        \/\/if this move has caused the popup to change its relative position, '],[-1,'        \/\/ we need to make the appropriate cosmetic changes.'],[0,'        if (this.relativePosition != oldRelativePosition) {'],[0,'            this.updateRelativePosition();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setSize'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * contentSize - {&lt;OpenLayers.Size&gt;} the new size for the popup\'s '],[-1,'     *     contents div (in pixels).'],[-1,'     *\/'],[-1,'    setSize:function(contentSize) { '],[0,'        OpenLayers.Popup.prototype.setSize.apply(this, arguments);'],[-1,''],[0,'        if ((this.lonlat) &amp;&amp; (this.map)) {'],[0,'            var px = this.map.getLayerPxFromLonLat(this.lonlat);'],[0,'            this.moveTo(px);'],[-1,'        }'],[-1,'    },  '],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: calculateRelativePosition'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} The relative position (\&quot;br\&quot; \&quot;tr\&quot; \&quot;tl\&quot; \&quot;bl\&quot;) at which the popup'],[-1,'     *     should be placed.'],[-1,'     *\/'],[-1,'    calculateRelativePosition:function(px) {'],[0,'        var lonlat = this.map.getLonLatFromLayerPx(px);        '],[-1,'        '],[0,'        var extent = this.map.getExtent();'],[0,'        var quadrant = extent.determineQuadrant(lonlat);'],[-1,'        '],[0,'        return OpenLayers.Bounds.oppositeQuadrant(quadrant);'],[-1,'    }, '],[-1,''],[-1,'    \/**'],[-1,'     * Method: updateRelativePosition'],[-1,'     * The popup has been moved to a new relative location, so we may want to '],[-1,'     *     make some cosmetic adjustments to it. '],[-1,'     * '],[-1,'     *     Note that in the classic Anchored popup, there is nothing to do '],[-1,'     *     here, since the popup looks exactly the same in all four positions.'],[-1,'     *     Subclasses such as Framed, however, will want to do something'],[-1,'     *     special here.'],[-1,'     *\/'],[-1,'    updateRelativePosition: function() {'],[-1,'        \/\/to be overridden by subclasses'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: calculateNewPx'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} The the new px position of the popup on the screen'],[-1,'     *     relative to the passed-in px.'],[-1,'     *\/'],[-1,'    calculateNewPx:function(px) {'],[0,'        var newPx = px.offset(this.anchor.offset);'],[-1,'        '],[-1,'        \/\/use contentSize if size is not already set'],[0,'        var size = this.size || this.contentSize;'],[-1,''],[0,'        var top = (this.relativePosition.charAt(0) == \'t\');'],[0,'        newPx.y += (top) ? -size.h : this.anchor.size.h;'],[-1,'        '],[0,'        var left = (this.relativePosition.charAt(1) == \'l\');'],[0,'        newPx.x += (left) ? -size.w : this.anchor.size.w;'],[-1,''],[0,'        return newPx;   '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Popup.Anchored\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Popup\/Framed.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Popup\/Anchored.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Popup.Framed'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Popup.Anchored&gt;'],[-1,' *\/'],[1,'OpenLayers.Popup.Framed ='],[-1,'  OpenLayers.Class(OpenLayers.Popup.Anchored, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: imageSrc'],[-1,'     * {String} location of the image to be used as the popup frame'],[-1,'     *\/'],[-1,'    imageSrc: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: imageSize'],[-1,'     * {&lt;OpenLayers.Size&gt;} Size (measured in pixels) of the image located'],[-1,'     *     by the \'imageSrc\' property.'],[-1,'     *\/'],[-1,'    imageSize: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: isAlphaImage'],[-1,'     * {Boolean} The image has some alpha and thus needs to use the alpha '],[-1,'     *     image hack. Note that setting this to true will have no noticeable'],[-1,'     *     effect in FF or IE7 browsers, but will all but crush the ie6 '],[-1,'     *     browser. '],[-1,'     *     Default is false.'],[-1,'     *\/'],[-1,'    isAlphaImage: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: positionBlocks'],[-1,'     * {Object} Hash of different position blocks (Object\/Hashs). Each block '],[-1,'     *     will be keyed by a two-character \'relativePosition\' '],[-1,'     *     code string (ie \&quot;tl\&quot;, \&quot;tr\&quot;, \&quot;bl\&quot;, \&quot;br\&quot;). Block properties are '],[-1,'     *     \'offset\', \'padding\' (self-explanatory), and finally the \'blocks\''],[-1,'     *     parameter, which is an array of the block objects. '],[-1,'     * '],[-1,'     *     Each block object must have \'size\', \'anchor\', and \'position\' '],[-1,'     *     properties.'],[-1,'     * '],[-1,'     *     Note that positionBlocks should never be modified at runtime.'],[-1,'     *\/'],[-1,'    positionBlocks: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: blocks'],[-1,'     * {Array[Object]} Array of objects, each of which is one \&quot;block\&quot; of the '],[-1,'     *     popup. Each block has a \'div\' and an \'image\' property, both of '],[-1,'     *     which are DOMElements, and the latter of which is appended to the '],[-1,'     *     former. These are reused as the popup goes changing positions for'],[-1,'     *     great economy and elegance.'],[-1,'     *\/'],[-1,'    blocks: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: fixedRelativePosition'],[-1,'     * {Boolean} We want the framed popup to work dynamically placed relative'],[-1,'     *     to its anchor but also in just one fixed position. A well designed'],[-1,'     *     framed popup will have the pixels and logic to display itself in '],[-1,'     *     any of the four relative positions, but (understandably), this will'],[-1,'     *     not be the case for all of them. By setting this property to \'true\', '],[-1,'     *     framed popup will not recalculate for the best placement each time'],[-1,'     *     it\'s open, but will always open the same way. '],[-1,'     *     Note that if this is set to true, it is generally advisable to also'],[-1,'     *     set the \'panIntoView\' property to true so that the popup can be '],[-1,'     *     scrolled into view (since it will often be offscreen on open)'],[-1,'     *     Default is false.'],[-1,'     *\/'],[-1,'    fixedRelativePosition: false,'],[-1,''],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Popup.Framed'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * id - {String}'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     * contentSize - {&lt;OpenLayers.Size&gt;}'],[-1,'     * contentHTML - {String}'],[-1,'     * anchor - {Object} Object to which we\'ll anchor the popup. Must expose '],[-1,'     *     a \'size\' (&lt;OpenLayers.Size&gt;) and \'offset\' (&lt;OpenLayers.Pixel&gt;) '],[-1,'     *     (Note that this is generally an &lt;OpenLayers.Icon&gt;).'],[-1,'     * closeBox - {Boolean}'],[-1,'     * closeBoxCallback - {Function} Function to be called on closeBox click.'],[-1,'     *\/'],[-1,'    initialize:function(id, lonlat, contentSize, contentHTML, anchor, closeBox, '],[-1,'                        closeBoxCallback) {'],[-1,''],[0,'        OpenLayers.Popup.Anchored.prototype.initialize.apply(this, arguments);'],[-1,''],[0,'        if (this.fixedRelativePosition) {'],[-1,'            \/\/based on our decided relativePostion, set the current padding'],[-1,'            \/\/ this keeps us from getting into trouble '],[0,'            this.updateRelativePosition();'],[-1,'            '],[-1,'            \/\/make calculateRelativePosition always return the specified'],[-1,'            \/\/ fixed position.'],[0,'            this.calculateRelativePosition = function(px) {'],[0,'                return this.relativePosition;'],[-1,'            };'],[-1,'        }'],[-1,''],[0,'        this.contentDiv.style.position = \&quot;absolute\&quot;;'],[0,'        this.contentDiv.style.zIndex = 1;'],[-1,''],[0,'        if (closeBox) {'],[0,'            this.closeDiv.style.zIndex = 1;'],[-1,'        }'],[-1,''],[0,'        this.groupDiv.style.position = \&quot;absolute\&quot;;'],[0,'        this.groupDiv.style.top = \&quot;0px\&quot;;'],[0,'        this.groupDiv.style.left = \&quot;0px\&quot;;'],[0,'        this.groupDiv.style.height = \&quot;100%\&quot;;'],[0,'        this.groupDiv.style.width = \&quot;100%\&quot;;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.imageSrc = null;'],[0,'        this.imageSize = null;'],[0,'        this.isAlphaImage = null;'],[-1,''],[0,'        this.fixedRelativePosition = false;'],[0,'        this.positionBlocks = null;'],[-1,''],[-1,'        \/\/remove our blocks'],[0,'        for(var i = 0; i &lt; this.blocks.length; i++) {'],[0,'            var block = this.blocks[i];'],[-1,''],[0,'            if (block.image) {'],[0,'                block.div.removeChild(block.image);'],[-1,'            }'],[0,'            block.image = null;'],[-1,''],[0,'            if (block.div) {'],[0,'                this.groupDiv.removeChild(block.div);'],[-1,'            }'],[0,'            block.div = null;'],[-1,'        }'],[0,'        this.blocks = null;'],[-1,''],[0,'        OpenLayers.Popup.Anchored.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setBackgroundColor'],[-1,'     *\/'],[-1,'    setBackgroundColor:function(color) {'],[-1,'        \/\/does nothing since the framed popup\'s entire scheme is based on a '],[-1,'        \/\/ an image -- changing the background color makes no sense. '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setBorder'],[-1,'     *\/'],[-1,'    setBorder:function() {'],[-1,'        \/\/does nothing since the framed popup\'s entire scheme is based on a '],[-1,'        \/\/ an image -- changing the popup\'s border makes no sense. '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setOpacity'],[-1,'     * Sets the opacity of the popup.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * opacity - {float} A value between 0.0 (transparent) and 1.0 (solid).   '],[-1,'     *\/'],[-1,'    setOpacity:function(opacity) {'],[-1,'        \/\/does nothing since we suppose that we\'ll never apply an opacity'],[-1,'        \/\/ to a framed popup'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setSize'],[-1,'     * Overridden here, because we need to update the blocks whenever the size'],[-1,'     *     of the popup has changed.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * contentSize - {&lt;OpenLayers.Size&gt;} the new size for the popup\'s '],[-1,'     *     contents div (in pixels).'],[-1,'     *\/'],[-1,'    setSize:function(contentSize) { '],[0,'        OpenLayers.Popup.Anchored.prototype.setSize.apply(this, arguments);'],[-1,''],[0,'        this.updateBlocks();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: updateRelativePosition'],[-1,'     * When the relative position changes, we need to set the new padding '],[-1,'     *     BBOX on the popup, reposition the close div, and update the blocks.'],[-1,'     *\/'],[-1,'    updateRelativePosition: function() {'],[-1,''],[-1,'        \/\/update the padding'],[0,'        this.padding = this.positionBlocks[this.relativePosition].padding;'],[-1,''],[-1,'        \/\/update the position of our close box to new padding'],[0,'        if (this.closeDiv) {'],[-1,'            \/\/ use the content div\'s css padding to determine if we should'],[-1,'            \/\/  padd the close div'],[0,'            var contentDivPadding = this.getContentDivPadding();'],[-1,''],[0,'            this.closeDiv.style.right = contentDivPadding.right + '],[-1,'                                        this.padding.right + \&quot;px\&quot;;'],[0,'            this.closeDiv.style.top = contentDivPadding.top + '],[-1,'                                      this.padding.top + \&quot;px\&quot;;'],[-1,'        }'],[-1,''],[0,'        this.updateBlocks();'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: calculateNewPx'],[-1,'     * Besides the standard offset as determined by the Anchored class, our '],[-1,'     *     Framed popups have a special \'offset\' property for each of their '],[-1,'     *     positions, which is used to offset the popup relative to its anchor.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} The the new px position of the popup on the screen'],[-1,'     *     relative to the passed-in px.'],[-1,'     *\/'],[-1,'    calculateNewPx:function(px) {'],[0,'        var newPx = OpenLayers.Popup.Anchored.prototype.calculateNewPx.apply('],[-1,'            this, arguments'],[-1,'        );'],[-1,''],[0,'        newPx = newPx.offset(this.positionBlocks[this.relativePosition].offset);'],[-1,''],[0,'        return newPx;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createBlocks'],[-1,'     *\/'],[-1,'    createBlocks: function() {'],[0,'        this.blocks = [];'],[-1,''],[-1,'        \/\/since all positions contain the same number of blocks, we can '],[-1,'        \/\/ just pick the first position and use its blocks array to create'],[-1,'        \/\/ our blocks array'],[0,'        var firstPosition = null;'],[0,'        for(var key in this.positionBlocks) {'],[0,'            firstPosition = key;'],[0,'            break;'],[-1,'        }'],[-1,'        '],[0,'        var position = this.positionBlocks[firstPosition];'],[0,'        for (var i = 0; i &lt; position.blocks.length; i++) {'],[-1,''],[0,'            var block = {};'],[0,'            this.blocks.push(block);'],[-1,''],[0,'            var divId = this.id + \'_FrameDecorationDiv_\' + i;'],[0,'            block.div = OpenLayers.Util.createDiv(divId, '],[-1,'                null, null, null, \&quot;absolute\&quot;, null, \&quot;hidden\&quot;, null'],[-1,'            );'],[-1,''],[0,'            var imgId = this.id + \'_FrameDecorationImg_\' + i;'],[0,'            var imageCreator = '],[-1,'                (this.isAlphaImage) ? OpenLayers.Util.createAlphaImageDiv'],[-1,'                                    : OpenLayers.Util.createImage;'],[-1,''],[0,'            block.image = imageCreator(imgId, '],[-1,'                null, this.imageSize, this.imageSrc, '],[-1,'                \&quot;absolute\&quot;, null, null, null'],[-1,'            );'],[-1,''],[0,'            block.div.appendChild(block.image);'],[0,'            this.groupDiv.appendChild(block.div);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: updateBlocks'],[-1,'     * Internal method, called on initialize and when the popup\'s relative'],[-1,'     *     position has changed. This function takes care of re-positioning'],[-1,'     *     the popup\'s blocks in their appropropriate places.'],[-1,'     *\/'],[-1,'    updateBlocks: function() {'],[0,'        if (!this.blocks) {'],[0,'            this.createBlocks();'],[-1,'        }'],[-1,'        '],[0,'        if (this.size &amp;&amp; this.relativePosition) {'],[0,'            var position = this.positionBlocks[this.relativePosition];'],[0,'            for (var i = 0; i &lt; position.blocks.length; i++) {'],[-1,'    '],[0,'                var positionBlock = position.blocks[i];'],[0,'                var block = this.blocks[i];'],[-1,'    '],[-1,'                \/\/ adjust sizes'],[0,'                var l = positionBlock.anchor.left;'],[0,'                var b = positionBlock.anchor.bottom;'],[0,'                var r = positionBlock.anchor.right;'],[0,'                var t = positionBlock.anchor.top;'],[-1,'    '],[-1,'                \/\/note that we use the isNaN() test here because if the '],[-1,'                \/\/ size object is initialized with a \&quot;auto\&quot; parameter, the '],[-1,'                \/\/ size constructor calls parseFloat() on the string, '],[-1,'                \/\/ which will turn it into NaN'],[-1,'                \/\/'],[0,'                var w = (isNaN(positionBlock.size.w)) ? this.size.w - (r + l) '],[-1,'                                                      : positionBlock.size.w;'],[-1,'    '],[0,'                var h = (isNaN(positionBlock.size.h)) ? this.size.h - (b + t) '],[-1,'                                                      : positionBlock.size.h;'],[-1,'    '],[0,'                block.div.style.width = (w &lt; 0 ? 0 : w) + \'px\';'],[0,'                block.div.style.height = (h &lt; 0 ? 0 : h) + \'px\';'],[-1,'    '],[0,'                block.div.style.left = (l != null) ? l + \'px\' : \'\';'],[0,'                block.div.style.bottom = (b != null) ? b + \'px\' : \'\';'],[0,'                block.div.style.right = (r != null) ? r + \'px\' : \'\';            '],[0,'                block.div.style.top = (t != null) ? t + \'px\' : \'\';'],[-1,'    '],[0,'                block.image.style.left = positionBlock.position.x + \'px\';'],[0,'                block.image.style.top = positionBlock.position.y + \'px\';'],[-1,'            }'],[-1,'    '],[0,'            this.contentDiv.style.left = this.padding.left + \&quot;px\&quot;;'],[0,'            this.contentDiv.style.top = this.padding.top + \&quot;px\&quot;;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Popup.Framed\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler\/Box.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler.js'],[-1,' * @requires OpenLayers\/Handler\/Drag.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Handler.Box'],[-1,' * Handler for dragging a rectangle across the map.  Box is displayed '],[-1,' * on mouse down, moves on mouse move, and is finished on mouse up.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Handler&gt; '],[-1,' *\/'],[1,'OpenLayers.Handler.Box = OpenLayers.Class(OpenLayers.Handler, {'],[-1,''],[-1,'    \/** '],[-1,'     * Property: dragHandler '],[-1,'     * {&lt;OpenLayers.Handler.Drag&gt;} '],[-1,'     *\/'],[-1,'    dragHandler: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: boxDivClassName'],[-1,'     * {String} The CSS class to use for drawing the box. Default is'],[-1,'     *     olHandlerBoxZoomBox'],[-1,'     *\/'],[-1,'    boxDivClassName: \'olHandlerBoxZoomBox\','],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: boxOffsets'],[-1,'     * {Object} Caches box offsets from css. This is used by the getBoxOffsets'],[-1,'     * method.'],[-1,'     *\/'],[-1,'    boxOffsets: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler.Box'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} '],[-1,'     * callbacks - {Object} An object with a properties whose values are'],[-1,'     *     functions.  Various callbacks described below.'],[-1,'     * options - {Object} '],[-1,'     *'],[-1,'     * Named callbacks:'],[-1,'     * start - Called when the box drag operation starts.'],[-1,'     * done - Called when the box drag operation is finished.'],[-1,'     *     The callback should expect to receive a single argument, the box '],[-1,'     *     bounds or a pixel. If the box dragging didn\'t span more than a 5 '],[-1,'     *     pixel distance, a pixel will be returned instead of a bounds object.'],[-1,'     *\/'],[-1,'    initialize: function(control, callbacks, options) {'],[0,'        OpenLayers.Handler.prototype.initialize.apply(this, arguments);'],[0,'        this.dragHandler = new OpenLayers.Handler.Drag('],[-1,'            this, '],[-1,'            {'],[-1,'                down: this.startBox, '],[-1,'                move: this.moveBox, '],[-1,'                out: this.removeBox,'],[-1,'                up: this.endBox'],[-1,'            }, '],[-1,'            {keyMask: this.keyMask}'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        OpenLayers.Handler.prototype.destroy.apply(this, arguments);'],[0,'        if (this.dragHandler) {'],[0,'            this.dragHandler.destroy();'],[0,'            this.dragHandler = null;'],[-1,'        }            '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     *\/'],[-1,'    setMap: function (map) {'],[0,'        OpenLayers.Handler.prototype.setMap.apply(this, arguments);'],[0,'        if (this.dragHandler) {'],[0,'            this.dragHandler.setMap(map);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'    * Method: startBox'],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * xy - {&lt;OpenLayers.Pixel&gt;}'],[-1,'    *\/'],[-1,'    startBox: function (xy) {'],[0,'        this.callback(\&quot;start\&quot;, []);'],[0,'        this.zoomBox = OpenLayers.Util.createDiv(\'zoomBox\', {'],[-1,'            x: -9999, y: -9999'],[-1,'        });'],[0,'        this.zoomBox.className = this.boxDivClassName;                                         '],[0,'        this.zoomBox.style.zIndex = this.map.Z_INDEX_BASE[\&quot;Popup\&quot;] - 1;'],[-1,'        '],[0,'        this.map.viewPortDiv.appendChild(this.zoomBox);'],[-1,'        '],[0,'        OpenLayers.Element.addClass('],[-1,'            this.map.viewPortDiv, \&quot;olDrawBox\&quot;'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'    * Method: moveBox'],[-1,'    *\/'],[-1,'    moveBox: function (xy) {'],[0,'        var startX = this.dragHandler.start.x;'],[0,'        var startY = this.dragHandler.start.y;'],[0,'        var deltaX = Math.abs(startX - xy.x);'],[0,'        var deltaY = Math.abs(startY - xy.y);'],[-1,''],[0,'        var offset = this.getBoxOffsets();'],[0,'        this.zoomBox.style.width = (deltaX + offset.width + 1) + \&quot;px\&quot;;'],[0,'        this.zoomBox.style.height = (deltaY + offset.height + 1) + \&quot;px\&quot;;'],[0,'        this.zoomBox.style.left = (xy.x &lt; startX ?'],[-1,'            startX - deltaX - offset.left : startX - offset.left) + \&quot;px\&quot;;'],[0,'        this.zoomBox.style.top = (xy.y &lt; startY ?'],[-1,'            startY - deltaY - offset.top : startY - offset.top) + \&quot;px\&quot;;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'    * Method: endBox'],[-1,'    *\/'],[-1,'    endBox: function(end) {'],[0,'        var result;'],[0,'        if (Math.abs(this.dragHandler.start.x - end.x) &gt; 5 ||    '],[-1,'            Math.abs(this.dragHandler.start.y - end.y) &gt; 5) {   '],[0,'            var start = this.dragHandler.start;'],[0,'            var top = Math.min(start.y, end.y);'],[0,'            var bottom = Math.max(start.y, end.y);'],[0,'            var left = Math.min(start.x, end.x);'],[0,'            var right = Math.max(start.x, end.x);'],[0,'            result = new OpenLayers.Bounds(left, bottom, right, top);'],[-1,'        } else {'],[0,'            result = this.dragHandler.start.clone(); \/\/ i.e. OL.Pixel'],[-1,'        } '],[0,'        this.removeBox();'],[-1,''],[0,'        this.callback(\&quot;done\&quot;, [result]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: removeBox'],[-1,'     * Remove the zoombox from the screen and nullify our reference to it.'],[-1,'     *\/'],[-1,'    removeBox: function() {'],[0,'        this.map.viewPortDiv.removeChild(this.zoomBox);'],[0,'        this.zoomBox = null;'],[0,'        this.boxOffsets = null;'],[0,'        OpenLayers.Element.removeClass('],[-1,'            this.map.viewPortDiv, \&quot;olDrawBox\&quot;'],[-1,'        );'],[-1,''],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: activate'],[-1,'     *\/'],[-1,'    activate: function () {'],[0,'        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {'],[0,'            this.dragHandler.activate();'],[0,'            return true;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: deactivate'],[-1,'     *\/'],[-1,'    deactivate: function () {'],[0,'        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {'],[0,'            if (this.dragHandler.deactivate()) {'],[0,'                if (this.zoomBox) {'],[0,'                    this.removeBox();'],[-1,'                }'],[-1,'            }'],[0,'            return true;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getBoxOffsets'],[-1,'     * Determines border offsets for a box, according to the box model.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} an object with the following offsets:'],[-1,'     *     - left'],[-1,'     *     - right'],[-1,'     *     - top'],[-1,'     *     - bottom'],[-1,'     *     - width'],[-1,'     *     - height'],[-1,'     *\/'],[-1,'    getBoxOffsets: function() {'],[0,'        if (!this.boxOffsets) {'],[-1,'            \/\/ Determine the box model. If the testDiv\'s clientWidth is 3, then'],[-1,'            \/\/ the borders are outside and we are dealing with the w3c box'],[-1,'            \/\/ model. Otherwise, the browser uses the traditional box model and'],[-1,'            \/\/ the borders are inside the box bounds, leaving us with a'],[-1,'            \/\/ clientWidth of 1.'],[0,'            var testDiv = document.createElement(\&quot;div\&quot;);'],[-1,'            \/\/testDiv.style.visibility = \&quot;hidden\&quot;;'],[0,'            testDiv.style.position = \&quot;absolute\&quot;;'],[0,'            testDiv.style.border = \&quot;1px solid black\&quot;;'],[0,'            testDiv.style.width = \&quot;3px\&quot;;'],[0,'            document.body.appendChild(testDiv);'],[0,'            var w3cBoxModel = testDiv.clientWidth == 3;'],[0,'            document.body.removeChild(testDiv);'],[-1,'            '],[0,'            var left = parseInt(OpenLayers.Element.getStyle(this.zoomBox,'],[-1,'                \&quot;border-left-width\&quot;));'],[0,'            var right = parseInt(OpenLayers.Element.getStyle('],[-1,'                this.zoomBox, \&quot;border-right-width\&quot;));'],[0,'            var top = parseInt(OpenLayers.Element.getStyle(this.zoomBox,'],[-1,'                \&quot;border-top-width\&quot;));'],[0,'            var bottom = parseInt(OpenLayers.Element.getStyle('],[-1,'                this.zoomBox, \&quot;border-bottom-width\&quot;));'],[0,'            this.boxOffsets = {'],[-1,'                left: left,'],[-1,'                right: right,'],[-1,'                top: top,'],[-1,'                bottom: bottom,'],[-1,'                width: w3cBoxModel === false ? left + right : 0,'],[-1,'                height: w3cBoxModel === false ? top + bottom : 0'],[-1,'            };'],[-1,'        }'],[0,'        return this.boxOffsets;'],[-1,'    },'],[-1,'  '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler.Box\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/ZoomBox.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Handler\/Box.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.ZoomBox'],[-1,' * The ZoomBox control enables zooming directly to a given extent, by drawing '],[-1,' * a box on the map. The box is drawn by holding down shift, whilst dragging '],[-1,' * the mouse.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.ZoomBox = OpenLayers.Class(OpenLayers.Control, {'],[-1,'    \/**'],[-1,'     * Property: type'],[-1,'     * {OpenLayers.Control.TYPE}'],[-1,'     *\/'],[-1,'    type: OpenLayers.Control.TYPE_TOOL,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: out'],[-1,'     * {Boolean} Should the control be used for zooming out?'],[-1,'     *\/'],[-1,'    out: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: keyMask'],[-1,'     * {Integer} Zoom only occurs if the keyMask matches the combination of '],[-1,'     *     keys down. Use bitwise operators and one or more of the'],[-1,'     *     &lt;OpenLayers.Handler&gt; constants to construct a keyMask. Leave null if '],[-1,'     *     not used mask. Default is null.'],[-1,'     *\/'],[-1,'    keyMask: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: alwaysZoom'],[-1,'     * {Boolean} Always zoom in\/out when box drawn, even if the zoom level does'],[-1,'     * not change.'],[-1,'     *\/'],[-1,'    alwaysZoom: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: zoomOnClick'],[-1,'     * {Boolean} Should we zoom when no box was dragged, i.e. the user only'],[-1,'     * clicked? Default is true.'],[-1,'     *\/'],[-1,'    zoomOnClick: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     *\/    '],[-1,'    draw: function() {'],[0,'        this.handler = new OpenLayers.Handler.Box( this,'],[-1,'                            {done: this.zoomBox}, {keyMask: this.keyMask} );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: zoomBox'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * position - {&lt;OpenLayers.Bounds&gt;} or {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *\/'],[-1,'    zoomBox: function (position) {'],[0,'        if (position instanceof OpenLayers.Bounds) {'],[0,'            var bounds,'],[-1,'                targetCenterPx = position.getCenterPixel();'],[0,'            if (!this.out) {'],[0,'                var minXY = this.map.getLonLatFromPixel({'],[-1,'                    x: position.left,'],[-1,'                    y: position.bottom'],[-1,'                });'],[0,'                var maxXY = this.map.getLonLatFromPixel({'],[-1,'                    x: position.right,'],[-1,'                    y: position.top'],[-1,'                });'],[0,'                bounds = new OpenLayers.Bounds(minXY.lon, minXY.lat,'],[-1,'                                               maxXY.lon, maxXY.lat);'],[-1,'            } else {'],[0,'                var pixWidth = position.right - position.left;'],[0,'                var pixHeight = position.bottom - position.top;'],[0,'                var zoomFactor = Math.min((this.map.size.h \/ pixHeight),'],[-1,'                    (this.map.size.w \/ pixWidth));'],[0,'                var extent = this.map.getExtent();'],[0,'                var center = this.map.getLonLatFromPixel(targetCenterPx);'],[0,'                var xmin = center.lon - (extent.getWidth()\/2)*zoomFactor;'],[0,'                var xmax = center.lon + (extent.getWidth()\/2)*zoomFactor;'],[0,'                var ymin = center.lat - (extent.getHeight()\/2)*zoomFactor;'],[0,'                var ymax = center.lat + (extent.getHeight()\/2)*zoomFactor;'],[0,'                bounds = new OpenLayers.Bounds(xmin, ymin, xmax, ymax);'],[-1,'            }'],[-1,'            \/\/ always zoom in\/out '],[0,'            var lastZoom = this.map.getZoom(),'],[-1,'                size = this.map.getSize(),'],[-1,'                centerPx = {x: size.w \/ 2, y: size.h \/ 2},'],[-1,'                zoom = this.map.getZoomForExtent(bounds),'],[-1,'                oldRes = this.map.getResolution(),'],[-1,'                newRes = this.map.getResolutionForZoom(zoom),'],[-1,'                zoomOriginPx = {'],[-1,'                    x: (oldRes * targetCenterPx.x - newRes * centerPx.x) \/'],[-1,'                        (oldRes - newRes),'],[-1,'                    y: (oldRes * targetCenterPx.y - newRes * centerPx.y) \/'],[-1,'                        (oldRes - newRes)'],[-1,'                };'],[0,'            this.map.zoomTo(zoom, zoomOriginPx);'],[0,'            if (lastZoom == this.map.getZoom() &amp;&amp; this.alwaysZoom == true){ '],[0,'                this.map.zoomTo(lastZoom + (this.out ? -1 : 1)); '],[-1,'            }'],[0,'        } else if (this.zoomOnClick) { \/\/ it\'s a pixel'],[0,'            if (!this.out) {'],[0,'                this.map.zoomTo(this.map.getZoom() + 1, position);'],[-1,'            } else {'],[0,'                this.map.zoomTo(this.map.getZoom() - 1, position);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.ZoomBox\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/DragPan.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Handler\/Drag.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.DragPan'],[-1,' * The DragPan control pans the map with a drag of the mouse.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.DragPan = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/** '],[-1,'     * Property: type'],[-1,'     * {OpenLayers.Control.TYPES}'],[-1,'     *\/'],[-1,'    type: OpenLayers.Control.TYPE_TOOL,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: panned'],[-1,'     * {Boolean} The map moved.'],[-1,'     *\/'],[-1,'    panned: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: interval'],[-1,'     * {Integer} The number of milliseconds that should ellapse before'],[-1,'     *     panning the map again. Defaults to 1 millisecond. In most cases'],[-1,'     *     you won\'t want to change this value. For slow machines\/devices'],[-1,'     *     larger values can be tried out.'],[-1,'     *\/'],[-1,'    interval: 1,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: documentDrag'],[-1,'     * {Boolean} If set to true, mouse dragging will continue even if the'],[-1,'     *     mouse cursor leaves the map viewport. Default is false.'],[-1,'     *\/'],[-1,'    documentDrag: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: kinetic'],[-1,'     * {&lt;OpenLayers.Kinetic&gt;} The OpenLayers.Kinetic object.'],[-1,'     *\/'],[-1,'    kinetic: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: enableKinetic'],[-1,'     * {Boolean} Set this option to enable \&quot;kinetic dragging\&quot;. Can be'],[-1,'     *     set to true or to an object. If set to an object this'],[-1,'     *     object will be passed to the {&lt;OpenLayers.Kinetic&gt;}'],[-1,'     *     constructor. Defaults to true.'],[-1,'     *     To get kinetic dragging, ensure that OpenLayers\/Kinetic.js is'],[-1,'     *     included in your build config.'],[-1,'     *\/'],[-1,'    enableKinetic: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: kineticInterval'],[-1,'     * {Integer} Interval in milliseconds between 2 steps in the \&quot;kinetic'],[-1,'     *     scrolling\&quot;. Applies only if enableKinetic is set. Defaults'],[-1,'     *     to 10 milliseconds.'],[-1,'     *\/'],[-1,'    kineticInterval: 10,'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * Creates a Drag handler, using &lt;panMap&gt; and'],[-1,'     * &lt;panMapDone&gt; as callbacks.'],[-1,'     *\/    '],[-1,'    draw: function() {'],[0,'        if (this.enableKinetic &amp;&amp; OpenLayers.Kinetic) {'],[0,'            var config = {interval: this.kineticInterval};'],[0,'            if(typeof this.enableKinetic === \&quot;object\&quot;) {'],[0,'                config = OpenLayers.Util.extend(config, this.enableKinetic);'],[-1,'            }'],[0,'            this.kinetic = new OpenLayers.Kinetic(config);'],[-1,'        }'],[0,'        this.handler = new OpenLayers.Handler.Drag(this, {'],[-1,'                \&quot;move\&quot;: this.panMap,'],[-1,'                \&quot;done\&quot;: this.panMapDone,'],[-1,'                \&quot;down\&quot;: this.panMapStart'],[-1,'            }, {'],[-1,'                interval: this.interval,'],[-1,'                documentDrag: this.documentDrag'],[-1,'            }'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: panMapStart'],[-1,'     *\/'],[-1,'    panMapStart: function() {'],[0,'        if(this.kinetic) {'],[0,'            this.kinetic.begin();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'    * Method: panMap'],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * xy - {&lt;OpenLayers.Pixel&gt;} Pixel of the mouse position'],[-1,'    *\/'],[-1,'    panMap: function(xy) {'],[0,'        if(this.kinetic) {'],[0,'            this.kinetic.update(xy);'],[-1,'        }'],[0,'        this.panned = true;'],[0,'        this.map.pan('],[-1,'            this.handler.last.x - xy.x,'],[-1,'            this.handler.last.y - xy.y,'],[-1,'            {dragging: true, animate: false}'],[-1,'        );'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: panMapDone'],[-1,'     * Finish the panning operation.  Only call setCenter (through &lt;panMap&gt;)'],[-1,'     *     if the map has actually been moved.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * xy - {&lt;OpenLayers.Pixel&gt;} Pixel of the mouse position'],[-1,'     *\/'],[-1,'    panMapDone: function(xy) {'],[0,'        if(this.panned) {'],[0,'            var res = null;'],[0,'            if (this.kinetic) {'],[0,'                res = this.kinetic.end(xy);'],[-1,'            }'],[0,'            this.map.pan('],[-1,'                this.handler.last.x - xy.x,'],[-1,'                this.handler.last.y - xy.y,'],[-1,'                {dragging: !!res, animate: false}'],[-1,'            );'],[0,'            if (res) {'],[0,'                var self = this;'],[0,'                this.kinetic.move(res, function(x, y, end) {'],[0,'                    self.map.pan(x, y, {dragging: !end, animate: false});'],[-1,'                });'],[-1,'            }'],[0,'            this.panned = false;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.DragPan\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Navigation.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control\/ZoomBox.js'],[-1,' * @requires OpenLayers\/Control\/DragPan.js'],[-1,' * @requires OpenLayers\/Handler\/MouseWheel.js'],[-1,' * @requires OpenLayers\/Handler\/Click.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Navigation'],[-1,' * The navigation control handles map browsing with mouse events (dragging,'],[-1,' *     double-clicking, and scrolling the wheel).  Create a new navigation '],[-1,' *     control with the &lt;OpenLayers.Control.Navigation&gt; control.  '],[-1,' * '],[-1,' *     Note that this control is added to the map by default (if no controls '],[-1,' *     array is sent in the options object to the &lt;OpenLayers.Map&gt; '],[-1,' *     constructor).'],[-1,' * '],[-1,' * Inherits:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.Navigation = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/** '],[-1,'     * Property: dragPan'],[-1,'     * {&lt;OpenLayers.Control.DragPan&gt;} '],[-1,'     *\/'],[-1,'    dragPan: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: dragPanOptions'],[-1,'     * {Object} Options passed to the DragPan control.'],[-1,'     *\/'],[-1,'    dragPanOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: pinchZoom'],[-1,'     * {&lt;OpenLayers.Control.PinchZoom&gt;}'],[-1,'     *\/'],[-1,'    pinchZoom: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: pinchZoomOptions'],[-1,'     * {Object} Options passed to the PinchZoom control.'],[-1,'     *\/'],[-1,'    pinchZoomOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: documentDrag'],[-1,'     * {Boolean} Allow panning of the map by dragging outside map viewport.'],[-1,'     *     Default is false.'],[-1,'     *\/'],[-1,'    documentDrag: false,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: zoomBox'],[-1,'     * {&lt;OpenLayers.Control.ZoomBox&gt;}'],[-1,'     *\/'],[-1,'    zoomBox: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: zoomBoxEnabled'],[-1,'     * {Boolean} Whether the user can draw a box to zoom'],[-1,'     *\/'],[-1,'    zoomBoxEnabled: true, '],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: zoomWheelEnabled'],[-1,'     * {Boolean} Whether the mousewheel should zoom the map'],[-1,'     *\/'],[-1,'    zoomWheelEnabled: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: mouseWheelOptions'],[-1,'     * {Object} Options passed to the MouseWheel control (only useful if'],[-1,'     *     &lt;zoomWheelEnabled&gt; is set to true). Default is no options for maps'],[-1,'     *     with fractionalZoom set to true, otherwise'],[-1,'     *     {cumulative: false, interval: 50, maxDelta: 6} '],[-1,'     *\/'],[-1,'    mouseWheelOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: handleRightClicks'],[-1,'     * {Boolean} Whether or not to handle right clicks. Default is false.'],[-1,'     *\/'],[-1,'    handleRightClicks: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: zoomBoxKeyMask'],[-1,'     * {Integer} &lt;OpenLayers.Handler&gt; key code of the key, which has to be'],[-1,'     *    pressed, while drawing the zoom box with the mouse on the screen. '],[-1,'     *    You should probably set handleRightClicks to true if you use this'],[-1,'     *    with MOD_CTRL, to disable the context menu for machines which use'],[-1,'     *    CTRL-Click as a right click.'],[-1,'     * Default: &lt;OpenLayers.Handler.MOD_SHIFT&gt;'],[-1,'     *\/'],[-1,'    zoomBoxKeyMask: OpenLayers.Handler.MOD_SHIFT,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: autoActivate'],[-1,'     * {Boolean} Activate the control when it is added to a map.  Default is'],[-1,'     *     true.'],[-1,'     *\/'],[-1,'    autoActivate: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.Navigation'],[-1,'     * Create a new navigation control'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *                    the control'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        this.handlers = {};'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     * The destroy method is used to perform any clean up before the control'],[-1,'     * is dereferenced.  Typically this is where event listeners are removed'],[-1,'     * to prevent memory leaks.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.deactivate();'],[-1,''],[0,'        if (this.dragPan) {'],[0,'            this.dragPan.destroy();'],[-1,'        }'],[0,'        this.dragPan = null;'],[-1,''],[0,'        if (this.zoomBox) {'],[0,'            this.zoomBox.destroy();'],[-1,'        }'],[0,'        this.zoomBox = null;'],[-1,''],[0,'        if (this.pinchZoom) {'],[0,'            this.pinchZoom.destroy();'],[-1,'        }'],[0,'        this.pinchZoom = null;'],[-1,''],[0,'        OpenLayers.Control.prototype.destroy.apply(this,arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: activate'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        this.dragPan.activate();'],[0,'        if (this.zoomWheelEnabled) {'],[0,'            this.handlers.wheel.activate();'],[-1,'        }    '],[0,'        this.handlers.click.activate();'],[0,'        if (this.zoomBoxEnabled) {'],[0,'            this.zoomBox.activate();'],[-1,'        }'],[0,'        if (this.pinchZoom) {'],[0,'            this.pinchZoom.activate();'],[-1,'        }'],[0,'        return OpenLayers.Control.prototype.activate.apply(this,arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: deactivate'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        if (this.pinchZoom) {'],[0,'            this.pinchZoom.deactivate();'],[-1,'        }'],[0,'        this.zoomBox.deactivate();'],[0,'        this.dragPan.deactivate();'],[0,'        this.handlers.click.deactivate();'],[0,'        this.handlers.wheel.deactivate();'],[0,'        return OpenLayers.Control.prototype.deactivate.apply(this,arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     *\/'],[-1,'    draw: function() {'],[-1,'        \/\/ disable right mouse context menu for support of right click events'],[0,'        if (this.handleRightClicks) {'],[0,'            this.map.viewPortDiv.oncontextmenu = OpenLayers.Function.False;'],[-1,'        }'],[-1,''],[0,'        var clickCallbacks = { '],[-1,'            \'click\': this.defaultClick,'],[-1,'            \'dblclick\': this.defaultDblClick, '],[-1,'            \'dblrightclick\': this.defaultDblRightClick '],[-1,'        };'],[0,'        var clickOptions = {'],[-1,'            \'double\': true, '],[-1,'            \'stopDouble\': true'],[-1,'        };'],[0,'        this.handlers.click = new OpenLayers.Handler.Click('],[-1,'            this, clickCallbacks, clickOptions'],[-1,'        );'],[0,'        this.dragPan = new OpenLayers.Control.DragPan('],[-1,'            OpenLayers.Util.extend({'],[-1,'                map: this.map,'],[-1,'                documentDrag: this.documentDrag'],[-1,'            }, this.dragPanOptions)'],[-1,'        );'],[0,'        this.zoomBox = new OpenLayers.Control.ZoomBox('],[-1,'                    {map: this.map, keyMask: this.zoomBoxKeyMask});'],[0,'        this.dragPan.draw();'],[0,'        this.zoomBox.draw();'],[0,'        var wheelOptions = this.map.fractionalZoom ? {} : {'],[-1,'            cumulative: false,'],[-1,'            interval: 50,'],[-1,'            maxDelta: 6'],[-1,'        };'],[0,'        this.handlers.wheel = new OpenLayers.Handler.MouseWheel('],[-1,'            this, {up : this.wheelUp, down: this.wheelDown},'],[-1,'            OpenLayers.Util.extend(wheelOptions, this.mouseWheelOptions)'],[-1,'        );'],[0,'        if (OpenLayers.Control.PinchZoom) {'],[0,'            this.pinchZoom = new OpenLayers.Control.PinchZoom('],[-1,'                OpenLayers.Util.extend('],[-1,'                    {map: this.map}, this.pinchZoomOptions));'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: defaultClick'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *\/'],[-1,'    defaultClick: function (evt) {'],[0,'        if (evt.lastTouches &amp;&amp; evt.lastTouches.length == 2) {'],[0,'            this.map.zoomOut();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: defaultDblClick '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    defaultDblClick: function (evt) {'],[0,'        this.map.zoomTo(this.map.zoom + 1, evt.xy);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: defaultDblRightClick '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    defaultDblRightClick: function (evt) {'],[0,'        this.map.zoomTo(this.map.zoom - 1, evt.xy);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: wheelChange  '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     * deltaZ - {Integer}'],[-1,'     *\/'],[-1,'    wheelChange: function(evt, deltaZ) {'],[0,'        if (!this.map.fractionalZoom) {'],[0,'            deltaZ =  Math.round(deltaZ);'],[-1,'        }'],[0,'        var currentZoom = this.map.getZoom(),'],[-1,'            newZoom = currentZoom + deltaZ;'],[0,'        newZoom = Math.max(newZoom, 0);'],[0,'        newZoom = Math.min(newZoom, this.map.getNumZoomLevels());'],[0,'        if (newZoom === currentZoom) {'],[0,'            return;'],[-1,'        }'],[0,'        this.map.zoomTo(newZoom, evt.xy);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: wheelUp'],[-1,'     * User spun scroll wheel up'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     * delta - {Integer}'],[-1,'     *\/'],[-1,'    wheelUp: function(evt, delta) {'],[0,'        this.wheelChange(evt, delta || 1);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: wheelDown'],[-1,'     * User spun scroll wheel down'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     * delta - {Integer}'],[-1,'     *\/'],[-1,'    wheelDown: function(evt, delta) {'],[0,'        this.wheelChange(evt, delta || -1);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: disableZoomBox'],[-1,'     *\/'],[-1,'    disableZoomBox : function() {'],[0,'        this.zoomBoxEnabled = false;'],[0,'        this.zoomBox.deactivate();       '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: enableZoomBox'],[-1,'     *\/'],[-1,'    enableZoomBox : function() {'],[0,'        this.zoomBoxEnabled = true;'],[0,'        if (this.active) {'],[0,'            this.zoomBox.activate();'],[-1,'        }    '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: disableZoomWheel'],[-1,'     *\/'],[-1,'    '],[-1,'    disableZoomWheel : function() {'],[0,'        this.zoomWheelEnabled = false;'],[0,'        this.handlers.wheel.deactivate();       '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: enableZoomWheel'],[-1,'     *\/'],[-1,'    '],[-1,'    enableZoomWheel : function() {'],[0,'        this.zoomWheelEnabled = true;'],[0,'        if (this.active) {'],[0,'            this.handlers.wheel.activate();'],[-1,'        }    '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Navigation\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/DrawFeature.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.DrawFeature'],[-1,' * The DrawFeature control draws point, line or polygon features on a vector'],[-1,' * layer when active.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.DrawFeature = OpenLayers.Class(OpenLayers.Control, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: layer'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;}'],[-1,'     *\/'],[-1,'    layer: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: callbacks'],[-1,'     * {Object} The functions that are sent to the handler for callback'],[-1,'     *\/'],[-1,'    callbacks: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to those from &lt;OpenLayers.Control.events&gt;):'],[-1,'     * featureadded - Triggered when a feature is added'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: multi'],[-1,'     * {Boolean} Cast features to multi-part geometries before passing to the'],[-1,'     *     layer.  Default is false.'],[-1,'     *\/'],[-1,'    multi: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: featureAdded'],[-1,'     * {Function} Called after each feature is added'],[-1,'     *\/'],[-1,'    featureAdded: function() {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: handlerOptions'],[-1,'     * {Object} Used to set non-default properties on the control\'s handler'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.DrawFeature'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;} '],[-1,'     * handler - {&lt;OpenLayers.Handler&gt;} '],[-1,'     * options - {Object} '],[-1,'     *\/'],[-1,'    initialize: function(layer, handler, options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[0,'        this.callbacks = OpenLayers.Util.extend('],[-1,'            {'],[-1,'                done: this.drawFeature,'],[-1,'                modify: function(vertex, feature) {'],[0,'                    this.layer.events.triggerEvent('],[-1,'                        \&quot;sketchmodified\&quot;, {vertex: vertex, feature: feature}'],[-1,'                    );'],[-1,'                },'],[-1,'                create: function(vertex, feature) {'],[0,'                    this.layer.events.triggerEvent('],[-1,'                        \&quot;sketchstarted\&quot;, {vertex: vertex, feature: feature}'],[-1,'                    );'],[-1,'                }'],[-1,'            },'],[-1,'            this.callbacks'],[-1,'        );'],[0,'        this.layer = layer;'],[0,'        this.handlerOptions = this.handlerOptions || {};'],[0,'        this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults('],[-1,'            this.handlerOptions.layerOptions, {'],[-1,'                renderers: layer.renderers, rendererOptions: layer.rendererOptions'],[-1,'            }'],[-1,'        );'],[0,'        if (!(\&quot;multi\&quot; in this.handlerOptions)) {'],[0,'            this.handlerOptions.multi = this.multi;'],[-1,'        }'],[0,'        var sketchStyle = this.layer.styleMap &amp;&amp; this.layer.styleMap.styles.temporary;'],[0,'        if(sketchStyle) {'],[0,'            this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults('],[-1,'                this.handlerOptions.layerOptions,'],[-1,'                {styleMap: new OpenLayers.StyleMap({\&quot;default\&quot;: sketchStyle})}'],[-1,'            );'],[-1,'        }'],[0,'        this.handler = new handler(this, this.callbacks, this.handlerOptions);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawFeature'],[-1,'     *\/'],[-1,'    drawFeature: function(geometry) {'],[0,'        var feature = new OpenLayers.Feature.Vector(geometry);'],[0,'        var proceed = this.layer.events.triggerEvent('],[-1,'            \&quot;sketchcomplete\&quot;, {feature: feature}'],[-1,'        );'],[0,'        if(proceed !== false) {'],[0,'            feature.state = OpenLayers.State.INSERT;'],[0,'            this.layer.addFeatures([feature]);'],[0,'            this.featureAdded(feature);'],[0,'            this.events.triggerEvent(\&quot;featureadded\&quot;,{feature : feature});'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: insertXY'],[-1,'     * Insert a point in the current sketch given x &amp; y coordinates.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * x - {Number} The x-coordinate of the point.'],[-1,'     * y - {Number} The y-coordinate of the point.'],[-1,'     *\/'],[-1,'    insertXY: function(x, y) {'],[0,'        if (this.handler &amp;&amp; this.handler.line) {'],[0,'            this.handler.insertXY(x, y);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: insertDeltaXY'],[-1,'     * Insert a point given offsets from the previously inserted point.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * dx - {Number} The x-coordinate offset of the point.'],[-1,'     * dy - {Number} The y-coordinate offset of the point.'],[-1,'     *\/'],[-1,'    insertDeltaXY: function(dx, dy) {'],[0,'        if (this.handler &amp;&amp; this.handler.line) {'],[0,'            this.handler.insertDeltaXY(dx, dy);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: insertDirectionLength'],[-1,'     * Insert a point in the current sketch given a direction and a length.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * direction - {Number} Degrees clockwise from the positive x-axis.'],[-1,'     * length - {Number} Distance from the previously drawn point.'],[-1,'     *\/'],[-1,'    insertDirectionLength: function(direction, length) {'],[0,'        if (this.handler &amp;&amp; this.handler.line) {'],[0,'            this.handler.insertDirectionLength(direction, length);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: insertDeflectionLength'],[-1,'     * Insert a point in the current sketch given a deflection and a length.'],[-1,'     *     The deflection should be degrees clockwise from the previously '],[-1,'     *     digitized segment.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * deflection - {Number} Degrees clockwise from the previous segment.'],[-1,'     * length - {Number} Distance from the previously drawn point.'],[-1,'     *\/'],[-1,'    insertDeflectionLength: function(deflection, length) {'],[0,'        if (this.handler &amp;&amp; this.handler.line) {'],[0,'            this.handler.insertDeflectionLength(deflection, length);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: undo'],[-1,'     * Remove the most recently added point in the current sketch geometry.'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} An edit was undone.'],[-1,'     *\/'],[-1,'    undo: function() {'],[0,'        return this.handler.undo &amp;&amp; this.handler.undo();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: redo'],[-1,'     * Reinsert the most recently removed point resulting from an &lt;undo&gt; call.'],[-1,'     *     The undo stack is deleted whenever a point is added by other means.'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {Boolean} An edit was redone.'],[-1,'     *\/'],[-1,'    redo: function() {'],[0,'        return this.handler.redo &amp;&amp; this.handler.redo();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: finishSketch'],[-1,'     * Finishes the sketch without including the currently drawn point.'],[-1,'     *     This method can be called to terminate drawing programmatically'],[-1,'     *     instead of waiting for the user to end the sketch.'],[-1,'     *\/'],[-1,'    finishSketch: function() {'],[0,'        this.handler.finishGeometry();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: cancel'],[-1,'     * Cancel the current sketch.  This removes the current sketch and keeps'],[-1,'     *     the drawing control active.'],[-1,'     *\/'],[-1,'    cancel: function() {'],[0,'        this.handler.cancel();'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.DrawFeature\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler\/Polygon.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler\/Path.js'],[-1,' * @requires OpenLayers\/Geometry\/Polygon.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Handler.Polygon'],[-1,' * Handler to draw a polygon on the map.  Polygon is displayed on mouse down,'],[-1,' * moves on mouse move, and is finished on mouse up.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Handler.Path&gt;'],[-1,' *  - &lt;OpenLayers.Handler&gt;'],[-1,' *\/'],[1,'OpenLayers.Handler.Polygon = OpenLayers.Class(OpenLayers.Handler.Path, {'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: holeModifier'],[-1,'     * {String} Key modifier to trigger hole digitizing.  Acceptable values are'],[-1,'     *     \&quot;altKey\&quot;, \&quot;shiftKey\&quot;, or \&quot;ctrlKey\&quot;.  If not set, no hole digitizing'],[-1,'     *     will take place.  Default is null.'],[-1,'     *\/'],[-1,'    holeModifier: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: drawingHole'],[-1,'     * {Boolean} Currently drawing an interior ring.'],[-1,'     *\/'],[-1,'    drawingHole: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: polygon'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    polygon: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler.Polygon'],[-1,'     * Create a Polygon Handler.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} The control that owns this handler'],[-1,'     * callbacks - {Object} An object with a properties whose values are'],[-1,'     *     functions.  Various callbacks described below.'],[-1,'     * options - {Object} An optional object with properties to be set on the'],[-1,'     *           handler'],[-1,'     *'],[-1,'     * Named callbacks:'],[-1,'     * create - Called when a sketch is first created.  Callback called with'],[-1,'     *     the creation point geometry and sketch feature.'],[-1,'     * modify - Called with each move of a vertex with the vertex (point)'],[-1,'     *     geometry and the sketch feature.'],[-1,'     * point - Called as each point is added.  Receives the new point geometry.'],[-1,'     * done - Called when the point drawing is finished.  The callback will'],[-1,'     *     recieve a single argument, the polygon geometry.'],[-1,'     * cancel - Called when the handler is deactivated while drawing.  The'],[-1,'     *     cancel callback will receive a geometry.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createFeature'],[-1,'     * Add temporary geometries'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} The initial pixel location for the new'],[-1,'     *     feature.'],[-1,'     *\/'],[-1,'    createFeature: function(pixel) {'],[0,'        var lonlat = this.layer.getLonLatFromViewPortPx(pixel);'],[0,'        var geometry = new OpenLayers.Geometry.Point('],[-1,'            lonlat.lon, lonlat.lat'],[-1,'        );'],[0,'        this.point = new OpenLayers.Feature.Vector(geometry);'],[0,'        this.line = new OpenLayers.Feature.Vector('],[-1,'            new OpenLayers.Geometry.LinearRing([this.point.geometry])'],[-1,'        );'],[0,'        this.polygon = new OpenLayers.Feature.Vector('],[-1,'            new OpenLayers.Geometry.Polygon([this.line.geometry])'],[-1,'        );'],[0,'        this.callback(\&quot;create\&quot;, [this.point.geometry, this.getSketch()]);'],[0,'        this.point.geometry.clearBounds();'],[0,'        this.layer.addFeatures([this.polygon, this.point], {silent: true});'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: addPoint'],[-1,'     * Add point to geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} The pixel location for the new point.'],[-1,'     *\/'],[-1,'    addPoint: function(pixel) {'],[0,'        if(!this.drawingHole &amp;&amp; this.holeModifier &amp;&amp;'],[-1,'           this.evt &amp;&amp; this.evt[this.holeModifier]) {'],[0,'            var geometry = this.point.geometry;'],[0,'            var features = this.control.layer.features;'],[0,'            var candidate, polygon;'],[-1,'            \/\/ look for intersections, last drawn gets priority'],[0,'            for (var i=features.length-1; i&gt;=0; --i) {'],[0,'                candidate = features[i].geometry;'],[0,'                if ((candidate instanceof OpenLayers.Geometry.Polygon || '],[-1,'                    candidate instanceof OpenLayers.Geometry.MultiPolygon) &amp;&amp; '],[-1,'                    candidate.intersects(geometry)) {'],[0,'                    polygon = features[i];'],[0,'                    this.control.layer.removeFeatures([polygon], {silent: true});'],[0,'                    this.control.layer.events.registerPriority('],[-1,'                        \&quot;sketchcomplete\&quot;, this, this.finalizeInteriorRing'],[-1,'                    );'],[0,'                    this.control.layer.events.registerPriority('],[-1,'                        \&quot;sketchmodified\&quot;, this, this.enforceTopology'],[-1,'                    );'],[0,'                    polygon.geometry.addComponent(this.line.geometry);'],[0,'                    this.polygon = polygon;'],[0,'                    this.drawingHole = true;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        OpenLayers.Handler.Path.prototype.addPoint.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getCurrentPointIndex'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Number} The index of the most recently drawn point.'],[-1,'     *\/'],[-1,'    getCurrentPointIndex: function() {'],[0,'        return this.line.geometry.components.length - 2;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: enforceTopology'],[-1,'     * Simple topology enforcement for drawing interior rings.  Ensures vertices'],[-1,'     *     of interior rings are contained by exterior ring.  Other topology '],[-1,'     *     rules are enforced in &lt;finalizeInteriorRing&gt; to allow drawing of '],[-1,'     *     rings that intersect only during the sketch (e.g. a \&quot;C\&quot; shaped ring'],[-1,'     *     that nearly encloses another ring).'],[-1,'     *\/'],[-1,'    enforceTopology: function(event) {'],[0,'        var point = event.vertex;'],[0,'        var components = this.line.geometry.components;'],[-1,'        \/\/ ensure that vertices of interior ring are contained by exterior ring'],[0,'        if (!this.polygon.geometry.intersects(point)) {'],[0,'            var last = components[components.length-3];'],[0,'            point.x = last.x;'],[0,'            point.y = last.y;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: finishGeometry'],[-1,'     * Finish the geometry and send it back to the control.'],[-1,'     *\/'],[-1,'    finishGeometry: function() {'],[0,'        var index = this.line.geometry.components.length - 2;'],[0,'        this.line.geometry.removeComponent(this.line.geometry.components[index]);'],[0,'        this.removePoint();'],[0,'        this.finalize();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: finalizeInteriorRing'],[-1,'     * Enforces that new ring has some area and doesn\'t contain vertices of any'],[-1,'     *     other rings.'],[-1,'     *\/'],[-1,'    finalizeInteriorRing: function() {'],[0,'        var ring = this.line.geometry;'],[-1,'        \/\/ ensure that ring has some area'],[0,'        var modified = (ring.getArea() !== 0);'],[0,'        if (modified) {'],[-1,'            \/\/ ensure that new ring doesn\'t intersect any other rings'],[0,'            var rings = this.polygon.geometry.components;'],[0,'            for (var i=rings.length-2; i&gt;=0; --i) {'],[0,'                if (ring.intersects(rings[i])) {'],[0,'                    modified = false;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[0,'            if (modified) {'],[-1,'                \/\/ ensure that new ring doesn\'t contain any other rings'],[0,'                var target;'],[0,'                outer: for (var i=rings.length-2; i&gt;0; --i) {'],[0,'                    var points = rings[i].components;'],[0,'                    for (var j=0, jj=points.length; j&lt;jj; ++j) {'],[0,'                        if (ring.containsPoint(points[j])) {'],[0,'                            modified = false;'],[0,'                            break outer;'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        if (modified) {'],[0,'            if (this.polygon.state !== OpenLayers.State.INSERT) {'],[0,'                this.polygon.state = OpenLayers.State.UPDATE;'],[-1,'            }'],[-1,'        } else {'],[0,'            this.polygon.geometry.removeComponent(ring);'],[-1,'        }'],[0,'        this.restoreFeature();'],[0,'        return false;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: cancel'],[-1,'     * Finish the geometry and call the \&quot;cancel\&quot; callback.'],[-1,'     *\/'],[-1,'    cancel: function() {'],[0,'        if (this.drawingHole) {'],[0,'            this.polygon.geometry.removeComponent(this.line.geometry);'],[0,'            this.restoreFeature(true);'],[-1,'        }'],[0,'        return OpenLayers.Handler.Path.prototype.cancel.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: restoreFeature'],[-1,'     * Move the feature from the sketch layer to the target layer.'],[-1,'     *'],[-1,'     * Properties: '],[-1,'     * cancel - {Boolean} Cancel drawing.  If falsey, the \&quot;sketchcomplete\&quot; event'],[-1,'     *     will be fired.'],[-1,'     *\/'],[-1,'    restoreFeature: function(cancel) {'],[0,'        this.control.layer.events.unregister('],[-1,'            \&quot;sketchcomplete\&quot;, this, this.finalizeInteriorRing'],[-1,'        );'],[0,'        this.control.layer.events.unregister('],[-1,'            \&quot;sketchmodified\&quot;, this, this.enforceTopology'],[-1,'        );'],[0,'        this.layer.removeFeatures([this.polygon], {silent: true});'],[0,'        this.control.layer.addFeatures([this.polygon], {silent: true});'],[0,'        this.drawingHole = false;'],[0,'        if (!cancel) {'],[-1,'            \/\/ Re-trigger \&quot;sketchcomplete\&quot; so other listeners can do their'],[-1,'            \/\/ business.  While this is somewhat sloppy (if a listener is '],[-1,'            \/\/ registered with registerPriority - not common - between the start'],[-1,'            \/\/ and end of a single ring drawing - very uncommon - it will be '],[-1,'            \/\/ called twice).'],[-1,'            \/\/ TODO: In 3.0, collapse sketch handlers into geometry specific'],[-1,'            \/\/ drawing controls.'],[0,'            this.control.layer.events.triggerEvent('],[-1,'                \&quot;sketchcomplete\&quot;, {feature : this.polygon}'],[-1,'            );'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroyFeature'],[-1,'     * Destroy temporary geometries'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * force - {Boolean} Destroy even if persist is true.'],[-1,'     *\/'],[-1,'    destroyFeature: function(force) {'],[0,'        OpenLayers.Handler.Path.prototype.destroyFeature.call('],[-1,'            this, force);'],[0,'        this.polygon = null;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawFeature'],[-1,'     * Render geometries on the temporary layer.'],[-1,'     *\/'],[-1,'    drawFeature: function() {'],[0,'        this.layer.drawFeature(this.polygon, this.style);'],[0,'        this.layer.drawFeature(this.point, this.style);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getSketch'],[-1,'     * Return the sketch feature.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    getSketch: function() {'],[0,'        return this.polygon;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getGeometry'],[-1,'     * Return the sketch geometry.  If &lt;multi&gt; is true, this will return'],[-1,'     *     a multi-part geometry.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry.Polygon&gt;}'],[-1,'     *\/'],[-1,'    getGeometry: function() {'],[0,'        var geometry = this.polygon &amp;&amp; this.polygon.geometry;'],[0,'        if(geometry &amp;&amp; this.multi) {'],[0,'            geometry = new OpenLayers.Geometry.MultiPolygon([geometry]);'],[-1,'        }'],[0,'        return geometry;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler.Polygon\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/EditingToolbar.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control\/Panel.js'],[-1,' * @requires OpenLayers\/Control\/Navigation.js'],[-1,' * @requires OpenLayers\/Control\/DrawFeature.js'],[-1,' * @requires OpenLayers\/Handler\/Point.js'],[-1,' * @requires OpenLayers\/Handler\/Path.js'],[-1,' * @requires OpenLayers\/Handler\/Polygon.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.EditingToolbar '],[-1,' * The EditingToolbar is a panel of 4 controls to draw polygons, lines, '],[-1,' * points, or to navigate the map by panning. By default it appears in the '],[-1,' * upper right corner of the map.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control.Panel&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.EditingToolbar = OpenLayers.Class('],[-1,'  OpenLayers.Control.Panel, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: citeCompliant'],[-1,'     * {Boolean} If set to true, coordinates of features drawn in a map extent'],[-1,'     * crossing the date line won\'t exceed the world bounds. Default is false.'],[-1,'     *\/'],[-1,'    citeCompliant: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.EditingToolbar'],[-1,'     * Create an editing toolbar for a given layer. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;} '],[-1,'     * options - {Object} '],[-1,'     *\/'],[-1,'    initialize: function(layer, options) {'],[0,'        OpenLayers.Control.Panel.prototype.initialize.apply(this, [options]);'],[-1,'        '],[0,'        this.addControls('],[-1,'          [ new OpenLayers.Control.Navigation() ]'],[-1,'        );  '],[0,'        var controls = ['],[-1,'            new OpenLayers.Control.DrawFeature(layer, OpenLayers.Handler.Point, {'],[-1,'                displayClass: \'olControlDrawFeaturePoint\','],[-1,'                handlerOptions: {citeCompliant: this.citeCompliant}'],[-1,'            }),'],[-1,'            new OpenLayers.Control.DrawFeature(layer, OpenLayers.Handler.Path, {'],[-1,'                displayClass: \'olControlDrawFeaturePath\','],[-1,'                handlerOptions: {citeCompliant: this.citeCompliant}'],[-1,'            }),'],[-1,'            new OpenLayers.Control.DrawFeature(layer, OpenLayers.Handler.Polygon, {'],[-1,'                displayClass: \'olControlDrawFeaturePolygon\','],[-1,'                handlerOptions: {citeCompliant: this.citeCompliant}'],[-1,'            })'],[-1,'        ];'],[0,'        this.addControls(controls);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * calls the default draw, and then activates mouse defaults.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        var div = OpenLayers.Control.Panel.prototype.draw.apply(this, arguments);'],[0,'        if (this.defaultControl === null) {'],[0,'            this.defaultControl = this.controls[0];'],[-1,'        }'],[0,'        return div;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.EditingToolbar\&quot;'],[-1,'});    '],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMSGetFeatureInfo.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMSGetFeatureInfo'],[-1,' * Class to read GetFeatureInfo responses from Web Mapping Services'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMSGetFeatureInfo = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layerIdentifier'],[-1,'     * {String} All xml nodes containing this search criteria will populate an'],[-1,'     *     internal array of layer nodes.'],[-1,'     *\/ '],[-1,'    layerIdentifier: \'_layer\','],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: featureIdentifier'],[-1,'     * {String} All xml nodes containing this search criteria will populate an '],[-1,'     *     internal array of feature nodes for each layer node found.'],[-1,'     *\/'],[-1,'    featureIdentifier: \'_feature\','],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: gmlFormat'],[-1,'     * {&lt;OpenLayers.Format.GML&gt;} internal GML format for parsing geometries'],[-1,'     *     in msGMLOutput'],[-1,'     *\/'],[-1,'    gmlFormat: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMSGetFeatureInfo'],[-1,'     * Create a new parser for WMS GetFeatureInfo responses'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read WMS GetFeatureInfo data from a string, and return an array of features'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} An array of features.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        var result;'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        var root = data.documentElement;'],[0,'        if(root) {'],[0,'            var scope = this;'],[0,'            var read = this[\&quot;read_\&quot; + root.nodeName];'],[0,'            if(read) {'],[0,'                result = read.call(this, root);'],[-1,'            } else {'],[-1,'                \/\/ fall-back to GML since this is a common output format for WMS'],[-1,'                \/\/ GetFeatureInfo responses'],[0,'                result = new OpenLayers.Format.GML((this.options ? this.options : {})).read(data);'],[-1,'            }'],[-1,'        } else {'],[0,'            result = data;'],[-1,'        }'],[0,'        return result;'],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_msGMLOutput'],[-1,'     * Parse msGMLOutput nodes.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {DOMElement}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array}'],[-1,'     *\/'],[-1,'    read_msGMLOutput: function(data) {'],[0,'        var response = [];'],[0,'        var layerNodes = this.getSiblingNodesByTagCriteria(data,'],[-1,'            this.layerIdentifier);'],[0,'        if (layerNodes) {'],[0,'            for (var i=0, len=layerNodes.length; i&lt;len; ++i) {'],[0,'                var node = layerNodes[i];'],[0,'                var layerName = node.nodeName;'],[0,'                if (node.prefix) {'],[0,'                    layerName = layerName.split(\':\')[1];'],[-1,'                }'],[0,'                var layerName = layerName.replace(this.layerIdentifier, \'\');'],[0,'                var featureNodes = this.getSiblingNodesByTagCriteria(node, '],[-1,'                    this.featureIdentifier);'],[0,'                if (featureNodes) {'],[0,'                    for (var j = 0; j &lt; featureNodes.length; j++) {'],[0,'                        var featureNode = featureNodes[j];'],[0,'                        var geomInfo = this.parseGeometry(featureNode);'],[0,'                        var attributes = this.parseAttributes(featureNode);'],[0,'                        var feature = new OpenLayers.Feature.Vector(geomInfo.geometry, '],[-1,'                            attributes, null);'],[0,'                        feature.bounds = geomInfo.bounds;'],[0,'                        feature.type = layerName;'],[0,'                        response.push(feature);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return response;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: read_FeatureInfoResponse'],[-1,'     * Parse FeatureInfoResponse nodes.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {DOMElement}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array}'],[-1,'     *\/'],[-1,'    read_FeatureInfoResponse: function(data) {'],[0,'        var response = [];'],[0,'        var featureNodes = this.getElementsByTagNameNS(data, \'*\','],[-1,'            \'FIELDS\');'],[-1,''],[0,'        for(var i=0, len=featureNodes.length;i&lt;len;i++) {'],[0,'            var featureNode = featureNodes[i];'],[0,'            var geom = null;'],[-1,''],[-1,'            \/\/ attributes can be actual attributes on the FIELDS tag, '],[-1,'            \/\/ or FIELD children'],[0,'            var attributes = {};'],[0,'            var j;'],[0,'            var jlen = featureNode.attributes.length;'],[0,'            if (jlen &gt; 0) {'],[0,'                for(j=0; j&lt;jlen; j++) {'],[0,'                    var attribute = featureNode.attributes[j];'],[0,'                    attributes[attribute.nodeName] = attribute.nodeValue;'],[-1,'                }'],[-1,'            } else {'],[0,'                var nodes = featureNode.childNodes;'],[0,'                for (j=0, jlen=nodes.length; j&lt;jlen; ++j) {'],[0,'                    var node = nodes[j];'],[0,'                    if (node.nodeType != 3) {'],[0,'                        attributes[node.getAttribute(\&quot;name\&quot;)] = '],[-1,'                            node.getAttribute(\&quot;value\&quot;);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,''],[0,'            response.push('],[-1,'                new OpenLayers.Feature.Vector(geom, attributes, null)'],[-1,'            );'],[-1,'        }'],[0,'        return response;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getSiblingNodesByTagCriteria'],[-1,'     * Recursively searches passed xml node and all it\'s descendant levels for '],[-1,'     *     nodes whose tagName contains the passed search string. This returns an '],[-1,'     *     array of all sibling nodes which match the criteria from the highest '],[-1,'     *     hierarchial level from which a match is found.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} An xml node'],[-1,'     * criteria - {String} Search string which will match some part of a tagName '],[-1,'     *                                       '],[-1,'     * Returns:'],[-1,'     * Array({DOMElement}) An array of sibling xml nodes'],[-1,'     *\/                '],[-1,'    getSiblingNodesByTagCriteria: function(node, criteria){'],[0,'        var nodes = [];'],[0,'        var children, tagName, n, matchNodes, child;'],[0,'        if (node &amp;&amp; node.hasChildNodes()) {'],[0,'            children = node.childNodes;'],[0,'            n = children.length;'],[-1,''],[0,'            for(var k=0; k&lt;n; k++){'],[0,'                child = children[k];'],[0,'                while (child &amp;&amp; child.nodeType != 1) {'],[0,'                    child = child.nextSibling;'],[0,'                    k++;'],[-1,'                }'],[0,'                tagName = (child ? child.nodeName : \'\');'],[0,'                if (tagName.length &gt; 0 &amp;&amp; tagName.indexOf(criteria) &gt; -1) {'],[0,'                    nodes.push(child);'],[-1,'                } else {'],[0,'                    matchNodes = this.getSiblingNodesByTagCriteria('],[-1,'                        child, criteria);'],[-1,''],[0,'                    if(matchNodes.length &gt; 0){'],[0,'                        (nodes.length == 0) ? '],[-1,'                            nodes = matchNodes : nodes.push(matchNodes);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,''],[-1,'        }'],[0,'        return nodes;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseAttributes'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {&lt;DOMElement&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An attributes object.'],[-1,'     * '],[-1,'     * Notes:'],[-1,'     * Assumes that attributes are direct child xml nodes of the passed node'],[-1,'     * and contain only a single text node. '],[-1,'     *\/    '],[-1,'    parseAttributes: function(node){'],[0,'        var attributes = {};'],[0,'        if (node.nodeType == 1) {'],[0,'            var children = node.childNodes;'],[0,'            var n = children.length;'],[0,'            for (var i = 0; i &lt; n; ++i) {'],[0,'                var child = children[i];'],[0,'                if (child.nodeType == 1) {'],[0,'                    var grandchildren = child.childNodes;'],[0,'                    var name = (child.prefix) ?'],[-1,'                        child.nodeName.split(\&quot;:\&quot;)[1] : child.nodeName;'],[0,'                    if (grandchildren.length == 0) {'],[0,'                        attributes[name] = null;'],[0,'                    } else if (grandchildren.length == 1) {'],[0,'                        var grandchild = grandchildren[0];'],[0,'                        if (grandchild.nodeType == 3 ||'],[-1,'                            grandchild.nodeType == 4) {'],[0,'                            var value = grandchild.nodeValue.replace('],[-1,'                                this.regExes.trimSpace, \&quot;\&quot;);'],[0,'                            attributes[name] = value;'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return attributes;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseGeometry'],[-1,'     * Parse the geometry and the feature bounds out of the node using '],[-1,'     *     Format.GML'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {&lt;DOMElement&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object containing the geometry and the feature bounds'],[-1,'    *\/'],[-1,'    parseGeometry: function(node) {'],[-1,'        \/\/ we need to use the old Format.GML parser since we do not know the '],[-1,'        \/\/ geometry name'],[0,'        if (!this.gmlFormat) {'],[0,'            this.gmlFormat = new OpenLayers.Format.GML();'],[-1,'        }'],[0,'        var feature = this.gmlFormat.parseFeature(node);'],[0,'        var geometry, bounds = null;'],[0,'        if (feature) {'],[0,'            geometry = feature.geometry &amp;&amp; feature.geometry.clone();'],[0,'            bounds = feature.bounds &amp;&amp; feature.bounds.clone();'],[0,'            feature.destroy();'],[-1,'        }'],[0,'        return {geometry: geometry, bounds: bounds};'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMSGetFeatureInfo\&quot;'],[-1,'    '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    Rico\/license.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/**'],[-1,' * @license Apache 2 '],[-1,' *  '],[-1,' * Contains portions of Rico &lt;http:\/\/openrico.org\/&gt;'],[-1,' * '],[-1,' * Copyright 2005 Sabre Airline Solutions  '],[-1,' *'],[-1,' * Licensed under the Apache License, Version 2.0 (the \&quot;License\&quot;); you'],[-1,' * may not use this file except in compliance with the License. You'],[-1,' * may obtain a copy of the License at'],[-1,' *'],[-1,' *     http:\/\/www.apache.org\/licenses\/LICENSE-2.0  '],[-1,' *'],[-1,' * Unless required by applicable law or agreed to in writing, software'],[-1,' * distributed under the License is distributed on an \&quot;AS IS\&quot; BASIS,'],[-1,' * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or'],[-1,' * implied. See the License for the specific language governing'],[-1,' * permissions and limitations under the License. '],[-1,' *\/'],[-1,'\/* ======================================================================'],[-1,'    Rico\/Color.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/** '],[-1,' * @requires Rico\/license.js'],[-1,' * @requires OpenLayers\/Console.js'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/BaseTypes\/Element.js'],[-1,' *\/'],[-1,''],[-1,''],[-1,'\/*'],[-1,' * This file has been edited substantially from the Rico-released version by'],[-1,' * the OpenLayers development team.'],[-1,' *\/'],[-1,''],[1,'OpenLayers.Console.warn(\&quot;OpenLayers.Rico is deprecated\&quot;);'],[-1,''],[1,'OpenLayers.Rico = OpenLayers.Rico || {};'],[1,'OpenLayers.Rico.Color = OpenLayers.Class({'],[-1,''],[-1,'   initialize: function(red, green, blue) {'],[0,'      this.rgb = { r: red, g : green, b : blue };'],[-1,'   },'],[-1,''],[-1,'   setRed: function(r) {'],[0,'      this.rgb.r = r;'],[-1,'   },'],[-1,''],[-1,'   setGreen: function(g) {'],[0,'      this.rgb.g = g;'],[-1,'   },'],[-1,''],[-1,'   setBlue: function(b) {'],[0,'      this.rgb.b = b;'],[-1,'   },'],[-1,''],[-1,'   setHue: function(h) {'],[-1,''],[-1,'      \/\/ get an HSB model, and set the new hue...'],[0,'      var hsb = this.asHSB();'],[0,'      hsb.h = h;'],[-1,''],[-1,'      \/\/ convert back to RGB...'],[0,'      this.rgb = OpenLayers.Rico.Color.HSBtoRGB(hsb.h, hsb.s, hsb.b);'],[-1,'   },'],[-1,''],[-1,'   setSaturation: function(s) {'],[-1,'      \/\/ get an HSB model, and set the new hue...'],[0,'      var hsb = this.asHSB();'],[0,'      hsb.s = s;'],[-1,''],[-1,'      \/\/ convert back to RGB and set values...'],[0,'      this.rgb = OpenLayers.Rico.Color.HSBtoRGB(hsb.h, hsb.s, hsb.b);'],[-1,'   },'],[-1,''],[-1,'   setBrightness: function(b) {'],[-1,'      \/\/ get an HSB model, and set the new hue...'],[0,'      var hsb = this.asHSB();'],[0,'      hsb.b = b;'],[-1,''],[-1,'      \/\/ convert back to RGB and set values...'],[0,'      this.rgb = OpenLayers.Rico.Color.HSBtoRGB( hsb.h, hsb.s, hsb.b );'],[-1,'   },'],[-1,''],[-1,'   darken: function(percent) {'],[0,'      var hsb  = this.asHSB();'],[0,'      this.rgb = OpenLayers.Rico.Color.HSBtoRGB(hsb.h, hsb.s, Math.max(hsb.b - percent,0));'],[-1,'   },'],[-1,''],[-1,'   brighten: function(percent) {'],[0,'      var hsb  = this.asHSB();'],[0,'      this.rgb = OpenLayers.Rico.Color.HSBtoRGB(hsb.h, hsb.s, Math.min(hsb.b + percent,1));'],[-1,'   },'],[-1,''],[-1,'   blend: function(other) {'],[0,'      this.rgb.r = Math.floor((this.rgb.r + other.rgb.r)\/2);'],[0,'      this.rgb.g = Math.floor((this.rgb.g + other.rgb.g)\/2);'],[0,'      this.rgb.b = Math.floor((this.rgb.b + other.rgb.b)\/2);'],[-1,'   },'],[-1,''],[-1,'   isBright: function() {'],[0,'      var hsb = this.asHSB();'],[0,'      return this.asHSB().b &gt; 0.5;'],[-1,'   },'],[-1,''],[-1,'   isDark: function() {'],[0,'      return ! this.isBright();'],[-1,'   },'],[-1,''],[-1,'   asRGB: function() {'],[0,'      return \&quot;rgb(\&quot; + this.rgb.r + \&quot;,\&quot; + this.rgb.g + \&quot;,\&quot; + this.rgb.b + \&quot;)\&quot;;'],[-1,'   },'],[-1,''],[-1,'   asHex: function() {'],[0,'      return \&quot;#\&quot; + this.rgb.r.toColorPart() + this.rgb.g.toColorPart() + this.rgb.b.toColorPart();'],[-1,'   },'],[-1,''],[-1,'   asHSB: function() {'],[0,'      return OpenLayers.Rico.Color.RGBtoHSB(this.rgb.r, this.rgb.g, this.rgb.b);'],[-1,'   },'],[-1,''],[-1,'   toString: function() {'],[0,'      return this.asHex();'],[-1,'   }'],[-1,''],[-1,'});'],[-1,''],[1,'OpenLayers.Rico.Color.createFromHex = function(hexCode) {'],[0,'  if(hexCode.length==4) {'],[0,'    var shortHexCode = hexCode; '],[0,'    var hexCode = \'#\';'],[0,'    for(var i=1;i&lt;4;i++) { '],[0,'        hexCode += (shortHexCode.charAt(i) + '],[-1,'shortHexCode.charAt(i)); '],[-1,'    }'],[-1,'  }'],[0,'   if ( hexCode.indexOf(\'#\') == 0 ) {'],[0,'       hexCode = hexCode.substring(1);'],[-1,'   }'],[0,'   var red   = hexCode.substring(0,2);'],[0,'   var green = hexCode.substring(2,4);'],[0,'   var blue  = hexCode.substring(4,6);'],[0,'   return new OpenLayers.Rico.Color( parseInt(red,16), parseInt(green,16), parseInt(blue,16) );'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Factory method for creating a color from the background of'],[-1,' * an HTML element.'],[-1,' *\/'],[1,'OpenLayers.Rico.Color.createColorFromBackground = function(elem) {'],[-1,''],[0,'   var actualColor = '],[-1,'      OpenLayers.Element.getStyle(OpenLayers.Util.getElement(elem), '],[-1,'                                        \&quot;backgroundColor\&quot;);'],[-1,''],[0,'   if ( actualColor == \&quot;transparent\&quot; &amp;&amp; elem.parentNode ) {'],[0,'      return OpenLayers.Rico.Color.createColorFromBackground(elem.parentNode);'],[-1,'   }'],[0,'   if ( actualColor == null ) {'],[0,'      return new OpenLayers.Rico.Color(255,255,255);'],[-1,'   }'],[0,'   if ( actualColor.indexOf(\&quot;rgb(\&quot;) == 0 ) {'],[0,'      var colors = actualColor.substring(4, actualColor.length - 1 );'],[0,'      var colorArray = colors.split(\&quot;,\&quot;);'],[0,'      return new OpenLayers.Rico.Color( parseInt( colorArray[0] ),'],[-1,'                            parseInt( colorArray[1] ),'],[-1,'                            parseInt( colorArray[2] )  );'],[-1,''],[-1,'   }'],[0,'   else if ( actualColor.indexOf(\&quot;#\&quot;) == 0 ) {'],[0,'      return OpenLayers.Rico.Color.createFromHex(actualColor);'],[-1,'   }'],[-1,'   else {'],[0,'      return new OpenLayers.Rico.Color(255,255,255);'],[-1,'   }'],[-1,'};'],[-1,''],[1,'OpenLayers.Rico.Color.HSBtoRGB = function(hue, saturation, brightness) {'],[-1,''],[0,'   var red   = 0;'],[0,'    var green = 0;'],[0,'    var blue  = 0;'],[-1,''],[0,'   if (saturation == 0) {'],[0,'      red = parseInt(brightness * 255.0 + 0.5);'],[0,'       green = red;'],[0,'       blue = red;'],[-1,'    }'],[-1,'    else {'],[0,'      var h = (hue - Math.floor(hue)) * 6.0;'],[0,'      var f = h - Math.floor(h);'],[0,'      var p = brightness * (1.0 - saturation);'],[0,'      var q = brightness * (1.0 - saturation * f);'],[0,'      var t = brightness * (1.0 - (saturation * (1.0 - f)));'],[-1,''],[0,'      switch (parseInt(h)) {'],[-1,'         case 0:'],[0,'            red   = (brightness * 255.0 + 0.5);'],[0,'            green = (t * 255.0 + 0.5);'],[0,'            blue  = (p * 255.0 + 0.5);'],[0,'            break;'],[-1,'         case 1:'],[0,'            red   = (q * 255.0 + 0.5);'],[0,'            green = (brightness * 255.0 + 0.5);'],[0,'            blue  = (p * 255.0 + 0.5);'],[0,'            break;'],[-1,'         case 2:'],[0,'            red   = (p * 255.0 + 0.5);'],[0,'            green = (brightness * 255.0 + 0.5);'],[0,'            blue  = (t * 255.0 + 0.5);'],[0,'            break;'],[-1,'         case 3:'],[0,'            red   = (p * 255.0 + 0.5);'],[0,'            green = (q * 255.0 + 0.5);'],[0,'            blue  = (brightness * 255.0 + 0.5);'],[0,'            break;'],[-1,'         case 4:'],[0,'            red   = (t * 255.0 + 0.5);'],[0,'            green = (p * 255.0 + 0.5);'],[0,'            blue  = (brightness * 255.0 + 0.5);'],[0,'            break;'],[-1,'          case 5:'],[0,'            red   = (brightness * 255.0 + 0.5);'],[0,'            green = (p * 255.0 + 0.5);'],[0,'            blue  = (q * 255.0 + 0.5);'],[0,'            break;'],[-1,'        }'],[-1,'    }'],[-1,''],[0,'   return { r : parseInt(red), g : parseInt(green) , b : parseInt(blue) };'],[-1,'};'],[-1,''],[1,'OpenLayers.Rico.Color.RGBtoHSB = function(r, g, b) {'],[-1,''],[0,'   var hue;'],[0,'   var saturation;'],[0,'   var brightness;'],[-1,''],[0,'   var cmax = (r &gt; g) ? r : g;'],[0,'   if (b &gt; cmax) {'],[0,'      cmax = b;'],[-1,'   }'],[0,'   var cmin = (r &lt; g) ? r : g;'],[0,'   if (b &lt; cmin) {'],[0,'      cmin = b;'],[-1,'   }'],[0,'   brightness = cmax \/ 255.0;'],[0,'   if (cmax != 0) {'],[0,'      saturation = (cmax - cmin)\/cmax;'],[-1,'   } else {'],[0,'      saturation = 0;'],[-1,'   }'],[0,'   if (saturation == 0) {'],[0,'      hue = 0;'],[-1,'   } else {'],[0,'      var redc   = (cmax - r)\/(cmax - cmin);'],[0,'        var greenc = (cmax - g)\/(cmax - cmin);'],[0,'        var bluec  = (cmax - b)\/(cmax - cmin);'],[-1,''],[0,'        if (r == cmax) {'],[0,'           hue = bluec - greenc;'],[0,'        } else if (g == cmax) {'],[0,'           hue = 2.0 + redc - bluec;'],[-1,'      } else {'],[0,'           hue = 4.0 + greenc - redc;'],[-1,'      }'],[0,'        hue = hue \/ 6.0;'],[0,'        if (hue &lt; 0) {'],[0,'           hue = hue + 1.0;'],[-1,'        }'],[-1,'   }'],[-1,''],[0,'   return { h : hue, s : saturation, b : brightness };'],[-1,'};'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    Rico\/Corner.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Console.js'],[-1,' * @requires Rico\/Color.js'],[-1,' *\/'],[-1,''],[-1,''],[-1,'\/*'],[-1,' * This file has been edited substantially from the Rico-released'],[-1,' * version by the OpenLayers development team.'],[-1,' *  '],[-1,' *  Copyright 2005 Sabre Airline Solutions  '],[-1,' *  '],[-1,' *  Licensed under the Apache License, Version 2.0 (the \&quot;License\&quot;);'],[-1,' *  you may not use this file except in compliance with the'],[-1,' *  License. You may obtain a copy of the License at'],[-1,' *  '],[-1,' *         http:\/\/www.apache.org\/licenses\/LICENSE-2.0  '],[-1,' *  '],[-1,' * Unless required by applicable law or agreed to in writing, software'],[-1,' * distributed under the * License is distributed on an \&quot;AS IS\&quot; BASIS,'],[-1,' * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, * either express or'],[-1,' * implied. See the License for the specific language governing'],[-1,' * permissions * and limitations under the License.'],[-1,' *'],[-1,' *\/'],[-1,''],[1,'OpenLayers.Console.warn(\&quot;OpenLayers.Rico is deprecated\&quot;);'],[-1,''],[1,'OpenLayers.Rico = OpenLayers.Rico || {};'],[1,'OpenLayers.Rico.Corner = {'],[-1,''],[-1,'    round: function(e, options) {'],[0,'        e = OpenLayers.Util.getElement(e);'],[0,'        this._setOptions(options);'],[-1,''],[0,'        var color = this.options.color;'],[0,'        if ( this.options.color == \&quot;fromElement\&quot; ) {'],[0,'            color = this._background(e);'],[-1,'        }'],[0,'        var bgColor = this.options.bgColor;'],[0,'        if ( this.options.bgColor == \&quot;fromParent\&quot; ) {'],[0,'            bgColor = this._background(e.offsetParent);'],[-1,'        }'],[0,'        this._roundCornersImpl(e, color, bgColor);'],[-1,'    },'],[-1,''],[-1,'    \/**   This is a helper function to change the background'],[-1,'    *     color of &lt;div&gt; that has had Rico rounded corners added.'],[-1,'    *'],[-1,'    *     It seems we cannot just set the background color for the'],[-1,'    *     outer &lt;div&gt; so each &lt;span&gt; element used to create the'],[-1,'    *     corners must have its background color set individually.'],[-1,'    *'],[-1,'    * @param {DOM} theDiv - A child of the outer &lt;div&gt; that was'],[-1,'    *                        supplied to the `round` method.'],[-1,'    *'],[-1,'    * @param {String} newColor - The new background color to use.'],[-1,'    *\/'],[-1,'    changeColor: function(theDiv, newColor) {'],[-1,'   '],[0,'        theDiv.style.backgroundColor = newColor;'],[-1,''],[0,'        var spanElements = theDiv.parentNode.getElementsByTagName(\&quot;span\&quot;);'],[-1,'        '],[0,'        for (var currIdx = 0; currIdx &lt; spanElements.length; currIdx++) {'],[0,'            spanElements[currIdx].style.backgroundColor = newColor;'],[-1,'        }'],[-1,'    }, '],[-1,''],[-1,''],[-1,'    \/**   This is a helper function to change the background'],[-1,'    *     opacity of &lt;div&gt; that has had Rico rounded corners added.'],[-1,'    *'],[-1,'    *     See changeColor (above) for algorithm explanation'],[-1,'    *'],[-1,'    * @param {DOM} theDiv A child of the outer &lt;div&gt; that was'],[-1,'    *                        supplied to the `round` method.'],[-1,'    *'],[-1,'    * @param {int} newOpacity The new opacity to use (0-1).'],[-1,'    *\/'],[-1,'    changeOpacity: function(theDiv, newOpacity) {'],[-1,'   '],[0,'        var mozillaOpacity = newOpacity;'],[0,'        var ieOpacity = \'alpha(opacity=\' + newOpacity * 100 + \')\';'],[-1,'        '],[0,'        theDiv.style.opacity = mozillaOpacity;'],[0,'        theDiv.style.filter = ieOpacity;'],[-1,''],[0,'        var spanElements = theDiv.parentNode.getElementsByTagName(\&quot;span\&quot;);'],[-1,'        '],[0,'        for (var currIdx = 0; currIdx &lt; spanElements.length; currIdx++) {'],[0,'            spanElements[currIdx].style.opacity = mozillaOpacity;'],[0,'            spanElements[currIdx].style.filter = ieOpacity;'],[-1,'        }'],[-1,''],[-1,'    },'],[-1,''],[-1,'    \/** this function takes care of redoing the rico cornering'],[-1,'    *    '],[-1,'    *    you can\'t just call updateRicoCorners() again and pass it a '],[-1,'    *    new options string. you have to first remove the divs that '],[-1,'    *    rico puts on top and below the content div.'],[-1,'    *'],[-1,'    * @param {DOM} theDiv - A child of the outer &lt;div&gt; that was'],[-1,'    *                        supplied to the `round` method.'],[-1,'    *'],[-1,'    * @param {Object} options - list of options'],[-1,'    *\/'],[-1,'    reRound: function(theDiv, options) {'],[-1,''],[0,'        var topRico = theDiv.parentNode.childNodes[0];'],[-1,'        \/\/theDiv would be theDiv.parentNode.childNodes[1]'],[0,'        var bottomRico = theDiv.parentNode.childNodes[2];'],[-1,'       '],[0,'        theDiv.parentNode.removeChild(topRico);'],[0,'        theDiv.parentNode.removeChild(bottomRico); '],[-1,''],[0,'        this.round(theDiv.parentNode, options);'],[-1,'    }, '],[-1,''],[-1,'   _roundCornersImpl: function(e, color, bgColor) {'],[0,'      if(this.options.border) {'],[0,'         this._renderBorder(e,bgColor);'],[-1,'      }'],[0,'      if(this._isTopRounded()) {'],[0,'         this._roundTopCorners(e,color,bgColor);'],[-1,'      }'],[0,'      if(this._isBottomRounded()) {'],[0,'         this._roundBottomCorners(e,color,bgColor);'],[-1,'      }'],[-1,'   },'],[-1,''],[-1,'   _renderBorder: function(el,bgColor) {'],[0,'      var borderValue = \&quot;1px solid \&quot; + this._borderColor(bgColor);'],[0,'      var borderL = \&quot;border-left: \&quot;  + borderValue;'],[0,'      var borderR = \&quot;border-right: \&quot; + borderValue;'],[0,'      var style   = \&quot;style=\'\&quot; + borderL + \&quot;;\&quot; + borderR +  \&quot;\'\&quot;;'],[0,'      el.innerHTML = \&quot;&lt;div \&quot; + style + \&quot;&gt;\&quot; + el.innerHTML + \&quot;&lt;\/div&gt;\&quot;;'],[-1,'   },'],[-1,''],[-1,'   _roundTopCorners: function(el, color, bgColor) {'],[0,'      var corner = this._createCorner(bgColor);'],[0,'      for(var i=0 ; i &lt; this.options.numSlices ; i++ ) {'],[0,'         corner.appendChild(this._createCornerSlice(color,bgColor,i,\&quot;top\&quot;));'],[-1,'      }'],[0,'      el.style.paddingTop = 0;'],[0,'      el.insertBefore(corner,el.firstChild);'],[-1,'   },'],[-1,''],[-1,'   _roundBottomCorners: function(el, color, bgColor) {'],[0,'      var corner = this._createCorner(bgColor);'],[0,'      for(var i=(this.options.numSlices-1) ; i &gt;= 0 ; i-- ) {'],[0,'         corner.appendChild(this._createCornerSlice(color,bgColor,i,\&quot;bottom\&quot;));'],[-1,'      }'],[0,'      el.style.paddingBottom = 0;'],[0,'      el.appendChild(corner);'],[-1,'   },'],[-1,''],[-1,'   _createCorner: function(bgColor) {'],[0,'      var corner = document.createElement(\&quot;div\&quot;);'],[0,'      corner.style.backgroundColor = (this._isTransparent() ? \&quot;transparent\&quot; : bgColor);'],[0,'      return corner;'],[-1,'   },'],[-1,''],[-1,'   _createCornerSlice: function(color,bgColor, n, position) {'],[0,'      var slice = document.createElement(\&quot;span\&quot;);'],[-1,''],[0,'      var inStyle = slice.style;'],[0,'      inStyle.backgroundColor = color;'],[0,'      inStyle.display  = \&quot;block\&quot;;'],[0,'      inStyle.height   = \&quot;1px\&quot;;'],[0,'      inStyle.overflow = \&quot;hidden\&quot;;'],[0,'      inStyle.fontSize = \&quot;1px\&quot;;'],[-1,''],[0,'      var borderColor = this._borderColor(color,bgColor);'],[0,'      if ( this.options.border &amp;&amp; n == 0 ) {'],[0,'         inStyle.borderTopStyle    = \&quot;solid\&quot;;'],[0,'         inStyle.borderTopWidth    = \&quot;1px\&quot;;'],[0,'         inStyle.borderLeftWidth   = \&quot;0px\&quot;;'],[0,'         inStyle.borderRightWidth  = \&quot;0px\&quot;;'],[0,'         inStyle.borderBottomWidth = \&quot;0px\&quot;;'],[0,'         inStyle.height            = \&quot;0px\&quot;; \/\/ assumes css compliant box model'],[0,'         inStyle.borderColor       = borderColor;'],[-1,'      }'],[0,'      else if(borderColor) {'],[0,'         inStyle.borderColor = borderColor;'],[0,'         inStyle.borderStyle = \&quot;solid\&quot;;'],[0,'         inStyle.borderWidth = \&quot;0px 1px\&quot;;'],[-1,'      }'],[-1,''],[0,'      if ( !this.options.compact &amp;&amp; (n == (this.options.numSlices-1)) ) {'],[0,'         inStyle.height = \&quot;2px\&quot;;'],[-1,'      }'],[0,'      this._setMargin(slice, n, position);'],[0,'      this._setBorder(slice, n, position);'],[0,'      return slice;'],[-1,'   },'],[-1,''],[-1,'   _setOptions: function(options) {'],[0,'      this.options = {'],[-1,'         corners : \&quot;all\&quot;,'],[-1,'         color   : \&quot;fromElement\&quot;,'],[-1,'         bgColor : \&quot;fromParent\&quot;,'],[-1,'         blend   : true,'],[-1,'         border  : false,'],[-1,'         compact : false'],[-1,'      };'],[0,'      OpenLayers.Util.extend(this.options, options || {});'],[-1,''],[0,'      this.options.numSlices = this.options.compact ? 2 : 4;'],[0,'      if ( this._isTransparent() ) {'],[0,'         this.options.blend = false;'],[-1,'      }'],[-1,'   },'],[-1,''],[-1,'   _whichSideTop: function() {'],[0,'      if ( this._hasString(this.options.corners, \&quot;all\&quot;, \&quot;top\&quot;) ) {'],[0,'         return \&quot;\&quot;;'],[-1,'      }'],[0,'      if ( this.options.corners.indexOf(\&quot;tl\&quot;) &gt;= 0 &amp;&amp; this.options.corners.indexOf(\&quot;tr\&quot;) &gt;= 0 ) {'],[0,'         return \&quot;\&quot;;'],[-1,'      }'],[0,'      if (this.options.corners.indexOf(\&quot;tl\&quot;) &gt;= 0) {'],[0,'         return \&quot;left\&quot;;'],[0,'      } else if (this.options.corners.indexOf(\&quot;tr\&quot;) &gt;= 0) {'],[0,'          return \&quot;right\&quot;;'],[-1,'      }'],[0,'      return \&quot;\&quot;;'],[-1,'   },'],[-1,''],[-1,'   _whichSideBottom: function() {'],[0,'      if ( this._hasString(this.options.corners, \&quot;all\&quot;, \&quot;bottom\&quot;) ) {'],[0,'         return \&quot;\&quot;;'],[-1,'      }'],[0,'      if ( this.options.corners.indexOf(\&quot;bl\&quot;)&gt;=0 &amp;&amp; this.options.corners.indexOf(\&quot;br\&quot;)&gt;=0 ) {'],[0,'         return \&quot;\&quot;;'],[-1,'      }'],[-1,''],[0,'      if(this.options.corners.indexOf(\&quot;bl\&quot;) &gt;=0) {'],[0,'         return \&quot;left\&quot;;'],[0,'      } else if(this.options.corners.indexOf(\&quot;br\&quot;)&gt;=0) {'],[0,'         return \&quot;right\&quot;;'],[-1,'      }'],[0,'      return \&quot;\&quot;;'],[-1,'   },'],[-1,''],[-1,'   _borderColor : function(color,bgColor) {'],[0,'      if ( color == \&quot;transparent\&quot; ) {'],[0,'         return bgColor;'],[0,'      } else if ( this.options.border ) {'],[0,'         return this.options.border;'],[0,'      } else if ( this.options.blend ) {'],[0,'         return this._blend( bgColor, color );'],[-1,'      } else {'],[0,'         return \&quot;\&quot;;'],[-1,'      }'],[-1,'   },'],[-1,''],[-1,''],[-1,'   _setMargin: function(el, n, corners) {'],[0,'      var marginSize = this._marginSize(n);'],[0,'      var whichSide = corners == \&quot;top\&quot; ? this._whichSideTop() : this._whichSideBottom();'],[-1,''],[0,'      if ( whichSide == \&quot;left\&quot; ) {'],[0,'         el.style.marginLeft = marginSize + \&quot;px\&quot;; el.style.marginRight = \&quot;0px\&quot;;'],[-1,'      }'],[0,'      else if ( whichSide == \&quot;right\&quot; ) {'],[0,'         el.style.marginRight = marginSize + \&quot;px\&quot;; el.style.marginLeft  = \&quot;0px\&quot;;'],[-1,'      }'],[-1,'      else {'],[0,'         el.style.marginLeft = marginSize + \&quot;px\&quot;; el.style.marginRight = marginSize + \&quot;px\&quot;;'],[-1,'      }'],[-1,'   },'],[-1,''],[-1,'   _setBorder: function(el,n,corners) {'],[0,'      var borderSize = this._borderSize(n);'],[0,'      var whichSide = corners == \&quot;top\&quot; ? this._whichSideTop() : this._whichSideBottom();'],[0,'      if ( whichSide == \&quot;left\&quot; ) {'],[0,'         el.style.borderLeftWidth = borderSize + \&quot;px\&quot;; el.style.borderRightWidth = \&quot;0px\&quot;;'],[-1,'      }'],[0,'      else if ( whichSide == \&quot;right\&quot; ) {'],[0,'         el.style.borderRightWidth = borderSize + \&quot;px\&quot;; el.style.borderLeftWidth  = \&quot;0px\&quot;;'],[-1,'      }'],[-1,'      else {'],[0,'         el.style.borderLeftWidth = borderSize + \&quot;px\&quot;; el.style.borderRightWidth = borderSize + \&quot;px\&quot;;'],[-1,'      }'],[0,'      if (this.options.border != false) {'],[0,'        el.style.borderLeftWidth = borderSize + \&quot;px\&quot;; el.style.borderRightWidth = borderSize + \&quot;px\&quot;;'],[-1,'      }'],[-1,'   },'],[-1,''],[-1,'   _marginSize: function(n) {'],[0,'      if ( this._isTransparent() ) {'],[0,'         return 0;'],[-1,'      }'],[0,'      var marginSizes          = [ 5, 3, 2, 1 ];'],[0,'      var blendedMarginSizes   = [ 3, 2, 1, 0 ];'],[0,'      var compactMarginSizes   = [ 2, 1 ];'],[0,'      var smBlendedMarginSizes = [ 1, 0 ];'],[-1,''],[0,'      if ( this.options.compact &amp;&amp; this.options.blend ) {'],[0,'         return smBlendedMarginSizes[n];'],[0,'      } else if ( this.options.compact ) {'],[0,'         return compactMarginSizes[n];'],[0,'      } else if ( this.options.blend ) {'],[0,'         return blendedMarginSizes[n];'],[-1,'      } else {'],[0,'         return marginSizes[n];'],[-1,'      }'],[-1,'   },'],[-1,''],[-1,'   _borderSize: function(n) {'],[0,'      var transparentBorderSizes = [ 5, 3, 2, 1 ];'],[0,'      var blendedBorderSizes     = [ 2, 1, 1, 1 ];'],[0,'      var compactBorderSizes     = [ 1, 0 ];'],[0,'      var actualBorderSizes      = [ 0, 2, 0, 0 ];'],[-1,''],[0,'      if ( this.options.compact &amp;&amp; (this.options.blend || this._isTransparent()) ) {'],[0,'         return 1;'],[0,'      } else if ( this.options.compact ) {'],[0,'         return compactBorderSizes[n];'],[0,'      } else if ( this.options.blend ) {'],[0,'         return blendedBorderSizes[n];'],[0,'      } else if ( this.options.border ) {'],[0,'         return actualBorderSizes[n];'],[0,'      } else if ( this._isTransparent() ) {'],[0,'         return transparentBorderSizes[n];'],[-1,'      }'],[0,'      return 0;'],[-1,'   },'],[-1,''],[0,'   _hasString: function(str) { for(var i=1 ; i&lt;arguments.length ; i++) if (str.indexOf(arguments[i]) &gt;= 0) { return true; } return false; },'],[0,'   _blend: function(c1, c2) { var cc1 = OpenLayers.Rico.Color.createFromHex(c1); cc1.blend(OpenLayers.Rico.Color.createFromHex(c2)); return cc1; },'],[0,'   _background: function(el) { try { return OpenLayers.Rico.Color.createColorFromBackground(el).asHex(); } catch(err) { return \&quot;#ffffff\&quot;; } },'],[0,'   _isTransparent: function() { return this.options.color == \&quot;transparent\&quot;; },'],[0,'   _isTopRounded: function() { return this._hasString(this.options.corners, \&quot;all\&quot;, \&quot;top\&quot;, \&quot;tl\&quot;, \&quot;tr\&quot;); },'],[0,'   _isBottomRounded: function() { return this._hasString(this.options.corners, \&quot;all\&quot;, \&quot;bottom\&quot;, \&quot;bl\&quot;, \&quot;br\&quot;); },'],[0,'   _hasSingleTextChild: function(el) { return el.childNodes.length == 1 &amp;&amp; el.childNodes[0].nodeType == 3; }'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Popup\/AnchoredBubble.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Popup\/Anchored.js'],[-1,' * @requires OpenLayers\/Console.js'],[-1,' * @requires Rico\/Corner.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Popup.AnchoredBubble'],[-1,' * This class is *deprecated*. Use {&lt;OpenLayers.Popup.Anchored&gt;} and'],[-1,' * round corners using CSS3\'s border-radius property.'],[-1,' * '],[-1,' * Inherits from: '],[-1,' *  - &lt;OpenLayers.Popup.Anchored&gt;'],[-1,' *\/'],[1,'OpenLayers.Popup.AnchoredBubble = '],[-1,'  OpenLayers.Class(OpenLayers.Popup.Anchored, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: rounded'],[-1,'     * {Boolean} Has the popup been rounded yet?'],[-1,'     *\/'],[-1,'    rounded: false, '],[-1,'    '],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Popup.AnchoredBubble'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * id - {String}'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     * contentSize - {&lt;OpenLayers.Size&gt;}'],[-1,'     * contentHTML - {String}'],[-1,'     * anchor - {Object} Object to which we\'ll anchor the popup. Must expose '],[-1,'     *     a \'size\' (&lt;OpenLayers.Size&gt;) and \'offset\' (&lt;OpenLayers.Pixel&gt;) '],[-1,'     *     (Note that this is generally an &lt;OpenLayers.Icon&gt;).'],[-1,'     * closeBox - {Boolean}'],[-1,'     * closeBoxCallback - {Function} Function to be called on closeBox click.'],[-1,'     *\/'],[-1,'    initialize:function(id, lonlat, contentSize, contentHTML, anchor, closeBox,'],[-1,'                        closeBoxCallback) {'],[-1,''],[0,'        OpenLayers.Console.warn(\'AnchoredBubble is deprecated\');'],[-1,'        '],[0,'        this.padding = new OpenLayers.Bounds('],[-1,'            0, OpenLayers.Popup.AnchoredBubble.CORNER_SIZE,'],[-1,'            0, OpenLayers.Popup.AnchoredBubble.CORNER_SIZE'],[-1,'        );'],[0,'        OpenLayers.Popup.Anchored.prototype.initialize.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: draw'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} Reference to a div that contains the drawn popup.'],[-1,'     *\/'],[-1,'    draw: function(px) {'],[-1,'        '],[0,'        OpenLayers.Popup.Anchored.prototype.draw.apply(this, arguments);'],[-1,''],[0,'        this.setContentHTML();'],[-1,'        '],[-1,'        \/\/set the popup color and opacity           '],[0,'        this.setBackgroundColor(); '],[0,'        this.setOpacity();'],[-1,''],[0,'        return this.div;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: updateRelativePosition'],[-1,'     * The popup has been moved to a new relative location, in which case'],[-1,'     *     we will want to re-do the rico corners.'],[-1,'     *\/'],[-1,'    updateRelativePosition: function() {'],[0,'        this.setRicoCorners();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setSize'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * contentSize - {&lt;OpenLayers.Size&gt;} the new size for the popup\'s '],[-1,'     *     contents div (in pixels).'],[-1,'     *\/'],[-1,'    setSize:function(contentSize) { '],[0,'        OpenLayers.Popup.Anchored.prototype.setSize.apply(this, arguments);'],[-1,''],[0,'        this.setRicoCorners();'],[-1,'    },  '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setBackgroundColor'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * color - {String}'],[-1,'     *\/'],[-1,'    setBackgroundColor:function(color) { '],[0,'        if (color != undefined) {'],[0,'            this.backgroundColor = color; '],[-1,'        }'],[-1,'        '],[0,'        if (this.div != null) {'],[0,'            if (this.contentDiv != null) {'],[0,'                this.div.style.background = \&quot;transparent\&quot;;'],[0,'                OpenLayers.Rico.Corner.changeColor(this.groupDiv, '],[-1,'                                                   this.backgroundColor);'],[-1,'            }'],[-1,'        }'],[-1,'    },  '],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setOpacity'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * opacity - {float}'],[-1,'     *\/'],[-1,'    setOpacity:function(opacity) { '],[0,'        OpenLayers.Popup.Anchored.prototype.setOpacity.call(this, opacity);'],[-1,'        '],[0,'        if (this.div != null) {'],[0,'            if (this.groupDiv != null) {'],[0,'                OpenLayers.Rico.Corner.changeOpacity(this.groupDiv, '],[-1,'                                                     this.opacity);'],[-1,'            }'],[-1,'        }'],[-1,'    },  '],[-1,' '],[-1,'    \/** '],[-1,'     * Method: setBorder'],[-1,'     * Always sets border to 0. Bubble Popups can not have a border.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * border - {Integer}'],[-1,'     *\/'],[-1,'    setBorder:function(border) { '],[0,'        this.border = 0;'],[-1,'    },      '],[-1,' '],[-1,'    \/** '],[-1,'     * Method: setRicoCorners'],[-1,'     * Update RICO corners according to the popup\'s current relative postion.'],[-1,'     *\/'],[-1,'    setRicoCorners:function() {'],[-1,'    '],[0,'        var corners = this.getCornersToRound(this.relativePosition);'],[0,'        var options = {corners: corners,'],[-1,'                         color: this.backgroundColor,'],[-1,'                       bgColor: \&quot;transparent\&quot;,'],[-1,'                         blend: false};'],[-1,''],[0,'        if (!this.rounded) {'],[0,'            OpenLayers.Rico.Corner.round(this.div, options);'],[0,'            this.rounded = true;'],[-1,'        } else {'],[0,'            OpenLayers.Rico.Corner.reRound(this.groupDiv, options);'],[-1,'            \/\/set the popup color and opacity'],[0,'            this.setBackgroundColor(); '],[0,'            this.setOpacity();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: getCornersToRound'],[-1,'     *  '],[-1,'     * Returns:'],[-1,'     * {String} The proper corners string (\&quot;tr tl bl br\&quot;) for rico to round.'],[-1,'     *\/'],[-1,'    getCornersToRound:function() {'],[-1,''],[0,'        var corners = [\'tl\', \'tr\', \'bl\', \'br\'];'],[-1,''],[-1,'        \/\/we want to round all the corners _except_ the opposite one. '],[0,'        var corner = OpenLayers.Bounds.oppositeQuadrant(this.relativePosition);'],[0,'        OpenLayers.Util.removeItem(corners, corner);'],[-1,''],[0,'        return corners.join(\&quot; \&quot;);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Popup.AnchoredBubble\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Constant: CORNER_SIZE'],[-1,' * {Integer} 5. Border space for the RICO corners.'],[-1,' *\/'],[1,'OpenLayers.Popup.AnchoredBubble.CORNER_SIZE = 5;'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Strategy\/BBOX.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Strategy.js'],[-1,' * @requires OpenLayers\/Filter\/Spatial.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Strategy.BBOX'],[-1,' * A simple strategy that reads new features when the viewport invalidates'],[-1,' *     some bounds.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Strategy&gt;'],[-1,' *\/'],[1,'OpenLayers.Strategy.BBOX = OpenLayers.Class(OpenLayers.Strategy, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: bounds'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} The current data bounds (in the same projection'],[-1,'     *     as the layer - not always the same projection as the map).'],[-1,'     *\/'],[-1,'    bounds: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: resolution '],[-1,'     * {Float} The current data resolution. '],[-1,'     *\/ '],[-1,'    resolution: null, '],[-1,'           '],[-1,'    \/**'],[-1,'     * APIProperty: ratio'],[-1,'     * {Float} The ratio of the data bounds to the viewport bounds (in each'],[-1,'     *     dimension).  Default is 2.'],[-1,'     *\/'],[-1,'    ratio: 2,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: resFactor '],[-1,'     * {Float} Optional factor used to determine when previously requested '],[-1,'     *     features are invalid.  If set, the resFactor will be compared to the'],[-1,'     *     resolution of the previous request to the current map resolution.'],[-1,'     *     If resFactor &gt; (old \/ new) and 1\/resFactor &lt; (old \/ new).  If you'],[-1,'     *     set a resFactor of 1, data will be requested every time the'],[-1,'     *     resolution changes.  If you set a resFactor of 3, data will be'],[-1,'     *     requested if the old resolution is 3 times the new, or if the new is'],[-1,'     *     3 times the old.  If the old bounds do not contain the new bounds'],[-1,'     *     new data will always be requested (with or without considering'],[-1,'     *     resFactor). '],[-1,'     *\/ '],[-1,'    resFactor: null, '],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: response'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} The protocol response object returned'],[-1,'     *      by the layer protocol.'],[-1,'     *\/'],[-1,'    response: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Strategy.BBOX'],[-1,'     * Create a new BBOX strategy.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: activate'],[-1,'     * Set up strategy with regard to reading new batches of remote data.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The strategy was successfully activated.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = OpenLayers.Strategy.prototype.activate.call(this);'],[0,'        if(activated) {'],[0,'            this.layer.events.on({'],[-1,'                \&quot;moveend\&quot;: this.update,'],[-1,'                \&quot;refresh\&quot;: this.update,'],[-1,'                \&quot;visibilitychanged\&quot;: this.update,'],[-1,'                scope: this'],[-1,'            });'],[0,'            this.update();'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: deactivate'],[-1,'     * Tear down strategy with regard to reading new batches of remote data.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The strategy was successfully deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);'],[0,'        if(deactivated) {'],[0,'            this.layer.events.un({'],[-1,'                \&quot;moveend\&quot;: this.update,'],[-1,'                \&quot;refresh\&quot;: this.update,'],[-1,'                \&quot;visibilitychanged\&quot;: this.update,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: update'],[-1,'     * Callback function called on \&quot;moveend\&quot; or \&quot;refresh\&quot; layer events.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will determine'],[-1,'     *     the behaviour of this Strategy'],[-1,'     *'],[-1,'     * Valid options include:'],[-1,'     * force - {Boolean} if true, new data must be unconditionally read.'],[-1,'     * noAbort - {Boolean} if true, do not abort previous requests.'],[-1,'     *\/'],[-1,'    update: function(options) {'],[0,'        var mapBounds = this.getMapBounds();'],[0,'        if (mapBounds !== null &amp;&amp; ((options &amp;&amp; options.force) ||'],[-1,'          (this.layer.visibility &amp;&amp; this.layer.calculateInRange() &amp;&amp; this.invalidBounds(mapBounds)))) {'],[0,'            this.calculateBounds(mapBounds);'],[0,'            this.resolution = this.layer.map.getResolution(); '],[0,'            this.triggerRead(options);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getMapBounds'],[-1,'     * Get the map bounds expressed in the same projection as this layer.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;} Map bounds in the projection of the layer.'],[-1,'     *\/'],[-1,'    getMapBounds: function() {'],[0,'        if (this.layer.map === null) {'],[0,'            return null;'],[-1,'        }'],[0,'        var bounds = this.layer.map.getExtent();'],[0,'        if(bounds &amp;&amp; !this.layer.projection.equals('],[-1,'                this.layer.map.getProjectionObject())) {'],[0,'            bounds = bounds.clone().transform('],[-1,'                this.layer.map.getProjectionObject(), this.layer.projection'],[-1,'            );'],[-1,'        }'],[0,'        return bounds;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: invalidBounds'],[-1,'     * Determine whether the previously requested set of features is invalid. '],[-1,'     *     This occurs when the new map bounds do not contain the previously '],[-1,'     *     requested bounds.  In addition, if &lt;resFactor&gt; is set, it will be '],[-1,'     *     considered.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * mapBounds - {&lt;OpenLayers.Bounds&gt;} the current map extent, will be'],[-1,'     *      retrieved from the map object if not provided'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} '],[-1,'     *\/'],[-1,'    invalidBounds: function(mapBounds) {'],[0,'        if(!mapBounds) {'],[0,'            mapBounds = this.getMapBounds();'],[-1,'        }'],[0,'        var invalid = !this.bounds || !this.bounds.containsBounds(mapBounds);'],[0,'        if(!invalid &amp;&amp; this.resFactor) {'],[0,'            var ratio = this.resolution \/ this.layer.map.getResolution();'],[0,'            invalid = (ratio &gt;= this.resFactor || ratio &lt;= (1 \/ this.resFactor));'],[-1,'        }'],[0,'        return invalid;'],[-1,'    },'],[-1,' '],[-1,'    \/**'],[-1,'     * Method: calculateBounds'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * mapBounds - {&lt;OpenLayers.Bounds&gt;} the current map extent, will be'],[-1,'     *      retrieved from the map object if not provided'],[-1,'     *\/'],[-1,'    calculateBounds: function(mapBounds) {'],[0,'        if(!mapBounds) {'],[0,'            mapBounds = this.getMapBounds();'],[-1,'        }'],[0,'        var center = mapBounds.getCenterLonLat();'],[0,'        var dataWidth = mapBounds.getWidth() * this.ratio;'],[0,'        var dataHeight = mapBounds.getHeight() * this.ratio;'],[0,'        this.bounds = new OpenLayers.Bounds('],[-1,'            center.lon - (dataWidth \/ 2),'],[-1,'            center.lat - (dataHeight \/ 2),'],[-1,'            center.lon + (dataWidth \/ 2),'],[-1,'            center.lat + (dataHeight \/ 2)'],[-1,'        );'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: triggerRead'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Additional options for the protocol\'s read method '],[-1,'     *     (optional)'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} The protocol response object'],[-1,'     *      returned by the layer protocol.'],[-1,'     *\/'],[-1,'    triggerRead: function(options) {'],[0,'        if (this.response &amp;&amp; !(options &amp;&amp; options.noAbort === true)) {'],[0,'            this.layer.protocol.abort(this.response);'],[0,'            this.layer.events.triggerEvent(\&quot;loadend\&quot;);'],[-1,'        }'],[0,'        var evt = {filter: this.createFilter()};'],[0,'        this.layer.events.triggerEvent(\&quot;loadstart\&quot;, evt);'],[0,'        this.response = this.layer.protocol.read('],[-1,'            OpenLayers.Util.applyDefaults({'],[-1,'                filter: evt.filter,'],[-1,'                callback: this.merge,'],[-1,'                scope: this'],[-1,'        }, options));'],[-1,'    },'],[-1,' '],[-1,'    \/**'],[-1,'     * Method: createFilter'],[-1,'     * Creates a spatial BBOX filter. If the layer that this strategy belongs'],[-1,'     * to has a filter property, this filter will be combined with the BBOX '],[-1,'     * filter.'],[-1,'     * '],[-1,'     * Returns'],[-1,'     * {&lt;OpenLayers.Filter&gt;} The filter object.'],[-1,'     *\/'],[-1,'    createFilter: function() {'],[0,'        var filter = new OpenLayers.Filter.Spatial({'],[-1,'            type: OpenLayers.Filter.Spatial.BBOX,'],[-1,'            value: this.bounds,'],[-1,'            projection: this.layer.projection'],[-1,'        });'],[0,'        if (this.layer.filter) {'],[0,'            filter = new OpenLayers.Filter.Logical({'],[-1,'                type: OpenLayers.Filter.Logical.AND,'],[-1,'                filters: [this.layer.filter, filter]'],[-1,'            });'],[-1,'        }'],[0,'        return filter;'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * Method: merge'],[-1,'     * Given a list of features, determine which ones to add to the layer.'],[-1,'     *     If the layer projection differs from the map projection, features'],[-1,'     *     will be transformed from the layer projection to the map projection.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * resp - {&lt;OpenLayers.Protocol.Response&gt;} The response object passed'],[-1,'     *      by the protocol.'],[-1,'     *\/'],[-1,'    merge: function(resp) {'],[0,'        this.layer.destroyFeatures();'],[0,'        if (resp.success()) {'],[0,'            var features = resp.features;'],[0,'            if(features &amp;&amp; features.length &gt; 0) {'],[0,'                var remote = this.layer.projection;'],[0,'                var local = this.layer.map.getProjectionObject();'],[0,'                if(!local.equals(remote)) {'],[0,'                    var geom;'],[0,'                    for(var i=0, len=features.length; i&lt;len; ++i) {'],[0,'                        geom = features[i].geometry;'],[0,'                        if(geom) {'],[0,'                            geom.transform(remote, local);'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[0,'                this.layer.addFeatures(features);'],[-1,'            }'],[-1,'        } else {'],[0,'            this.bounds = null;'],[-1,'        }'],[0,'        this.response = null;'],[0,'        this.layer.events.triggerEvent(\&quot;loadend\&quot;, {response: resp});'],[-1,'    },'],[-1,'   '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Strategy.BBOX\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/SLD\/v1_0_0_GeoServer.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/SLD\/v1_0_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.SLD\/v1_0_0_GeoServer'],[-1,' * Read and write SLD version 1.0.0 with GeoServer-specific enhanced options.'],[-1,' * See http:\/\/svn.osgeo.org\/geotools\/trunk\/modules\/extension\/xsd\/xsd-sld\/src\/main\/resources\/org\/geotools\/sld\/bindings\/StyledLayerDescriptor.xsd'],[-1,' * for more information.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.SLD.v1_0_0&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.SLD.v1_0_0_GeoServer = OpenLayers.Class('],[-1,'    OpenLayers.Format.SLD.v1_0_0, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} The specific parser version.'],[-1,'     *\/'],[-1,'    version: \&quot;1.0.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: profile'],[-1,'     * {String} The specific profile'],[-1,'     *\/'],[-1,'    profile: \&quot;GeoServer\&quot;,'],[-1,''],[-1,'   \/**'],[-1,'     * Constructor: OpenLayers.Format.SLD.v1_0_0_GeoServer'],[-1,'     * Create a new parser for GeoServer-enhanced SLD version 1.0.0.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: OpenLayers.Util.applyDefaults({'],[-1,'        \&quot;sld\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;Priority\&quot;: function(node, obj) {'],[0,'                var value = this.readers.ogc._expression.call(this, node);'],[0,'                if (value) {'],[0,'                    obj.priority = value;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;VendorOption\&quot;: function(node, obj) {'],[0,'                if (!obj.vendorOptions) {'],[0,'                    obj.vendorOptions = {};'],[-1,'                }'],[0,'                obj.vendorOptions[node.getAttribute(\&quot;name\&quot;)] = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;TextSymbolizer\&quot;: function(node, rule) {'],[0,'                OpenLayers.Format.SLD.v1_0_0.prototype.readers.sld.TextSymbolizer.apply(this, arguments);'],[0,'                var symbolizer = this.multipleSymbolizers ? rule.symbolizers[rule.symbolizers.length-1] : rule.symbolizer[\&quot;Text\&quot;];'],[0,'                if (symbolizer.graphic === undefined) {'],[0,'                    symbolizer.graphic = false;'],[-1,'                }'],[-1,'            }'],[-1,'        }, OpenLayers.Format.SLD.v1_0_0.prototype.readers[\&quot;sld\&quot;])'],[-1,'    }, OpenLayers.Format.SLD.v1_0_0.prototype.readers),'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: OpenLayers.Util.applyDefaults({'],[-1,'        \&quot;sld\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;Priority\&quot;: function(priority) {'],[0,'                return this.writers.sld._OGCExpression.call('],[-1,'                    this, \&quot;sld:Priority\&quot;, priority'],[-1,'                );'],[-1,'            },'],[-1,'            \&quot;VendorOption\&quot;: function(option) {'],[0,'                return this.createElementNSPlus(\&quot;sld:VendorOption\&quot;, {'],[-1,'                    attributes: {name: option.name},'],[-1,'                    value: option.value'],[-1,'                });'],[-1,'            },'],[-1,'            \&quot;TextSymbolizer\&quot;: function(symbolizer) {'],[0,'                var writers = OpenLayers.Format.SLD.v1_0_0.prototype.writers;'],[0,'                var node = writers[\&quot;sld\&quot;][\&quot;TextSymbolizer\&quot;].apply(this, arguments);'],[0,'                if (symbolizer.graphic !== false &amp;&amp; (symbolizer.externalGraphic || symbolizer.graphicName)) {'],[0,'                    this.writeNode(\&quot;Graphic\&quot;, symbolizer, node);'],[-1,'                }'],[0,'                if (\&quot;priority\&quot; in symbolizer) {'],[0,'                    this.writeNode(\&quot;Priority\&quot;, symbolizer.priority, node);'],[-1,'                }'],[0,'                return this.addVendorOptions(node, symbolizer);'],[-1,'            },'],[-1,'            \&quot;PointSymbolizer\&quot;: function(symbolizer) {'],[0,'                var writers = OpenLayers.Format.SLD.v1_0_0.prototype.writers;'],[0,'                var node = writers[\&quot;sld\&quot;][\&quot;PointSymbolizer\&quot;].apply(this, arguments);'],[0,'                return this.addVendorOptions(node, symbolizer);'],[-1,'            },'],[-1,'            \&quot;LineSymbolizer\&quot;: function(symbolizer) {'],[0,'                var writers = OpenLayers.Format.SLD.v1_0_0.prototype.writers;'],[0,'                var node = writers[\&quot;sld\&quot;][\&quot;LineSymbolizer\&quot;].apply(this, arguments);'],[0,'                return this.addVendorOptions(node, symbolizer);'],[-1,'            },'],[-1,'            \&quot;PolygonSymbolizer\&quot;: function(symbolizer) {'],[0,'                var writers = OpenLayers.Format.SLD.v1_0_0.prototype.writers;'],[0,'                var node = writers[\&quot;sld\&quot;][\&quot;PolygonSymbolizer\&quot;].apply(this, arguments);'],[0,'                return this.addVendorOptions(node, symbolizer);'],[-1,'            }'],[-1,'        }, OpenLayers.Format.SLD.v1_0_0.prototype.writers[\&quot;sld\&quot;])'],[-1,'    }, OpenLayers.Format.SLD.v1_0_0.prototype.writers),'],[-1,''],[-1,'    \/**'],[-1,'     * Method: addVendorOptions'],[-1,'     * Add in the VendorOption tags and return the node again.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} A DOM node.'],[-1,'     * symbolizer - {Object}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} A DOM node.'],[-1,'     *\/'],[-1,'    addVendorOptions: function(node, symbolizer) {'],[0,'        var options = symbolizer.vendorOptions;'],[0,'        if (options) {'],[0,'            for (var key in symbolizer.vendorOptions) {'],[0,'                this.writeNode(\&quot;VendorOption\&quot;, {'],[-1,'                    name: key, '],[-1,'                    value: symbolizer.vendorOptions[key]'],[-1,'                }, node);'],[-1,'            }'],[-1,'        }'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.SLD.v1_0_0_GeoServer\&quot;'],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Protocol\/CSW.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Protocol.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Protocol.CSW'],[-1,' * Used to create a versioned CSW protocol. Default version is 2.0.2.'],[-1,' *\/'],[1,'OpenLayers.Protocol.CSW = function(options) {'],[0,'    options = OpenLayers.Util.applyDefaults('],[-1,'        options, OpenLayers.Protocol.CSW.DEFAULTS'],[-1,'    );'],[0,'    var cls = OpenLayers.Protocol.CSW[\&quot;v\&quot;+options.version.replace(\/\\.\/g, \&quot;_\&quot;)];'],[0,'    if(!cls) {'],[0,'        throw \&quot;Unsupported CSW version: \&quot; + options.version;'],[-1,'    }'],[0,'    return new cls(options);'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Protocol.CSW.DEFAULTS'],[-1,' *\/'],[1,'OpenLayers.Protocol.CSW.DEFAULTS = {'],[-1,'    \&quot;version\&quot;: \&quot;2.0.2\&quot;'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Protocol\/WFS\/v1_1_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Protocol\/WFS\/v1.js'],[-1,' * @requires OpenLayers\/Format\/WFST\/v1_1_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Protocol.WFS.v1_1_0'],[-1,' * A WFS v1.1.0 protocol for vector layers.  Create a new instance with the'],[-1,' *     &lt;OpenLayers.Protocol.WFS.v1_1_0&gt; constructor.'],[-1,' *'],[-1,' * Differences from the v1.0.0 protocol:'],[-1,' *  - uses Filter Encoding 1.1.0 instead of 1.0.0'],[-1,' *  - uses GML 3 instead of 2 if no format is provided'],[-1,' *  '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Protocol.WFS.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Protocol.WFS.v1_1_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} WFS version number.'],[-1,'     *\/'],[-1,'    version: \&quot;1.1.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Protocol.WFS.v1_1_0'],[-1,'     * A class for giving layers WFS v1.1.0 protocol.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *'],[-1,'     * Valid options properties:'],[-1,'     * featureType - {String} Local (without prefix) feature typeName (required).'],[-1,'     * featureNS - {String} Feature namespace (optional).'],[-1,'     * featurePrefix - {String} Feature namespace alias (optional - only used'],[-1,'     *     if featureNS is provided).  Default is \'feature\'.'],[-1,'     * geometryName - {String} Name of geometry attribute.  Default is \'the_geom\'.'],[-1,'     * outputFormat - {String} Optional output format to use for WFS GetFeature'],[-1,'     *     requests. This can be any format advertized by the WFS\'s'],[-1,'     *     GetCapabilities response. If set, an appropriate readFormat also'],[-1,'     *     has to be provided, unless outputFormat is GML3, GML2 or JSON.'],[-1,'     * readFormat - {&lt;OpenLayers.Format&gt;} An appropriate format parser if'],[-1,'     *     outputFormat is none of GML3, GML2 or JSON.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Protocol.WFS.v1.prototype.initialize.apply(this, arguments);'],[0,'        if (this.outputFormat &amp;&amp; !this.readFormat) {'],[0,'            if (this.outputFormat.toLowerCase() == \&quot;gml2\&quot;) {'],[0,'                this.readFormat = new OpenLayers.Format.GML.v2({'],[-1,'                    featureType: this.featureType,'],[-1,'                    featureNS: this.featureNS,'],[-1,'                    geometryName: this.geometryName'],[-1,'                });'],[0,'            } else if (this.outputFormat.toLowerCase() == \&quot;json\&quot;) {'],[0,'                this.readFormat = new OpenLayers.Format.GeoJSON();'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'   '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Protocol.WFS.v1_1_0\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMTSCapabilities.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMTSCapabilities'],[-1,' * Read WMTS Capabilities.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML.VersionedOGC&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMTSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;1.0.0\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;1.0.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: yx'],[-1,'     * {Object} Members in the yx object are used to determine if a CRS URN'],[-1,'     *     corresponds to a CRS with y,x axis order.  Member names are CRS URNs'],[-1,'     *     and values are boolean.  By default, the following CRS URN are'],[-1,'     *     assumed to correspond to a CRS with y,x axis order:'],[-1,'     *'],[-1,'     * * urn:ogc:def:crs:EPSG::4326'],[-1,'     *\/'],[-1,'    yx: {'],[-1,'        \&quot;urn:ogc:def:crs:EPSG::4326\&quot;: true'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMTSCapabilities'],[-1,'     * Create a new parser for WMTS capabilities.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read capabilities data from a string, and return information about'],[-1,'     * the service (offering and observedProperty mostly).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Info about the WMTS Capabilities'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: createLayer'],[-1,'     * Create a WMTS layer given a capabilities object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * capabilities - {Object} The object returned from a &lt;read&gt; call to this'],[-1,'     *     format.'],[-1,'     * config - {Object} Configuration properties for the layer.  Defaults for'],[-1,'     *     the layer will apply if not provided.'],[-1,'     *'],[-1,'     * Required config properties:'],[-1,'     * layer - {String} The layer identifier.'],[-1,'     *'],[-1,'     * Optional config properties:'],[-1,'     * matrixSet - {String} The matrix set identifier, required if there is '],[-1,'     *      more than one matrix set in the layer capabilities.'],[-1,'     * style - {String} The name of the style'],[-1,'     * format - {String} Image format for the layer. Default is the first'],[-1,'     *     format returned in the GetCapabilities response.'],[-1,'     * param - {Object} The dimensions values eg: {\&quot;Year\&quot;: \&quot;2012\&quot;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.WMTS&gt;} A properly configured WMTS layer.  Throws an'],[-1,'     *     error if an incomplete config is provided.  Returns undefined if no'],[-1,'     *     layer could be created with the provided config.'],[-1,'     *\/'],[-1,'    createLayer: function(capabilities, config) {'],[0,'        var layer;'],[-1,''],[-1,'        \/\/ confirm required properties are supplied in config'],[0,'        if (!(\'layer\' in config)) {'],[0,'            throw new Error(\&quot;Missing property \'layer\' in configuration.\&quot;);'],[-1,'        }'],[-1,''],[0,'        var contents = capabilities.contents;'],[-1,''],[-1,'        \/\/ find the layer definition with the given identifier'],[0,'        var layers = contents.layers;'],[0,'        var layerDef;'],[0,'        for (var i=0, ii=contents.layers.length; i&lt;ii; ++i) {'],[0,'            if (contents.layers[i].identifier === config.layer) {'],[0,'                layerDef = contents.layers[i];'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        if (!layerDef) {'],[0,'            throw new Error(\&quot;Layer not found\&quot;);'],[-1,'        }'],[-1,'        '],[0,'        var format = config.format;'],[0,'        if (!format &amp;&amp; layerDef.formats &amp;&amp; layerDef.formats.length) {'],[0,'            format = layerDef.formats[0];'],[-1,'        }'],[-1,''],[-1,'        \/\/ find the matrixSet definition'],[0,'        var matrixSet;'],[0,'        if (config.matrixSet) {'],[0,'            matrixSet = contents.tileMatrixSets[config.matrixSet];'],[0,'        } else if (layerDef.tileMatrixSetLinks.length &gt;= 1) {'],[0,'            matrixSet = contents.tileMatrixSets['],[-1,'                layerDef.tileMatrixSetLinks[0].tileMatrixSet];'],[-1,'        }'],[0,'        if (!matrixSet) {'],[0,'            throw new Error(\&quot;matrixSet not found\&quot;);'],[-1,'        }'],[-1,''],[-1,'        \/\/ get the default style for the layer'],[0,'        var style;'],[0,'        for (var i=0, ii=layerDef.styles.length; i&lt;ii; ++i) {'],[0,'            style = layerDef.styles[i];'],[0,'            if (style.isDefault) {'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        var requestEncoding = config.requestEncoding;'],[0,'        if (!requestEncoding) {'],[0,'            requestEncoding = \&quot;KVP\&quot;;'],[0,'            if (capabilities.operationsMetadata.GetTile.dcp.http) {'],[0,'                var http = capabilities.operationsMetadata.GetTile.dcp.http;'],[-1,'                \/\/ Get first get method'],[0,'                if (http.get[0].constraints) {'],[0,'                    var constraints = http.get[0].constraints;'],[0,'                    var allowedValues = constraints.GetEncoding.allowedValues;'],[-1,''],[-1,'                    \/\/ The OGC documentation is not clear if we should use'],[-1,'                    \/\/ REST or RESTful, ArcGis use RESTful,'],[-1,'                    \/\/ and OpenLayers use REST.'],[0,'                    if (!allowedValues.KVP &amp;&amp;'],[-1,'                            (allowedValues.REST || allowedValues.RESTful)) {'],[0,'                        requestEncoding = \&quot;REST\&quot;;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        var dimensions = [];'],[0,'        var params = config.params || {};'],[-1,'        \/\/ to don\'t overwrite the changes in the applyDefaults'],[0,'        delete config.params;'],[0,'        for (var id = 0, ld = layerDef.dimensions.length ; id &lt; ld ; id++) {'],[0,'            var dimension = layerDef.dimensions[id];'],[0,'            dimensions.push(dimension.identifier);'],[0,'            if (!params.hasOwnProperty(dimension.identifier)) {'],[0,'                params[dimension.identifier] = dimension[\'default\'];'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        var projection = config.projection || matrixSet.supportedCRS.replace('],[-1,'                \/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$\/, \&quot;$1:$3\&quot;);'],[0,'        var units = config.units ||'],[-1,'                (projection === \&quot;EPSG:4326\&quot; ? \&quot;degrees\&quot; : \&quot;m\&quot;);'],[-1,''],[0,'        var resolutions = [];'],[0,'        for (var mid in matrixSet.matrixIds) {'],[0,'            if (matrixSet.matrixIds.hasOwnProperty(mid)) {'],[0,'                resolutions.push('],[-1,'                    matrixSet.matrixIds[mid].scaleDenominator * 0.28E-3 \/'],[-1,'                        OpenLayers.METERS_PER_INCH \/'],[-1,'                        OpenLayers.INCHES_PER_UNIT[units]);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        var url;'],[0,'        if (requestEncoding === \&quot;REST\&quot; &amp;&amp; layerDef.resourceUrls) {'],[0,'            url = [];'],[0,'            var resourceUrls = layerDef.resourceUrls,'],[-1,'                resourceUrl;'],[0,'            for (var t = 0, tt = layerDef.resourceUrls.length; t &lt; tt; ++t) {'],[0,'                resourceUrl = layerDef.resourceUrls[t];'],[0,'                if (resourceUrl.format === format &amp;&amp; resourceUrl.resourceType === \&quot;tile\&quot;) {'],[0,'                    url.push(resourceUrl.template);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'        else {'],[0,'            var httpGet = capabilities.operationsMetadata.GetTile.dcp.http.get;'],[0,'            url = [];'],[0,'            var constraint;'],[0,'            for (var i = 0, ii = httpGet.length; i &lt; ii; i++) {'],[0,'                constraint = httpGet[i].constraints;'],[0,'                if (!constraint || (constraint &amp;&amp; constraint.'],[-1,'                        GetEncoding.allowedValues[requestEncoding])) {'],[0,'                    url.push(httpGet[i].url);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        return new OpenLayers.Layer.WMTS('],[-1,'            OpenLayers.Util.applyDefaults(config, {'],[-1,'                url: url,'],[-1,'                requestEncoding: requestEncoding,'],[-1,'                name: layerDef.title,'],[-1,'                style: style.identifier,'],[-1,'                format: format,'],[-1,'                matrixIds: matrixSet.matrixIds,'],[-1,'                matrixSet: matrixSet.identifier,'],[-1,'                projection: projection,'],[-1,'                units: units,'],[-1,'                resolutions: config.isBaseLayer === false ? undefined :'],[-1,'                    resolutions,'],[-1,'                serverResolutions: resolutions,'],[-1,'                tileFullExtent: matrixSet.bounds,'],[-1,'                dimensions: dimensions,'],[-1,'                params: params'],[-1,'            })'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMTSCapabilities\&quot;'],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/Google\/v3.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Google.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Layer.Google.v3'],[-1,' * '],[-1,' * Mixin providing functionality specific to the Google Maps API v3.'],[-1,' * '],[-1,' * To use this layer, you must include the GMaps v3 API in your html.'],[-1,' * '],[-1,' * Note that this layer configures the google.maps.map object with the'],[-1,' * \&quot;disableDefaultUI\&quot; option set to true. Using UI controls that the Google'],[-1,' * Maps API provides is not supported by the OpenLayers API.'],[-1,' *\/'],[1,'OpenLayers.Layer.Google.v3 = {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: DEFAULTS'],[-1,'     * {Object} It is not recommended to change the properties set here. Note'],[-1,'     * that Google.v3 layers only work when sphericalMercator is set to true.'],[-1,'     * '],[-1,'     * (code)'],[-1,'     * {'],[-1,'     *     sphericalMercator: true,'],[-1,'     *     projection: \&quot;EPSG:900913\&quot;'],[-1,'     * }'],[-1,'     * (end)'],[-1,'     *\/'],[-1,'    DEFAULTS: {'],[-1,'        sphericalMercator: true,'],[-1,'        projection: \&quot;EPSG:900913\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: animationEnabled'],[-1,'     * {Boolean} If set to true, the transition between zoom levels will be'],[-1,'     *     animated (if supported by the GMaps API for the device used). Set to'],[-1,'     *     false to match the zooming experience of other layer types. Default'],[-1,'     *     is true. Note that the GMaps API does not give us control over zoom'],[-1,'     *     animation, so if set to false, when zooming, this will make the'],[-1,'     *     layer temporarily invisible, wait until GMaps reports the map being'],[-1,'     *     idle, and make it visible again. The result will be a blank layer'],[-1,'     *     for a few moments while zooming.'],[-1,'     *\/'],[-1,'    animationEnabled: true, '],[-1,''],[-1,'    \/** '],[-1,'     * Method: loadMapObject'],[-1,'     * Load the GMap and register appropriate event listeners. If we can\'t '],[-1,'     *     load GMap2, then display a warning message.'],[-1,'     *\/'],[-1,'    loadMapObject:function() {'],[0,'        if (!this.type) {'],[0,'            this.type = google.maps.MapTypeId.ROADMAP;'],[-1,'        }'],[0,'        var mapObject;'],[0,'        var cache = OpenLayers.Layer.Google.cache[this.map.id];'],[0,'        if (cache) {'],[-1,'            \/\/ there are already Google layers added to this map'],[0,'            mapObject = cache.mapObject;'],[-1,'            \/\/ increment the layer count'],[0,'            ++cache.count;'],[-1,'        } else {'],[-1,'            \/\/ this is the first Google layer for this map'],[-1,'            \/\/ create GMap'],[0,'            var center = this.map.getCenter();'],[0,'            var container = document.createElement(\'div\');'],[0,'            container.className = \&quot;olForeignContainer\&quot;;'],[0,'            container.style.width = \'100%\';'],[0,'            container.style.height = \'100%\';'],[0,'            mapObject = new google.maps.Map(container, {'],[-1,'                center: center ?'],[-1,'                    new google.maps.LatLng(center.lat, center.lon) :'],[-1,'                    new google.maps.LatLng(0, 0),'],[-1,'                zoom: this.map.getZoom() || 0,'],[-1,'                mapTypeId: this.type,'],[-1,'                disableDefaultUI: true,'],[-1,'                keyboardShortcuts: false,'],[-1,'                draggable: false,'],[-1,'                disableDoubleClickZoom: true,'],[-1,'                scrollwheel: false,'],[-1,'                streetViewControl: false'],[-1,'            });'],[0,'            var googleControl = document.createElement(\'div\');'],[0,'            googleControl.style.width = \'100%\';'],[0,'            googleControl.style.height = \'100%\';'],[0,'            mapObject.controls[google.maps.ControlPosition.TOP_LEFT].push(googleControl);'],[0,'            this.map.div.appendChild(container);'],[-1,'            '],[-1,'            \/\/ cache elements for use by any other google layers added to'],[-1,'            \/\/ this same map'],[0,'            cache = {'],[-1,'                googleControl: googleControl,'],[-1,'                mapObject: mapObject,'],[-1,'                count: 1'],[-1,'            };'],[0,'            OpenLayers.Layer.Google.cache[this.map.id] = cache;'],[-1,'        }'],[0,'        this.mapObject = mapObject;'],[0,'        this.setGMapVisibility(this.visibility);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: onMapResize'],[-1,'     *\/'],[-1,'    onMapResize: function() {'],[0,'        if (this.visibility) {'],[0,'            google.maps.event.trigger(this.mapObject, \&quot;resize\&quot;);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setGMapVisibility'],[-1,'     * Display the GMap container and associated elements.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * visible - {Boolean} Display the GMap elements.'],[-1,'     *\/'],[-1,'    setGMapVisibility: function(visible) {'],[0,'        var cache = OpenLayers.Layer.Google.cache[this.map.id];'],[0,'        var map = this.map;'],[0,'        if (cache) {'],[0,'            var type = this.type;'],[0,'            var layers = map.layers;'],[0,'            var layer;'],[0,'            for (var i=layers.length-1; i&gt;=0; --i) {'],[0,'                layer = layers[i];'],[0,'                if (layer instanceof OpenLayers.Layer.Google &amp;&amp;'],[-1,'                            layer.visibility === true &amp;&amp; layer.inRange === true) {'],[0,'                    type = layer.type;'],[0,'                    visible = true;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[0,'            var container = this.mapObject.getDiv();'],[0,'            if (visible === true) {'],[0,'                container.style.display = \'\';'],[0,'                cache.googleControl.appendChild(map.viewPortDiv);'],[0,'                google.maps.event.trigger(this.mapObject, \'resize\');'],[0,'                this.mapObject.setMapTypeId(type);                '],[-1,'            } else {'],[0,'                map.div.appendChild(map.viewPortDiv);'],[0,'                container.style.display = \'none\';'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getMapContainer'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} the GMap container\'s div'],[-1,'     *\/'],[-1,'    getMapContainer: function() {'],[0,'        return this.mapObject.getDiv();'],[-1,'    },'],[-1,'    '],[-1,'  \/\/'],[-1,'  \/\/ TRANSLATION: MapObject Bounds &lt;-&gt; OpenLayers.Bounds'],[-1,'  \/\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getMapObjectBoundsFromOLBounds'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * olBounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} A MapObject Bounds, translated from olBounds'],[-1,'     *          Returns null if null value is passed in'],[-1,'     *\/'],[-1,'    getMapObjectBoundsFromOLBounds: function(olBounds) {'],[0,'        var moBounds = null;'],[0,'        if (olBounds != null) {'],[0,'            var sw = this.sphericalMercator ? '],[-1,'              this.inverseMercator(olBounds.bottom, olBounds.left) : '],[-1,'              new OpenLayers.LonLat(olBounds.bottom, olBounds.left);'],[0,'            var ne = this.sphericalMercator ? '],[-1,'              this.inverseMercator(olBounds.top, olBounds.right) : '],[-1,'              new OpenLayers.LonLat(olBounds.top, olBounds.right);'],[0,'            moBounds = new google.maps.LatLngBounds('],[-1,'                new google.maps.LatLng(sw.lat, sw.lon),'],[-1,'                new google.maps.LatLng(ne.lat, ne.lon)'],[-1,'            );'],[-1,'        }'],[0,'        return moBounds;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/************************************'],[-1,'     *                                  *'],[-1,'     *   MapObject Interface Controls   *'],[-1,'     *                                  *'],[-1,'     ************************************\/'],[-1,''],[-1,''],[-1,'  \/\/ LonLat - Pixel Translation'],[-1,'  '],[-1,'    \/**'],[-1,'     * APIMethod: getMapObjectLonLatFromMapObjectPixel'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * moPixel - {Object} MapObject Pixel format'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} MapObject LonLat translated from MapObject Pixel'],[-1,'     *\/'],[-1,'    getMapObjectLonLatFromMapObjectPixel: function(moPixel) {'],[0,'        var size = this.map.getSize();'],[0,'        var lon = this.getLongitudeFromMapObjectLonLat(this.mapObject.center);'],[0,'        var lat = this.getLatitudeFromMapObjectLonLat(this.mapObject.center);'],[0,'        var res = this.map.getResolution();'],[-1,''],[0,'        var delta_x = moPixel.x - (size.w \/ 2);'],[0,'        var delta_y = moPixel.y - (size.h \/ 2);'],[-1,'    '],[0,'        var lonlat = new OpenLayers.LonLat('],[-1,'            lon + delta_x * res,'],[-1,'            lat - delta_y * res'],[-1,'        ); '],[-1,''],[0,'        if (this.wrapDateLine) {'],[0,'            lonlat = lonlat.wrapDateLine(this.maxExtent);'],[-1,'        }'],[0,'        return this.getMapObjectLonLatFromLonLat(lonlat.lon, lonlat.lat);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getMapObjectPixelFromMapObjectLonLat'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * moLonLat - {Object} MapObject LonLat format'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} MapObject Pixel transtlated from MapObject LonLat'],[-1,'     *\/'],[-1,'    getMapObjectPixelFromMapObjectLonLat: function(moLonLat) {'],[0,'        var lon = this.getLongitudeFromMapObjectLonLat(moLonLat);'],[0,'        var lat = this.getLatitudeFromMapObjectLonLat(moLonLat);'],[0,'        var res = this.map.getResolution();'],[0,'        var extent = this.map.getExtent();'],[0,'        return this.getMapObjectPixelFromXY((1\/res * (lon - extent.left)),'],[-1,'                                            (1\/res * (extent.top - lat)));'],[-1,'    },'],[-1,''],[-1,'  '],[-1,'    \/** '],[-1,'     * APIMethod: setMapObjectCenter'],[-1,'     * Set the mapObject to the specified center and zoom'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * center - {Object} MapObject LonLat format'],[-1,'     * zoom - {int} MapObject zoom format'],[-1,'     *\/'],[-1,'    setMapObjectCenter: function(center, zoom) {'],[0,'        if (this.animationEnabled === false &amp;&amp; zoom != this.mapObject.zoom) {'],[0,'            var mapContainer = this.getMapContainer();'],[0,'            google.maps.event.addListenerOnce('],[-1,'                this.mapObject, '],[-1,'                \&quot;idle\&quot;, '],[-1,'                function() {'],[0,'                    mapContainer.style.visibility = \&quot;\&quot;;'],[-1,'                }'],[-1,'            );'],[0,'            mapContainer.style.visibility = \&quot;hidden\&quot;;'],[-1,'        }'],[0,'        this.mapObject.setOptions({'],[-1,'            center: center,'],[-1,'            zoom: zoom'],[-1,'        });'],[-1,'    },'],[-1,'   '],[-1,'    '],[-1,'  \/\/ Bounds'],[-1,'  '],[-1,'    \/** '],[-1,'     * APIMethod: getMapObjectZoomFromMapObjectBounds'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * moBounds - {Object} MapObject Bounds format'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} MapObject Zoom for specified MapObject Bounds'],[-1,'     *\/'],[-1,'    getMapObjectZoomFromMapObjectBounds: function(moBounds) {'],[0,'        return this.mapObject.getBoundsZoomLevel(moBounds);'],[-1,'    },'],[-1,''],[-1,'    \/************************************'],[-1,'     *                                  *'],[-1,'     *       MapObject Primitives       *'],[-1,'     *                                  *'],[-1,'     ************************************\/'],[-1,''],[-1,''],[-1,'  \/\/ LonLat'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getMapObjectLonLatFromLonLat'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * lon - {Float}'],[-1,'     * lat - {Float}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} MapObject LonLat built from lon and lat params'],[-1,'     *\/'],[-1,'    getMapObjectLonLatFromLonLat: function(lon, lat) {'],[0,'        var gLatLng;'],[0,'        if(this.sphericalMercator) {'],[0,'            var lonlat = this.inverseMercator(lon, lat);'],[0,'            gLatLng = new google.maps.LatLng(lonlat.lat, lonlat.lon);'],[-1,'        } else {'],[0,'            gLatLng = new google.maps.LatLng(lat, lon);'],[-1,'        }'],[0,'        return gLatLng;'],[-1,'    },'],[-1,'    '],[-1,'  \/\/ Pixel'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getMapObjectPixelFromXY'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * x - {Integer}'],[-1,'     * y - {Integer}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} MapObject Pixel from x and y parameters'],[-1,'     *\/'],[-1,'    getMapObjectPixelFromXY: function(x, y) {'],[0,'        return new google.maps.Point(x, y);'],[-1,'    }'],[-1,'    '],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WPSDescribeProcess.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,' '],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1_1_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WPSDescribeProcess'],[-1,' * Read WPS DescribeProcess responses. '],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WPSDescribeProcess = OpenLayers.Class('],[-1,'    OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: VERSION'],[-1,'     * {String} 1.0.0'],[-1,'     *\/'],[-1,'    VERSION: \&quot;1.0.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        wps: \&quot;http:\/\/www.opengis.net\/wps\/1.0.0\&quot;,'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\/1.1\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} Schema location'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/wps\/1.0.0 http:\/\/schemas.opengis.net\/wps\/1.0.0\/wpsAll.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;wps\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WPSDescribeProcess'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Parse a WPS DescribeProcess and return an object with its information.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object}'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var info = {};'],[0,'        this.readNode(data, info);'],[0,'        return info;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wps\&quot;: {'],[-1,'            \&quot;ProcessDescriptions\&quot;: function(node, obj) {'],[0,'                obj.processDescriptions = {};'],[0,'                this.readChildNodes(node, obj.processDescriptions);'],[-1,'            },'],[-1,'            \&quot;ProcessDescription\&quot;: function(node, processDescriptions) {'],[0,'                var processVersion = this.getAttributeNS(node, this.namespaces.wps, \&quot;processVersion\&quot;);'],[0,'                var processDescription = {'],[-1,'                    processVersion: processVersion,'],[-1,'                    statusSupported: (node.getAttribute(\&quot;statusSupported\&quot;) === \&quot;true\&quot;),'],[-1,'                    storeSupported: (node.getAttribute(\&quot;storeSupported\&quot;) === \&quot;true\&quot;)'],[-1,'                };'],[0,'                this.readChildNodes(node, processDescription);'],[0,'                processDescriptions[processDescription.identifier] = processDescription;'],[-1,'            },'],[-1,'            \&quot;DataInputs\&quot;: function(node, processDescription) {'],[0,'                processDescription.dataInputs = [];'],[0,'                this.readChildNodes(node, processDescription.dataInputs);'],[-1,'            },'],[-1,'            \&quot;ProcessOutputs\&quot;: function(node, processDescription) {'],[0,'                processDescription.processOutputs = [];'],[0,'                this.readChildNodes(node, processDescription.processOutputs);'],[-1,'            },'],[-1,'            \&quot;Output\&quot;: function(node, processOutputs) {'],[0,'                var output = {};'],[0,'                this.readChildNodes(node, output);'],[0,'                processOutputs.push(output);'],[-1,'            },'],[-1,'            \&quot;ComplexOutput\&quot;: function(node, output) {'],[0,'                output.complexOutput = {};'],[0,'                this.readChildNodes(node, output.complexOutput);'],[-1,'            },'],[-1,'            \&quot;LiteralOutput\&quot;: function(node, output) {'],[0,'                output.literalOutput = {};'],[0,'                this.readChildNodes(node, output.literalOutput);'],[-1,'            },'],[-1,'            \&quot;Input\&quot;: function(node, dataInputs) {'],[0,'                var input = {'],[-1,'                    maxOccurs: parseInt(node.getAttribute(\&quot;maxOccurs\&quot;)),'],[-1,'                    minOccurs: parseInt(node.getAttribute(\&quot;minOccurs\&quot;))'],[-1,'                };'],[0,'                this.readChildNodes(node, input);'],[0,'                dataInputs.push(input);'],[-1,'            },'],[-1,'            \&quot;BoundingBoxData\&quot;: function(node, input) {'],[0,'                input.boundingBoxData = {};'],[0,'                this.readChildNodes(node, input.boundingBoxData);'],[-1,'            },'],[-1,'            \&quot;CRS\&quot;: function(node, obj) {'],[0,'                if (!obj.CRSs) {'],[0,'                    obj.CRSs = {};'],[-1,'                }'],[0,'                obj.CRSs[this.getChildValue(node)] = true;'],[-1,'            },'],[-1,'            \&quot;LiteralData\&quot;: function(node, input) {'],[0,'                input.literalData = {};'],[0,'                this.readChildNodes(node, input.literalData);'],[-1,'            },'],[-1,'            \&quot;ComplexData\&quot;: function(node, input) {'],[0,'                input.complexData = {};'],[0,'                this.readChildNodes(node,  input.complexData);'],[-1,'            },'],[-1,'            \&quot;Default\&quot;: function(node, complexData) {'],[0,'                complexData[\&quot;default\&quot;] = {};'],[0,'                this.readChildNodes(node,  complexData[\&quot;default\&quot;]);'],[-1,'            },'],[-1,'            \&quot;Supported\&quot;: function(node, complexData) {'],[0,'                complexData[\&quot;supported\&quot;] = {};'],[0,'                this.readChildNodes(node,  complexData[\&quot;supported\&quot;]);'],[-1,'            },'],[-1,'            \&quot;Format\&quot;: function(node, obj) {'],[0,'                var format = {};'],[0,'                this.readChildNodes(node, format);'],[0,'                if (!obj.formats) {'],[0,'                    obj.formats = {};'],[-1,'                }'],[0,'                obj.formats[format.mimeType] = true;'],[-1,'            },'],[-1,'            \&quot;MimeType\&quot;: function(node, format) {'],[0,'                format.mimeType = this.getChildValue(node);'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\&quot;ows\&quot;]'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WPSDescribeProcess\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WKT.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' * @requires OpenLayers\/Geometry\/MultiPoint.js'],[-1,' * @requires OpenLayers\/Geometry\/LineString.js'],[-1,' * @requires OpenLayers\/Geometry\/MultiLineString.js'],[-1,' * @requires OpenLayers\/Geometry\/Polygon.js'],[-1,' * @requires OpenLayers\/Geometry\/MultiPolygon.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WKT'],[-1,' * Class for reading and writing Well-Known Text.  Create a new instance'],[-1,' * with the &lt;OpenLayers.Format.WKT&gt; constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WKT = OpenLayers.Class(OpenLayers.Format, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WKT'],[-1,'     * Create a new parser for WKT'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *           this instance'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Format.WKT&gt;} A new WKT parser.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        this.regExes = {'],[-1,'            \'typeStr\': \/^\\s*(\\w+)\\s*\\(\\s*(.*)\\s*\\)\\s*$\/,'],[-1,'            \'spaces\': \/\\s+\/,'],[-1,'            \'parenComma\': \/\\)\\s*,\\s*\\(\/,'],[-1,'            \'doubleParenComma\': \/\\)\\s*\\)\\s*,\\s*\\(\\s*\\(\/,  \/\/ can\'t use {2} here'],[-1,'            \'trimParens\': \/^\\s*\\(?(.*?)\\)?\\s*$\/'],[-1,'        };'],[0,'        OpenLayers.Format.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Deserialize a WKT string and return a vector feature or an'],[-1,'     * array of vector features.  Supports WKT for POINT, MULTIPOINT,'],[-1,'     * LINESTRING, MULTILINESTRING, POLYGON, MULTIPOLYGON, and'],[-1,'     * GEOMETRYCOLLECTION.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * wkt - {String} A WKT string'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;|Array} A feature or array of features for'],[-1,'     * GEOMETRYCOLLECTION WKT.'],[-1,'     *\/'],[-1,'    read: function(wkt) {'],[0,'        var features, type, str;'],[0,'        wkt = wkt.replace(\/[\\n\\r]\/g, \&quot; \&quot;);'],[0,'        var matches = this.regExes.typeStr.exec(wkt);'],[0,'        if(matches) {'],[0,'            type = matches[1].toLowerCase();'],[0,'            str = matches[2];'],[0,'            if(this.parse[type]) {'],[0,'                features = this.parse[type].apply(this, [str]);'],[-1,'            }'],[0,'            if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'                if (features &amp;&amp; '],[-1,'                    features.CLASS_NAME == \&quot;OpenLayers.Feature.Vector\&quot;) {'],[0,'                    features.geometry.transform(this.externalProjection,'],[-1,'                                                this.internalProjection);'],[0,'                } else if (features &amp;&amp;'],[-1,'                           type != \&quot;geometrycollection\&quot; &amp;&amp;'],[-1,'                           typeof features == \&quot;object\&quot;) {'],[0,'                    for (var i=0, len=features.length; i&lt;len; i++) {'],[0,'                        var component = features[i];'],[0,'                        component.geometry.transform(this.externalProjection,'],[-1,'                                                     this.internalProjection);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }    '],[0,'        return features;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Serialize a feature or array of features into a WKT string.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {&lt;OpenLayers.Feature.Vector&gt;|Array} A feature or array of'],[-1,'     *            features'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The WKT string representation of the input geometries'],[-1,'     *\/'],[-1,'    write: function(features) {'],[0,'        var collection, geometry, isCollection;'],[0,'        if (features.constructor == Array) {'],[0,'            collection = features;'],[0,'            isCollection = true;'],[-1,'        } else {'],[0,'            collection = [features];'],[0,'            isCollection = false;'],[-1,'        }'],[0,'        var pieces = [];'],[0,'        if (isCollection) {'],[0,'            pieces.push(\'GEOMETRYCOLLECTION(\');'],[-1,'        }'],[0,'        for (var i=0, len=collection.length; i&lt;len; ++i) {'],[0,'            if (isCollection &amp;&amp; i&gt;0) {'],[0,'                pieces.push(\',\');'],[-1,'            }'],[0,'            geometry = collection[i].geometry;'],[0,'            pieces.push(this.extractGeometry(geometry));'],[-1,'        }'],[0,'        if (isCollection) {'],[0,'            pieces.push(\')\');'],[-1,'        }'],[0,'        return pieces.join(\'\');'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: extractGeometry'],[-1,'     * Entry point to construct the WKT for a single Geometry object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry.Geometry&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A WKT string of representing the geometry'],[-1,'     *\/'],[-1,'    extractGeometry: function(geometry) {'],[0,'        var type = geometry.CLASS_NAME.split(\'.\')[2].toLowerCase();'],[0,'        if (!this.extract[type]) {'],[0,'            return null;'],[-1,'        }'],[0,'        if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'            geometry = geometry.clone();'],[0,'            geometry.transform(this.internalProjection, this.externalProjection);'],[-1,'        }                       '],[0,'        var wktType = type == \'collection\' ? \'GEOMETRYCOLLECTION\' : type.toUpperCase();'],[0,'        var data = wktType + \'(\' + this.extract[type].apply(this, [geometry]) + \')\';'],[0,'        return data;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Object with properties corresponding to the geometry types.'],[-1,'     * Property values are functions that do the actual data extraction.'],[-1,'     *\/'],[-1,'    extract: {'],[-1,'        \/**'],[-1,'         * Return a space delimited string of point coordinates.'],[-1,'         * @param {OpenLayers.Geometry.Point} point'],[-1,'         * @returns {String} A string of coordinates representing the point'],[-1,'         *\/'],[-1,'        \'point\': function(point) {'],[0,'            return point.x + \' \' + point.y;'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Return a comma delimited string of point coordinates from a multipoint.'],[-1,'         * @param {OpenLayers.Geometry.MultiPoint} multipoint'],[-1,'         * @returns {String} A string of point coordinate strings representing'],[-1,'         *                  the multipoint'],[-1,'         *\/'],[-1,'        \'multipoint\': function(multipoint) {'],[0,'            var array = [];'],[0,'            for(var i=0, len=multipoint.components.length; i&lt;len; ++i) {'],[0,'                array.push(\'(\' +'],[-1,'                           this.extract.point.apply(this, [multipoint.components[i]]) +'],[-1,'                           \')\');'],[-1,'            }'],[0,'            return array.join(\',\');'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Return a comma delimited string of point coordinates from a line.'],[-1,'         * @param {OpenLayers.Geometry.LineString} linestring'],[-1,'         * @returns {String} A string of point coordinate strings representing'],[-1,'         *                  the linestring'],[-1,'         *\/'],[-1,'        \'linestring\': function(linestring) {'],[0,'            var array = [];'],[0,'            for(var i=0, len=linestring.components.length; i&lt;len; ++i) {'],[0,'                array.push(this.extract.point.apply(this, [linestring.components[i]]));'],[-1,'            }'],[0,'            return array.join(\',\');'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Return a comma delimited string of linestring strings from a multilinestring.'],[-1,'         * @param {OpenLayers.Geometry.MultiLineString} multilinestring'],[-1,'         * @returns {String} A string of of linestring strings representing'],[-1,'         *                  the multilinestring'],[-1,'         *\/'],[-1,'        \'multilinestring\': function(multilinestring) {'],[0,'            var array = [];'],[0,'            for(var i=0, len=multilinestring.components.length; i&lt;len; ++i) {'],[0,'                array.push(\'(\' +'],[-1,'                           this.extract.linestring.apply(this, [multilinestring.components[i]]) +'],[-1,'                           \')\');'],[-1,'            }'],[0,'            return array.join(\',\');'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Return a comma delimited string of linear ring arrays from a polygon.'],[-1,'         * @param {OpenLayers.Geometry.Polygon} polygon'],[-1,'         * @returns {String} An array of linear ring arrays representing the polygon'],[-1,'         *\/'],[-1,'        \'polygon\': function(polygon) {'],[0,'            var array = [];'],[0,'            for(var i=0, len=polygon.components.length; i&lt;len; ++i) {'],[0,'                array.push(\'(\' +'],[-1,'                           this.extract.linestring.apply(this, [polygon.components[i]]) +'],[-1,'                           \')\');'],[-1,'            }'],[0,'            return array.join(\',\');'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Return an array of polygon arrays from a multipolygon.'],[-1,'         * @param {OpenLayers.Geometry.MultiPolygon} multipolygon'],[-1,'         * @returns {String} An array of polygon arrays representing'],[-1,'         *                  the multipolygon'],[-1,'         *\/'],[-1,'        \'multipolygon\': function(multipolygon) {'],[0,'            var array = [];'],[0,'            for(var i=0, len=multipolygon.components.length; i&lt;len; ++i) {'],[0,'                array.push(\'(\' +'],[-1,'                           this.extract.polygon.apply(this, [multipolygon.components[i]]) +'],[-1,'                           \')\');'],[-1,'            }'],[0,'            return array.join(\',\');'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Return the WKT portion between \'GEOMETRYCOLLECTION(\' and \')\' for an &lt;OpenLayers.Geometry.Collection&gt;'],[-1,'         * @param {OpenLayers.Geometry.Collection} collection'],[-1,'         * @returns {String} internal WKT representation of the collection'],[-1,'         *\/'],[-1,'        \'collection\': function(collection) {'],[0,'            var array = [];'],[0,'            for(var i=0, len=collection.components.length; i&lt;len; ++i) {'],[0,'                array.push(this.extractGeometry.apply(this, [collection.components[i]]));'],[-1,'            }'],[0,'            return array.join(\',\');'],[-1,'        }'],[-1,''],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Object with properties corresponding to the geometry types.'],[-1,'     * Property values are functions that do the actual parsing.'],[-1,'     *\/'],[-1,'    parse: {'],[-1,'        \/**'],[-1,'         * Return point feature given a point WKT fragment.'],[-1,'         * @param {String} str A WKT fragment representing the point'],[-1,'         * @returns {OpenLayers.Feature.Vector} A point feature'],[-1,'         * @private'],[-1,'         *\/'],[-1,'        \'point\': function(str) {'],[0,'            var coords = OpenLayers.String.trim(str).split(this.regExes.spaces);'],[0,'            return new OpenLayers.Feature.Vector('],[-1,'                new OpenLayers.Geometry.Point(coords[0], coords[1])'],[-1,'            );'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Return a multipoint feature given a multipoint WKT fragment.'],[-1,'         * @param {String} str A WKT fragment representing the multipoint'],[-1,'         * @returns {OpenLayers.Feature.Vector} A multipoint feature'],[-1,'         * @private'],[-1,'         *\/'],[-1,'        \'multipoint\': function(str) {'],[0,'            var point;'],[0,'            var points = OpenLayers.String.trim(str).split(\',\');'],[0,'            var components = [];'],[0,'            for(var i=0, len=points.length; i&lt;len; ++i) {'],[0,'                point = points[i].replace(this.regExes.trimParens, \'$1\');'],[0,'                components.push(this.parse.point.apply(this, [point]).geometry);'],[-1,'            }'],[0,'            return new OpenLayers.Feature.Vector('],[-1,'                new OpenLayers.Geometry.MultiPoint(components)'],[-1,'            );'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Return a linestring feature given a linestring WKT fragment.'],[-1,'         * @param {String} str A WKT fragment representing the linestring'],[-1,'         * @returns {OpenLayers.Feature.Vector} A linestring feature'],[-1,'         * @private'],[-1,'         *\/'],[-1,'        \'linestring\': function(str) {'],[0,'            var points = OpenLayers.String.trim(str).split(\',\');'],[0,'            var components = [];'],[0,'            for(var i=0, len=points.length; i&lt;len; ++i) {'],[0,'                components.push(this.parse.point.apply(this, [points[i]]).geometry);'],[-1,'            }'],[0,'            return new OpenLayers.Feature.Vector('],[-1,'                new OpenLayers.Geometry.LineString(components)'],[-1,'            );'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Return a multilinestring feature given a multilinestring WKT fragment.'],[-1,'         * @param {String} str A WKT fragment representing the multilinestring'],[-1,'         * @returns {OpenLayers.Feature.Vector} A multilinestring feature'],[-1,'         * @private'],[-1,'         *\/'],[-1,'        \'multilinestring\': function(str) {'],[0,'            var line;'],[0,'            var lines = OpenLayers.String.trim(str).split(this.regExes.parenComma);'],[0,'            var components = [];'],[0,'            for(var i=0, len=lines.length; i&lt;len; ++i) {'],[0,'                line = lines[i].replace(this.regExes.trimParens, \'$1\');'],[0,'                components.push(this.parse.linestring.apply(this, [line]).geometry);'],[-1,'            }'],[0,'            return new OpenLayers.Feature.Vector('],[-1,'                new OpenLayers.Geometry.MultiLineString(components)'],[-1,'            );'],[-1,'        },'],[-1,'        '],[-1,'        \/**'],[-1,'         * Return a polygon feature given a polygon WKT fragment.'],[-1,'         * @param {String} str A WKT fragment representing the polygon'],[-1,'         * @returns {OpenLayers.Feature.Vector} A polygon feature'],[-1,'         * @private'],[-1,'         *\/'],[-1,'        \'polygon\': function(str) {'],[0,'            var ring, linestring, linearring;'],[0,'            var rings = OpenLayers.String.trim(str).split(this.regExes.parenComma);'],[0,'            var components = [];'],[0,'            for(var i=0, len=rings.length; i&lt;len; ++i) {'],[0,'                ring = rings[i].replace(this.regExes.trimParens, \'$1\');'],[0,'                linestring = this.parse.linestring.apply(this, [ring]).geometry;'],[0,'                linearring = new OpenLayers.Geometry.LinearRing(linestring.components);'],[0,'                components.push(linearring);'],[-1,'            }'],[0,'            return new OpenLayers.Feature.Vector('],[-1,'                new OpenLayers.Geometry.Polygon(components)'],[-1,'            );'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Return a multipolygon feature given a multipolygon WKT fragment.'],[-1,'         * @param {String} str A WKT fragment representing the multipolygon'],[-1,'         * @returns {OpenLayers.Feature.Vector} A multipolygon feature'],[-1,'         * @private'],[-1,'         *\/'],[-1,'        \'multipolygon\': function(str) {'],[0,'            var polygon;'],[0,'            var polygons = OpenLayers.String.trim(str).split(this.regExes.doubleParenComma);'],[0,'            var components = [];'],[0,'            for(var i=0, len=polygons.length; i&lt;len; ++i) {'],[0,'                polygon = polygons[i].replace(this.regExes.trimParens, \'$1\');'],[0,'                components.push(this.parse.polygon.apply(this, [polygon]).geometry);'],[-1,'            }'],[0,'            return new OpenLayers.Feature.Vector('],[-1,'                new OpenLayers.Geometry.MultiPolygon(components)'],[-1,'            );'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * Return an array of features given a geometrycollection WKT fragment.'],[-1,'         * @param {String} str A WKT fragment representing the geometrycollection'],[-1,'         * @returns {Array} An array of OpenLayers.Feature.Vector'],[-1,'         * @private'],[-1,'         *\/'],[-1,'        \'geometrycollection\': function(str) {'],[-1,'            \/\/ separate components of the collection with |'],[0,'            str = str.replace(\/,\\s*([A-Za-z])\/g, \'|$1\');'],[0,'            var wktArray = OpenLayers.String.trim(str).split(\'|\');'],[0,'            var components = [];'],[0,'            for(var i=0, len=wktArray.length; i&lt;len; ++i) {'],[0,'                components.push(OpenLayers.Format.WKT.prototype.read.apply(this,[wktArray[i]]));'],[-1,'            }'],[0,'            return components;'],[-1,'        }'],[-1,''],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WKT\&quot; '],[-1,'});     '],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/WPSProcess.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/SingleFile.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Geometry.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Format\/WKT.js'],[-1,' * @requires OpenLayers\/Format\/GeoJSON.js'],[-1,' * @requires OpenLayers\/Format\/WPSExecute.js'],[-1,' * @requires OpenLayers\/Request.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.WPSProcess'],[-1,' * Representation of a WPS process. Usually instances of'],[-1,' * &lt;OpenLayers.WPSProcess&gt; are created by calling \'getProcess\' on an'],[-1,' * &lt;OpenLayers.WPSClient&gt; instance.'],[-1,' *'],[-1,' * Currently &lt;OpenLayers.WPSProcess&gt; supports processes that have geometries'],[-1,' * or features as output, using WKT or GeoJSON as output format. It also'],[-1,' * supports chaining of processes by using the &lt;output&gt; method to create a'],[-1,' * handle that is used as process input instead of a static value.'],[-1,' *\/'],[1,'OpenLayers.WPSProcess = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: client'],[-1,'     * {&lt;OpenLayers.WPSClient&gt;} The client that manages this process.'],[-1,'     *\/'],[-1,'    client: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: server'],[-1,'     * {String} Local client identifier for this process\'s server.'],[-1,'     *\/'],[-1,'    server: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: identifier'],[-1,'     * {String} Process identifier known to the server.'],[-1,'     *\/'],[-1,'    identifier: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: description'],[-1,'     * {Object} DescribeProcess response for this process.'],[-1,'     *\/'],[-1,'    description: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: localWPS'],[-1,'     * {String} Service endpoint for locally chained WPS processes. Default is'],[-1,'     *     \'http:\/\/geoserver\/wps\'.'],[-1,'     *\/'],[-1,'    localWPS: \'http:\/\/geoserver\/wps\','],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: formats'],[-1,'     * {Object} OpenLayers.Format instances keyed by mimetype.'],[-1,'     *\/'],[-1,'    formats: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: chained'],[-1,'     * {Integer} Number of chained processes for pending execute requests that'],[-1,'     * don\'t have a full configuration yet.'],[-1,'     *\/'],[-1,'    chained: 0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: executeCallbacks'],[-1,'     * {Array} Callbacks waiting to be executed until all chained processes'],[-1,'     * are configured;'],[-1,'     *\/'],[-1,'    executeCallbacks: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.WPSProcess'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Object whose properties will be set on the instance.'],[-1,'     *'],[-1,'     * Avaliable options:'],[-1,'     * client - {&lt;OpenLayers.WPSClient&gt;} Mandatory. Client that manages this'],[-1,'     *     process.'],[-1,'     * server - {String} Mandatory. Local client identifier of this process\'s'],[-1,'     *     server.'],[-1,'     * identifier - {String} Mandatory. Process identifier known to the server.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Util.extend(this, options);        '],[0,'        this.executeCallbacks = [];'],[0,'        this.formats = {'],[-1,'            \'application\/wkt\': new OpenLayers.Format.WKT(),'],[-1,'            \'application\/json\': new OpenLayers.Format.GeoJSON()'],[-1,'        };'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: describe'],[-1,'     * Makes the client issue a DescribeProcess request asynchronously.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Configuration for the method call'],[-1,'     *'],[-1,'     * Available options:'],[-1,'     * callback - {Function} Callback to execute when the description is'],[-1,'     *     available. Will be called with the parsed description as argument.'],[-1,'     *     Optional.'],[-1,'     * scope - {Object} The scope in which the callback will be executed.'],[-1,'     *     Default is the global object.'],[-1,'     *\/'],[-1,'    describe: function(options) {'],[0,'        options = options || {};'],[0,'        if (!this.description) {'],[0,'            this.client.describeProcess(this.server, this.identifier, function(description) {'],[0,'                if (!this.description) {'],[0,'                    this.parseDescription(description);'],[-1,'                }'],[0,'                if (options.callback) {'],[0,'                    options.callback.call(options.scope, this.description);'],[-1,'                }'],[-1,'            }, this);'],[0,'        } else if (options.callback) {'],[0,'            var description = this.description;'],[0,'            window.setTimeout(function() {'],[0,'                options.callback.call(options.scope, description);'],[-1,'            }, 0);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: configure'],[-1,'     * Configure the process, but do not execute it. Use this for processes'],[-1,'     * that are chained as input of a different process by means of the'],[-1,'     * &lt;output&gt; method.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.WPSProcess&gt;} this process.'],[-1,'     *'],[-1,'     * Available options:'],[-1,'     * inputs - {Object} The inputs for the process, keyed by input identifier.'],[-1,'     *     For spatial data inputs, the value of an input is usually an'],[-1,'     *     &lt;OpenLayers.Geometry&gt;, an &lt;OpenLayers.Feature.Vector&gt; or an array of'],[-1,'     *     geometries or features.'],[-1,'     * callback - {Function} Callback to call when the configuration is'],[-1,'     *     complete. Optional.'],[-1,'     * scope - {Object} Optional scope for the callback.'],[-1,'     *\/'],[-1,'    configure: function(options) {'],[0,'        this.describe({'],[-1,'            callback: function() {'],[0,'                var description = this.description,'],[-1,'                    inputs = options.inputs,'],[-1,'                    input, i, ii;'],[0,'                for (i=0, ii=description.dataInputs.length; i&lt;ii; ++i) {'],[0,'                    input = description.dataInputs[i];'],[0,'                    this.setInputData(input, inputs[input.identifier]);'],[-1,'                }'],[0,'                if (options.callback) {'],[0,'                    options.callback.call(options.scope);'],[-1,'                }'],[-1,'            },'],[-1,'            scope: this'],[-1,'        });'],[0,'        return this;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: execute'],[-1,'     * Configures and executes the process'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object}'],[-1,'     *'],[-1,'     * Available options:'],[-1,'     * inputs - {Object} The inputs for the process, keyed by input identifier.'],[-1,'     *     For spatial data inputs, the value of an input is usually an'],[-1,'     *     &lt;OpenLayers.Geometry&gt;, an &lt;OpenLayers.Feature.Vector&gt; or an array of'],[-1,'     *     geometries or features.'],[-1,'     * output - {String} The identifier of the output to request and parse.'],[-1,'     *     Optional. If not provided, the first output will be requested.'],[-1,'     * success - {Function} Callback to call when the process is complete.'],[-1,'     *     This function is called with an outputs object as argument, which'],[-1,'     *     will have a property with the identifier of the requested output'],[-1,'     *     (or \'result\' if output was not configured). For processes that'],[-1,'     *     generate spatial output, the value will be an array of'],[-1,'     *     &lt;OpenLayers.Feature.Vector&gt; instances.'],[-1,'     * scope - {Object} Optional scope for the success callback.'],[-1,'     *\/'],[-1,'    execute: function(options) {'],[0,'        this.configure({'],[-1,'            inputs: options.inputs,'],[-1,'            callback: function() {'],[0,'                var me = this;'],[-1,'                \/\/TODO For now we only deal with a single output'],[0,'                var outputIndex = this.getOutputIndex('],[-1,'                    me.description.processOutputs, options.output'],[-1,'                );'],[0,'                me.setResponseForm({outputIndex: outputIndex});'],[0,'                (function callback() {'],[0,'                    OpenLayers.Util.removeItem(me.executeCallbacks, callback);'],[0,'                    if (me.chained !== 0) {'],[-1,'                        \/\/ need to wait until chained processes have a'],[-1,'                        \/\/ description and configuration - see chainProcess'],[0,'                        me.executeCallbacks.push(callback);'],[0,'                        return;'],[-1,'                    }'],[-1,'                    \/\/ all chained processes are added as references now, so'],[-1,'                    \/\/ let\'s proceed.'],[0,'                    OpenLayers.Request.POST({'],[-1,'                        url: me.client.servers[me.server].url,'],[-1,'                        data: new OpenLayers.Format.WPSExecute().write(me.description),'],[-1,'                        success: function(response) {'],[0,'                            var output = me.description.processOutputs[outputIndex];'],[0,'                            var mimeType = me.findMimeType('],[-1,'                                output.complexOutput.supported.formats'],[-1,'                            );'],[-1,'                            \/\/TODO For now we assume a spatial output'],[0,'                            var features = me.formats[mimeType].read(response.responseText);'],[0,'                            if (features instanceof OpenLayers.Feature.Vector) {'],[0,'                                features = [features];'],[-1,'                            }'],[0,'                            if (options.success) {'],[0,'                                var outputs = {};'],[0,'                                outputs[options.output || \'result\'] = features;'],[0,'                                options.success.call(options.scope, outputs);'],[-1,'                            }'],[-1,'                        },'],[-1,'                        scope: me'],[-1,'                    });'],[-1,'                })();'],[-1,'            },'],[-1,'            scope: this'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: output'],[-1,'     * Chain an output of a configured process (see &lt;configure&gt;) as input to'],[-1,'     * another process.'],[-1,'     *'],[-1,'     * (code)'],[-1,'     * intersect = client.getProcess(\'opengeo\', \'JTS:intersection\');    '],[-1,'     * intersect.configure({'],[-1,'     *     \/\/ ...'],[-1,'     * });'],[-1,'     * buffer = client.getProcess(\'opengeo\', \'JTS:buffer\');'],[-1,'     * buffer.execute({'],[-1,'     *     inputs: {'],[-1,'     *         geom: intersect.output(\'result\'), \/\/ &lt;-- here we\'re chaining'],[-1,'     *         distance: 1'],[-1,'     *     },'],[-1,'     *     \/\/ ...'],[-1,'     * });'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * identifier - {String} Identifier of the output that we\'re chaining. If'],[-1,'     *     not provided, the first output will be used.'],[-1,'     *\/'],[-1,'    output: function(identifier) {'],[0,'        return new OpenLayers.WPSProcess.ChainLink({'],[-1,'            process: this,'],[-1,'            output: identifier'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseDescription'],[-1,'     * Parses the DescribeProcess response'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * description - {Object}'],[-1,'     *\/'],[-1,'    parseDescription: function(description) {'],[0,'        var server = this.client.servers[this.server];'],[0,'        this.description = new OpenLayers.Format.WPSDescribeProcess()'],[-1,'            .read(server.processDescription[this.identifier])'],[-1,'            .processDescriptions[this.identifier];'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setInputData'],[-1,'     * Sets the data for a single input'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * input - {Object}  An entry from the dataInputs array of the process'],[-1,'     *     description.'],[-1,'     * data - {Mixed} For spatial data inputs, this is usually an'],[-1,'     *     &lt;OpenLayers.Geometry&gt;, an &lt;OpenLayers.Feature.Vector&gt; or an array of'],[-1,'     *     geometries or features.'],[-1,'     *\/'],[-1,'    setInputData: function(input, data) {'],[-1,'        \/\/ clear any previous data'],[0,'        delete input.data;'],[0,'        delete input.reference;'],[0,'        if (data instanceof OpenLayers.WPSProcess.ChainLink) {'],[0,'            ++this.chained;'],[0,'            input.reference = {'],[-1,'                method: \'POST\','],[-1,'                href: data.process.server === this.server ?'],[-1,'                    this.localWPS : this.client.servers[data.process.server].url'],[-1,'            };'],[0,'            data.process.describe({'],[-1,'                callback: function() {'],[0,'                    --this.chained;'],[0,'                    this.chainProcess(input, data);'],[-1,'                },'],[-1,'                scope: this'],[-1,'            });'],[-1,'        } else {'],[0,'            input.data = {};'],[0,'            var complexData = input.complexData;'],[0,'            if (complexData) {'],[0,'                var format = this.findMimeType(complexData.supported.formats);'],[0,'                input.data.complexData = {'],[-1,'                    mimeType: format,'],[-1,'                    value: this.formats[format].write(this.toFeatures(data))'],[-1,'                };'],[-1,'            } else {'],[0,'                input.data.literalData = {'],[-1,'                    value: data'],[-1,'                };'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setResponseForm'],[-1,'     * Sets the responseForm property of the &lt;execute&gt; payload.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} See below.'],[-1,'     *'],[-1,'     * Available options:'],[-1,'     * outputIndex - {Integer} The index of the output to use. Optional.'],[-1,'     * supportedFormats - {Object} Object with supported mime types as key,'],[-1,'     *     and true as value for supported types. Optional.'],[-1,'     *\/'],[-1,'    setResponseForm: function(options) {'],[0,'        options = options || {};'],[0,'        var output = this.description.processOutputs[options.outputIndex || 0];'],[0,'        this.description.responseForm = {'],[-1,'            rawDataOutput: {'],[-1,'                identifier: output.identifier,'],[-1,'                mimeType: this.findMimeType(output.complexOutput.supported.formats, options.supportedFormats)'],[-1,'            }'],[-1,'        };'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getOutputIndex'],[-1,'     * Gets the index of a processOutput by its identifier'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * outputs - {Array} The processOutputs array to look at'],[-1,'     * identifier - {String} The identifier of the output'],[-1,'     *'],[-1,'     * Returns'],[-1,'     * {Integer} The index of the processOutput with the provided identifier'],[-1,'     *     in the outputs array.'],[-1,'     *\/'],[-1,'    getOutputIndex: function(outputs, identifier) {'],[0,'        var output;'],[0,'        if (identifier) {'],[0,'            for (var i=outputs.length-1; i&gt;=0; --i) {'],[0,'                if (outputs[i].identifier === identifier) {'],[0,'                    output = i;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        } else {'],[0,'            output = 0;'],[-1,'        }'],[0,'        return output;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: chainProcess'],[-1,'     * Sets a fully configured chained process as input for this process.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * input - {Object} The dataInput that the chained process provides.'],[-1,'     * chainLink - {&lt;OpenLayers.WPSProcess.ChainLink&gt;} The process to chain.'],[-1,'     *\/'],[-1,'    chainProcess: function(input, chainLink) {'],[0,'        var output = this.getOutputIndex('],[-1,'            chainLink.process.description.processOutputs, chainLink.output'],[-1,'        );'],[0,'        input.reference.mimeType = this.findMimeType('],[-1,'            input.complexData.supported.formats,'],[-1,'            chainLink.process.description.processOutputs[output].complexOutput.supported.formats'],[-1,'        );'],[0,'        var formats = {};'],[0,'        formats[input.reference.mimeType] = true;'],[0,'        chainLink.process.setResponseForm({'],[-1,'            outputIndex: output,'],[-1,'            supportedFormats: formats'],[-1,'        });'],[0,'        input.reference.body = chainLink.process.description;'],[0,'        while (this.executeCallbacks.length &gt; 0) {'],[0,'            this.executeCallbacks[0]();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: toFeatures'],[-1,'     * Converts spatial input into features so it can be processed by'],[-1,'     * &lt;OpenLayers.Format&gt; instances.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * source - {Mixed} An &lt;OpenLayers.Geometry&gt;, an'],[-1,'     *     &lt;OpenLayers.Feature.Vector&gt;, or an array of geometries or features'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)}'],[-1,'     *\/'],[-1,'    toFeatures: function(source) {'],[0,'        var isArray = OpenLayers.Util.isArray(source);'],[0,'        if (!isArray) {'],[0,'            source = [source];'],[-1,'        }'],[0,'        var target = new Array(source.length),'],[-1,'            current;'],[0,'        for (var i=0, ii=source.length; i&lt;ii; ++i) {'],[0,'            current = source[i];'],[0,'            target[i] = current instanceof OpenLayers.Feature.Vector ?'],[-1,'                current : new OpenLayers.Feature.Vector(current);'],[-1,'        }'],[0,'        return isArray ? target : target[0];'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: findMimeType'],[-1,'     * Finds a supported mime type.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * sourceFormats - {Object} An object literal with mime types as key and'],[-1,'     *     true as value for supported formats.'],[-1,'     * targetFormats - {Object} Like &lt;sourceFormats&gt;, but optional to check for'],[-1,'     *     supported mime types on a different target than this process.'],[-1,'     *     Default is to check against this process\'s supported formats.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A supported mime type.'],[-1,'     *\/'],[-1,'    findMimeType: function(sourceFormats, targetFormats) {'],[0,'        targetFormats = targetFormats || this.formats;'],[0,'        for (var f in sourceFormats) {'],[0,'            if (f in targetFormats) {'],[0,'                return f;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.WPSProcess\&quot;'],[-1,'    '],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.WPSProcess.ChainLink'],[-1,' * Type for chaining processes.'],[-1,' *\/'],[1,'OpenLayers.WPSProcess.ChainLink = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: process'],[-1,'     * {&lt;OpenLayers.WPSProcess&gt;} The process to chain'],[-1,'     *\/'],[-1,'    process: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: output'],[-1,'     * {String} The output identifier of the output we are going to use as'],[-1,'     *     input for another process.'],[-1,'     *\/'],[-1,'    output: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.WPSProcess.ChainLink'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Properties to set on the instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Util.extend(this, options);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.WPSProcess.ChainLink\&quot;'],[-1,'    '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/WPSClient.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/SingleFile.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Events.js'],[-1,' * @requires OpenLayers\/WPSProcess.js'],[-1,' * @requires OpenLayers\/Format\/WPSDescribeProcess.js'],[-1,' * @requires OpenLayers\/Request.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.WPSClient'],[-1,' * High level API for interaction with Web Processing Services (WPS).'],[-1,' * An &lt;OpenLayers.WPSClient&gt; instance is used to create &lt;OpenLayers.WPSProcess&gt;'],[-1,' * instances for servers known to the WPSClient. The WPSClient also caches'],[-1,' * DescribeProcess responses to reduce the number of requests sent to servers'],[-1,' * when processes are created.'],[-1,' *\/'],[1,'OpenLayers.WPSClient = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: servers'],[-1,'     * {Object} Service metadata, keyed by a local identifier.'],[-1,'     *'],[-1,'     * Properties:'],[-1,'     * url - {String} the url of the server'],[-1,'     * version - {String} WPS version of the server'],[-1,'     * processDescription - {Object} Cache of raw DescribeProcess'],[-1,'     *     responses, keyed by process identifier.'],[-1,'     *\/'],[-1,'    servers: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} The default WPS version to use if none is configured. Default'],[-1,'     *     is \'1.0.0\'.'],[-1,'     *\/'],[-1,'    version: \'1.0.0\','],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: lazy'],[-1,'     * {Boolean} Should the DescribeProcess be deferred until a process is'],[-1,'     *     fully configured? Default is false.'],[-1,'     *\/'],[-1,'    lazy: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: events'],[-1,'     * {&lt;OpenLayers.Events&gt;}'],[-1,'     *'],[-1,'     * Supported event types:'],[-1,'     * describeprocess - Fires when the process description is available.'],[-1,'     *     Listeners receive an object with a \'raw\' property holding the raw'],[-1,'     *     DescribeProcess response, and an \'identifier\' property holding the'],[-1,'     *     process identifier of the described process.'],[-1,'     *\/'],[-1,'    events: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.WPSClient'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Object whose properties will be set on the instance.'],[-1,'     *'],[-1,'     * Avaliable options:'],[-1,'     * servers - {Object} Mandatory. Service metadata, keyed by a local'],[-1,'     *     identifier. Can either be a string with the service url or an'],[-1,'     *     object literal with additional metadata:'],[-1,'     *'],[-1,'     *     (code)'],[-1,'     *     servers: {'],[-1,'     *         local: \'\/geoserver\/wps\''],[-1,'     *     }, {'],[-1,'     *         opengeo: {'],[-1,'     *             url: \'http:\/\/demo.opengeo.org\/geoserver\/wps\','],[-1,'     *             version: \'1.0.0\''],[-1,'     *         }'],[-1,'     *     }'],[-1,'     *     (end)'],[-1,'     *'],[-1,'     * lazy - {Boolean} Optional. Set to true if DescribeProcess should not be'],[-1,'     *     requested until a process is fully configured. Default is false.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Util.extend(this, options);'],[0,'        this.events = new OpenLayers.Events(this);'],[0,'        this.servers = {};'],[0,'        for (var s in options.servers) {'],[0,'            this.servers[s] = typeof options.servers[s] == \'string\' ? {'],[-1,'                url: options.servers[s],'],[-1,'                version: this.version,'],[-1,'                processDescription: {}'],[-1,'            } : options.servers[s];'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: execute'],[-1,'     * Shortcut to execute a process with a single function call. This is'],[-1,'     * equivalent to using &lt;getProcess&gt; and then calling execute on the'],[-1,'     * process.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Options for the execute operation.'],[-1,'     *'],[-1,'     * Available options:'],[-1,'     * server - {String} Mandatory. One of the local identifiers of the'],[-1,'     *     configured servers.'],[-1,'     * process - {String} Mandatory. A process identifier known to the'],[-1,'     *     server.'],[-1,'     * inputs - {Object} The inputs for the process, keyed by input identifier.'],[-1,'     *     For spatial data inputs, the value of an input is usually an'],[-1,'     *     &lt;OpenLayers.Geometry&gt;, an &lt;OpenLayers.Feature.Vector&gt; or an array of'],[-1,'     *     geometries or features.'],[-1,'     * output - {String} The identifier of an output to parse. Optional. If not'],[-1,'     *     provided, the first output will be parsed.'],[-1,'     * success - {Function} Callback to call when the process is complete.'],[-1,'     *     This function is called with an outputs object as argument, which'],[-1,'     *     will have a property with the identifier of the requested output'],[-1,'     *     (e.g. \'result\'). For processes that generate spatial output, the'],[-1,'     *     value will either be a single &lt;OpenLayers.Feature.Vector&gt; or an'],[-1,'     *     array of features.'],[-1,'     * scope - {Object} Optional scope for the success callback.'],[-1,'     *\/'],[-1,'    execute: function(options) {'],[0,'        var process = this.getProcess(options.server, options.process);'],[0,'        process.execute({'],[-1,'            inputs: options.inputs,'],[-1,'            success: options.success,'],[-1,'            scope: options.scope'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getProcess'],[-1,'     * Creates an &lt;OpenLayers.WPSProcess&gt;.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * serverID - {String} Local identifier from the servers that this instance'],[-1,'     *     was constructed with.'],[-1,'     * processID - {String} Process identifier known to the server.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.WPSProcess&gt;}'],[-1,'     *\/'],[-1,'    getProcess: function(serverID, processID) {'],[0,'        var process = new OpenLayers.WPSProcess({'],[-1,'            client: this,'],[-1,'            server: serverID,'],[-1,'            identifier: processID'],[-1,'        });'],[0,'        if (!this.lazy) {'],[0,'            process.describe();'],[-1,'        }'],[0,'        return process;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: describeProcess'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * serverID - {String} Identifier of the server'],[-1,'     * processID - {String} Identifier of the requested process'],[-1,'     * callback - {Function} Callback to call when the description is available'],[-1,'     * scope - {Object} Optional execution scope for the callback function'],[-1,'     *\/'],[-1,'    describeProcess: function(serverID, processID, callback, scope) {'],[0,'        var server = this.servers[serverID];'],[0,'        if (!server.processDescription[processID]) {'],[0,'            if (!(processID in server.processDescription)) {'],[-1,'                \/\/ set to null so we know a describeFeature request is pending'],[0,'                server.processDescription[processID] = null;'],[0,'                OpenLayers.Request.GET({'],[-1,'                    url: server.url,'],[-1,'                    params: {'],[-1,'                        SERVICE: \'WPS\','],[-1,'                        VERSION: server.version,'],[-1,'                        REQUEST: \'DescribeProcess\','],[-1,'                        IDENTIFIER: processID'],[-1,'                    },'],[-1,'                    success: function(response) {'],[0,'                        server.processDescription[processID] = response.responseText;'],[0,'                        this.events.triggerEvent(\'describeprocess\', {'],[-1,'                            identifier: processID,'],[-1,'                            raw: response.responseText'],[-1,'                        });'],[-1,'                    },'],[-1,'                    scope: this'],[-1,'                });'],[-1,'            } else {'],[-1,'                \/\/ pending request'],[0,'                this.events.register(\'describeprocess\', this, function describe(evt) {'],[0,'                    if (evt.identifier === processID) {'],[0,'                        this.events.unregister(\'describeprocess\', this, describe);'],[0,'                        callback.call(scope, evt.raw);'],[-1,'                    }'],[-1,'                });'],[-1,'            }'],[-1,'        } else {'],[0,'            window.setTimeout(function() {'],[0,'                callback.call(scope, server.processDescription[processID]);'],[-1,'            }, 0);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.events.destroy();'],[0,'        this.events = null;'],[0,'        this.servers = null;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \'OpenLayers.WPSClient\''],[-1,'    '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/CSWGetRecords\/v2_0_2.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/CSWGetRecords.js'],[-1,' * @requires OpenLayers\/Format\/Filter\/v1_0_0.js'],[-1,' * @requires OpenLayers\/Format\/Filter\/v1_1_0.js'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1_0_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.CSWGetRecords.v2_0_2'],[-1,' *     A format for creating CSWGetRecords v2.0.2 transactions. '],[-1,' *     Create a new instance with the'],[-1,' *     &lt;OpenLayers.Format.CSWGetRecords.v2_0_2&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.CSWGetRecords.v2_0_2 = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        csw: \&quot;http:\/\/www.opengis.net\/cat\/csw\/2.0.2\&quot;,'],[-1,'        dc: \&quot;http:\/\/purl.org\/dc\/elements\/1.1\/\&quot;,'],[-1,'        dct: \&quot;http:\/\/purl.org\/dc\/terms\/\&quot;,'],[-1,'        gmd: \&quot;http:\/\/www.isotc211.org\/2005\/gmd\&quot;,'],[-1,'        geonet: \&quot;http:\/\/www.fao.org\/geonetwork\&quot;,'],[-1,'        ogc: \&quot;http:\/\/www.opengis.net\/ogc\&quot;,'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     * {String} The default prefix (used by Format.XML).'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;csw\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} CSW version number.'],[-1,'     *\/'],[-1,'    version: \&quot;2.0.2\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} http:\/\/www.opengis.net\/cat\/csw\/2.0.2'],[-1,'     *   http:\/\/schemas.opengis.net\/csw\/2.0.2\/CSW-discovery.xsd'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/cat\/csw\/2.0.2 http:\/\/schemas.opengis.net\/csw\/2.0.2\/CSW-discovery.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: requestId'],[-1,'     * {String} Value of the requestId attribute of the GetRecords element.'],[-1,'     *\/'],[-1,'    requestId: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: resultType'],[-1,'     * {String} Value of the resultType attribute of the GetRecords element,'],[-1,'     *     specifies the result type in the GetRecords response, \&quot;hits\&quot; is'],[-1,'     *     the default.'],[-1,'     *\/'],[-1,'    resultType: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: outputFormat'],[-1,'     * {String} Value of the outputFormat attribute of the GetRecords element,'],[-1,'     *     specifies the format of the GetRecords response,'],[-1,'     *     \&quot;application\/xml\&quot; is the default.'],[-1,'     *\/'],[-1,'    outputFormat: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: outputSchema'],[-1,'     * {String} Value of the outputSchema attribute of the GetRecords element,'],[-1,'     *     specifies the schema of the GetRecords response.'],[-1,'     *\/'],[-1,'    outputSchema: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: startPosition'],[-1,'     * {String} Value of the startPosition attribute of the GetRecords element,'],[-1,'     *     specifies the start position (offset+1) for the GetRecords response,'],[-1,'     *     1 is the default.'],[-1,'     *\/'],[-1,'    startPosition: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxRecords'],[-1,'     * {String} Value of the maxRecords attribute of the GetRecords element,'],[-1,'     *     specifies the maximum number of records in the GetRecords response,'],[-1,'     *     10 is the default.'],[-1,'     *\/'],[-1,'    maxRecords: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: DistributedSearch'],[-1,'     * {String} Value of the csw:DistributedSearch element, used when writing'],[-1,'     *     a csw:GetRecords document.'],[-1,'     *\/'],[-1,'    DistributedSearch: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: ResponseHandler'],[-1,'     * {Array({String})} Values of the csw:ResponseHandler elements, used when'],[-1,'     *     writting a csw:GetRecords document.'],[-1,'     *\/'],[-1,'    ResponseHandler: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: Query'],[-1,'     * {String} Value of the csw:Query element, used when writing a csw:GetRecords'],[-1,'     *     document.'],[-1,'     *\/'],[-1,'    Query: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.CSWGetRecords.v2_0_2'],[-1,'     * A class for parsing and generating CSWGetRecords v2.0.2 transactions.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *'],[-1,'     * Valid options properties (documented as class properties):'],[-1,'     * - requestId'],[-1,'     * - resultType'],[-1,'     * - outputFormat'],[-1,'     * - outputSchema'],[-1,'     * - startPosition'],[-1,'     * - maxRecords'],[-1,'     * - DistributedSearch'],[-1,'     * - ResponseHandler'],[-1,'     * - Query'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Parse the response from a GetRecords request.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) { '],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var obj = {};'],[0,'        this.readNode(data, obj);'],[0,'        return obj;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;csw\&quot;: {'],[-1,'            \&quot;GetRecordsResponse\&quot;: function(node, obj) {'],[0,'                obj.records = [];'],[0,'                this.readChildNodes(node, obj);'],[0,'                var version = this.getAttributeNS(node, \&quot;\&quot;, \'version\');'],[0,'                if (version != \&quot;\&quot;) {'],[0,'                    obj.version = version;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;RequestId\&quot;: function(node, obj) {'],[0,'                obj.RequestId = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;SearchStatus\&quot;: function(node, obj) {'],[0,'                obj.SearchStatus = {};'],[0,'                var timestamp = this.getAttributeNS(node, \&quot;\&quot;, \'timestamp\');'],[0,'                if (timestamp != \&quot;\&quot;) {'],[0,'                    obj.SearchStatus.timestamp = timestamp;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;SearchResults\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[0,'                var attrs = node.attributes;'],[0,'                var SearchResults = {};'],[0,'                for(var i=0, len=attrs.length; i&lt;len; ++i) {'],[0,'                    if ((attrs[i].name == \&quot;numberOfRecordsMatched\&quot;) ||'],[-1,'                        (attrs[i].name == \&quot;numberOfRecordsReturned\&quot;) ||'],[-1,'                        (attrs[i].name == \&quot;nextRecord\&quot;)) {'],[0,'                        SearchResults[attrs[i].name] = parseInt(attrs[i].nodeValue);'],[-1,'                    } else {'],[0,'                        SearchResults[attrs[i].name] = attrs[i].nodeValue;'],[-1,'                    }'],[-1,'                }'],[0,'                obj.SearchResults = SearchResults;'],[-1,'            },'],[-1,'            \&quot;SummaryRecord\&quot;: function(node, obj) {'],[0,'                var record = {type: \&quot;SummaryRecord\&quot;};'],[0,'                this.readChildNodes(node, record);'],[0,'                obj.records.push(record);'],[-1,'            },'],[-1,'            \&quot;BriefRecord\&quot;: function(node, obj) {'],[0,'                var record = {type: \&quot;BriefRecord\&quot;};'],[0,'                this.readChildNodes(node, record);'],[0,'                obj.records.push(record);'],[-1,'            },'],[-1,'            \&quot;DCMIRecord\&quot;: function(node, obj) {'],[0,'                var record = {type: \&quot;DCMIRecord\&quot;};'],[0,'                this.readChildNodes(node, record);'],[0,'                obj.records.push(record);'],[-1,'            },'],[-1,'            \&quot;Record\&quot;: function(node, obj) {'],[0,'                var record = {type: \&quot;Record\&quot;};'],[0,'                this.readChildNodes(node, record);'],[0,'                obj.records.push(record);'],[-1,'            },'],[-1,'            \&quot;*\&quot;: function(node, obj) {'],[0,'                var name = node.localName || node.nodeName.split(\&quot;:\&quot;).pop();'],[0,'                obj[name] = this.getChildValue(node);'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;geonet\&quot;: {'],[-1,'            \&quot;info\&quot;: function(node, obj) {'],[0,'                var gninfo = {};'],[0,'                this.readChildNodes(node, gninfo);'],[0,'                obj.gninfo = gninfo;'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;dc\&quot;: {'],[-1,'            \/\/ audience, contributor, coverage, creator, date, description, format,'],[-1,'            \/\/ identifier, language, provenance, publisher, relation, rights,'],[-1,'            \/\/ rightsHolder, source, subject, title, type, URI'],[-1,'            \&quot;*\&quot;: function(node, obj) {'],[0,'                var name = node.localName || node.nodeName.split(\&quot;:\&quot;).pop();'],[0,'                if (!(OpenLayers.Util.isArray(obj[name]))) {'],[0,'                    obj[name] = [];'],[-1,'                }'],[0,'                var dc_element = {};'],[0,'                var attrs = node.attributes;'],[0,'                for(var i=0, len=attrs.length; i&lt;len; ++i) {'],[0,'                    dc_element[attrs[i].name] = attrs[i].nodeValue;'],[-1,'                }'],[0,'                dc_element.value = this.getChildValue(node);'],[0,'                if (dc_element.value != \&quot;\&quot;) {'],[0,'                    obj[name].push(dc_element);'],[-1,'                }'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;dct\&quot;: {'],[-1,'            \/\/ abstract, modified, spatial'],[-1,'            \&quot;*\&quot;: function(node, obj) {'],[0,'                var name = node.localName || node.nodeName.split(\&quot;:\&quot;).pop();'],[0,'                if (!(OpenLayers.Util.isArray(obj[name]))) {'],[0,'                    obj[name] = [];'],[-1,'                }'],[0,'                obj[name].push(this.getChildValue(node));'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;ows\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;BoundingBox\&quot;: function(node, obj) {'],[0,'                if (obj.bounds) {'],[0,'                    obj.BoundingBox = [{crs: obj.projection, value: '],[-1,'                        ['],[-1,'                            obj.bounds.left, '],[-1,'                            obj.bounds.bottom, '],[-1,'                            obj.bounds.right, '],[-1,'                            obj.bounds.top'],[-1,'                    ]'],[-1,'                    }];'],[0,'                    delete obj.projection;'],[0,'                    delete obj.bounds;'],[-1,'                }'],[0,'                OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers[\&quot;ows\&quot;][\&quot;BoundingBox\&quot;].apply('],[-1,'                    this, arguments);'],[-1,'            }'],[-1,'        }, OpenLayers.Format.OWSCommon.v1_0_0.prototype.readers[\&quot;ows\&quot;])'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: write'],[-1,'     * Given an configuration js object, write a CSWGetRecords request. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} A object mapping the request.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A serialized CSWGetRecords request.'],[-1,'     *\/'],[-1,'    write: function(options) {'],[0,'        var node = this.writeNode(\&quot;csw:GetRecords\&quot;, options);'],[0,'        node.setAttribute(\&quot;xmlns:gmd\&quot;, this.namespaces.gmd);'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [node]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: writers'],[-1,'     * As a compliment to the readers property, this structure contains public'],[-1,'     *     writing functions grouped by namespace alias and named like the'],[-1,'     *     node names they produce.'],[-1,'     *\/'],[-1,'    writers: {'],[-1,'        \&quot;csw\&quot;: {'],[-1,'            \&quot;GetRecords\&quot;: function(options) {'],[0,'                if (!options) {'],[0,'                    options = {};'],[-1,'                }'],[0,'                var node = this.createElementNSPlus(\&quot;csw:GetRecords\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        service: \&quot;CSW\&quot;,'],[-1,'                        version: this.version,'],[-1,'                        requestId: options.requestId || this.requestId,'],[-1,'                        resultType: options.resultType || this.resultType,'],[-1,'                        outputFormat: options.outputFormat || this.outputFormat,'],[-1,'                        outputSchema: options.outputSchema || this.outputSchema,'],[-1,'                        startPosition: options.startPosition || this.startPosition,'],[-1,'                        maxRecords: options.maxRecords || this.maxRecords'],[-1,'                    }'],[-1,'                });'],[0,'                if (options.DistributedSearch || this.DistributedSearch) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;csw:DistributedSearch\&quot;,'],[-1,'                        options.DistributedSearch || this.DistributedSearch,'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                var ResponseHandler = options.ResponseHandler || this.ResponseHandler;'],[0,'                if (OpenLayers.Util.isArray(ResponseHandler) &amp;&amp; ResponseHandler.length &gt; 0) {'],[-1,'                    \/\/ ResponseHandler must be a non-empty array'],[0,'                    for(var i=0, len=ResponseHandler.length; i&lt;len; i++) {'],[0,'                        this.writeNode('],[-1,'                            \&quot;csw:ResponseHandler\&quot;,'],[-1,'                            ResponseHandler[i],'],[-1,'                            node'],[-1,'                        );'],[-1,'                    }'],[-1,'                }'],[0,'                this.writeNode(\&quot;Query\&quot;, options.Query || this.Query, node);'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;DistributedSearch\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;csw:DistributedSearch\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        hopCount: options.hopCount'],[-1,'                    }'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;ResponseHandler\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;csw:ResponseHandler\&quot;, {'],[-1,'                    value: options.value'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Query\&quot;: function(options) {'],[0,'                if (!options) {'],[0,'                    options = {};'],[-1,'                }'],[0,'                var node = this.createElementNSPlus(\&quot;csw:Query\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        typeNames: options.typeNames || \&quot;csw:Record\&quot;'],[-1,'                    }'],[-1,'                });'],[0,'                var ElementName = options.ElementName;'],[0,'                if (OpenLayers.Util.isArray(ElementName) &amp;&amp; ElementName.length &gt; 0) {'],[-1,'                    \/\/ ElementName must be a non-empty array'],[0,'                    for(var i=0, len=ElementName.length; i&lt;len; i++) {'],[0,'                        this.writeNode('],[-1,'                            \&quot;csw:ElementName\&quot;,'],[-1,'                            ElementName[i],'],[-1,'                            node'],[-1,'                        );'],[-1,'                    }'],[-1,'                } else {'],[0,'                    this.writeNode('],[-1,'                        \&quot;csw:ElementSetName\&quot;,'],[-1,'                        options.ElementSetName || {value: \'summary\'},'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                if (options.Constraint) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;csw:Constraint\&quot;,'],[-1,'                        options.Constraint,'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                if (options.SortBy) {'],[0,'                    this.writeNode('],[-1,'                        \&quot;ogc:SortBy\&quot;,'],[-1,'                        options.SortBy,'],[-1,'                        node'],[-1,'                    );'],[-1,'                }'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;ElementName\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;csw:ElementName\&quot;, {'],[-1,'                    value: options.value'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;ElementSetName\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;csw:ElementSetName\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        typeNames: options.typeNames'],[-1,'                    },'],[-1,'                    value: options.value'],[-1,'                });'],[0,'                return node;'],[-1,'            },'],[-1,'            \&quot;Constraint\&quot;: function(options) {'],[0,'                var node = this.createElementNSPlus(\&quot;csw:Constraint\&quot;, {'],[-1,'                    attributes: {'],[-1,'                        version: options.version'],[-1,'                    }'],[-1,'                });'],[0,'                if (options.Filter) {'],[0,'                    var format = new OpenLayers.Format.Filter({'],[-1,'                        version: options.version'],[-1,'                    });'],[0,'                    node.appendChild(format.write(options.Filter));'],[0,'                } else if (options.CqlText) {'],[0,'                    var child = this.createElementNSPlus(\&quot;CqlText\&quot;, {'],[-1,'                        value: options.CqlText.value'],[-1,'                    });'],[0,'                    node.appendChild(child);'],[-1,'                }'],[0,'                return node;'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;ogc\&quot;: OpenLayers.Format.Filter.v1_1_0.prototype.writers[\&quot;ogc\&quot;]'],[-1,'    },'],[-1,'   '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.CSWGetRecords.v2_0_2\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Marker\/Box.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Marker.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Marker.Box'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Marker&gt; '],[-1,' *\/'],[1,'OpenLayers.Marker.Box = OpenLayers.Class(OpenLayers.Marker, {'],[-1,''],[-1,'    \/** '],[-1,'     * Property: bounds '],[-1,'     * {&lt;OpenLayers.Bounds&gt;} '],[-1,'     *\/'],[-1,'    bounds: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: div '],[-1,'     * {DOMElement} '],[-1,'     *\/'],[-1,'    div: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Marker.Box'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} '],[-1,'     * borderColor - {String} '],[-1,'     * borderWidth - {int} '],[-1,'     *\/'],[-1,'    initialize: function(bounds, borderColor, borderWidth) {'],[0,'        this.bounds = bounds;'],[0,'        this.div    = OpenLayers.Util.createDiv();'],[0,'        this.div.style.overflow = \'hidden\';'],[0,'        this.events = new OpenLayers.Events(this, this.div);'],[0,'        this.setBorder(borderColor, borderWidth);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroy '],[-1,'     *\/    '],[-1,'    destroy: function() {'],[-1,''],[0,'        this.bounds = null;'],[0,'        this.div = null;'],[-1,''],[0,'        OpenLayers.Marker.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Method: setBorder'],[-1,'     * Allow the user to change the box\'s color and border width'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * color - {String} Default is \&quot;red\&quot;'],[-1,'     * width - {int} Default is 2'],[-1,'     *\/'],[-1,'    setBorder: function (color, width) {'],[0,'        if (!color) {'],[0,'            color = \&quot;red\&quot;;'],[-1,'        }'],[0,'        if (!width) {'],[0,'            width = 2;'],[-1,'        }'],[0,'        this.div.style.border = width + \&quot;px solid \&quot; + color;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'    * Method: draw'],[-1,'    * '],[-1,'    * Parameters:'],[-1,'    * px - {&lt;OpenLayers.Pixel&gt;} '],[-1,'    * sz - {&lt;OpenLayers.Size&gt;} '],[-1,'    * '],[-1,'    * Returns: '],[-1,'    * {DOMElement} A new DOM Image with this marker\'s icon set at the '],[-1,'    *         location passed-in'],[-1,'    *\/'],[-1,'    draw: function(px, sz) {'],[0,'        OpenLayers.Util.modifyDOMElement(this.div, null, px, sz);'],[0,'        return this.div;'],[-1,'    }, '],[-1,''],[-1,'    \/**'],[-1,'     * Method: onScreen'],[-1,'     * '],[-1,'     * Rreturn:'],[-1,'     * {Boolean} Whether or not the marker is currently visible on screen.'],[-1,'     *\/'],[-1,'    onScreen:function() {'],[0,'        var onScreen = false;'],[0,'        if (this.map) {'],[0,'            var screenBounds = this.map.getExtent();'],[0,'            onScreen = screenBounds.containsBounds(this.bounds, true, true);'],[-1,'        }    '],[0,'        return onScreen;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: display'],[-1,'     * Hide or show the icon'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * display - {Boolean} '],[-1,'     *\/'],[-1,'    display: function(display) {'],[0,'        this.div.style.display = (display) ? \&quot;\&quot; : \&quot;none\&quot;;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Marker.Box\&quot;'],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/Text.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.Text'],[-1,' * Read Text format. Create a new instance with the &lt;OpenLayers.Format.Text&gt;'],[-1,' *     constructor. This reads text which is formatted like CSV text, using'],[-1,' *     tabs as the seperator by default. It provides parsing of data originally'],[-1,' *     used in the MapViewerService, described on the wiki. This Format is used'],[-1,' *     by the &lt;OpenLayers.Layer.Text&gt; class.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.Text = OpenLayers.Class(OpenLayers.Format, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: defaultStyle'],[-1,'     * defaultStyle allows one to control the default styling of the features.'],[-1,'     *    It should be a symbolizer hash. By default, this is set to match the'],[-1,'     *    Layer.Text behavior, which is to use the default OpenLayers Icon.'],[-1,'     *\/'],[-1,'    defaultStyle: null,'],[-1,'     '],[-1,'    \/**'],[-1,'     * APIProperty: extractStyles'],[-1,'     * set to true to extract styles from the TSV files, using information'],[-1,'     * from the image or icon, iconSize and iconOffset fields. This will result'],[-1,'     * in features with a symbolizer (style) property set, using the'],[-1,'     * default symbolizer specified in &lt;defaultStyle&gt;. Set to false if you'],[-1,'     * wish to use a styleMap or OpenLayers.Style options to style your'],[-1,'     * layer instead.'],[-1,'     *\/'],[-1,'    extractStyles: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.Text'],[-1,'     * Create a new parser for TSV Text.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        options = options || {};'],[-1,''],[0,'        if(options.extractStyles !== false) {'],[0,'            options.defaultStyle = {'],[-1,'                \'externalGraphic\': OpenLayers.Util.getImageLocation(\&quot;marker.png\&quot;),'],[-1,'                \'graphicWidth\': 21,'],[-1,'                \'graphicHeight\': 25,'],[-1,'                \'graphicXOffset\': -10.5,'],[-1,'                \'graphicYOffset\': -12.5'],[-1,'            };'],[-1,'        }'],[-1,'        '],[0,'        OpenLayers.Format.prototype.initialize.apply(this, [options]);'],[-1,'    }, '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Return a list of features from a Tab Seperated Values text string.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * text - {String} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * Array({&lt;OpenLayers.Feature.Vector&gt;})'],[-1,'     *\/'],[-1,'    read: function(text) {'],[0,'        var lines = text.split(\'\\n\');'],[0,'        var columns;'],[0,'        var features = [];'],[-1,'        \/\/ length - 1 to allow for trailing new line'],[0,'        for (var lcv = 0; lcv &lt; (lines.length - 1); lcv++) {'],[0,'            var currLine = lines[lcv].replace(\/^\\s*\/,\'\').replace(\/\\s*$\/,\'\');'],[-1,'        '],[0,'            if (currLine.charAt(0) != \'#\') { \/* not a comment *\/'],[-1,'            '],[0,'                if (!columns) {'],[-1,'                    \/\/First line is columns'],[0,'                    columns = currLine.split(\'\\t\');'],[-1,'                } else {'],[0,'                    var vals = currLine.split(\'\\t\');'],[0,'                    var geometry = new OpenLayers.Geometry.Point(0,0);'],[0,'                    var attributes = {};'],[0,'                    var style = this.defaultStyle ? '],[-1,'                        OpenLayers.Util.applyDefaults({}, this.defaultStyle) :'],[-1,'                        null;  '],[0,'                    var icon, iconSize, iconOffset, overflow;'],[0,'                    var set = false;'],[0,'                    for (var valIndex = 0; valIndex &lt; vals.length; valIndex++) {'],[0,'                        if (vals[valIndex]) {'],[0,'                            if (columns[valIndex] == \'point\') {'],[0,'                                var coords = vals[valIndex].split(\',\');'],[0,'                                geometry.y = parseFloat(coords[0]);'],[0,'                                geometry.x = parseFloat(coords[1]);'],[0,'                                set = true;'],[0,'                            } else if (columns[valIndex] == \'lat\') {'],[0,'                                geometry.y = parseFloat(vals[valIndex]);'],[0,'                                set = true;'],[0,'                            } else if (columns[valIndex] == \'lon\') {'],[0,'                                geometry.x = parseFloat(vals[valIndex]);'],[0,'                                set = true;'],[0,'                            } else if (columns[valIndex] == \'title\')'],[0,'                                attributes[\'title\'] = vals[valIndex];'],[0,'                            else if (columns[valIndex] == \'image\' ||'],[-1,'                                     columns[valIndex] == \'icon\' &amp;&amp; style) {'],[0,'                                style[\'externalGraphic\'] = vals[valIndex];'],[0,'                            } else if (columns[valIndex] == \'iconSize\' &amp;&amp; style) {'],[0,'                                var size = vals[valIndex].split(\',\');'],[0,'                                style[\'graphicWidth\'] = parseFloat(size[0]);'],[0,'                                style[\'graphicHeight\'] = parseFloat(size[1]);'],[0,'                            } else if (columns[valIndex] == \'iconOffset\' &amp;&amp; style) {'],[0,'                                var offset = vals[valIndex].split(\',\');'],[0,'                                style[\'graphicXOffset\'] = parseFloat(offset[0]);'],[0,'                                style[\'graphicYOffset\'] = parseFloat(offset[1]);'],[0,'                            } else if (columns[valIndex] == \'description\') {'],[0,'                                attributes[\'description\'] = vals[valIndex];'],[0,'                            } else if (columns[valIndex] == \'overflow\') {'],[0,'                                attributes[\'overflow\'] = vals[valIndex];'],[-1,'                            } else {'],[-1,'                                \/\/ For StyleMap filtering, allow additional'],[-1,'                                \/\/ columns to be stored as attributes.'],[0,'                                attributes[columns[valIndex]] = vals[valIndex];'],[-1,'                            }    '],[-1,'                        }'],[-1,'                    }'],[0,'                    if (set) {'],[0,'                      if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'                          geometry.transform(this.externalProjection, '],[-1,'                                             this.internalProjection); '],[-1,'                      }'],[0,'                      var feature = new OpenLayers.Feature.Vector(geometry, attributes, style);'],[0,'                      features.push(feature);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return features;'],[-1,'    },   '],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.Text\&quot; '],[-1,'});    '],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/Text.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Markers.js'],[-1,' * @requires OpenLayers\/Format\/Text.js'],[-1,' * @requires OpenLayers\/Request\/XMLHttpRequest.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.Text'],[-1,' * This layer creates markers given data in a text file.  The &lt;location&gt;'],[-1,' *     property of the layer (specified as a property of the options argument'],[-1,' *     in the &lt;OpenLayers.Layer.Text&gt; constructor) points to a tab delimited'],[-1,' *     file with data used to create markers.'],[-1,' *'],[-1,' * The first row of the data file should be a header line with the column names'],[-1,' *     of the data. Each column should be delimited by a tab space. The'],[-1,' *     possible columns are:'],[-1,' *      - *point* lat,lon of the point where a marker is to be placed'],[-1,' *      - *lat*  Latitude of the point where a marker is to be placed'],[-1,' *      - *lon*  Longitude of the point where a marker is to be placed'],[-1,' *      - *icon* or *image* URL of marker icon to use.'],[-1,' *      - *iconSize* Size of Icon to use.'],[-1,' *      - *iconOffset* Where the top-left corner of the icon is to be placed'],[-1,' *            relative to the latitude and longitude of the point.'],[-1,' *      - *title* The text of the \'title\' is placed inside an \'h2\' marker'],[-1,' *            inside a popup, which opens when the marker is clicked.'],[-1,' *      - *description* The text of the \'description\' is placed below the h2'],[-1,' *            in the popup. this can be plain text or HTML.'],[-1,' *'],[-1,' * Example text file:'],[-1,' * (code)'],[-1,' * lat\tlon\ttitle\tdescription\ticonSize\ticonOffset\ticon'],[-1,' * 10\t20\ttitle\tdescription\t21,25\t\t-10,-25\t\thttp:\/\/www.openlayers.org\/dev\/img\/marker.png'],[-1,' * (end)'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Markers&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.Text = OpenLayers.Class(OpenLayers.Layer.Markers, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: location '],[-1,'     * {String} URL of text file.  Must be specified in the \&quot;options\&quot; argument'],[-1,'     *   of the constructor. Can not be changed once passed in. '],[-1,'     *\/'],[-1,'    location:null,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: features'],[-1,'     * {Array(&lt;OpenLayers.Feature&gt;)} '],[-1,'     *\/'],[-1,'    features: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: formatOptions'],[-1,'     * {Object} Hash of options which should be passed to the format when it is'],[-1,'     * created. Must be passed in the constructor.'],[-1,'     *\/'],[-1,'    formatOptions: null, '],[-1,''],[-1,'    \/** '],[-1,'     * Property: selectedFeature'],[-1,'     * {&lt;OpenLayers.Feature&gt;}'],[-1,'     *\/'],[-1,'    selectedFeature: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.Text'],[-1,'     * Create a text layer.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * name - {String} '],[-1,'     * options - {Object} Object with properties to be set on the layer.'],[-1,'     *     Must include &lt;location&gt; property.'],[-1,'     *\/'],[-1,'    initialize: function(name, options) {'],[0,'        OpenLayers.Layer.Markers.prototype.initialize.apply(this, arguments);'],[0,'        this.features = [];'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy '],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,'        \/\/ Warning: Layer.Markers.destroy() must be called prior to calling'],[-1,'        \/\/ clearFeatures() here, otherwise we leak memory. Indeed, if'],[-1,'        \/\/ Layer.Markers.destroy() is called after clearFeatures(), it won\'t be'],[-1,'        \/\/ able to remove the marker image elements from the layer\'s div since'],[-1,'        \/\/ the markers will have been destroyed by clearFeatures().'],[0,'        OpenLayers.Layer.Markers.prototype.destroy.apply(this, arguments);'],[0,'        this.clearFeatures();'],[0,'        this.features = null;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: loadText'],[-1,'     * Start the load of the Text data. Don\'t do this when we first add the layer,'],[-1,'     * since we may not be visible at any point, and it would therefore be a waste.'],[-1,'     *\/'],[-1,'    loadText: function() {'],[0,'        if (!this.loaded) {'],[0,'            if (this.location != null) {'],[-1,''],[0,'                var onFail = function(e) {'],[0,'                    this.events.triggerEvent(\&quot;loadend\&quot;);'],[-1,'                };'],[-1,''],[0,'                this.events.triggerEvent(\&quot;loadstart\&quot;);'],[0,'                OpenLayers.Request.GET({'],[-1,'                    url: this.location,'],[-1,'                    success: this.parseData,'],[-1,'                    failure: onFail,'],[-1,'                    scope: this'],[-1,'                });'],[0,'                this.loaded = true;'],[-1,'            }'],[-1,'        }    '],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     * If layer is visible and Text has not been loaded, load Text. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {Object} '],[-1,'     * zoomChanged - {Object} '],[-1,'     * minor - {Object} '],[-1,'     *\/'],[-1,'    moveTo:function(bounds, zoomChanged, minor) {'],[0,'        OpenLayers.Layer.Markers.prototype.moveTo.apply(this, arguments);'],[0,'        if(this.visibility &amp;&amp; !this.loaded){'],[0,'            this.loadText();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseData'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * ajaxRequest - {&lt;OpenLayers.Request.XMLHttpRequest&gt;} '],[-1,'     *\/'],[-1,'    parseData: function(ajaxRequest) {'],[0,'        var text = ajaxRequest.responseText;'],[-1,'        '],[0,'        var options = {};'],[-1,'        '],[0,'        OpenLayers.Util.extend(options, this.formatOptions);'],[-1,'        '],[0,'        if (this.map &amp;&amp; !this.projection.equals(this.map.getProjectionObject())) {'],[0,'            options.externalProjection = this.projection;'],[0,'            options.internalProjection = this.map.getProjectionObject();'],[-1,'        }    '],[-1,'        '],[0,'        var parser = new OpenLayers.Format.Text(options);'],[0,'        var features = parser.read(text);'],[0,'        for (var i=0, len=features.length; i&lt;len; i++) {'],[0,'            var data = {};'],[0,'            var feature = features[i];'],[0,'            var location;'],[0,'            var iconSize, iconOffset;'],[-1,'            '],[0,'            location = new OpenLayers.LonLat(feature.geometry.x, '],[-1,'                                             feature.geometry.y);'],[-1,'            '],[0,'            if (feature.style.graphicWidth '],[-1,'                &amp;&amp; feature.style.graphicHeight) {'],[0,'                iconSize = new OpenLayers.Size('],[-1,'                    feature.style.graphicWidth,'],[-1,'                    feature.style.graphicHeight);'],[-1,'            }        '],[-1,'            '],[-1,'            \/\/ FIXME: At the moment, we only use this if we have an '],[-1,'            \/\/ externalGraphic, because icon has no setOffset API Method.'],[-1,'            \/**'],[-1,'             * FIXME FIRST!!'],[-1,'             * The Text format does all sorts of parseFloating'],[-1,'             * The result of a parseFloat for a bogus string is NaN.  That'],[-1,'             * means the three possible values here are undefined, NaN, or a'],[-1,'             * number.  The previous check was an identity check for null.  This'],[-1,'             * means it was failing for all undefined or NaN.  A slightly better'],[-1,'             * check is for undefined.  An even better check is to see if the'],[-1,'             * value is a number (see #1441).'],[-1,'             *\/'],[0,'            if (feature.style.graphicXOffset !== undefined'],[-1,'                &amp;&amp; feature.style.graphicYOffset !== undefined) {'],[0,'                iconOffset = new OpenLayers.Pixel('],[-1,'                    feature.style.graphicXOffset, '],[-1,'                    feature.style.graphicYOffset);'],[-1,'            }'],[-1,'            '],[0,'            if (feature.style.externalGraphic != null) {'],[0,'                data.icon = new OpenLayers.Icon(feature.style.externalGraphic, '],[-1,'                                                iconSize, '],[-1,'                                                iconOffset);'],[-1,'            } else {'],[0,'                data.icon = OpenLayers.Marker.defaultIcon();'],[-1,''],[-1,'                \/\/allows for the case where the image url is not '],[-1,'                \/\/ specified but the size is. use a default icon'],[-1,'                \/\/ but change the size'],[0,'                if (iconSize != null) {'],[0,'                    data.icon.setSize(iconSize);'],[-1,'                }'],[-1,'            }'],[-1,'            '],[0,'            if ((feature.attributes.title != null) '],[-1,'                &amp;&amp; (feature.attributes.description != null)) {'],[0,'                data[\'popupContentHTML\'] = '],[-1,'                    \'&lt;h2&gt;\'+feature.attributes.title+\'&lt;\/h2&gt;\' + '],[-1,'                    \'&lt;p&gt;\'+feature.attributes.description+\'&lt;\/p&gt;\';'],[-1,'            }'],[-1,'            '],[0,'            data[\'overflow\'] = feature.attributes.overflow || \&quot;auto\&quot;; '],[-1,'            '],[0,'            var markerFeature = new OpenLayers.Feature(this, location, data);'],[0,'            this.features.push(markerFeature);'],[0,'            var marker = markerFeature.createMarker();'],[0,'            if ((feature.attributes.title != null) '],[-1,'                &amp;&amp; (feature.attributes.description != null)) {'],[0,'              marker.events.register(\'click\', markerFeature, this.markerClick);'],[-1,'            }'],[0,'            this.addMarker(marker);'],[-1,'        }'],[0,'        this.events.triggerEvent(\&quot;loadend\&quot;);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: markerClick'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *'],[-1,'     * Context:'],[-1,'     * - {&lt;OpenLayers.Feature&gt;}'],[-1,'     *\/'],[-1,'    markerClick: function(evt) {'],[0,'        var sameMarkerClicked = (this == this.layer.selectedFeature);'],[0,'        this.layer.selectedFeature = (!sameMarkerClicked) ? this : null;'],[0,'        for(var i=0, len=this.layer.map.popups.length; i&lt;len; i++) {'],[0,'            this.layer.map.removePopup(this.layer.map.popups[i]);'],[-1,'        }'],[0,'        if (!sameMarkerClicked) {'],[0,'            this.layer.map.addPopup(this.createPopup()); '],[-1,'        }'],[0,'        OpenLayers.Event.stop(evt);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clearFeatures'],[-1,'     *\/'],[-1,'    clearFeatures: function() {'],[0,'        if (this.features != null) {'],[0,'            while(this.features.length &gt; 0) {'],[0,'                var feature = this.features[0];'],[0,'                OpenLayers.Util.removeItem(this.features, feature);'],[0,'                feature.destroy();'],[-1,'            }'],[-1,'        }        '],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.Text\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Scale.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Lang.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Scale'],[-1,' * The Scale control displays the current map scale as a ratio (e.g. Scale = '],[-1,' * 1:1M). By default it is displayed in the lower right corner of the map.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.Scale = OpenLayers.Class(OpenLayers.Control, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: element'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    element: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: geodesic'],[-1,'     * {Boolean} Use geodesic measurement. Default is false. The recommended'],[-1,'     * setting for maps in EPSG:4326 is false, and true EPSG:900913. If set to'],[-1,'     * true, the scale will be calculated based on the horizontal size of the'],[-1,'     * pixel in the center of the map viewport.'],[-1,'     *\/'],[-1,'    geodesic: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.Scale'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * element - {DOMElement} '],[-1,'     * options - {Object} '],[-1,'     *\/'],[-1,'    initialize: function(element, options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[0,'        this.element = OpenLayers.Util.getElement(element);        '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/    '],[-1,'    draw: function() {'],[0,'        OpenLayers.Control.prototype.draw.apply(this, arguments);'],[0,'        if (!this.element) {'],[0,'            this.element = document.createElement(\&quot;div\&quot;);'],[0,'            this.div.appendChild(this.element);'],[-1,'        }'],[0,'        this.map.events.register( \'moveend\', this, this.updateScale);'],[0,'        this.updateScale();'],[0,'        return this.div;'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * Method: updateScale'],[-1,'     *\/'],[-1,'    updateScale: function() {'],[0,'        var scale;'],[0,'        if(this.geodesic === true) {'],[0,'            var units = this.map.getUnits();'],[0,'            if(!units) {'],[0,'                return;'],[-1,'            }'],[0,'            var inches = OpenLayers.INCHES_PER_UNIT;'],[0,'            scale = (this.map.getGeodesicPixelSize().w || 0.000001) *'],[-1,'                    inches[\&quot;km\&quot;] * OpenLayers.DOTS_PER_INCH;'],[-1,'        } else {'],[0,'            scale = this.map.getScale();'],[-1,'        }'],[-1,'            '],[0,'        if (!scale) {'],[0,'            return;'],[-1,'        }'],[-1,''],[0,'        if (scale &gt;= 9500 &amp;&amp; scale &lt;= 950000) {'],[0,'            scale = Math.round(scale \/ 1000) + \&quot;K\&quot;;'],[0,'        } else if (scale &gt;= 950000) {'],[0,'            scale = Math.round(scale \/ 1000000) + \&quot;M\&quot;;'],[-1,'        } else {'],[0,'            scale = Math.round(scale);'],[-1,'        }    '],[-1,'        '],[0,'        this.element.innerHTML = OpenLayers.i18n(\&quot;Scale = 1 : ${scaleDenom}\&quot;, {\'scaleDenom\':scale});'],[-1,'    }, '],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Scale\&quot;'],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler\/RegularPolygon.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler\/Drag.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Handler.RegularPolygon'],[-1,' * Handler to draw a regular polygon on the map.  Polygon is displayed on mouse'],[-1,' *     down, moves or is modified on mouse move, and is finished on mouse up.'],[-1,' *     The handler triggers callbacks for \'done\' and \'cancel\'.  Create a new'],[-1,' *     instance with the &lt;OpenLayers.Handler.RegularPolygon&gt; constructor.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Handler.Drag&gt;'],[-1,' *\/'],[1,'OpenLayers.Handler.RegularPolygon = OpenLayers.Class(OpenLayers.Handler.Drag, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: sides'],[-1,'     * {Integer} Number of sides for the regular polygon.  Needs to be greater'],[-1,'     *     than 2.  Defaults to 4.'],[-1,'     *\/'],[-1,'    sides: 4,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: radius'],[-1,'     * {Float} Optional radius in map units of the regular polygon.  If this is'],[-1,'     *     set to some non-zero value, a polygon with a fixed radius will be'],[-1,'     *     drawn and dragged with mose movements.  If this property is not'],[-1,'     *     set, dragging changes the radius of the polygon.  Set to null by'],[-1,'     *     default.'],[-1,'     *\/'],[-1,'    radius: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: snapAngle'],[-1,'     * {Float} If set to a non-zero value, the handler will snap the polygon'],[-1,'     *     rotation to multiples of the snapAngle.  Value is an angle measured'],[-1,'     *     in degrees counterclockwise from the positive x-axis.  '],[-1,'     *\/'],[-1,'    snapAngle: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: snapToggle'],[-1,'     * {String} If set, snapToggle is checked on mouse events and will set'],[-1,'     *     the snap mode to the opposite of what it currently is.  To disallow'],[-1,'     *     toggling between snap and non-snap mode, set freehandToggle to'],[-1,'     *     null.  Acceptable toggle values are \'shiftKey\', \'ctrlKey\', and'],[-1,'     *     \'altKey\'. Snap mode is only possible if this.snapAngle is set to a'],[-1,'     *     non-zero value.'],[-1,'     *\/'],[-1,'    snapToggle: \'shiftKey\','],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: layerOptions'],[-1,'     * {Object} Any optional properties to be set on the sketch layer.'],[-1,'     *\/'],[-1,'    layerOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: persist'],[-1,'     * {Boolean} Leave the feature rendered until clear is called.  Default'],[-1,'     *     is false.  If set to true, the feature remains rendered until'],[-1,'     *     clear is called, typically by deactivating the handler or starting'],[-1,'     *     another drawing.'],[-1,'     *\/'],[-1,'    persist: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: irregular'],[-1,'     * {Boolean} Draw an irregular polygon instead of a regular polygon.'],[-1,'     *     Default is false.  If true, the initial mouse down will represent'],[-1,'     *     one corner of the polygon bounds and with each mouse movement, the'],[-1,'     *     polygon will be stretched so the opposite corner of its bounds'],[-1,'     *     follows the mouse position.  This property takes precedence over'],[-1,'     *     the radius property.  If set to true, the radius property will'],[-1,'     *     be ignored.'],[-1,'     *\/'],[-1,'    irregular: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: citeCompliant'],[-1,'     * {Boolean} If set to true, coordinates of features drawn in a map extent'],[-1,'     * crossing the date line won\'t exceed the world bounds. Default is false.'],[-1,'     *\/'],[-1,'    citeCompliant: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: angle'],[-1,'     * {Float} The angle from the origin (mouse down) to the current mouse'],[-1,'     *     position, in radians.  This is measured counterclockwise from the'],[-1,'     *     positive x-axis.'],[-1,'     *\/'],[-1,'    angle: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: fixedRadius'],[-1,'     * {Boolean} The polygon has a fixed radius.  True if a radius is set before'],[-1,'     *     drawing begins.  False otherwise.'],[-1,'     *\/'],[-1,'    fixedRadius: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: feature'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} The currently drawn polygon feature'],[-1,'     *\/'],[-1,'    feature: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layer'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;} The temporary drawing layer'],[-1,'     *\/'],[-1,'    layer: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: origin'],[-1,'     * {&lt;OpenLayers.Geometry.Point&gt;} Location of the first mouse down'],[-1,'     *\/'],[-1,'    origin: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler.RegularPolygon'],[-1,'     * Create a new regular polygon handler.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} The control that owns this handler'],[-1,'     * callbacks - {Object} An object with a properties whose values are'],[-1,'     *     functions.  Various callbacks described below.'],[-1,'     * options - {Object} An object with properties to be set on the handler.'],[-1,'     *     If the options.sides property is not specified, the number of sides'],[-1,'     *     will default to 4.'],[-1,'     *'],[-1,'     * Named callbacks:'],[-1,'     * create - Called when a sketch is first created.  Callback called with'],[-1,'     *     the creation point geometry and sketch feature.'],[-1,'     * done - Called when the sketch drawing is finished.  The callback will'],[-1,'     *     recieve a single argument, the sketch geometry.'],[-1,'     * cancel - Called when the handler is deactivated while drawing.  The'],[-1,'     *     cancel callback will receive a geometry.'],[-1,'     *\/'],[-1,'    initialize: function(control, callbacks, options) {'],[0,'        if(!(options &amp;&amp; options.layerOptions &amp;&amp; options.layerOptions.styleMap)) {'],[0,'            this.style = OpenLayers.Util.extend(OpenLayers.Feature.Vector.style[\'default\'], {});'],[-1,'        }'],[-1,''],[0,'        OpenLayers.Handler.Drag.prototype.initialize.apply(this,'],[-1,'                                                [control, callbacks, options]);'],[0,'        this.options = (options) ? options : {};'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setOptions'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * newOptions - {Object} '],[-1,'     *\/'],[-1,'    setOptions: function (newOptions) {'],[0,'        OpenLayers.Util.extend(this.options, newOptions);'],[0,'        OpenLayers.Util.extend(this, newOptions);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Turn on the handler.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The handler was successfully activated'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = false;'],[0,'        if(OpenLayers.Handler.Drag.prototype.activate.apply(this, arguments)) {'],[-1,'            \/\/ create temporary vector layer for rendering geometry sketch'],[0,'            var options = OpenLayers.Util.extend({'],[-1,'                displayInLayerSwitcher: false,'],[-1,'                \/\/ indicate that the temp vector layer will never be out of range'],[-1,'                \/\/ without this, resolution properties must be specified at the'],[-1,'                \/\/ map-level for this temporary layer to init its resolutions'],[-1,'                \/\/ correctly'],[-1,'                calculateInRange: OpenLayers.Function.True,'],[-1,'                wrapDateLine: this.citeCompliant'],[-1,'            }, this.layerOptions);'],[0,'            this.layer = new OpenLayers.Layer.Vector(this.CLASS_NAME, options);'],[0,'            this.map.addLayer(this.layer);'],[0,'            activated = true;'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Turn off the handler.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The handler was successfully deactivated'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = false;'],[0,'        if(OpenLayers.Handler.Drag.prototype.deactivate.apply(this, arguments)) {'],[-1,'            \/\/ call the cancel callback if mid-drawing'],[0,'            if(this.dragging) {'],[0,'                this.cancel();'],[-1,'            }'],[-1,'            \/\/ If a layer\'s map property is set to null, it means that that'],[-1,'            \/\/ layer isn\'t added to the map. Since we ourself added the layer'],[-1,'            \/\/ to the map in activate(), we can assume that if this.layer.map'],[-1,'            \/\/ is null it means that the layer has been destroyed (as a result'],[-1,'            \/\/ of map.destroy() for example.'],[0,'            if (this.layer.map != null) {'],[0,'                this.layer.destroy(false);'],[0,'                if (this.feature) {'],[0,'                    this.feature.destroy();'],[-1,'                }'],[-1,'            }'],[0,'            this.layer = null;'],[0,'            this.feature = null;'],[0,'            deactivated = true;'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: down'],[-1,'     * Start drawing a new feature'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The drag start event'],[-1,'     *\/'],[-1,'    down: function(evt) {'],[0,'        this.fixedRadius = !!(this.radius);'],[0,'        var maploc = this.layer.getLonLatFromViewPortPx(evt.xy); '],[0,'        this.origin = new OpenLayers.Geometry.Point(maploc.lon, maploc.lat);'],[-1,'        \/\/ create the new polygon'],[0,'        if(!this.fixedRadius || this.irregular) {'],[-1,'            \/\/ smallest radius should not be less one pixel in map units'],[-1,'            \/\/ VML doesn\'t behave well with smaller'],[0,'            this.radius = this.map.getResolution();'],[-1,'        }'],[0,'        if(this.persist) {'],[0,'            this.clear();'],[-1,'        }'],[0,'        this.feature = new OpenLayers.Feature.Vector();'],[0,'        this.createGeometry();'],[0,'        this.callback(\&quot;create\&quot;, [this.origin, this.feature]);'],[0,'        this.layer.addFeatures([this.feature], {silent: true});'],[0,'        this.layer.drawFeature(this.feature, this.style);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: move'],[-1,'     * Respond to drag move events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Evt} The move event'],[-1,'     *\/'],[-1,'    move: function(evt) {'],[0,'        var maploc = this.layer.getLonLatFromViewPortPx(evt.xy); '],[0,'        var point = new OpenLayers.Geometry.Point(maploc.lon, maploc.lat);'],[0,'        if(this.irregular) {'],[0,'            var ry = Math.sqrt(2) * Math.abs(point.y - this.origin.y) \/ 2;'],[0,'            this.radius = Math.max(this.map.getResolution() \/ 2, ry);'],[0,'        } else if(this.fixedRadius) {'],[0,'            this.origin = point;'],[-1,'        } else {'],[0,'            this.calculateAngle(point, evt);'],[0,'            this.radius = Math.max(this.map.getResolution() \/ 2,'],[-1,'                                   point.distanceTo(this.origin));'],[-1,'        }'],[0,'        this.modifyGeometry();'],[0,'        if(this.irregular) {'],[0,'            var dx = point.x - this.origin.x;'],[0,'            var dy = point.y - this.origin.y;'],[0,'            var ratio;'],[0,'            if(dy == 0) {'],[0,'                ratio = dx \/ (this.radius * Math.sqrt(2));'],[-1,'            } else {'],[0,'                ratio = dx \/ dy;'],[-1,'            }'],[0,'            this.feature.geometry.resize(1, this.origin, ratio);'],[0,'            this.feature.geometry.move(dx \/ 2, dy \/ 2);'],[-1,'        }'],[0,'        this.layer.drawFeature(this.feature, this.style);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: up'],[-1,'     * Finish drawing the feature'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The mouse up event'],[-1,'     *\/'],[-1,'    up: function(evt) {'],[0,'        this.finalize();'],[-1,'        \/\/ the mouseup method of superclass doesn\'t call the'],[-1,'        \/\/ \&quot;done\&quot; callback if there\'s been no move between'],[-1,'        \/\/ down and up'],[0,'        if (this.start == this.last) {'],[0,'            this.callback(\&quot;done\&quot;, [evt.xy]);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: out'],[-1,'     * Finish drawing the feature.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} The mouse out event'],[-1,'     *\/'],[-1,'    out: function(evt) {'],[0,'        this.finalize();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createGeometry'],[-1,'     * Create the new polygon geometry.  This is called at the start of the'],[-1,'     *     drag and at any point during the drag if the number of sides'],[-1,'     *     changes.'],[-1,'     *\/'],[-1,'    createGeometry: function() {'],[0,'        this.angle = Math.PI * ((1\/this.sides) - (1\/2));'],[0,'        if(this.snapAngle) {'],[0,'            this.angle += this.snapAngle * (Math.PI \/ 180);'],[-1,'        }'],[0,'        this.feature.geometry = OpenLayers.Geometry.Polygon.createRegularPolygon('],[-1,'            this.origin, this.radius, this.sides, this.snapAngle'],[-1,'        );'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: modifyGeometry'],[-1,'     * Modify the polygon geometry in place.'],[-1,'     *\/'],[-1,'    modifyGeometry: function() {'],[0,'        var angle, point;'],[0,'        var ring = this.feature.geometry.components[0];'],[-1,'        \/\/ if the number of sides ever changes, create a new geometry'],[0,'        if(ring.components.length != (this.sides + 1)) {'],[0,'            this.createGeometry();'],[0,'            ring = this.feature.geometry.components[0];'],[-1,'        }'],[0,'        for(var i=0; i&lt;this.sides; ++i) {'],[0,'            point = ring.components[i];'],[0,'            angle = this.angle + (i * 2 * Math.PI \/ this.sides);'],[0,'            point.x = this.origin.x + (this.radius * Math.cos(angle));'],[0,'            point.y = this.origin.y + (this.radius * Math.sin(angle));'],[0,'            point.clearBounds();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: calculateAngle'],[-1,'     * Calculate the angle based on settings.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     * evt - {Event}'],[-1,'     *\/'],[-1,'    calculateAngle: function(point, evt) {'],[0,'        var alpha = Math.atan2(point.y - this.origin.y,'],[-1,'                               point.x - this.origin.x);'],[0,'        if(this.snapAngle &amp;&amp; (this.snapToggle &amp;&amp; !evt[this.snapToggle])) {'],[0,'            var snapAngleRad = (Math.PI \/ 180) * this.snapAngle;'],[0,'            this.angle = Math.round(alpha \/ snapAngleRad) * snapAngleRad;'],[-1,'        } else {'],[0,'            this.angle = alpha;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: cancel'],[-1,'     * Finish the geometry and call the \&quot;cancel\&quot; callback.'],[-1,'     *\/'],[-1,'    cancel: function() {'],[-1,'        \/\/ the polygon geometry gets cloned in the callback method'],[0,'        this.callback(\&quot;cancel\&quot;, null);'],[0,'        this.finalize();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: finalize'],[-1,'     * Finish the geometry and call the \&quot;done\&quot; callback.'],[-1,'     *\/'],[-1,'    finalize: function() {'],[0,'        this.origin = null;'],[0,'        this.radius = this.options.radius;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: clear'],[-1,'     * Clear any rendered features on the temporary layer.  This is called'],[-1,'     *     when the handler is deactivated, canceled, or done (unless persist'],[-1,'     *     is true).'],[-1,'     *\/'],[-1,'    clear: function() {'],[0,'        if (this.layer) {'],[0,'            this.layer.renderer.clear();'],[0,'            this.layer.destroyFeatures();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: callback'],[-1,'     * Trigger the control\'s named callback with the given arguments'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} The key for the callback that is one of the properties'],[-1,'     *     of the handler\'s callbacks object.'],[-1,'     * args - {Array} An array of arguments with which to call the callback'],[-1,'     *     (defined by the control).'],[-1,'     *\/'],[-1,'    callback: function (name, args) {'],[-1,'        \/\/ override the callback method to always send the polygon geometry'],[0,'        if (this.callbacks[name]) {'],[0,'            this.callbacks[name].apply(this.control,'],[-1,'                                       [this.feature.geometry.clone()]);'],[-1,'        }'],[-1,'        \/\/ since sketch features are added to the temporary layer'],[-1,'        \/\/ they must be cleared here if done or cancel'],[0,'        if(!this.persist &amp;&amp; (name == \&quot;done\&quot; || name == \&quot;cancel\&quot;)) {'],[0,'            this.clear();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler.RegularPolygon\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/MapGuide.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Request\/XMLHttpRequest.js'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.MapGuide'],[-1,' * Instances of OpenLayers.Layer.MapGuide are used to display'],[-1,' * data from a MapGuide OS instance.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.MapGuide = OpenLayers.Class(OpenLayers.Layer.Grid, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * {Boolean} Treat this layer as a base layer.  Default is true.'],[-1,'     **\/'],[-1,'    isBaseLayer: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: useHttpTile'],[-1,'     * {Boolean} use a tile cache exposed directly via a webserver rather than the '],[-1,'     *    via mapguide server. This does require extra configuration on the Mapguide Server,'],[-1,'     *    and will only work when singleTile is false. The url for the layer must be set to the'],[-1,'     *    webserver path rather than the Mapguide mapagent.'],[-1,'     *    See http:\/\/trac.osgeo.org\/mapguide\/wiki\/CodeSamples\/Tiles\/ServingTilesViaHttp'],[-1,'     **\/'],[-1,'    useHttpTile: false,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: singleTile'],[-1,'     * {Boolean} use tile server or request single tile image. '],[-1,'     **\/'],[-1,'    singleTile: false,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: useOverlay'],[-1,'     * {Boolean} flag to indicate if the layer should be retrieved using'],[-1,'     * GETMAPIMAGE (default) or using GETDYNAMICOVERLAY requests.'],[-1,'     **\/'],[-1,'    useOverlay: false,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: useAsyncOverlay'],[-1,'     * {Boolean} indicates if the MapGuide site supports the asynchronous '],[-1,'     * GETDYNAMICOVERLAY requests which is available in MapGuide Enterprise 2010'],[-1,'     * and MapGuide Open Source v2.0.3 or higher. The newer versions of MG '],[-1,'     * is called asynchronously, allows selections to be drawn separately from '],[-1,'     * the map and offers styling options.'],[-1,'     * '],[-1,'     * With older versions of MapGuide, set useAsyncOverlay=false.  Note that in'],[-1,'     * this case a synchronous AJAX call is issued and the mapname and session'],[-1,'     * parameters must be used to initialize the layer, not the mapdefinition'],[-1,'     * parameter. Also note that this will issue a synchronous AJAX request '],[-1,'     * before the image request can be issued so the users browser may lock'],[-1,'     * up if the MG Web tier does not respond in a timely fashion.'],[-1,'     **\/'],[-1,'    useAsyncOverlay: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: TILE_PARAMS'],[-1,'     * {Object} Hashtable of default parameter key\/value pairs for tiled layer'],[-1,'     *\/'],[-1,'    TILE_PARAMS: {'],[-1,'         operation: \'GETTILEIMAGE\','],[-1,'         version: \'1.2.0\''],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: SINGLE_TILE_PARAMS'],[-1,'     * {Object} Hashtable of default parameter key\/value pairs for untiled layer'],[-1,'     *\/'],[-1,'    SINGLE_TILE_PARAMS: {'],[-1,'        operation: \'GETMAPIMAGE\','],[-1,'        format: \'PNG\','],[-1,'        locale: \'en\','],[-1,'        clip: \'1\','],[-1,'        version: \'1.0.0\''],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: OVERLAY_PARAMS'],[-1,'     * {Object} Hashtable of default parameter key\/value pairs for untiled layer'],[-1,'     *\/'],[-1,'    OVERLAY_PARAMS: {'],[-1,'        operation: \'GETDYNAMICMAPOVERLAYIMAGE\','],[-1,'        format: \'PNG\','],[-1,'        locale: \'en\','],[-1,'        clip: \'1\','],[-1,'        version: \'2.0.0\''],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constant: FOLDER_PARAMS'],[-1,'     * {Object} Hashtable of parameter key\/value pairs which describe '],[-1,'     * the folder structure for tiles as configured in the mapguide '],[-1,'     * serverconfig.ini section [TileServiceProperties]'],[-1,'     *\/'],[-1,'    FOLDER_PARAMS: {'],[-1,'        tileColumnsPerFolder: 30,'],[-1,'        tileRowsPerFolder: 30,'],[-1,'        format: \'png\','],[-1,'        querystring: null'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * Property: defaultSize'],[-1,'     * {&lt;OpenLayers.Size&gt;} Tile size as produced by MapGuide server'],[-1,'     **\/'],[-1,'    defaultSize: new OpenLayers.Size(300,300),'],[-1,''],[-1,'    \/** '],[-1,'     * Property: tileOriginCorner'],[-1,'     * {String} MapGuide tile server uses top-left as tile origin'],[-1,'     **\/'],[-1,'    tileOriginCorner: \&quot;tl\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.MapGuide'],[-1,'     * Create a new Mapguide layer, either tiled or untiled.  '],[-1,'     *'],[-1,'     * For tiled layers, the \'groupName\' and \'mapDefinition\' values '],[-1,'     * must be specified as parameters in the constructor.'],[-1,'     *'],[-1,'     * For untiled base layers, specify either combination of \'mapName\' and'],[-1,'     * \'session\', or \'mapDefinition\' and \'locale\'.  '],[-1,'     *'],[-1,'     * For older versions of MapGuide and overlay layers, set useAsyncOverlay '],[-1,'     * to false and in this case mapName and session are required parameters '],[-1,'     * for the constructor.'],[-1,'     *'],[-1,'     * NOTE: MapGuide OS uses a DPI value and degrees to meters conversion '],[-1,'     * factor that are different than the defaults used in OpenLayers, '],[-1,'     * so these must be adjusted accordingly in your application.  '],[-1,'     * See the MapGuide example for how to set these values for MGOS.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} Name of the layer displayed in the interface'],[-1,'     * url - {String} Location of the MapGuide mapagent executable'],[-1,'     *            (e.g. http:\/\/localhost:8008\/mapguide\/mapagent\/mapagent.fcgi)'],[-1,'     * params - {Object} hashtable of additional parameters to use. Some'],[-1,'     *     parameters may require additional code on the server. The ones that'],[-1,'     *     you may want to use are: '],[-1,'     *   - mapDefinition - {String} The MapGuide resource definition'],[-1,'     *            (e.g. Library:\/\/Samples\/Gmap\/Maps\/gmapTiled.MapDefinition)'],[-1,'     *   - locale - Locale setting '],[-1,'     *            (for untiled overlays layers only)'],[-1,'     *   - mapName - {String} Name of the map as stored in the MapGuide session.'],[-1,'     *          (for untiled layers with a session parameter only)'],[-1,'     *   - session - { String} MapGuide session ID '],[-1,'     *            (for untiled overlays layers only)'],[-1,'     *   - basemaplayergroupname - {String} GroupName for tiled MapGuide layers only'],[-1,'     *   - format - Image format to be returned (for untiled overlay layers only)'],[-1,'     *   - showLayers - {String} A comma separated list of GUID\'s for the'],[-1,'     *       layers to display eg: \'cvc-xcv34,453-345-345sdf\'.'],[-1,'     *   - hideLayers - {String} A comma separated list of GUID\'s for the'],[-1,'     *       layers to hide eg: \'cvc-xcv34,453-345-345sdf\'.'],[-1,'     *   - showGroups - {String} A comma separated list of GUID\'s for the'],[-1,'     *       groups to display eg: \'cvc-xcv34,453-345-345sdf\'.'],[-1,'     *   - hideGroups - {String} A comma separated list of GUID\'s for the'],[-1,'     *       groups to hide eg: \'cvc-xcv34,453-345-345sdf\''],[-1,'     *   - selectionXml - {String} A selection xml string Some server plumbing'],[-1,'     *       is required to read such a value.'],[-1,'     * options - {Object} Hashtable of extra options to tag onto the layer; '],[-1,'     *          will vary depending if tiled or untiled maps are being requested'],[-1,'     *\/'],[-1,'    initialize: function(name, url, params, options) {'],[-1,'        '],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments);'],[-1,'        '],[-1,'        \/\/ unless explicitly set in options, if the layer is transparent, '],[-1,'        \/\/ it will be an overlay'],[0,'        if (options == null || options.isBaseLayer == null) {'],[0,'            this.isBaseLayer = ((this.transparent != \&quot;true\&quot;) &amp;&amp; '],[-1,'                                (this.transparent != true));'],[-1,'        }'],[-1,''],[0,'        if (options &amp;&amp; options.useOverlay!=null) {'],[0,'          this.useOverlay = options.useOverlay;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/initialize for untiled layers'],[0,'        if (this.singleTile) {'],[0,'          if (this.useOverlay) {'],[0,'            OpenLayers.Util.applyDefaults('],[-1,'                           this.params,'],[-1,'                           this.OVERLAY_PARAMS'],[-1,'                           );'],[0,'            if (!this.useAsyncOverlay) {'],[0,'              this.params.version = \&quot;1.0.0\&quot;;'],[-1,'            }'],[-1,'          } else {'],[0,'            OpenLayers.Util.applyDefaults('],[-1,'                           this.params,'],[-1,'                           this.SINGLE_TILE_PARAMS'],[-1,'                           );'],[-1,'          }         '],[-1,'        } else {'],[-1,'            \/\/initialize for tiled layers'],[0,'            if (this.useHttpTile) {'],[0,'                OpenLayers.Util.applyDefaults('],[-1,'                               this.params,'],[-1,'                               this.FOLDER_PARAMS'],[-1,'                               );'],[-1,'            } else {'],[0,'                OpenLayers.Util.applyDefaults('],[-1,'                               this.params,'],[-1,'                               this.TILE_PARAMS'],[-1,'                               );'],[-1,'            }'],[0,'            this.setTileSize(this.defaultSize); '],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clone'],[-1,'     * Create a clone of this layer'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.MapGuide&gt;} An exact clone of this layer'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[0,'      if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.MapGuide(this.name,'],[-1,'                                           this.url,'],[-1,'                                           this.params,'],[-1,'                                           this.getOptions());'],[-1,'      }'],[-1,'      \/\/get all additions from superclasses'],[0,'      obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);'],[-1,''],[0,'      return obj;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     * Return a query string for this layer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} A bounds representing the bbox '],[-1,'     *                                for the request'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string with the layer\'s url and parameters and also '],[-1,'     *          the passed-in bounds and appropriate tile size specified '],[-1,'     *          as parameters.'],[-1,'     *\/'],[-1,'    getURL: function (bounds) {'],[0,'        var url;'],[0,'        var center = bounds.getCenterLonLat();'],[0,'        var mapSize = this.map.getSize();'],[-1,''],[0,'        if (this.singleTile) {'],[-1,'          \/\/set up the call for GETMAPIMAGE or GETDYNAMICMAPOVERLAY with'],[-1,'          \/\/dynamic map parameters'],[0,'          var params = {'],[-1,'            setdisplaydpi: OpenLayers.DOTS_PER_INCH,'],[-1,'            setdisplayheight: mapSize.h*this.ratio,'],[-1,'            setdisplaywidth: mapSize.w*this.ratio,'],[-1,'            setviewcenterx: center.lon,'],[-1,'            setviewcentery: center.lat,'],[-1,'            setviewscale: this.map.getScale()'],[-1,'          };'],[-1,'          '],[0,'          if (this.useOverlay &amp;&amp; !this.useAsyncOverlay) {'],[-1,'            \/\/first we need to call GETVISIBLEMAPEXTENT to set the extent'],[0,'            var getVisParams = {};'],[0,'            getVisParams = OpenLayers.Util.extend(getVisParams, params);'],[0,'            getVisParams.operation = \&quot;GETVISIBLEMAPEXTENT\&quot;;'],[0,'            getVisParams.version = \&quot;1.0.0\&quot;;'],[0,'            getVisParams.session = this.params.session;'],[0,'            getVisParams.mapName = this.params.mapName;'],[0,'            getVisParams.format = \'text\/xml\';'],[0,'            url = this.getFullRequestString( getVisParams );'],[-1,'            '],[0,'            OpenLayers.Request.GET({url: url, async: false});'],[-1,'          }'],[-1,'          \/\/construct the full URL'],[0,'          url = this.getFullRequestString( params );'],[-1,'        } else {'],[-1,''],[-1,'          \/\/tiled version'],[0,'          var currentRes = this.map.getResolution();'],[0,'          var colidx = Math.floor((bounds.left-this.maxExtent.left)\/currentRes);'],[0,'          colidx = Math.round(colidx\/this.tileSize.w);'],[0,'          var rowidx = Math.floor((this.maxExtent.top-bounds.top)\/currentRes);'],[0,'          rowidx = Math.round(rowidx\/this.tileSize.h);'],[-1,''],[0,'          if (this.useHttpTile){'],[0,'              url = this.getImageFilePath('],[-1,'                   {'],[-1,'                       tilecol: colidx,'],[-1,'                       tilerow: rowidx,'],[-1,'                       scaleindex: this.resolutions.length - this.map.zoom - 1'],[-1,'                    });'],[-1,''],[-1,'          } else {'],[0,'            url = this.getFullRequestString('],[-1,'                   {'],[-1,'                       tilecol: colidx,'],[-1,'                       tilerow: rowidx,'],[-1,'                       scaleindex: this.resolutions.length - this.map.zoom - 1'],[-1,'                    });'],[-1,'          }'],[-1,'       }'],[0,'       return url;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getFullRequestString'],[-1,'     * getFullRequestString on MapGuide layers is special, because we '],[-1,'     * do a regular expression replace on \',\' in parameters to \'+\'.'],[-1,'     * This is why it is subclassed here.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * altUrl - {String} Alternative base URL to use.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string with the layer\'s url appropriately encoded for MapGuide'],[-1,'     *\/'],[-1,'    getFullRequestString:function(newParams, altUrl) {'],[-1,'        \/\/ use layer\'s url unless altUrl passed in'],[0,'        var url = (altUrl == null) ? this.url : altUrl;'],[-1,'        '],[-1,'        \/\/ if url is not a string, it should be an array of strings, '],[-1,'        \/\/  in which case we will randomly select one of them in order'],[-1,'        \/\/  to evenly distribute requests to different urls.'],[0,'        if (typeof url == \&quot;object\&quot;) {'],[0,'            url = url[Math.floor(Math.random()*url.length)];'],[-1,'        }   '],[-1,'        \/\/ requestString always starts with url'],[0,'        var requestString = url;        '],[-1,''],[-1,'        \/\/ create a new params hashtable with all the layer params and the '],[-1,'        \/\/ new params together. then convert to string'],[0,'        var allParams = OpenLayers.Util.extend({}, this.params);'],[0,'        allParams = OpenLayers.Util.extend(allParams, newParams);'],[-1,'        \/\/ ignore parameters that are already in the url search string'],[0,'        var urlParams = OpenLayers.Util.upperCaseObject('],[-1,'                            OpenLayers.Util.getParameters(url));'],[0,'        for(var key in allParams) {'],[0,'            if(key.toUpperCase() in urlParams) {'],[0,'                delete allParams[key];'],[-1,'            }'],[-1,'        }'],[0,'        var paramsString = OpenLayers.Util.getParameterString(allParams);'],[-1,'        '],[-1,'        \/* MapGuide needs \'+\' seperating things like bounds\/height\/width.'],[-1,'           Since typically this is URL encoded, we use a slight hack: we'],[-1,'           depend on the list-like functionality of getParameterString to'],[-1,'           leave \',\' only in the case of list items (since otherwise it is'],[-1,'           encoded) then do a regular expression replace on the , characters'],[-1,'           to \'+\' *\/'],[0,'        paramsString = paramsString.replace(\/,\/g, \&quot;+\&quot;);'],[-1,'        '],[0,'        if (paramsString != \&quot;\&quot;) {'],[0,'            var lastServerChar = url.charAt(url.length - 1);'],[0,'            if ((lastServerChar == \&quot;&amp;\&quot;) || (lastServerChar == \&quot;?\&quot;)) {'],[0,'                requestString += paramsString;'],[-1,'            } else {'],[0,'                if (url.indexOf(\'?\') == -1) {'],[-1,'                    \/\/serverPath has no ? -- add one'],[0,'                    requestString += \'?\' + paramsString;'],[-1,'                } else {'],[-1,'                    \/\/serverPath contains ?, so must already have paramsString at the end'],[0,'                    requestString += \'&amp;\' + paramsString;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return requestString;'],[-1,'    },'],[-1,''],[-1,'     \/** '],[-1,'     * Method: getImageFilePath'],[-1,'     * special handler to request mapguide tiles from an http exposed tilecache '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * altUrl - {String} Alternative base URL to use.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string with the url for the tile image'],[-1,'     *\/'],[-1,'    getImageFilePath:function(newParams, altUrl) {'],[-1,'        \/\/ use layer\'s url unless altUrl passed in'],[0,'        var url = (altUrl == null) ? this.url : altUrl;'],[-1,'        '],[-1,'        \/\/ if url is not a string, it should be an array of strings, '],[-1,'        \/\/  in which case we will randomly select one of them in order'],[-1,'        \/\/  to evenly distribute requests to different urls.'],[0,'        if (typeof url == \&quot;object\&quot;) {'],[0,'            url = url[Math.floor(Math.random()*url.length)];'],[-1,'        }   '],[-1,'        \/\/ requestString always starts with url'],[0,'        var requestString = url;        '],[-1,''],[0,'        var tileRowGroup = \&quot;\&quot;;'],[0,'        var tileColGroup = \&quot;\&quot;;'],[-1,'        '],[0,'        if (newParams.tilerow &lt; 0) {'],[0,'          tileRowGroup =  \'-\';'],[-1,'        }'],[-1,'          '],[0,'        if (newParams.tilerow == 0 ) {'],[0,'          tileRowGroup += \'0\';'],[-1,'        } else {'],[0,'          tileRowGroup += Math.floor(Math.abs(newParams.tilerow\/this.params.tileRowsPerFolder)) * this.params.tileRowsPerFolder;'],[-1,'        }'],[-1,'          '],[0,'        if (newParams.tilecol &lt; 0) {'],[0,'          tileColGroup =  \'-\';'],[-1,'        }'],[-1,'        '],[0,'        if (newParams.tilecol == 0) {'],[0,'          tileColGroup += \'0\';'],[-1,'        } else {'],[0,'          tileColGroup += Math.floor(Math.abs(newParams.tilecol\/this.params.tileColumnsPerFolder)) * this.params.tileColumnsPerFolder;'],[-1,'        }'],[-1,'        '],[0,'        var tilePath = \'\/S\' + Math.floor(newParams.scaleindex)'],[-1,'                + \'\/\' + this.params.basemaplayergroupname'],[-1,'                + \'\/R\' + tileRowGroup'],[-1,'                + \'\/C\' + tileColGroup'],[-1,'                + \'\/\' + (newParams.tilerow % this.params.tileRowsPerFolder) '],[-1,'                + \'_\' + (newParams.tilecol % this.params.tileColumnsPerFolder) '],[-1,'                + \'.\' + this.params.format;'],[-1,'    '],[0,'        if (this.params.querystring) {'],[0,'               tilePath += \&quot;?\&quot; + this.params.querystring;'],[-1,'        }'],[-1,'        '],[0,'        requestString += tilePath;'],[0,'        return requestString;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.MapGuide\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Measure.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Measure'],[-1,' * Allows for drawing of features for measurements.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.Measure = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to those from &lt;OpenLayers.Control.events&gt;):'],[-1,'     * measure - Triggered when a measurement sketch is complete.  Listeners'],[-1,'     *      will receive an event with measure, units, order, and geometry'],[-1,'     *      properties.'],[-1,'     * measurepartial - Triggered when a new point is added to the'],[-1,'     *      measurement sketch or if the &lt;immediate&gt; property is true and the'],[-1,'     *      measurement sketch is modified.  Listeners receive an event with measure,'],[-1,'     *      units, order, and geometry.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: handlerOptions'],[-1,'     * {Object} Used to set non-default properties on the control\'s handler'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: callbacks'],[-1,'     * {Object} The functions that are sent to the handler for callback'],[-1,'     *\/'],[-1,'    callbacks: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: displaySystem'],[-1,'     * {String} Display system for output measurements.  Supported values'],[-1,'     *     are \'english\', \'metric\', and \'geographic\'.  Default is \'metric\'.'],[-1,'     *\/'],[-1,'    displaySystem: \'metric\','],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: geodesic'],[-1,'     * {Boolean} Calculate geodesic metrics instead of planar metrics.  This'],[-1,'     *     requires that geometries can be transformed into Geographic\/WGS84'],[-1,'     *     (if that is not already the map projection).  Default is false.'],[-1,'     *\/'],[-1,'    geodesic: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: displaySystemUnits'],[-1,'     * {Object} Units for various measurement systems.  Values are arrays'],[-1,'     *     of unit abbreviations (from OpenLayers.INCHES_PER_UNIT) in decreasing'],[-1,'     *     order of length.'],[-1,'     *\/'],[-1,'    displaySystemUnits: {'],[-1,'        geographic: [\'dd\'],'],[-1,'        english: [\'mi\', \'ft\', \'in\'],'],[-1,'        metric: [\'km\', \'m\']'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: delay'],[-1,'     * {Number} Number of milliseconds between clicks before the event is'],[-1,'     *     considered a double-click.  The \&quot;measurepartial\&quot; event will not'],[-1,'     *     be triggered if the sketch is completed within this time.  This'],[-1,'     *     is required for IE where creating a browser reflow (if a listener'],[-1,'     *     is modifying the DOM by displaying the measurement values) messes'],[-1,'     *     with the dblclick listener in the sketch handler.'],[-1,'     *\/'],[-1,'    partialDelay: 300,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: delayedTrigger'],[-1,'     * {Number} Timeout id of trigger for measurepartial.'],[-1,'     *\/'],[-1,'    delayedTrigger: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: persist'],[-1,'     * {Boolean} Keep the temporary measurement sketch drawn after the'],[-1,'     *     measurement is complete.  The geometry will persist until a new'],[-1,'     *     measurement is started, the control is deactivated, or &lt;cancel&gt; is'],[-1,'     *     called.'],[-1,'     *\/'],[-1,'    persist: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: immediate'],[-1,'     * {Boolean} Activates the immediate measurement so that the \&quot;measurepartial\&quot;'],[-1,'     *     event is also fired once the measurement sketch is modified.'],[-1,'     *     Default is false.'],[-1,'     *\/'],[-1,'    immediate : false,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.Measure'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * handler - {&lt;OpenLayers.Handler&gt;}'],[-1,'     * options - {Object}'],[-1,'     *\/'],[-1,'    initialize: function(handler, options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[0,'        var callbacks = {done: this.measureComplete,'],[-1,'            point: this.measurePartial};'],[0,'        if (this.immediate){'],[0,'            callbacks.modify = this.measureImmediate;'],[-1,'        }'],[0,'        this.callbacks = OpenLayers.Util.extend(callbacks, this.callbacks);'],[-1,''],[-1,'        \/\/ let the handler options override, so old code that passes \'persist\''],[-1,'        \/\/ directly to the handler does not need an update'],[0,'        this.handlerOptions = OpenLayers.Util.extend('],[-1,'            {persist: this.persist}, this.handlerOptions'],[-1,'        );'],[0,'        this.handler = new handler(this, this.callbacks, this.handlerOptions);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        this.cancelDelay();'],[0,'        return OpenLayers.Control.prototype.deactivate.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: cancel'],[-1,'     * Stop the control from measuring.  If &lt;persist&gt; is true, the temporary'],[-1,'     *     sketch will be erased.'],[-1,'     *\/'],[-1,'    cancel: function() {'],[0,'        this.cancelDelay();'],[0,'        this.handler.cancel();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setImmediate'],[-1,'     * Sets the &lt;immediate&gt; property. Changes the activity of immediate'],[-1,'     * measurement.'],[-1,'     *\/'],[-1,'    setImmediate: function(immediate) {'],[0,'        this.immediate = immediate;'],[0,'        if (this.immediate){'],[0,'            this.callbacks.modify = this.measureImmediate;'],[-1,'        } else {'],[0,'            delete this.callbacks.modify;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: updateHandler'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * handler - {Function} One of the sketch handler constructors.'],[-1,'     * options - {Object} Options for the handler.'],[-1,'     *\/'],[-1,'    updateHandler: function(handler, options) {'],[0,'        var active = this.active;'],[0,'        if(active) {'],[0,'            this.deactivate();'],[-1,'        }'],[0,'        this.handler = new handler(this, this.callbacks, options);'],[0,'        if(active) {'],[0,'            this.activate();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: measureComplete'],[-1,'     * Called when the measurement sketch is done.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     *\/'],[-1,'    measureComplete: function(geometry) {'],[0,'        this.cancelDelay();'],[0,'        this.measure(geometry, \&quot;measure\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: measurePartial'],[-1,'     * Called each time a new point is added to the measurement sketch.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;} The last point added.'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} The sketch geometry.'],[-1,'     *\/'],[-1,'    measurePartial: function(point, geometry) {'],[0,'        this.cancelDelay();'],[0,'        geometry = geometry.clone();'],[-1,'        \/\/ when we\'re wating for a dblclick, we have to trigger measurepartial'],[-1,'        \/\/ after some delay to deal with reflow issues in IE'],[0,'        if (this.handler.freehandMode(this.handler.evt)) {'],[-1,'            \/\/ no dblclick in freehand mode'],[0,'            this.measure(geometry, \&quot;measurepartial\&quot;);'],[-1,'        } else {'],[0,'            this.delayedTrigger = window.setTimeout('],[-1,'                OpenLayers.Function.bind(function() {'],[0,'                    this.delayedTrigger = null;'],[0,'                    this.measure(geometry, \&quot;measurepartial\&quot;);'],[-1,'                }, this),'],[-1,'                this.partialDelay'],[-1,'            );'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: measureImmediate'],[-1,'     * Called each time the measurement sketch is modified.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * point - {&lt;OpenLayers.Geometry.Point&gt;} The point at the mouse position.'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The sketch feature.'],[-1,'     * drawing - {Boolean} Indicates whether we\'re currently drawing.'],[-1,'     *\/'],[-1,'    measureImmediate : function(point, feature, drawing) {'],[0,'        if (drawing &amp;&amp; !this.handler.freehandMode(this.handler.evt)) {'],[0,'            this.cancelDelay();'],[0,'            this.measure(feature.geometry, \&quot;measurepartial\&quot;);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: cancelDelay'],[-1,'     * Cancels the delay measurement that measurePartial began.'],[-1,'     *\/'],[-1,'    cancelDelay: function() {'],[0,'        if (this.delayedTrigger !== null) {'],[0,'            window.clearTimeout(this.delayedTrigger);'],[0,'            this.delayedTrigger = null;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: measure'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * eventType - {String}'],[-1,'     *\/'],[-1,'    measure: function(geometry, eventType) {'],[0,'        var stat, order;'],[0,'        if(geometry.CLASS_NAME.indexOf(\'LineString\') &gt; -1) {'],[0,'            stat = this.getBestLength(geometry);'],[0,'            order = 1;'],[-1,'        } else {'],[0,'            stat = this.getBestArea(geometry);'],[0,'            order = 2;'],[-1,'        }'],[0,'        this.events.triggerEvent(eventType, {'],[-1,'            measure: stat[0],'],[-1,'            units: stat[1],'],[-1,'            order: order,'],[-1,'            geometry: geometry'],[-1,'        });'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getBestArea'],[-1,'     * Based on the &lt;displaySystem&gt; returns the area of a geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array([Float, String])}  Returns a two item array containing the'],[-1,'     *     area and the units abbreviation.'],[-1,'     *\/'],[-1,'    getBestArea: function(geometry) {'],[0,'        var units = this.displaySystemUnits[this.displaySystem];'],[0,'        var unit, area;'],[0,'        for(var i=0, len=units.length; i&lt;len; ++i) {'],[0,'            unit = units[i];'],[0,'            area = this.getArea(geometry, unit);'],[0,'            if(area &gt; 1) {'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        return [area, unit];'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getArea'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * units - {String} Unit abbreviation'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float} The geometry area in the given units.'],[-1,'     *\/'],[-1,'    getArea: function(geometry, units) {'],[0,'        var area, geomUnits;'],[0,'        if(this.geodesic) {'],[0,'            area = geometry.getGeodesicArea(this.map.getProjectionObject());'],[0,'            geomUnits = \&quot;m\&quot;;'],[-1,'        } else {'],[0,'            area = geometry.getArea();'],[0,'            geomUnits = this.map.getUnits();'],[-1,'        }'],[0,'        var inPerDisplayUnit = OpenLayers.INCHES_PER_UNIT[units];'],[0,'        if(inPerDisplayUnit) {'],[0,'            var inPerMapUnit = OpenLayers.INCHES_PER_UNIT[geomUnits];'],[0,'            area *= Math.pow((inPerMapUnit \/ inPerDisplayUnit), 2);'],[-1,'        }'],[0,'        return area;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getBestLength'],[-1,'     * Based on the &lt;displaySystem&gt; returns the length of a geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array([Float, String])}  Returns a two item array containing the'],[-1,'     *     length and the units abbreviation.'],[-1,'     *\/'],[-1,'    getBestLength: function(geometry) {'],[0,'        var units = this.displaySystemUnits[this.displaySystem];'],[0,'        var unit, length;'],[0,'        for(var i=0, len=units.length; i&lt;len; ++i) {'],[0,'            unit = units[i];'],[0,'            length = this.getLength(geometry, unit);'],[0,'            if(length &gt; 1) {'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        return [length, unit];'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getLength'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * units - {String} Unit abbreviation'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Float} The geometry length in the given units.'],[-1,'     *\/'],[-1,'    getLength: function(geometry, units) {'],[0,'        var length, geomUnits;'],[0,'        if(this.geodesic) {'],[0,'            length = geometry.getGeodesicLength(this.map.getProjectionObject());'],[0,'            geomUnits = \&quot;m\&quot;;'],[-1,'        } else {'],[0,'            length = geometry.getLength();'],[0,'            geomUnits = this.map.getUnits();'],[-1,'        }'],[0,'        var inPerDisplayUnit = OpenLayers.INCHES_PER_UNIT[units];'],[0,'        if(inPerDisplayUnit) {'],[0,'            var inPerMapUnit = OpenLayers.INCHES_PER_UNIT[geomUnits];'],[0,'            length *= (inPerMapUnit \/ inPerDisplayUnit);'],[-1,'        }'],[0,'        return length;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Measure\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMC\/v1_0_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WMC\/v1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMC.v1_0_0'],[-1,' * Read and write WMC version 1.0.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WMC.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMC.v1_0_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.WMC.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: VERSION'],[-1,'     * {String} 1.0.0'],[-1,'     *\/'],[-1,'    VERSION: \&quot;1.0.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: schemaLocation'],[-1,'     * {String} http:\/\/www.opengis.net\/context'],[-1,'     *     http:\/\/schemas.opengis.net\/context\/1.0.0\/context.xsd'],[-1,'     *\/'],[-1,'    schemaLocation: \&quot;http:\/\/www.opengis.net\/context http:\/\/schemas.opengis.net\/context\/1.0.0\/context.xsd\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMC.v1_0_0'],[-1,'     * Instances of this class are not created directly.  Use the'],[-1,'     *     &lt;OpenLayers.Format.WMC&gt; constructor instead.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.WMC.v1.prototype.initialize.apply('],[-1,'            this, [options]'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read_wmc_SRS'],[-1,'     *\/'],[-1,'    read_wmc_SRS: function(layerContext, node) {'],[0,'        var srs    = this.getChildValue(node);'],[0,'        if (typeof layerContext.projections != \&quot;object\&quot;) {'],[0,'            layerContext.projections = {};'],[-1,'        }'],[0,'        var values = srs.split(\/ +\/);'],[0,'        for (var i=0, len=values.length; i&lt;len; i++) {'],[0,'            layerContext.projections[values[i]] = true;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: write_wmc_Layer'],[-1,'     * Create a Layer node given a layer context object. This method adds'],[-1,'     *     elements specific to version 1.0.0.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * context - {Object} A layer context object.}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Element} A WMC Layer element node.'],[-1,'     *\/'],[-1,'    write_wmc_Layer: function(context) {'],[0,'        var node = OpenLayers.Format.WMC.v1.prototype.write_wmc_Layer.apply('],[-1,'            this, [context]'],[-1,'        );'],[-1,'    '],[-1,'        \/\/ optional SRS element(s)'],[0,'        if (context.srs) {'],[0,'            var projections = [];'],[0,'            for(var name in context.srs) {'],[0,'                projections.push(name);'],[-1,'            }'],[0,'            node.appendChild(this.createElementDefaultNS(\&quot;SRS\&quot;, projections.join(\&quot; \&quot;)));'],[-1,'        }'],[-1,''],[-1,'        \/\/ optional FormatList element'],[0,'        node.appendChild(this.write_wmc_FormatList(context));'],[-1,''],[-1,'        \/\/ optional StyleList element'],[0,'        node.appendChild(this.write_wmc_StyleList(context));'],[-1,'        '],[-1,'        \/\/ optional DimensionList element'],[0,'        if (context.dimensions) {'],[0,'            node.appendChild(this.write_wmc_DimensionList(context));'],[-1,'        }'],[-1,''],[-1,'        \/\/ OpenLayers specific properties go in an Extension element'],[0,'        node.appendChild(this.write_wmc_LayerExtension(context));'],[-1,'    },    '],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMC.v1_0_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMTSCapabilities\/v1_0_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WMTSCapabilities.js'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1_1_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMTSCapabilities.v1_0_0'],[-1,' * Read WMTS Capabilities version 1.0.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WMTSCapabilities&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMTSCapabilities.v1_0_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.OWSCommon.v1_1_0, {'],[-1,'        '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} The parser version (\&quot;1.0.0\&quot;).'],[-1,'     *\/'],[-1,'    version: \&quot;1.0.0\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\/1.1\&quot;,'],[-1,'        wmts: \&quot;http:\/\/www.opengis.net\/wmts\/1.0\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: yx'],[-1,'     * {Object} Members in the yx object are used to determine if a CRS URN'],[-1,'     *     corresponds to a CRS with y,x axis order.  Member names are CRS URNs'],[-1,'     *     and values are boolean.  Defaults come from the '],[-1,'     *     &lt;OpenLayers.Format.WMTSCapabilities&gt; prototype.'],[-1,'     *\/'],[-1,'    yx: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: defaultPrefix'],[-1,'     * {String} The default namespace alias for creating element nodes.'],[-1,'     *\/'],[-1,'    defaultPrefix: \&quot;wmts\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMTSCapabilities.v1_0_0'],[-1,'     * Create a new parser for WMTS capabilities version 1.0.0. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[0,'        this.options = options;'],[0,'        var yx = OpenLayers.Util.extend('],[-1,'            {}, OpenLayers.Format.WMTSCapabilities.prototype.yx'],[-1,'        );'],[0,'        this.yx = OpenLayers.Util.extend(yx, this.yx);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read capabilities data from a string, and return info about the WMTS.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Information about the SOS service.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var capabilities = {};'],[0,'        this.readNode(data, capabilities);'],[0,'        capabilities.version = this.version;'],[0,'        return capabilities;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {        '],[-1,'        \&quot;wmts\&quot;: {'],[-1,'            \&quot;Capabilities\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Contents\&quot;: function(node, obj) {'],[0,'                obj.contents = {};                '],[0,'                obj.contents.layers = [];'],[0,'                obj.contents.tileMatrixSets = {};                '],[0,'                this.readChildNodes(node, obj.contents);'],[-1,'            },'],[-1,'            \&quot;Layer\&quot;: function(node, obj) {'],[0,'                var layer = {'],[-1,'                    styles: [],'],[-1,'                    formats: [],'],[-1,'                    dimensions: [],'],[-1,'                    tileMatrixSetLinks: []'],[-1,'                };'],[0,'                layer.layers = [];'],[0,'                this.readChildNodes(node, layer);'],[0,'                obj.layers.push(layer);'],[-1,'            },'],[-1,'            \&quot;Style\&quot;: function(node, obj) {'],[0,'                var style = {};'],[0,'                style.isDefault = (node.getAttribute(\&quot;isDefault\&quot;) === \&quot;true\&quot;);'],[0,'                this.readChildNodes(node, style);'],[0,'                obj.styles.push(style);'],[-1,'            },'],[-1,'            \&quot;Format\&quot;: function(node, obj) {'],[0,'                obj.formats.push(this.getChildValue(node)); '],[-1,'            },'],[-1,'            \&quot;TileMatrixSetLink\&quot;: function(node, obj) {'],[0,'                var tileMatrixSetLink = {};'],[0,'                this.readChildNodes(node, tileMatrixSetLink);'],[0,'                obj.tileMatrixSetLinks.push(tileMatrixSetLink);'],[-1,'            },'],[-1,'            \&quot;TileMatrixSet\&quot;: function(node, obj) {'],[-1,'                \/\/ node could be child of wmts:Contents or wmts:TileMatrixSetLink'],[-1,'                \/\/ duck type wmts:Contents by looking for layers'],[0,'                if (obj.layers) {'],[-1,'                    \/\/ TileMatrixSet as object type in schema'],[0,'                    var tileMatrixSet = {'],[-1,'                        matrixIds: []'],[-1,'                    };'],[0,'                    this.readChildNodes(node, tileMatrixSet);'],[0,'                    obj.tileMatrixSets[tileMatrixSet.identifier] = tileMatrixSet;'],[-1,'                } else {'],[-1,'                    \/\/ TileMatrixSet as string type in schema'],[0,'                    obj.tileMatrixSet = this.getChildValue(node);'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;TileMatrix\&quot;: function(node, obj) {'],[0,'                var tileMatrix = {'],[-1,'                    supportedCRS: obj.supportedCRS'],[-1,'                };'],[0,'                this.readChildNodes(node, tileMatrix);'],[0,'                obj.matrixIds.push(tileMatrix);'],[-1,'            },'],[-1,'            \&quot;ScaleDenominator\&quot;: function(node, obj) {'],[0,'                obj.scaleDenominator = parseFloat(this.getChildValue(node)); '],[-1,'            },'],[-1,'            \&quot;TopLeftCorner\&quot;: function(node, obj) {                '],[0,'                var topLeftCorner = this.getChildValue(node);'],[0,'                var coords = topLeftCorner.split(\&quot; \&quot;);'],[-1,'                \/\/ decide on axis order for the given CRS'],[0,'                var yx;'],[0,'                if (obj.supportedCRS) {'],[-1,'                    \/\/ extract out version from URN'],[0,'                    var crs = obj.supportedCRS.replace('],[-1,'                        \/urn:ogc:def:crs:(\\w+):.+:(\\w+)$\/, '],[-1,'                        \&quot;urn:ogc:def:crs:$1::$2\&quot;'],[-1,'                    );'],[0,'                    yx = !!this.yx[crs];'],[-1,'                }'],[0,'                if (yx) {'],[0,'                    obj.topLeftCorner = new OpenLayers.LonLat('],[-1,'                        coords[1], coords[0]'],[-1,'                    );'],[-1,'                } else {'],[0,'                    obj.topLeftCorner = new OpenLayers.LonLat('],[-1,'                        coords[0], coords[1]'],[-1,'                    );'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;TileWidth\&quot;: function(node, obj) {'],[0,'                obj.tileWidth = parseInt(this.getChildValue(node)); '],[-1,'            },'],[-1,'            \&quot;TileHeight\&quot;: function(node, obj) {'],[0,'                obj.tileHeight = parseInt(this.getChildValue(node)); '],[-1,'            },'],[-1,'            \&quot;MatrixWidth\&quot;: function(node, obj) {'],[0,'                obj.matrixWidth = parseInt(this.getChildValue(node)); '],[-1,'            },'],[-1,'            \&quot;MatrixHeight\&quot;: function(node, obj) {'],[0,'                obj.matrixHeight = parseInt(this.getChildValue(node)); '],[-1,'            },'],[-1,'            \&quot;ResourceURL\&quot;: function(node, obj) {'],[0,'                obj.resourceUrl = obj.resourceUrl || {};'],[0,'                var resourceType = node.getAttribute(\&quot;resourceType\&quot;);'],[0,'                if (!obj.resourceUrls) {'],[0,'                    obj.resourceUrls = [];'],[-1,'                }'],[0,'                var resourceUrl = obj.resourceUrl[resourceType] = {'],[-1,'                    format: node.getAttribute(\&quot;format\&quot;),'],[-1,'                    template: node.getAttribute(\&quot;template\&quot;),'],[-1,'                    resourceType: resourceType'],[-1,'                };'],[0,'                obj.resourceUrls.push(resourceUrl);'],[-1,'            },'],[-1,'            \/\/ not used for now, can be added in the future though'],[-1,'            \/*\&quot;Themes\&quot;: function(node, obj) {'],[-1,'                obj.themes = [];'],[-1,'                this.readChildNodes(node, obj.themes);'],[-1,'            },'],[-1,'            \&quot;Theme\&quot;: function(node, obj) {'],[-1,'                var theme = {};                '],[-1,'                this.readChildNodes(node, theme);'],[-1,'                obj.push(theme);'],[-1,'            },*\/'],[-1,'            \&quot;WSDL\&quot;: function(node, obj) {'],[0,'                obj.wsdl = {};'],[0,'                obj.wsdl.href = node.getAttribute(\&quot;xlink:href\&quot;);'],[-1,'                \/\/ TODO: other attributes of &lt;WSDL&gt; element                '],[-1,'            },'],[-1,'            \&quot;ServiceMetadataURL\&quot;: function(node, obj) {'],[0,'                obj.serviceMetadataUrl = {};'],[0,'                obj.serviceMetadataUrl.href = node.getAttribute(\&quot;xlink:href\&quot;);'],[-1,'                \/\/ TODO: other attributes of &lt;ServiceMetadataURL&gt; element                '],[-1,'            },'],[-1,'            \&quot;LegendURL\&quot;: function(node, obj) {'],[0,'                obj.legend = {};'],[0,'                obj.legend.href = node.getAttribute(\&quot;xlink:href\&quot;);'],[0,'                obj.legend.format = node.getAttribute(\&quot;format\&quot;);'],[-1,'            },'],[-1,'            \&quot;Dimension\&quot;: function(node, obj) {'],[0,'                var dimension = {values: []};'],[0,'                this.readChildNodes(node, dimension);'],[0,'                obj.dimensions.push(dimension);'],[-1,'            },'],[-1,'            \&quot;Default\&quot;: function(node, obj) {'],[0,'                obj[\&quot;default\&quot;] = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Value\&quot;: function(node, obj) {'],[0,'                obj.values.push(this.getChildValue(node));'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\&quot;ows\&quot;]'],[-1,'    },    '],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMTSCapabilities.v1_0_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/WorldWind.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.WorldWind'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.WorldWind = OpenLayers.Class(OpenLayers.Layer.Grid, {'],[-1,'    '],[-1,'    DEFAULT_PARAMS: {'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * {Boolean} WorldWind layer is a base layer by default.'],[-1,'     *\/'],[-1,'    isBaseLayer: true,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: lzd'],[-1,'     * {Float} LevelZeroTileSizeDegrees'],[-1,'     *\/'],[-1,'    lzd: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: zoomLevels'],[-1,'     * {Integer} Number of zoom levels.'],[-1,'     *\/'],[-1,'    zoomLevels: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.WorldWind'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * name - {String} Name of Layer'],[-1,'     * url - {String} Base URL  '],[-1,'     * lzd - {Float} Level zero tile size degrees '],[-1,'     * zoomLevels - {Integer} number of zoom levels'],[-1,'     * params - {Object} additional parameters'],[-1,'     * options - {Object} additional options'],[-1,'     *\/'],[-1,'    initialize: function(name, url, lzd, zoomLevels, params, options) {'],[0,'        this.lzd = lzd;'],[0,'        this.zoomLevels = zoomLevels;'],[0,'        var newArguments = [];'],[0,'        newArguments.push(name, url, params, options);'],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply(this, newArguments);'],[0,'        this.params = OpenLayers.Util.applyDefaults('],[-1,'            this.params, this.DEFAULT_PARAMS'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getZoom'],[-1,'     * Convert map zoom to WW zoom.'],[-1,'     *\/'],[-1,'    getZoom: function () {'],[0,'        var zoom = this.map.getZoom();'],[0,'        var extent = this.map.getMaxExtent();'],[0,'        zoom = zoom - Math.log(this.maxResolution \/ (this.lzd\/512))\/Math.log(2);'],[0,'        return zoom;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string with the layer\'s url and parameters and also the '],[-1,'     *           passed-in bounds and appropriate tile size specified as '],[-1,'     *           parameters'],[-1,'     *\/'],[-1,'    getURL: function (bounds) {'],[0,'        bounds = this.adjustBounds(bounds);'],[0,'        var zoom = this.getZoom();'],[0,'        var extent = this.map.getMaxExtent();'],[0,'        var deg = this.lzd\/Math.pow(2,this.getZoom());'],[0,'        var x = Math.floor((bounds.left - extent.left)\/deg);'],[0,'        var y = Math.floor((bounds.bottom - extent.bottom)\/deg);'],[0,'        if (this.map.getResolution() &lt;= (this.lzd\/512)'],[-1,'            &amp;&amp; this.getZoom() &lt;= this.zoomLevels) {'],[0,'            return this.getFullRequestString('],[-1,'              { L: zoom, '],[-1,'                X: x,'],[-1,'                Y: y'],[-1,'              });'],[-1,'        } else {'],[0,'            return OpenLayers.Util.getImageLocation(\&quot;blank.gif\&quot;);'],[-1,'        }'],[-1,''],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.WorldWind\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Popup\/FramedCloud.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Popup\/Framed.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' * @requires OpenLayers\/BaseTypes\/Bounds.js'],[-1,' * @requires OpenLayers\/BaseTypes\/Pixel.js'],[-1,' * @requires OpenLayers\/BaseTypes\/Size.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Popup.FramedCloud'],[-1,' * '],[-1,' * Inherits from: '],[-1,' *  - &lt;OpenLayers.Popup.Framed&gt;'],[-1,' *\/'],[1,'OpenLayers.Popup.FramedCloud = '],[-1,'  OpenLayers.Class(OpenLayers.Popup.Framed, {'],[-1,''],[-1,'    \/** '],[-1,'     * Property: contentDisplayClass'],[-1,'     * {String} The CSS class of the popup content div.'],[-1,'     *\/'],[-1,'    contentDisplayClass: \&quot;olFramedCloudPopupContent\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: autoSize'],[-1,'     * {Boolean} Framed Cloud is autosizing by default.'],[-1,'     *\/'],[-1,'    autoSize: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: panMapIfOutOfView'],[-1,'     * {Boolean} Framed Cloud does pan into view by default.'],[-1,'     *\/'],[-1,'    panMapIfOutOfView: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: imageSize'],[-1,'     * {&lt;OpenLayers.Size&gt;}'],[-1,'     *\/'],[-1,'    imageSize: new OpenLayers.Size(1276, 736),'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: isAlphaImage'],[-1,'     * {Boolean} The FramedCloud does not use an alpha image (in honor of the '],[-1,'     *     good ie6 folk out there)'],[-1,'     *\/'],[-1,'    isAlphaImage: false,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: fixedRelativePosition'],[-1,'     * {Boolean} The Framed Cloud popup works in just one fixed position.'],[-1,'     *\/'],[-1,'    fixedRelativePosition: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: positionBlocks'],[-1,'     * {Object} Hash of differen position blocks, keyed by relativePosition'],[-1,'     *     two-character code string (ie \&quot;tl\&quot;, \&quot;tr\&quot;, \&quot;bl\&quot;, \&quot;br\&quot;)'],[-1,'     *\/'],[-1,'    positionBlocks: {'],[-1,'        \&quot;tl\&quot;: {'],[-1,'            \'offset\': new OpenLayers.Pixel(44, 0),'],[-1,'            \'padding\': new OpenLayers.Bounds(8, 40, 8, 9),'],[-1,'            \'blocks\': ['],[-1,'                { \/\/ top-left'],[-1,'                    size: new OpenLayers.Size(\'auto\', \'auto\'),'],[-1,'                    anchor: new OpenLayers.Bounds(0, 51, 22, 0),'],[-1,'                    position: new OpenLayers.Pixel(0, 0)'],[-1,'                },'],[-1,'                { \/\/top-right'],[-1,'                    size: new OpenLayers.Size(22, \'auto\'),'],[-1,'                    anchor: new OpenLayers.Bounds(null, 50, 0, 0),'],[-1,'                    position: new OpenLayers.Pixel(-1238, 0)'],[-1,'                },'],[-1,'                { \/\/bottom-left'],[-1,'                    size: new OpenLayers.Size(\'auto\', 19),'],[-1,'                    anchor: new OpenLayers.Bounds(0, 32, 22, null),'],[-1,'                    position: new OpenLayers.Pixel(0, -631)'],[-1,'                },'],[-1,'                { \/\/bottom-right'],[-1,'                    size: new OpenLayers.Size(22, 18),'],[-1,'                    anchor: new OpenLayers.Bounds(null, 32, 0, null),'],[-1,'                    position: new OpenLayers.Pixel(-1238, -632)'],[-1,'                },'],[-1,'                { \/\/ stem'],[-1,'                    size: new OpenLayers.Size(81, 35),'],[-1,'                    anchor: new OpenLayers.Bounds(null, 0, 0, null),'],[-1,'                    position: new OpenLayers.Pixel(0, -688)'],[-1,'                }'],[-1,'            ]'],[-1,'        },'],[-1,'        \&quot;tr\&quot;: {'],[-1,'            \'offset\': new OpenLayers.Pixel(-45, 0),'],[-1,'            \'padding\': new OpenLayers.Bounds(8, 40, 8, 9),'],[-1,'            \'blocks\': ['],[-1,'                { \/\/ top-left'],[-1,'                    size: new OpenLayers.Size(\'auto\', \'auto\'),'],[-1,'                    anchor: new OpenLayers.Bounds(0, 51, 22, 0),'],[-1,'                    position: new OpenLayers.Pixel(0, 0)'],[-1,'                },'],[-1,'                { \/\/top-right'],[-1,'                    size: new OpenLayers.Size(22, \'auto\'),'],[-1,'                    anchor: new OpenLayers.Bounds(null, 50, 0, 0),'],[-1,'                    position: new OpenLayers.Pixel(-1238, 0)'],[-1,'                },'],[-1,'                { \/\/bottom-left'],[-1,'                    size: new OpenLayers.Size(\'auto\', 19),'],[-1,'                    anchor: new OpenLayers.Bounds(0, 32, 22, null),'],[-1,'                    position: new OpenLayers.Pixel(0, -631)'],[-1,'                },'],[-1,'                { \/\/bottom-right'],[-1,'                    size: new OpenLayers.Size(22, 19),'],[-1,'                    anchor: new OpenLayers.Bounds(null, 32, 0, null),'],[-1,'                    position: new OpenLayers.Pixel(-1238, -631)'],[-1,'                },'],[-1,'                { \/\/ stem'],[-1,'                    size: new OpenLayers.Size(81, 35),'],[-1,'                    anchor: new OpenLayers.Bounds(0, 0, null, null),'],[-1,'                    position: new OpenLayers.Pixel(-215, -687)'],[-1,'                }'],[-1,'            ]'],[-1,'        },'],[-1,'        \&quot;bl\&quot;: {'],[-1,'            \'offset\': new OpenLayers.Pixel(45, 0),'],[-1,'            \'padding\': new OpenLayers.Bounds(8, 9, 8, 40),'],[-1,'            \'blocks\': ['],[-1,'                { \/\/ top-left'],[-1,'                    size: new OpenLayers.Size(\'auto\', \'auto\'),'],[-1,'                    anchor: new OpenLayers.Bounds(0, 21, 22, 32),'],[-1,'                    position: new OpenLayers.Pixel(0, 0)'],[-1,'                },'],[-1,'                { \/\/top-right'],[-1,'                    size: new OpenLayers.Size(22, \'auto\'),'],[-1,'                    anchor: new OpenLayers.Bounds(null, 21, 0, 32),'],[-1,'                    position: new OpenLayers.Pixel(-1238, 0)'],[-1,'                },'],[-1,'                { \/\/bottom-left'],[-1,'                    size: new OpenLayers.Size(\'auto\', 21),'],[-1,'                    anchor: new OpenLayers.Bounds(0, 0, 22, null),'],[-1,'                    position: new OpenLayers.Pixel(0, -629)'],[-1,'                },'],[-1,'                { \/\/bottom-right'],[-1,'                    size: new OpenLayers.Size(22, 21),'],[-1,'                    anchor: new OpenLayers.Bounds(null, 0, 0, null),'],[-1,'                    position: new OpenLayers.Pixel(-1238, -629)'],[-1,'                },'],[-1,'                { \/\/ stem'],[-1,'                    size: new OpenLayers.Size(81, 33),'],[-1,'                    anchor: new OpenLayers.Bounds(null, null, 0, 0),'],[-1,'                    position: new OpenLayers.Pixel(-101, -674)'],[-1,'                }'],[-1,'            ]'],[-1,'        },'],[-1,'        \&quot;br\&quot;: {'],[-1,'            \'offset\': new OpenLayers.Pixel(-44, 0),'],[-1,'            \'padding\': new OpenLayers.Bounds(8, 9, 8, 40),'],[-1,'            \'blocks\': ['],[-1,'                { \/\/ top-left'],[-1,'                    size: new OpenLayers.Size(\'auto\', \'auto\'),'],[-1,'                    anchor: new OpenLayers.Bounds(0, 21, 22, 32),'],[-1,'                    position: new OpenLayers.Pixel(0, 0)'],[-1,'                },'],[-1,'                { \/\/top-right'],[-1,'                    size: new OpenLayers.Size(22, \'auto\'),'],[-1,'                    anchor: new OpenLayers.Bounds(null, 21, 0, 32),'],[-1,'                    position: new OpenLayers.Pixel(-1238, 0)'],[-1,'                },'],[-1,'                { \/\/bottom-left'],[-1,'                    size: new OpenLayers.Size(\'auto\', 21),'],[-1,'                    anchor: new OpenLayers.Bounds(0, 0, 22, null),'],[-1,'                    position: new OpenLayers.Pixel(0, -629)'],[-1,'                },'],[-1,'                { \/\/bottom-right'],[-1,'                    size: new OpenLayers.Size(22, 21),'],[-1,'                    anchor: new OpenLayers.Bounds(null, 0, 0, null),'],[-1,'                    position: new OpenLayers.Pixel(-1238, -629)'],[-1,'                },'],[-1,'                { \/\/ stem'],[-1,'                    size: new OpenLayers.Size(81, 33),'],[-1,'                    anchor: new OpenLayers.Bounds(0, null, null, 0),'],[-1,'                    position: new OpenLayers.Pixel(-311, -674)'],[-1,'                }'],[-1,'            ]'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: minSize'],[-1,'     * {&lt;OpenLayers.Size&gt;}'],[-1,'     *\/'],[-1,'    minSize: new OpenLayers.Size(105, 10),'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxSize'],[-1,'     * {&lt;OpenLayers.Size&gt;}'],[-1,'     *\/'],[-1,'    maxSize: new OpenLayers.Size(1200, 660),'],[-1,''],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Popup.FramedCloud'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * id - {String}'],[-1,'     * lonlat - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     * contentSize - {&lt;OpenLayers.Size&gt;}'],[-1,'     * contentHTML - {String}'],[-1,'     * anchor - {Object} Object to which we\'ll anchor the popup. Must expose '],[-1,'     *     a \'size\' (&lt;OpenLayers.Size&gt;) and \'offset\' (&lt;OpenLayers.Pixel&gt;) '],[-1,'     *     (Note that this is generally an &lt;OpenLayers.Icon&gt;).'],[-1,'     * closeBox - {Boolean}'],[-1,'     * closeBoxCallback - {Function} Function to be called on closeBox click.'],[-1,'     *\/'],[-1,'    initialize:function(id, lonlat, contentSize, contentHTML, anchor, closeBox, '],[-1,'                        closeBoxCallback) {'],[-1,''],[0,'        this.imageSrc = OpenLayers.Util.getImageLocation(\'cloud-popup-relative.png\');'],[0,'        OpenLayers.Popup.Framed.prototype.initialize.apply(this, arguments);'],[0,'        this.contentDiv.className = this.contentDisplayClass;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Popup.FramedCloud\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/SOSCapabilities\/v1_0_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/SOSCapabilities.js'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1_1_0.js'],[-1,' * @requires OpenLayers\/Format\/GML\/v3.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.SOSCapabilities.v1_0_0'],[-1,' * Read SOS Capabilities version 1.0.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.SOSCapabilities&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.SOSCapabilities.v1_0_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.SOSCapabilities, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\/1.1\&quot;,'],[-1,'        sos: \&quot;http:\/\/www.opengis.net\/sos\/1.0\&quot;,'],[-1,'        gml: \&quot;http:\/\/www.opengis.net\/gml\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.SOSCapabilities.v1_0_0'],[-1,'     * Create a new parser for SOS capabilities version 1.0.0. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[0,'        this.options = options;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read capabilities data from a string, and return info about the SOS.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Information about the SOS service.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var capabilities = {};'],[0,'        this.readNode(data, capabilities);'],[0,'        return capabilities;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;gml\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;name\&quot;: function(node, obj) {'],[0,'                obj.name = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;TimePeriod\&quot;: function(node, obj) {'],[0,'                obj.timePeriod = {};'],[0,'                this.readChildNodes(node, obj.timePeriod);'],[-1,'            },'],[-1,'            \&quot;beginPosition\&quot;: function(node, timePeriod) {'],[0,'                timePeriod.beginPosition = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;endPosition\&quot;: function(node, timePeriod) {'],[0,'                timePeriod.endPosition = this.getChildValue(node);'],[-1,'            }'],[-1,'        }, OpenLayers.Format.GML.v3.prototype.readers[\&quot;gml\&quot;]),'],[-1,'        \&quot;sos\&quot;: {'],[-1,'            \&quot;Capabilities\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Contents\&quot;: function(node, obj) {'],[0,'                obj.contents = {};'],[0,'                this.readChildNodes(node, obj.contents);'],[-1,'            },'],[-1,'            \&quot;ObservationOfferingList\&quot;: function(node, contents) {'],[0,'                contents.offeringList = {};'],[0,'                this.readChildNodes(node, contents.offeringList);'],[-1,'            },'],[-1,'            \&quot;ObservationOffering\&quot;: function(node, offeringList) {'],[0,'                var id = this.getAttributeNS(node, this.namespaces.gml, \&quot;id\&quot;);'],[0,'                offeringList[id] = {'],[-1,'                    procedures: [],'],[-1,'                    observedProperties: [],'],[-1,'                    featureOfInterestIds: [],'],[-1,'                    responseFormats: [],'],[-1,'                    resultModels: [],'],[-1,'                    responseModes: []'],[-1,'                };'],[0,'                this.readChildNodes(node, offeringList[id]);'],[-1,'            },'],[-1,'            \&quot;time\&quot;: function(node, offering) {'],[0,'                offering.time = {};'],[0,'                this.readChildNodes(node, offering.time);'],[-1,'            },'],[-1,'            \&quot;procedure\&quot;: function(node, offering) {'],[0,'                offering.procedures.push(this.getAttributeNS(node, '],[-1,'                    this.namespaces.xlink, \&quot;href\&quot;));'],[-1,'            },'],[-1,'            \&quot;observedProperty\&quot;: function(node, offering) {'],[0,'                offering.observedProperties.push(this.getAttributeNS(node, '],[-1,'                    this.namespaces.xlink, \&quot;href\&quot;));'],[-1,'            },'],[-1,'            \&quot;featureOfInterest\&quot;: function(node, offering) {'],[0,'                offering.featureOfInterestIds.push(this.getAttributeNS(node, '],[-1,'                    this.namespaces.xlink, \&quot;href\&quot;));'],[-1,'            },'],[-1,'            \&quot;responseFormat\&quot;: function(node, offering) {'],[0,'                offering.responseFormats.push(this.getChildValue(node));'],[-1,'            },'],[-1,'            \&quot;resultModel\&quot;: function(node, offering) {'],[0,'                offering.resultModels.push(this.getChildValue(node));'],[-1,'            },'],[-1,'            \&quot;responseMode\&quot;: function(node, offering) {'],[0,'                offering.responseModes.push(this.getChildValue(node));'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\&quot;ows\&quot;]'],[-1,'    },    '],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.SOSCapabilities.v1_0_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler\/Pinch.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Handler.Pinch'],[-1,' * The pinch handler is used to deal with sequences of browser events related'],[-1,' *     to pinch gestures. The handler is used by controls that want to know'],[-1,' *     when a pinch sequence begins, when a pinch is happening, and when it has'],[-1,' *     finished.'],[-1,' *'],[-1,' * Controls that use the pinch handler typically construct it with callbacks'],[-1,' *     for \'start\', \'move\', and \'done\'.  Callbacks for these keys are'],[-1,' *     called when the pinch begins, with each change, and when the pinch is'],[-1,' *     done.'],[-1,' *'],[-1,' * Create a new pinch handler with the &lt;OpenLayers.Handler.Pinch&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Handler&gt;'],[-1,' *\/'],[1,'OpenLayers.Handler.Pinch = OpenLayers.Class(OpenLayers.Handler, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: started'],[-1,'     * {Boolean} When a touchstart event is received, we want to record it,'],[-1,'     *     but not set \'pinching\' until the touchmove get started after'],[-1,'     *     starting.'],[-1,'     *\/'],[-1,'    started: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: stopDown'],[-1,'     * {Boolean} Stop propagation of touchstart events from getting to'],[-1,'     *     listeners on the same element. Default is false.'],[-1,'     *\/'],[-1,'    stopDown: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: pinching'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    pinching: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: last'],[-1,'     * {Object} Object that store informations related to pinch last touch.'],[-1,'     *\/'],[-1,'    last: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: start'],[-1,'     * {Object} Object that store informations related to pinch touchstart.'],[-1,'     *\/'],[-1,'    start: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler.Pinch'],[-1,'     * Returns OpenLayers.Handler.Pinch'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} The control that is making use of'],[-1,'     *     this handler.  If a handler is being used without a control, the'],[-1,'     *     handlers setMap method must be overridden to deal properly with'],[-1,'     *     the map.'],[-1,'     * callbacks - {Object} An object containing functions to be called when'],[-1,'     *     the pinch operation start, change, or is finished. The callbacks'],[-1,'     *     should expect to receive an object argument, which contains'],[-1,'     *     information about scale, distance, and position of touch points.'],[-1,'     * options - {Object}'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: touchstart'],[-1,'     * Handle touchstart events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    touchstart: function(evt) {'],[0,'        var propagate = true;'],[0,'        this.pinching = false;'],[0,'        if (OpenLayers.Event.isMultiTouch(evt)) {'],[0,'            this.started = true;'],[0,'            this.last = this.start = {'],[-1,'                distance: this.getDistance(evt.touches),'],[-1,'                delta: 0,'],[-1,'                scale: 1'],[-1,'            };'],[0,'            this.callback(\&quot;start\&quot;, [evt, this.start]);'],[0,'            propagate = !this.stopDown;'],[0,'        } else if (this.started) {'],[-1,'            \/\/ Some webkit versions send fake single-touch events during'],[-1,'            \/\/ multitouch, which cause the drag handler to trigger'],[0,'            return false;'],[-1,'        } else {'],[0,'            this.started = false;'],[0,'            this.start = null;'],[0,'            this.last = null;'],[-1,'        }'],[-1,'        \/\/ prevent document dragging'],[0,'        OpenLayers.Event.preventDefault(evt);'],[0,'        return propagate;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: touchmove'],[-1,'     * Handle touchmove events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    touchmove: function(evt) {'],[0,'        if (this.started &amp;&amp; OpenLayers.Event.isMultiTouch(evt)) {'],[0,'            this.pinching = true;'],[0,'            var current = this.getPinchData(evt);'],[0,'            this.callback(\&quot;move\&quot;, [evt, current]);'],[0,'            this.last = current;'],[-1,'            \/\/ prevent document dragging'],[0,'            OpenLayers.Event.stop(evt);'],[0,'        } else if (this.started) {'],[-1,'            \/\/ Some webkit versions send fake single-touch events during'],[-1,'            \/\/ multitouch, which cause the drag handler to trigger'],[0,'            return false;'],[-1,'        }'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: touchend'],[-1,'     * Handle touchend events'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Let the event propagate.'],[-1,'     *\/'],[-1,'    touchend: function(evt) {'],[0,'        if (this.started &amp;&amp; !OpenLayers.Event.isMultiTouch(evt)) {'],[0,'            this.started = false;'],[0,'            this.pinching = false;'],[0,'            this.callback(\&quot;done\&quot;, [evt, this.start, this.last]);'],[0,'            this.start = null;'],[0,'            this.last = null;'],[0,'            return false;'],[-1,'        }'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: activate'],[-1,'     * Activate the handler.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The handler was successfully activated.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = false;'],[0,'        if (OpenLayers.Handler.prototype.activate.apply(this, arguments)) {'],[0,'            this.pinching = false;'],[0,'            activated = true;'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: deactivate'],[-1,'     * Deactivate the handler.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The handler was successfully deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = false;'],[0,'        if (OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {'],[0,'            this.started = false;'],[0,'            this.pinching = false;'],[0,'            this.start = null;'],[0,'            this.last = null;'],[0,'            deactivated = true;'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getDistance'],[-1,'     * Get the distance in pixels between two touches.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * touches - {Array(Object)}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number} The distance in pixels.'],[-1,'     *\/'],[-1,'    getDistance: function(touches) {'],[0,'        var t0 = touches[0];'],[0,'        var t1 = touches[1];'],[0,'        return Math.sqrt('],[-1,'            Math.pow(t0.olClientX - t1.olClientX, 2) +'],[-1,'            Math.pow(t0.olClientY - t1.olClientY, 2)'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: getPinchData'],[-1,'     * Get informations about the pinch event.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Object that contains data about the current pinch.'],[-1,'     *\/'],[-1,'    getPinchData: function(evt) {'],[0,'        var distance = this.getDistance(evt.touches);'],[0,'        var scale = distance \/ this.start.distance;'],[0,'        return {'],[-1,'            distance: distance,'],[-1,'            delta: this.last.distance - distance,'],[-1,'            scale: scale'],[-1,'        };'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler.Pinch\&quot;'],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/NavToolbar.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control\/Panel.js'],[-1,' * @requires OpenLayers\/Control\/Navigation.js'],[-1,' * @requires OpenLayers\/Control\/ZoomBox.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.NavToolbar'],[-1,' * This Toolbar is an alternative to the Navigation control that displays'],[-1,' *     the state of the control, and provides a UI for changing state to'],[-1,' *     use the zoomBox via a Panel control.'],[-1,' *'],[-1,' * If you wish to change the properties of the Navigation control used'],[-1,' *     in the NavToolbar, see: '],[-1,' *     http:\/\/trac.openlayers.org\/wiki\/Toolbars#SubclassingNavToolbar '],[-1,' * '],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control.Panel&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.NavToolbar = OpenLayers.Class(OpenLayers.Control.Panel, {'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.NavToolbar '],[-1,'     * Add our two mousedefaults controls.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be used'],[-1,'     *     to extend the control.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Control.Panel.prototype.initialize.apply(this, [options]);'],[0,'        this.addControls(['],[-1,'          new OpenLayers.Control.Navigation(),'],[-1,'          new OpenLayers.Control.ZoomBox()'],[-1,'        ]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw '],[-1,'     * calls the default draw, and then activates mouse defaults.'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        var div = OpenLayers.Control.Panel.prototype.draw.apply(this, arguments);'],[0,'        if (this.defaultControl === null) {'],[0,'            this.defaultControl = this.controls[0];'],[-1,'        }'],[0,'        return div;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.NavToolbar\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/PinchZoom.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler\/Pinch.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.PinchZoom'],[-1,' *'],[-1,' * Inherits:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.PinchZoom = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/** '],[-1,'     * Property: type'],[-1,'     * {OpenLayers.Control.TYPES}'],[-1,'     *\/'],[-1,'    type: OpenLayers.Control.TYPE_TOOL,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: pinchOrigin'],[-1,'     * {Object} Cached object representing the pinch start (in pixels).'],[-1,'     *\/'],[-1,'    pinchOrigin: null,    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: currentCenter'],[-1,'     * {Object} Cached object representing the latest pinch center (in pixels).'],[-1,'     *\/'],[-1,'    currentCenter: null,    '],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: autoActivate'],[-1,'     * {Boolean} Activate the control when it is added to a map.  Default is'],[-1,'     *     true.'],[-1,'     *\/'],[-1,'    autoActivate: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: preserveCenter'],[-1,'     * {Boolean} Set this to true if you don\'t want the map center to change'],[-1,'     *     while pinching. For example you may want to set preserveCenter to'],[-1,'     *     true when the user location is being watched and you want to preserve'],[-1,'     *     the user location at the center of the map even if he zooms in or'],[-1,'     *     out using pinch. This property\'s value can be changed any time on an'],[-1,'     *     existing instance. Default is false.'],[-1,'     *\/'],[-1,'    preserveCenter: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: handlerOptions'],[-1,'     * {Object} Used to set non-default properties on the pinch handler'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.PinchZoom'],[-1,'     * Create a control for zooming with pinch gestures.  This works on devices'],[-1,'     *     with multi-touch support.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *                    the control'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, arguments);'],[0,'        this.handler = new OpenLayers.Handler.Pinch(this, {'],[-1,'            start: this.pinchStart,'],[-1,'            move: this.pinchMove,'],[-1,'            done: this.pinchDone'],[-1,'        }, this.handlerOptions);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: pinchStart'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     * pinchData - {Object} pinch data object related to the current touchmove'],[-1,'     *     of the pinch gesture. This give us the current scale of the pinch.'],[-1,'     *\/'],[-1,'    pinchStart: function(evt, pinchData) {'],[0,'        var xy = (this.preserveCenter) ?'],[-1,'            this.map.getPixelFromLonLat(this.map.getCenter()) : evt.xy;'],[0,'        this.pinchOrigin = xy;'],[0,'        this.currentCenter = xy;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: pinchMove'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     * pinchData - {Object} pinch data object related to the current touchmove'],[-1,'     *     of the pinch gesture. This give us the current scale of the pinch.'],[-1,'     *\/'],[-1,'    pinchMove: function(evt, pinchData) {'],[0,'        var scale = pinchData.scale;'],[0,'        var containerOrigin = this.map.layerContainerOriginPx;'],[0,'        var pinchOrigin = this.pinchOrigin;'],[0,'        var current = (this.preserveCenter) ?'],[-1,'            this.map.getPixelFromLonLat(this.map.getCenter()) : evt.xy;'],[-1,''],[0,'        var dx = Math.round((containerOrigin.x + current.x - pinchOrigin.x) + (scale - 1) * (containerOrigin.x - pinchOrigin.x));'],[0,'        var dy = Math.round((containerOrigin.y + current.y - pinchOrigin.y) + (scale - 1) * (containerOrigin.y - pinchOrigin.y));'],[-1,''],[0,'        this.map.applyTransform(dx, dy, scale);'],[0,'        this.currentCenter = current;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: pinchDone'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     * start - {Object} pinch data object related to the touchstart event that'],[-1,'     *     started the pinch gesture.'],[-1,'     * last - {Object} pinch data object related to the last touchmove event'],[-1,'     *     of the pinch gesture. This give us the final scale of the pinch.'],[-1,'     *\/'],[-1,'    pinchDone: function(evt, start, last) {'],[0,'        this.map.applyTransform();'],[0,'        var zoom = this.map.getZoomForResolution(this.map.getResolution() \/ last.scale, true);'],[0,'        if (zoom !== this.map.getZoom() || !this.currentCenter.equals(this.pinchOrigin)) {'],[0,'            var resolution = this.map.getResolutionForZoom(zoom);'],[-1,''],[0,'            var location = this.map.getLonLatFromPixel(this.pinchOrigin);'],[0,'            var zoomPixel = this.currentCenter;        '],[0,'            var size = this.map.getSize();'],[-1,''],[0,'            location.lon += resolution * ((size.w \/ 2) - zoomPixel.x);'],[0,'            location.lat -= resolution * ((size.h \/ 2) - zoomPixel.y);'],[-1,''],[-1,'            \/\/ Force a reflow before calling setCenter. This is to work'],[-1,'            \/\/ around an issue occuring in iOS.'],[-1,'            \/\/'],[-1,'            \/\/ See https:\/\/github.com\/openlayers\/openlayers\/pull\/351.'],[-1,'            \/\/'],[-1,'            \/\/ Without a reflow setting the layer container div\'s top left'],[-1,'            \/\/ style properties to \&quot;0px\&quot; - as done in Map.moveTo when zoom'],[-1,'            \/\/ is changed - won\'t actually correctly reposition the layer'],[-1,'            \/\/ container div.'],[-1,'            \/\/'],[-1,'            \/\/ Also, we need to use a statement that the Google Closure'],[-1,'            \/\/ compiler won\'t optimize away.'],[0,'            this.map.div.clientWidth = this.map.div.clientWidth;'],[-1,''],[0,'            this.map.setCenter(location, zoom);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.PinchZoom\&quot;'],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/OSM.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/XYZ.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.OSM'],[-1,' * This layer allows accessing OpenStreetMap tiles. By default the OpenStreetMap'],[-1,' *    hosted tile.openstreetmap.org Mapnik tileset is used. If you wish to use'],[-1,' *    a different layer instead, you need to provide a different'],[-1,' *    URL to the constructor. Here\'s an example for using OpenCycleMap:'],[-1,' * '],[-1,' * (code)'],[-1,' *     new OpenLayers.Layer.OSM(\&quot;OpenCycleMap\&quot;, '],[-1,' *       [\&quot;http:\/\/a.tile.opencyclemap.org\/cycle\/${z}\/${x}\/${y}.png\&quot;,'],[-1,' *        \&quot;http:\/\/b.tile.opencyclemap.org\/cycle\/${z}\/${x}\/${y}.png\&quot;,'],[-1,' *        \&quot;http:\/\/c.tile.opencyclemap.org\/cycle\/${z}\/${x}\/${y}.png\&quot;]); '],[-1,' * (end)'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.XYZ&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.OSM = OpenLayers.Class(OpenLayers.Layer.XYZ, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: name'],[-1,'     * {String} The layer name. Defaults to \&quot;OpenStreetMap\&quot; if the first'],[-1,'     * argument to the constructor is null or undefined.'],[-1,'     *\/'],[-1,'    name: \&quot;OpenStreetMap\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: url'],[-1,'     * {String} The tileset URL scheme. Defaults to'],[-1,'     * : http:\/\/[a|b|c].tile.openstreetmap.org\/${z}\/${x}\/${y}.png'],[-1,'     * (the official OSM tileset) if the second argument to the constructor'],[-1,'     * is null or undefined. To use another tileset you can have something'],[-1,'     * like this:'],[-1,'     * (code)'],[-1,'     *     new OpenLayers.Layer.OSM(\&quot;OpenCycleMap\&quot;, '],[-1,'     *       [\&quot;http:\/\/a.tile.opencyclemap.org\/cycle\/${z}\/${x}\/${y}.png\&quot;,'],[-1,'     *        \&quot;http:\/\/b.tile.opencyclemap.org\/cycle\/${z}\/${x}\/${y}.png\&quot;,'],[-1,'     *        \&quot;http:\/\/c.tile.opencyclemap.org\/cycle\/${z}\/${x}\/${y}.png\&quot;]); '],[-1,'     * (end)'],[-1,'     *\/'],[-1,'    url: ['],[-1,'        \'http:\/\/a.tile.openstreetmap.org\/${z}\/${x}\/${y}.png\','],[-1,'        \'http:\/\/b.tile.openstreetmap.org\/${z}\/${x}\/${y}.png\','],[-1,'        \'http:\/\/c.tile.openstreetmap.org\/${z}\/${x}\/${y}.png\''],[-1,'    ],'],[-1,''],[-1,'    \/**'],[-1,'     * Property: attribution'],[-1,'     * {String} The layer attribution.'],[-1,'     *\/'],[-1,'    attribution: \&quot;&amp;copy; &lt;a href=\'http:\/\/www.openstreetmap.org\/copyright\'&gt;OpenStreetMap&lt;\/a&gt; contributors\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: sphericalMercator'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    sphericalMercator: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: wrapDateLine'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    wrapDateLine: true,'],[-1,''],[-1,'    \/** APIProperty: tileOptions'],[-1,'     *  {Object} optional configuration options for &lt;OpenLayers.Tile&gt; instances'],[-1,'     *  created by this Layer. Default is'],[-1,'     *'],[-1,'     *  (code)'],[-1,'     *  {crossOriginKeyword: \'anonymous\'}'],[-1,'     *  (end)'],[-1,'     *'],[-1,'     *  When using OSM tilesets other than the default ones, it may be'],[-1,'     *  necessary to set this to'],[-1,'     *'],[-1,'     *  (code)'],[-1,'     *  {crossOriginKeyword: null}'],[-1,'     *  (end)'],[-1,'     *'],[-1,'     *  if the server does not send Access-Control-Allow-Origin headers.'],[-1,'     *\/'],[-1,'    tileOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.OSM'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} The layer name.'],[-1,'     * url - {String} The tileset URL scheme.'],[-1,'     * options - {Object} Configuration options for the layer. Any inherited'],[-1,'     *     layer option can be set in this object (e.g.'],[-1,'     *     &lt;OpenLayers.Layer.Grid.buffer&gt;).'],[-1,'     *\/'],[-1,'    initialize: function(name, url, options) {'],[0,'        OpenLayers.Layer.XYZ.prototype.initialize.apply(this, arguments);'],[0,'        this.tileOptions = OpenLayers.Util.extend({'],[-1,'            crossOriginKeyword: \'anonymous\''],[-1,'        }, this.options &amp;&amp; this.options.tileOptions);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clone'],[-1,'     *\/'],[-1,'    clone: function(obj) {'],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.OSM('],[-1,'                this.name, this.url, this.getOptions());'],[-1,'        }'],[0,'        obj = OpenLayers.Layer.XYZ.prototype.clone.apply(this, [obj]);'],[0,'        return obj;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.OSM\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Strategy\/Refresh.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Strategy.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Strategy.Refresh'],[-1,' * A strategy that refreshes the layer. By default the strategy waits for a'],[-1,' *     call to &lt;refresh&gt; before refreshing.  By configuring the strategy with '],[-1,' *     the &lt;interval&gt; option, refreshing can take place automatically.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Strategy&gt;'],[-1,' *\/'],[1,'OpenLayers.Strategy.Refresh = OpenLayers.Class(OpenLayers.Strategy, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: force'],[-1,'     * {Boolean} Force a refresh on the layer. Default is false.'],[-1,'     *\/'],[-1,'    force: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: interval'],[-1,'     * {Number} Auto-refresh. Default is 0.  If &gt; 0, layer will be refreshed '],[-1,'     *     every N milliseconds.'],[-1,'     *\/'],[-1,'    interval: 0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: timer'],[-1,'     * {Number} The id of the timer.'],[-1,'     *\/'],[-1,'    timer: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Strategy.Refresh'],[-1,'     * Create a new Refresh strategy.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *\/'],[-1,'   '],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Activate the strategy. Register any listeners, do appropriate setup.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} True if the strategy was successfully activated.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = OpenLayers.Strategy.prototype.activate.call(this);'],[0,'        if(activated) {'],[0,'            if(this.layer.visibility === true) {'],[0,'                this.start();'],[-1,'            } '],[0,'            this.layer.events.on({'],[-1,'                \&quot;visibilitychanged\&quot;: this.reset,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the strategy. Unregister any listeners, do appropriate'],[-1,'     *     tear-down.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} True if the strategy was successfully deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);'],[0,'        if(deactivated) {'],[0,'            this.stop();'],[0,'            this.layer.events.un({'],[-1,'                \&quot;visibilitychanged\&quot;: this.reset,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: reset'],[-1,'     * Start or cancel the refresh interval depending on the visibility of '],[-1,'     *     the layer.'],[-1,'     *\/'],[-1,'    reset: function() {'],[0,'        if(this.layer.visibility === true) {'],[0,'            this.start();'],[-1,'        } else {'],[0,'            this.stop();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: start'],[-1,'     * Start the refresh interval. '],[-1,'     *\/'],[-1,'    start: function() {'],[0,'        if(this.interval &amp;&amp; typeof this.interval === \&quot;number\&quot; &amp;&amp; '],[-1,'            this.interval &gt; 0) {'],[-1,''],[0,'            this.timer = window.setInterval('],[-1,'                OpenLayers.Function.bind(this.refresh, this),'],[-1,'                this.interval);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: refresh'],[-1,'     * Tell the strategy to refresh which will refresh the layer.'],[-1,'     *\/'],[-1,'    refresh: function() {'],[0,'        if (this.layer &amp;&amp; this.layer.refresh &amp;&amp; '],[-1,'            typeof this.layer.refresh == \&quot;function\&quot;) {'],[-1,''],[0,'            this.layer.refresh({force: this.force});'],[-1,'        }'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * Method: stop'],[-1,'     * Cancels the refresh interval. '],[-1,'     *\/'],[-1,'    stop: function() {'],[0,'        if(this.timer !== null) {'],[0,'            window.clearInterval(this.timer);'],[0,'            this.timer = null;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Strategy.Refresh\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Geolocate.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' * @requires OpenLayers\/Projection.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Geolocate'],[-1,' * The Geolocate control wraps w3c geolocation API into control that can be'],[-1,' * bound to a map, and generate events on location update'],[-1,' *'],[-1,' * To use this control requires to load the proj4js library if the projection'],[-1,' * of the map is not EPSG:4326 or EPSG:900913.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.Geolocate = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to those from &lt;OpenLayers.Control.events&gt;):'],[-1,'     * locationupdated - Triggered when browser return a new position. Listeners will '],[-1,'     *     receive an object with a \'position\' property which is the browser.geolocation.position'],[-1,'     *     native object, as well as a \'point\' property which is the location transformed in the '],[-1,'     *     current map projection.'],[-1,'     * locationfailed - Triggered when geolocation has failed'],[-1,'     * locationuncapable - Triggered when control is activated on a browser'],[-1,'     *     which doesn\'t support geolocation'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: geolocation'],[-1,'     * {Object} The geolocation engine, as a property to be possibly mocked.'],[-1,'     * This is set lazily to avoid a memory leak in IE9.'],[-1,'     *\/'],[-1,'    geolocation: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: available'],[-1,'     * {Boolean} The navigator.geolocation object is available.'],[-1,'     *\/'],[-1,'    available: (\'geolocation\' in navigator),'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: bind'],[-1,'     * {Boolean} If true, map center will be set on location update.'],[-1,'     *\/'],[-1,'    bind: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: watch'],[-1,'     * {Boolean} If true, position will be update regularly.'],[-1,'     *\/'],[-1,'    watch: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: geolocationOptions'],[-1,'     * {Object} Options to pass to the navigator\'s geolocation API. See'],[-1,'     *     &lt;http:\/\/dev.w3.org\/geo\/api\/spec-source.html&gt;. No specific'],[-1,'     *     option is passed to the geolocation API by default.'],[-1,'     *\/'],[-1,'    geolocationOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.Geolocate'],[-1,'     * Create a new control to deal with browser geolocation API'],[-1,'     *'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.deactivate();'],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: activate'],[-1,'     * Activates the control.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The control was effectively activated.'],[-1,'     *\/'],[-1,'    activate: function () {'],[0,'        if (this.available &amp;&amp; !this.geolocation) {'],[-1,'            \/\/ set lazily to avoid IE9 memory leak'],[0,'            this.geolocation = navigator.geolocation;'],[-1,'        }'],[0,'        if (!this.geolocation) {'],[0,'            this.events.triggerEvent(\&quot;locationuncapable\&quot;);'],[0,'            return false;'],[-1,'        }'],[0,'        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {'],[0,'            if (this.watch) {'],[0,'                this.watchId = this.geolocation.watchPosition('],[-1,'                    OpenLayers.Function.bind(this.geolocate, this),'],[-1,'                    OpenLayers.Function.bind(this.failure, this),'],[-1,'                    this.geolocationOptions'],[-1,'                );'],[-1,'            } else {'],[0,'                this.getCurrentLocation();'],[-1,'            }'],[0,'            return true;'],[-1,'        }'],[0,'        return false;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: deactivate'],[-1,'     * Deactivates the control.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The control was effectively deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function () {'],[0,'        if (this.active &amp;&amp; this.watchId !== null) {'],[0,'            this.geolocation.clearWatch(this.watchId);'],[-1,'        }'],[0,'        return OpenLayers.Control.prototype.deactivate.apply('],[-1,'            this, arguments'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: geolocate'],[-1,'     * Activates the control.'],[-1,'     *'],[-1,'     *\/'],[-1,'    geolocate: function (position) {'],[0,'        var center = new OpenLayers.LonLat('],[-1,'            position.coords.longitude,'],[-1,'            position.coords.latitude'],[-1,'        ).transform('],[-1,'            new OpenLayers.Projection(\&quot;EPSG:4326\&quot;),'],[-1,'            this.map.getProjectionObject()'],[-1,'        );'],[0,'        if (this.bind) {'],[0,'            this.map.setCenter(center);'],[-1,'        }'],[0,'        this.events.triggerEvent(\&quot;locationupdated\&quot;, {'],[-1,'            position: position,'],[-1,'            point: new OpenLayers.Geometry.Point('],[-1,'                center.lon, center.lat'],[-1,'            )'],[-1,'        });'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getCurrentLocation'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Returns true if a event will be fired (successfull'],[-1,'     * registration)'],[-1,'     *\/'],[-1,'    getCurrentLocation: function() {'],[0,'        if (!this.active || this.watch) {'],[0,'            return false;'],[-1,'        }'],[0,'        this.geolocation.getCurrentPosition('],[-1,'            OpenLayers.Function.bind(this.geolocate, this),'],[-1,'            OpenLayers.Function.bind(this.failure, this),'],[-1,'            this.geolocationOptions'],[-1,'        );'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: failure'],[-1,'     * method called on browser\'s geolocation failure'],[-1,'     *'],[-1,'     *\/'],[-1,'    failure: function (error) {'],[0,'        this.events.triggerEvent(\&quot;locationfailed\&quot;, {error: error});'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Geolocate\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/ArcGIS93Rest.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.ArcGIS93Rest'],[-1,' * Instances of OpenLayers.Layer.ArcGIS93Rest are used to display data from'],[-1,' *     ESRI ArcGIS Server 9.3 (and up?) Mapping Services using the REST API.'],[-1,' *     Create a new ArcGIS93Rest layer with the &lt;OpenLayers.Layer.ArcGIS93Rest&gt;'],[-1,' *     constructor.  More detail on the REST API is available at'],[-1,' *     http:\/\/sampleserver1.arcgisonline.com\/ArcGIS\/SDK\/REST\/index.html ;'],[-1,' *     specifically, the URL provided to this layer should be an export service'],[-1,' *     URL: http:\/\/sampleserver1.arcgisonline.com\/ArcGIS\/SDK\/REST\/export.html '],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.ArcGIS93Rest = OpenLayers.Class(OpenLayers.Layer.Grid, {'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: DEFAULT_PARAMS'],[-1,'     * {Object} Hashtable of default parameter key\/value pairs '],[-1,'     *\/'],[-1,'    DEFAULT_PARAMS: { '],[-1,'      format: \&quot;png\&quot;'],[-1,'    },'],[-1,'        '],[-1,'    \/**'],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * {Boolean} Default is true for ArcGIS93Rest layer'],[-1,'     *\/'],[-1,'    isBaseLayer: true,'],[-1,' '],[-1,' '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.ArcGIS93Rest'],[-1,'     * Create a new ArcGIS93Rest layer object.'],[-1,'     *'],[-1,'     * Example:'],[-1,'     * (code)'],[-1,'     * var arcims = new OpenLayers.Layer.ArcGIS93Rest(\&quot;MyName\&quot;,'],[-1,'     *                                    \&quot;http:\/\/sampleserver1.arcgisonline.com\/ArcGIS\/rest\/services\/Specialty\/ESRI_StateCityHighway_USA\/MapServer\/export\&quot;, '],[-1,'     *                                    {'],[-1,'     *                                      layers: \&quot;0,1,2\&quot;'],[-1,'     *                                    });'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} A name for the layer'],[-1,'     * url - {String} Base url for the ArcGIS server REST service'],[-1,'     * options - {Object} An object with key\/value pairs representing the'],[-1,'     *                    options and option values.'],[-1,'     *'],[-1,'     * Valid Options:'],[-1,'     *        format - {String} MIME type of desired image type.'],[-1,'     *        layers - {String} Comma-separated list of layers to display.'],[-1,'     *        srs - {String} Projection ID.'],[-1,'     *\/'],[-1,'    initialize: function(name, url, params, options) {'],[0,'        var newArguments = [];'],[-1,'        \/\/uppercase params'],[0,'        params = OpenLayers.Util.upperCaseObject(params);'],[0,'        newArguments.push(name, url, params, options);'],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply(this, newArguments);'],[0,'        OpenLayers.Util.applyDefaults('],[-1,'                       this.params, '],[-1,'                       OpenLayers.Util.upperCaseObject(this.DEFAULT_PARAMS)'],[-1,'                       );'],[-1,'                       '],[-1,'        \/\/layer is transparent        '],[0,'        if (this.params.TRANSPARENT &amp;&amp; '],[-1,'            this.params.TRANSPARENT.toString().toLowerCase() == \&quot;true\&quot;) {'],[-1,'            '],[-1,'            \/\/ unless explicitly set in options, make layer an overlay'],[0,'            if ( (options == null) || (!options.isBaseLayer) ) {'],[0,'                this.isBaseLayer = false;'],[-1,'            } '],[-1,'            '],[-1,'            \/\/ jpegs can never be transparent, so intelligently switch the '],[-1,'            \/\/  format, depending on the browser\'s capabilities'],[0,'            if (this.params.FORMAT == \&quot;jpg\&quot;) {'],[0,'                this.params.FORMAT = OpenLayers.Util.alphaHack() ? \&quot;gif\&quot;'],[-1,'                                                                 : \&quot;png\&quot;;'],[-1,'            }'],[-1,'        }'],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'         * Method: clone'],[-1,'         * Create a clone of this layer'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Layer.ArcGIS93Rest&gt;} An exact clone of this layer'],[-1,'         *\/'],[-1,'    clone: function (obj) {'],[-1,'        '],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.ArcGIS93Rest(this.name,'],[-1,'                                           this.url,'],[-1,'                                           this.params,'],[-1,'                                           this.getOptions());'],[-1,'        }'],[-1,''],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);'],[-1,''],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[-1,''],[0,'        return obj;'],[-1,'    },'],[-1,'    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     * Return an image url this layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} A bounds representing the bbox for the'],[-1,'     *                                request.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string with the map image\'s url.'],[-1,'     *\/'],[-1,'    getURL: function (bounds) {'],[0,'        bounds = this.adjustBounds(bounds);'],[-1,''],[-1,'        \/\/ ArcGIS Server only wants the numeric portion of the projection ID.'],[0,'        var projWords = this.projection.getCode().split(\&quot;:\&quot;);'],[0,'        var srid = projWords[projWords.length - 1];'],[-1,''],[0,'        var imageSize = this.getImageSize(); '],[0,'        var newParams = {'],[-1,'            \'BBOX\': bounds.toBBOX(),'],[-1,'            \'SIZE\': imageSize.w + \&quot;,\&quot; + imageSize.h,'],[-1,'            \/\/ We always want image, the other options were json, image with a whole lotta html around it, etc.'],[-1,'            \'F\': \&quot;image\&quot;,'],[-1,'            \'BBOXSR\': srid,'],[-1,'            \'IMAGESR\': srid'],[-1,'        };'],[-1,''],[-1,'        \/\/ Now add the filter parameters.'],[0,'        if (this.layerDefs) {'],[0,'            var layerDefStrList = [];'],[0,'            var layerID;'],[0,'            for(layerID in this.layerDefs) {'],[0,'                if (this.layerDefs.hasOwnProperty(layerID)) {'],[0,'                    if (this.layerDefs[layerID]) {'],[0,'                        layerDefStrList.push(layerID);'],[0,'                        layerDefStrList.push(\&quot;:\&quot;);'],[0,'                        layerDefStrList.push(this.layerDefs[layerID]);'],[0,'                        layerDefStrList.push(\&quot;;\&quot;);'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            if (layerDefStrList.length &gt; 0) {'],[0,'                newParams[\'LAYERDEFS\'] = layerDefStrList.join(\&quot;\&quot;);'],[-1,'            }'],[-1,'        }'],[0,'        var requestString = this.getFullRequestString(newParams);'],[0,'        return requestString;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setLayerFilter'],[-1,'     * addTile creates a tile, initializes it, and adds it to the layer div. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * id - {String} The id of the layer to which the filter applies.'],[-1,'     * queryDef - {String} A sql-ish query filter, for more detail see the ESRI'],[-1,'     *                     documentation at http:\/\/sampleserver1.arcgisonline.com\/ArcGIS\/SDK\/REST\/export.html'],[-1,'     *\/'],[-1,'    setLayerFilter: function ( id, queryDef ) {'],[0,'        if (!this.layerDefs) {'],[0,'            this.layerDefs = {};'],[-1,'        }'],[0,'        if (queryDef) {'],[0,'            this.layerDefs[id] = queryDef;'],[-1,'        } else {'],[0,'            delete this.layerDefs[id];'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: clearLayerFilter'],[-1,'     * Clears layer filters, either from a specific layer,'],[-1,'     * or all of them.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * id - {String} The id of the layer from which to remove any'],[-1,'     *               filter.  If unspecified\/blank, all filters'],[-1,'     *               will be removed.'],[-1,'     *\/'],[-1,'    clearLayerFilter: function ( id ) {'],[0,'        if (id) {'],[0,'            delete this.layerDefs[id];'],[-1,'        } else {'],[0,'            delete this.layerDefs;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: mergeNewParams'],[-1,'     * Catch changeParams and uppercase the new params to be merged in'],[-1,'     *     before calling changeParams on the super class.'],[-1,'     * '],[-1,'     *     Once params have been changed, the tiles will be reloaded with'],[-1,'     *     the new parameters.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * newParams - {Object} Hashtable of new params to use'],[-1,'     *\/'],[-1,'    mergeNewParams:function(newParams) {'],[0,'        var upperParams = OpenLayers.Util.upperCaseObject(newParams);'],[0,'        var newArguments = [upperParams];'],[0,'        return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply(this, '],[-1,'                                                             newArguments);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.ArcGIS93Rest\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Handler\/Hover.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Handler.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Handler.Hover'],[-1,' * The hover handler is to be used to emulate mouseovers on objects'],[-1,' *      on the map that aren\'t DOM elements. For example one can use'],[-1,' *      this handler to send WMS\/GetFeatureInfo requests as the user'],[-1,' *      moves the mouve over the map.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Handler&gt; '],[-1,' *\/'],[1,'OpenLayers.Handler.Hover = OpenLayers.Class(OpenLayers.Handler, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: delay'],[-1,'     * {Integer} - Number of milliseconds between mousemoves before'],[-1,'     *      the event is considered a hover. Default is 500.'],[-1,'     *\/'],[-1,'    delay: 500,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: pixelTolerance'],[-1,'     * {Integer} - Maximum number of pixels between mousemoves for'],[-1,'     *      an event to be considered a hover. Default is null.'],[-1,'     *\/'],[-1,'    pixelTolerance: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: stopMove'],[-1,'     * {Boolean} - Stop other listeners from being notified on mousemoves.'],[-1,'     *      Default is false.'],[-1,'     *\/'],[-1,'    stopMove: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: px'],[-1,'     * {&lt;OpenLayers.Pixel&gt;} - The location of the last mousemove, expressed'],[-1,'     *      in pixels.'],[-1,'     *\/'],[-1,'    px: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: timerId'],[-1,'     * {Number} - The id of the timer.'],[-1,'     *\/'],[-1,'    timerId: null,'],[-1,' '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Handler.Hover'],[-1,'     * Construct a hover handler.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * control - {&lt;OpenLayers.Control&gt;} The control that initialized this'],[-1,'     *     handler.  The control is assumed to have a valid map property; that'],[-1,'     *     map is used in the handler\'s own setMap method.'],[-1,'     * callbacks - {Object} An object with keys corresponding to callbacks'],[-1,'     *     that will be called by the handler. The callbacks should'],[-1,'     *     expect to receive a single argument, the event. Callbacks for'],[-1,'     *     \'move\', the mouse is moving, and \'pause\', the mouse is pausing,'],[-1,'     *     are supported.'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     the handler.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mousemove'],[-1,'     * Called when the mouse moves on the map.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Continue propagating this event.'],[-1,'     *\/'],[-1,'    mousemove: function(evt) {'],[0,'        if(this.passesTolerance(evt.xy)) {'],[0,'            this.clearTimer();'],[0,'            this.callback(\'move\', [evt]);'],[0,'            this.px = evt.xy;'],[-1,'            \/\/ clone the evt so original properties can be accessed even'],[-1,'            \/\/ if the browser deletes them during the delay'],[0,'            evt = OpenLayers.Util.extend({}, evt);'],[0,'            this.timerId = window.setTimeout('],[-1,'                OpenLayers.Function.bind(this.delayedCall, this, evt),'],[-1,'                this.delay'],[-1,'            );'],[-1,'        }'],[0,'        return !this.stopMove;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: mouseout'],[-1,'     * Called when the mouse goes out of the map.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Continue propagating this event.'],[-1,'     *\/'],[-1,'    mouseout: function(evt) {'],[0,'        if (OpenLayers.Util.mouseLeft(evt, this.map.viewPortDiv)) {'],[0,'            this.clearTimer();'],[0,'            this.callback(\'move\', [evt]);'],[-1,'        }'],[0,'        return true;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: passesTolerance'],[-1,'     * Determine whether the mouse move is within the optional pixel tolerance.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * px - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The mouse move is within the pixel tolerance.'],[-1,'     *\/'],[-1,'    passesTolerance: function(px) {'],[0,'        var passes = true;'],[0,'        if(this.pixelTolerance &amp;&amp; this.px) {'],[0,'            var dpx = Math.sqrt('],[-1,'                Math.pow(this.px.x - px.x, 2) +'],[-1,'                Math.pow(this.px.y - px.y, 2)'],[-1,'            );'],[0,'            if(dpx &lt; this.pixelTolerance) {'],[0,'                passes = false;'],[-1,'            }'],[-1,'        }'],[0,'        return passes;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clearTimer'],[-1,'     * Clear the timer and set &lt;timerId&gt; to null.'],[-1,'     *\/'],[-1,'    clearTimer: function() {'],[0,'        if(this.timerId != null) {'],[0,'            window.clearTimeout(this.timerId);'],[0,'            this.timerId = null;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: delayedCall'],[-1,'     * Triggers pause callback.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;}'],[-1,'     *\/'],[-1,'    delayedCall: function(evt) {'],[0,'        this.callback(\'pause\', [evt]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the handler.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The handler was successfully deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = false;'],[0,'        if(OpenLayers.Handler.prototype.deactivate.apply(this, arguments)) {'],[0,'            this.clearTimer();'],[0,'            deactivated = true;'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Handler.Hover\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/GetFeature.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Handler\/Click.js'],[-1,' * @requires OpenLayers\/Handler\/Box.js'],[-1,' * @requires OpenLayers\/Handler\/Hover.js'],[-1,' * @requires OpenLayers\/Filter\/Spatial.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.GetFeature'],[-1,' * Gets vector features for locations underneath the mouse cursor. Can be'],[-1,' *     configured to act on click, hover or dragged boxes. Uses an'],[-1,' *     &lt;OpenLayers.Protocol&gt; that supports spatial filters to retrieve'],[-1,' *     features from a server and fires events that notify applications of the'],[-1,' *     selected features. '],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.GetFeature = OpenLayers.Class(OpenLayers.Control, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: protocol'],[-1,'     * {&lt;OpenLayers.Protocol&gt;} Required. The protocol used for fetching'],[-1,'     *     features.'],[-1,'     *\/'],[-1,'    protocol: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: multipleKey'],[-1,'     * {String} An event modifier (\'altKey\' or \'shiftKey\') that temporarily sets'],[-1,'     *     the &lt;multiple&gt; property to true.  Default is null.'],[-1,'     *\/'],[-1,'    multipleKey: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: toggleKey'],[-1,'     * {String} An event modifier (\'altKey\' or \'shiftKey\') that temporarily sets'],[-1,'     *     the &lt;toggle&gt; property to true.  Default is null.'],[-1,'     *\/'],[-1,'    toggleKey: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: modifiers'],[-1,'     * {Object} The event modifiers to use, according to the current event'],[-1,'     *     being handled by this control\'s handlers'],[-1,'     *\/'],[-1,'    modifiers: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: multiple'],[-1,'     * {Boolean} Allow selection of multiple geometries.  Default is false.'],[-1,'     *\/'],[-1,'    multiple: false, '],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: click'],[-1,'     * {Boolean} Use a click handler for selecting\/unselecting features. If'],[-1,'     *     both &lt;click&gt; and &lt;box&gt; are set to true, the click handler takes'],[-1,'     *     precedence over the box handler if a box with zero extent was'],[-1,'     *     selected.  Default is true.'],[-1,'     *\/'],[-1,'    click: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: single'],[-1,'     * {Boolean} Tells whether select by click should select a single'],[-1,'     *     feature. If set to false, all matching features are selected.'],[-1,'     *     If set to true, only the best matching feature is selected.'],[-1,'     *     This option has an effect only of the &lt;click&gt; option is set'],[-1,'     *     to true. Default is true.'],[-1,'     *\/'],[-1,'    single: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: clickout'],[-1,'     * {Boolean} Unselect features when clicking outside any feature.'],[-1,'     *     Applies only if &lt;click&gt; is true.  Default is true.'],[-1,'     *\/'],[-1,'    clickout: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: toggle'],[-1,'     * {Boolean} Unselect a selected feature on click.  Applies only if'],[-1,'     *     &lt;click&gt; is true.  Default is false.'],[-1,'     *\/'],[-1,'    toggle: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: clickTolerance'],[-1,'     * {Integer} Tolerance for the filter query in pixels. This has the'],[-1,'     *     same effect as the tolerance parameter on WMS GetFeatureInfo'],[-1,'     *     requests.  Will be ignored for box selections.  Applies only if'],[-1,'     *     &lt;click&gt; or &lt;hover&gt; is true.  Default is 5.  Note that this not'],[-1,'     *     only affects requests on click, but also on hover.'],[-1,'     *\/'],[-1,'    clickTolerance: 5,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: hover'],[-1,'     * {Boolean} Send feature requests on mouse moves.  Default is false.'],[-1,'     *\/'],[-1,'    hover: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: box'],[-1,'     * {Boolean} Allow feature selection by drawing a box. If set to'],[-1,'     *     true set &lt;click&gt; to false to disable the click handler and'],[-1,'     *     rely on the box handler only, even for \&quot;zero extent\&quot; boxes.'],[-1,'     *     See the description of the &lt;click&gt; option for additional'],[-1,'     *     information.  Default is false.'],[-1,'     *\/'],[-1,'    box: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: maxFeatures'],[-1,'     * {Integer} Maximum number of features to return from a query in single mode'],[-1,'     *     if supported by the &lt;protocol&gt;. This set of features is then used to'],[-1,'     *     determine the best match client-side. Default is 10.'],[-1,'     *\/'],[-1,'    maxFeatures: 10,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: features'],[-1,'     * {Object} Hash of {&lt;OpenLayers.Feature.Vector&gt;}, keyed by fid, holding'],[-1,'     *     the currently selected features'],[-1,'     *\/'],[-1,'    features: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Proeprty: hoverFeature'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} The feature currently selected by the'],[-1,'     *     hover handler'],[-1,'     *\/'],[-1,'    hoverFeature: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: handlerOptions'],[-1,'     * {Object} Additional options for the handlers used by this control. This'],[-1,'     *     is a hash with the keys \&quot;click\&quot;, \&quot;box\&quot; and \&quot;hover\&quot;.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: handlers'],[-1,'     * {Object} Object with references to multiple &lt;OpenLayers.Handler&gt;'],[-1,'     *     instances.'],[-1,'     *\/'],[-1,'    handlers: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: hoverResponse'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} The response object associated with'],[-1,'     *     the currently running hover request (if any).'],[-1,'     *\/'],[-1,'    hoverResponse: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: filterType'],[-1,'     * {&lt;String&gt;} The type of filter to use when sending off a request. '],[-1,'     *     Possible values: '],[-1,'     *     OpenLayers.Filter.Spatial.&lt;BBOX|INTERSECTS|WITHIN|CONTAINS&gt;'],[-1,'     *     Defaults to: OpenLayers.Filter.Spatial.BBOX'],[-1,'     *\/'],[-1,'    filterType: OpenLayers.Filter.Spatial.BBOX,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to those from &lt;OpenLayers.Control.events&gt;):'],[-1,'     * beforefeatureselected - Triggered when &lt;click&gt; is true before a'],[-1,'     *      feature is selected. The event object has a feature property with'],[-1,'     *      the feature about to select'],[-1,'     * featureselected - Triggered when &lt;click&gt; is true and a feature is'],[-1,'     *      selected. The event object has a feature property with the'],[-1,'     *      selected feature'],[-1,'     * beforefeaturesselected - Triggered when &lt;click&gt; is true before a'],[-1,'     *      set of features is selected. The event object is an array of'],[-1,'     *      feature properties with the features about to be selected.  '],[-1,'     *      Return false after receiving this event to discontinue processing'],[-1,'     *      of all featureselected events and the featuresselected event.'],[-1,'     * featuresselected - Triggered when &lt;click&gt; is true and a set of'],[-1,'     *      features is selected.  The event object is an array of feature'],[-1,'     *      properties of the selected features'],[-1,'     * featureunselected - Triggered when &lt;click&gt; is true and a feature is'],[-1,'     *      unselected. The event object has a feature property with the'],[-1,'     *      unselected feature'],[-1,'     * clickout - Triggered when when &lt;click&gt; is true and no feature was'],[-1,'     *      selected.'],[-1,'     * hoverfeature - Triggered when &lt;hover&gt; is true and the mouse has'],[-1,'     *      stopped over a feature'],[-1,'     * outfeature - Triggered when &lt;hover&gt; is true and the mouse moves'],[-1,'     *      moved away from a hover-selected feature'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.GetFeature'],[-1,'     * Create a new control for fetching remote features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} A configuration object which at least has to contain'],[-1,'     *     a &lt;protocol&gt; property (if not, it has to be set before a request is'],[-1,'     *     made)'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        options.handlerOptions = options.handlerOptions || {};'],[-1,''],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[-1,'        '],[0,'        this.features = {};'],[-1,''],[0,'        this.handlers = {};'],[-1,'        '],[0,'        if(this.click) {'],[0,'            this.handlers.click = new OpenLayers.Handler.Click(this,'],[-1,'                {click: this.selectClick}, this.handlerOptions.click || {});'],[-1,'        }'],[-1,''],[0,'        if(this.box) {'],[0,'            this.handlers.box = new OpenLayers.Handler.Box('],[-1,'                this, {done: this.selectBox},'],[-1,'                OpenLayers.Util.extend(this.handlerOptions.box, {'],[-1,'                    boxDivClassName: \&quot;olHandlerBoxSelectFeature\&quot;'],[-1,'                })'],[-1,'            ); '],[-1,'        }'],[-1,'        '],[0,'        if(this.hover) {'],[0,'            this.handlers.hover = new OpenLayers.Handler.Hover('],[-1,'                this, {\'move\': this.cancelHover, \'pause\': this.selectHover},'],[-1,'                OpenLayers.Util.extend(this.handlerOptions.hover, {'],[-1,'                    \'delay\': 250,'],[-1,'                    \'pixelTolerance\': 2'],[-1,'                })'],[-1,'            );'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: activate'],[-1,'     * Activates the control.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The control was effectively activated.'],[-1,'     *\/'],[-1,'    activate: function () {'],[0,'        if (!this.active) {'],[0,'            for(var i in this.handlers) {'],[0,'                this.handlers[i].activate();'],[-1,'            }'],[-1,'        }'],[0,'        return OpenLayers.Control.prototype.activate.apply('],[-1,'            this, arguments'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: deactivate'],[-1,'     * Deactivates the control.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The control was effectively deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function () {'],[0,'        if (this.active) {'],[0,'            for(var i in this.handlers) {'],[0,'                this.handlers[i].deactivate();'],[-1,'            }'],[-1,'        }'],[0,'        return OpenLayers.Control.prototype.deactivate.apply('],[-1,'            this, arguments'],[-1,'        );'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: selectClick'],[-1,'     * Called on click'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;} '],[-1,'     *\/'],[-1,'    selectClick: function(evt) {'],[0,'        var bounds = this.pixelToBounds(evt.xy);'],[-1,'        '],[0,'        this.setModifiers(evt);'],[0,'        this.request(bounds, {single: this.single});'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: selectBox'],[-1,'     * Callback from the handlers.box set up when &lt;box&gt; selection is on'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * position - {&lt;OpenLayers.Bounds&gt;|Object} An OpenLayers.Bounds or'],[-1,'     * an object with a \'left\', \'bottom\', \'right\' and \'top\' properties.'],[-1,'     *\/'],[-1,'    selectBox: function(position) {'],[0,'        var bounds;'],[0,'        if (position instanceof OpenLayers.Bounds) {'],[0,'            var minXY = this.map.getLonLatFromPixel({'],[-1,'                x: position.left,'],[-1,'                y: position.bottom'],[-1,'            });'],[0,'            var maxXY = this.map.getLonLatFromPixel({'],[-1,'                x: position.right,'],[-1,'                y: position.top'],[-1,'            });'],[0,'            bounds = new OpenLayers.Bounds('],[-1,'                minXY.lon, minXY.lat, maxXY.lon, maxXY.lat'],[-1,'            );'],[-1,'            '],[-1,'        } else {'],[0,'            if(this.click) {'],[-1,'                \/\/ box without extent - let the click handler take care of it'],[0,'                return;'],[-1,'            }'],[0,'            bounds = this.pixelToBounds(position);'],[-1,'        }'],[0,'        this.setModifiers(this.handlers.box.dragHandler.evt);'],[0,'        this.request(bounds);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: selectHover'],[-1,'     * Callback from the handlers.hover set up when &lt;hover&gt; selection is on'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} event object with an xy property'],[-1,'     *\/'],[-1,'    selectHover: function(evt) {'],[0,'        var bounds = this.pixelToBounds(evt.xy);'],[0,'        this.request(bounds, {single: true, hover: true});'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: cancelHover'],[-1,'     * Callback from the handlers.hover set up when &lt;hover&gt; selection is on'],[-1,'     *\/'],[-1,'    cancelHover: function() {'],[0,'        if (this.hoverResponse) {'],[0,'            this.protocol.abort(this.hoverResponse);'],[0,'            this.hoverResponse = null;'],[-1,''],[0,'            OpenLayers.Element.removeClass(this.map.viewPortDiv, \&quot;olCursorWait\&quot;);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: request'],[-1,'     * Sends a GetFeature request to the WFS'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} bounds for the request\'s BBOX filter'],[-1,'     * options - {Object} additional options for this method.'],[-1,'     * '],[-1,'     * Supported options include:'],[-1,'     * single - {Boolean} A single feature should be returned.'],[-1,'     *     Note that this will be ignored if the protocol does not'],[-1,'     *     return the geometries of the features.'],[-1,'     * hover - {Boolean} Do the request for the hover handler.'],[-1,'     *\/'],[-1,'    request: function(bounds, options) {'],[0,'        options = options || {};'],[0,'        var filter = new OpenLayers.Filter.Spatial({'],[-1,'            type: this.filterType, '],[-1,'            value: bounds'],[-1,'        });'],[-1,'        '],[-1,'        \/\/ Set the cursor to \&quot;wait\&quot; to tell the user we\'re working.'],[0,'        OpenLayers.Element.addClass(this.map.viewPortDiv, \&quot;olCursorWait\&quot;);'],[-1,''],[0,'        var response = this.protocol.read({'],[-1,'            maxFeatures: options.single == true ? this.maxFeatures : undefined,'],[-1,'            filter: filter,'],[-1,'            callback: function(result) {'],[0,'                if(result.success()) {'],[0,'                    if(result.features.length) {'],[0,'                        if(options.single == true) {'],[0,'                            this.selectBestFeature(result.features,'],[-1,'                                bounds.getCenterLonLat(), options);'],[-1,'                        } else {'],[0,'                            this.select(result.features);'],[-1,'                        }'],[0,'                    } else if(options.hover) {'],[0,'                        this.hoverSelect();'],[-1,'                    } else {'],[0,'                        this.events.triggerEvent(\&quot;clickout\&quot;);'],[0,'                        if(this.clickout) {'],[0,'                            this.unselectAll();'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'                \/\/ Reset the cursor.'],[0,'                OpenLayers.Element.removeClass(this.map.viewPortDiv, \&quot;olCursorWait\&quot;);'],[-1,'            },'],[-1,'            scope: this'],[-1,'        });'],[0,'        if(options.hover == true) {'],[0,'            this.hoverResponse = response;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: selectBestFeature'],[-1,'     * Selects the feature from an array of features that is the best match'],[-1,'     *     for the click position.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)}'],[-1,'     * clickPosition - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     * options - {Object} additional options for this method'],[-1,'     * '],[-1,'     * Supported options include:'],[-1,'     * hover - {Boolean} Do the selection for the hover handler.'],[-1,'     *\/'],[-1,'    selectBestFeature: function(features, clickPosition, options) {'],[0,'        options = options || {};'],[0,'        if(features.length) {'],[0,'            var point = new OpenLayers.Geometry.Point(clickPosition.lon,'],[-1,'                clickPosition.lat);'],[0,'            var feature, resultFeature, dist;'],[0,'            var minDist = Number.MAX_VALUE;'],[0,'            for(var i=0; i&lt;features.length; ++i) {'],[0,'                feature = features[i];'],[0,'                if(feature.geometry) {'],[0,'                    dist = point.distanceTo(feature.geometry, {edge: false});'],[0,'                    if(dist &lt; minDist) {'],[0,'                        minDist = dist;'],[0,'                        resultFeature = feature;'],[0,'                        if(minDist == 0) {'],[0,'                            break;'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'            '],[0,'            if(options.hover == true) {'],[0,'                this.hoverSelect(resultFeature);'],[-1,'            } else {'],[0,'                this.select(resultFeature || features);'],[-1,'            } '],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setModifiers'],[-1,'     * Sets the multiple and toggle modifiers according to the current event'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;}'],[-1,'     *\/'],[-1,'    setModifiers: function(evt) {'],[0,'        this.modifiers = {'],[-1,'            multiple: this.multiple || (this.multipleKey &amp;&amp; evt[this.multipleKey]),'],[-1,'            toggle: this.toggle || (this.toggleKey &amp;&amp; evt[this.toggleKey])'],[-1,'        };        '],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: select'],[-1,'     * Add feature to the hash of selected features and trigger the'],[-1,'     * featureselected and featuresselected events.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * features - {&lt;OpenLayers.Feature.Vector&gt;} or an array of features'],[-1,'     *\/'],[-1,'    select: function(features) {'],[0,'        if(!this.modifiers.multiple &amp;&amp; !this.modifiers.toggle) {'],[0,'            this.unselectAll();'],[-1,'        }'],[0,'        if(!(OpenLayers.Util.isArray(features))) {'],[0,'            features = [features];'],[-1,'        }'],[-1,'        '],[0,'        var cont = this.events.triggerEvent(\&quot;beforefeaturesselected\&quot;, {'],[-1,'            features: features'],[-1,'        });'],[0,'        if(cont !== false) {'],[0,'            var selectedFeatures = [];'],[0,'            var feature;'],[0,'            for(var i=0, len=features.length; i&lt;len; ++i) {'],[0,'                feature = features[i];'],[0,'                if(this.features[feature.fid || feature.id]) {'],[0,'                    if(this.modifiers.toggle) {'],[0,'                        this.unselect(this.features[feature.fid || feature.id]);'],[-1,'                    }'],[-1,'                } else {'],[0,'                    cont = this.events.triggerEvent(\&quot;beforefeatureselected\&quot;, {'],[-1,'                        feature: feature'],[-1,'                    });'],[0,'                    if(cont !== false) {'],[0,'                        this.features[feature.fid || feature.id] = feature;'],[0,'                        selectedFeatures.push(feature);'],[-1,'                '],[0,'                        this.events.triggerEvent(\&quot;featureselected\&quot;,'],[-1,'                            {feature: feature});'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            this.events.triggerEvent(\&quot;featuresselected\&quot;, {'],[-1,'                features: selectedFeatures'],[-1,'            });'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: hoverSelect'],[-1,'     * Sets\/unsets the &lt;hoverFeature&gt;'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} the feature to hover-select.'],[-1,'     *     If none is provided, the current &lt;hoverFeature&gt; will be nulled and'],[-1,'     *     the outfeature event will be triggered.'],[-1,'     *\/'],[-1,'    hoverSelect: function(feature) {'],[0,'        var fid = feature ? feature.fid || feature.id : null;'],[0,'        var hfid = this.hoverFeature ?'],[-1,'            this.hoverFeature.fid || this.hoverFeature.id : null;'],[-1,'            '],[0,'        if(hfid &amp;&amp; hfid != fid) {'],[0,'            this.events.triggerEvent(\&quot;outfeature\&quot;,'],[-1,'                {feature: this.hoverFeature});'],[0,'            this.hoverFeature = null;'],[-1,'        }'],[0,'        if(fid &amp;&amp; fid != hfid) {'],[0,'            this.events.triggerEvent(\&quot;hoverfeature\&quot;, {feature: feature});'],[0,'            this.hoverFeature = feature;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: unselect'],[-1,'     * Remove feature from the hash of selected features and trigger the'],[-1,'     * featureunselected event.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    unselect: function(feature) {'],[0,'        delete this.features[feature.fid || feature.id];'],[0,'        this.events.triggerEvent(\&quot;featureunselected\&quot;, {feature: feature});'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: unselectAll'],[-1,'     * Unselect all selected features.'],[-1,'     *\/'],[-1,'    unselectAll: function() {'],[-1,'        \/\/ we\'ll want an option to supress notification here'],[0,'        for(var fid in this.features) {'],[0,'            this.unselect(this.features[fid]);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: setMap'],[-1,'     * Set the map property for the control. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} '],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        for(var i in this.handlers) {'],[0,'            this.handlers[i].setMap(map);'],[-1,'        }'],[0,'        OpenLayers.Control.prototype.setMap.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: pixelToBounds'],[-1,'     * Takes a pixel as argument and creates bounds after adding the'],[-1,'     * &lt;clickTolerance&gt;.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *\/'],[-1,'    pixelToBounds: function(pixel) {'],[0,'        var llPx = pixel.add(-this.clickTolerance\/2, this.clickTolerance\/2);'],[0,'        var urPx = pixel.add(this.clickTolerance\/2, -this.clickTolerance\/2);'],[0,'        var ll = this.map.getLonLatFromPixel(llPx);'],[0,'        var ur = this.map.getLonLatFromPixel(urPx);'],[0,'        return new OpenLayers.Bounds(ll.lon, ll.lat, ur.lon, ur.lat);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.GetFeature\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/QueryStringFilter.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Console.js'],[-1,' * @requires OpenLayers\/Format.js'],[-1,' * @requires OpenLayers\/Filter\/Spatial.js'],[-1,' * @requires OpenLayers\/Filter\/Comparison.js'],[-1,' * @requires OpenLayers\/Filter\/Logical.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.QueryStringFilter'],[-1,' * Parser for reading a query string and creating a simple filter.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.QueryStringFilter = (function() {'],[-1,''],[-1,'    \/** '],[-1,'     * Map the OpenLayers.Filter.Comparison types to the operation strings of '],[-1,'     * the protocol.'],[-1,'     *\/'],[1,'    var cmpToStr = {};'],[1,'    cmpToStr[OpenLayers.Filter.Comparison.EQUAL_TO] = \&quot;eq\&quot;;'],[1,'    cmpToStr[OpenLayers.Filter.Comparison.NOT_EQUAL_TO] = \&quot;ne\&quot;;'],[1,'    cmpToStr[OpenLayers.Filter.Comparison.LESS_THAN] = \&quot;lt\&quot;;'],[1,'    cmpToStr[OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO] = \&quot;lte\&quot;;'],[1,'    cmpToStr[OpenLayers.Filter.Comparison.GREATER_THAN] = \&quot;gt\&quot;;'],[1,'    cmpToStr[OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO] = \&quot;gte\&quot;;'],[1,'    cmpToStr[OpenLayers.Filter.Comparison.LIKE] = \&quot;ilike\&quot;;'],[-1,''],[-1,'    \/**'],[-1,'     * Function: regex2value'],[-1,'     * Convert the value from a regular expression string to a LIKE\/ILIKE'],[-1,'     * string known to the web service.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * value - {String} The regex string.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The converted string.'],[-1,'     *\/'],[1,'    function regex2value(value) {'],[-1,''],[-1,'        \/\/ highly sensitive!! Do not change this without running the'],[-1,'        \/\/ Protocol\/HTTP.html unit tests'],[-1,''],[-1,'        \/\/ convert % to \\%'],[0,'        value = value.replace(\/%\/g, \&quot;\\\\%\&quot;);'],[-1,''],[-1,'        \/\/ convert \\\\. to \\\\_ (\\\\.* occurences converted later)'],[0,'        value = value.replace(\/\\\\\\\\\\.(\\*)?\/g, function($0, $1) {'],[0,'            return $1 ? $0 : \&quot;\\\\\\\\_\&quot;;'],[-1,'        });'],[-1,''],[-1,'        \/\/ convert \\\\.* to \\\\%'],[0,'        value = value.replace(\/\\\\\\\\\\.\\*\/g, \&quot;\\\\\\\\%\&quot;);'],[-1,''],[-1,'        \/\/ convert . to _ (\\. and .* occurences converted later)'],[0,'        value = value.replace(\/(\\\\)?\\.(\\*)?\/g, function($0, $1, $2) {'],[0,'            return $1 || $2 ? $0 : \&quot;_\&quot;;'],[-1,'        });'],[-1,''],[-1,'        \/\/ convert .* to % (\\.* occurnces converted later)'],[0,'        value = value.replace(\/(\\\\)?\\.\\*\/g, function($0, $1) {'],[0,'            return $1 ? $0 : \&quot;%\&quot;;'],[-1,'        });'],[-1,''],[-1,'        \/\/ convert \\. to .'],[0,'        value = value.replace(\/\\\\\\.\/g, \&quot;.\&quot;);'],[-1,''],[-1,'        \/\/ replace \\* with * (watching out for \\\\*)'],[0,'        value = value.replace(\/(\\\\)?\\\\\\*\/g, function($0, $1) {'],[0,'            return $1 ? $0 : \&quot;*\&quot;;'],[-1,'        });'],[-1,''],[0,'        return value;'],[-1,'    }'],[-1,'    '],[1,'    return OpenLayers.Class(OpenLayers.Format, {'],[-1,'        '],[-1,'        \/**'],[-1,'         * Property: wildcarded.'],[-1,'         * {Boolean} If true percent signs are added around values'],[-1,'         *     read from LIKE filters, for example if the protocol'],[-1,'         *     read method is passed a LIKE filter whose property'],[-1,'         *     is \&quot;foo\&quot; and whose value is \&quot;bar\&quot; the string'],[-1,'         *     \&quot;foo__ilike=%bar%\&quot; will be sent in the query string;'],[-1,'         *     defaults to false.'],[-1,'         *\/'],[-1,'        wildcarded: false,'],[-1,''],[-1,'        \/**'],[-1,'         * APIProperty: srsInBBOX'],[-1,'         * {Boolean} Include the SRS identifier in BBOX query string parameter.  '],[-1,'         *     Default is false.  If true and the layer has a projection object set,'],[-1,'         *     any BBOX filter will be serialized with a fifth item identifying the'],[-1,'         *     projection.  E.g. bbox=-1000,-1000,1000,1000,EPSG:900913'],[-1,'         *\/'],[-1,'        srsInBBOX: false,'],[-1,''],[-1,'        \/**'],[-1,'         * APIMethod: write'],[-1,'         * Serialize an &lt;OpenLayers.Filter&gt; objects using the \&quot;simple\&quot; filter syntax for '],[-1,'         *     query string parameters.  This function must be called as a method of'],[-1,'         *     a protocol instance.'],[-1,'         *'],[-1,'         * Parameters:'],[-1,'         * filter - {&lt;OpenLayers.Filter&gt;} filter to convert.'],[-1,'         * params - {Object} The parameters object.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {Object} The resulting parameters object.'],[-1,'         *\/'],[-1,'        write: function(filter, params) {'],[0,'            params = params || {};'],[0,'            var className = filter.CLASS_NAME;'],[0,'            var filterType = className.substring(className.lastIndexOf(\&quot;.\&quot;) + 1);'],[0,'            switch (filterType) {'],[-1,'                case \&quot;Spatial\&quot;:'],[0,'                    switch (filter.type) {'],[-1,'                        case OpenLayers.Filter.Spatial.BBOX:'],[0,'                            params.bbox = filter.value.toArray();'],[0,'                            if (this.srsInBBOX &amp;&amp; filter.projection) {'],[0,'                                params.bbox.push(filter.projection.getCode());'],[-1,'                            }'],[0,'                            break;'],[-1,'                        case OpenLayers.Filter.Spatial.DWITHIN:'],[0,'                            params.tolerance = filter.distance;'],[-1,'                            \/\/ no break here'],[-1,'                        case OpenLayers.Filter.Spatial.WITHIN:'],[0,'                            params.lon = filter.value.x;'],[0,'                            params.lat = filter.value.y;'],[0,'                            break;'],[-1,'                        default:'],[0,'                            OpenLayers.Console.warn('],[-1,'                                \&quot;Unknown spatial filter type \&quot; + filter.type);'],[-1,'                    }'],[0,'                    break;'],[-1,'                case \&quot;Comparison\&quot;:'],[0,'                    var op = cmpToStr[filter.type];'],[0,'                    if (op !== undefined) {'],[0,'                        var value = filter.value;'],[0,'                        if (filter.type == OpenLayers.Filter.Comparison.LIKE) {'],[0,'                            value = regex2value(value);'],[0,'                            if (this.wildcarded) {'],[0,'                                value = \&quot;%\&quot; + value + \&quot;%\&quot;;'],[-1,'                            }'],[-1,'                        }'],[0,'                        params[filter.property + \&quot;__\&quot; + op] = value;'],[0,'                        params.queryable = params.queryable || [];'],[0,'                        params.queryable.push(filter.property);'],[-1,'                    } else {'],[0,'                        OpenLayers.Console.warn('],[-1,'                            \&quot;Unknown comparison filter type \&quot; + filter.type);'],[-1,'                    }'],[0,'                    break;'],[-1,'                case \&quot;Logical\&quot;:'],[0,'                    if (filter.type === OpenLayers.Filter.Logical.AND) {'],[0,'                        for (var i=0,len=filter.filters.length; i&lt;len; i++) {'],[0,'                            params = this.write(filter.filters[i], params);'],[-1,'                        }'],[-1,'                    } else {'],[0,'                        OpenLayers.Console.warn('],[-1,'                            \&quot;Unsupported logical filter type \&quot; + filter.type);'],[-1,'                    }'],[0,'                    break;'],[-1,'                default:'],[0,'                    OpenLayers.Console.warn(\&quot;Unknown filter type \&quot; + filterType);'],[-1,'            }'],[0,'            return params;'],[-1,'        },'],[-1,'        '],[-1,'        CLASS_NAME: \&quot;OpenLayers.Format.QueryStringFilter\&quot;'],[-1,'        '],[-1,'    });'],[-1,''],[-1,''],[-1,'})();'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WCSCapabilities\/v1_1_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WCSCapabilities\/v1.js'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1_1_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WCSCapabilities\/v1_1_0'],[-1,' * Read WCS Capabilities version 1.1.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WCSCapabilities.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WCSCapabilities.v1_1_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.WCSCapabilities.v1, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        wcs: \&quot;http:\/\/www.opengis.net\/wcs\/1.1\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;,'],[-1,'        xsi: \&quot;http:\/\/www.w3.org\/2001\/XMLSchema-instance\&quot;,'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\/1.1\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: errorProperty'],[-1,'     * {String} Which property of the returned object to check for in order to'],[-1,'     * determine whether or not parsing has failed. In the case that the'],[-1,'     * errorProperty is undefined on the returned object, the document will be'],[-1,'     * run through an OGCExceptionReport parser.'],[-1,'     *\/'],[-1,'    errorProperty: \&quot;operationsMetadata\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WCSCapabilities.v1_1_0'],[-1,'     * Create a new parser for WCS capabilities version 1.1.0.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wcs\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \/\/ In 1.0.0, this was WCS_Capabilties, in 1.1.0, it\'s Capabilities'],[-1,'            \&quot;Capabilities\&quot;: function(node, obj) {           '],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;Contents\&quot;: function(node, request) {'],[0,'                request.contentMetadata = [];'],[0,'                this.readChildNodes(node, request.contentMetadata);'],[-1,'            },'],[-1,'            \&quot;CoverageSummary\&quot;: function(node, contentMetadata) {'],[0,'                var coverageSummary = {};'],[-1,'                \/\/ Read the summary:'],[0,'                this.readChildNodes(node, coverageSummary);   '],[-1,''],[-1,'                \/\/ Add it to the contentMetadata array:  '],[0,'                contentMetadata.push(coverageSummary);                 '],[-1,'            },'],[-1,'            \&quot;Identifier\&quot;: function(node, coverageSummary) {'],[0,'                coverageSummary.identifier = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Title\&quot;: function(node, coverageSummary) {'],[0,'              coverageSummary.title = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Abstract\&quot;: function(node, coverageSummary) {'],[0,'                coverageSummary[\&quot;abstract\&quot;] = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;SupportedCRS\&quot;: function(node, coverageSummary) {'],[0,'                var crs = this.getChildValue(node);'],[0,'                if(crs) {'],[0,'                    if(!coverageSummary.supportedCRS) { '],[0,'                        coverageSummary.supportedCRS = [];'],[-1,'                    }'],[0,'                    coverageSummary.supportedCRS.push(crs);'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;SupportedFormat\&quot;: function(node, coverageSummary) {'],[0,'                var format = this.getChildValue(node);'],[0,'                if(format) {'],[0,'                    if(!coverageSummary.supportedFormat) { '],[0,'                        coverageSummary.supportedFormat = [];'],[-1,'                    }'],[0,'                    coverageSummary.supportedFormat.push(format);'],[-1,'                }'],[-1,'            }'],[-1,'        }, OpenLayers.Format.WCSCapabilities.v1.prototype.readers[\&quot;wcs\&quot;]),'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\&quot;ows\&quot;]'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WCSCapabilities.v1_1_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/MousePosition.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.MousePosition'],[-1,' * The MousePosition control displays geographic coordinates of the mouse'],[-1,' * pointer, as it is moved about the map.'],[-1,' *'],[-1,' * You can use the &lt;prefix&gt;- or &lt;suffix&gt;-properties to provide more information'],[-1,' * about the displayed coordinates to the user:'],[-1,' *'],[-1,' * (code)'],[-1,' *     var mousePositionCtrl = new OpenLayers.Control.MousePosition({'],[-1,' *         prefix: \'&lt;a target=\&quot;_blank\&quot; \' +'],[-1,' *             \'href=\&quot;http:\/\/spatialreference.org\/ref\/epsg\/4326\/\&quot;&gt;\' +'],[-1,' *             \'EPSG:4326&lt;\/a&gt; coordinates: \''],[-1,' *         }'],[-1,' *     );'],[-1,' * (end code)'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.MousePosition = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: autoActivate'],[-1,'     * {Boolean} Activate the control when it is added to a map.  Default is'],[-1,'     *     true.'],[-1,'     *\/'],[-1,'    autoActivate: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: element'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    element: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: prefix'],[-1,'     * {String} A string to be prepended to the current pointers coordinates'],[-1,'     *     when it is rendered.  Defaults to the empty string \'\'.'],[-1,'     *\/'],[-1,'    prefix: \'\','],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: separator'],[-1,'     * {String} A string to be used to seperate the two coordinates from each'],[-1,'     *     other.  Defaults to the string \', \', which will result in a'],[-1,'     *     rendered coordinate of e.g. \'42.12, 21.22\'.'],[-1,'     *\/'],[-1,'    separator: \', \','],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: suffix'],[-1,'     * {String} A string to be appended to the current pointers coordinates'],[-1,'     *     when it is rendered.  Defaults to the empty string \'\'.'],[-1,'     *\/'],[-1,'    suffix: \'\','],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: numDigits'],[-1,'     * {Integer} The number of digits each coordinate shall have when being'],[-1,'     *     rendered, Defaults to 5.'],[-1,'     *\/'],[-1,'    numDigits: 5,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: granularity'],[-1,'     * {Integer}'],[-1,'     *\/'],[-1,'    granularity: 10,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: emptyString'],[-1,'     * {String} Set this to some value to set when the mouse is outside the'],[-1,'     *     map.'],[-1,'     *\/'],[-1,'    emptyString: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: lastXy'],[-1,'     * {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *\/'],[-1,'    lastXy: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: displayProjection'],[-1,'     * {&lt;OpenLayers.Projection&gt;} The projection in which the mouse position is'],[-1,'     *     displayed.'],[-1,'     *\/'],[-1,'    displayProjection: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.MousePosition'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Options for control.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     *\/'],[-1,'     destroy: function() {'],[0,'         this.deactivate();'],[0,'         OpenLayers.Control.prototype.destroy.apply(this, arguments);'],[-1,'     },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {'],[0,'            this.map.events.register(\'mousemove\', this, this.redraw);'],[0,'            this.map.events.register(\'mouseout\', this, this.reset);'],[0,'            this.redraw();'],[0,'            return true;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        if (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {'],[0,'            this.map.events.unregister(\'mousemove\', this, this.redraw);'],[0,'            this.map.events.unregister(\'mouseout\', this, this.reset);'],[0,'            this.element.innerHTML = \&quot;\&quot;;'],[0,'            return true;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        OpenLayers.Control.prototype.draw.apply(this, arguments);'],[-1,''],[0,'        if (!this.element) {'],[0,'            this.div.left = \&quot;\&quot;;'],[0,'            this.div.top = \&quot;\&quot;;'],[0,'            this.element = this.div;'],[-1,'        }'],[-1,''],[0,'        return this.div;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: redraw'],[-1,'     *\/'],[-1,'    redraw: function(evt) {'],[-1,''],[0,'        var lonLat;'],[-1,''],[0,'        if (evt == null) {'],[0,'            this.reset();'],[0,'            return;'],[-1,'        } else {'],[0,'            if (this.lastXy == null ||'],[-1,'                Math.abs(evt.xy.x - this.lastXy.x) &gt; this.granularity ||'],[-1,'                Math.abs(evt.xy.y - this.lastXy.y) &gt; this.granularity)'],[-1,'            {'],[0,'                this.lastXy = evt.xy;'],[0,'                return;'],[-1,'            }'],[-1,''],[0,'            lonLat = this.map.getLonLatFromPixel(evt.xy);'],[0,'            if (!lonLat) {'],[-1,'                \/\/ map has not yet been properly initialized'],[0,'                return;'],[-1,'            }'],[0,'            if (this.displayProjection) {'],[0,'                lonLat.transform(this.map.getProjectionObject(),'],[-1,'                                 this.displayProjection );'],[-1,'            }'],[0,'            this.lastXy = evt.xy;'],[-1,''],[-1,'        }'],[-1,''],[0,'        var newHtml = this.formatOutput(lonLat);'],[-1,''],[0,'        if (newHtml != this.element.innerHTML) {'],[0,'            this.element.innerHTML = newHtml;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: reset'],[-1,'     *\/'],[-1,'    reset: function(evt) {'],[0,'        if (this.emptyString != null) {'],[0,'            this.element.innerHTML = this.emptyString;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: formatOutput'],[-1,'     * Override to provide custom display output'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * lonLat - {&lt;OpenLayers.LonLat&gt;} Location to display'],[-1,'     *\/'],[-1,'    formatOutput: function(lonLat) {'],[0,'        var digits = parseInt(this.numDigits);'],[0,'        var newHtml ='],[-1,'            this.prefix +'],[-1,'            lonLat.lon.toFixed(digits) +'],[-1,'            this.separator +'],[-1,'            lonLat.lat.toFixed(digits) +'],[-1,'            this.suffix;'],[0,'        return newHtml;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.MousePosition\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Tile\/UTFGrid.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Tile.js'],[-1,' * @requires OpenLayers\/Format\/JSON.js'],[-1,' * @requires OpenLayers\/Request.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Tile.UTFGrid'],[-1,' * Instances of OpenLayers.Tile.UTFGrid are used to manage '],[-1,' * UTFGrids. This is an unusual tile type in that it doesn\'t have a'],[-1,' * rendered image; only a \'hit grid\' that can be used to '],[-1,' * look up feature attributes.'],[-1,' *'],[-1,' * See the &lt;OpenLayers.Tile.UTFGrid&gt; constructor for details on constructing a'],[-1,' * new instance.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Tile&gt;'],[-1,' *\/'],[1,'OpenLayers.Tile.UTFGrid = OpenLayers.Class(OpenLayers.Tile, {'],[-1,''],[-1,'    \/** '],[-1,'     * Property: url'],[-1,'     * {String}'],[-1,'     * The URL of the UTFGrid file being requested. Provided by the &lt;getURL&gt;'],[-1,'     *     method. '],[-1,'     *\/'],[-1,'    url: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: utfgridResolution'],[-1,'     * {Number}'],[-1,'     * Ratio of the pixel width to the width of a UTFGrid data point.  If an '],[-1,'     *     entry in the grid represents a 4x4 block of pixels, the '],[-1,'     *     utfgridResolution would be 4.  Default is 2.'],[-1,'     *\/'],[-1,'    utfgridResolution: 2,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: json'],[-1,'     * {Object}'],[-1,'     * Stores the parsed JSON tile data structure. '],[-1,'     *\/'],[-1,'    json: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: format'],[-1,'     * {OpenLayers.Format.JSON}'],[-1,'     * Parser instance used to parse JSON for cross browser support.  The native'],[-1,'     *     JSON.parse method will be used where available (all except IE&lt;8).'],[-1,'     *\/'],[-1,'    format: null,'],[-1,''],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Tile.UTFGrid'],[-1,'     * Constructor for a new &lt;OpenLayers.Tile.UTFGrid&gt; instance.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer&gt;} layer that the tile will go in.'],[-1,'     * position - {&lt;OpenLayers.Pixel&gt;}'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * url - {&lt;String&gt;} Deprecated. Remove me in 3.0.'],[-1,'     * size - {&lt;OpenLayers.Size&gt;}'],[-1,'     * options - {Object}'],[-1,'     *\/'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: destroy'],[-1,'     * Clean up.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.clear();'],[0,'        OpenLayers.Tile.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * Check that a tile should be drawn, and draw it.'],[-1,'     * In the case of UTFGrids, \&quot;drawing\&quot; it means fetching and'],[-1,'     * parsing the json. '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Was a tile drawn?'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        var drawn = OpenLayers.Tile.prototype.draw.apply(this, arguments);'],[0,'        if (drawn) {'],[0,'            if (this.isLoading) {'],[0,'                this.abortLoading();'],[-1,'                \/\/if we\'re already loading, send \'reload\' instead of \'loadstart\'.'],[0,'                this.events.triggerEvent(\&quot;reload\&quot;); '],[-1,'            } else {'],[0,'                this.isLoading = true;'],[0,'                this.events.triggerEvent(\&quot;loadstart\&quot;);'],[-1,'            }'],[0,'            this.url = this.layer.getURL(this.bounds);'],[-1,''],[0,'            if (this.layer.useJSONP) {'],[-1,'                \/\/ Use JSONP method to avoid xbrowser policy'],[0,'                var ols = new OpenLayers.Protocol.Script({'],[-1,'                    url: this.url,'],[-1,'                    callback: function(response) {'],[0,'                        this.isLoading = false;'],[0,'                        this.events.triggerEvent(\&quot;loadend\&quot;);'],[0,'                        this.json = response.data;'],[-1,'                    },'],[-1,'                    scope: this'],[-1,'                });'],[0,'                ols.read();'],[0,'                this.request = ols;'],[-1,'            } else {'],[-1,'                \/\/ Use standard XHR'],[0,'                this.request = OpenLayers.Request.GET({'],[-1,'                    url: this.url,'],[-1,'                    callback: function(response) {'],[0,'                        this.isLoading = false;'],[0,'                        this.events.triggerEvent(\&quot;loadend\&quot;);'],[0,'                        if (response.status === 200) {'],[0,'                            this.parseData(response.responseText);'],[-1,'                        }'],[-1,'                    },'],[-1,'                    scope: this'],[-1,'                });'],[-1,'            }'],[-1,'        } else {'],[0,'            this.unload();'],[-1,'        }'],[0,'        return drawn;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: abortLoading'],[-1,'     * Cancel a pending request.'],[-1,'     *\/'],[-1,'    abortLoading: function() {'],[0,'        if (this.request) {'],[0,'            this.request.abort();'],[0,'            delete this.request;'],[-1,'        }'],[0,'        this.isLoading = false;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getFeatureInfo'],[-1,'     * Get feature information associated with a pixel offset.  If the pixel'],[-1,'     *     offset corresponds to a feature, the returned object will have id'],[-1,'     *     and data properties.  Otherwise, null will be returned.'],[-1,'     *     '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * i - {Number} X-axis pixel offset (from top left of tile)'],[-1,'     * j - {Number} Y-axis pixel offset (from top left of tile)'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Object with feature id and data properties corresponding to the '],[-1,'     *     given pixel offset.'],[-1,'     *\/'],[-1,'    getFeatureInfo: function(i, j) {'],[0,'        var info = null;'],[0,'        if (this.json) {'],[0,'            var id = this.getFeatureId(i, j);'],[0,'            if (id !== null) {'],[0,'                info = {id: id, data: this.json.data[id]};'],[-1,'            }'],[-1,'        }'],[0,'        return info;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getFeatureId'],[-1,'     * Get the identifier for the feature associated with a pixel offset.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * i - {Number} X-axis pixel offset (from top left of tile)'],[-1,'     * j - {Number} Y-axis pixel offset (from top left of tile)'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} The feature identifier corresponding to the given pixel offset.'],[-1,'     *     Returns null if pixel doesn\'t correspond to a feature.'],[-1,'     *\/'],[-1,'    getFeatureId: function(i, j) {'],[0,'        var id = null;'],[0,'        if (this.json) {'],[0,'            var resolution = this.utfgridResolution;'],[0,'            var row = Math.floor(j \/ resolution);'],[0,'            var col = Math.floor(i \/ resolution);'],[0,'            var charCode = this.json.grid[row].charCodeAt(col);'],[0,'            var index = this.indexFromCharCode(charCode);'],[0,'            var keys = this.json.keys;'],[0,'            if (!isNaN(index) &amp;&amp; (index in keys)) {'],[0,'                id = keys[index];'],[-1,'            }'],[-1,'        }'],[0,'        return id;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: indexFromCharCode'],[-1,'     * Given a character code for one of the UTFGrid \&quot;grid\&quot; characters, '],[-1,'     *     resolve the integer index for the feature id in the UTFGrid \&quot;keys\&quot;'],[-1,'     *     array.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * charCode - {Integer}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Integer} Index for the feature id from the keys array.'],[-1,'     *\/'],[-1,'    indexFromCharCode: function(charCode) {'],[0,'        if (charCode &gt;= 93) {'],[0,'            charCode--;'],[-1,'        }'],[0,'        if (charCode &gt;= 35) {'],[0,'            charCode --;'],[-1,'        }'],[0,'        return charCode - 32;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseData'],[-1,'     * Parse the JSON from a request'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * str - {String} UTFGrid as a JSON string. '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} parsed javascript data'],[-1,'     *\/'],[-1,'    parseData: function(str) {'],[0,'        if (!this.format) {'],[0,'            this.format = new OpenLayers.Format.JSON();'],[-1,'        }'],[0,'        this.json = this.format.read(str);'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: clear'],[-1,'     * Delete data stored with this tile.'],[-1,'     *\/'],[-1,'    clear: function() {'],[0,'        this.json = null;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Tile.UTFGrid\&quot;'],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/NavigationHistory.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Control\/Button.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.NavigationHistory'],[-1,' * A navigation history control.  This is a meta-control, that creates two'],[-1,' *     dependent controls: &lt;previous&gt; and &lt;next&gt;.  Call the trigger method'],[-1,' *     on the &lt;previous&gt; and &lt;next&gt; controls to restore previous and next'],[-1,' *     history states.  The previous and next controls will become active'],[-1,' *     when there are available states to restore and will become deactive'],[-1,' *     when there are no states to restore.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.NavigationHistory = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: type'],[-1,'     * {String} Note that this control is not intended to be added directly'],[-1,'     *     to a control panel.  Instead, add the sub-controls previous and'],[-1,'     *     next.  These sub-controls are button type controls that activate'],[-1,'     *     and deactivate themselves.  If this parent control is added to'],[-1,'     *     a panel, it will act as a toggle.'],[-1,'     *\/'],[-1,'    type: OpenLayers.Control.TYPE_TOGGLE,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: previous'],[-1,'     * {&lt;OpenLayers.Control&gt;} A button type control whose trigger method restores'],[-1,'     *     the previous state managed by this control.'],[-1,'     *\/'],[-1,'    previous: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: previousOptions'],[-1,'     * {Object} Set this property on the options argument of the constructor'],[-1,'     *     to set optional properties on the &lt;previous&gt; control.'],[-1,'     *\/'],[-1,'    previousOptions: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: next'],[-1,'     * {&lt;OpenLayers.Control&gt;} A button type control whose trigger method restores'],[-1,'     *     the next state managed by this control.'],[-1,'     *\/'],[-1,'    next: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: nextOptions'],[-1,'     * {Object} Set this property on the options argument of the constructor'],[-1,'     *     to set optional properties on the &lt;next&gt; control.'],[-1,'     *\/'],[-1,'    nextOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: limit'],[-1,'     * {Integer} Optional limit on the number of history items to retain.  If'],[-1,'     *     null, there is no limit.  Default is 50.'],[-1,'     *\/'],[-1,'    limit: 50,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: autoActivate'],[-1,'     * {Boolean} Activate the control when it is added to a map.  Default is'],[-1,'     *     true.'],[-1,'     *\/'],[-1,'    autoActivate: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: clearOnDeactivate'],[-1,'     * {Boolean} Clear the history when the control is deactivated.  Default'],[-1,'     *     is false.'],[-1,'     *\/'],[-1,'    clearOnDeactivate: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: registry'],[-1,'     * {Object} An object with keys corresponding to event types.  Values'],[-1,'     *     are functions that return an object representing the current state.'],[-1,'     *\/'],[-1,'    registry: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: nextStack'],[-1,'     * {Array} Array of items in the history.'],[-1,'     *\/'],[-1,'    nextStack: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: previousStack'],[-1,'     * {Array} List of items in the history.  First item represents the current'],[-1,'     *     state.'],[-1,'     *\/'],[-1,'    previousStack: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: listeners'],[-1,'     * {Object} An object containing properties corresponding to event types.'],[-1,'     *     This object is used to configure the control and is modified on'],[-1,'     *     construction.'],[-1,'     *\/'],[-1,'    listeners: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: restoring'],[-1,'     * {Boolean} Currently restoring a history state.  This is set to true'],[-1,'     *     before calling restore and set to false after restore returns.'],[-1,'     *\/'],[-1,'    restoring: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.NavigationHistory '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be used'],[-1,'     *     to extend the control.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[-1,'        '],[0,'        this.registry = OpenLayers.Util.extend({'],[-1,'            \&quot;moveend\&quot;: this.getState'],[-1,'        }, this.registry);'],[-1,'        '],[0,'        var previousOptions = {'],[-1,'            trigger: OpenLayers.Function.bind(this.previousTrigger, this),'],[-1,'            displayClass: this.displayClass + \&quot; \&quot; + this.displayClass + \&quot;Previous\&quot;'],[-1,'        };'],[0,'        OpenLayers.Util.extend(previousOptions, this.previousOptions);'],[0,'        this.previous = new OpenLayers.Control.Button(previousOptions);'],[-1,'        '],[0,'        var nextOptions = {'],[-1,'            trigger: OpenLayers.Function.bind(this.nextTrigger, this),'],[-1,'            displayClass: this.displayClass + \&quot; \&quot; + this.displayClass + \&quot;Next\&quot;'],[-1,'        };'],[0,'        OpenLayers.Util.extend(nextOptions, this.nextOptions);'],[0,'        this.next = new OpenLayers.Control.Button(nextOptions);'],[-1,''],[0,'        this.clear();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onPreviousChange'],[-1,'     * Called when the previous history stack changes.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * state - {Object} An object representing the state to be restored'],[-1,'     *     if previous is triggered again or null if no previous states remain.'],[-1,'     * length - {Integer} The number of remaining previous states that can'],[-1,'     *     be restored.'],[-1,'     *\/'],[-1,'    onPreviousChange: function(state, length) {'],[0,'        if(state &amp;&amp; !this.previous.active) {'],[0,'            this.previous.activate();'],[0,'        } else if(!state &amp;&amp; this.previous.active) {'],[0,'            this.previous.deactivate();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onNextChange'],[-1,'     * Called when the next history stack changes.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * state - {Object} An object representing the state to be restored'],[-1,'     *     if next is triggered again or null if no next states remain.'],[-1,'     * length - {Integer} The number of remaining next states that can'],[-1,'     *     be restored.'],[-1,'     *\/'],[-1,'    onNextChange: function(state, length) {'],[0,'        if(state &amp;&amp; !this.next.active) {'],[0,'            this.next.activate();'],[0,'        } else if(!state &amp;&amp; this.next.active) {'],[0,'            this.next.deactivate();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Destroy the control.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        OpenLayers.Control.prototype.destroy.apply(this);'],[0,'        this.previous.destroy();'],[0,'        this.next.destroy();'],[0,'        this.deactivate();'],[0,'        for(var prop in this) {'],[0,'            this[prop] = null;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: setMap'],[-1,'     * Set the map property for the control and &lt;previous&gt; and &lt;next&gt; child'],[-1,'     *     controls.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} '],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        this.map = map;'],[0,'        this.next.setMap(map);'],[0,'        this.previous.setMap(map);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * Called when the control is added to the map.'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        OpenLayers.Control.prototype.draw.apply(this, arguments);'],[0,'        this.next.draw();'],[0,'        this.previous.draw();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: previousTrigger'],[-1,'     * Restore the previous state.  If no items are in the previous history'],[-1,'     *     stack, this has no effect.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Item representing state that was restored.  Undefined if no'],[-1,'     *     items are in the previous history stack.'],[-1,'     *\/'],[-1,'    previousTrigger: function() {'],[0,'        var current = this.previousStack.shift();'],[0,'        var state = this.previousStack.shift();'],[0,'        if(state != undefined) {'],[0,'            this.nextStack.unshift(current);'],[0,'            this.previousStack.unshift(state);'],[0,'            this.restoring = true;'],[0,'            this.restore(state);'],[0,'            this.restoring = false;'],[0,'            this.onNextChange(this.nextStack[0], this.nextStack.length);'],[0,'            this.onPreviousChange('],[-1,'                this.previousStack[1], this.previousStack.length - 1'],[-1,'            );'],[-1,'        } else {'],[0,'            this.previousStack.unshift(current);'],[-1,'        }'],[0,'        return state;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: nextTrigger'],[-1,'     * Restore the next state.  If no items are in the next history'],[-1,'     *     stack, this has no effect.  The next history stack is populated'],[-1,'     *     as states are restored from the previous history stack.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Item representing state that was restored.  Undefined if no'],[-1,'     *     items are in the next history stack.'],[-1,'     *\/'],[-1,'    nextTrigger: function() {'],[0,'        var state = this.nextStack.shift();'],[0,'        if(state != undefined) {'],[0,'            this.previousStack.unshift(state);'],[0,'            this.restoring = true;'],[0,'            this.restore(state);'],[0,'            this.restoring = false;'],[0,'            this.onNextChange(this.nextStack[0], this.nextStack.length);'],[0,'            this.onPreviousChange('],[-1,'                this.previousStack[1], this.previousStack.length - 1'],[-1,'            );'],[-1,'        }'],[0,'        return state;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clear'],[-1,'     * Clear history.'],[-1,'     *\/'],[-1,'    clear: function() {'],[0,'        this.previousStack = [];'],[0,'        this.previous.deactivate();'],[0,'        this.nextStack = [];'],[0,'        this.next.deactivate();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getState'],[-1,'     * Get the current state and return it.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object representing the current state.'],[-1,'     *\/'],[-1,'    getState: function() {'],[0,'        return {'],[-1,'            center: this.map.getCenter(),'],[-1,'            resolution: this.map.getResolution(),'],[-1,'            projection: this.map.getProjectionObject(),'],[-1,'            units: this.map.getProjectionObject().getUnits() || '],[-1,'                this.map.units || this.map.baseLayer.units'],[-1,'        };'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: restore'],[-1,'     * Update the state with the given object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * state - {Object} An object representing the state to restore.'],[-1,'     *\/'],[-1,'    restore: function(state) {'],[0,'        var center, zoom;'],[0,'        if (this.map.getProjectionObject() == state.projection) { '],[0,'            zoom = this.map.getZoomForResolution(state.resolution);'],[0,'            center = state.center;'],[-1,'        } else {'],[0,'            center = state.center.clone();'],[0,'            center.transform(state.projection, this.map.getProjectionObject());'],[0,'            var sourceUnits = state.units;'],[0,'            var targetUnits = this.map.getProjectionObject().getUnits() || '],[-1,'                this.map.units || this.map.baseLayer.units;'],[0,'            var resolutionFactor = sourceUnits &amp;&amp; targetUnits ? '],[-1,'                OpenLayers.INCHES_PER_UNIT[sourceUnits] \/ OpenLayers.INCHES_PER_UNIT[targetUnits] : 1;'],[0,'            zoom = this.map.getZoomForResolution(resolutionFactor*state.resolution); '],[-1,'        }'],[0,'        this.map.setCenter(center, zoom);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setListeners'],[-1,'     * Sets functions to be registered in the listeners object.'],[-1,'     *\/'],[-1,'    setListeners: function() {'],[0,'        this.listeners = {};'],[0,'        for(var type in this.registry) {'],[0,'            this.listeners[type] = OpenLayers.Function.bind(function() {'],[0,'                if(!this.restoring) {'],[0,'                    var state = this.registry[type].apply(this, arguments);'],[0,'                    this.previousStack.unshift(state);'],[0,'                    if(this.previousStack.length &gt; 1) {'],[0,'                        this.onPreviousChange('],[-1,'                            this.previousStack[1], this.previousStack.length - 1'],[-1,'                        );'],[-1,'                    }'],[0,'                    if(this.previousStack.length &gt; (this.limit + 1)) {'],[0,'                        this.previousStack.pop();'],[-1,'                    }'],[0,'                    if(this.nextStack.length &gt; 0) {'],[0,'                        this.nextStack = [];'],[0,'                        this.onNextChange(null, 0);'],[-1,'                    }'],[-1,'                }'],[0,'                return true;'],[-1,'            }, this);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Activate the control.  This registers any listeners.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Control successfully activated.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = false;'],[0,'        if(this.map) {'],[0,'            if(OpenLayers.Control.prototype.activate.apply(this)) {'],[0,'                if(this.listeners == null) {'],[0,'                    this.setListeners();'],[-1,'                }'],[0,'                for(var type in this.listeners) {'],[0,'                    this.map.events.register(type, this, this.listeners[type]);'],[-1,'                }'],[0,'                activated = true;'],[0,'                if(this.previousStack.length == 0) {'],[0,'                    this.initStack();'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: initStack'],[-1,'     * Called after the control is activated if the previous history stack is'],[-1,'     *     empty.'],[-1,'     *\/'],[-1,'    initStack: function() {'],[0,'        if(this.map.getCenter()) {'],[0,'            this.listeners.moveend();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the control.  This unregisters any listeners.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Control successfully deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = false;'],[0,'        if(this.map) {'],[0,'            if(OpenLayers.Control.prototype.deactivate.apply(this)) {'],[0,'                for(var type in this.listeners) {'],[0,'                    this.map.events.unregister('],[-1,'                        type, this, this.listeners[type]'],[-1,'                    );'],[-1,'                }'],[0,'                if(this.clearOnDeactivate) {'],[0,'                    this.clear();'],[-1,'                }'],[0,'                deactivated = true;'],[-1,'            }'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.NavigationHistory\&quot;'],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Protocol\/HTTP.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Protocol.js'],[-1,' * @requires OpenLayers\/Request\/XMLHttpRequest.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * if application uses the query string, for example, for BBOX parameters,'],[-1,' * OpenLayers\/Format\/QueryStringFilter.js should be included in the build config file'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Protocol.HTTP'],[-1,' * A basic HTTP protocol for vector layers.  Create a new instance with the'],[-1,' *     &lt;OpenLayers.Protocol.HTTP&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Protocol&gt;'],[-1,' *\/'],[1,'OpenLayers.Protocol.HTTP = OpenLayers.Class(OpenLayers.Protocol, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: url'],[-1,'     * {String} Service URL, read-only, set through the options'],[-1,'     *     passed to constructor.'],[-1,'     *\/'],[-1,'    url: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: headers'],[-1,'     * {Object} HTTP request headers, read-only, set through the options'],[-1,'     *     passed to the constructor,'],[-1,'     *     Example: {\'Content-Type\': \'plain\/text\'}'],[-1,'     *\/'],[-1,'    headers: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: params'],[-1,'     * {Object} Parameters of GET requests, read-only, set through the options'],[-1,'     *     passed to the constructor,'],[-1,'     *     Example: {\'bbox\': \'5,5,5,5\'}'],[-1,'     *\/'],[-1,'    params: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: callback'],[-1,'     * {Object} Function to be called when the &lt;read&gt;, &lt;create&gt;,'],[-1,'     *     &lt;update&gt;, &lt;delete&gt; or &lt;commit&gt; operation completes, read-only,'],[-1,'     *     set through the options passed to the constructor.'],[-1,'     *\/'],[-1,'    callback: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: scope'],[-1,'     * {Object} Callback execution scope, read-only, set through the'],[-1,'     *     options passed to the constructor.'],[-1,'     *\/'],[-1,'    scope: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: readWithPOST'],[-1,'     * {Boolean} true if read operations are done with POST requests'],[-1,'     *     instead of GET, defaults to false.'],[-1,'     *\/'],[-1,'    readWithPOST: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: updateWithPOST'],[-1,'     * {Boolean} true if update operations are done with POST requests'],[-1,'     *     defaults to false.'],[-1,'     *\/'],[-1,'    updateWithPOST: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: deleteWithPOST'],[-1,'     * {Boolean} true if delete operations are done with POST requests'],[-1,'     *     defaults to false.'],[-1,'     *     if true, POST data is set to output of format.write().'],[-1,'     *\/'],[-1,'    deleteWithPOST: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: wildcarded.'],[-1,'     * {Boolean} If true percent signs are added around values'],[-1,'     *     read from LIKE filters, for example if the protocol'],[-1,'     *     read method is passed a LIKE filter whose property'],[-1,'     *     is \&quot;foo\&quot; and whose value is \&quot;bar\&quot; the string'],[-1,'     *     \&quot;foo__ilike=%bar%\&quot; will be sent in the query string;'],[-1,'     *     defaults to false.'],[-1,'     *\/'],[-1,'    wildcarded: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: srsInBBOX'],[-1,'     * {Boolean} Include the SRS identifier in BBOX query string parameter.  '],[-1,'     *     Default is false.  If true and the layer has a projection object set,'],[-1,'     *     any BBOX filter will be serialized with a fifth item identifying the'],[-1,'     *     projection.  E.g. bbox=-1000,-1000,1000,1000,EPSG:900913'],[-1,'     *\/'],[-1,'    srsInBBOX: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Protocol.HTTP'],[-1,'     * A class for giving layers generic HTTP protocol.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *'],[-1,'     * Valid options include:'],[-1,'     * url - {String}'],[-1,'     * headers - {Object} '],[-1,'     * params - {Object} URL parameters for GET requests'],[-1,'     * format - {&lt;OpenLayers.Format&gt;}'],[-1,'     * callback - {Function}'],[-1,'     * scope - {Object}'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        options = options || {};'],[0,'        this.params = {};'],[0,'        this.headers = {};'],[0,'        OpenLayers.Protocol.prototype.initialize.apply(this, arguments);'],[-1,''],[0,'        if (!this.filterToParams &amp;&amp; OpenLayers.Format.QueryStringFilter) {'],[0,'            var format = new OpenLayers.Format.QueryStringFilter({'],[-1,'                wildcarded: this.wildcarded,'],[-1,'                srsInBBOX: this.srsInBBOX'],[-1,'            });'],[0,'            this.filterToParams = function(filter, params) {'],[0,'                return format.write(filter, params);'],[-1,'            };'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Clean up the protocol.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.params = null;'],[0,'        this.headers = null;'],[0,'        OpenLayers.Protocol.prototype.destroy.apply(this);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: filterToParams'],[-1,'     * Optional method to translate an &lt;OpenLayers.Filter&gt; object into an object'],[-1,'     *     that can be serialized as request query string provided.  If a custom'],[-1,'     *     method is not provided, the filter will be serialized using the '],[-1,'     *     &lt;OpenLayers.Format.QueryStringFilter&gt; class.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * filter - {&lt;OpenLayers.Filter&gt;} filter to convert.'],[-1,'     * params - {Object} The parameters object.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} The resulting parameters object.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Construct a request for reading new features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object for configuring the request.'],[-1,'     *     This object is modified and should not be reused.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * url - {String} Url for the request.'],[-1,'     * params - {Object} Parameters to get serialized as a query string.'],[-1,'     * headers - {Object} Headers to be set on the request.'],[-1,'     * filter - {&lt;OpenLayers.Filter&gt;} Filter to get serialized as a'],[-1,'     *     query string.'],[-1,'     * readWithPOST - {Boolean} If the request should be done with POST.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} A response object, whose \&quot;priv\&quot; property'],[-1,'     *     references the HTTP request, this object is also passed to the'],[-1,'     *     callback function when the request completes, its \&quot;features\&quot; property'],[-1,'     *     is then populated with the features received from the server.'],[-1,'     *\/'],[-1,'    read: function(options) {'],[0,'        OpenLayers.Protocol.prototype.read.apply(this, arguments);'],[0,'        options = options || {};'],[0,'        options.params = OpenLayers.Util.applyDefaults('],[-1,'            options.params, this.options.params);'],[0,'        options = OpenLayers.Util.applyDefaults(options, this.options);'],[0,'        if (options.filter &amp;&amp; this.filterToParams) {'],[0,'            options.params = this.filterToParams('],[-1,'                options.filter, options.params'],[-1,'            );'],[-1,'        }'],[0,'        var readWithPOST = (options.readWithPOST !== undefined) ?'],[-1,'                           options.readWithPOST : this.readWithPOST;'],[0,'        var resp = new OpenLayers.Protocol.Response({requestType: \&quot;read\&quot;});'],[0,'        if(readWithPOST) {'],[0,'            var headers = options.headers || {};'],[0,'            headers[\&quot;Content-Type\&quot;] = \&quot;application\/x-www-form-urlencoded\&quot;;'],[0,'            resp.priv = OpenLayers.Request.POST({'],[-1,'                url: options.url,'],[-1,'                callback: this.createCallback(this.handleRead, resp, options),'],[-1,'                data: OpenLayers.Util.getParameterString(options.params),'],[-1,'                headers: headers'],[-1,'            });'],[-1,'        } else {'],[0,'            resp.priv = OpenLayers.Request.GET({'],[-1,'                url: options.url,'],[-1,'                callback: this.createCallback(this.handleRead, resp, options),'],[-1,'                params: options.params,'],[-1,'                headers: options.headers'],[-1,'            });'],[-1,'        }'],[0,'        return resp;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleRead'],[-1,'     * Individual callbacks are created for read, create and update, should'],[-1,'     *     a subclass need to override each one separately.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * resp - {&lt;OpenLayers.Protocol.Response&gt;} The response object to pass to'],[-1,'     *     the user callback.'],[-1,'     * options - {Object} The user options passed to the read call.'],[-1,'     *\/'],[-1,'    handleRead: function(resp, options) {'],[0,'        this.handleResponse(resp, options);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: create'],[-1,'     * Construct a request for writing newly created features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array({&lt;OpenLayers.Feature.Vector&gt;})} or'],[-1,'     *     {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     * options - {Object} Optional object for configuring the request.'],[-1,'     *     This object is modified and should not be reused.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} An &lt;OpenLayers.Protocol.Response&gt;'],[-1,'     *     object, whose \&quot;priv\&quot; property references the HTTP request, this '],[-1,'     *     object is also passed to the callback function when the request'],[-1,'     *     completes, its \&quot;features\&quot; property is then populated with the'],[-1,'     *     the features received from the server.'],[-1,'     *\/'],[-1,'    create: function(features, options) {'],[0,'        options = OpenLayers.Util.applyDefaults(options, this.options);'],[-1,''],[0,'        var resp = new OpenLayers.Protocol.Response({'],[-1,'            reqFeatures: features,'],[-1,'            requestType: \&quot;create\&quot;'],[-1,'        });'],[-1,''],[0,'        resp.priv = OpenLayers.Request.POST({'],[-1,'            url: options.url,'],[-1,'            callback: this.createCallback(this.handleCreate, resp, options),'],[-1,'            headers: options.headers,'],[-1,'            data: this.format.write(features)'],[-1,'        });'],[-1,''],[0,'        return resp;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleCreate'],[-1,'     * Called the the request issued by &lt;create&gt; is complete.  May be overridden'],[-1,'     *     by subclasses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * resp - {&lt;OpenLayers.Protocol.Response&gt;} The response object to pass to'],[-1,'     *     any user callback.'],[-1,'     * options - {Object} The user options passed to the create call.'],[-1,'     *\/'],[-1,'    handleCreate: function(resp, options) {'],[0,'        this.handleResponse(resp, options);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: update'],[-1,'     * Construct a request updating modified feature.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     * options - {Object} Optional object for configuring the request.'],[-1,'     *     This object is modified and should not be reused.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} An &lt;OpenLayers.Protocol.Response&gt;'],[-1,'     *     object, whose \&quot;priv\&quot; property references the HTTP request, this '],[-1,'     *     object is also passed to the callback function when the request'],[-1,'     *     completes, its \&quot;features\&quot; property is then populated with the'],[-1,'     *     the feature received from the server.'],[-1,'     *\/'],[-1,'    update: function(feature, options) {'],[0,'        options = options || {};'],[0,'        var url = options.url ||'],[-1,'                  feature.url ||'],[-1,'                  this.options.url + \&quot;\/\&quot; + feature.fid;'],[0,'        options = OpenLayers.Util.applyDefaults(options, this.options);'],[-1,''],[0,'        var resp = new OpenLayers.Protocol.Response({'],[-1,'            reqFeatures: feature,'],[-1,'            requestType: \&quot;update\&quot;'],[-1,'        });'],[-1,''],[0,'        var method = this.updateWithPOST ? \&quot;POST\&quot; : \&quot;PUT\&quot;;'],[0,'        resp.priv = OpenLayers.Request[method]({'],[-1,'            url: url,'],[-1,'            callback: this.createCallback(this.handleUpdate, resp, options),'],[-1,'            headers: options.headers,'],[-1,'            data: this.format.write(feature)'],[-1,'        });'],[-1,''],[0,'        return resp;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleUpdate'],[-1,'     * Called the the request issued by &lt;update&gt; is complete.  May be overridden'],[-1,'     *     by subclasses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * resp - {&lt;OpenLayers.Protocol.Response&gt;} The response object to pass to'],[-1,'     *     any user callback.'],[-1,'     * options - {Object} The user options passed to the update call.'],[-1,'     *\/'],[-1,'    handleUpdate: function(resp, options) {'],[0,'        this.handleResponse(resp, options);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: delete'],[-1,'     * Construct a request deleting a removed feature.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     * options - {Object} Optional object for configuring the request.'],[-1,'     *     This object is modified and should not be reused.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} An &lt;OpenLayers.Protocol.Response&gt;'],[-1,'     *     object, whose \&quot;priv\&quot; property references the HTTP request, this '],[-1,'     *     object is also passed to the callback function when the request'],[-1,'     *     completes.'],[-1,'     *\/'],[-1,'    \&quot;delete\&quot;: function(feature, options) {'],[0,'        options = options || {};'],[0,'        var url = options.url ||'],[-1,'                  feature.url ||'],[-1,'                  this.options.url + \&quot;\/\&quot; + feature.fid;'],[0,'        options = OpenLayers.Util.applyDefaults(options, this.options);'],[-1,''],[0,'        var resp = new OpenLayers.Protocol.Response({'],[-1,'            reqFeatures: feature,'],[-1,'            requestType: \&quot;delete\&quot;'],[-1,'        });'],[-1,''],[0,'        var method = this.deleteWithPOST ? \&quot;POST\&quot; : \&quot;DELETE\&quot;;'],[0,'        var requestOptions = {'],[-1,'            url: url,'],[-1,'            callback: this.createCallback(this.handleDelete, resp, options),'],[-1,'            headers: options.headers'],[-1,'        };'],[0,'        if (this.deleteWithPOST) {'],[0,'            requestOptions.data = this.format.write(feature);'],[-1,'        }'],[0,'        resp.priv = OpenLayers.Request[method](requestOptions);'],[-1,''],[0,'        return resp;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleDelete'],[-1,'     * Called the the request issued by &lt;delete&gt; is complete.  May be overridden'],[-1,'     *     by subclasses.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * resp - {&lt;OpenLayers.Protocol.Response&gt;} The response object to pass to'],[-1,'     *     any user callback.'],[-1,'     * options - {Object} The user options passed to the delete call.'],[-1,'     *\/'],[-1,'    handleDelete: function(resp, options) {'],[0,'        this.handleResponse(resp, options);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleResponse'],[-1,'     * Called by CRUD specific handlers.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * resp - {&lt;OpenLayers.Protocol.Response&gt;} The response object to pass to'],[-1,'     *     any user callback.'],[-1,'     * options - {Object} The user options passed to the create, read, update,'],[-1,'     *     or delete call.'],[-1,'     *\/'],[-1,'    handleResponse: function(resp, options) {'],[0,'        var request = resp.priv;'],[0,'        if(options.callback) {'],[0,'            if(request.status &gt;= 200 &amp;&amp; request.status &lt; 300) {'],[-1,'                \/\/ success'],[0,'                if(resp.requestType != \&quot;delete\&quot;) {'],[0,'                    resp.features = this.parseFeatures(request);'],[-1,'                }'],[0,'                resp.code = OpenLayers.Protocol.Response.SUCCESS;'],[-1,'            } else {'],[-1,'                \/\/ failure'],[0,'                resp.code = OpenLayers.Protocol.Response.FAILURE;'],[-1,'            }'],[0,'            options.callback.call(options.scope, resp);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseFeatures'],[-1,'     * Read HTTP response body and return features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * request - {XMLHttpRequest} The request object'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array({&lt;OpenLayers.Feature.Vector&gt;})} or'],[-1,'     *     {&lt;OpenLayers.Feature.Vector&gt;} Array of features or a single feature.'],[-1,'     *\/'],[-1,'    parseFeatures: function(request) {'],[0,'        var doc = request.responseXML;'],[0,'        if (!doc || !doc.documentElement) {'],[0,'            doc = request.responseText;'],[-1,'        }'],[0,'        if (!doc || doc.length &lt;= 0) {'],[0,'            return null;'],[-1,'        }'],[0,'        return this.format.read(doc);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: commit'],[-1,'     * Iterate over each feature and take action based on the feature state.'],[-1,'     *     Possible actions are create, update and delete.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array({&lt;OpenLayers.Feature.Vector&gt;})}'],[-1,'     * options - {Object} Optional object for setting up intermediate commit'],[-1,'     *     callbacks.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * create - {Object} Optional object to be passed to the &lt;create&gt; method.'],[-1,'     * update - {Object} Optional object to be passed to the &lt;update&gt; method.'],[-1,'     * delete - {Object} Optional object to be passed to the &lt;delete&gt; method.'],[-1,'     * callback - {Function} Optional function to be called when the commit'],[-1,'     *     is complete.'],[-1,'     * scope - {Object} Optional object to be set as the scope of the callback.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Protocol.Response&gt;)} An array of response objects,'],[-1,'     *     one per request made to the server, each object\'s \&quot;priv\&quot; property'],[-1,'     *     references the corresponding HTTP request.'],[-1,'     *\/'],[-1,'    commit: function(features, options) {'],[0,'        options = OpenLayers.Util.applyDefaults(options, this.options);'],[0,'        var resp = [], nResponses = 0;'],[-1,'        '],[-1,'        \/\/ Divide up features before issuing any requests.  This properly'],[-1,'        \/\/ counts requests in the event that any responses come in before'],[-1,'        \/\/ all requests have been issued.'],[0,'        var types = {};'],[0,'        types[OpenLayers.State.INSERT] = [];'],[0,'        types[OpenLayers.State.UPDATE] = [];'],[0,'        types[OpenLayers.State.DELETE] = [];'],[0,'        var feature, list, requestFeatures = [];'],[0,'        for(var i=0, len=features.length; i&lt;len; ++i) {'],[0,'            feature = features[i];'],[0,'            list = types[feature.state];'],[0,'            if(list) {'],[0,'                list.push(feature);'],[0,'                requestFeatures.push(feature); '],[-1,'            }'],[-1,'        }'],[-1,'        \/\/ tally up number of requests'],[0,'        var nRequests = (types[OpenLayers.State.INSERT].length &gt; 0 ? 1 : 0) +'],[-1,'            types[OpenLayers.State.UPDATE].length +'],[-1,'            types[OpenLayers.State.DELETE].length;'],[-1,'        '],[-1,'        \/\/ This response will be sent to the final callback after all the others'],[-1,'        \/\/ have been fired.'],[0,'        var success = true;'],[0,'        var finalResponse = new OpenLayers.Protocol.Response({'],[-1,'            reqFeatures: requestFeatures        '],[-1,'        });'],[-1,'        '],[0,'        function insertCallback(response) {'],[0,'            var len = response.features ? response.features.length : 0;'],[0,'            var fids = new Array(len);'],[0,'            for(var i=0; i&lt;len; ++i) {'],[0,'                fids[i] = response.features[i].fid;'],[-1,'            }   '],[0,'            finalResponse.insertIds = fids;'],[0,'            callback.apply(this, [response]);'],[-1,'        }'],[-1,' '],[0,'        function callback(response) {'],[0,'            this.callUserCallback(response, options);'],[0,'            success = success &amp;&amp; response.success();'],[0,'            nResponses++;'],[0,'            if (nResponses &gt;= nRequests) {'],[0,'                if (options.callback) {'],[0,'                    finalResponse.code = success ? '],[-1,'                        OpenLayers.Protocol.Response.SUCCESS :'],[-1,'                        OpenLayers.Protocol.Response.FAILURE;'],[0,'                    options.callback.apply(options.scope, [finalResponse]);'],[-1,'                }    '],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ start issuing requests'],[0,'        var queue = types[OpenLayers.State.INSERT];'],[0,'        if(queue.length &gt; 0) {'],[0,'            resp.push(this.create('],[-1,'                queue, OpenLayers.Util.applyDefaults('],[-1,'                    {callback: insertCallback, scope: this}, options.create'],[-1,'                )'],[-1,'            ));'],[-1,'        }'],[0,'        queue = types[OpenLayers.State.UPDATE];'],[0,'        for(var i=queue.length-1; i&gt;=0; --i) {'],[0,'            resp.push(this.update('],[-1,'                queue[i], OpenLayers.Util.applyDefaults('],[-1,'                    {callback: callback, scope: this}, options.update'],[-1,'                ))'],[-1,'            );'],[-1,'        }'],[0,'        queue = types[OpenLayers.State.DELETE];'],[0,'        for(var i=queue.length-1; i&gt;=0; --i) {'],[0,'            resp.push(this[\&quot;delete\&quot;]('],[-1,'                queue[i], OpenLayers.Util.applyDefaults('],[-1,'                    {callback: callback, scope: this}, options[\&quot;delete\&quot;]'],[-1,'                ))'],[-1,'            );'],[-1,'        }'],[0,'        return resp;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: abort'],[-1,'     * Abort an ongoing request, the response object passed to'],[-1,'     * this method must come from this HTTP protocol (as a result'],[-1,'     * of a create, read, update, delete or commit operation).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * response - {&lt;OpenLayers.Protocol.Response&gt;}'],[-1,'     *\/'],[-1,'    abort: function(response) {'],[0,'        if (response) {'],[0,'            response.priv.abort();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: callUserCallback'],[-1,'     * This method is used from within the commit method each time an'],[-1,'     *     an HTTP response is received from the server, it is responsible'],[-1,'     *     for calling the user-supplied callbacks.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * resp - {&lt;OpenLayers.Protocol.Response&gt;}'],[-1,'     * options - {Object} The map of options passed to the commit call.'],[-1,'     *\/'],[-1,'    callUserCallback: function(resp, options) {'],[0,'        var opt = options[resp.requestType];'],[0,'        if(opt &amp;&amp; opt.callback) {'],[0,'            opt.callback.call(opt.scope, resp);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Protocol.HTTP\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Strategy\/Cluster.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Strategy.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Strategy.Cluster'],[-1,' * Strategy for vector feature clustering.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Strategy&gt;'],[-1,' *\/'],[1,'OpenLayers.Strategy.Cluster = OpenLayers.Class(OpenLayers.Strategy, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: distance'],[-1,'     * {Integer} Pixel distance between features that should be considered a'],[-1,'     *     single cluster.  Default is 20 pixels.'],[-1,'     *\/'],[-1,'    distance: 20,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: threshold'],[-1,'     * {Integer} Optional threshold below which original features will be'],[-1,'     *     added to the layer instead of clusters.  For example, a threshold'],[-1,'     *     of 3 would mean that any time there are 2 or fewer features in'],[-1,'     *     a cluster, those features will be added directly to the layer instead'],[-1,'     *     of a cluster representing those features.  Default is null (which is'],[-1,'     *     equivalent to 1 - meaning that clusters may contain just one feature).'],[-1,'     *\/'],[-1,'    threshold: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: features'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} Cached features.'],[-1,'     *\/'],[-1,'    features: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: clusters'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} Calculated clusters.'],[-1,'     *\/'],[-1,'    clusters: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: clustering'],[-1,'     * {Boolean} The strategy is currently clustering features.'],[-1,'     *\/'],[-1,'    clustering: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: resolution'],[-1,'     * {Float} The resolution (map units per pixel) of the current cluster set.'],[-1,'     *\/'],[-1,'    resolution: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Strategy.Cluster'],[-1,'     * Create a new clustering strategy.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Activate the strategy.  Register any listeners, do appropriate setup.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The strategy was successfully activated.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = OpenLayers.Strategy.prototype.activate.call(this);'],[0,'        if(activated) {'],[0,'            this.layer.events.on({'],[-1,'                \&quot;beforefeaturesadded\&quot;: this.cacheFeatures,'],[-1,'                \&quot;featuresremoved\&quot;: this.clearCache,'],[-1,'                \&quot;moveend\&quot;: this.cluster,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the strategy.  Unregister any listeners, do appropriate'],[-1,'     *     tear-down.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} The strategy was successfully deactivated.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = OpenLayers.Strategy.prototype.deactivate.call(this);'],[0,'        if(deactivated) {'],[0,'            this.clearCache();'],[0,'            this.layer.events.un({'],[-1,'                \&quot;beforefeaturesadded\&quot;: this.cacheFeatures,'],[-1,'                \&quot;featuresremoved\&quot;: this.clearCache,'],[-1,'                \&quot;moveend\&quot;: this.cluster,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: cacheFeatures'],[-1,'     * Cache features before they are added to the layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Object} The event that this was listening for.  This will come'],[-1,'     *     with a batch of features to be clustered.'],[-1,'     *     '],[-1,'     * Returns:'],[-1,'     * {Boolean} False to stop features from being added to the layer.'],[-1,'     *\/'],[-1,'    cacheFeatures: function(event) {'],[0,'        var propagate = true;'],[0,'        if(!this.clustering) {'],[0,'            this.clearCache();'],[0,'            this.features = event.features;'],[0,'            this.cluster();'],[0,'            propagate = false;'],[-1,'        }'],[0,'        return propagate;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: clearCache'],[-1,'     * Clear out the cached features.'],[-1,'     *\/'],[-1,'    clearCache: function() {'],[0,'        if(!this.clustering) {'],[0,'            this.features = null;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: cluster'],[-1,'     * Cluster features based on some threshold distance.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Object} The event received when cluster is called as a'],[-1,'     *     result of a moveend event.'],[-1,'     *\/'],[-1,'    cluster: function(event) {'],[0,'        if((!event || event.zoomChanged) &amp;&amp; this.features) {'],[0,'            var resolution = this.layer.map.getResolution();'],[0,'            if(resolution != this.resolution || !this.clustersExist()) {'],[0,'                this.resolution = resolution;'],[0,'                var clusters = [];'],[0,'                var feature, clustered, cluster;'],[0,'                for(var i=0; i&lt;this.features.length; ++i) {'],[0,'                    feature = this.features[i];'],[0,'                    if(feature.geometry) {'],[0,'                        clustered = false;'],[0,'                        for(var j=clusters.length-1; j&gt;=0; --j) {'],[0,'                            cluster = clusters[j];'],[0,'                            if(this.shouldCluster(cluster, feature)) {'],[0,'                                this.addToCluster(cluster, feature);'],[0,'                                clustered = true;'],[0,'                                break;'],[-1,'                            }'],[-1,'                        }'],[0,'                        if(!clustered) {'],[0,'                            clusters.push(this.createCluster(this.features[i]));'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[0,'                this.clustering = true;'],[0,'                this.layer.removeAllFeatures();'],[0,'                this.clustering = false;'],[0,'                if(clusters.length &gt; 0) {'],[0,'                    if(this.threshold &gt; 1) {'],[0,'                        var clone = clusters.slice();'],[0,'                        clusters = [];'],[0,'                        var candidate;'],[0,'                        for(var i=0, len=clone.length; i&lt;len; ++i) {'],[0,'                            candidate = clone[i];'],[0,'                            if(candidate.attributes.count &lt; this.threshold) {'],[0,'                                Array.prototype.push.apply(clusters, candidate.cluster);'],[-1,'                            } else {'],[0,'                                clusters.push(candidate);'],[-1,'                            }'],[-1,'                        }'],[-1,'                    }'],[0,'                    this.clustering = true;'],[-1,'                    \/\/ A legitimate feature addition could occur during this'],[-1,'                    \/\/ addFeatures call.  For clustering to behave well, features'],[-1,'                    \/\/ should be removed from a layer before requesting a new batch.'],[0,'                    this.layer.addFeatures(clusters);'],[0,'                    this.clustering = false;'],[-1,'                }'],[0,'                this.clusters = clusters;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: clustersExist'],[-1,'     * Determine whether calculated clusters are already on the layer.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The calculated clusters are already on the layer.'],[-1,'     *\/'],[-1,'    clustersExist: function() {'],[0,'        var exist = false;'],[0,'        if(this.clusters &amp;&amp; this.clusters.length &gt; 0 &amp;&amp;'],[-1,'           this.clusters.length == this.layer.features.length) {'],[0,'            exist = true;'],[0,'            for(var i=0; i&lt;this.clusters.length; ++i) {'],[0,'                if(this.clusters[i] != this.layer.features[i]) {'],[0,'                    exist = false;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return exist;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: shouldCluster'],[-1,'     * Determine whether to include a feature in a given cluster.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * cluster - {&lt;OpenLayers.Feature.Vector&gt;} A cluster.'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} A feature.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The feature should be included in the cluster.'],[-1,'     *\/'],[-1,'    shouldCluster: function(cluster, feature) {'],[0,'        var cc = cluster.geometry.getBounds().getCenterLonLat();'],[0,'        var fc = feature.geometry.getBounds().getCenterLonLat();'],[0,'        var distance = ('],[-1,'            Math.sqrt('],[-1,'                Math.pow((cc.lon - fc.lon), 2) + Math.pow((cc.lat - fc.lat), 2)'],[-1,'            ) \/ this.resolution'],[-1,'        );'],[0,'        return (distance &lt;= this.distance);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addToCluster'],[-1,'     * Add a feature to a cluster.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * cluster - {&lt;OpenLayers.Feature.Vector&gt;} A cluster.'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} A feature.'],[-1,'     *\/'],[-1,'    addToCluster: function(cluster, feature) {'],[0,'        cluster.cluster.push(feature);'],[0,'        cluster.attributes.count += 1;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createCluster'],[-1,'     * Given a feature, create a cluster.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} A cluster.'],[-1,'     *\/'],[-1,'    createCluster: function(feature) {'],[0,'        var center = feature.geometry.getBounds().getCenterLonLat();'],[0,'        var cluster = new OpenLayers.Feature.Vector('],[-1,'            new OpenLayers.Geometry.Point(center.lon, center.lat),'],[-1,'            {count: 1}'],[-1,'        );'],[0,'        cluster.cluster = [feature];'],[0,'        return cluster;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Strategy.Cluster\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Strategy\/Filter.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Strategy.js'],[-1,' * @requires OpenLayers\/Filter.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Strategy.Filter'],[-1,' * Strategy for limiting features that get added to a layer by '],[-1,' *     evaluating a filter.  The strategy maintains a cache of'],[-1,' *     all features until removeFeatures is called on the layer.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Strategy&gt;'],[-1,' *\/'],[1,'OpenLayers.Strategy.Filter = OpenLayers.Class(OpenLayers.Strategy, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: filter'],[-1,'     * {&lt;OpenLayers.Filter&gt;}  Filter for limiting features sent to the layer.'],[-1,'     *     Use the &lt;setFilter&gt; method to update this filter after construction.'],[-1,'     *\/'],[-1,'    filter: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: cache'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} List of currently cached'],[-1,'     *     features.'],[-1,'     *\/'],[-1,'    cache: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: caching'],[-1,'     * {Boolean} The filter is currently caching features.'],[-1,'     *\/'],[-1,'    caching: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Strategy.Filter'],[-1,'     * Create a new filter strategy.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Activate the strategy.  Register any listeners, do appropriate setup.'],[-1,'     *     By default, this strategy automatically activates itself when a layer'],[-1,'     *     is added to a map.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} True if the strategy was successfully activated or false if'],[-1,'     *      the strategy was already active.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = OpenLayers.Strategy.prototype.activate.apply(this, arguments);'],[0,'        if (activated) {'],[0,'            this.cache = [];'],[0,'            this.layer.events.on({'],[-1,'                \&quot;beforefeaturesadded\&quot;: this.handleAdd,'],[-1,'                \&quot;beforefeaturesremoved\&quot;: this.handleRemove,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the strategy.  Clear the feature cache.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} True if the strategy was successfully deactivated or false if'],[-1,'     *      the strategy was already inactive.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        this.cache = null;'],[0,'        if (this.layer &amp;&amp; this.layer.events) {'],[0,'            this.layer.events.un({'],[-1,'                \&quot;beforefeaturesadded\&quot;: this.handleAdd,'],[-1,'                \&quot;beforefeaturesremoved\&quot;: this.handleRemove,'],[-1,'                scope: this'],[-1,'            });            '],[-1,'        }'],[0,'        return OpenLayers.Strategy.prototype.deactivate.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: handleAdd'],[-1,'     *\/'],[-1,'    handleAdd: function(event) {'],[0,'        if (!this.caching &amp;&amp; this.filter) {'],[0,'            var features = event.features;'],[0,'            event.features = [];'],[0,'            var feature;'],[0,'            for (var i=0, ii=features.length; i&lt;ii; ++i) {'],[0,'                feature = features[i];'],[0,'                if (this.filter.evaluate(feature)) {'],[0,'                    event.features.push(feature);'],[-1,'                } else {'],[0,'                    this.cache.push(feature);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: handleRemove'],[-1,'     *\/'],[-1,'    handleRemove: function(event) {'],[0,'        if (!this.caching) {'],[0,'            this.cache = [];'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: setFilter'],[-1,'     * Update the filter for this strategy.  This will re-evaluate'],[-1,'     *     any features on the layer and in the cache.  Only features'],[-1,'     *     for which filter.evalute(feature) returns true will be'],[-1,'     *     added to the layer.  Others will be cached by the strategy.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * filter - {&lt;OpenLayers.Filter&gt;} A filter for evaluating features.'],[-1,'     *\/'],[-1,'    setFilter: function(filter) {'],[0,'        this.filter = filter;'],[0,'        var previousCache = this.cache;'],[0,'        this.cache = [];'],[-1,'        \/\/ look through layer for features to remove from layer'],[0,'        this.handleAdd({features: this.layer.features});'],[-1,'        \/\/ cache now contains features to remove from layer'],[0,'        if (this.cache.length &gt; 0) {'],[0,'            this.caching = true;'],[0,'            this.layer.removeFeatures(this.cache.slice());'],[0,'            this.caching = false;'],[-1,'        }'],[-1,'        \/\/ now look through previous cache for features to add to layer'],[0,'        if (previousCache.length &gt; 0) {'],[0,'            var event = {features: previousCache};'],[0,'            this.handleAdd(event);'],[0,'            if (event.features.length &gt; 0) {'],[-1,'                \/\/ event has features to add to layer'],[0,'                this.caching = true;'],[0,'                this.layer.addFeatures(event.features);'],[0,'                this.caching = false;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Strategy.Filter\&quot;'],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Protocol\/SOS.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Protocol.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Function: OpenLayers.Protocol.SOS'],[-1,' * Used to create a versioned SOS protocol.  Default version is 1.0.0.'],[-1,' *'],[-1,' * Returns:'],[-1,' * {&lt;OpenLayers.Protocol&gt;} An SOS protocol for the given version.'],[-1,' *\/'],[1,'OpenLayers.Protocol.SOS = function(options) {'],[0,'    options = OpenLayers.Util.applyDefaults('],[-1,'        options, OpenLayers.Protocol.SOS.DEFAULTS'],[-1,'    );'],[0,'    var cls = OpenLayers.Protocol.SOS[\&quot;v\&quot;+options.version.replace(\/\\.\/g, \&quot;_\&quot;)];'],[0,'    if(!cls) {'],[0,'        throw \&quot;Unsupported SOS version: \&quot; + options.version;'],[-1,'    }'],[0,'    return new cls(options);'],[-1,'};'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Protocol.SOS.DEFAULTS'],[-1,' *\/'],[1,'OpenLayers.Protocol.SOS.DEFAULTS = {'],[-1,'    \&quot;version\&quot;: \&quot;1.0.0\&quot;'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/GeoRSS.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' * @requires OpenLayers\/Geometry\/LineString.js'],[-1,' * @requires OpenLayers\/Geometry\/Polygon.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.GeoRSS'],[-1,' * Read\/write GeoRSS parser. Create a new instance with the '],[-1,' *     &lt;OpenLayers.Format.GeoRSS&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.GeoRSS = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: rssns'],[-1,'     * {String} RSS namespace to use. Defaults to'],[-1,'     *   \&quot;http:\/\/backend.userland.com\/rss2\&quot;'],[-1,'     *\/'],[-1,'    rssns: \&quot;http:\/\/backend.userland.com\/rss2\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: featurens'],[-1,'     * {String} Feature Attributes namespace.  Defaults to'],[-1,'     *    \&quot;http:\/\/mapserver.gis.umn.edu\/mapserver\&quot;'],[-1,'     *\/'],[-1,'    featureNS: \&quot;http:\/\/mapserver.gis.umn.edu\/mapserver\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: georssns'],[-1,'     * {String} GeoRSS namespace to use.  Defaults to'],[-1,'     *     \&quot;http:\/\/www.georss.org\/georss\&quot;'],[-1,'     *\/'],[-1,'    georssns: \&quot;http:\/\/www.georss.org\/georss\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: geons'],[-1,'     * {String} W3C Geo namespace to use.  Defaults to'],[-1,'     *     \&quot;http:\/\/www.w3.org\/2003\/01\/geo\/wgs84_pos#\&quot;'],[-1,'     *\/'],[-1,'    geons: \&quot;http:\/\/www.w3.org\/2003\/01\/geo\/wgs84_pos#\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: featureTitle'],[-1,'     * {String} Default title for features.  Defaults to \&quot;Untitled\&quot;'],[-1,'     *\/'],[-1,'    featureTitle: \&quot;Untitled\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: featureDescription'],[-1,'     * {String} Default description for features.  Defaults to \&quot;No Description\&quot;'],[-1,'     *\/'],[-1,'    featureDescription: \&quot;No Description\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: gmlParse'],[-1,'     * {Object} GML Format object for parsing features'],[-1,'     * Non-API and only created if necessary'],[-1,'     *\/'],[-1,'    gmlParser: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: xy'],[-1,'     * {Boolean} Order of the GML coordinate: true:(x,y) or false:(y,x)'],[-1,'     * For GeoRSS the default is (y,x), therefore: false'],[-1,'     *\/ '],[-1,'    xy: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.GeoRSS'],[-1,'     * Create a new parser for GeoRSS.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createGeometryFromItem'],[-1,'     * Return a geometry from a GeoRSS Item.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * item - {DOMElement} A GeoRSS item node.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Geometry&gt;} A geometry representing the node.'],[-1,'     *\/'],[-1,'    createGeometryFromItem: function(item) {'],[0,'        var point = this.getElementsByTagNameNS(item, this.georssns, \&quot;point\&quot;);'],[0,'        var lat = this.getElementsByTagNameNS(item, this.geons, \'lat\');'],[0,'        var lon = this.getElementsByTagNameNS(item, this.geons, \'long\');'],[-1,'        '],[0,'        var line = this.getElementsByTagNameNS(item,'],[-1,'                                                this.georssns,'],[-1,'                                                \&quot;line\&quot;);'],[0,'        var polygon = this.getElementsByTagNameNS(item,'],[-1,'                                                this.georssns,'],[-1,'                                                \&quot;polygon\&quot;);'],[0,'        var where = this.getElementsByTagNameNS(item, '],[-1,'                                                this.georssns, '],[-1,'                                                \&quot;where\&quot;);'],[0,'        var box = this.getElementsByTagNameNS(item, '],[-1,'                                              this.georssns, '],[-1,'                                              \&quot;box\&quot;);'],[-1,''],[0,'        if (point.length &gt; 0 || (lat.length &gt; 0 &amp;&amp; lon.length &gt; 0)) {'],[0,'            var location;'],[0,'            if (point.length &gt; 0) {'],[0,'                location = OpenLayers.String.trim('],[-1,'                                point[0].firstChild.nodeValue).split(\/\\s+\/);'],[0,'                if (location.length !=2) {'],[0,'                    location = OpenLayers.String.trim('],[-1,'                                point[0].firstChild.nodeValue).split(\/\\s*,\\s*\/);'],[-1,'                }'],[-1,'            } else {'],[0,'                location = [parseFloat(lat[0].firstChild.nodeValue),'],[-1,'                                parseFloat(lon[0].firstChild.nodeValue)];'],[-1,'            }    '],[-1,''],[0,'            var geometry = new OpenLayers.Geometry.Point(location[1], location[0]);'],[-1,'              '],[0,'        } else if (line.length &gt; 0) {'],[0,'            var coords = OpenLayers.String.trim(this.getChildValue(line[0])).split(\/\\s+\/);'],[0,'            var components = []; '],[0,'            var point;'],[0,'            for (var i=0, len=coords.length; i&lt;len; i+=2) {'],[0,'                point = new OpenLayers.Geometry.Point(coords[i+1], coords[i]);'],[0,'                components.push(point);'],[-1,'            }'],[0,'            geometry = new OpenLayers.Geometry.LineString(components);'],[0,'        } else if (polygon.length &gt; 0) { '],[0,'            var coords = OpenLayers.String.trim(this.getChildValue(polygon[0])).split(\/\\s+\/);'],[0,'            var components = []; '],[0,'            var point;'],[0,'            for (var i=0, len=coords.length; i&lt;len; i+=2) {'],[0,'                point = new OpenLayers.Geometry.Point(coords[i+1], coords[i]);'],[0,'                components.push(point);'],[-1,'            }'],[0,'            geometry = new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(components)]);'],[0,'        } else if (where.length &gt; 0) { '],[0,'            if (!this.gmlParser) {'],[0,'              this.gmlParser = new OpenLayers.Format.GML({\'xy\': this.xy});'],[-1,'            }'],[0,'            var feature = this.gmlParser.parseFeature(where[0]);'],[0,'            geometry = feature.geometry;'],[0,'        } else if (box.length  &gt; 0) {'],[0,'            var coords = OpenLayers.String.trim(box[0].firstChild.nodeValue).split(\/\\s+\/);'],[0,'            var components = [];'],[0,'            var point;'],[0,'            if (coords.length &gt; 3) {'],[0,'                point = new OpenLayers.Geometry.Point(coords[1], coords[0]);'],[0,'                components.push(point);'],[0,'                point = new OpenLayers.Geometry.Point(coords[1], coords[2]);'],[0,'                components.push(point);'],[0,'                point = new OpenLayers.Geometry.Point(coords[3], coords[2]);'],[0,'                components.push(point);'],[0,'                point = new OpenLayers.Geometry.Point(coords[3], coords[0]);'],[0,'                components.push(point);'],[0,'                point = new OpenLayers.Geometry.Point(coords[1], coords[0]);'],[0,'                components.push(point);'],[-1,'            }'],[0,'            geometry = new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing(components)]);'],[-1,'        }'],[-1,'        '],[0,'        if (geometry &amp;&amp; this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'            geometry.transform(this.externalProjection, '],[-1,'                               this.internalProjection);'],[-1,'        }'],[-1,''],[0,'        return geometry;'],[-1,'    },        '],[-1,''],[-1,'    \/**'],[-1,'     * Method: createFeatureFromItem'],[-1,'     * Return a feature from a GeoRSS Item.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * item - {DOMElement} A GeoRSS item node.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} A feature representing the item.'],[-1,'     *\/'],[-1,'    createFeatureFromItem: function(item) {'],[0,'        var geometry = this.createGeometryFromItem(item);'],[-1,'     '],[-1,'        \/* Provide defaults for title and description *\/'],[0,'        var title = this._getChildValue(item, \&quot;*\&quot;, \&quot;title\&quot;, this.featureTitle);'],[-1,'       '],[-1,'        \/* First try RSS descriptions, then Atom summaries *\/'],[0,'        var description = this._getChildValue('],[-1,'            item, \&quot;*\&quot;, \&quot;description\&quot;,'],[-1,'            this._getChildValue(item, \&quot;*\&quot;, \&quot;content\&quot;,'],[-1,'                this._getChildValue(item, \&quot;*\&quot;, \&quot;summary\&quot;, this.featureDescription)));'],[-1,''],[-1,'        \/* If no link URL is found in the first child node, try the'],[-1,'           href attribute *\/'],[0,'        var link = this._getChildValue(item, \&quot;*\&quot;, \&quot;link\&quot;);'],[0,'        if(!link) {'],[0,'            try {'],[0,'                link = this.getElementsByTagNameNS(item, \&quot;*\&quot;, \&quot;link\&quot;)[0].getAttribute(\&quot;href\&quot;);'],[-1,'            } catch(e) {'],[0,'                link = null;'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        var id = this._getChildValue(item, \&quot;*\&quot;, \&quot;id\&quot;, null);'],[-1,'        '],[0,'        var data = {'],[-1,'            \&quot;title\&quot;: title,'],[-1,'            \&quot;description\&quot;: description,'],[-1,'            \&quot;link\&quot;: link'],[-1,'        };'],[0,'        var feature = new OpenLayers.Feature.Vector(geometry, data);'],[0,'        feature.fid = id;'],[0,'        return feature;'],[-1,'    },        '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: _getChildValue'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * nsuri - {String} Child node namespace uri (\&quot;*\&quot; for any).'],[-1,'     * name - {String} Child node name.'],[-1,'     * def - {String} Optional string default to return if no child found.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The value of the first child with the given tag name.  Returns'],[-1,'     *     default value or empty string if none found.'],[-1,'     *\/'],[-1,'    _getChildValue: function(node, nsuri, name, def) {'],[0,'        var value;'],[0,'        var eles = this.getElementsByTagNameNS(node, nsuri, name);'],[0,'        if(eles &amp;&amp; eles[0] &amp;&amp; eles[0].firstChild'],[-1,'            &amp;&amp; eles[0].firstChild.nodeValue) {'],[0,'            value = this.getChildValue(eles[0]);'],[-1,'        } else {'],[0,'            value = (def == undefined) ? \&quot;\&quot; : def;'],[-1,'        }'],[0,'        return value;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Return a list of features from a GeoRSS doc'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * doc - {Element} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)}'],[-1,'     *\/'],[-1,'    read: function(doc) {'],[0,'        if (typeof doc == \&quot;string\&quot;) { '],[0,'            doc = OpenLayers.Format.XML.prototype.read.apply(this, [doc]);'],[-1,'        }'],[-1,''],[-1,'        \/* Try RSS items first, then Atom entries *\/'],[0,'        var itemlist = null;'],[0,'        itemlist = this.getElementsByTagNameNS(doc, \'*\', \'item\');'],[0,'        if (itemlist.length == 0) {'],[0,'            itemlist = this.getElementsByTagNameNS(doc, \'*\', \'entry\');'],[-1,'        }'],[-1,'        '],[0,'        var numItems = itemlist.length;'],[0,'        var features = new Array(numItems);'],[0,'        for(var i=0; i&lt;numItems; i++) {'],[0,'            features[i] = this.createFeatureFromItem(itemlist[i]);'],[-1,'        }'],[0,'        return features;'],[-1,'    },'],[-1,'    '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Accept Feature Collection, and return a string. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} List of features to serialize into a string.'],[-1,'     *\/'],[-1,'    write: function(features) {'],[0,'        var georss;'],[0,'        if(OpenLayers.Util.isArray(features)) {'],[0,'            georss = this.createElementNS(this.rssns, \&quot;rss\&quot;);'],[0,'            for(var i=0, len=features.length; i&lt;len; i++) {'],[0,'                georss.appendChild(this.createFeatureXML(features[i]));'],[-1,'            }'],[-1,'        } else {'],[0,'            georss = this.createFeatureXML(features);'],[-1,'        }'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [georss]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createFeatureXML'],[-1,'     * Accept an &lt;OpenLayers.Feature.Vector&gt;, and build a geometry for it.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    createFeatureXML: function(feature) {'],[0,'        var geometryNode = this.buildGeometryNode(feature.geometry);'],[0,'        var featureNode = this.createElementNS(this.rssns, \&quot;item\&quot;);'],[0,'        var titleNode = this.createElementNS(this.rssns, \&quot;title\&quot;);'],[0,'        titleNode.appendChild(this.createTextNode(feature.attributes.title ? feature.attributes.title : \&quot;\&quot;));'],[0,'        var descNode = this.createElementNS(this.rssns, \&quot;description\&quot;);'],[0,'        descNode.appendChild(this.createTextNode(feature.attributes.description ? feature.attributes.description : \&quot;\&quot;));'],[0,'        featureNode.appendChild(titleNode);'],[0,'        featureNode.appendChild(descNode);'],[0,'        if (feature.attributes.link) {'],[0,'            var linkNode = this.createElementNS(this.rssns, \&quot;link\&quot;);'],[0,'            linkNode.appendChild(this.createTextNode(feature.attributes.link));'],[0,'            featureNode.appendChild(linkNode);'],[-1,'        }    '],[0,'        for(var attr in feature.attributes) {'],[0,'            if (attr == \&quot;link\&quot; || attr == \&quot;title\&quot; || attr == \&quot;description\&quot;) { continue; } '],[0,'            var attrText = this.createTextNode(feature.attributes[attr]); '],[0,'            var nodename = attr;'],[0,'            if (attr.search(\&quot;:\&quot;) != -1) {'],[0,'                nodename = attr.split(\&quot;:\&quot;)[1];'],[-1,'            }    '],[0,'            var attrContainer = this.createElementNS(this.featureNS, \&quot;feature:\&quot;+nodename);'],[0,'            attrContainer.appendChild(attrText);'],[0,'            featureNode.appendChild(attrContainer);'],[-1,'        }    '],[0,'        featureNode.appendChild(geometryNode);'],[0,'        return featureNode;'],[-1,'    },    '],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: buildGeometryNode'],[-1,'     * builds a GeoRSS node with a given geometry'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} A gml node.'],[-1,'     *\/'],[-1,'    buildGeometryNode: function(geometry) {'],[0,'        if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'            geometry = geometry.clone();'],[0,'            geometry.transform(this.internalProjection, '],[-1,'                               this.externalProjection);'],[-1,'        }'],[0,'        var node;'],[-1,'        \/\/ match Polygon'],[0,'        if (geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.Polygon\&quot;) {'],[0,'            node = this.createElementNS(this.georssns, \'georss:polygon\');'],[-1,'            '],[0,'            node.appendChild(this.buildCoordinatesNode(geometry.components[0]));'],[-1,'        }'],[-1,'        \/\/ match LineString'],[0,'        else if (geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.LineString\&quot;) {'],[0,'            node = this.createElementNS(this.georssns, \'georss:line\');'],[-1,'            '],[0,'            node.appendChild(this.buildCoordinatesNode(geometry));'],[-1,'        }'],[-1,'        \/\/ match Point'],[0,'        else if (geometry.CLASS_NAME == \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'            node = this.createElementNS(this.georssns, \'georss:point\');'],[0,'            node.appendChild(this.buildCoordinatesNode(geometry));'],[-1,'        } else {'],[0,'            throw \&quot;Couldn\'t parse \&quot; + geometry.CLASS_NAME;'],[-1,'        }  '],[0,'        return node;         '],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: buildCoordinatesNode'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     *\/'],[-1,'    buildCoordinatesNode: function(geometry) {'],[0,'        var points = null;'],[-1,'        '],[0,'        if (geometry.components) {'],[0,'            points = geometry.components;'],[-1,'        }'],[-1,''],[0,'        var path;'],[0,'        if (points) {'],[0,'            var numPoints = points.length;'],[0,'            var parts = new Array(numPoints);'],[0,'            for (var i = 0; i &lt; numPoints; i++) {'],[0,'                parts[i] = points[i].y + \&quot; \&quot; + points[i].x;'],[-1,'            }'],[0,'            path = parts.join(\&quot; \&quot;);'],[-1,'        } else {'],[0,'            path = geometry.y + \&quot; \&quot; + geometry.x;'],[-1,'        }'],[0,'        return this.createTextNode(path);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.GeoRSS\&quot; '],[-1,'});     '],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WPSCapabilities.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML\/VersionedOGC.js'],[-1,' *\/'],[-1,' '],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WPSCapabilities'],[-1,' * Read WPS Capabilities.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML.VersionedOGC&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WPSCapabilities = OpenLayers.Class(OpenLayers.Format.XML.VersionedOGC, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: defaultVersion'],[-1,'     * {String} Version number to assume if none found.  Default is \&quot;1.0.0\&quot;.'],[-1,'     *\/'],[-1,'    defaultVersion: \&quot;1.0.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WPSCapabilities'],[-1,'     * Create a new parser for WPS Capabilities.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read capabilities data from a string, and return information about'],[-1,'     * the service.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Info about the WPS'],[-1,'     *\/'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WPSCapabilities\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WPSCapabilities\/v1_0_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WPSCapabilities.js'],[-1,' * @requires OpenLayers\/Format\/OWSCommon\/v1_1_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WPSCapabilities.v1_0_0'],[-1,' * Read WPS Capabilities version 1.0.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WPSCapabilities.v1_0_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.XML, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        ows: \&quot;http:\/\/www.opengis.net\/ows\/1.1\&quot;,'],[-1,'        wps: \&quot;http:\/\/www.opengis.net\/wps\/1.0.0\&quot;,'],[-1,'        xlink: \&quot;http:\/\/www.w3.org\/1999\/xlink\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: regExes'],[-1,'     * Compiled regular expressions for manipulating strings.'],[-1,'     *\/'],[-1,'    regExes: {'],[-1,'        trimSpace: (\/^\\s*|\\s*$\/g),'],[-1,'        removeSpace: (\/\\s*\/g),'],[-1,'        splitSpace: (\/\\s+\/),'],[-1,'        trimComma: (\/\\s*,\\s*\/g)'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WPSCapabilities.v1_0_0'],[-1,'     * Create a new parser for WPS capabilities version 1.0.0. '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Format.XML.prototype.initialize.apply(this, [options]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Read capabilities data from a string, and return info about the WPS.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * data - {String} or {DOMElement} data to read\/parse.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Information about the WPS service.'],[-1,'     *\/'],[-1,'    read: function(data) {'],[0,'        if(typeof data == \&quot;string\&quot;) {'],[0,'            data = OpenLayers.Format.XML.prototype.read.apply(this, [data]);'],[-1,'        }'],[0,'        if(data &amp;&amp; data.nodeType == 9) {'],[0,'            data = data.documentElement;'],[-1,'        }'],[0,'        var capabilities = {};'],[0,'        this.readNode(data, capabilities);'],[0,'        return capabilities;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wps\&quot;: {'],[-1,'            \&quot;Capabilities\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;ProcessOfferings\&quot;: function(node, obj) {'],[0,'                obj.processOfferings = {};'],[0,'                this.readChildNodes(node, obj.processOfferings);'],[-1,'            },'],[-1,'            \&quot;Process\&quot;: function(node, processOfferings) {'],[0,'                var processVersion = this.getAttributeNS(node, this.namespaces.wps, \&quot;processVersion\&quot;);'],[0,'                var process = {processVersion: processVersion};'],[0,'                this.readChildNodes(node, process);'],[0,'                processOfferings[process.identifier] = process;'],[-1,'            },'],[-1,'            \&quot;Languages\&quot;: function(node, obj) {'],[0,'                obj.languages = [];'],[0,'                this.readChildNodes(node, obj.languages);'],[-1,'            },'],[-1,'            \&quot;Default\&quot;: function(node, languages) {'],[0,'                var language = {isDefault: true};'],[0,'                this.readChildNodes(node, language);'],[0,'                languages.push(language);'],[-1,'            },'],[-1,'            \&quot;Supported\&quot;: function(node, languages) {'],[0,'                var language = {};'],[0,'                this.readChildNodes(node, language);     '],[0,'                languages.push(language);'],[-1,'            }'],[-1,'        },'],[-1,'        \&quot;ows\&quot;: OpenLayers.Format.OWSCommon.v1_1_0.prototype.readers[\&quot;ows\&quot;]'],[-1,'    },    '],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WPSCapabilities.v1_0_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/TouchNavigation.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control\/DragPan.js'],[-1,' * @requires OpenLayers\/Control\/PinchZoom.js'],[-1,' * @requires OpenLayers\/Handler\/Click.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.TouchNavigation'],[-1,' * The navigation control handles map browsing with touch events (dragging,'],[-1,' *     double-tapping, tap with two fingers, and pinch zoom).  Create a new '],[-1,' *     control with the &lt;OpenLayers.Control.TouchNavigation&gt; constructor.'],[-1,' *'],[-1,' * If you\u2019re only targeting touch enabled devices with your mapping application,'],[-1,' *     you can create a map with only a TouchNavigation control. The '],[-1,' *     &lt;OpenLayers.Control.Navigation&gt; control is mobile ready by default, but '],[-1,' *     you can generate a smaller build of the library by only including this'],[-1,' *     touch navigation control if you aren\'t concerned about mouse interaction.'],[-1,' *'],[-1,' * Inherits:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.TouchNavigation = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: dragPan'],[-1,'     * {&lt;OpenLayers.Control.DragPan&gt;}'],[-1,'     *\/'],[-1,'    dragPan: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: dragPanOptions'],[-1,'     * {Object} Options passed to the DragPan control.'],[-1,'     *\/'],[-1,'    dragPanOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: pinchZoom'],[-1,'     * {&lt;OpenLayers.Control.PinchZoom&gt;}'],[-1,'     *\/'],[-1,'    pinchZoom: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: pinchZoomOptions'],[-1,'     * {Object} Options passed to the PinchZoom control.'],[-1,'     *\/'],[-1,'    pinchZoomOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: clickHandlerOptions'],[-1,'     * {Object} Options passed to the Click handler.'],[-1,'     *\/'],[-1,'    clickHandlerOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: documentDrag'],[-1,'     * {Boolean} Allow panning of the map by dragging outside map viewport.'],[-1,'     *     Default is false.'],[-1,'     *\/'],[-1,'    documentDrag: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: autoActivate'],[-1,'     * {Boolean} Activate the control when it is added to a map.  Default is'],[-1,'     *     true.'],[-1,'     *\/'],[-1,'    autoActivate: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.TouchNavigation'],[-1,'     * Create a new navigation control'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *                    the control'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        this.handlers = {};'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     * The destroy method is used to perform any clean up before the control'],[-1,'     * is dereferenced.  Typically this is where event listeners are removed'],[-1,'     * to prevent memory leaks.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.deactivate();'],[0,'        if(this.dragPan) {'],[0,'            this.dragPan.destroy();'],[-1,'        }'],[0,'        this.dragPan = null;'],[0,'        if (this.pinchZoom) {'],[0,'            this.pinchZoom.destroy();'],[0,'            delete this.pinchZoom;'],[-1,'        }'],[0,'        OpenLayers.Control.prototype.destroy.apply(this,arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: activate'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        if(OpenLayers.Control.prototype.activate.apply(this,arguments)) {'],[0,'            this.dragPan.activate();'],[0,'            this.handlers.click.activate();'],[0,'            this.pinchZoom.activate();'],[0,'            return true;'],[-1,'        }'],[0,'        return false;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: deactivate'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)) {'],[0,'            this.dragPan.deactivate();'],[0,'            this.handlers.click.deactivate();'],[0,'            this.pinchZoom.deactivate();'],[0,'            return true;'],[-1,'        }'],[0,'        return false;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        var clickCallbacks = {'],[-1,'            click: this.defaultClick,'],[-1,'            dblclick: this.defaultDblClick'],[-1,'        };'],[0,'        var clickOptions = OpenLayers.Util.extend({'],[-1,'            \&quot;double\&quot;: true,'],[-1,'            stopDouble: true,'],[-1,'            pixelTolerance: 2'],[-1,'        }, this.clickHandlerOptions);'],[0,'        this.handlers.click = new OpenLayers.Handler.Click('],[-1,'            this, clickCallbacks, clickOptions'],[-1,'        );'],[0,'        this.dragPan = new OpenLayers.Control.DragPan('],[-1,'            OpenLayers.Util.extend({'],[-1,'                map: this.map,'],[-1,'                documentDrag: this.documentDrag'],[-1,'            }, this.dragPanOptions)'],[-1,'        );'],[0,'        this.dragPan.draw();'],[0,'        this.pinchZoom = new OpenLayers.Control.PinchZoom('],[-1,'            OpenLayers.Util.extend({map: this.map}, this.pinchZoomOptions)'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: defaultClick'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *\/'],[-1,'    defaultClick: function (evt) {'],[0,'        if(evt.lastTouches &amp;&amp; evt.lastTouches.length == 2) {'],[0,'            this.map.zoomOut();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: defaultDblClick'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *\/'],[-1,'    defaultDblClick: function (evt) {'],[0,'        this.map.zoomTo(this.map.zoom + 1, evt.xy);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.TouchNavigation\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Style2.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/BaseTypes\/Class.js'],[-1,' * @requires OpenLayers\/Rule.js'],[-1,' * @requires OpenLayers\/Symbolizer\/Point.js'],[-1,' * @requires OpenLayers\/Symbolizer\/Line.js'],[-1,' * @requires OpenLayers\/Symbolizer\/Polygon.js'],[-1,' * @requires OpenLayers\/Symbolizer\/Text.js'],[-1,' * @requires OpenLayers\/Symbolizer\/Raster.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Style2'],[-1,' * This class represents a collection of rules for rendering features.'],[-1,' *\/'],[1,'OpenLayers.Style2 = OpenLayers.Class({'],[-1,''],[-1,'    \/**'],[-1,'     * Property: id'],[-1,'     * {String} A unique id for this session.'],[-1,'     *\/'],[-1,'    id: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: name'],[-1,'     * {String} Style identifier.'],[-1,'     *\/'],[-1,'    name: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: title'],[-1,'     * {String} Title of this style.'],[-1,'     *\/'],[-1,'    title: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: description'],[-1,'     * {String} Description of this style.'],[-1,'     *\/'],[-1,'    description: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layerName'],[-1,'     * {&lt;String&gt;} Name of the layer that this style belongs to, usually'],[-1,'     *     according to the NamedLayer attribute of an SLD document.'],[-1,'     *\/'],[-1,'    layerName: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: isDefault'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    isDefault: false,'],[-1,'     '],[-1,'    \/** '],[-1,'     * APIProperty: rules '],[-1,'     * {Array(&lt;OpenLayers.Rule&gt;)} Collection of rendering rules.'],[-1,'     *\/'],[-1,'    rules: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.Style2'],[-1,'     * Creates a style representing a collection of rendering rules.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} An object containing properties to be set on the '],[-1,'     *     style.  Any documented properties may be set at construction.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Style2&gt;} A new style object.'],[-1,'     *\/'],[-1,'    initialize: function(config) {'],[0,'        OpenLayers.Util.extend(this, config);'],[0,'        this.id = OpenLayers.Util.createUniqueID(this.CLASS_NAME + \&quot;_\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: destroy'],[-1,'     * nullify references to prevent circular references and memory leaks'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        for (var i=0, len=this.rules.length; i&lt;len; i++) {'],[0,'            this.rules[i].destroy();'],[-1,'        }'],[0,'        delete this.rules;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Clones this style.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Style2&gt;} Clone of this style.'],[-1,'     *\/'],[-1,'    clone: function() {'],[0,'        var config = OpenLayers.Util.extend({}, this);'],[-1,'        \/\/ clone rules'],[0,'        if (this.rules) {'],[0,'            config.rules = [];'],[0,'            for (var i=0, len=this.rules.length; i&lt;len; ++i) {'],[0,'                config.rules.push(this.rules[i].clone());'],[-1,'            }'],[-1,'        }'],[0,'        return new OpenLayers.Style2(config);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Style2\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/Boxes.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer.js'],[-1,' * @requires OpenLayers\/Layer\/Markers.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.Boxes'],[-1,' * Draw divs as \'boxes\' on the layer. '],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Markers&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.Boxes = OpenLayers.Class(OpenLayers.Layer.Markers, {'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.Boxes'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} '],[-1,'     * options - {Object} Hashtable of extra options to tag onto the layer'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawMarker '],[-1,'     * Calculate the pixel location for the marker, create it, and'],[-1,'     *    add it to the layer\'s div'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * marker - {&lt;OpenLayers.Marker.Box&gt;} '],[-1,'     *\/'],[-1,'    drawMarker: function(marker) {'],[0,'        var topleft = this.map.getLayerPxFromLonLat({'],[-1,'            lon: marker.bounds.left,'],[-1,'            lat: marker.bounds.top'],[-1,'        });'],[0,'        var botright = this.map.getLayerPxFromLonLat({'],[-1,'            lon: marker.bounds.right,'],[-1,'            lat: marker.bounds.bottom'],[-1,'        });'],[0,'        if (botright == null || topleft == null) {'],[0,'            marker.display(false);'],[-1,'        } else {'],[0,'            var markerDiv = marker.draw(topleft, {'],[-1,'                w: Math.max(1, botright.x - topleft.x),'],[-1,'                h: Math.max(1, botright.y - topleft.y)'],[-1,'            });'],[0,'            if (!marker.drawn) {'],[0,'                this.div.appendChild(markerDiv);'],[0,'                marker.drawn = true;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: removeMarker '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * marker - {&lt;OpenLayers.Marker.Box&gt;} '],[-1,'     *\/'],[-1,'    removeMarker: function(marker) {'],[0,'        OpenLayers.Util.removeItem(this.markers, marker);'],[0,'        if ((marker.div != null) &amp;&amp;'],[-1,'            (marker.div.parentNode == this.div) ) {'],[0,'            this.div.removeChild(marker.div);    '],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.Boxes\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WFSCapabilities\/v1_0_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WFSCapabilities\/v1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WFSCapabilities\/v1_0_0'],[-1,' * Read WFS Capabilities version 1.0.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WFSCapabilities.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WFSCapabilities.v1_0_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.WFSCapabilities.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WFSCapabilities.v1_0_0'],[-1,'     * Create a new parser for WFS capabilities version 1.0.0.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wfs\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;Service\&quot;: function(node, capabilities) {'],[0,'                capabilities.service = {};'],[0,'                this.readChildNodes(node, capabilities.service);'],[-1,'            },'],[-1,'            \&quot;Fees\&quot;: function(node, service) {'],[0,'                var fees = this.getChildValue(node);'],[0,'                if (fees &amp;&amp; fees.toLowerCase() != \&quot;none\&quot;) {'],[0,'                    service.fees = fees;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;AccessConstraints\&quot;: function(node, service) {'],[0,'                var constraints = this.getChildValue(node);'],[0,'                if (constraints &amp;&amp; constraints.toLowerCase() != \&quot;none\&quot;) {'],[0,'                    service.accessConstraints = constraints;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;OnlineResource\&quot;: function(node, service) {'],[0,'                var onlineResource = this.getChildValue(node);'],[0,'                if (onlineResource &amp;&amp; onlineResource.toLowerCase() != \&quot;none\&quot;) {'],[0,'                    service.onlineResource = onlineResource;'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Keywords\&quot;: function(node, service) {'],[0,'                var keywords = this.getChildValue(node);'],[0,'                if (keywords &amp;&amp; keywords.toLowerCase() != \&quot;none\&quot;) {'],[0,'                    service.keywords = keywords.split(\', \');'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Capability\&quot;: function(node, capabilities) {'],[0,'                capabilities.capability = {};'],[0,'                this.readChildNodes(node, capabilities.capability);'],[-1,'            },'],[-1,'            \&quot;Request\&quot;: function(node, obj) {'],[0,'                obj.request = {};'],[0,'                this.readChildNodes(node, obj.request);'],[-1,'            },'],[-1,'            \&quot;GetFeature\&quot;: function(node, request) {'],[0,'                request.getfeature = {'],[-1,'                    href: {}, \/\/ DCPType'],[-1,'                    formats: [] \/\/ ResultFormat'],[-1,'                };'],[0,'                this.readChildNodes(node, request.getfeature);'],[-1,'            },'],[-1,'            \&quot;ResultFormat\&quot;: function(node, obj) {'],[0,'                var children = node.childNodes;'],[0,'                var childNode;'],[0,'                for(var i=0; i&lt;children.length; i++) {'],[0,'                    childNode = children[i];'],[0,'                    if(childNode.nodeType == 1) {'],[0,'                        obj.formats.push(childNode.nodeName);'],[-1,'                    }'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;DCPType\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj);'],[-1,'            },'],[-1,'            \&quot;HTTP\&quot;: function(node, obj) {'],[0,'                this.readChildNodes(node, obj.href);'],[-1,'            },'],[-1,'            \&quot;Get\&quot;: function(node, obj) {'],[0,'                obj.get = node.getAttribute(\&quot;onlineResource\&quot;);'],[-1,'            },'],[-1,'            \&quot;Post\&quot;: function(node, obj) {'],[0,'                obj.post = node.getAttribute(\&quot;onlineResource\&quot;);'],[-1,'            },'],[-1,'            \&quot;SRS\&quot;: function(node, obj) {'],[0,'                var srs = this.getChildValue(node);'],[0,'                if (srs) {'],[0,'                    obj.srs = srs;'],[-1,'                }'],[-1,'            }'],[-1,'        }, OpenLayers.Format.WFSCapabilities.v1.prototype.readers[\&quot;wfs\&quot;])'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WFSCapabilities.v1_0_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/PointGrid.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Vector.js'],[-1,' * @requires OpenLayers\/Geometry\/Polygon.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.PointGrid'],[-1,' * A point grid layer dynamically generates a regularly spaced grid of point'],[-1,' *     features.  This is a specialty layer for cases where an application needs'],[-1,' *     a regular grid of points.  It can be used, for example, in an editing'],[-1,' *     environment to snap to a grid.'],[-1,' *'],[-1,' * Create a new vector layer with the &lt;OpenLayers.Layer.PointGrid&gt; constructor.'],[-1,' * (code)'],[-1,' * \/\/ create a grid with points spaced at 10 map units'],[-1,' * var points = new OpenLayers.Layer.PointGrid({dx: 10, dy: 10});'],[-1,' *'],[-1,' * \/\/ create a grid with different x\/y spacing rotated 15 degrees clockwise.'],[-1,' * var points = new OpenLayers.Layer.PointGrid({dx: 5, dy: 10, rotation: 15});'],[-1,' * (end)'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Vector&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.PointGrid = OpenLayers.Class(OpenLayers.Layer.Vector, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: dx'],[-1,'     * {Number} Point grid spacing in the x-axis direction (map units).  '],[-1,'     * Read-only.  Use the &lt;setSpacing&gt; method to modify this value.'],[-1,'     *\/'],[-1,'    dx: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: dy'],[-1,'     * {Number} Point grid spacing in the y-axis direction (map units).  '],[-1,'     * Read-only.  Use the &lt;setSpacing&gt; method to modify this value.'],[-1,'     *\/'],[-1,'    dy: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: ratio'],[-1,'     * {Number} Ratio of the desired grid size to the map viewport size.  '],[-1,'     * Default is 1.5.  Larger ratios mean the grid is recalculated less often '],[-1,'     * while panning.  The &lt;maxFeatures&gt; setting has precedence when determining'],[-1,'     * grid size.  Read-only.  Use the &lt;setRatio&gt; method to modify this value.'],[-1,'     *\/'],[-1,'    ratio: 1.5,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxFeatures'],[-1,'     * {Number} The maximum number of points to generate in the grid.  Default'],[-1,'     * is 250.  Read-only.  Use the &lt;setMaxFeatures&gt; method to modify this value.'],[-1,'     *\/'],[-1,'    maxFeatures: 250,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: rotation'],[-1,'     * {Number} Grid rotation (in degrees clockwise from the positive x-axis).'],[-1,'     * Default is 0.  Read-only.  Use the &lt;setRotation&gt; method to modify this'],[-1,'     * value.'],[-1,'     *\/'],[-1,'    rotation: 0,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: origin'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} Grid origin.  The grid lattice will be aligned with '],[-1,'     * the origin.  If not set at construction, the center of the map\'s maximum '],[-1,'     * extent is used.  Read-only.  Use the &lt;setOrigin&gt; method to modify this '],[-1,'     * value.'],[-1,'     *\/'],[-1,'    origin: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: gridBounds'],[-1,'     * {&lt;OpenLayers.Bounds&gt;}  Internally cached grid bounds (with optional '],[-1,'     * rotation applied).'],[-1,'     *\/'],[-1,'    gridBounds: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.PointGrid'],[-1,'     * Creates a new point grid layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} An object containing all configuration properties for'],[-1,'     *     the layer.  The &lt;dx&gt; and &lt;dy&gt; properties are required to be set at '],[-1,'     *     construction.  Any other layer properties may be set in this object.'],[-1,'     *\/'],[-1,'    initialize: function(config) {'],[0,'        config = config || {};'],[0,'        OpenLayers.Layer.Vector.prototype.initialize.apply(this, [config.name, config]);'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: setMap'],[-1,'     * The layer has been added to the map. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} '],[-1,'     *\/'],[-1,'    setMap: function(map) {        '],[0,'        OpenLayers.Layer.Vector.prototype.setMap.apply(this, arguments);'],[0,'        map.events.register(\&quot;moveend\&quot;, this, this.onMoveEnd);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: removeMap'],[-1,'     * The layer has been removed from the map.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    removeMap: function(map) {'],[0,'        map.events.unregister(\&quot;moveend\&quot;, this, this.onMoveEnd);'],[0,'        OpenLayers.Layer.Vector.prototype.removeMap.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setRatio'],[-1,'     * Set the grid &lt;ratio&gt; property and update the grid.  Can only be called'],[-1,'     *     after the layer has been added to a map with a center\/extent.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * ratio - {Number}'],[-1,'     *\/'],[-1,'    setRatio: function(ratio) {'],[0,'        this.ratio = ratio;'],[0,'        this.updateGrid(true);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setMaxFeatures'],[-1,'     * Set the grid &lt;maxFeatures&gt; property and update the grid.  Can only be '],[-1,'     *     called after the layer has been added to a map with a center\/extent.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * maxFeatures - {Number}'],[-1,'     *\/'],[-1,'    setMaxFeatures: function(maxFeatures) {'],[0,'        this.maxFeatures = maxFeatures;'],[0,'        this.updateGrid(true);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setSpacing'],[-1,'     * Set the grid &lt;dx&gt; and &lt;dy&gt; properties and update the grid.  If only one'],[-1,'     *     argument is provided, it will be set as &lt;dx&gt; and &lt;dy&gt;.  Can only be '],[-1,'     *     called after the layer has been added to a map with a center\/extent.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * dx - {Number}'],[-1,'     * dy - {Number}'],[-1,'     *\/'],[-1,'    setSpacing: function(dx, dy) {'],[0,'        this.dx = dx;'],[0,'        this.dy = dy || dx;'],[0,'        this.updateGrid(true);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setOrigin'],[-1,'     * Set the grid &lt;origin&gt; property and update the grid.  Can only be called'],[-1,'     *     after the layer has been added to a map with a center\/extent.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * origin - {&lt;OpenLayers.LonLat&gt;}'],[-1,'     *\/'],[-1,'    setOrigin: function(origin) {'],[0,'        this.origin = origin;'],[0,'        this.updateGrid(true);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: getOrigin'],[-1,'     * Get the grid &lt;origin&gt; property.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} The grid origin.'],[-1,'     *\/'],[-1,'    getOrigin: function() {'],[0,'        if (!this.origin) {'],[0,'            this.origin = this.map.getExtent().getCenterLonLat();'],[-1,'        }'],[0,'        return this.origin;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setRotation'],[-1,'     * Set the grid &lt;rotation&gt; property and update the grid.  Rotation values'],[-1,'     *     are in degrees clockwise from the positive x-axis (negative values'],[-1,'     *     for counter-clockwise rotation).  Can only be called after the layer '],[-1,'     *     has been added to a map with a center\/extent.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * rotation - {Number} Degrees clockwise from the positive x-axis.'],[-1,'     *\/'],[-1,'    setRotation: function(rotation) {'],[0,'        this.rotation = rotation;'],[0,'        this.updateGrid(true);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onMoveEnd'],[-1,'     * Listener for map \&quot;moveend\&quot; events.'],[-1,'     *\/'],[-1,'    onMoveEnd: function() {'],[0,'        this.updateGrid();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getViewBounds'],[-1,'     * Gets the (potentially rotated) view bounds for grid calculations.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    getViewBounds: function() {'],[0,'        var bounds = this.map.getExtent();'],[0,'        if (this.rotation) {'],[0,'            var origin = this.getOrigin();'],[0,'            var rotationOrigin = new OpenLayers.Geometry.Point(origin.lon, origin.lat);'],[0,'            var rect = bounds.toGeometry();'],[0,'            rect.rotate(-this.rotation, rotationOrigin);'],[0,'            bounds = rect.getBounds();'],[-1,'        }'],[0,'        return bounds;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: updateGrid'],[-1,'     * Update the grid.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * force - {Boolean} Update the grid even if the previous bounds are still'],[-1,'     *     valid.'],[-1,'     *\/'],[-1,'    updateGrid: function(force) {'],[0,'        if (force || this.invalidBounds()) {'],[0,'            var viewBounds = this.getViewBounds();'],[0,'            var origin = this.getOrigin();'],[0,'            var rotationOrigin = new OpenLayers.Geometry.Point(origin.lon, origin.lat);'],[0,'            var viewBoundsWidth = viewBounds.getWidth();'],[0,'            var viewBoundsHeight = viewBounds.getHeight();'],[0,'            var aspectRatio = viewBoundsWidth \/ viewBoundsHeight;'],[0,'            var maxHeight = Math.sqrt(this.dx * this.dy * this.maxFeatures \/ aspectRatio);'],[0,'            var maxWidth = maxHeight * aspectRatio; '],[0,'            var gridWidth = Math.min(viewBoundsWidth * this.ratio, maxWidth);'],[0,'            var gridHeight = Math.min(viewBoundsHeight * this.ratio, maxHeight);'],[0,'            var center = viewBounds.getCenterLonLat();'],[0,'            this.gridBounds = new OpenLayers.Bounds('],[-1,'                center.lon - (gridWidth \/ 2),'],[-1,'                center.lat - (gridHeight \/ 2),'],[-1,'                center.lon + (gridWidth \/ 2),'],[-1,'                center.lat + (gridHeight \/ 2)'],[-1,'            );'],[0,'            var rows = Math.floor(gridHeight \/ this.dy);'],[0,'            var cols = Math.floor(gridWidth \/ this.dx);'],[0,'            var gridLeft = origin.lon + (this.dx * Math.ceil((this.gridBounds.left - origin.lon) \/ this.dx));'],[0,'            var gridBottom = origin.lat + (this.dy * Math.ceil((this.gridBounds.bottom - origin.lat) \/ this.dy));'],[0,'            var features = new Array(rows * cols);'],[0,'            var x, y, point;'],[0,'            for (var i=0; i&lt;cols; ++i) {'],[0,'                x = gridLeft + (i * this.dx);'],[0,'                for (var j=0; j&lt;rows; ++j) {'],[0,'                    y = gridBottom + (j * this.dy);'],[0,'                    point = new OpenLayers.Geometry.Point(x, y);'],[0,'                    if (this.rotation) {'],[0,'                        point.rotate(this.rotation, rotationOrigin);'],[-1,'                    }'],[0,'                    features[(i*rows)+j] = new OpenLayers.Feature.Vector(point);'],[-1,'                }'],[-1,'            }'],[0,'            this.destroyFeatures(this.features, {silent: true});'],[0,'            this.addFeatures(features, {silent: true});'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: invalidBounds'],[-1,'     * Determine whether the previously generated point grid is invalid. '],[-1,'     *     This occurs when the map bounds extends beyond the previously '],[-1,'     *     generated grid bounds.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} '],[-1,'     *\/'],[-1,'    invalidBounds: function() {'],[0,'        return !this.gridBounds || !this.gridBounds.containsBounds(this.getViewBounds());'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.PointGrid\&quot;'],[-1,'    '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/Zoomify.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/*'],[-1,' * Development supported by a R&amp;D grant DC08P02OUK006 - Old Maps Online'],[-1,' * (www.oldmapsonline.org) from Ministry of Culture of the Czech Republic.'],[-1,' *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.Zoomify'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.Zoomify = OpenLayers.Class(OpenLayers.Layer.Grid, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: size'],[-1,'     * {&lt;OpenLayers.Size&gt;} The Zoomify image size in pixels.'],[-1,'     *\/'],[-1,'    size: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    isBaseLayer: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: standardTileSize'],[-1,'     * {Integer} The size of a standard (non-border) square tile in pixels.'],[-1,'     *\/'],[-1,'    standardTileSize: 256,'],[-1,''],[-1,'    \/** '],[-1,'     * Property: tileOriginCorner'],[-1,'     * {String} This layer uses top-left as tile origin'],[-1,'     **\/'],[-1,'    tileOriginCorner: \&quot;tl\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: numberOfTiers'],[-1,'     * {Integer} Depth of the Zoomify pyramid, number of tiers (zoom levels)'],[-1,'     *                          - filled during Zoomify pyramid initialization.'],[-1,'     *\/'],[-1,'    numberOfTiers: 0,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: tileCountUpToTier'],[-1,'     * {Array(Integer)} Number of tiles up to the given tier of pyramid.'],[-1,'     *                          - filled during Zoomify pyramid initialization.'],[-1,'     *\/'],[-1,'    tileCountUpToTier: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: tierSizeInTiles'],[-1,'     * {Array(&lt;OpenLayers.Size&gt;)} Size (in tiles) for each tier of pyramid.'],[-1,'     *                          - filled during Zoomify pyramid initialization.'],[-1,'     *\/'],[-1,'    tierSizeInTiles: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: tierImageSize'],[-1,'     * {Array(&lt;OpenLayers.Size&gt;)} Image size in pixels for each pyramid tier.'],[-1,'     *                          - filled during Zoomify pyramid initialization.'],[-1,'     *\/'],[-1,'    tierImageSize: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.Zoomify'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} A name for the layer.'],[-1,'     * url - {String} - Relative or absolute path to the image or more'],[-1,'     *        precisly to the TileGroup[X] directories root.'],[-1,'     *        Flash plugin use the variable name \&quot;zoomifyImagePath\&quot; for this.'],[-1,'     * size - {&lt;OpenLayers.Size&gt;} The size (in pixels) of the image.'],[-1,'     * options - {Object} Hashtable of extra options to tag onto the layer'],[-1,'     *\/'],[-1,'    initialize: function(name, url, size, options) {'],[-1,''],[-1,'        \/\/ initilize the Zoomify pyramid for given size'],[0,'        this.initializeZoomify(size);'],[-1,''],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply(this, ['],[-1,'            name, url, size, {}, options'],[-1,'        ]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: initializeZoomify'],[-1,'     * It generates constants for all tiers of the Zoomify pyramid'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * size - {&lt;OpenLayers.Size&gt;} The size of the image in pixels'],[-1,'     *'],[-1,'     *\/'],[-1,'    initializeZoomify: function( size ) {'],[-1,''],[0,'        var imageSize = size.clone();'],[0,'        this.size = size.clone();'],[0,'        var tiles = new OpenLayers.Size('],[-1,'            Math.ceil( imageSize.w \/ this.standardTileSize ),'],[-1,'            Math.ceil( imageSize.h \/ this.standardTileSize )'],[-1,'            );'],[-1,''],[0,'        this.tierSizeInTiles = [tiles];'],[0,'        this.tierImageSize = [imageSize];'],[-1,''],[0,'        while (imageSize.w &gt; this.standardTileSize ||'],[-1,'               imageSize.h &gt; this.standardTileSize ) {'],[-1,''],[0,'            imageSize = new OpenLayers.Size('],[-1,'                Math.floor( imageSize.w \/ 2 ),'],[-1,'                Math.floor( imageSize.h \/ 2 )'],[-1,'                );'],[0,'            tiles = new OpenLayers.Size('],[-1,'                Math.ceil( imageSize.w \/ this.standardTileSize ),'],[-1,'                Math.ceil( imageSize.h \/ this.standardTileSize )'],[-1,'                );'],[0,'            this.tierSizeInTiles.push( tiles );'],[0,'            this.tierImageSize.push( imageSize );'],[-1,'        }'],[-1,''],[0,'        this.tierSizeInTiles.reverse();'],[0,'        this.tierImageSize.reverse();'],[-1,''],[0,'        this.numberOfTiers = this.tierSizeInTiles.length;'],[0,'        var resolutions = [1];'],[0,'        this.tileCountUpToTier = [0];'],[0,'        for (var i = 1; i &lt; this.numberOfTiers; i++) {'],[0,'            resolutions.unshift(Math.pow(2, i));'],[0,'            this.tileCountUpToTier.push('],[-1,'                this.tierSizeInTiles[i-1].w * this.tierSizeInTiles[i-1].h +'],[-1,'                this.tileCountUpToTier[i-1]'],[-1,'                );'],[-1,'        }'],[0,'        if (!this.serverResolutions) {'],[0,'            this.serverResolutions = resolutions;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod:destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,'        \/\/ for now, nothing special to do here.'],[0,'        OpenLayers.Layer.Grid.prototype.destroy.apply(this, arguments);'],[-1,''],[-1,'        \/\/ Remove from memory the Zoomify pyramid - is that enough?'],[0,'        this.tileCountUpToTier.length = 0;'],[0,'        this.tierSizeInTiles.length = 0;'],[0,'        this.tierImageSize.length = 0;'],[-1,''],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.Zoomify&gt;} An exact clone of this &lt;OpenLayers.Layer.Zoomify&gt;'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[-1,''],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.Zoomify(this.name,'],[-1,'                                           this.url,'],[-1,'                                           this.size,'],[-1,'                                           this.options);'],[-1,'        }'],[-1,''],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);'],[-1,''],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[-1,''],[0,'        return obj;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string with the layer\'s url and parameters and also the'],[-1,'     *          passed-in bounds and appropriate tile size specified as'],[-1,'     *          parameters'],[-1,'     *\/'],[-1,'    getURL: function (bounds) {'],[0,'        bounds = this.adjustBounds(bounds);'],[0,'        var res = this.getServerResolution();'],[0,'        var x = Math.round((bounds.left - this.tileOrigin.lon) \/ (res * this.tileSize.w));'],[0,'        var y = Math.round((this.tileOrigin.lat - bounds.top) \/ (res * this.tileSize.h));'],[0,'        var z = this.getZoomForResolution( res );'],[-1,''],[0,'        var tileIndex = x + y * this.tierSizeInTiles[z].w + this.tileCountUpToTier[z];'],[0,'        var path = \&quot;TileGroup\&quot; + Math.floor( (tileIndex) \/ 256 ) +'],[-1,'            \&quot;\/\&quot; + z + \&quot;-\&quot; + x + \&quot;-\&quot; + y + \&quot;.jpg\&quot;;'],[0,'        var url = this.url;'],[0,'        if (OpenLayers.Util.isArray(url)) {'],[0,'            url = this.selectUrl(path, url);'],[-1,'        }'],[0,'        return url + path;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getImageSize'],[-1,'     * getImageSize returns size for a particular tile. If bounds are given as'],[-1,'     * first argument, size is calculated (bottom-right tiles are non square).'],[-1,'     *'],[-1,'     *\/'],[-1,'    getImageSize: function() {'],[0,'        if (arguments.length &gt; 0) {'],[0,'            var bounds = this.adjustBounds(arguments[0]);'],[0,'            var res = this.getServerResolution();'],[0,'            var x = Math.round((bounds.left - this.tileOrigin.lon) \/ (res * this.tileSize.w));'],[0,'            var y = Math.round((this.tileOrigin.lat - bounds.top) \/ (res * this.tileSize.h));'],[0,'            var z = this.getZoomForResolution( res );'],[0,'            var w = this.standardTileSize;'],[0,'            var h = this.standardTileSize;'],[0,'            if (x == this.tierSizeInTiles[z].w -1 ) {'],[0,'                var w = this.tierImageSize[z].w % this.standardTileSize;'],[-1,'            }'],[0,'            if (y == this.tierSizeInTiles[z].h -1 ) {'],[0,'                var h = this.tierImageSize[z].h % this.standardTileSize;'],[-1,'            }'],[0,'            return (new OpenLayers.Size(w, h));'],[-1,'        } else {'],[0,'            return this.tileSize;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setMap'],[-1,'     * When the layer is added to a map, then we can fetch our origin'],[-1,'     *    (if we don\'t have one.)'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments);'],[0,'        this.tileOrigin = new OpenLayers.LonLat(this.map.maxExtent.left,'],[-1,'                                                this.map.maxExtent.top);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.Zoomify\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/WMTS.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.WMTS'],[-1,' * Instances of the WMTS class allow viewing of tiles from a service that '],[-1,' *     implements the OGC WMTS specification version 1.0.0.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.WMTS = OpenLayers.Class(OpenLayers.Layer.Grid, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * {Boolean} The layer will be considered a base layer.  Default is true.'],[-1,'     *\/'],[-1,'    isBaseLayer: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} WMTS version.  Default is \&quot;1.0.0\&quot;.'],[-1,'     *\/'],[-1,'    version: \&quot;1.0.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: requestEncoding'],[-1,'     * {String} Request encoding.  Can be \&quot;REST\&quot; or \&quot;KVP\&quot;.  Default is \&quot;KVP\&quot;.'],[-1,'     *\/'],[-1,'    requestEncoding: \&quot;KVP\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: url'],[-1,'     * {String|Array(String)} The base URL or request URL template for the WMTS'],[-1,'     * service. Must be provided. Array is only supported for base URLs, not'],[-1,'     * for request URL templates. URL templates are only supported for'],[-1,'     * REST &lt;requestEncoding&gt;.'],[-1,'     *\/'],[-1,'    url: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layer'],[-1,'     * {String} The layer identifier advertised by the WMTS service.  Must be '],[-1,'     *     provided.'],[-1,'     *\/'],[-1,'    layer: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: matrixSet'],[-1,'     * {String} One of the advertised matrix set identifiers.  Must be provided.'],[-1,'     *\/'],[-1,'    matrixSet: null,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: style'],[-1,'     * {String} One of the advertised layer styles.  Must be provided.'],[-1,'     *\/'],[-1,'    style: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: format'],[-1,'     * {String} The image MIME type.  Default is \&quot;image\/jpeg\&quot;.'],[-1,'     *\/'],[-1,'    format: \&quot;image\/jpeg\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: tileOrigin'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} The top-left corner of the tile matrix in map '],[-1,'     *     units.  If the tile origin for each matrix in a set is different,'],[-1,'     *     the &lt;matrixIds&gt; should include a topLeftCorner property.  If'],[-1,'     *     not provided, the tile origin will default to the top left corner'],[-1,'     *     of the layer &lt;maxExtent&gt;.'],[-1,'     *\/'],[-1,'    tileOrigin: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: tileFullExtent'],[-1,'     * {&lt;OpenLayers.Bounds&gt;}  The full extent of the tile set.  If not supplied,'],[-1,'     *     the layer\'s &lt;maxExtent&gt; property will be used.'],[-1,'     *\/'],[-1,'    tileFullExtent: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: formatSuffix'],[-1,'     * {String} For REST request encoding, an image format suffix must be '],[-1,'     *     included in the request.  If not provided, the suffix will be derived'],[-1,'     *     from the &lt;format&gt; property.'],[-1,'     *\/'],[-1,'    formatSuffix: null,    '],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: matrixIds'],[-1,'     * {Array} A list of tile matrix identifiers.  If not provided, the matrix'],[-1,'     *     identifiers will be assumed to be integers corresponding to the '],[-1,'     *     map zoom level.  If a list of strings is provided, each item should'],[-1,'     *     be the matrix identifier that corresponds to the map zoom level.'],[-1,'     *     Additionally, a list of objects can be provided.  Each object should'],[-1,'     *     describe the matrix as presented in the WMTS capabilities.  These'],[-1,'     *     objects should have the propertes shown below.'],[-1,'     * '],[-1,'     * Matrix properties:'],[-1,'     * identifier - {String} The matrix identifier (required).'],[-1,'     * scaleDenominator - {Number} The matrix scale denominator.'],[-1,'     * topLeftCorner - {&lt;OpenLayers.LonLat&gt;} The top left corner of the '],[-1,'     *     matrix.  Must be provided if different than the layer &lt;tileOrigin&gt;.'],[-1,'     * tileWidth - {Number} The tile width for the matrix.  Must be provided '],[-1,'     *     if different than the width given in the layer &lt;tileSize&gt;.'],[-1,'     * tileHeight - {Number} The tile height for the matrix.  Must be provided '],[-1,'     *     if different than the height given in the layer &lt;tileSize&gt;.'],[-1,'     *\/'],[-1,'    matrixIds: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: dimensions'],[-1,'     * {Array} For RESTful request encoding, extra dimensions may be specified.'],[-1,'     *     Items in this list should be property names in the &lt;params&gt; object.'],[-1,'     *     Values of extra dimensions will be determined from the corresponding'],[-1,'     *     values in the &lt;params&gt; object.'],[-1,'     *\/'],[-1,'    dimensions: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: params'],[-1,'     * {Object} Extra parameters to include in tile requests.  For KVP '],[-1,'     *     &lt;requestEncoding&gt;, these properties will be encoded in the request '],[-1,'     *     query string.  For REST &lt;requestEncoding&gt;, these properties will'],[-1,'     *     become part of the request path, with order determined by the '],[-1,'     *     &lt;dimensions&gt; list.'],[-1,'     *\/'],[-1,'    params: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: zoomOffset'],[-1,'     * {Number} If your cache has more levels than you want to provide'],[-1,'     *     access to with this layer, supply a zoomOffset.  This zoom offset'],[-1,'     *     is added to the current map zoom level to determine the level'],[-1,'     *     for a requested tile.  For example, if you supply a zoomOffset'],[-1,'     *     of 3, when the map is at the zoom 0, tiles will be requested from'],[-1,'     *     level 3 of your cache.  Default is 0 (assumes cache level and map'],[-1,'     *     zoom are equivalent).  Additionally, if this layer is to be used'],[-1,'     *     as an overlay and the cache has fewer zoom levels than the base'],[-1,'     *     layer, you can supply a negative zoomOffset.  For example, if a'],[-1,'     *     map zoom level of 1 corresponds to your cache level zero, you would'],[-1,'     *     supply a -1 zoomOffset (and set the maxResolution of the layer'],[-1,'     *     appropriately).  The zoomOffset value has no effect if complete'],[-1,'     *     matrix definitions (including scaleDenominator) are supplied in'],[-1,'     *     the &lt;matrixIds&gt; property.  Defaults to 0 (no zoom offset).'],[-1,'     *\/'],[-1,'    zoomOffset: 0,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: serverResolutions'],[-1,'     * {Array} A list of all resolutions available on the server.  Only set this'],[-1,'     *     property if the map resolutions differ from the server. This'],[-1,'     *     property serves two purposes. (a) &lt;serverResolutions&gt; can include'],[-1,'     *     resolutions that the server supports and that you don\'t want to'],[-1,'     *     provide with this layer; you can also look at &lt;zoomOffset&gt;, which is'],[-1,'     *     an alternative to &lt;serverResolutions&gt; for that specific purpose.'],[-1,'     *     (b) The map can work with resolutions that aren\'t supported by'],[-1,'     *     the server, i.e. that aren\'t in &lt;serverResolutions&gt;. When the'],[-1,'     *     map is displayed in such a resolution data for the closest'],[-1,'     *     server-supported resolution is loaded and the layer div is'],[-1,'     *     stretched as necessary.'],[-1,'     *\/'],[-1,'    serverResolutions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: formatSuffixMap'],[-1,'     * {Object} a map between WMTS \'format\' request parameter and tile image file suffix'],[-1,'     *\/'],[-1,'    formatSuffixMap: {'],[-1,'        \&quot;image\/png\&quot;: \&quot;png\&quot;,'],[-1,'        \&quot;image\/png8\&quot;: \&quot;png\&quot;,'],[-1,'        \&quot;image\/png24\&quot;: \&quot;png\&quot;,'],[-1,'        \&quot;image\/png32\&quot;: \&quot;png\&quot;,'],[-1,'        \&quot;png\&quot;: \&quot;png\&quot;,'],[-1,'        \&quot;image\/jpeg\&quot;: \&quot;jpg\&quot;,'],[-1,'        \&quot;image\/jpg\&quot;: \&quot;jpg\&quot;,'],[-1,'        \&quot;jpeg\&quot;: \&quot;jpg\&quot;,'],[-1,'        \&quot;jpg\&quot;: \&quot;jpg\&quot;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: matrix'],[-1,'     * {Object} Matrix definition for the current map resolution.  Updated by'],[-1,'     *     the &lt;updateMatrixProperties&gt; method.'],[-1,'     *\/'],[-1,'    matrix: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.WMTS'],[-1,'     * Create a new WMTS layer.'],[-1,'     *'],[-1,'     * Example:'],[-1,'     * (code)'],[-1,'     * var wmts = new OpenLayers.Layer.WMTS({'],[-1,'     *     name: \&quot;My WMTS Layer\&quot;,'],[-1,'     *     url: \&quot;http:\/\/example.com\/wmts\&quot;, '],[-1,'     *     layer: \&quot;layer_id\&quot;,'],[-1,'     *     style: \&quot;default\&quot;,'],[-1,'     *     matrixSet: \&quot;matrix_id\&quot;'],[-1,'     * });'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} Configuration properties for the layer.'],[-1,'     *'],[-1,'     * Required configuration properties:'],[-1,'     * url - {String} The base url for the service.  See the &lt;url&gt; property.'],[-1,'     * layer - {String} The layer identifier.  See the &lt;layer&gt; property.'],[-1,'     * style - {String} The layer style identifier.  See the &lt;style&gt; property.'],[-1,'     * matrixSet - {String} The tile matrix set identifier.  See the &lt;matrixSet&gt;'],[-1,'     *     property.'],[-1,'     *'],[-1,'     * Any other documented layer properties can be provided in the config object.'],[-1,'     *\/'],[-1,'    initialize: function(config) {'],[-1,''],[-1,'        \/\/ confirm required properties are supplied'],[0,'        var required = {'],[-1,'            url: true,'],[-1,'            layer: true,'],[-1,'            style: true,'],[-1,'            matrixSet: true'],[-1,'        };'],[0,'        for (var prop in required) {'],[0,'            if (!(prop in config)) {'],[0,'                throw new Error(\&quot;Missing property \'\&quot; + prop + \&quot;\' in layer configuration.\&quot;);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        config.params = OpenLayers.Util.upperCaseObject(config.params);'],[0,'        var args = [config.name, config.url, config.params, config];'],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply(this, args);'],[-1,'        '],[-1,''],[-1,'        \/\/ determine format suffix (for REST)'],[0,'        if (!this.formatSuffix) {'],[0,'            this.formatSuffix = this.formatSuffixMap[this.format] || this.format.split(\&quot;\/\&quot;).pop();            '],[-1,'        }'],[-1,''],[-1,'        \/\/ expand matrixIds (may be array of string or array of object)'],[0,'        if (this.matrixIds) {'],[0,'            var len = this.matrixIds.length;'],[0,'            if (len &amp;&amp; typeof this.matrixIds[0] === \&quot;string\&quot;) {'],[0,'                var ids = this.matrixIds;'],[0,'                this.matrixIds = new Array(len);'],[0,'                for (var i=0; i&lt;len; ++i) {'],[0,'                    this.matrixIds[i] = {identifier: ids[i]};'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     *\/'],[-1,'    setMap: function() {'],[0,'        OpenLayers.Layer.Grid.prototype.setMap.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: updateMatrixProperties'],[-1,'     * Called when map resolution changes to update matrix related properties.'],[-1,'     *\/'],[-1,'    updateMatrixProperties: function() {'],[0,'        this.matrix = this.getMatrix();'],[0,'        if (this.matrix) {'],[0,'            if (this.matrix.topLeftCorner) {'],[0,'                this.tileOrigin = this.matrix.topLeftCorner;'],[-1,'            }'],[0,'            if (this.matrix.tileWidth &amp;&amp; this.matrix.tileHeight) {'],[0,'                this.tileSize = new OpenLayers.Size('],[-1,'                    this.matrix.tileWidth, this.matrix.tileHeight'],[-1,'                );'],[-1,'            }'],[0,'            if (!this.tileOrigin) { '],[0,'                this.tileOrigin = new OpenLayers.LonLat('],[-1,'                    this.maxExtent.left, this.maxExtent.top'],[-1,'                );'],[-1,'            }   '],[0,'            if (!this.tileFullExtent) { '],[0,'                this.tileFullExtent = this.maxExtent;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: moveTo'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * zoomChanged - {Boolean} Tells when zoom has changed, as layers have to'],[-1,'     *     do some init work in that case.'],[-1,'     * dragging - {Boolean}'],[-1,'     *\/'],[-1,'    moveTo:function(bounds, zoomChanged, dragging) {'],[0,'        if (zoomChanged || !this.matrix) {'],[0,'            this.updateMatrixProperties();'],[-1,'        }'],[0,'        return OpenLayers.Layer.Grid.prototype.moveTo.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * obj - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.WMTS&gt;} An exact clone of this &lt;OpenLayers.Layer.WMTS&gt;'],[-1,'     *\/'],[-1,'    clone: function(obj) {'],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.WMTS(this.options);'],[-1,'        }'],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);'],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[0,'        return obj;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getIdentifier'],[-1,'     * Get the current index in the matrixIds array.'],[-1,'     *\/'],[-1,'    getIdentifier: function() {'],[0,'        return this.getServerZoom();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getMatrix'],[-1,'     * Get the appropriate matrix definition for the current map resolution.'],[-1,'     *\/'],[-1,'    getMatrix: function() {'],[0,'        var matrix;'],[0,'        if (!this.matrixIds || this.matrixIds.length === 0) {'],[0,'            matrix = {identifier: this.getIdentifier()};'],[-1,'        } else {'],[-1,'            \/\/ get appropriate matrix given the map scale if possible'],[0,'            if (\&quot;scaleDenominator\&quot; in this.matrixIds[0]) {'],[-1,'                \/\/ scale denominator calculation based on WMTS spec'],[0,'                var denom = '],[-1,'                    OpenLayers.METERS_PER_INCH * '],[-1,'                    OpenLayers.INCHES_PER_UNIT[this.units] * '],[-1,'                    this.getServerResolution() \/ 0.28E-3;'],[0,'                var diff = Number.POSITIVE_INFINITY;'],[0,'                var delta;'],[0,'                for (var i=0, ii=this.matrixIds.length; i&lt;ii; ++i) {'],[0,'                    delta = Math.abs(1 - (this.matrixIds[i].scaleDenominator \/ denom));'],[0,'                    if (delta &lt; diff) {'],[0,'                        diff = delta;'],[0,'                        matrix = this.matrixIds[i];'],[-1,'                    }'],[-1,'                }'],[-1,'            } else {'],[-1,'                \/\/ fall back on zoom as index'],[0,'                matrix = this.matrixIds[this.getIdentifier()];'],[-1,'            }'],[-1,'        }'],[0,'        return matrix;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: getTileInfo'],[-1,'     * Get tile information for a given location at the current map resolution.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * loc - {&lt;OpenLayers.LonLat} A location in map coordinates.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} An object with \&quot;col\&quot;, \&quot;row\&quot;, \&quot;i\&quot;, and \&quot;j\&quot; properties.  The col'],[-1,'     *     and row values are zero based tile indexes from the top left.  The'],[-1,'     *     i and j values are the number of pixels to the left and top '],[-1,'     *     (respectively) of the given location within the target tile.'],[-1,'     *\/'],[-1,'    getTileInfo: function(loc) {'],[0,'        var res = this.getServerResolution();'],[-1,'        '],[0,'        var fx = (loc.lon - this.tileOrigin.lon) \/ (res * this.tileSize.w);'],[0,'        var fy = (this.tileOrigin.lat - loc.lat) \/ (res * this.tileSize.h);'],[-1,''],[0,'        var col = Math.floor(fx);'],[0,'        var row = Math.floor(fy);'],[-1,'        '],[0,'        return {'],[-1,'            col: col, '],[-1,'            row: row,'],[-1,'            i: Math.floor((fx - col) * this.tileSize.w),'],[-1,'            j: Math.floor((fy - row) * this.tileSize.h)'],[-1,'        };'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} A URL for the tile corresponding to the given bounds.'],[-1,'     *\/'],[-1,'    getURL: function(bounds) {'],[0,'        bounds = this.adjustBounds(bounds);'],[0,'        var url = \&quot;\&quot;;'],[0,'        if (!this.tileFullExtent || this.tileFullExtent.intersectsBounds(bounds)) {            '],[-1,''],[0,'            var center = bounds.getCenterLonLat();            '],[0,'            var info = this.getTileInfo(center);'],[0,'            var matrixId = this.matrix.identifier;'],[0,'            var dimensions = this.dimensions, params;'],[-1,''],[0,'            if (OpenLayers.Util.isArray(this.url)) {'],[0,'                url = this.selectUrl(['],[-1,'                    this.version, this.style, this.matrixSet,'],[-1,'                    this.matrix.identifier, info.row, info.col'],[-1,'                ].join(\&quot;,\&quot;), this.url);'],[-1,'            } else {'],[0,'                url = this.url;'],[-1,'            }'],[-1,''],[0,'            if (this.requestEncoding.toUpperCase() === \&quot;REST\&quot;) {'],[0,'                params = this.params;'],[0,'                if (url.indexOf(\&quot;{\&quot;) !== -1) {'],[0,'                    var template = url.replace(\/\\{\/g, \&quot;${\&quot;);'],[0,'                    var context = {'],[-1,'                        \/\/ spec does not make clear if capital S or not'],[-1,'                        style: this.style, Style: this.style,'],[-1,'                        TileMatrixSet: this.matrixSet,'],[-1,'                        TileMatrix: this.matrix.identifier,'],[-1,'                        TileRow: info.row,'],[-1,'                        TileCol: info.col'],[-1,'                    };'],[0,'                    if (dimensions) {'],[0,'                        var dimension, i;'],[0,'                        for (i=dimensions.length-1; i&gt;=0; --i) {'],[0,'                            dimension = dimensions[i];'],[0,'                            context[dimension] = params[dimension.toUpperCase()];'],[-1,'                        }'],[-1,'                    }'],[0,'                    url = OpenLayers.String.format(template, context);'],[-1,'                } else {'],[-1,'                    \/\/ include \'version\', \'layer\' and \'style\' in tile resource url'],[0,'                    var path = this.version + \&quot;\/\&quot; + this.layer + \&quot;\/\&quot; + this.style + \&quot;\/\&quot;;'],[-1,''],[-1,'                    \/\/ append optional dimension path elements'],[0,'                    if (dimensions) {'],[0,'                        for (var i=0; i&lt;dimensions.length; i++) {'],[0,'                            if (params[dimensions[i]]) {'],[0,'                                path = path + params[dimensions[i]] + \&quot;\/\&quot;;'],[-1,'                            }'],[-1,'                        }'],[-1,'                    }'],[-1,''],[-1,'                    \/\/ append other required path elements'],[0,'                    path = path + this.matrixSet + \&quot;\/\&quot; + this.matrix.identifier + '],[-1,'                        \&quot;\/\&quot; + info.row + \&quot;\/\&quot; + info.col + \&quot;.\&quot; + this.formatSuffix;'],[-1,''],[0,'                    if (!url.match(\/\\\/$\/)) {'],[0,'                        url = url + \&quot;\/\&quot;;'],[-1,'                    }'],[0,'                    url = url + path;'],[-1,'                }'],[0,'            } else if (this.requestEncoding.toUpperCase() === \&quot;KVP\&quot;) {'],[-1,''],[-1,'                \/\/ assemble all required parameters'],[0,'                params = {'],[-1,'                    SERVICE: \&quot;WMTS\&quot;,'],[-1,'                    REQUEST: \&quot;GetTile\&quot;,'],[-1,'                    VERSION: this.version,'],[-1,'                    LAYER: this.layer,'],[-1,'                    STYLE: this.style,'],[-1,'                    TILEMATRIXSET: this.matrixSet,'],[-1,'                    TILEMATRIX: this.matrix.identifier,'],[-1,'                    TILEROW: info.row,'],[-1,'                    TILECOL: info.col,'],[-1,'                    FORMAT: this.format'],[-1,'                };'],[0,'                url = OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this, [params]);'],[-1,''],[-1,'            }'],[-1,'        }'],[0,'        return url;    '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: mergeNewParams'],[-1,'     * Extend the existing layer &lt;params&gt; with new properties.  Tiles will be'],[-1,'     *     reloaded with updated params in the request.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * newParams - {Object} Properties to extend to existing &lt;params&gt;.'],[-1,'     *\/'],[-1,'    mergeNewParams: function(newParams) {'],[0,'        if (this.requestEncoding.toUpperCase() === \&quot;KVP\&quot;) {'],[0,'            return OpenLayers.Layer.Grid.prototype.mergeNewParams.apply('],[-1,'                this, [OpenLayers.Util.upperCaseObject(newParams)]'],[-1,'            );'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.WMTS\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/MapServer.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.MapServer'],[-1,' * Instances of OpenLayers.Layer.MapServer are used to display'],[-1,' * data from a MapServer CGI instance.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.MapServer = OpenLayers.Class(OpenLayers.Layer.Grid, {'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: DEFAULT_PARAMS'],[-1,'     * {Object} Hashtable of default parameter key\/value pairs '],[-1,'     *\/'],[-1,'    DEFAULT_PARAMS: {'],[-1,'        mode: \&quot;map\&quot;,'],[-1,'        map_imagetype: \&quot;png\&quot;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.MapServer'],[-1,'     * Create a new MapServer layer object'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} A name for the layer'],[-1,'     * url - {String} Base url for the MapServer CGI'],[-1,'     *       (e.g. http:\/\/www2.dmsolutions.ca\/cgi-bin\/mapserv)'],[-1,'     * params - {Object} An object with key\/value pairs representing the'],[-1,'     *          GetMap query string parameters and parameter values.'],[-1,'     * options - {Object} Hashtable of extra options to tag onto the layer'],[-1,'     *\/'],[-1,'    initialize: function(name, url, params, options) {'],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply(this, arguments);'],[-1,''],[0,'        this.params = OpenLayers.Util.applyDefaults('],[-1,'            this.params, this.DEFAULT_PARAMS'],[-1,'        );'],[-1,''],[-1,'        \/\/ unless explicitly set in options, if the layer is transparent, '],[-1,'        \/\/ it will be an overlay'],[0,'        if (options == null || options.isBaseLayer == null) {'],[0,'            this.isBaseLayer = ((this.params.transparent != \&quot;true\&quot;) &amp;&amp; '],[-1,'                                (this.params.transparent != true));'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clone'],[-1,'     * Create a clone of this layer'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.MapServer&gt;} An exact clone of this layer'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.MapServer(this.name,'],[-1,'                                           this.url,'],[-1,'                                           this.params,'],[-1,'                                           this.getOptions());'],[-1,'        }'],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);'],[-1,''],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[-1,''],[0,'        return obj;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     * Return a query string for this layer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} A bounds representing the bbox '],[-1,'     *                                for the request'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} A string with the layer\'s url and parameters and also '],[-1,'     *          the passed-in bounds and appropriate tile size specified '],[-1,'     *          as parameters.'],[-1,'     *\/'],[-1,'    getURL: function (bounds) {'],[0,'        bounds = this.adjustBounds(bounds);'],[-1,'        \/\/ Make a list, so that getFullRequestString uses literal \&quot;,\&quot; '],[0,'        var extent = [bounds.left, bounds. bottom, bounds.right, bounds.top];'],[-1,''],[0,'        var imageSize = this.getImageSize(); '],[-1,'        '],[-1,'        \/\/ make lists, so that literal \',\'s are used '],[0,'        var url = this.getFullRequestString('],[-1,'                     {mapext:   extent,'],[-1,'                      imgext:   extent,'],[-1,'                      map_size: [imageSize.w, imageSize.h],'],[-1,'                      imgx:     imageSize.w \/ 2,'],[-1,'                      imgy:     imageSize.h \/ 2,'],[-1,'                      imgxy:    [imageSize.w, imageSize.h]'],[-1,'                      });'],[-1,'        '],[0,'        return url;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: getFullRequestString'],[-1,'     * combine the layer\'s url with its params and these newParams. '],[-1,'     *   '],[-1,'     * Parameters:'],[-1,'     * newParams - {Object} New parameters that should be added to the '],[-1,'     *                      request string.'],[-1,'     * altUrl - {String} (optional) Replace the URL in the full request  '],[-1,'     *                              string with the provided URL.'],[-1,'     * '],[-1,'     * Returns: '],[-1,'     * {String} A string with the layer\'s url and parameters embedded in it.'],[-1,'     *\/'],[-1,'    getFullRequestString:function(newParams, altUrl) {'],[-1,'        \/\/ use layer\'s url unless altUrl passed in'],[0,'        var url = (altUrl == null) ? this.url : altUrl;'],[-1,'        '],[-1,'        \/\/ create a new params hashtable with all the layer params and the '],[-1,'        \/\/ new params together. then convert to string'],[0,'        var allParams = OpenLayers.Util.extend({}, this.params);'],[0,'        allParams = OpenLayers.Util.extend(allParams, newParams);'],[0,'        var paramsString = OpenLayers.Util.getParameterString(allParams);'],[-1,'        '],[-1,'        \/\/ if url is not a string, it should be an array of strings, '],[-1,'        \/\/ in which case we will deterministically select one of them in '],[-1,'        \/\/ order to evenly distribute requests to different urls.'],[0,'        if (OpenLayers.Util.isArray(url)) {'],[0,'            url = this.selectUrl(paramsString, url);'],[-1,'        }   '],[-1,'        '],[-1,'        \/\/ ignore parameters that are already in the url search string'],[0,'        var urlParams = OpenLayers.Util.upperCaseObject('],[-1,'                            OpenLayers.Util.getParameters(url));'],[0,'        for(var key in allParams) {'],[0,'            if(key.toUpperCase() in urlParams) {'],[0,'                delete allParams[key];'],[-1,'            }'],[-1,'        }'],[0,'        paramsString = OpenLayers.Util.getParameterString(allParams);'],[-1,'        '],[-1,'        \/\/ requestString always starts with url'],[0,'        var requestString = url;        '],[-1,''],[-1,'        \/\/ MapServer needs \'+\' seperating things like bounds\/height\/width.'],[-1,'        \/\/   Since typically this is URL encoded, we use a slight hack: we'],[-1,'        \/\/  depend on the list-like functionality of getParameterString to'],[-1,'        \/\/  leave \',\' only in the case of list items (since otherwise it is'],[-1,'        \/\/  encoded) then do a regular expression replace on the , characters'],[-1,'        \/\/  to \'+\''],[-1,'        \/\/'],[0,'        paramsString = paramsString.replace(\/,\/g, \&quot;+\&quot;);'],[-1,'        '],[0,'        if (paramsString != \&quot;\&quot;) {'],[0,'            var lastServerChar = url.charAt(url.length - 1);'],[0,'            if ((lastServerChar == \&quot;&amp;\&quot;) || (lastServerChar == \&quot;?\&quot;)) {'],[0,'                requestString += paramsString;'],[-1,'            } else {'],[0,'                if (url.indexOf(\'?\') == -1) {'],[-1,'                    \/\/serverPath has no ? -- add one'],[0,'                    requestString += \'?\' + paramsString;'],[-1,'                } else {'],[-1,'                    \/\/serverPath contains ?, so must already have paramsString at the end'],[0,'                    requestString += \'&amp;\' + paramsString;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return requestString;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.MapServer\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Renderer\/VML.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Renderer\/Elements.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Renderer.VML'],[-1,' * Render vector features in browsers with VML capability.  Construct a new'],[-1,' * VML renderer with the &lt;OpenLayers.Renderer.VML&gt; constructor.'],[-1,' * '],[-1,' * Note that for all calculations in this class, we use (num | 0) to truncate a '],[-1,' * float value to an integer. This is done because it seems that VML doesn\'t '],[-1,' * support float values.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Renderer.Elements&gt;'],[-1,' *\/'],[1,'OpenLayers.Renderer.VML = OpenLayers.Class(OpenLayers.Renderer.Elements, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: xmlns'],[-1,'     * {String} XML Namespace URN'],[-1,'     *\/'],[-1,'    xmlns: \&quot;urn:schemas-microsoft-com:vml\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: symbolCache'],[-1,'     * {DOMElement} node holding symbols. This hash is keyed by symbol name,'],[-1,'     *     and each value is a hash with a \&quot;path\&quot; and an \&quot;extent\&quot; property.'],[-1,'     *\/'],[-1,'    symbolCache: {},'],[-1,''],[-1,'    \/**'],[-1,'     * Property: offset'],[-1,'     * {Object} Hash with \&quot;x\&quot; and \&quot;y\&quot; properties'],[-1,'     *\/'],[-1,'    offset: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Renderer.VML'],[-1,'     * Create a new VML renderer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * containerID - {String} The id for the element that contains the renderer'],[-1,'     *\/'],[-1,'    initialize: function(containerID) {'],[0,'        if (!this.supported()) { '],[0,'            return; '],[-1,'        }'],[0,'        if (!document.namespaces.olv) {'],[0,'            document.namespaces.add(\&quot;olv\&quot;, this.xmlns);'],[0,'            var style = document.createStyleSheet();'],[0,'            var shapes = [\'shape\',\'rect\', \'oval\', \'fill\', \'stroke\', \'imagedata\', \'group\',\'textbox\']; '],[0,'            for (var i = 0, len = shapes.length; i &lt; len; i++) {'],[-1,''],[0,'                style.addRule(\'olv\\\\:\' + shapes[i], \&quot;behavior: url(#default#VML); \&quot; +'],[-1,'                              \&quot;position: absolute; display: inline-block;\&quot;);'],[-1,'            }                  '],[-1,'        }'],[-1,'        '],[0,'        OpenLayers.Renderer.Elements.prototype.initialize.apply(this, '],[-1,'                                                                arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: supported'],[-1,'     * Determine whether a browser supports this renderer.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The browser supports the VML renderer'],[-1,'     *\/'],[-1,'    supported: function() {'],[0,'        return !!(document.namespaces);'],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'     * Method: setExtent'],[-1,'     * Set the renderer\'s extent'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * extent - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     * resolutionChanged - {Boolean}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} true to notify the layer that the new extent does not exceed'],[-1,'     *     the coordinate range, and the features will not need to be redrawn.'],[-1,'     *\/'],[-1,'    setExtent: function(extent, resolutionChanged) {'],[0,'        var coordSysUnchanged = OpenLayers.Renderer.Elements.prototype.setExtent.apply(this, arguments);'],[0,'        var resolution = this.getResolution();'],[-1,'    '],[0,'        var left = (extent.left\/resolution) | 0;'],[0,'        var top = (extent.top\/resolution - this.size.h) | 0;'],[0,'        if (resolutionChanged || !this.offset) {'],[0,'            this.offset = {x: left, y: top};'],[0,'            left = 0;'],[0,'            top = 0;'],[-1,'        } else {'],[0,'            left = left - this.offset.x;'],[0,'            top = top - this.offset.y;'],[-1,'        }'],[-1,''],[-1,'        '],[0,'        var org = (left - this.xOffset) + \&quot; \&quot; + top;'],[0,'        this.root.coordorigin = org;'],[0,'        var roots = [this.root, this.vectorRoot, this.textRoot];'],[0,'        var root;'],[0,'        for(var i=0, len=roots.length; i&lt;len; ++i) {'],[0,'            root = roots[i];'],[-1,''],[0,'            var size = this.size.w + \&quot; \&quot; + this.size.h;'],[0,'            root.coordsize = size;'],[-1,'            '],[-1,'        }'],[-1,'        \/\/ flip the VML display Y axis upside down so it '],[-1,'        \/\/ matches the display Y axis of the map'],[0,'        this.root.style.flip = \&quot;y\&quot;;'],[-1,'        '],[0,'        return coordSysUnchanged;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: setSize'],[-1,'     * Set the size of the drawing surface'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * size - {&lt;OpenLayers.Size&gt;} the size of the drawing surface'],[-1,'     *\/'],[-1,'    setSize: function(size) {'],[0,'        OpenLayers.Renderer.prototype.setSize.apply(this, arguments);'],[-1,'        '],[-1,'        \/\/ setting width and height on all roots to avoid flicker which we'],[-1,'        \/\/ would get with 100% width and height on child roots'],[0,'        var roots = ['],[-1,'            this.rendererRoot,'],[-1,'            this.root,'],[-1,'            this.vectorRoot,'],[-1,'            this.textRoot'],[-1,'        ];'],[0,'        var w = this.size.w + \&quot;px\&quot;;'],[0,'        var h = this.size.h + \&quot;px\&quot;;'],[0,'        var root;'],[0,'        for(var i=0, len=roots.length; i&lt;len; ++i) {'],[0,'            root = roots[i];'],[0,'            root.style.width = w;'],[0,'            root.style.height = h;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getNodeType'],[-1,'     * Get the node type for a geometry and style'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * style - {Object}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The corresponding node type for the specified geometry'],[-1,'     *\/'],[-1,'    getNodeType: function(geometry, style) {'],[0,'        var nodeType = null;'],[0,'        switch (geometry.CLASS_NAME) {'],[-1,'            case \&quot;OpenLayers.Geometry.Point\&quot;:'],[0,'                if (style.externalGraphic) {'],[0,'                    nodeType = \&quot;olv:rect\&quot;;'],[0,'                } else if (this.isComplexSymbol(style.graphicName)) {'],[0,'                    nodeType = \&quot;olv:shape\&quot;;'],[-1,'                } else {'],[0,'                    nodeType = \&quot;olv:oval\&quot;;'],[-1,'                }'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.Rectangle\&quot;:'],[0,'                nodeType = \&quot;olv:rect\&quot;;'],[0,'                break;'],[-1,'            case \&quot;OpenLayers.Geometry.LineString\&quot;:'],[-1,'            case \&quot;OpenLayers.Geometry.LinearRing\&quot;:'],[-1,'            case \&quot;OpenLayers.Geometry.Polygon\&quot;:'],[-1,'            case \&quot;OpenLayers.Geometry.Curve\&quot;:'],[0,'                nodeType = \&quot;olv:shape\&quot;;'],[0,'                break;'],[-1,'            default:'],[0,'                break;'],[-1,'        }'],[0,'        return nodeType;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setStyle'],[-1,'     * Use to set all the style attributes to a VML node.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} An VML element to decorate'],[-1,'     * style - {Object}'],[-1,'     * options - {Object} Currently supported options include '],[-1,'     *                              \'isFilled\' {Boolean} and'],[-1,'     *                              \'isStroked\' {Boolean}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     *\/'],[-1,'    setStyle: function(node, style, options, geometry) {'],[0,'        style = style  || node._style;'],[0,'        options = options || node._options;'],[0,'        var fillColor = style.fillColor;'],[-1,''],[0,'        var title = style.title || style.graphicTitle;'],[0,'        if (title) {'],[0,'            node.title = title;'],[-1,'        } '],[-1,''],[0,'        if (node._geometryClass === \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'            if (style.externalGraphic) {'],[0,'                options.isFilled = true;'],[0,'                var width = style.graphicWidth || style.graphicHeight;'],[0,'                var height = style.graphicHeight || style.graphicWidth;'],[0,'                width = width ? width : style.pointRadius*2;'],[0,'                height = height ? height : style.pointRadius*2;'],[-1,''],[0,'                var resolution = this.getResolution();'],[0,'                var xOffset = (style.graphicXOffset != undefined) ?'],[-1,'                    style.graphicXOffset : -(0.5 * width);'],[0,'                var yOffset = (style.graphicYOffset != undefined) ?'],[-1,'                    style.graphicYOffset : -(0.5 * height);'],[-1,'                '],[0,'                node.style.left = ((((geometry.x - this.featureDx)\/resolution - this.offset.x)+xOffset) | 0) + \&quot;px\&quot;;'],[0,'                node.style.top = (((geometry.y\/resolution - this.offset.y)-(yOffset+height)) | 0) + \&quot;px\&quot;;'],[0,'                node.style.width = width + \&quot;px\&quot;;'],[0,'                node.style.height = height + \&quot;px\&quot;;'],[0,'                node.style.flip = \&quot;y\&quot;;'],[-1,'                '],[-1,'                \/\/ modify fillColor and options for stroke styling below'],[0,'                fillColor = \&quot;none\&quot;;'],[0,'                options.isStroked = false;'],[0,'            } else if (this.isComplexSymbol(style.graphicName)) {'],[0,'                var cache = this.importSymbol(style.graphicName);'],[0,'                node.path = cache.path;'],[0,'                node.coordorigin = cache.left + \&quot;,\&quot; + cache.bottom;'],[0,'                var size = cache.size;'],[0,'                node.coordsize = size + \&quot;,\&quot; + size;        '],[0,'                this.drawCircle(node, geometry, style.pointRadius);'],[0,'                node.style.flip = \&quot;y\&quot;;'],[-1,'            } else {'],[0,'                this.drawCircle(node, geometry, style.pointRadius);'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ fill '],[0,'        if (options.isFilled) { '],[0,'            node.fillcolor = fillColor; '],[-1,'        } else { '],[0,'            node.filled = \&quot;false\&quot;; '],[-1,'        }'],[0,'        var fills = node.getElementsByTagName(\&quot;fill\&quot;);'],[0,'        var fill = (fills.length == 0) ? null : fills[0];'],[0,'        if (!options.isFilled) {'],[0,'            if (fill) {'],[0,'                node.removeChild(fill);'],[-1,'            }'],[-1,'        } else {'],[0,'            if (!fill) {'],[0,'                fill = this.createNode(\'olv:fill\', node.id + \&quot;_fill\&quot;);'],[-1,'            }'],[0,'            fill.opacity = style.fillOpacity;'],[-1,''],[0,'            if (node._geometryClass === \&quot;OpenLayers.Geometry.Point\&quot; &amp;&amp;'],[-1,'                    style.externalGraphic) {'],[-1,''],[-1,'                \/\/ override fillOpacity'],[0,'                if (style.graphicOpacity) {'],[0,'                    fill.opacity = style.graphicOpacity;'],[-1,'                }'],[-1,'                '],[0,'                fill.src = style.externalGraphic;'],[0,'                fill.type = \&quot;frame\&quot;;'],[-1,'                '],[0,'                if (!(style.graphicWidth &amp;&amp; style.graphicHeight)) {'],[0,'                  fill.aspect = \&quot;atmost\&quot;;'],[-1,'                }                '],[-1,'            }'],[0,'            if (fill.parentNode != node) {'],[0,'                node.appendChild(fill);'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ additional rendering for rotated graphics or symbols'],[0,'        var rotation = style.rotation;'],[0,'        if ((rotation !== undefined || node._rotation !== undefined)) {'],[0,'            node._rotation = rotation;'],[0,'            if (style.externalGraphic) {'],[0,'                this.graphicRotate(node, xOffset, yOffset, style);'],[-1,'                \/\/ make the fill fully transparent, because we now have'],[-1,'                \/\/ the graphic as imagedata element. We cannot just remove'],[-1,'                \/\/ the fill, because this is part of the hack described'],[-1,'                \/\/ in graphicRotate'],[0,'                fill.opacity = 0;'],[0,'            } else if(node._geometryClass === \&quot;OpenLayers.Geometry.Point\&quot;) {'],[0,'                node.style.rotation = rotation || 0;'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ stroke '],[0,'        var strokes = node.getElementsByTagName(\&quot;stroke\&quot;);'],[0,'        var stroke = (strokes.length == 0) ? null : strokes[0];'],[0,'        if (!options.isStroked) {'],[0,'            node.stroked = false;'],[0,'            if (stroke) {'],[0,'                stroke.on = false;'],[-1,'            }'],[-1,'        } else {'],[0,'            if (!stroke) {'],[0,'                stroke = this.createNode(\'olv:stroke\', node.id + \&quot;_stroke\&quot;);'],[0,'                node.appendChild(stroke);'],[-1,'            }'],[0,'            stroke.on = true;'],[0,'            stroke.color = style.strokeColor; '],[0,'            stroke.weight = style.strokeWidth + \&quot;px\&quot;; '],[0,'            stroke.opacity = style.strokeOpacity;'],[0,'            stroke.endcap = style.strokeLinecap == \'butt\' ? \'flat\' :'],[-1,'                (style.strokeLinecap || \'round\');'],[0,'            if (style.strokeDashstyle) {'],[0,'                stroke.dashstyle = this.dashStyle(style);'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        if (style.cursor != \&quot;inherit\&quot; &amp;&amp; style.cursor != null) {'],[0,'            node.style.cursor = style.cursor;'],[-1,'        }'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: graphicRotate'],[-1,'     * If a point is to be styled with externalGraphic and rotation, VML fills'],[-1,'     * cannot be used to display the graphic, because rotation of graphic'],[-1,'     * fills is not supported by the VML implementation of Internet Explorer.'],[-1,'     * This method creates a olv:imagedata element inside the VML node,'],[-1,'     * DXImageTransform.Matrix and BasicImage filters for rotation and'],[-1,'     * opacity, and a 3-step hack to remove rendering artefacts from the'],[-1,'     * graphic and preserve the ability of graphics to trigger events.'],[-1,'     * Finally, OpenLayers methods are used to determine the correct'],[-1,'     * insertion point of the rotated image, because DXImageTransform.Matrix'],[-1,'     * does the rotation without the ability to specify a rotation center'],[-1,'     * point.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node    - {DOMElement}'],[-1,'     * xOffset - {Number} rotation center relative to image, x coordinate'],[-1,'     * yOffset - {Number} rotation center relative to image, y coordinate'],[-1,'     * style   - {Object}'],[-1,'     *\/'],[-1,'    graphicRotate: function(node, xOffset, yOffset, style) {'],[0,'        var style = style || node._style;'],[0,'        var rotation = style.rotation || 0;'],[-1,'        '],[0,'        var aspectRatio, size;'],[0,'        if (!(style.graphicWidth &amp;&amp; style.graphicHeight)) {'],[-1,'            \/\/ load the image to determine its size'],[0,'            var img = new Image();'],[0,'            img.onreadystatechange = OpenLayers.Function.bind(function() {'],[0,'                if(img.readyState == \&quot;complete\&quot; ||'],[-1,'                        img.readyState == \&quot;interactive\&quot;) {'],[0,'                    aspectRatio = img.width \/ img.height;'],[0,'                    size = Math.max(style.pointRadius * 2, '],[-1,'                        style.graphicWidth || 0,'],[-1,'                        style.graphicHeight || 0);'],[0,'                    xOffset = xOffset * aspectRatio;'],[0,'                    style.graphicWidth = size * aspectRatio;'],[0,'                    style.graphicHeight = size;'],[0,'                    this.graphicRotate(node, xOffset, yOffset, style);'],[-1,'                }'],[-1,'            }, this);'],[0,'            img.src = style.externalGraphic;'],[-1,'            '],[-1,'            \/\/ will be called again by the onreadystate handler'],[0,'            return;'],[-1,'        } else {'],[0,'            size = Math.max(style.graphicWidth, style.graphicHeight);'],[0,'            aspectRatio = style.graphicWidth \/ style.graphicHeight;'],[-1,'        }'],[-1,'        '],[0,'        var width = Math.round(style.graphicWidth || size * aspectRatio);'],[0,'        var height = Math.round(style.graphicHeight || size);'],[0,'        node.style.width = width + \&quot;px\&quot;;'],[0,'        node.style.height = height + \&quot;px\&quot;;'],[-1,'        '],[-1,'        \/\/ Three steps are required to remove artefacts for images with'],[-1,'        \/\/ transparent backgrounds (resulting from using DXImageTransform'],[-1,'        \/\/ filters on svg objects), while preserving awareness for browser'],[-1,'        \/\/ events on images:'],[-1,'        \/\/ - Use the fill as usual (like for unrotated images) to handle'],[-1,'        \/\/   events'],[-1,'        \/\/ - specify an imagedata element with the same src as the fill'],[-1,'        \/\/ - style the imagedata element with an AlphaImageLoader filter'],[-1,'        \/\/   with empty src'],[0,'        var image = document.getElementById(node.id + \&quot;_image\&quot;);'],[0,'        if (!image) {'],[0,'            image = this.createNode(\&quot;olv:imagedata\&quot;, node.id + \&quot;_image\&quot;);'],[0,'            node.appendChild(image);'],[-1,'        }'],[0,'        image.style.width = width + \&quot;px\&quot;;'],[0,'        image.style.height = height + \&quot;px\&quot;;'],[0,'        image.src = style.externalGraphic;'],[0,'        image.style.filter ='],[-1,'            \&quot;progid:DXImageTransform.Microsoft.AlphaImageLoader(\&quot; + '],[-1,'            \&quot;src=\'\', sizingMethod=\'scale\')\&quot;;'],[-1,''],[0,'        var rot = rotation * Math.PI \/ 180;'],[0,'        var sintheta = Math.sin(rot);'],[0,'        var costheta = Math.cos(rot);'],[-1,''],[-1,'        \/\/ do the rotation on the image'],[0,'        var filter ='],[-1,'            \&quot;progid:DXImageTransform.Microsoft.Matrix(M11=\&quot; + costheta +'],[-1,'            \&quot;,M12=\&quot; + (-sintheta) + \&quot;,M21=\&quot; + sintheta + \&quot;,M22=\&quot; + costheta +'],[-1,'            \&quot;,SizingMethod=\'auto expand\')\\n\&quot;;'],[-1,''],[-1,'        \/\/ set the opacity (needed for the imagedata)'],[0,'        var opacity = style.graphicOpacity || style.fillOpacity;'],[0,'        if (opacity &amp;&amp; opacity != 1) {'],[0,'            filter += '],[-1,'                \&quot;progid:DXImageTransform.Microsoft.BasicImage(opacity=\&quot; + '],[-1,'                opacity+\&quot;)\\n\&quot;;'],[-1,'        }'],[0,'        node.style.filter = filter;'],[-1,''],[-1,'        \/\/ do the rotation again on a box, so we know the insertion point'],[0,'        var centerPoint = new OpenLayers.Geometry.Point(-xOffset, -yOffset);'],[0,'        var imgBox = new OpenLayers.Bounds(0, 0, width, height).toGeometry();'],[0,'        imgBox.rotate(style.rotation, centerPoint);'],[0,'        var imgBounds = imgBox.getBounds();'],[-1,''],[0,'        node.style.left = Math.round('],[-1,'            parseInt(node.style.left) + imgBounds.left) + \&quot;px\&quot;;'],[0,'        node.style.top = Math.round('],[-1,'            parseInt(node.style.top) - imgBounds.bottom) + \&quot;px\&quot;;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: postDraw'],[-1,'     * Does some node postprocessing to work around browser issues:'],[-1,'     * - Some versions of Internet Explorer seem to be unable to set fillcolor'],[-1,'     *   and strokecolor to \&quot;none\&quot; correctly before the fill node is appended'],[-1,'     *   to a visible vml node. This method takes care of that and sets'],[-1,'     *   fillcolor and strokecolor again if needed.'],[-1,'     * - In some cases, a node won\'t become visible after being drawn. Setting'],[-1,'     *   style.visibility to \&quot;visible\&quot; works around that.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     *\/'],[-1,'    postDraw: function(node) {'],[0,'        node.style.visibility = \&quot;visible\&quot;;'],[0,'        var fillColor = node._style.fillColor;'],[0,'        var strokeColor = node._style.strokeColor;'],[0,'        if (fillColor == \&quot;none\&quot; &amp;&amp;'],[-1,'                node.fillcolor != fillColor) {'],[0,'            node.fillcolor = fillColor;'],[-1,'        }'],[0,'        if (strokeColor == \&quot;none\&quot; &amp;&amp;'],[-1,'                node.strokecolor != strokeColor) {'],[0,'            node.strokecolor = strokeColor;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: setNodeDimension'],[-1,'     * Get the geometry\'s bounds, convert it to our vml coordinate system, '],[-1,'     * then set the node\'s position, size, and local coordinate system.'],[-1,'     *   '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     *\/'],[-1,'    setNodeDimension: function(node, geometry) {'],[-1,''],[0,'        var bbox = geometry.getBounds();'],[0,'        if(bbox) {'],[0,'            var resolution = this.getResolution();'],[-1,'        '],[0,'            var scaledBox = '],[-1,'                new OpenLayers.Bounds(((bbox.left - this.featureDx)\/resolution - this.offset.x) | 0,'],[-1,'                                      (bbox.bottom\/resolution - this.offset.y) | 0,'],[-1,'                                      ((bbox.right - this.featureDx)\/resolution - this.offset.x) | 0,'],[-1,'                                      (bbox.top\/resolution - this.offset.y) | 0);'],[-1,'            '],[-1,'            \/\/ Set the internal coordinate system to draw the path'],[0,'            node.style.left = scaledBox.left + \&quot;px\&quot;;'],[0,'            node.style.top = scaledBox.top + \&quot;px\&quot;;'],[0,'            node.style.width = scaledBox.getWidth() + \&quot;px\&quot;;'],[0,'            node.style.height = scaledBox.getHeight() + \&quot;px\&quot;;'],[-1,'    '],[0,'            node.coordorigin = scaledBox.left + \&quot; \&quot; + scaledBox.top;'],[0,'            node.coordsize = scaledBox.getWidth()+ \&quot; \&quot; + scaledBox.getHeight();'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: dashStyle'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * style - {Object}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} A VML compliant \'stroke-dasharray\' value'],[-1,'     *\/'],[-1,'    dashStyle: function(style) {'],[0,'        var dash = style.strokeDashstyle;'],[0,'        switch (dash) {'],[-1,'            case \'solid\':'],[-1,'            case \'dot\':'],[-1,'            case \'dash\':'],[-1,'            case \'dashdot\':'],[-1,'            case \'longdash\':'],[-1,'            case \'longdashdot\':'],[0,'                return dash;'],[-1,'            default:'],[-1,'                \/\/ very basic guessing of dash style patterns'],[0,'                var parts = dash.split(\/[ ,]\/);'],[0,'                if (parts.length == 2) {'],[0,'                    if (1*parts[0] &gt;= 2*parts[1]) {'],[0,'                        return \&quot;longdash\&quot;;'],[-1,'                    }'],[0,'                    return (parts[0] == 1 || parts[1] == 1) ? \&quot;dot\&quot; : \&quot;dash\&quot;;'],[0,'                } else if (parts.length == 4) {'],[0,'                    return (1*parts[0] &gt;= 2*parts[1]) ? \&quot;longdashdot\&quot; :'],[-1,'                        \&quot;dashdot\&quot;;'],[-1,'                }'],[0,'                return \&quot;solid\&quot;;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createNode'],[-1,'     * Create a new node'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * type - {String} Kind of node to draw'],[-1,'     * id - {String} Id for node'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} A new node of the given type and id'],[-1,'     *\/'],[-1,'    createNode: function(type, id) {'],[0,'        var node = document.createElement(type);'],[0,'        if (id) {'],[0,'            node.id = id;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ IE hack to make elements unselectable, to prevent \'blue flash\''],[-1,'        \/\/ while dragging vectors; #1410'],[0,'        node.unselectable = \'on\';'],[0,'        node.onselectstart = OpenLayers.Function.False;'],[-1,'        '],[0,'        return node;    '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: nodeTypeCompare'],[-1,'     * Determine whether a node is of a given type'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} An VML element'],[-1,'     * type - {String} Kind of node'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Whether or not the specified node is of the specified type'],[-1,'     *\/'],[-1,'    nodeTypeCompare: function(node, type) {'],[-1,''],[-1,'        \/\/split type'],[0,'        var subType = type;'],[0,'        var splitIndex = subType.indexOf(\&quot;:\&quot;);'],[0,'        if (splitIndex != -1) {'],[0,'            subType = subType.substr(splitIndex+1);'],[-1,'        }'],[-1,''],[-1,'        \/\/split nodeName'],[0,'        var nodeName = node.nodeName;'],[0,'        splitIndex = nodeName.indexOf(\&quot;:\&quot;);'],[0,'        if (splitIndex != -1) {'],[0,'            nodeName = nodeName.substr(splitIndex+1);'],[-1,'        }'],[-1,''],[0,'        return (subType == nodeName);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createRenderRoot'],[-1,'     * Create the renderer root'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} The specific render engine\'s root element'],[-1,'     *\/'],[-1,'    createRenderRoot: function() {'],[0,'        return this.nodeFactory(this.container.id + \&quot;_vmlRoot\&quot;, \&quot;div\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createRoot'],[-1,'     * Create the main root element'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * suffix - {String} suffix to append to the id'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    createRoot: function(suffix) {'],[0,'        return this.nodeFactory(this.container.id + suffix, \&quot;olv:group\&quot;);'],[-1,'    },'],[-1,'    '],[-1,'    \/**************************************'],[-1,'     *                                    *'],[-1,'     *     GEOMETRY DRAWING FUNCTIONS     *'],[-1,'     *                                    *'],[-1,'     **************************************\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawPoint'],[-1,'     * Render a point'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or false if the point could not be drawn'],[-1,'     *\/'],[-1,'    drawPoint: function(node, geometry) {'],[0,'        return this.drawCircle(node, geometry, 1);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawCircle'],[-1,'     * Render a circle.'],[-1,'     * Size and Center a circle given geometry (x,y center) and radius'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * radius - {float}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement} or false if the circle could not ne drawn'],[-1,'     *\/'],[-1,'    drawCircle: function(node, geometry, radius) {'],[0,'        if(!isNaN(geometry.x)&amp;&amp; !isNaN(geometry.y)) {'],[0,'            var resolution = this.getResolution();'],[-1,''],[0,'            node.style.left = ((((geometry.x - this.featureDx) \/resolution - this.offset.x) | 0) - radius) + \&quot;px\&quot;;'],[0,'            node.style.top = (((geometry.y \/resolution - this.offset.y) | 0) - radius) + \&quot;px\&quot;;'],[-1,'    '],[0,'            var diameter = radius * 2;'],[-1,'            '],[0,'            node.style.width = diameter + \&quot;px\&quot;;'],[0,'            node.style.height = diameter + \&quot;px\&quot;;'],[0,'            return node;'],[-1,'        }'],[0,'        return false;'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawLineString'],[-1,'     * Render a linestring.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    drawLineString: function(node, geometry) {'],[0,'        return this.drawLine(node, geometry, false);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawLinearRing'],[-1,'     * Render a linearring'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    drawLinearRing: function(node, geometry) {'],[0,'        return this.drawLine(node, geometry, true);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: DrawLine'],[-1,'     * Render a line.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * closeLine - {Boolean} Close the line? (make it a ring?)'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    drawLine: function(node, geometry, closeLine) {'],[-1,''],[0,'        this.setNodeDimension(node, geometry);'],[-1,''],[0,'        var resolution = this.getResolution();'],[0,'        var numComponents = geometry.components.length;'],[0,'        var parts = new Array(numComponents);'],[-1,''],[0,'        var comp, x, y;'],[0,'        for (var i = 0; i &lt; numComponents; i++) {'],[0,'            comp = geometry.components[i];'],[0,'            x = ((comp.x - this.featureDx)\/resolution - this.offset.x) | 0;'],[0,'            y = (comp.y\/resolution - this.offset.y) | 0;'],[0,'            parts[i] = \&quot; \&quot; + x + \&quot;,\&quot; + y + \&quot; l \&quot;;'],[-1,'        }'],[0,'        var end = (closeLine) ? \&quot; x e\&quot; : \&quot; e\&quot;;'],[0,'        node.path = \&quot;m\&quot; + parts.join(\&quot;\&quot;) + end;'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawPolygon'],[-1,'     * Render a polygon'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    drawPolygon: function(node, geometry) {'],[0,'        this.setNodeDimension(node, geometry);'],[-1,''],[0,'        var resolution = this.getResolution();'],[-1,'    '],[0,'        var path = [];'],[0,'        var j, jj, points, area, first, second, i, ii, comp, pathComp, x, y;'],[0,'        for (j=0, jj=geometry.components.length; j&lt;jj; j++) {'],[0,'            path.push(\&quot;m\&quot;);'],[0,'            points = geometry.components[j].components;'],[-1,'            \/\/ we only close paths of interior rings with area'],[0,'            area = (j === 0);'],[0,'            first = null;'],[0,'            second = null;'],[0,'            for (i=0, ii=points.length; i&lt;ii; i++) {'],[0,'                comp = points[i];'],[0,'                x = ((comp.x - this.featureDx) \/ resolution - this.offset.x) | 0;'],[0,'                y = (comp.y \/ resolution - this.offset.y) | 0;'],[0,'                pathComp = \&quot; \&quot; + x + \&quot;,\&quot; + y;'],[0,'                path.push(pathComp);'],[0,'                if (i==0) {'],[0,'                    path.push(\&quot; l\&quot;);'],[-1,'                }'],[0,'                if (!area) {'],[-1,'                    \/\/ IE improperly renders sub-paths that have no area.'],[-1,'                    \/\/ Instead of checking the area of every ring, we confirm'],[-1,'                    \/\/ the ring has at least three distinct points.  This does'],[-1,'                    \/\/ not catch all non-zero area cases, but it greatly improves'],[-1,'                    \/\/ interior ring digitizing and is a minor performance hit'],[-1,'                    \/\/ when rendering rings with many points.'],[0,'                    if (!first) {'],[0,'                        first = pathComp;'],[0,'                    } else if (first != pathComp) {'],[0,'                        if (!second) {'],[0,'                            second = pathComp;'],[0,'                        } else if (second != pathComp) {'],[-1,'                            \/\/ stop looking'],[0,'                            area = true;'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            path.push(area ? \&quot; x \&quot; : \&quot; \&quot;);'],[-1,'        }'],[0,'        path.push(\&quot;e\&quot;);'],[0,'        node.path = path.join(\&quot;\&quot;);'],[0,'        return node;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: drawRectangle'],[-1,'     * Render a rectangle'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    drawRectangle: function(node, geometry) {'],[0,'        var resolution = this.getResolution();'],[-1,'    '],[0,'        node.style.left = (((geometry.x - this.featureDx)\/resolution - this.offset.x) | 0) + \&quot;px\&quot;;'],[0,'        node.style.top = ((geometry.y\/resolution - this.offset.y) | 0) + \&quot;px\&quot;;'],[0,'        node.style.width = ((geometry.width\/resolution) | 0) + \&quot;px\&quot;;'],[0,'        node.style.height = ((geometry.height\/resolution) | 0) + \&quot;px\&quot;;'],[-1,'        '],[0,'        return node;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawText'],[-1,'     * This method is only called by the renderer itself.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * featureId - {String}'],[-1,'     * style -'],[-1,'     * location - {&lt;OpenLayers.Geometry.Point&gt;}'],[-1,'     *\/'],[-1,'    drawText: function(featureId, style, location) {'],[0,'        var label = this.nodeFactory(featureId + this.LABEL_ID_SUFFIX, \&quot;olv:rect\&quot;);'],[0,'        var textbox = this.nodeFactory(featureId + this.LABEL_ID_SUFFIX + \&quot;_textbox\&quot;, \&quot;olv:textbox\&quot;);'],[-1,'        '],[0,'        var resolution = this.getResolution();'],[0,'        label.style.left = (((location.x - this.featureDx)\/resolution - this.offset.x) | 0) + \&quot;px\&quot;;'],[0,'        label.style.top = ((location.y\/resolution - this.offset.y) | 0) + \&quot;px\&quot;;'],[0,'        label.style.flip = \&quot;y\&quot;;'],[-1,''],[0,'        textbox.innerText = style.label;'],[-1,''],[0,'        if (style.cursor != \&quot;inherit\&quot; &amp;&amp; style.cursor != null) {'],[0,'            textbox.style.cursor = style.cursor;'],[-1,'        }'],[0,'        if (style.fontColor) {'],[0,'            textbox.style.color = style.fontColor;'],[-1,'        }'],[0,'        if (style.fontOpacity) {'],[0,'            textbox.style.filter = \'alpha(opacity=\' + (style.fontOpacity * 100) + \')\';'],[-1,'        }'],[0,'        if (style.fontFamily) {'],[0,'            textbox.style.fontFamily = style.fontFamily;'],[-1,'        }'],[0,'        if (style.fontSize) {'],[0,'            textbox.style.fontSize = style.fontSize;'],[-1,'        }'],[0,'        if (style.fontWeight) {'],[0,'            textbox.style.fontWeight = style.fontWeight;'],[-1,'        }'],[0,'        if (style.fontStyle) {'],[0,'            textbox.style.fontStyle = style.fontStyle;'],[-1,'        }'],[0,'        if(style.labelSelect === true) {'],[0,'            label._featureId = featureId;'],[0,'            textbox._featureId = featureId;'],[0,'            textbox._geometry = location;'],[0,'            textbox._geometryClass = location.CLASS_NAME;'],[-1,'        }'],[0,'        textbox.style.whiteSpace = \&quot;nowrap\&quot;;'],[-1,'        \/\/ fun with IE: IE7 in standards compliant mode does not display any'],[-1,'        \/\/ text with a left inset of 0. So we set this to 1px and subtract one'],[-1,'        \/\/ pixel later when we set label.style.left'],[0,'        textbox.inset = \&quot;1px,0px,0px,0px\&quot;;'],[-1,''],[0,'        if(!label.parentNode) {'],[0,'            label.appendChild(textbox);'],[0,'            this.textRoot.appendChild(label);'],[-1,'        }'],[-1,''],[0,'        var align = style.labelAlign || \&quot;cm\&quot;;'],[0,'        if (align.length == 1) {'],[0,'            align += \&quot;m\&quot;;'],[-1,'        }'],[0,'        var xshift = textbox.clientWidth *'],[-1,'            (OpenLayers.Renderer.VML.LABEL_SHIFT[align.substr(0,1)]);'],[0,'        var yshift = textbox.clientHeight *'],[-1,'            (OpenLayers.Renderer.VML.LABEL_SHIFT[align.substr(1,1)]);'],[0,'        label.style.left = parseInt(label.style.left)-xshift-1+\&quot;px\&quot;;'],[0,'        label.style.top = parseInt(label.style.top)+yshift+\&quot;px\&quot;;'],[-1,'        '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: moveRoot'],[-1,'     * moves this renderer\'s root to a different renderer.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * renderer - {&lt;OpenLayers.Renderer&gt;} target renderer for the moved root'],[-1,'     * root - {DOMElement} optional root node. To be used when this renderer'],[-1,'     *     holds roots from multiple layers to tell this method which one to'],[-1,'     *     detach'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} true if successful, false otherwise'],[-1,'     *\/'],[-1,'    moveRoot: function(renderer) {'],[0,'        var layer = this.map.getLayer(renderer.container.id);'],[0,'        if(layer instanceof OpenLayers.Layer.Vector.RootContainer) {'],[0,'            layer = this.map.getLayer(this.container.id);'],[-1,'        }'],[0,'        layer &amp;&amp; layer.renderer.clear();'],[0,'        OpenLayers.Renderer.Elements.prototype.moveRoot.apply(this, arguments);'],[0,'        layer &amp;&amp; layer.redraw();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: importSymbol'],[-1,'     * add a new symbol definition from the rendererer\'s symbol hash'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * graphicName - {String} name of the symbol to import'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Object} - hash of {DOMElement} \&quot;symbol\&quot; and {Number} \&quot;size\&quot;'],[-1,'     *\/      '],[-1,'    importSymbol: function (graphicName)  {'],[0,'        var id = this.container.id + \&quot;-\&quot; + graphicName;'],[-1,'        '],[-1,'        \/\/ check if symbol already exists in the cache'],[0,'        var cache = this.symbolCache[id];'],[0,'        if (cache) {'],[0,'            return cache;'],[-1,'        }'],[-1,'        '],[0,'        var symbol = OpenLayers.Renderer.symbol[graphicName];'],[0,'        if (!symbol) {'],[0,'            throw new Error(graphicName + \' is not a valid symbol name\');'],[-1,'        }'],[-1,''],[0,'        var symbolExtent = new OpenLayers.Bounds('],[-1,'                                    Number.MAX_VALUE, Number.MAX_VALUE, 0, 0);'],[-1,'        '],[0,'        var pathitems = [\&quot;m\&quot;];'],[0,'        for (var i=0; i&lt;symbol.length; i=i+2) {'],[0,'            var x = symbol[i];'],[0,'            var y = symbol[i+1];'],[0,'            symbolExtent.left = Math.min(symbolExtent.left, x);'],[0,'            symbolExtent.bottom = Math.min(symbolExtent.bottom, y);'],[0,'            symbolExtent.right = Math.max(symbolExtent.right, x);'],[0,'            symbolExtent.top = Math.max(symbolExtent.top, y);'],[-1,''],[0,'            pathitems.push(x);'],[0,'            pathitems.push(y);'],[0,'            if (i == 0) {'],[0,'                pathitems.push(\&quot;l\&quot;);'],[-1,'            }'],[-1,'        }'],[0,'        pathitems.push(\&quot;x e\&quot;);'],[0,'        var path = pathitems.join(\&quot; \&quot;);'],[-1,''],[0,'        var diff = (symbolExtent.getWidth() - symbolExtent.getHeight()) \/ 2;'],[0,'        if(diff &gt; 0) {'],[0,'            symbolExtent.bottom = symbolExtent.bottom - diff;'],[0,'            symbolExtent.top = symbolExtent.top + diff;'],[-1,'        } else {'],[0,'            symbolExtent.left = symbolExtent.left + diff;'],[0,'            symbolExtent.right = symbolExtent.right - diff;'],[-1,'        }'],[-1,'        '],[0,'        cache = {'],[-1,'            path: path,'],[-1,'            size: symbolExtent.getWidth(), \/\/ equals getHeight() now'],[-1,'            left: symbolExtent.left,'],[-1,'            bottom: symbolExtent.bottom'],[-1,'        };'],[0,'        this.symbolCache[id] = cache;'],[-1,'        '],[0,'        return cache;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Renderer.VML\&quot;'],[-1,'});'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Renderer.VML.LABEL_SHIFT'],[-1,' * {Object}'],[-1,' *\/'],[1,'OpenLayers.Renderer.VML.LABEL_SHIFT = {'],[-1,'    \&quot;l\&quot;: 0,'],[-1,'    \&quot;c\&quot;: .5,'],[-1,'    \&quot;r\&quot;: 1,'],[-1,'    \&quot;t\&quot;: 0,'],[-1,'    \&quot;m\&quot;: .5,'],[-1,'    \&quot;b\&quot;: 1'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/CacheRead.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.CacheRead'],[-1,' * A control for using image tiles cached with &lt;OpenLayers.Control.CacheWrite&gt;'],[-1,' * from the browser\'s local storage.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.CacheRead = OpenLayers.Class(OpenLayers.Control, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: fetchEvent'],[-1,'     * {String} The layer event to listen to for replacing remote resource tile'],[-1,'     *     URLs with cached data URIs. Supported values are \&quot;tileerror\&quot; (try'],[-1,'     *     remote first, fall back to cached) and \&quot;tileloadstart\&quot; (try cache'],[-1,'     *     first, fall back to remote). Default is \&quot;tileloadstart\&quot;.'],[-1,'     *'],[-1,'     *     Note that \&quot;tileerror\&quot; will not work for CORS enabled images (see'],[-1,'     *     https:\/\/developer.mozilla.org\/en\/CORS_Enabled_Image), i.e. layers'],[-1,'     *     configured with a &lt;OpenLayers.Tile.Image.crossOriginKeyword&gt; in'],[-1,'     *     &lt;OpenLayers.Layer.Grid.tileOptions&gt;.'],[-1,'     *\/'],[-1,'    fetchEvent: \&quot;tileloadstart\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: layers'],[-1,'     * {Array(&lt;OpenLayers.Layer.Grid&gt;)}. Optional. If provided, only these'],[-1,'     *     layers will receive tiles from the cache.'],[-1,'     *\/'],[-1,'    layers: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: autoActivate'],[-1,'     * {Boolean} Activate the control when it is added to a map.  Default is'],[-1,'     *     true.'],[-1,'     *\/'],[-1,'    autoActivate: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.CacheRead'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Object with API properties for this control'],[-1,'     *\/'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: setMap'],[-1,'     * Set the map property for the control. '],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} '],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Control.prototype.setMap.apply(this, arguments);'],[0,'        var i, layers = this.layers || map.layers;'],[0,'        for (i=layers.length-1; i&gt;=0; --i) {'],[0,'            this.addLayer({layer: layers[i]});'],[-1,'        }'],[0,'        if (!this.layers) {'],[0,'            map.events.on({'],[-1,'                addlayer: this.addLayer,'],[-1,'                removeLayer: this.removeLayer,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addLayer'],[-1,'     * Adds a layer to the control. Once added, tiles requested for this layer'],[-1,'     *     will be cached.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} Object with a layer property referencing an'],[-1,'     *     &lt;OpenLayers.Layer&gt; instance'],[-1,'     *\/'],[-1,'    addLayer: function(evt) {'],[0,'        evt.layer.events.register(this.fetchEvent, this, this.fetch);        '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: removeLayer'],[-1,'     * Removes a layer from the control. Once removed, tiles requested for this'],[-1,'     *     layer will no longer be cached.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} Object with a layer property referencing an'],[-1,'     *     &lt;OpenLayers.Layer&gt; instance'],[-1,'     *\/'],[-1,'    removeLayer: function(evt) {'],[0,'        evt.layer.events.unregister(this.fetchEvent, this, this.fetch);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: fetch'],[-1,'     * Listener to the &lt;fetchEvent&gt; event. Replaces a tile\'s url with a data'],[-1,'     * URI from the cache.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} Event object with a tile property.'],[-1,'     *\/'],[-1,'    fetch: function(evt) {'],[0,'        if (this.active &amp;&amp; window.localStorage &amp;&amp;'],[-1,'                evt.tile instanceof OpenLayers.Tile.Image) {'],[0,'            var tile = evt.tile,'],[-1,'                url = tile.url;'],[-1,'            \/\/ deal with modified tile urls when both CacheWrite and CacheRead'],[-1,'            \/\/ are active'],[0,'            if (!tile.layer.crossOriginKeyword &amp;&amp; OpenLayers.ProxyHost &amp;&amp;'],[-1,'                    url.indexOf(OpenLayers.ProxyHost) === 0) {'],[0,'                url = OpenLayers.Control.CacheWrite.urlMap[url];        '],[-1,'            }'],[0,'            var dataURI = window.localStorage.getItem(\&quot;olCache_\&quot; + url);'],[0,'            if (dataURI) {'],[0,'                tile.url = dataURI;'],[0,'                if (evt.type === \&quot;tileerror\&quot;) {'],[0,'                    tile.setImgSrc(dataURI);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     * The destroy method is used to perform any clean up before the control'],[-1,'     * is dereferenced.  Typically this is where event listeners are removed'],[-1,'     * to prevent memory leaks.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if (this.layers || this.map) {'],[0,'            var i, layers = this.layers || this.map.layers;'],[0,'            for (i=layers.length-1; i&gt;=0; --i) {'],[0,'                this.removeLayer({layer: layers[i]});'],[-1,'            }'],[-1,'        }'],[0,'        if (this.map) {'],[0,'            this.map.events.un({'],[-1,'                addlayer: this.addLayer,'],[-1,'                removeLayer: this.removeLayer,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.CacheRead\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Protocol\/WFS\/v1_0_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Protocol\/WFS\/v1.js'],[-1,' * @requires OpenLayers\/Format\/WFST\/v1_0_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Protocol.WFS.v1_0_0'],[-1,' * A WFS v1.0.0 protocol for vector layers.  Create a new instance with the'],[-1,' *     &lt;OpenLayers.Protocol.WFS.v1_0_0&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Protocol.WFS.v1&gt;'],[-1,' *\/'],[1,'OpenLayers.Protocol.WFS.v1_0_0 = OpenLayers.Class(OpenLayers.Protocol.WFS.v1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} WFS version number.'],[-1,'     *\/'],[-1,'    version: \&quot;1.0.0\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Protocol.WFS.v1_0_0'],[-1,'     * A class for giving layers WFS v1.0.0 protocol.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *'],[-1,'     * Valid options properties:'],[-1,'     * featureType - {String} Local (without prefix) feature typeName (required).'],[-1,'     * featureNS - {String} Feature namespace (optional).'],[-1,'     * featurePrefix - {String} Feature namespace alias (optional - only used'],[-1,'     *     if featureNS is provided).  Default is \'feature\'.'],[-1,'     * geometryName - {String} Name of geometry attribute.  Default is \'the_geom\'.'],[-1,'     *\/'],[-1,'   '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Protocol.WFS.v1_0_0\&quot; '],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/WMTSGetFeatureInfo.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Handler\/Click.js'],[-1,' * @requires OpenLayers\/Handler\/Hover.js'],[-1,' * @requires OpenLayers\/Request.js'],[-1,' * @requires OpenLayers\/Format\/WMSGetFeatureInfo.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.WMTSGetFeatureInfo'],[-1,' * The WMTSGetFeatureInfo control uses a WMTS query to get information about a '],[-1,' *     point on the map.  The information may be in a display-friendly format '],[-1,' *     such as HTML, or a machine-friendly format such as GML, depending on the '],[-1,' *     server\'s capabilities and the client\'s configuration.  This control '],[-1,' *     handles click or hover events, attempts to parse the results using an '],[-1,' *     OpenLayers.Format, and fires a \'getfeatureinfo\' event for each layer'],[-1,' *     queried.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.WMTSGetFeatureInfo = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'   \/**'],[-1,'     * APIProperty: hover'],[-1,'     * {Boolean} Send GetFeatureInfo requests when mouse stops moving.'],[-1,'     *     Default is false.'],[-1,'     *\/'],[-1,'    hover: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: requestEncoding'],[-1,'     * {String} One of \&quot;KVP\&quot; or \&quot;REST\&quot;.  Only KVP encoding is supported at this '],[-1,'     *     time.'],[-1,'     *\/'],[-1,'    requestEncoding: \&quot;KVP\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: drillDown'],[-1,'     * {Boolean} Drill down over all WMTS layers in the map. When'],[-1,'     *     using drillDown mode, hover is not possible.  A getfeatureinfo event'],[-1,'     *     will be fired for each layer queried.'],[-1,'     *\/'],[-1,'    drillDown: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxFeatures'],[-1,'     * {Integer} Maximum number of features to return from a WMTS query. This'],[-1,'     *     sets the feature_count parameter on WMTS GetFeatureInfo'],[-1,'     *     requests.'],[-1,'     *\/'],[-1,'    maxFeatures: 10,'],[-1,''],[-1,'    \/** APIProperty: clickCallback'],[-1,'     *  {String} The click callback to register in the'],[-1,'     *      {&lt;OpenLayers.Handler.Click&gt;} object created when the hover'],[-1,'     *      option is set to false. Default is \&quot;click\&quot;.'],[-1,'     *\/'],[-1,'    clickCallback: \&quot;click\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: layers'],[-1,'     * {Array(&lt;OpenLayers.Layer.WMTS&gt;)} The layers to query for feature info.'],[-1,'     *     If omitted, all map WMTS layers will be considered.'],[-1,'     *\/'],[-1,'    layers: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: queryVisible'],[-1,'     * {Boolean} Filter out hidden layers when searching the map for layers to '],[-1,'     *     query.  Default is true.'],[-1,'     *\/'],[-1,'    queryVisible: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: infoFormat'],[-1,'     * {String} The mimetype to request from the server'],[-1,'     *\/'],[-1,'    infoFormat: \'text\/html\','],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: vendorParams'],[-1,'     * {Object} Additional parameters that will be added to the request, for'],[-1,'     * WMTS implementations that support them. This could e.g. look like'],[-1,'     * (start code)'],[-1,'     * {'],[-1,'     *     radius: 5'],[-1,'     * }'],[-1,'     * (end)'],[-1,'     *\/'],[-1,'    vendorParams: {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: format'],[-1,'     * {&lt;OpenLayers.Format&gt;} A format for parsing GetFeatureInfo responses.'],[-1,'     *     Default is &lt;OpenLayers.Format.WMSGetFeatureInfo&gt;.'],[-1,'     *\/'],[-1,'    format: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: formatOptions'],[-1,'     * {Object} Optional properties to set on the format (if one is not provided'],[-1,'     *     in the &lt;format&gt; property.'],[-1,'     *\/'],[-1,'    formatOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: handlerOptions'],[-1,'     * {Object} Additional options for the handlers used by this control, e.g.'],[-1,'     * (start code)'],[-1,'     * {'],[-1,'     *     \&quot;click\&quot;: {delay: 100},'],[-1,'     *     \&quot;hover\&quot;: {delay: 300}'],[-1,'     * }'],[-1,'     * (end)'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: handler'],[-1,'     * {Object} Reference to the &lt;OpenLayers.Handler&gt; for this control'],[-1,'     *\/'],[-1,'    handler: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: hoverRequest'],[-1,'     * {&lt;OpenLayers.Request&gt;} contains the currently running hover request'],[-1,'     *     (if any).'],[-1,'     *\/'],[-1,'    hoverRequest: null,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to those from &lt;OpenLayers.Control.events&gt;):'],[-1,'     * beforegetfeatureinfo - Triggered before each request is sent.'],[-1,'     *      The event object has an *xy* property with the position of the '],[-1,'     *      mouse click or hover event that triggers the request and a *layer*'],[-1,'     *      property referencing the layer about to be queried.  If a listener'],[-1,'     *      returns false, the request will not be issued.'],[-1,'     * getfeatureinfo - Triggered when a GetFeatureInfo response is received.'],[-1,'     *      The event object has a *text* property with the body of the'],[-1,'     *      response (String), a *features* property with an array of the'],[-1,'     *      parsed features, an *xy* property with the position of the mouse'],[-1,'     *      click or hover event that triggered the request, a *layer* property'],[-1,'     *      referencing the layer queried and a *request* property with the '],[-1,'     *      request itself. If drillDown is set to true, one event will be fired'],[-1,'     *      for each layer queried.'],[-1,'     * exception - Triggered when a GetFeatureInfo request fails (with a '],[-1,'     *      status other than 200) or whenparsing fails.  Listeners will receive '],[-1,'     *      an event with *request*, *xy*, and *layer*  properties.  In the case '],[-1,'     *      of a parsing error, the event will also contain an *error* property.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: pending'],[-1,'     * {Number}  The number of pending requests.'],[-1,'     *\/'],[-1,'    pending: 0,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: &lt;OpenLayers.Control.WMTSGetFeatureInfo&gt;'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} '],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        options = options || {};'],[0,'        options.handlerOptions = options.handlerOptions || {};'],[-1,''],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[-1,'        '],[0,'        if (!this.format) {'],[0,'            this.format = new OpenLayers.Format.WMSGetFeatureInfo('],[-1,'                options.formatOptions'],[-1,'            );'],[-1,'        }'],[-1,'        '],[0,'        if (this.drillDown === true) {'],[0,'            this.hover = false;'],[-1,'        }'],[-1,''],[0,'        if (this.hover) {'],[0,'            this.handler = new OpenLayers.Handler.Hover('],[-1,'                this, {'],[-1,'                    move: this.cancelHover,'],[-1,'                    pause: this.getInfoForHover'],[-1,'                },'],[-1,'                OpenLayers.Util.extend('],[-1,'                    this.handlerOptions.hover || {}, {delay: 250}'],[-1,'                )'],[-1,'            );'],[-1,'        } else {'],[0,'            var callbacks = {};'],[0,'            callbacks[this.clickCallback] = this.getInfoForClick;'],[0,'            this.handler = new OpenLayers.Handler.Click('],[-1,'                this, callbacks, this.handlerOptions.click || {}'],[-1,'            );'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getInfoForClick '],[-1,'     * Called on click'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;} '],[-1,'     *\/'],[-1,'    getInfoForClick: function(evt) {'],[0,'        this.request(evt.xy, {});'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * Method: getInfoForHover'],[-1,'     * Pause callback for the hover handler'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object}'],[-1,'     *\/'],[-1,'    getInfoForHover: function(evt) {'],[0,'        this.request(evt.xy, {hover: true});'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: cancelHover'],[-1,'     * Cancel callback for the hover handler'],[-1,'     *\/'],[-1,'    cancelHover: function() {'],[0,'        if (this.hoverRequest) {'],[0,'            --this.pending;'],[0,'            if (this.pending &lt;= 0) {'],[0,'                OpenLayers.Element.removeClass(this.map.viewPortDiv, \&quot;olCursorWait\&quot;);'],[0,'                this.pending = 0;'],[-1,'            }            '],[0,'            this.hoverRequest.abort();'],[0,'            this.hoverRequest = null;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: findLayers'],[-1,'     * Internal method to get the layers, independent of whether we are'],[-1,'     *     inspecting the map or using a client-provided array'],[-1,'     *\/'],[-1,'    findLayers: function() {'],[0,'        var candidates = this.layers || this.map.layers;'],[0,'        var layers = [];'],[0,'        var layer;'],[0,'        for (var i=candidates.length-1; i&gt;=0; --i) {'],[0,'            layer = candidates[i];'],[0,'            if (layer instanceof OpenLayers.Layer.WMTS &amp;&amp;'],[-1,'                layer.requestEncoding === this.requestEncoding &amp;&amp;'],[-1,'                (!this.queryVisible || layer.getVisibility())) {'],[0,'                layers.push(layer);'],[0,'                if (!this.drillDown || this.hover) {'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return layers;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: buildRequestOptions'],[-1,'     * Build an object with the relevant options for the GetFeatureInfo request.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.WMTS&gt;} A WMTS layer.'],[-1,'     * xy - {&lt;OpenLayers.Pixel&gt;} The position on the map where the '],[-1,'     *     mouse event occurred.'],[-1,'     *\/'],[-1,'    buildRequestOptions: function(layer, xy) {'],[0,'        var loc = this.map.getLonLatFromPixel(xy);'],[0,'        var getTileUrl = layer.getURL('],[-1,'            new OpenLayers.Bounds(loc.lon, loc.lat, loc.lon, loc.lat)'],[-1,'        );'],[0,'        var params = OpenLayers.Util.getParameters(getTileUrl);'],[0,'        var tileInfo = layer.getTileInfo(loc);'],[0,'        OpenLayers.Util.extend(params, {'],[-1,'            service: \&quot;WMTS\&quot;,'],[-1,'            version: layer.version,'],[-1,'            request: \&quot;GetFeatureInfo\&quot;,'],[-1,'            infoFormat: this.infoFormat,'],[-1,'            i: tileInfo.i,'],[-1,'            j: tileInfo.j'],[-1,'        });'],[0,'        OpenLayers.Util.applyDefaults(params, this.vendorParams);'],[0,'        return {'],[-1,'            url: OpenLayers.Util.isArray(layer.url) ? layer.url[0] : layer.url,'],[-1,'            params: OpenLayers.Util.upperCaseObject(params),'],[-1,'            callback: function(request) {'],[0,'                this.handleResponse(xy, request, layer);'],[-1,'            },'],[-1,'            scope: this'],[-1,'        };'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: request'],[-1,'     * Sends a GetFeatureInfo request to the WMTS'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * xy - {&lt;OpenLayers.Pixel&gt;} The position on the map where the mouse event '],[-1,'     *     occurred.'],[-1,'     * options - {Object} additional options for this method.'],[-1,'     * '],[-1,'     * Valid options:'],[-1,'     * - *hover* {Boolean} true if we do the request for the hover handler'],[-1,'     *\/'],[-1,'    request: function(xy, options) {'],[0,'        options = options || {};'],[0,'        var layers = this.findLayers();'],[0,'        if (layers.length &gt; 0) {'],[0,'            var issue, layer;'],[0,'            for (var i=0, len=layers.length; i&lt;len; i++) {'],[0,'                layer = layers[i];'],[0,'                issue = this.events.triggerEvent(\&quot;beforegetfeatureinfo\&quot;, {'],[-1,'                    xy: xy,'],[-1,'                    layer: layer'],[-1,'                });'],[0,'                if (issue !== false) {'],[0,'                    ++this.pending;'],[0,'                    var requestOptions = this.buildRequestOptions(layer, xy);'],[0,'                    var request = OpenLayers.Request.GET(requestOptions);'],[0,'                    if (options.hover === true) {'],[0,'                        this.hoverRequest = request;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            if (this.pending &gt; 0) {'],[0,'                OpenLayers.Element.addClass(this.map.viewPortDiv, \&quot;olCursorWait\&quot;);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleResponse'],[-1,'     * Handler for the GetFeatureInfo response.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * xy - {&lt;OpenLayers.Pixel&gt;} The position on the map where the mouse event '],[-1,'     *     occurred.'],[-1,'     * request - {XMLHttpRequest} The request object.'],[-1,'     * layer - {&lt;OpenLayers.Layer.WMTS&gt;} The queried layer.'],[-1,'     *\/'],[-1,'    handleResponse: function(xy, request, layer) {'],[0,'        --this.pending;'],[0,'        if (this.pending &lt;= 0) {'],[0,'            OpenLayers.Element.removeClass(this.map.viewPortDiv, \&quot;olCursorWait\&quot;);'],[0,'            this.pending = 0;'],[-1,'        }'],[0,'        if (request.status &amp;&amp; (request.status &lt; 200 || request.status &gt;= 300)) {'],[0,'            this.events.triggerEvent(\&quot;exception\&quot;, {'],[-1,'                xy: xy, '],[-1,'                request: request,'],[-1,'                layer: layer'],[-1,'            });'],[-1,'        } else {'],[0,'            var doc = request.responseXML;'],[0,'            if (!doc || !doc.documentElement) {'],[0,'                doc = request.responseText;'],[-1,'            }'],[0,'            var features, except;'],[0,'            try {'],[0,'                features = this.format.read(doc);'],[-1,'            } catch (error) {'],[0,'                except = true;'],[0,'                this.events.triggerEvent(\&quot;exception\&quot;, {'],[-1,'                    xy: xy,'],[-1,'                    request: request,'],[-1,'                    error: error,'],[-1,'                    layer: layer'],[-1,'                });'],[-1,'            }'],[0,'            if (!except) {'],[0,'                this.events.triggerEvent(\&quot;getfeatureinfo\&quot;, {'],[-1,'                    text: request.responseText,'],[-1,'                    features: features,'],[-1,'                    request: request,'],[-1,'                    xy: xy,'],[-1,'                    layer: layer'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.WMTSGetFeatureInfo\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Protocol\/CSW\/v2_0_2.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Protocol\/CSW.js'],[-1,' * @requires OpenLayers\/Format\/CSWGetRecords\/v2_0_2.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Protocol.CSW.v2_0_2'],[-1,' * CS-W (Catalogue services for the Web) version 2.0.2 protocol.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Protocol&gt;'],[-1,' *\/'],[1,'OpenLayers.Protocol.CSW.v2_0_2 = OpenLayers.Class(OpenLayers.Protocol, {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: formatOptions'],[-1,'     * {Object} Optional options for the format.  If a format is not provided,'],[-1,'     *     this property can be used to extend the default format options.'],[-1,'     *\/'],[-1,'    formatOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Protocol.CSW.v2_0_2'],[-1,'     * A class for CSW version 2.0.2 protocol management.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Protocol.prototype.initialize.apply(this, [options]);'],[0,'        if(!options.format) {'],[0,'            this.format = new OpenLayers.Format.CSWGetRecords.v2_0_2(OpenLayers.Util.extend({'],[-1,'            }, this.formatOptions));'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Clean up the protocol.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if(this.options &amp;&amp; !this.options.format) {'],[0,'            this.format.destroy();'],[-1,'        }'],[0,'        this.format = null;'],[0,'        OpenLayers.Protocol.prototype.destroy.apply(this);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: read'],[-1,'     * Construct a request for reading new records from the Catalogue.'],[-1,'     *\/'],[-1,'    read: function(options) {'],[0,'        options = OpenLayers.Util.extend({}, options);'],[0,'        OpenLayers.Util.applyDefaults(options, this.options || {});'],[0,'        var response = new OpenLayers.Protocol.Response({requestType: \&quot;read\&quot;});'],[-1,''],[0,'        var data = this.format.write(options.params || options);'],[-1,''],[0,'        response.priv = OpenLayers.Request.POST({'],[-1,'            url: options.url,'],[-1,'            callback: this.createCallback(this.handleRead, response, options),'],[-1,'            params: options.params,'],[-1,'            headers: options.headers,'],[-1,'            data: data'],[-1,'        });'],[-1,''],[0,'        return response;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleRead'],[-1,'     * Deal with response from the read request.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * response - {&lt;OpenLayers.Protocol.Response&gt;} The response object to pass'],[-1,'     *     to the user callback.'],[-1,'     *     This response is given a code property, and optionally a data property.'],[-1,'     *     The latter represents the CSW records as returned by the call to'],[-1,'     *     the CSW format read method.'],[-1,'     * options - {Object} The user options passed to the read call.'],[-1,'     *\/'],[-1,'    handleRead: function(response, options) {'],[0,'        if(options.callback) {'],[0,'            var request = response.priv;'],[0,'            if(request.status &gt;= 200 &amp;&amp; request.status &lt; 300) {'],[-1,'                \/\/ success'],[0,'                response.data = this.parseData(request);'],[0,'                response.code = OpenLayers.Protocol.Response.SUCCESS;'],[-1,'            } else {'],[-1,'                \/\/ failure'],[0,'                response.code = OpenLayers.Protocol.Response.FAILURE;'],[-1,'            }'],[0,'            options.callback.call(options.scope, response);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseData'],[-1,'     * Read HTTP response body and return records'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * request - {XMLHttpRequest} The request object'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} The CSW records as returned by the call to the format read method.'],[-1,'     *\/'],[-1,'    parseData: function(request) {'],[0,'        var doc = request.responseXML;'],[0,'        if(!doc || !doc.documentElement) {'],[0,'            doc = request.responseText;'],[-1,'        }'],[0,'        if(!doc || doc.length &lt;= 0) {'],[0,'            return null;'],[-1,'        }'],[0,'        return this.format.read(doc);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Protocol.CSW.v2_0_2\&quot;'],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/SLDSelect.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Layer\/WMS.js'],[-1,' * @requires OpenLayers\/Handler\/RegularPolygon.js'],[-1,' * @requires OpenLayers\/Handler\/Polygon.js'],[-1,' * @requires OpenLayers\/Handler\/Path.js'],[-1,' * @requires OpenLayers\/Handler\/Click.js'],[-1,' * @requires OpenLayers\/Filter\/Spatial.js'],[-1,' * @requires OpenLayers\/Format\/SLD\/v1_0_0.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.SLDSelect'],[-1,' * Perform selections on WMS layers using Styled Layer Descriptor (SLD)'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.SLDSelect = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to those from &lt;OpenLayers.Control.events&gt;):'],[-1,'     * selected - Triggered when a selection occurs.  Listeners receive an '],[-1,'     *     event with *filters* and *layer* properties.  Filters will be an '],[-1,'     *     array of OpenLayers.Filter objects created in order to perform '],[-1,'     *     the particular selection.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: clearOnDeactivate'],[-1,'     * {Boolean} Should the selection be cleared when the control is '],[-1,'     *     deactivated. Default value is false.'],[-1,'     *\/'],[-1,'    clearOnDeactivate: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layers'],[-1,'     * {Array(&lt;OpenLayers.Layer.WMS&gt;)} The WMS layers this control will work '],[-1,'     *     on.'],[-1,'     *\/'],[-1,'    layers: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: callbacks'],[-1,'     * {Object} The functions that are sent to the handler for callback'],[-1,'     *\/'],[-1,'    callbacks: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: selectionSymbolizer'],[-1,'     * {Object} Determines the styling of the selected objects. Default is'],[-1,'     *     a selection in red.'],[-1,'     *\/'],[-1,'    selectionSymbolizer: {'],[-1,'        \'Polygon\': {fillColor: \'#FF0000\', stroke: false},'],[-1,'        \'Line\': {strokeColor: \'#FF0000\', strokeWidth: 2},'],[-1,'        \'Point\': {graphicName: \'square\', fillColor: \'#FF0000\', pointRadius: 5}'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layerOptions'],[-1,'     * {Object} The options to apply to the selection layer, by default the'],[-1,'     *     selection layer will be kept out of the layer switcher.'],[-1,'     *\/'],[-1,'    layerOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: handlerOptions'],[-1,'     * {Object} Used to set non-default properties on the control\'s handler'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: sketchStyle'],[-1,'     * {&lt;OpenLayers.Style&gt;|Object} Style or symbolizer to use for the sketch'],[-1,'     * handler. The recommended way of styling the sketch layer, however, is'],[-1,'     * to configure an &lt;OpenLayers.StyleMap&gt; in the layerOptions of the'],[-1,'     * &lt;handlerOptions&gt;:'],[-1,'     * '],[-1,'     * (code)'],[-1,'     * new OpenLayers.Control.SLDSelect(OpenLayers.Handler.Path, {'],[-1,'     *     handlerOptions: {'],[-1,'     *         layerOptions: {'],[-1,'     *             styleMap: new OpenLayers.StyleMap({'],[-1,'     *                 \&quot;default\&quot;: {strokeColor: \&quot;yellow\&quot;}'],[-1,'     *             })'],[-1,'     *         }'],[-1,'     *     }'],[-1,'     * });'],[-1,'     * (end)'],[-1,'     *\/'],[-1,'    sketchStyle: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: wfsCache'],[-1,'     * {Object} Cache to use for storing parsed results from'],[-1,'     *     &lt;OpenLayers.Format.WFSDescribeFeatureType.read&gt;. If not provided,'],[-1,'     *     these will be cached on the prototype.'],[-1,'     *\/'],[-1,'    wfsCache: {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layerCache'],[-1,'     * {Object} Cache to use for storing references to the selection layers.'],[-1,'     *     Normally each source layer will have exactly 1 selection layer of'],[-1,'     *     type OpenLayers.Layer.WMS. If not provided, layers will'],[-1,'     *     be cached on the prototype. Note that if &lt;clearOnDeactivate&gt; is'],[-1,'     *     true, the layer will no longer be cached after deactivating the'],[-1,'     *     control.'],[-1,'     *\/'],[-1,'    layerCache: {},'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.SLDSelect'],[-1,'     * Create a new control for selecting features in WMS layers using'],[-1,'     *     Styled Layer Descriptor (SLD).'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * handler - {&lt;OpenLayers.Class&gt;} A sketch handler class. This determines'],[-1,'     *     the type of selection, e.g. box (&lt;OpenLayers.Handler.Box&gt;), point'],[-1,'     *     (&lt;OpenLayers.Handler.Point&gt;), path (&lt;OpenLayers.Handler.Path&gt;) or'],[-1,'     *     polygon (&lt;OpenLayers.Handler.Polygon&gt;) selection. To use circle'],[-1,'     *     type selection, use &lt;OpenLayers.Handler.RegularPolygon&gt; and pass'],[-1,'     *     the number of desired sides (e.g. 40) as \&quot;sides\&quot; property to the'],[-1,'     *     &lt;handlerOptions&gt;.'],[-1,'     * options - {Object} An object containing all configuration properties for'],[-1,'     *     the control.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * layers - Array({&lt;OpenLayers.Layer.WMS&gt;}) The layers to perform the'],[-1,'     *     selection on.'],[-1,'     *\/'],[-1,'    initialize: function(handler, options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[-1,''],[0,'        this.callbacks = OpenLayers.Util.extend({done: this.select, '],[-1,'            click: this.select}, this.callbacks);'],[0,'        this.handlerOptions = this.handlerOptions || {};'],[0,'        this.layerOptions = OpenLayers.Util.applyDefaults(this.layerOptions, {'],[-1,'            displayInLayerSwitcher: false,'],[-1,'            tileOptions: {maxGetUrlLength: 2048}'],[-1,'        });'],[0,'        if (this.sketchStyle) {'],[0,'            this.handlerOptions.layerOptions = OpenLayers.Util.applyDefaults('],[-1,'                this.handlerOptions.layerOptions,'],[-1,'                {styleMap: new OpenLayers.StyleMap({\&quot;default\&quot;: this.sketchStyle})}'],[-1,'            );'],[-1,'        }'],[0,'        this.handler = new handler(this, this.callbacks, this.handlerOptions);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Take care of things that are not handled in superclass.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        for (var key in this.layerCache) {'],[0,'            delete this.layerCache[key];'],[-1,'        }'],[0,'        for (var key in this.wfsCache) {'],[0,'            delete this.wfsCache[key];'],[-1,'        }'],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: coupleLayerVisiblity'],[-1,'     * Couple the selection layer and the source layer with respect to'],[-1,'     *     layer visibility. So if the source layer is turned off, the'],[-1,'     *     selection layer is also turned off.'],[-1,'     *'],[-1,'     * Context: '],[-1,'     * - {&lt;OpenLayers.Layer&gt;}'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object}'],[-1,'     *\/'],[-1,'    coupleLayerVisiblity: function(evt) {'],[0,'        this.setVisibility(evt.object.getVisibility());'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createSelectionLayer'],[-1,'     * Creates a \&quot;clone\&quot; from the source layer in which the selection can'],[-1,'     * be drawn. This ensures both the source layer and the selection are '],[-1,'     * visible and not only the selection.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * source - {&lt;OpenLayers.Layer.WMS&gt;} The source layer on which the selection'],[-1,'     *     is performed.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.WMS&gt;} A WMS layer with maxGetUrlLength configured to 2048'],[-1,'     *     since SLD selections can easily get quite long.'],[-1,'     *\/'],[-1,'    createSelectionLayer: function(source) {'],[-1,'        \/\/ check if we already have a selection layer for the source layer'],[0,'        var selectionLayer;'],[0,'        if (!this.layerCache[source.id]) {'],[0,'            selectionLayer = new OpenLayers.Layer.WMS(source.name, '],[-1,'                source.url, source.params, '],[-1,'                OpenLayers.Util.applyDefaults('],[-1,'                    this.layerOptions,'],[-1,'                    source.getOptions())'],[-1,'            );'],[0,'            this.layerCache[source.id] = selectionLayer;'],[-1,'            \/\/ make sure the layers are coupled wrt visibility, but only'],[-1,'            \/\/ if they are not displayed in the layer switcher, because in'],[-1,'            \/\/ that case the user cannot control visibility.'],[0,'            if (this.layerOptions.displayInLayerSwitcher === false) {'],[0,'                source.events.on({'],[-1,'                    \&quot;visibilitychanged\&quot;: this.coupleLayerVisiblity,'],[-1,'                    scope: selectionLayer});'],[-1,'            }'],[0,'            this.map.addLayer(selectionLayer);'],[-1,'        } else {'],[0,'            selectionLayer = this.layerCache[source.id];'],[-1,'        }'],[0,'        return selectionLayer;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createSLD'],[-1,'     * Create the SLD document for the layer using the supplied filters.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.WMS&gt;}'],[-1,'     * filters - Array({&lt;OpenLayers.Filter&gt;}) The filters to be applied.'],[-1,'     * geometryAttributes - Array({Object}) The geometry attributes of the '],[-1,'     *     layer.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The SLD document generated as a string.'],[-1,'     *\/'],[-1,'    createSLD: function(layer, filters, geometryAttributes) {'],[0,'        var sld = {version: \&quot;1.0.0\&quot;, namedLayers: {}};'],[0,'        var layerNames = [layer.params.LAYERS].join(\&quot;,\&quot;).split(\&quot;,\&quot;);'],[0,'        for (var i=0, len=layerNames.length; i&lt;len; i++) { '],[0,'            var name = layerNames[i];'],[0,'            sld.namedLayers[name] = {name: name, userStyles: []};'],[0,'            var symbolizer = this.selectionSymbolizer;'],[0,'            var geometryAttribute = geometryAttributes[i];'],[0,'            if (geometryAttribute.type.indexOf(\'Polygon\') &gt;= 0) {'],[0,'                symbolizer = {Polygon: this.selectionSymbolizer[\'Polygon\']};'],[0,'            } else if (geometryAttribute.type.indexOf(\'LineString\') &gt;= 0) {'],[0,'                symbolizer = {Line: this.selectionSymbolizer[\'Line\']};'],[0,'            } else if (geometryAttribute.type.indexOf(\'Point\') &gt;= 0) {'],[0,'                symbolizer = {Point: this.selectionSymbolizer[\'Point\']};'],[-1,'            }'],[0,'            var filter = filters[i];'],[0,'            sld.namedLayers[name].userStyles.push({name: \'default\', rules: ['],[-1,'                new OpenLayers.Rule({symbolizer: symbolizer, '],[-1,'                    filter: filter, '],[-1,'                    maxScaleDenominator: layer.options.minScale})'],[-1,'            ]});'],[-1,'        }'],[0,'        return new OpenLayers.Format.SLD({srsName: this.map.getProjection()}).write(sld);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseDescribeLayer'],[-1,'     * Parse the SLD WMS DescribeLayer response and issue the corresponding'],[-1,'     *     WFS DescribeFeatureType request'],[-1,'     *'],[-1,'     * request - {XMLHttpRequest} The request object.'],[-1,'     *\/'],[-1,'    parseDescribeLayer: function(request) {'],[0,'        var format = new OpenLayers.Format.WMSDescribeLayer();'],[0,'        var doc = request.responseXML;'],[0,'        if(!doc || !doc.documentElement) {'],[0,'            doc = request.responseText;'],[-1,'        }'],[0,'        var describeLayer = format.read(doc);'],[0,'        var typeNames = [];'],[0,'        var url = null;'],[0,'        for (var i=0, len=describeLayer.length; i&lt;len; i++) {'],[-1,'            \/\/ perform a WFS DescribeFeatureType request'],[0,'            if (describeLayer[i].owsType == \&quot;WFS\&quot;) {'],[0,'                typeNames.push(describeLayer[i].typeName);'],[0,'                url = describeLayer[i].owsURL;'],[-1,'            }'],[-1,'        }'],[0,'        var options = {'],[-1,'            url: url,'],[-1,'            params: {'],[-1,'                SERVICE: \&quot;WFS\&quot;,'],[-1,'                TYPENAME: typeNames.toString(),'],[-1,'                REQUEST: \&quot;DescribeFeatureType\&quot;,'],[-1,'                VERSION: \&quot;1.0.0\&quot;'],[-1,'            },'],[-1,'            callback: function(request) {'],[0,'                var format = new OpenLayers.Format.WFSDescribeFeatureType();'],[0,'                var doc = request.responseXML;'],[0,'                if(!doc || !doc.documentElement) {'],[0,'                    doc = request.responseText;'],[-1,'                }'],[0,'                var describeFeatureType = format.read(doc);'],[0,'                this.control.wfsCache[this.layer.id] = describeFeatureType;'],[0,'                this.control._queue &amp;&amp; this.control.applySelection();'],[-1,'            },'],[-1,'            scope: this'],[-1,'        };'],[0,'        OpenLayers.Request.GET(options);'],[-1,'    },'],[-1,''],[-1,'   \/**'],[-1,'    * Method: getGeometryAttributes'],[-1,'    * Look up the geometry attributes from the WFS DescribeFeatureType response'],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * layer - {&lt;OpenLayers.Layer.WMS&gt;} The layer for which to look up the '],[-1,'    *     geometry attributes.'],[-1,'    *'],[-1,'    * Returns:'],[-1,'    * Array({Object}) Array of geometry attributes'],[-1,'    *\/ '],[-1,'   getGeometryAttributes: function(layer) {'],[0,'        var result = [];'],[0,'        var cache = this.wfsCache[layer.id];'],[0,'        for (var i=0, len=cache.featureTypes.length; i&lt;len; i++) {'],[0,'            var typeName = cache.featureTypes[i];'],[0,'            var properties = typeName.properties;'],[0,'            for (var j=0, lenj=properties.length; j &lt; lenj; j++) {'],[0,'                var property = properties[j];'],[0,'                var type = property.type;'],[0,'                if ((type.indexOf(\'LineString\') &gt;= 0) ||'],[-1,'                    (type.indexOf(\'GeometryAssociationType\') &gt;=0) ||'],[-1,'                    (type.indexOf(\'GeometryPropertyType\') &gt;= 0) ||'],[-1,'                    (type.indexOf(\'Point\') &gt;= 0) ||'],[-1,'                    (type.indexOf(\'Polygon\') &gt;= 0) ) {'],[0,'                        result.push(property);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return result;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Activate the control. Activating the control will perform a SLD WMS'],[-1,'     *     DescribeLayer request followed by a WFS DescribeFeatureType request'],[-1,'     *     so that the proper symbolizers can be chosen based on the geometry'],[-1,'     *     type.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = OpenLayers.Control.prototype.activate.call(this);'],[0,'        if(activated) {'],[0,'            for (var i=0, len=this.layers.length; i&lt;len; i++) {'],[0,'                var layer = this.layers[i];'],[0,'                if (layer &amp;&amp; !this.wfsCache[layer.id]) {'],[0,'                    var options = {'],[-1,'                        url: layer.url,'],[-1,'                        params: {'],[-1,'                            SERVICE: \&quot;WMS\&quot;,'],[-1,'                            VERSION: layer.params.VERSION,'],[-1,'                            LAYERS: layer.params.LAYERS,'],[-1,'                            REQUEST: \&quot;DescribeLayer\&quot;'],[-1,'                        },'],[-1,'                        callback: this.parseDescribeLayer,'],[-1,'                        scope: {layer: layer, control: this}'],[-1,'                    };'],[0,'                    OpenLayers.Request.GET(options);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the control. If clearOnDeactivate is true, remove the'],[-1,'     *     selection layer(s).'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = OpenLayers.Control.prototype.deactivate.call(this);'],[0,'        if(deactivated) {'],[0,'            for (var i=0, len=this.layers.length; i&lt;len; i++) {'],[0,'                var layer = this.layers[i];'],[0,'                if (layer &amp;&amp; this.clearOnDeactivate === true) {'],[0,'                    var layerCache = this.layerCache;'],[0,'                    var selectionLayer = layerCache[layer.id];'],[0,'                    if (selectionLayer) {'],[0,'                        layer.events.un({'],[-1,'                            \&quot;visibilitychanged\&quot;: this.coupleLayerVisiblity,'],[-1,'                            scope: selectionLayer});'],[0,'                        selectionLayer.destroy();'],[0,'                        delete layerCache[layer.id];'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setLayers'],[-1,'     * Set the layers on which the selection should be performed.  Call the '],[-1,'     *     setLayers method if the layer(s) to be used change and the same '],[-1,'     *     control should be used on a new set of layers.'],[-1,'     *     If the control is already active, it will be active after the new'],[-1,'     *     set of layers is set.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layers - {Array(&lt;OpenLayers.Layer.WMS&gt;)}  The new set of layers on which '],[-1,'     *     the selection should be performed.'],[-1,'     *\/'],[-1,'    setLayers: function(layers) {'],[0,'        if(this.active) {'],[0,'            this.deactivate();'],[0,'            this.layers = layers;'],[0,'            this.activate();'],[-1,'        } else {'],[0,'            this.layers = layers;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Function: createFilter'],[-1,'     * Create the filter to be used in the SLD.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometryAttribute - {Object} Used to get the name of the geometry '],[-1,'     *     attribute which is needed for constructing the spatial filter.'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} The geometry to use.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Filter.Spatial&gt;} The spatial filter created.'],[-1,'     *\/'],[-1,'    createFilter: function(geometryAttribute, geometry) {'],[0,'        var filter = null;'],[0,'        if (this.handler instanceof OpenLayers.Handler.RegularPolygon) {'],[-1,'            \/\/ box'],[0,'            if (this.handler.irregular === true) {'],[0,'                filter = new OpenLayers.Filter.Spatial({'],[-1,'                    type: OpenLayers.Filter.Spatial.BBOX,'],[-1,'                    property: geometryAttribute.name,'],[-1,'                    value: geometry.getBounds()}'],[-1,'                );'],[-1,'            } else {'],[0,'                filter = new OpenLayers.Filter.Spatial({'],[-1,'                    type: OpenLayers.Filter.Spatial.INTERSECTS,'],[-1,'                    property: geometryAttribute.name,'],[-1,'                    value: geometry}'],[-1,'                );'],[-1,'            }'],[0,'        } else if (this.handler instanceof OpenLayers.Handler.Polygon) {'],[0,'            filter = new OpenLayers.Filter.Spatial({'],[-1,'                type: OpenLayers.Filter.Spatial.INTERSECTS,'],[-1,'                property: geometryAttribute.name,'],[-1,'                value: geometry}'],[-1,'            );'],[0,'        } else if (this.handler instanceof OpenLayers.Handler.Path) {'],[-1,'            \/\/ if source layer is point based, use DWITHIN instead'],[0,'            if (geometryAttribute.type.indexOf(\'Point\') &gt;= 0) {'],[0,'                filter = new OpenLayers.Filter.Spatial({'],[-1,'                    type: OpenLayers.Filter.Spatial.DWITHIN,'],[-1,'                    property: geometryAttribute.name,'],[-1,'                    distance: this.map.getExtent().getWidth()*0.01 ,'],[-1,'                    distanceUnits: this.map.getUnits(),'],[-1,'                    value: geometry}'],[-1,'                );'],[-1,'            } else {'],[0,'                filter = new OpenLayers.Filter.Spatial({'],[-1,'                    type: OpenLayers.Filter.Spatial.INTERSECTS,'],[-1,'                    property: geometryAttribute.name,'],[-1,'                    value: geometry}'],[-1,'                );'],[-1,'            }'],[0,'        } else if (this.handler instanceof OpenLayers.Handler.Click) {'],[0,'            if (geometryAttribute.type.indexOf(\'Polygon\') &gt;= 0) {'],[0,'                filter = new OpenLayers.Filter.Spatial({'],[-1,'                    type: OpenLayers.Filter.Spatial.INTERSECTS,'],[-1,'                    property: geometryAttribute.name,'],[-1,'                    value: geometry}'],[-1,'                );'],[-1,'            } else {'],[0,'                filter = new OpenLayers.Filter.Spatial({'],[-1,'                    type: OpenLayers.Filter.Spatial.DWITHIN,'],[-1,'                    property: geometryAttribute.name,'],[-1,'                    distance: this.map.getExtent().getWidth()*0.01 ,'],[-1,'                    distanceUnits: this.map.getUnits(),'],[-1,'                    value: geometry}'],[-1,'                );'],[-1,'            }'],[-1,'        }'],[0,'        return filter;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: select'],[-1,'     * When the handler is done, use SLD_BODY on the selection layer to'],[-1,'     *     display the selection in the map.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {Object} or {&lt;OpenLayers.Geometry&gt;}'],[-1,'     *\/'],[-1,'    select: function(geometry) {'],[0,'        this._queue = function() {'],[0,'            for (var i=0, len=this.layers.length; i&lt;len; i++) {'],[0,'                var layer = this.layers[i];'],[0,'                var geometryAttributes = this.getGeometryAttributes(layer);'],[0,'                var filters = [];'],[0,'                for (var j=0, lenj=geometryAttributes.length; j&lt;lenj; j++) {'],[0,'                    var geometryAttribute = geometryAttributes[j];'],[0,'                    if (geometryAttribute !== null) {'],[-1,'                        \/\/ from the click handler we will not get an actual '],[-1,'                        \/\/ geometry so transform'],[0,'                        if (!(geometry instanceof OpenLayers.Geometry)) {'],[0,'                            var point = this.map.getLonLatFromPixel('],[-1,'                                geometry.xy);'],[0,'                            geometry = new OpenLayers.Geometry.Point('],[-1,'                                point.lon, point.lat);'],[-1,'                        }'],[0,'                        var filter = this.createFilter(geometryAttribute,'],[-1,'                        geometry);'],[0,'                        if (filter !== null) {'],[0,'                            filters.push(filter);'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'    '],[0,'                var selectionLayer = this.createSelectionLayer(layer);'],[-1,'    '],[0,'                this.events.triggerEvent(\&quot;selected\&quot;, {'],[-1,'                    layer: layer,'],[-1,'                    filters: filters'],[-1,'                });'],[-1,''],[0,'                var sld = this.createSLD(layer, filters, geometryAttributes);'],[-1,'    '],[0,'                selectionLayer.mergeNewParams({SLD_BODY: sld});'],[0,'                delete this._queue;'],[-1,'            }'],[-1,'        };'],[0,'        this.applySelection();'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: applySelection'],[-1,'     * Checks if all required wfs data is cached, and applies the selection'],[-1,'     *\/'],[-1,'    applySelection: function() {'],[0,'        var canApply = true;'],[0,'        for (var i=0, len=this.layers.length; i&lt;len; i++) {'],[0,'            if(!this.wfsCache[this.layers[i].id]) {'],[0,'                canApply = false;'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[0,'        canApply &amp;&amp; this._queue.call(this);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.SLDSelect\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Graticule.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Lang.js'],[-1,' * @requires OpenLayers\/Rule.js'],[-1,' * @requires OpenLayers\/StyleMap.js'],[-1,' * @requires OpenLayers\/Layer\/Vector.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Graticule'],[-1,' * The Graticule displays a grid of latitude\/longitude lines reprojected on'],[-1,' * the map.  '],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *  '],[-1,' *\/'],[1,'OpenLayers.Control.Graticule = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: autoActivate'],[-1,'     * {Boolean} Activate the control when it is added to a map. Default is'],[-1,'     *     true. '],[-1,'     *\/'],[-1,'    autoActivate: true,'],[-1,'    '],[-1,'    \/**'],[-1,'    * APIProperty: intervals'],[-1,'    * {Array(Float)} A list of possible graticule widths in degrees.'],[-1,'    *\/'],[-1,'    intervals: [ 45, 30, 20, 10, 5, 2, 1,'],[-1,'                 0.5, 0.2, 0.1, 0.05, 0.01, '],[-1,'                 0.005, 0.002, 0.001 ],'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: displayInLayerSwitcher'],[-1,'     * {Boolean} Allows the Graticule control to be switched on and off by '],[-1,'     *     LayerSwitcher control. Defaults is true.'],[-1,'     *\/'],[-1,'    displayInLayerSwitcher: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: visible'],[-1,'     * {Boolean} should the graticule be initially visible (default=true)'],[-1,'     *\/'],[-1,'    visible: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: numPoints'],[-1,'     * {Integer} The number of points to use in each graticule line.  Higher'],[-1,'     * numbers result in a smoother curve for projected maps '],[-1,'     *\/'],[-1,'    numPoints: 50,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: targetSize'],[-1,'     * {Integer} The maximum size of the grid in pixels on the map'],[-1,'     *\/'],[-1,'    targetSize: 200,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layerName'],[-1,'     * {String} The name to be displayed in the layer switcher, default is set '],[-1,'     *     by {&lt;OpenLayers.Lang&gt;}.'],[-1,'     *\/'],[-1,'    layerName: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: labelled'],[-1,'     * {Boolean} Should the graticule lines be labelled?. default=true'],[-1,'     *\/'],[-1,'    labelled: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: labelFormat'],[-1,'     * {String} the format of the labels, default = \'dm\'. See'],[-1,'     * &lt;OpenLayers.Util.getFormattedLonLat&gt; for other options.'],[-1,'     *\/'],[-1,'    labelFormat: \'dm\','],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: lineSymbolizer'],[-1,'     * {symbolizer} the symbolizer used to render lines'],[-1,'     *\/'],[-1,'    lineSymbolizer: {'],[-1,'                strokeColor: \&quot;#333\&quot;,'],[-1,'                strokeWidth: 1,'],[-1,'                strokeOpacity: 0.5'],[-1,'            },'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: labelSymbolizer'],[-1,'     * {symbolizer} the symbolizer used to render labels'],[-1,'     *\/'],[-1,'     labelSymbolizer: {},'],[-1,''],[-1,'    \/**'],[-1,'     * Property: gratLayer'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;} vector layer used to draw the graticule on'],[-1,'     *\/'],[-1,'    gratLayer: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.Graticule'],[-1,'     * Create a new graticule control to display a grid of latitude longitude'],[-1,'     * lines.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be used'],[-1,'     *     to extend the control.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        options = options || {};'],[0,'        options.layerName = options.layerName || OpenLayers.i18n(\&quot;Graticule\&quot;);'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[-1,'        '],[0,'        this.labelSymbolizer.stroke = false;'],[0,'        this.labelSymbolizer.fill = false;'],[0,'        this.labelSymbolizer.label = \&quot;${label}\&quot;;'],[0,'        this.labelSymbolizer.labelAlign = \&quot;${labelAlign}\&quot;;'],[0,'        this.labelSymbolizer.labelXOffset = \&quot;${xOffset}\&quot;;'],[0,'        this.labelSymbolizer.labelYOffset = \&quot;${yOffset}\&quot;;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.deactivate();        '],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments);        '],[0,'        if (this.gratLayer) {'],[0,'            this.gratLayer.destroy();'],[0,'            this.gratLayer = null;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     *'],[-1,'     * initializes the graticule layer and does the initial update'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        OpenLayers.Control.prototype.draw.apply(this, arguments);'],[0,'        if (!this.gratLayer) {'],[0,'            var gratStyle = new OpenLayers.Style({},{'],[-1,'                rules: [new OpenLayers.Rule({\'symbolizer\':'],[-1,'                    {\&quot;Point\&quot;:this.labelSymbolizer,'],[-1,'                     \&quot;Line\&quot;:this.lineSymbolizer}'],[-1,'                })]'],[-1,'            });'],[0,'            this.gratLayer = new OpenLayers.Layer.Vector(this.layerName, {'],[-1,'                styleMap: new OpenLayers.StyleMap({\'default\':gratStyle}),'],[-1,'                visibility: this.visible,'],[-1,'                displayInLayerSwitcher: this.displayInLayerSwitcher'],[-1,'            });'],[-1,'        }'],[0,'        return this.div;'],[-1,'    },'],[-1,''],[-1,'     \/**'],[-1,'     * APIMethod: activate'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        if (OpenLayers.Control.prototype.activate.apply(this, arguments)) {'],[0,'            this.map.addLayer(this.gratLayer);'],[0,'            this.map.events.register(\'moveend\', this, this.update);     '],[0,'            this.update();'],[0,'            return true;            '],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        if (OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {'],[0,'            this.map.events.unregister(\'moveend\', this, this.update);'],[0,'            this.map.removeLayer(this.gratLayer);'],[0,'            return true;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,'    \/**'],[-1,'     * Method: update'],[-1,'     *'],[-1,'     * calculates the grid to be displayed and actually draws it'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    update: function() {'],[-1,'        \/\/wait for the map to be initialized before proceeding'],[0,'        var mapBounds = this.map.getExtent();'],[0,'        if (!mapBounds) {'],[0,'            return;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/clear out the old grid'],[0,'        this.gratLayer.destroyFeatures();'],[-1,'        '],[-1,'        \/\/get the projection objects required'],[0,'        var llProj = new OpenLayers.Projection(\&quot;EPSG:4326\&quot;);'],[0,'        var mapProj = this.map.getProjectionObject();'],[0,'        var mapRes = this.map.getResolution();'],[-1,'        '],[-1,'        \/\/if the map is in lon\/lat, then the lines are straight and only one'],[-1,'        \/\/point is required'],[0,'        if (mapProj.proj &amp;&amp; mapProj.proj.projName == \&quot;longlat\&quot;) {'],[0,'            this.numPoints = 1;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/get the map center in EPSG:4326'],[0,'        var mapCenter = this.map.getCenter(); \/\/lon and lat here are really map x and y'],[0,'        var mapCenterLL = new OpenLayers.Pixel(mapCenter.lon, mapCenter.lat);'],[0,'        OpenLayers.Projection.transform(mapCenterLL, mapProj, llProj);'],[-1,'        '],[-1,'        \/* This block of code determines the lon\/lat interval to use for the'],[-1,'         * grid by calculating the diagonal size of one grid cell at the map'],[-1,'         * center.  Iterates through the intervals array until the diagonal'],[-1,'         * length is less than the targetSize option.'],[-1,'         *\/'],[-1,'        \/\/find lat\/lon interval that results in a grid of less than the target size'],[0,'        var testSq = this.targetSize*mapRes;'],[0,'        testSq *= testSq;   \/\/compare squares rather than doing a square root to save time'],[0,'        var llInterval;'],[0,'        for (var i=0; i&lt;this.intervals.length; ++i) {'],[0,'            llInterval = this.intervals[i];   \/\/could do this for both x and y??'],[0,'            var delta = llInterval\/2;  '],[0,'            var p1 = mapCenterLL.offset({x: -delta, y: -delta});  \/\/test coords in EPSG:4326 space'],[0,'            var p2 = mapCenterLL.offset({x: delta, y: delta});'],[0,'            OpenLayers.Projection.transform(p1, llProj, mapProj); \/\/ convert them back to map projection'],[0,'            OpenLayers.Projection.transform(p2, llProj, mapProj);'],[0,'            var distSq = (p1.x-p2.x)*(p1.x-p2.x) + (p1.y-p2.y)*(p1.y-p2.y);'],[0,'            if (distSq &lt;= testSq) {'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[-1,'        \/\/alert(llInterval);'],[-1,'        '],[-1,'        \/\/round the LL center to an even number based on the interval'],[0,'        mapCenterLL.x = Math.floor(mapCenterLL.x\/llInterval)*llInterval;'],[0,'        mapCenterLL.y = Math.floor(mapCenterLL.y\/llInterval)*llInterval;'],[-1,'        \/\/TODO adjust for minutses\/seconds?'],[-1,'        '],[-1,'        \/* The following 2 blocks calculate the nodes of the grid along a '],[-1,'         * line of constant longitude (then latitiude) running through the'],[-1,'         * center of the map until it reaches the map edge.  The calculation'],[-1,'         * goes from the center in both directions to the edge.'],[-1,'         *\/'],[-1,'        \/\/get the central longitude line, increment the latitude'],[0,'        var iter = 0;'],[0,'        var centerLonPoints = [mapCenterLL.clone()];'],[0,'        var newPoint = mapCenterLL.clone();'],[0,'        var mapXY;'],[0,'        do {'],[0,'            newPoint = newPoint.offset({x: 0, y: llInterval});'],[0,'            mapXY = OpenLayers.Projection.transform(newPoint.clone(), llProj, mapProj);'],[0,'            centerLonPoints.unshift(newPoint);'],[-1,'        } while (mapBounds.containsPixel(mapXY) &amp;&amp; ++iter&lt;1000);'],[0,'        newPoint = mapCenterLL.clone();'],[0,'        do {          '],[0,'            newPoint = newPoint.offset({x: 0, y: -llInterval});'],[0,'            mapXY = OpenLayers.Projection.transform(newPoint.clone(), llProj, mapProj);'],[0,'            centerLonPoints.push(newPoint);'],[-1,'        } while (mapBounds.containsPixel(mapXY) &amp;&amp; ++iter&lt;1000);'],[-1,'        '],[-1,'        \/\/get the central latitude line, increment the longitude'],[0,'        iter = 0;'],[0,'        var centerLatPoints = [mapCenterLL.clone()];'],[0,'        newPoint = mapCenterLL.clone();'],[0,'        do {'],[0,'            newPoint = newPoint.offset({x: -llInterval, y: 0});'],[0,'            mapXY = OpenLayers.Projection.transform(newPoint.clone(), llProj, mapProj);'],[0,'            centerLatPoints.unshift(newPoint);'],[-1,'        } while (mapBounds.containsPixel(mapXY) &amp;&amp; ++iter&lt;1000);'],[0,'        newPoint = mapCenterLL.clone();'],[0,'        do {          '],[0,'            newPoint = newPoint.offset({x: llInterval, y: 0});'],[0,'            mapXY = OpenLayers.Projection.transform(newPoint.clone(), llProj, mapProj);'],[0,'            centerLatPoints.push(newPoint);'],[-1,'        } while (mapBounds.containsPixel(mapXY) &amp;&amp; ++iter&lt;1000);'],[-1,'        '],[-1,'        \/\/now generate a line for each node in the central lat and lon lines'],[-1,'        \/\/first loop over constant longitude'],[0,'        var lines = [];'],[0,'        for(var i=0; i &lt; centerLatPoints.length; ++i) {'],[0,'            var lon = centerLatPoints[i].x;'],[0,'            var pointList = [];'],[0,'            var labelPoint = null;'],[0,'            var latEnd = Math.min(centerLonPoints[0].y, 90);'],[0,'            var latStart = Math.max(centerLonPoints[centerLonPoints.length - 1].y, -90);'],[0,'            var latDelta = (latEnd - latStart)\/this.numPoints;'],[0,'            var lat = latStart;'],[0,'            for(var j=0; j&lt;= this.numPoints; ++j) {'],[0,'                var gridPoint = new OpenLayers.Geometry.Point(lon,lat);'],[0,'                gridPoint.transform(llProj, mapProj);'],[0,'                pointList.push(gridPoint);'],[0,'                lat += latDelta;'],[0,'                if (gridPoint.y &gt;= mapBounds.bottom &amp;&amp; !labelPoint) {'],[0,'                    labelPoint = gridPoint;'],[-1,'                }'],[-1,'            }'],[0,'            if (this.labelled) {'],[-1,'                \/\/keep track of when this grid line crosses the map bounds to set'],[-1,'                \/\/the label position'],[-1,'                \/\/labels along the bottom, add 10 pixel offset up into the map'],[-1,'                \/\/TODO add option for labels on top'],[0,'                var labelPos = new OpenLayers.Geometry.Point(labelPoint.x,mapBounds.bottom);'],[0,'                var labelAttrs = {'],[-1,'                    value: lon,'],[-1,'                    label: this.labelled?OpenLayers.Util.getFormattedLonLat(lon, \&quot;lon\&quot;, this.labelFormat):\&quot;\&quot;,'],[-1,'                    labelAlign: \&quot;cb\&quot;,'],[-1,'                    xOffset: 0,'],[-1,'                    yOffset: 2'],[-1,'                }; '],[0,'                this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(labelPos,labelAttrs));'],[-1,'            }'],[0,'            var geom = new OpenLayers.Geometry.LineString(pointList);'],[0,'            lines.push(new OpenLayers.Feature.Vector(geom));'],[-1,'        }'],[-1,'        '],[-1,'        \/\/now draw the lines of constant latitude'],[0,'        for (var j=0; j &lt; centerLonPoints.length; ++j) {'],[0,'            lat = centerLonPoints[j].y;'],[0,'            if (lat&lt;-90 || lat&gt;90) {  \/\/latitudes only valid between -90 and 90'],[0,'                continue;'],[-1,'            }'],[0,'            var pointList = [];'],[0,'            var lonStart = centerLatPoints[0].x;'],[0,'            var lonEnd = centerLatPoints[centerLatPoints.length - 1].x;'],[0,'            var lonDelta = (lonEnd - lonStart)\/this.numPoints;'],[0,'            var lon = lonStart;'],[0,'            var labelPoint = null;'],[0,'            for(var i=0; i &lt;= this.numPoints ; ++i) {'],[0,'                var gridPoint = new OpenLayers.Geometry.Point(lon,lat);'],[0,'                gridPoint.transform(llProj, mapProj);'],[0,'                pointList.push(gridPoint);'],[0,'                lon += lonDelta;'],[0,'                if (gridPoint.x &lt; mapBounds.right) {'],[0,'                    labelPoint = gridPoint;'],[-1,'                }'],[-1,'            }'],[0,'            if (this.labelled) {'],[-1,'                \/\/keep track of when this grid line crosses the map bounds to set'],[-1,'                \/\/the label position'],[-1,'                \/\/labels along the right, 30 pixel offset left into the map'],[-1,'                \/\/TODO add option for labels on left'],[0,'                var labelPos = new OpenLayers.Geometry.Point(mapBounds.right, labelPoint.y); '],[0,'                var labelAttrs = {'],[-1,'                    value: lat,'],[-1,'                    label: this.labelled?OpenLayers.Util.getFormattedLonLat(lat, \&quot;lat\&quot;, this.labelFormat):\&quot;\&quot;,'],[-1,'                    labelAlign: \&quot;rb\&quot;,'],[-1,'                    xOffset: -2,'],[-1,'                    yOffset: 2'],[-1,'                }; '],[0,'                this.gratLayer.addFeatures(new OpenLayers.Feature.Vector(labelPos,labelAttrs));'],[-1,'            }'],[0,'            var geom = new OpenLayers.Geometry.LineString(pointList);'],[0,'            lines.push(new OpenLayers.Feature.Vector(geom));'],[-1,'          }'],[0,'          this.gratLayer.addFeatures(lines);'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Graticule\&quot;'],[-1,'});'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/DragFeature.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Handler\/Drag.js'],[-1,' * @requires OpenLayers\/Handler\/Feature.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.DragFeature'],[-1,' * The DragFeature control moves a feature with a drag of the mouse. Create a'],[-1,' * new control with the &lt;OpenLayers.Control.DragFeature&gt; constructor.'],[-1,' *'],[-1,' * Inherits From:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.DragFeature = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: geometryTypes'],[-1,'     * {Array(String)} To restrict dragging to a limited set of geometry types,'],[-1,'     *     send a list of strings corresponding to the geometry class names.'],[-1,'     *\/'],[-1,'    geometryTypes: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: onStart'],[-1,'     * {Function} Define this function if you want to know when a drag starts.'],[-1,'     *     The function should expect to receive two arguments: the feature'],[-1,'     *     that is about to be dragged and the pixel location of the mouse.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The feature that is about to be'],[-1,'     *     dragged.'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} The pixel location of the mouse.'],[-1,'     *\/'],[-1,'    onStart: function(feature, pixel) {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: onDrag'],[-1,'     * {Function} Define this function if you want to know about each move of a'],[-1,'     *     feature. The function should expect to receive two arguments: the'],[-1,'     *     feature that is being dragged and the pixel location of the mouse.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The feature that was dragged.'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} The pixel location of the mouse.'],[-1,'     *\/'],[-1,'    onDrag: function(feature, pixel) {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: onComplete'],[-1,'     * {Function} Define this function if you want to know when a feature is'],[-1,'     *     done dragging. The function should expect to receive two arguments:'],[-1,'     *     the feature that is being dragged and the pixel location of the'],[-1,'     *     mouse.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The feature that was dragged.'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} The pixel location of the mouse.'],[-1,'     *\/'],[-1,'    onComplete: function(feature, pixel) {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: onEnter'],[-1,'     * {Function} Define this function if you want to know when the mouse'],[-1,'     *     goes over a feature and thereby makes this feature a candidate'],[-1,'     *     for dragging.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The feature that is ready'],[-1,'     *     to be dragged.'],[-1,'     *\/'],[-1,'    onEnter: function(feature) {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: onLeave'],[-1,'     * {Function} Define this function if you want to know when the mouse'],[-1,'     *     goes out of the feature that was dragged.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The feature that was dragged.'],[-1,'     *\/'],[-1,'    onLeave: function(feature) {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: documentDrag'],[-1,'     * {Boolean} If set to true, mouse dragging will continue even if the'],[-1,'     *     mouse cursor leaves the map viewport. Default is false.'],[-1,'     *\/'],[-1,'    documentDrag: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: layer'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;}'],[-1,'     *\/'],[-1,'    layer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: feature'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    feature: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: dragCallbacks'],[-1,'     * {Object} The functions that are sent to the drag handler for callback.'],[-1,'     *\/'],[-1,'    dragCallbacks: {},'],[-1,''],[-1,'    \/**'],[-1,'     * Property: featureCallbacks'],[-1,'     * {Object} The functions that are sent to the feature handler for callback.'],[-1,'     *\/'],[-1,'    featureCallbacks: {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: lastPixel'],[-1,'     * {&lt;OpenLayers.Pixel&gt;}'],[-1,'     *\/'],[-1,'    lastPixel: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.DragFeature'],[-1,'     * Create a new control to drag features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;} The layer containing features to be'],[-1,'     *     dragged.'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     control.'],[-1,'     *\/'],[-1,'    initialize: function(layer, options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[0,'        this.layer = layer;'],[0,'        this.handlers = {'],[-1,'            drag: new OpenLayers.Handler.Drag('],[-1,'                this, OpenLayers.Util.extend({'],[-1,'                    down: this.downFeature,'],[-1,'                    move: this.moveFeature,'],[-1,'                    up: this.upFeature,'],[-1,'                    out: this.cancel,'],[-1,'                    done: this.doneDragging'],[-1,'                }, this.dragCallbacks), {'],[-1,'                    documentDrag: this.documentDrag'],[-1,'                }'],[-1,'            ),'],[-1,'            feature: new OpenLayers.Handler.Feature('],[-1,'                this, this.layer, OpenLayers.Util.extend({'],[-1,'                    \/\/ \'click\' and \'clickout\' callback are for the mobile'],[-1,'                    \/\/ support: no \'over\' or \'out\' in touch based browsers.'],[-1,'                    click: this.clickFeature,'],[-1,'                    clickout: this.clickoutFeature,'],[-1,'                    over: this.overFeature,'],[-1,'                    out: this.outFeature'],[-1,'                }, this.featureCallbacks),'],[-1,'                {geometryTypes: this.geometryTypes}'],[-1,'            )'],[-1,'        };'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clickFeature'],[-1,'     * Called when the feature handler detects a click-in on a feature.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    clickFeature: function(feature) {'],[0,'        if (this.handlers.feature.touch &amp;&amp; !this.over &amp;&amp; this.overFeature(feature)) {'],[0,'            this.handlers.drag.dragstart(this.handlers.feature.evt);'],[-1,'            \/\/ to let the events propagate to the feature handler (click callback)'],[0,'            this.handlers.drag.stopDown = false;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clickoutFeature'],[-1,'     * Called when the feature handler detects a click-out on a feature.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    clickoutFeature: function(feature) {'],[0,'        if (this.handlers.feature.touch &amp;&amp; this.over) {'],[0,'            this.outFeature(feature);'],[0,'            this.handlers.drag.stopDown = true;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Take care of things that are not handled in superclass'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.layer = null;'],[0,'        OpenLayers.Control.prototype.destroy.apply(this, []);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Activate the control and the feature handler.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Successfully activated the control and feature handler.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        return (this.handlers.feature.activate() &amp;&amp;'],[-1,'                OpenLayers.Control.prototype.activate.apply(this, arguments));'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the control and all handlers.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {Boolean} Successfully deactivated the control.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[-1,'        \/\/ the return from the handlers is unimportant in this case'],[0,'        this.handlers.drag.deactivate();'],[0,'        this.handlers.feature.deactivate();'],[0,'        this.feature = null;'],[0,'        this.dragging = false;'],[0,'        this.lastPixel = null;'],[0,'        OpenLayers.Element.removeClass('],[-1,'            this.map.viewPortDiv, this.displayClass + \&quot;Over\&quot;'],[-1,'        );'],[0,'        return OpenLayers.Control.prototype.deactivate.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: overFeature'],[-1,'     * Called when the feature handler detects a mouse-over on a feature.'],[-1,'     *     This activates the drag handler.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The selected feature.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Successfully activated the drag handler.'],[-1,'     *\/'],[-1,'    overFeature: function(feature) {'],[0,'        var activated = false;'],[0,'        if(!this.handlers.drag.dragging) {'],[0,'            this.feature = feature;'],[0,'            this.handlers.drag.activate();'],[0,'            activated = true;'],[0,'            this.over = true;'],[0,'            OpenLayers.Element.addClass(this.map.viewPortDiv, this.displayClass + \&quot;Over\&quot;);'],[0,'            this.onEnter(feature);'],[-1,'        } else {'],[0,'            if(this.feature.id == feature.id) {'],[0,'                this.over = true;'],[-1,'            } else {'],[0,'                this.over = false;'],[-1,'            }'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: downFeature'],[-1,'     * Called when the drag handler detects a mouse-down.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} Location of the mouse event.'],[-1,'     *\/'],[-1,'    downFeature: function(pixel) {'],[0,'        this.lastPixel = pixel;'],[0,'        this.onStart(this.feature, pixel);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: moveFeature'],[-1,'     * Called when the drag handler detects a mouse-move.  Also calls the'],[-1,'     *     optional onDrag method.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} Location of the mouse event.'],[-1,'     *\/'],[-1,'    moveFeature: function(pixel) {'],[0,'        var res = this.map.getResolution();'],[0,'        this.feature.geometry.move(res * (pixel.x - this.lastPixel.x),'],[-1,'                                   res * (this.lastPixel.y - pixel.y));'],[0,'        this.layer.drawFeature(this.feature);'],[0,'        this.lastPixel = pixel;'],[0,'        this.onDrag(this.feature, pixel);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: upFeature'],[-1,'     * Called when the drag handler detects a mouse-up.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} Location of the mouse event.'],[-1,'     *\/'],[-1,'    upFeature: function(pixel) {'],[0,'        if(!this.over) {'],[0,'            this.handlers.drag.deactivate();'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: doneDragging'],[-1,'     * Called when the drag handler is done dragging.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * pixel - {&lt;OpenLayers.Pixel&gt;} The last event pixel location.  If this event'],[-1,'     *     came from a mouseout, this may not be in the map viewport.'],[-1,'     *\/'],[-1,'    doneDragging: function(pixel) {'],[0,'        this.onComplete(this.feature, pixel);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: outFeature'],[-1,'     * Called when the feature handler detects a mouse-out on a feature.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The feature that the mouse left.'],[-1,'     *\/'],[-1,'    outFeature: function(feature) {'],[0,'        if(!this.handlers.drag.dragging) {'],[0,'            this.over = false;'],[0,'            this.handlers.drag.deactivate();'],[0,'            OpenLayers.Element.removeClass('],[-1,'                this.map.viewPortDiv, this.displayClass + \&quot;Over\&quot;'],[-1,'            );'],[0,'            this.onLeave(feature);'],[0,'            this.feature = null;'],[-1,'        } else {'],[0,'            if(this.feature.id == feature.id) {'],[0,'                this.over = false;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'        '],[-1,'    \/**'],[-1,'     * Method: cancel'],[-1,'     * Called when the drag handler detects a mouse-out (from the map viewport).'],[-1,'     *\/'],[-1,'    cancel: function() {'],[0,'        this.handlers.drag.deactivate();'],[0,'        this.over = false;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     * Set the map property for the control and all handlers.'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * map - {&lt;OpenLayers.Map&gt;} The control\'s map.'],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        this.handlers.drag.setMap(map);'],[0,'        this.handlers.feature.setMap(map);'],[0,'        OpenLayers.Control.prototype.setMap.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.DragFeature\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/UTFGrid.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/XYZ.js'],[-1,' * @requires OpenLayers\/Tile\/UTFGrid.js'],[-1,' *\/'],[-1,''],[-1,'\/** '],[-1,' * Class: OpenLayers.Layer.UTFGrid'],[-1,' * This Layer reads from UTFGrid tiled data sources.  Since UTFGrids are '],[-1,' * essentially JSON-based ASCII art with attached attributes, they are not '],[-1,' * visibly rendered.  In order to use them in the map, you must add a '],[-1,' * &lt;OpenLayers.Control.UTFGrid&gt; control as well.'],[-1,' *'],[-1,' * Example:'],[-1,' *'],[-1,' * (start code)'],[-1,' * var world_utfgrid = new OpenLayers.Layer.UTFGrid({'],[-1,' *     url: \&quot;\/tiles\/world_utfgrid\/${z}\/${x}\/${y}.json\&quot;,'],[-1,' *     utfgridResolution: 4,'],[-1,' *     displayInLayerSwitcher: false'],[-1,' * );'],[-1,' * map.addLayer(world_utfgrid);'],[-1,' * '],[-1,' * var control = new OpenLayers.Control.UTFGrid({'],[-1,' *     layers: [world_utfgrid],'],[-1,' *     handlerMode: \'move\','],[-1,' *     callback: function(dataLookup) {'],[-1,' *         \/\/ do something with returned data'],[-1,' *     }'],[-1,' * })'],[-1,' * (end code)'],[-1,' *'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.XYZ&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.UTFGrid = OpenLayers.Class(OpenLayers.Layer.XYZ, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * Default is false, as UTFGrids are designed to be a transparent overlay layer. '],[-1,'     *\/'],[-1,'    isBaseLayer: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: projection'],[-1,'     * {&lt;OpenLayers.Projection&gt;}'],[-1,'     * Source projection for the UTFGrids.  Default is \&quot;EPSG:900913\&quot;.'],[-1,'     *\/'],[-1,'    projection: new OpenLayers.Projection(\&quot;EPSG:900913\&quot;),'],[-1,''],[-1,'    \/**'],[-1,'     * Property: useJSONP'],[-1,'     * {Boolean}'],[-1,'     * Should we use a JSONP script approach instead of a standard AJAX call?'],[-1,'     *'],[-1,'     * Set to true for using utfgrids from another server. '],[-1,'     * Avoids same-domain policy restrictions. '],[-1,'     * Note that this only works if the server accepts '],[-1,'     * the callback GET parameter and dynamically '],[-1,'     * wraps the returned json in a function call.'],[-1,'     * '],[-1,'     * Default is false'],[-1,'     *\/'],[-1,'    useJSONP: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: url'],[-1,'     * {String}'],[-1,'     * URL tempate for UTFGrid tiles.  Include x, y, and z parameters.'],[-1,'     * E.g. \&quot;\/tiles\/${z}\/${x}\/${y}.json\&quot;'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: utfgridResolution'],[-1,'     * {Number}'],[-1,'     * Ratio of the pixel width to the width of a UTFGrid data point.  If an '],[-1,'     *     entry in the grid represents a 4x4 block of pixels, the '],[-1,'     *     utfgridResolution would be 4.  Default is 2 (specified in '],[-1,'     *     &lt;OpenLayers.Tile.UTFGrid&gt;).'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: tileClass'],[-1,'     * {&lt;OpenLayers.Tile&gt;} The tile class to use for this layer.'],[-1,'     *     Defaults is &lt;OpenLayers.Tile.UTFGrid&gt;.'],[-1,'     *\/'],[-1,'    tileClass: OpenLayers.Tile.UTFGrid,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.UTFGrid'],[-1,'     * Create a new UTFGrid layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * config - {Object} Configuration properties for the layer.'],[-1,'     *'],[-1,'     * Required configuration properties:'],[-1,'     * url - {String} The url template for UTFGrid tiles.  See the &lt;url&gt; property.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply('],[-1,'            this, [options.name, options.url, {}, options]'],[-1,'        );'],[0,'        this.tileOptions = OpenLayers.Util.extend({'],[-1,'            utfgridResolution: this.utfgridResolution'],[-1,'        }, this.tileOptions);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createBackBuffer'],[-1,'     * The UTFGrid cannot create a back buffer, so this method is overriden.'],[-1,'     *\/'],[-1,'    createBackBuffer: function() {},'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * Create a clone of this layer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * obj - {Object} Only used by a subclass of this layer.'],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.UTFGrid&gt;} An exact clone of this OpenLayers.Layer.UTFGrid'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.UTFGrid(this.getOptions());'],[-1,'        }'],[-1,''],[-1,'        \/\/ get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);'],[-1,''],[0,'        return obj;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: getFeatureInfo'],[-1,'     * Get details about a feature associated with a map location.  The object'],[-1,'     *     returned will have id and data properties.  If the given location'],[-1,'     *     doesn\'t correspond to a feature, null will be returned.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * location - {&lt;OpenLayers.LonLat&gt;} map location'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Object} Object representing the feature id and UTFGrid data '],[-1,'     *     corresponding to the given map location.  Returns null if the given'],[-1,'     *     location doesn\'t hit a feature.'],[-1,'     *\/'],[-1,'    getFeatureInfo: function(location) {'],[0,'        var info = null;'],[0,'        var tileInfo = this.getTileData(location);'],[0,'        if (tileInfo &amp;&amp; tileInfo.tile) {'],[0,'            info = tileInfo.tile.getFeatureInfo(tileInfo.i, tileInfo.j);'],[-1,'        }'],[0,'        return info;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: getFeatureId'],[-1,'     * Get the identifier for the feature associated with a map location.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * location - {&lt;OpenLayers.LonLat&gt;} map location'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The feature identifier corresponding to the given map location.'],[-1,'     *     Returns null if the location doesn\'t hit a feature.'],[-1,'     *\/'],[-1,'    getFeatureId: function(location) {'],[0,'        var id = null;'],[0,'        var info = this.getTileData(location);'],[0,'        if (info.tile) {'],[0,'            id = info.tile.getFeatureId(info.i, info.j);'],[-1,'        }'],[0,'        return id;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.UTFGrid\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/TileManager.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' * @requires OpenLayers\/BaseTypes.js'],[-1,' * @requires OpenLayers\/BaseTypes\/Element.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.TileManager'],[-1,' * Provides queueing of image requests and caching of image elements.'],[-1,' *'],[-1,' * Queueing avoids unnecessary image requests while changing zoom levels'],[-1,' * quickly, and helps improve dragging performance on mobile devices that show'],[-1,' * a lag in dragging when loading of new images starts. &lt;zoomDelay&gt; and'],[-1,' * &lt;moveDelay&gt; are the configuration options to control this behavior.'],[-1,' *'],[-1,' * Caching avoids setting the src on image elements for images that have already'],[-1,' * been used. Several maps can share a TileManager instance, in which case each'],[-1,' * map gets its own tile queue, but all maps share the same tile cache.'],[-1,' *\/'],[1,'OpenLayers.TileManager = OpenLayers.Class({'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: cacheSize'],[-1,'     * {Number} Number of image elements to keep referenced in this instance\'s'],[-1,'     * cache for fast reuse. Default is 256.'],[-1,'     *\/'],[-1,'    cacheSize: 256,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: moveDelay'],[-1,'     * {Number} Delay in milliseconds after a map\'s move event before loading'],[-1,'     * tiles. Default is 100.'],[-1,'     *\/'],[-1,'    moveDelay: 100,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: zoomDelay'],[-1,'     * {Number} Delay in milliseconds after a map\'s zoomend event before loading'],[-1,'     * tiles. Default is 200.'],[-1,'     *\/'],[-1,'    zoomDelay: 200,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: maps'],[-1,'     * {Array(&lt;OpenLayers.Map&gt;)} The maps to manage tiles on.'],[-1,'     *\/'],[-1,'    maps: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: tileQueueId'],[-1,'     * {Object} The ids of the &lt;drawTilesFromQueue&gt; loop, keyed by map id.'],[-1,'     *\/'],[-1,'    tileQueueId: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: tileQueue'],[-1,'     * {Object(Array(&lt;OpenLayers.Tile&gt;))} Tiles queued for drawing, keyed by'],[-1,'     * map id.'],[-1,'     *\/'],[-1,'    tileQueue: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: tileCache'],[-1,'     * {Object} Cached image elements, keyed by URL.'],[-1,'     *\/'],[-1,'    tileCache: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: tileCacheIndex'],[-1,'     * {Array(String)} URLs of cached tiles. First entry is the least recently'],[-1,'     *    used.'],[-1,'     *\/'],[-1,'    tileCacheIndex: null,    '],[-1,'    '],[-1,'    \/** '],[-1,'     * Constructor: OpenLayers.TileManager'],[-1,'     * Constructor for a new &lt;OpenLayers.TileManager&gt; instance.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * options - {Object} Configuration for this instance.'],[-1,'     *\/   '],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Util.extend(this, options);'],[0,'        this.maps = [];'],[0,'        this.tileQueueId = {};'],[0,'        this.tileQueue = {};'],[0,'        this.tileCache = {};'],[0,'        this.tileCacheIndex = [];'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addMap'],[-1,'     * Binds this instance to a map'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    addMap: function(map) {'],[0,'        if (this._destroyed) {'],[0,'            return;'],[-1,'        }'],[0,'        this.maps.push(map);'],[0,'        this.tileQueue[map.id] = [];'],[0,'        for (var i=0, ii=map.layers.length; i&lt;ii; ++i) {'],[0,'            this.addLayer({layer: map.layers[i]});'],[-1,'        }'],[0,'        map.events.on({'],[-1,'            move: this.move,'],[-1,'            zoomend: this.zoomEnd,'],[-1,'            changelayer: this.changeLayer,'],[-1,'            addlayer: this.addLayer,'],[-1,'            preremovelayer: this.removeLayer,'],[-1,'            scope: this'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: removeMap'],[-1,'     * Unbinds this instance from a map'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    removeMap: function(map) {'],[0,'        if (this._destroyed) {'],[0,'            return;'],[-1,'        }'],[0,'        window.clearTimeout(this.tileQueueId[map.id]);'],[0,'        if (map.layers) {'],[0,'            for (var i=0, ii=map.layers.length; i&lt;ii; ++i) {'],[0,'                this.removeLayer({layer: map.layers[i]});'],[-1,'            }'],[-1,'        }'],[0,'        if (map.events) {'],[0,'            map.events.un({'],[-1,'                move: this.move,'],[-1,'                zoomend: this.zoomEnd,'],[-1,'                changelayer: this.changeLayer,'],[-1,'                addlayer: this.addLayer,'],[-1,'                preremovelayer: this.removeLayer,'],[-1,'                scope: this'],[-1,'            });'],[-1,'        }'],[0,'        delete this.tileQueue[map.id];'],[0,'        delete this.tileQueueId[map.id];'],[0,'        OpenLayers.Util.removeItem(this.maps, map);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: move'],[-1,'     * Handles the map\'s move event'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} Listener argument'],[-1,'     *\/'],[-1,'    move: function(evt) {'],[0,'        this.updateTimeout(evt.object, this.moveDelay);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: zoomEnd'],[-1,'     * Handles the map\'s zoomEnd event'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} Listener argument'],[-1,'     *\/'],[-1,'    zoomEnd: function(evt) {'],[0,'        this.updateTimeout(evt.object, this.zoomDelay);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: changeLayer'],[-1,'     * Handles the map\'s changeLayer event'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} Listener argument'],[-1,'     *\/'],[-1,'    changeLayer: function(evt) {'],[0,'        if (evt.property === \'visibility\' || evt.property === \'params\') {'],[0,'            this.updateTimeout(evt.object, 0);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addLayer'],[-1,'     * Handles the map\'s addlayer event'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} The listener argument'],[-1,'     *\/'],[-1,'    addLayer: function(evt) {'],[0,'        var layer = evt.layer;'],[0,'        if (layer instanceof OpenLayers.Layer.Grid) {'],[0,'            layer.events.on({'],[-1,'                addtile: this.addTile,'],[-1,'                retile: this.clearTileQueue,'],[-1,'                scope: this'],[-1,'            });'],[0,'            var i, j, tile;'],[0,'            for (i=layer.grid.length-1; i&gt;=0; --i) {'],[0,'                for (j=layer.grid[i].length-1; j&gt;=0; --j) {'],[0,'                    tile = layer.grid[i][j];'],[0,'                    this.addTile({tile: tile});'],[0,'                    if (tile.url) {'],[0,'                        this.manageTileCache({object: tile});'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: removeLayer'],[-1,'     * Handles the map\'s preremovelayer event'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} The listener argument'],[-1,'     *\/'],[-1,'    removeLayer: function(evt) {'],[0,'        var layer = evt.layer;'],[0,'        if (layer instanceof OpenLayers.Layer.Grid) {'],[0,'            this.clearTileQueue({object: layer});'],[0,'            if (layer.events) {'],[0,'                layer.events.un({'],[-1,'                    addtile: this.addTile,'],[-1,'                    retile: this.clearTileQueue,'],[-1,'                    scope: this'],[-1,'                });'],[-1,'            }'],[0,'            if (layer.grid) {'],[0,'                var i, j, tile;'],[0,'                for (i=layer.grid.length-1; i&gt;=0; --i) {'],[0,'                    for (j=layer.grid[i].length-1; j&gt;=0; --j) {'],[0,'                        tile = layer.grid[i][j];'],[0,'                        this.unloadTile({object: tile});'],[0,'                        if (tile.url) {'],[0,'                            this.manageTileCache({object: tile});'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: updateTimeout'],[-1,'     * Applies the &lt;moveDelay&gt; or &lt;zoomDelay&gt; to the &lt;drawTilesFromQueue&gt; loop.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;} The map to update the timeout for'],[-1,'     * delay - {Number} The delay to apply'],[-1,'     *\/'],[-1,'    updateTimeout: function(map, delay) {'],[0,'        window.clearTimeout(this.tileQueueId[map.id]);'],[0,'        if (this.tileQueue[map.id].length) {'],[0,'            this.tileQueueId[map.id] = window.setTimeout('],[-1,'                OpenLayers.Function.bind(function() {'],[0,'                    this.drawTilesFromQueue(map);'],[-1,'                }, this), delay'],[-1,'            );'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addTile'],[-1,'     * Listener for the layer\'s addtile event'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} The listener argument'],[-1,'     *\/'],[-1,'    addTile: function(evt) {'],[0,'        evt.tile.events.on({'],[-1,'            beforedraw: this.queueTileDraw,'],[-1,'            beforeload: this.manageTileCache,'],[-1,'            loadend: this.addToCache,'],[-1,'            unload: this.unloadTile,'],[-1,'            scope: this'],[-1,'        });        '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: unloadTile'],[-1,'     * Listener for the tile\'s unload event'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} The listener argument'],[-1,'     *\/'],[-1,'    unloadTile: function(evt) {'],[0,'        var tile = evt.object;'],[0,'        tile.events.un({'],[-1,'            beforedraw: this.queueTileDraw,'],[-1,'            beforeload: this.manageTileCache,'],[-1,'            loadend: this.addToCache,'],[-1,'            unload: this.unloadTile,'],[-1,'            scope: this'],[-1,'        });'],[0,'        OpenLayers.Util.removeItem(this.tileQueue[tile.layer.map.id], tile);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: queueTileDraw'],[-1,'     * Adds a tile to the queue that will draw it.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} Listener argument of the tile\'s beforedraw event'],[-1,'     *\/'],[-1,'    queueTileDraw: function(evt) {'],[0,'        var tile = evt.object;'],[0,'        var queued = false;'],[0,'        var layer = tile.layer;'],[0,'        var url = layer.getURL(tile.bounds);'],[0,'        var img = this.tileCache[url];'],[0,'        if (img &amp;&amp; img.className !== \'olTileImage\') {'],[-1,'            \/\/ cached image no longer valid, e.g. because we\'re olTileReplacing'],[0,'            delete this.tileCache[url];'],[0,'            OpenLayers.Util.removeItem(this.tileCacheIndex, url);'],[0,'            img = null;'],[-1,'        }'],[-1,'        \/\/ queue only if image with same url not cached already'],[0,'        if (layer.url &amp;&amp; (layer.async || !img)) {'],[-1,'            \/\/ add to queue only if not in queue already'],[0,'            var tileQueue = this.tileQueue[layer.map.id];'],[0,'            if (!~OpenLayers.Util.indexOf(tileQueue, tile)) {'],[0,'                tileQueue.push(tile);'],[-1,'            }'],[0,'            queued = true;'],[-1,'        }'],[0,'        return !queued;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawTilesFromQueue'],[-1,'     * Draws tiles from the tileQueue, and unqueues the tiles'],[-1,'     *\/'],[-1,'    drawTilesFromQueue: function(map) {'],[0,'        var tileQueue = this.tileQueue[map.id];'],[0,'        while (tileQueue.length) {'],[0,'            tileQueue.shift().draw(true);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: manageTileCache'],[-1,'     * Adds, updates, removes and fetches cache entries.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} Listener argument of the tile\'s beforeload event'],[-1,'     *\/'],[-1,'    manageTileCache: function(evt) {'],[0,'        var tile = evt.object;'],[0,'        var img = this.tileCache[tile.url];'],[-1,'        \/\/ only use image from cache if it is not on a layer already'],[0,'        if (img &amp;&amp; (!img.parentNode ||'],[-1,'                 OpenLayers.Element.hasClass(img.parentNode, \'olBackBuffer\'))) {'],[0,'            if (tile.layer.backBuffer) {'],[0,'                img.style.opacity = 0;'],[0,'                img.style.visibility = \'hidden\';'],[-1,'            }'],[-1,'            \/\/ Only backbuffer tiles have an id, so we don\'t want one here'],[0,'            img.id = null;'],[0,'            tile.setImage(img);'],[-1,'            \/\/ LRU - move tile to the end of the array to mark it as the most'],[-1,'            \/\/ recently used'],[0,'            OpenLayers.Util.removeItem(this.tileCacheIndex, tile.url);'],[0,'            this.tileCacheIndex.push(tile.url);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: addToCache'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} Listener argument for the tile\'s loadend event'],[-1,'     *\/'],[-1,'    addToCache: function(evt) {'],[0,'        var tile = evt.object;'],[0,'        if (!this.tileCache[tile.url]) {'],[0,'            if (!OpenLayers.Element.hasClass(tile.imgDiv, \'olImageLoadError\')) {'],[0,'                if (this.tileCacheIndex.length &gt;= this.cacheSize) {'],[0,'                    delete this.tileCache[this.tileCacheIndex[0]];'],[0,'                    this.tileCacheIndex.shift();'],[-1,'                }'],[0,'                this.tileCache[tile.url] = tile.imgDiv;'],[0,'                this.tileCacheIndex.push(tile.url);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clearTileQueue'],[-1,'     * Clears the tile queue from tiles of a specific layer'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object} Listener argument of the layer\'s retile event'],[-1,'     *\/'],[-1,'    clearTileQueue: function(evt) {'],[0,'        var layer = evt.object;'],[0,'        var tileQueue = this.tileQueue[layer.map.id];'],[0,'        for (var i=tileQueue.length-1; i&gt;=0; --i) {'],[0,'            if (tileQueue[i].layer === layer) {'],[0,'                tileQueue.splice(i, 1);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        for (var i=this.maps.length-1; i&gt;=0; --i) {'],[0,'            this.removeMap(this.maps[i]);'],[-1,'        }'],[0,'        this.maps = null;'],[0,'        this.tileQueue = null;'],[0,'        this.tileQueueId = null;'],[0,'        this.tileCache = null;'],[0,'        this.tileCacheIndex = null;'],[0,'        this._destroyed = true;'],[-1,'    }'],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Protocol\/Script.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Protocol.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Format\/GeoJSON.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * if application uses the query string, for example, for BBOX parameters,'],[-1,' * OpenLayers\/Format\/QueryStringFilter.js should be included in the build config file'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Protocol.Script'],[-1,' * A basic Script protocol for vector layers.  Create a new instance with the'],[-1,' *     &lt;OpenLayers.Protocol.Script&gt; constructor.  A script protocol is used to'],[-1,' *     get around the same origin policy.  It works with services that return'],[-1,' *     JSONP - that is, JSON wrapped in a client-specified callback.  The'],[-1,' *     protocol handles fetching and parsing of feature data and sends parsed'],[-1,' *     features to the &lt;callback&gt; configured with the protocol.  The protocol'],[-1,' *     expects features serialized as GeoJSON by default, but can be configured'],[-1,' *     to work with other formats by setting the &lt;format&gt; property.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Protocol&gt;'],[-1,' *\/'],[1,'OpenLayers.Protocol.Script = OpenLayers.Class(OpenLayers.Protocol, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: url'],[-1,'     * {String} Service URL.  The service is expected to return serialized '],[-1,'     *     features wrapped in a named callback (where the callback name is'],[-1,'     *     generated by this protocol).'],[-1,'     *     Read-only, set through the options passed to the constructor.'],[-1,'     *\/'],[-1,'    url: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: params'],[-1,'     * {Object} Query string parameters to be appended to the URL.'],[-1,'     *     Read-only, set through the options passed to the constructor.'],[-1,'     *     Example: {maxFeatures: 50}'],[-1,'     *\/'],[-1,'    params: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: callback'],[-1,'     * {Object} Function to be called when the &lt;read&gt; operation completes.'],[-1,'     *\/'],[-1,'    callback: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: callbackTemplate'],[-1,'     * {String} Template for creating a unique callback function name'],[-1,'     * for the registry. Should include ${id}.  The ${id} variable will be'],[-1,'     * replaced with a string identifier prefixed with a \&quot;c\&quot; (e.g. c1, c2).'],[-1,'     * Default is \&quot;OpenLayers.Protocol.Script.registry.${id}\&quot;.'],[-1,'     *\/'],[-1,'    callbackTemplate: \&quot;OpenLayers.Protocol.Script.registry.${id}\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: callbackKey'],[-1,'     * {String} The name of the query string parameter that the service '],[-1,'     *     recognizes as the callback identifier.  Default is \&quot;callback\&quot;.'],[-1,'     *     This key is used to generate the URL for the script.  For example'],[-1,'     *     setting &lt;callbackKey&gt; to \&quot;myCallback\&quot; would result in a URL like '],[-1,'     *     http:\/\/example.com\/?myCallback=...'],[-1,'     *\/'],[-1,'    callbackKey: \&quot;callback\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: callbackPrefix'],[-1,'     * {String} Where a service requires that the callback query string '],[-1,'     *     parameter value is prefixed by some string, this value may be set.'],[-1,'     *     For example, setting &lt;callbackPrefix&gt; to \&quot;foo:\&quot; would result in a'],[-1,'     *     URL like http:\/\/example.com\/?callback=foo:...  Default is \&quot;\&quot;.'],[-1,'     *\/'],[-1,'    callbackPrefix: \&quot;\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: scope'],[-1,'     * {Object} Optional ``this`` object for the callback. Read-only, set '],[-1,'     *     through the options passed to the constructor.'],[-1,'     *\/'],[-1,'    scope: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: format'],[-1,'     * {&lt;OpenLayers.Format&gt;} Format for parsing features.  Default is an '],[-1,'     *     &lt;OpenLayers.Format.GeoJSON&gt; format.  If an alternative is provided,'],[-1,'     *     the format\'s read method must take an object and return an array'],[-1,'     *     of features.'],[-1,'     *\/'],[-1,'    format: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: pendingRequests'],[-1,'     * {Object} References all pending requests.  Property names are script '],[-1,'     *     identifiers and property values are script elements.'],[-1,'     *\/'],[-1,'    pendingRequests: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: srsInBBOX'],[-1,'     * {Boolean} Include the SRS identifier in BBOX query string parameter.'],[-1,'     *     Setting this property has no effect if a custom filterToParams method'],[-1,'     *     is provided.   Default is false.  If true and the layer has a '],[-1,'     *     projection object set, any BBOX filter will be serialized with a '],[-1,'     *     fifth item identifying the projection.  '],[-1,'     *     E.g. bbox=-1000,-1000,1000,1000,EPSG:900913'],[-1,'     *\/'],[-1,'    srsInBBOX: false,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Protocol.Script'],[-1,'     * A class for giving layers generic Script protocol.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *'],[-1,'     * Valid options include:'],[-1,'     * url - {String}'],[-1,'     * params - {Object}'],[-1,'     * callback - {Function}'],[-1,'     * scope - {Object}'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        options = options || {};'],[0,'        this.params = {};'],[0,'        this.pendingRequests = {};'],[0,'        OpenLayers.Protocol.prototype.initialize.apply(this, arguments);'],[0,'        if (!this.format) {'],[0,'            this.format = new OpenLayers.Format.GeoJSON();'],[-1,'        }'],[-1,''],[0,'        if (!this.filterToParams &amp;&amp; OpenLayers.Format.QueryStringFilter) {'],[0,'            var format = new OpenLayers.Format.QueryStringFilter({'],[-1,'                srsInBBOX: this.srsInBBOX'],[-1,'            });'],[0,'            this.filterToParams = function(filter, params) {'],[0,'                return format.write(filter, params);'],[-1,'            };'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Construct a request for reading new features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object for configuring the request.'],[-1,'     *     This object is modified and should not be reused.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * url - {String} Url for the request.'],[-1,'     * params - {Object} Parameters to get serialized as a query string.'],[-1,'     * filter - {&lt;OpenLayers.Filter&gt;} Filter to get serialized as a'],[-1,'     *     query string.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Protocol.Response&gt;} A response object, whose \&quot;priv\&quot; property'],[-1,'     *     references the injected script.  This object is also passed to the'],[-1,'     *     callback function when the request completes, its \&quot;features\&quot; property'],[-1,'     *     is then populated with the features received from the server.'],[-1,'     *\/'],[-1,'    read: function(options) {'],[0,'        OpenLayers.Protocol.prototype.read.apply(this, arguments);'],[0,'        options = OpenLayers.Util.applyDefaults(options, this.options);'],[0,'        options.params = OpenLayers.Util.applyDefaults('],[-1,'            options.params, this.options.params'],[-1,'        );'],[0,'        if (options.filter &amp;&amp; this.filterToParams) {'],[0,'            options.params = this.filterToParams('],[-1,'                options.filter, options.params'],[-1,'            );'],[-1,'        }'],[0,'        var response = new OpenLayers.Protocol.Response({requestType: \&quot;read\&quot;});'],[0,'        var request = this.createRequest('],[-1,'            options.url, '],[-1,'            options.params, '],[-1,'            OpenLayers.Function.bind(function(data) {'],[0,'                response.data = data;'],[0,'                this.handleRead(response, options);'],[-1,'            }, this)'],[-1,'        );'],[0,'        response.priv = request;'],[0,'        return response;'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'     * APIMethod: filterToParams '],[-1,'     * Optional method to translate an &lt;OpenLayers.Filter&gt; object into an object '],[-1,'     *     that can be serialized as request query string provided.  If a custom '],[-1,'     *     method is not provided, any filter will not be serialized. '],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * filter - {&lt;OpenLayers.Filter&gt;} filter to convert. '],[-1,'     * params - {Object} The parameters object. '],[-1,'     * '],[-1,'     * Returns: '],[-1,'     * {Object} The resulting parameters object. '],[-1,'     *\/'],[-1,''],[-1,'    \/** '],[-1,'     * Method: createRequest'],[-1,'     * Issues a request for features by creating injecting a script in the '],[-1,'     *     document head.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * url - {String} Service URL.'],[-1,'     * params - {Object} Query string parameters.'],[-1,'     * callback - {Function} Callback to be called with resulting data.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {HTMLScriptElement} The script pending execution.'],[-1,'     *\/'],[-1,'    createRequest: function(url, params, callback) {'],[0,'        var id = OpenLayers.Protocol.Script.register(callback);'],[0,'        var name = OpenLayers.String.format(this.callbackTemplate, {id: id});'],[0,'        params = OpenLayers.Util.extend({}, params);'],[0,'        params[this.callbackKey] = this.callbackPrefix + name;'],[0,'        url = OpenLayers.Util.urlAppend('],[-1,'            url, OpenLayers.Util.getParameterString(params)'],[-1,'        );'],[0,'        var script = document.createElement(\&quot;script\&quot;);'],[0,'        script.type = \&quot;text\/javascript\&quot;;'],[0,'        script.src = url;'],[0,'        script.id = \&quot;OpenLayers_Protocol_Script_\&quot; + id;'],[0,'        this.pendingRequests[script.id] = script;'],[0,'        var head = document.getElementsByTagName(\&quot;head\&quot;)[0];'],[0,'        head.appendChild(script);'],[0,'        return script;'],[-1,'    },'],[-1,'    '],[-1,'    \/** '],[-1,'     * Method: destroyRequest'],[-1,'     * Remove a script node associated with a response from the document.  Also'],[-1,'     *     unregisters the callback and removes the script from the '],[-1,'     *     &lt;pendingRequests&gt; object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * script - {HTMLScriptElement}'],[-1,'     *\/'],[-1,'    destroyRequest: function(script) {'],[0,'        OpenLayers.Protocol.Script.unregister(script.id.split(\&quot;_\&quot;).pop());'],[0,'        delete this.pendingRequests[script.id];'],[0,'        if (script.parentNode) {'],[0,'            script.parentNode.removeChild(script);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleRead'],[-1,'     * Individual callbacks are created for read, create and update, should'],[-1,'     *     a subclass need to override each one separately.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * response - {&lt;OpenLayers.Protocol.Response&gt;} The response object to pass to'],[-1,'     *     the user callback.'],[-1,'     * options - {Object} The user options passed to the read call.'],[-1,'     *\/'],[-1,'    handleRead: function(response, options) {'],[0,'        this.handleResponse(response, options);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleResponse'],[-1,'     * Called by CRUD specific handlers.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * response - {&lt;OpenLayers.Protocol.Response&gt;} The response object to pass to'],[-1,'     *     any user callback.'],[-1,'     * options - {Object} The user options passed to the create, read, update,'],[-1,'     *     or delete call.'],[-1,'     *\/'],[-1,'    handleResponse: function(response, options) {'],[0,'        if (options.callback) {'],[0,'            if (response.data) {'],[0,'                response.features = this.parseFeatures(response.data);'],[0,'                response.code = OpenLayers.Protocol.Response.SUCCESS;'],[-1,'            } else {'],[0,'                response.code = OpenLayers.Protocol.Response.FAILURE;'],[-1,'            }'],[0,'            this.destroyRequest(response.priv);'],[0,'            options.callback.call(options.scope, response);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseFeatures'],[-1,'     * Read Script response body and return features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * data - {Object} The data sent to the callback function by the server.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array({&lt;OpenLayers.Feature.Vector&gt;})} or'],[-1,'     *     {&lt;OpenLayers.Feature.Vector&gt;} Array of features or a single feature.'],[-1,'     *\/'],[-1,'    parseFeatures: function(data) {'],[0,'        return this.format.read(data);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: abort'],[-1,'     * Abort an ongoing request.  If no response is provided, all pending '],[-1,'     *     requests will be aborted.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * response - {&lt;OpenLayers.Protocol.Response&gt;} The response object returned'],[-1,'     *     from a &lt;read&gt; request.'],[-1,'     *\/'],[-1,'    abort: function(response) {'],[0,'        if (response) {'],[0,'            this.destroyRequest(response.priv);'],[-1,'        } else {'],[0,'            for (var key in this.pendingRequests) {'],[0,'                this.destroyRequest(this.pendingRequests[key]);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Clean up the protocol.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.abort();'],[0,'        delete this.params;'],[0,'        delete this.format;'],[0,'        OpenLayers.Protocol.prototype.destroy.apply(this);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Protocol.Script\&quot; '],[-1,'});'],[-1,''],[1,'(function() {'],[1,'    var o = OpenLayers.Protocol.Script;'],[1,'    var counter = 0;'],[1,'    o.registry = {};'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: OpenLayers.Protocol.Script.register'],[-1,'     * Register a callback for a newly created script.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * callback - {Function} The callback to be executed when the newly added'],[-1,'     *     script loads.  This callback will be called with a single argument'],[-1,'     *     that is the JSON returned by the service.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Number} An identifier for retrieving the registered callback.'],[-1,'     *\/'],[1,'    o.register = function(callback) {'],[0,'        var id = \&quot;c\&quot;+(++counter);'],[0,'        o.registry[id] = function() {'],[0,'            callback.apply(this, arguments);'],[-1,'        };'],[0,'        return id;'],[-1,'    };'],[-1,'    '],[-1,'    \/**'],[-1,'     * Function: OpenLayers.Protocol.Script.unregister'],[-1,'     * Unregister a callback previously registered with the register function.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * id - {Number} The identifer returned by the register function.'],[-1,'     *\/'],[1,'    o.unregister = function(id) {'],[0,'        delete o.registry[id];'],[-1,'    };'],[-1,'})();'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/TransformFeature.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Control\/DragFeature.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' * @requires OpenLayers\/Geometry\/LineString.js'],[-1,' * @requires OpenLayers\/Geometry\/Point.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.TransformFeature'],[-1,' * Control to transform features with a standard transformation box.'],[-1,' *'],[-1,' * Inherits From:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.TransformFeature = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to those from &lt;OpenLayers.Control.events&gt;):'],[-1,'     * beforesetfeature - Triggered before a feature is set for'],[-1,'     *     tranformation. The feature will not be set if a listener returns'],[-1,'     *     false. Listeners receive a *feature* property, with the feature'],[-1,'     *     that will be set for transformation. Listeners are allowed to'],[-1,'     *     set the control\'s *scale*, *ratio* and *rotation* properties,'],[-1,'     *     which will set the initial scale, ratio and rotation of the'],[-1,'     *     feature, like the &lt;setFeature&gt; method\'s initialParams argument.'],[-1,'     * setfeature - Triggered when a feature is set for tranformation.'],[-1,'     *     Listeners receive a *feature* property, with the feature that'],[-1,'     *     is now set for transformation.'],[-1,'     * beforetransform - Triggered while dragging, before a feature is'],[-1,'     *     transformed. The feature will not be transformed if a listener'],[-1,'     *     returns false (but the box still will). Listeners receive one or'],[-1,'     *     more of *center*, *scale*, *ratio* and *rotation*. The *center*'],[-1,'     *     property is an &lt;OpenLayers.Geometry.Point&gt; object with the new'],[-1,'     *     center of the transformed feature, the others are Floats with the'],[-1,'     *     scale, ratio or rotation change since the last transformation.'],[-1,'     * transform - Triggered while dragging, when a feature is transformed.'],[-1,'     *     Listeners receive an event object with one or more of *center*,'],[-1,'     *     scale*, *ratio* and *rotation*. The *center* property is an'],[-1,'     *     &lt;OpenLayers.Geometry.Point&gt; object with the new center of the'],[-1,'     *     transformed feature, the others are Floats with the scale, ratio'],[-1,'     *     or rotation change of the feature since the last transformation.'],[-1,'     * transformcomplete - Triggered after dragging. Listeners receive'],[-1,'     *     an event object with the transformed *feature*.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: geometryTypes'],[-1,'     * {Array(String)} To restrict transformation to a limited set of geometry'],[-1,'     *     types, send a list of strings corresponding to the geometry class'],[-1,'     *     names.'],[-1,'     *\/'],[-1,'    geometryTypes: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layer'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;}'],[-1,'     *\/'],[-1,'    layer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: preserveAspectRatio'],[-1,'     * {Boolean} set to true to not change the feature\'s aspect ratio.'],[-1,'     *\/'],[-1,'    preserveAspectRatio: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: rotate'],[-1,'     * {Boolean} set to false if rotation should be disabled. Default is true.'],[-1,'     *     To be passed with the constructor or set when the control is not'],[-1,'     *     active.'],[-1,'     *\/'],[-1,'    rotate: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: feature'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} Feature currently available for'],[-1,'     *     transformation. Read-only, use &lt;setFeature&gt; to set it manually.'],[-1,'     *\/'],[-1,'    feature: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: renderIntent'],[-1,'     * {String|Object} Render intent for the transformation box and'],[-1,'     *     handles. A symbolizer object can also be provided here.'],[-1,'     *\/'],[-1,'    renderIntent: \&quot;temporary\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: rotationHandleSymbolizer'],[-1,'     * {Object|String} Optional. A custom symbolizer for the rotation handles.'],[-1,'     *     A render intent can also be provided here. Defaults to'],[-1,'     *     (code)'],[-1,'     *     {'],[-1,'     *         stroke: false,'],[-1,'     *         pointRadius: 10,'],[-1,'     *         fillOpacity: 0,'],[-1,'     *         cursor: \&quot;pointer\&quot;'],[-1,'     *     }'],[-1,'     *     (end)'],[-1,'     *\/'],[-1,'    rotationHandleSymbolizer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: box'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;} The transformation box rectangle.'],[-1,'     *     Read-only.'],[-1,'     *\/'],[-1,'    box: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: center'],[-1,'     * {&lt;OpenLayers.Geometry.Point&gt;} The center of the feature bounds.'],[-1,'     * Read-only.'],[-1,'     *\/'],[-1,'    center: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: scale'],[-1,'     * {Float} The scale of the feature, relative to the scale the time the'],[-1,'     *     feature was set. Read-only, except for *beforesetfeature*'],[-1,'     *     listeners.'],[-1,'     *\/'],[-1,'    scale: 1,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: ratio'],[-1,'     * {Float} The ratio of the feature relative to the ratio the time the'],[-1,'     *     feature was set. Read-only, except for *beforesetfeature*'],[-1,'     *     listeners.'],[-1,'     *\/'],[-1,'    ratio: 1,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: rotation'],[-1,'     * {Integer} the current rotation angle of the box. Read-only, except for'],[-1,'     *     *beforesetfeature* listeners.'],[-1,'     *\/'],[-1,'    rotation: 0,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: handles'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} The 8 handles currently available'],[-1,'     *     for scaling\/resizing. Numbered counterclockwise, starting from the'],[-1,'     *     southwest corner. Read-only.'],[-1,'     *\/'],[-1,'    handles: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: rotationHandles'],[-1,'     * {Array(&lt;OpenLayers.Feature.Vector&gt;)} The 4 rotation handles currently'],[-1,'     *     available for rotating. Numbered counterclockwise, starting from'],[-1,'     *     the southwest corner. Read-only.'],[-1,'     *\/'],[-1,'    rotationHandles: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: dragControl'],[-1,'     * {&lt;OpenLayers.Control.DragFeature&gt;}'],[-1,'     *\/'],[-1,'    dragControl: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: irregular'],[-1,'     * {Boolean} Make scaling\/resizing work irregularly. If true then'],[-1,'     *     dragging a handle causes the feature to resize in the direction'],[-1,'     *     of movement. If false then the feature resizes symetrically'],[-1,'     *     about it\'s center.'],[-1,'     *\/'],[-1,'    irregular: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.TransformFeature'],[-1,'     * Create a new transform feature control.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;} Layer that contains features that'],[-1,'     *     will be transformed.'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     control.'],[-1,'     *\/'],[-1,'    initialize: function(layer, options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[-1,''],[0,'        this.layer = layer;'],[-1,''],[0,'        if(!this.rotationHandleSymbolizer) {'],[0,'            this.rotationHandleSymbolizer = {'],[-1,'                stroke: false,'],[-1,'                pointRadius: 10,'],[-1,'                fillOpacity: 0,'],[-1,'                cursor: \&quot;pointer\&quot;'],[-1,'            };'],[-1,'        }'],[-1,''],[0,'        this.createBox();'],[0,'        this.createControl();        '],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Activates the control.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = false;'],[0,'        if(OpenLayers.Control.prototype.activate.apply(this, arguments)) {'],[0,'            this.dragControl.activate();'],[0,'            this.layer.addFeatures([this.box]);'],[0,'            this.rotate &amp;&amp; this.layer.addFeatures(this.rotationHandles);'],[0,'            this.layer.addFeatures(this.handles);        '],[0,'            activated = true;'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivates the control.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = false;'],[0,'        if(OpenLayers.Control.prototype.deactivate.apply(this, arguments)) {'],[0,'            this.layer.removeFeatures(this.handles);'],[0,'            this.rotate &amp;&amp; this.layer.removeFeatures(this.rotationHandles);'],[0,'            this.layer.removeFeatures([this.box]);'],[0,'            this.dragControl.deactivate();'],[0,'            deactivated = true;'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        this.dragControl.setMap(map);'],[0,'        OpenLayers.Control.prototype.setMap.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setFeature'],[-1,'     * Place the transformation box on a feature and start transforming it.'],[-1,'     * If the control is not active, it will be activated.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     * initialParams - {Object} Initial values for rotation, scale or ratio.'],[-1,'     *     Setting a rotation value here will cause the transformation box to'],[-1,'     *     start rotated. Setting a scale or ratio will not affect the'],[-1,'     *     transormation box, but applications may use this to keep track of'],[-1,'     *     scale and ratio of a feature across multiple transforms.'],[-1,'     *\/'],[-1,'    setFeature: function(feature, initialParams) {'],[0,'        initialParams = OpenLayers.Util.applyDefaults(initialParams, {'],[-1,'            rotation: 0,'],[-1,'            scale: 1,'],[-1,'            ratio: 1'],[-1,'        });'],[-1,''],[0,'        var oldRotation = this.rotation;'],[0,'        var oldCenter = this.center;'],[0,'        OpenLayers.Util.extend(this, initialParams);'],[-1,''],[0,'        var cont = this.events.triggerEvent(\&quot;beforesetfeature\&quot;,'],[-1,'            {feature: feature}'],[-1,'        );'],[0,'        if (cont === false) {'],[0,'            return;'],[-1,'        }'],[-1,''],[0,'        this.feature = feature;'],[0,'        this.activate();'],[-1,''],[0,'        this._setfeature = true;'],[-1,''],[0,'        var featureBounds = this.feature.geometry.getBounds();'],[0,'        this.box.move(featureBounds.getCenterLonLat());'],[0,'        this.box.geometry.rotate(-oldRotation, oldCenter);'],[0,'        this._angle = 0;'],[-1,''],[0,'        var ll;'],[0,'        if(this.rotation) {'],[0,'            var geom = feature.geometry.clone();'],[0,'            geom.rotate(-this.rotation, this.center);'],[0,'            var box = new OpenLayers.Feature.Vector('],[-1,'                geom.getBounds().toGeometry());'],[0,'            box.geometry.rotate(this.rotation, this.center);'],[0,'            this.box.geometry.rotate(this.rotation, this.center);'],[0,'            this.box.move(box.geometry.getBounds().getCenterLonLat());'],[0,'            var llGeom = box.geometry.components[0].components[0];'],[0,'            ll = llGeom.getBounds().getCenterLonLat();'],[-1,'        } else {'],[0,'            ll = new OpenLayers.LonLat(featureBounds.left, featureBounds.bottom);'],[-1,'        }'],[0,'        this.handles[0].move(ll);'],[-1,'        '],[0,'        delete this._setfeature;'],[-1,''],[0,'        this.events.triggerEvent(\&quot;setfeature\&quot;, {feature: feature});'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: unsetFeature'],[-1,'     * Remove the transformation box off any feature.'],[-1,'     * If the control is active, it will be deactivated first.'],[-1,'     *\/'],[-1,'    unsetFeature: function() {'],[0,'        if (this.active) {'],[0,'            this.deactivate();'],[-1,'        } else {'],[0,'            this.feature = null;'],[0,'            this.rotation = 0;'],[0,'            this.scale = 1;'],[0,'            this.ratio = 1;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createBox'],[-1,'     * Creates the box with all handles and transformation handles.'],[-1,'     *\/'],[-1,'    createBox: function() {'],[0,'        var control = this;'],[-1,'        '],[0,'        this.center = new OpenLayers.Geometry.Point(0, 0);'],[0,'        this.box = new OpenLayers.Feature.Vector('],[-1,'            new OpenLayers.Geometry.LineString(['],[-1,'                new OpenLayers.Geometry.Point(-1, -1),'],[-1,'                new OpenLayers.Geometry.Point(0, -1),'],[-1,'                new OpenLayers.Geometry.Point(1, -1),'],[-1,'                new OpenLayers.Geometry.Point(1, 0),'],[-1,'                new OpenLayers.Geometry.Point(1, 1),'],[-1,'                new OpenLayers.Geometry.Point(0, 1),'],[-1,'                new OpenLayers.Geometry.Point(-1, 1),'],[-1,'                new OpenLayers.Geometry.Point(-1, 0),'],[-1,'                new OpenLayers.Geometry.Point(-1, -1)'],[-1,'            ]), null,'],[-1,'            typeof this.renderIntent == \&quot;string\&quot; ? null : this.renderIntent'],[-1,'        );'],[-1,'        '],[-1,'        \/\/ Override for box move - make sure that the center gets updated'],[0,'        this.box.geometry.move = function(x, y) {'],[0,'            control._moving = true;'],[0,'            OpenLayers.Geometry.LineString.prototype.move.apply(this, arguments);'],[0,'            control.center.move(x, y);'],[0,'            delete control._moving;'],[-1,'        };'],[-1,''],[-1,'        \/\/ Overrides for vertex move, resize and rotate - make sure that'],[-1,'        \/\/ handle and rotationHandle geometries are also moved, resized and'],[-1,'        \/\/ rotated.'],[0,'        var vertexMoveFn = function(x, y) {'],[0,'            OpenLayers.Geometry.Point.prototype.move.apply(this, arguments);'],[0,'            this._rotationHandle &amp;&amp; this._rotationHandle.geometry.move(x, y);'],[0,'            this._handle.geometry.move(x, y);'],[-1,'        };'],[0,'        var vertexResizeFn = function(scale, center, ratio) {'],[0,'            OpenLayers.Geometry.Point.prototype.resize.apply(this, arguments);'],[0,'            this._rotationHandle &amp;&amp; this._rotationHandle.geometry.resize('],[-1,'                scale, center, ratio);'],[0,'            this._handle.geometry.resize(scale, center, ratio);'],[-1,'        };'],[0,'        var vertexRotateFn = function(angle, center) {'],[0,'            OpenLayers.Geometry.Point.prototype.rotate.apply(this, arguments);'],[0,'            this._rotationHandle &amp;&amp; this._rotationHandle.geometry.rotate('],[-1,'                angle, center);'],[0,'            this._handle.geometry.rotate(angle, center);'],[-1,'        };'],[-1,'        '],[-1,'        \/\/ Override for handle move - make sure that the box and other handles'],[-1,'        \/\/ are updated, and finally transform the feature.'],[0,'        var handleMoveFn = function(x, y) {'],[0,'            var oldX = this.x, oldY = this.y;'],[0,'            OpenLayers.Geometry.Point.prototype.move.call(this, x, y);'],[0,'            if(control._moving) {'],[0,'                return;'],[-1,'            }'],[0,'            var evt = control.dragControl.handlers.drag.evt;'],[0,'            var preserveAspectRatio = !control._setfeature &amp;&amp;'],[-1,'                control.preserveAspectRatio;'],[0,'            var reshape = !preserveAspectRatio &amp;&amp; !(evt &amp;&amp; evt.shiftKey);'],[0,'            var oldGeom = new OpenLayers.Geometry.Point(oldX, oldY);'],[0,'            var centerGeometry = control.center;'],[0,'            this.rotate(-control.rotation, centerGeometry);'],[0,'            oldGeom.rotate(-control.rotation, centerGeometry);'],[0,'            var dx1 = this.x - centerGeometry.x;'],[0,'            var dy1 = this.y - centerGeometry.y;'],[0,'            var dx0 = dx1 - (this.x - oldGeom.x);'],[0,'            var dy0 = dy1 - (this.y - oldGeom.y);'],[0,'            if (control.irregular &amp;&amp; !control._setfeature) {'],[0,'               dx1 -= (this.x - oldGeom.x) \/ 2;'],[0,'               dy1 -= (this.y - oldGeom.y) \/ 2;'],[-1,'            }'],[0,'            this.x = oldX;'],[0,'            this.y = oldY;'],[0,'            var scale, ratio = 1;'],[0,'            if (reshape) {'],[0,'                scale = Math.abs(dy0) &lt; 0.00001 ? 1 : dy1 \/ dy0;'],[0,'                ratio = (Math.abs(dx0) &lt; 0.00001 ? 1 : (dx1 \/ dx0)) \/ scale;'],[-1,'            } else {'],[0,'                var l0 = Math.sqrt((dx0 * dx0) + (dy0 * dy0));'],[0,'                var l1 = Math.sqrt((dx1 * dx1) + (dy1 * dy1));'],[0,'                scale = l1 \/ l0;'],[-1,'            }'],[-1,''],[-1,'            \/\/ rotate the box to 0 before resizing - saves us some'],[-1,'            \/\/ calculations and is inexpensive because we don\'t drawFeature.'],[0,'            control._moving = true;'],[0,'            control.box.geometry.rotate(-control.rotation, centerGeometry);'],[0,'            delete control._moving;'],[-1,''],[0,'            control.box.geometry.resize(scale, centerGeometry, ratio);'],[0,'            control.box.geometry.rotate(control.rotation, centerGeometry);'],[0,'            control.transformFeature({scale: scale, ratio: ratio});'],[0,'            if (control.irregular &amp;&amp; !control._setfeature) {'],[0,'               var newCenter = centerGeometry.clone();'],[0,'               newCenter.x += Math.abs(oldX - centerGeometry.x) &lt; 0.00001 ? 0 : (this.x - oldX);'],[0,'               newCenter.y += Math.abs(oldY - centerGeometry.y) &lt; 0.00001 ? 0 : (this.y - oldY);'],[0,'               control.box.geometry.move(this.x - oldX, this.y - oldY);'],[0,'               control.transformFeature({center: newCenter});'],[-1,'            }'],[-1,'        };'],[-1,'        '],[-1,'        \/\/ Override for rotation handle move - make sure that the box and'],[-1,'        \/\/ other handles are updated, and finally transform the feature.'],[0,'        var rotationHandleMoveFn = function(x, y){'],[0,'            var oldX = this.x, oldY = this.y;'],[0,'            OpenLayers.Geometry.Point.prototype.move.call(this, x, y);'],[0,'            if(control._moving) {'],[0,'                return;'],[-1,'            }'],[0,'            var evt = control.dragControl.handlers.drag.evt;'],[0,'            var constrain = (evt &amp;&amp; evt.shiftKey) ? 45 : 1;'],[0,'            var centerGeometry = control.center;'],[0,'            var dx1 = this.x - centerGeometry.x;'],[0,'            var dy1 = this.y - centerGeometry.y;'],[0,'            var dx0 = dx1 - x;'],[0,'            var dy0 = dy1 - y;'],[0,'            this.x = oldX;'],[0,'            this.y = oldY;'],[0,'            var a0 = Math.atan2(dy0, dx0);'],[0,'            var a1 = Math.atan2(dy1, dx1);'],[0,'            var angle = a1 - a0;'],[0,'            angle *= 180 \/ Math.PI;'],[0,'            control._angle = (control._angle + angle) % 360;'],[0,'            var diff = control.rotation % constrain;'],[0,'            if(Math.abs(control._angle) &gt;= constrain || diff !== 0) {'],[0,'                angle = Math.round(control._angle \/ constrain) * constrain -'],[-1,'                    diff;'],[0,'                control._angle = 0;'],[0,'                control.box.geometry.rotate(angle, centerGeometry);'],[0,'                control.transformFeature({rotation: angle});'],[-1,'            } '],[-1,'        };'],[-1,''],[0,'        var handles = new Array(8);'],[0,'        var rotationHandles = new Array(4);'],[0,'        var geom, handle, rotationHandle;'],[0,'        var positions = [\&quot;sw\&quot;, \&quot;s\&quot;, \&quot;se\&quot;, \&quot;e\&quot;, \&quot;ne\&quot;, \&quot;n\&quot;, \&quot;nw\&quot;, \&quot;w\&quot;];'],[0,'        for(var i=0; i&lt;8; ++i) {'],[0,'            geom = this.box.geometry.components[i];'],[0,'            handle = new OpenLayers.Feature.Vector(geom.clone(), {'],[-1,'                role: positions[i] + \&quot;-resize\&quot;'],[-1,'            }, typeof this.renderIntent == \&quot;string\&quot; ? null :'],[-1,'                this.renderIntent);'],[0,'            if(i % 2 == 0) {'],[0,'                rotationHandle = new OpenLayers.Feature.Vector(geom.clone(), {'],[-1,'                    role: positions[i] + \&quot;-rotate\&quot;'],[-1,'                }, typeof this.rotationHandleSymbolizer == \&quot;string\&quot; ?'],[-1,'                    null : this.rotationHandleSymbolizer);'],[0,'                rotationHandle.geometry.move = rotationHandleMoveFn;'],[0,'                geom._rotationHandle = rotationHandle;'],[0,'                rotationHandles[i\/2] = rotationHandle;'],[-1,'            }'],[0,'            geom.move = vertexMoveFn;'],[0,'            geom.resize = vertexResizeFn;'],[0,'            geom.rotate = vertexRotateFn;'],[0,'            handle.geometry.move = handleMoveFn;'],[0,'            geom._handle = handle;'],[0,'            handles[i] = handle;'],[-1,'        }'],[-1,'        '],[0,'        this.rotationHandles = rotationHandles;'],[0,'        this.handles = handles;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createControl'],[-1,'     * Creates a DragFeature control for this control.'],[-1,'     *\/'],[-1,'    createControl: function() {'],[0,'        var control = this;'],[0,'        this.dragControl = new OpenLayers.Control.DragFeature(this.layer, {'],[-1,'            documentDrag: true,'],[-1,'            \/\/ avoid moving the feature itself - move the box instead'],[-1,'            moveFeature: function(pixel) {'],[0,'                if(this.feature === control.feature) {'],[0,'                    this.feature = control.box;'],[-1,'                }'],[0,'                OpenLayers.Control.DragFeature.prototype.moveFeature.apply(this,'],[-1,'                    arguments);'],[-1,'            },'],[-1,'            \/\/ transform while dragging'],[-1,'            onDrag: function(feature, pixel) {'],[0,'                if(feature === control.box) {'],[0,'                    control.transformFeature({center: control.center});'],[-1,'                }'],[-1,'            },'],[-1,'            \/\/ set a new feature'],[-1,'            onStart: function(feature, pixel) {'],[0,'                var eligible = !control.geometryTypes ||'],[-1,'                    OpenLayers.Util.indexOf(control.geometryTypes,'],[-1,'                        feature.geometry.CLASS_NAME) !== -1;'],[0,'                var i = OpenLayers.Util.indexOf(control.handles, feature);'],[0,'                i += OpenLayers.Util.indexOf(control.rotationHandles,'],[-1,'                    feature);'],[0,'                if(feature !== control.feature &amp;&amp; feature !== control.box &amp;&amp;'],[-1,'                                                        i == -2 &amp;&amp; eligible) {'],[0,'                    control.setFeature(feature);'],[-1,'                }'],[-1,'            },'],[-1,'            onComplete: function(feature, pixel) {'],[0,'                control.events.triggerEvent(\&quot;transformcomplete\&quot;,'],[-1,'                    {feature: control.feature});'],[-1,'            }'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: drawHandles'],[-1,'     * Draws the handles to match the box.'],[-1,'     *\/'],[-1,'    drawHandles: function() {'],[0,'        var layer = this.layer;'],[0,'        for(var i=0; i&lt;8; ++i) {'],[0,'            if(this.rotate &amp;&amp; i % 2 === 0) {'],[0,'                layer.drawFeature(this.rotationHandles[i\/2],'],[-1,'                    this.rotationHandleSymbolizer);'],[-1,'            }'],[0,'            layer.drawFeature(this.handles[i], this.renderIntent);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: transformFeature'],[-1,'     * Transforms the feature.'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * mods - {Object} An object with optional scale, ratio, rotation and'],[-1,'     *     center properties.'],[-1,'     *\/'],[-1,'    transformFeature: function(mods) {'],[0,'        if(!this._setfeature) {'],[0,'            this.scale *= (mods.scale || 1);'],[0,'            this.ratio *= (mods.ratio || 1);'],[0,'            var oldRotation = this.rotation;'],[0,'            this.rotation = (this.rotation + (mods.rotation || 0)) % 360;'],[-1,'            '],[0,'            if(this.events.triggerEvent(\&quot;beforetransform\&quot;, mods) !== false) {'],[0,'                var feature = this.feature;'],[0,'                var geom = feature.geometry;'],[0,'                var center = this.center;'],[0,'                geom.rotate(-oldRotation, center);'],[0,'                if(mods.scale || mods.ratio) {'],[0,'                    geom.resize(mods.scale, center, mods.ratio);'],[0,'                } else if(mods.center) {'],[0,'                    feature.move(mods.center.getBounds().getCenterLonLat());'],[-1,'                }'],[0,'                geom.rotate(this.rotation, center);'],[0,'                this.layer.drawFeature(feature);'],[0,'                feature.toState(OpenLayers.State.UPDATE);'],[0,'                this.events.triggerEvent(\&quot;transform\&quot;, mods);'],[-1,'            }'],[-1,'        }'],[0,'        this.layer.drawFeature(this.box, this.renderIntent);'],[0,'        this.drawHandles();'],[-1,'    },'],[-1,'        '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Take care of things that are not handled in superclass.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        var geom;'],[0,'        for(var i=0; i&lt;8; ++i) {'],[0,'            geom = this.box.geometry.components[i];'],[0,'            geom._handle.destroy();'],[0,'            geom._handle = null;'],[0,'            geom._rotationHandle &amp;&amp; geom._rotationHandle.destroy();'],[0,'            geom._rotationHandle = null;'],[-1,'        }'],[0,'        this.center = null;'],[0,'        this.feature = null;'],[0,'        this.handles = null;'],[0,'        this.rotationHandleSymbolizer = null;'],[0,'        this.rotationHandles = null;'],[0,'        this.box.destroy();'],[0,'        this.box = null;'],[0,'        this.layer = null;'],[0,'        this.dragControl.destroy();'],[0,'        this.dragControl = null;'],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.TransformFeature\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/ArcGISCache.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/** '],[-1,' * @requires OpenLayers\/Layer\/XYZ.js'],[-1,' *\/ '],[-1,''],[-1,'\/** '],[-1,' * Class: OpenLayers.Layer.ArcGISCache   '],[-1,' * Layer for accessing cached map tiles from an ArcGIS Server style mapcache. '],[-1,' * Tile must already be cached for this layer to access it. This does not require '],[-1,' * ArcGIS Server itself.'],[-1,' * '],[-1,' * A few attempts have been made at this kind of layer before. See '],[-1,' * http:\/\/trac.osgeo.org\/openlayers\/ticket\/1967 '],[-1,' * and '],[-1,' * http:\/\/trac.osgeo.org\/openlayers\/browser\/sandbox\/tschaub\/arcgiscache\/lib\/OpenLayers\/Layer\/ArcGISCache.js'],[-1,' *'],[-1,' * Typically the problem encountered is that the tiles seem to \&quot;jump around\&quot;.'],[-1,' * This is due to the fact that the actual max extent for the tiles on AGS layers'],[-1,' * changes at each zoom level due to the way these caches are constructed.'],[-1,' * We have attempted to use the resolutions, tile size, and tile origin'],[-1,' * from the cache meta data to make the appropriate changes to the max extent'],[-1,' * of the tile to compensate for this behavior.  This must be done as zoom levels change'],[-1,' * and before tiles are requested, which is why methods from base classes are overridden.'],[-1,' *'],[-1,' * For reference, you can access mapcache meta data in two ways. For accessing a '],[-1,' * mapcache through ArcGIS Server, you can simply go to the landing page for the'],[-1,' * layer. (ie. http:\/\/services.arcgisonline.com\/ArcGIS\/rest\/services\/World_Street_Map\/MapServer)'],[-1,' * For accessing it directly through HTTP, there should always be a conf.xml file'],[-1,' * in the root directory. '],[-1,' * (ie. http:\/\/serverx.esri.com\/arcgiscache\/DG_County_roads_yesA_backgroundDark\/Layers\/conf.xml)'],[-1,' *  '],[-1,' *Inherits from: '],[-1,' *  - &lt;OpenLayers.Layer.XYZ&gt;             '],[-1,' *\/    '],[1,'OpenLayers.Layer.ArcGISCache = OpenLayers.Class(OpenLayers.Layer.XYZ, {  '],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: url'],[-1,'     * {String | Array} The base URL for the layer cache.  You can also'],[-1,'     *     provide a list of URL strings for the layer if your cache is'],[-1,'     *     available from multiple origins.  This must be set before the layer'],[-1,'     *     is drawn.'],[-1,'     *\/'],[-1,'    url: null,'],[-1,'    '],[-1,'   \/**'],[-1,'    * APIProperty: tileOrigin'],[-1,'    * {&lt;OpenLayers.LonLat&gt;} The location of the tile origin for the cache.'],[-1,'    *     An ArcGIS cache has it\'s origin at the upper-left (lowest x value'],[-1,'    *     and highest y value of the coordinate system).  The units for the'],[-1,'    *     tile origin should be the same as the units for the cached data.'],[-1,'    *\/'],[-1,'    tileOrigin: null, '],[-1,'   '],[-1,'   \/**'],[-1,'    * APIProperty: tileSize'],[-1,'    * {&lt;OpenLayers.Size&gt;} This size of each tile. Defaults to 256 by 256 pixels.'],[-1,'    *\/'],[-1,'    tileSize: new OpenLayers.Size(256, 256),'],[-1,'    '],[-1,'   \/**'],[-1,'    * APIProperty: useAGS'],[-1,'    * {Boolean} Indicates if we are going to be accessing the ArcGIS Server (AGS)'],[-1,'    *     cache via an AGS MapServer or directly through HTTP. When accessing via'],[-1,'    *     AGS the path structure uses a standard z\/y\/x structure. But AGS actually'],[-1,'    *     stores the tile images on disk using a hex based folder structure that looks'],[-1,'    *     like \&quot;http:\/\/example.com\/mylayer\/L00\/R00000000\/C00000000.png\&quot;.  Learn more'],[-1,'    *     about this here:'],[-1,'    *     http:\/\/blogs.esri.com\/Support\/blogs\/mappingcenter\/archive\/2010\/08\/20\/Checking-Your-Local-Cache-Folders.aspx'],[-1,'    *     Defaults to true;'],[-1,'    *\/    '],[-1,'    useArcGISServer: true,'],[-1,''],[-1,'   \/**'],[-1,'    * APIProperty: type'],[-1,'    * {String} Image type for the layer.  This becomes the filename extension'],[-1,'    *     in tile requests.  Default is \&quot;png\&quot; (generating a url like'],[-1,'    *     \&quot;http:\/\/example.com\/mylayer\/L00\/R00000000\/C00000000.png\&quot;).'],[-1,'    *\/'],[-1,'    type: \'png\','],[-1,'    '],[-1,'    \/**'],[-1,'    * APIProperty: useScales'],[-1,'    * {Boolean} Optional override to indicate that the layer should use \'scale\' information'],[-1,'    *     returned from the server capabilities object instead of \'resolution\' information.'],[-1,'    *     This can be important if your tile server uses an unusual DPI for the tiles.'],[-1,'    *\/'],[-1,'    useScales: false,'],[-1,'    '],[-1,'   \/**'],[-1,'    * APIProperty: overrideDPI'],[-1,'    * {Boolean} Optional override to change the OpenLayers.DOTS_PER_INCH setting based '],[-1,'    *     on the tile information in the server capabilities object.  This can be useful '],[-1,'    *     if your server has a non-standard DPI setting on its tiles, and you\'re only using '],[-1,'    *     tiles with that DPI.  This value is used while OpenLayers is calculating resolution'],[-1,'    *     using scales, and is not necessary if you have resolution information. (This is'],[-1,'    *     typically the case)  Regardless, this setting can be useful, but is dangerous'],[-1,'    *     because it will impact other layers while calculating resolution.  Only use this'],[-1,'    *     if you know what you are doing.  (See OpenLayers.Util.getResolutionFromScale)'],[-1,'    *\/'],[-1,'    overrideDPI: false,'],[-1,'    '],[-1,'   \/**'],[-1,'    * Constructor: OpenLayers.Layer.ArcGISCache '],[-1,'    * Creates a new instance of this class '],[-1,'    * '],[-1,'    * Parameters: '],[-1,'    * name - {String} '],[-1,'    * url - {String} '],[-1,'    * options - {Object} extra layer options'],[-1,'    *\/ '],[-1,'    initialize: function(name, url, options) { '],[0,'        OpenLayers.Layer.XYZ.prototype.initialize.apply(this, arguments);'],[-1,''],[0,'        if (this.resolutions) {        '],[0,'            this.serverResolutions = this.resolutions;'],[0,'            this.maxExtent = this.getMaxExtentForResolution(this.resolutions[0]);'],[-1,'        }'],[-1,''],[-1,'        \/\/ this block steps through translating the values from the server layer JSON '],[-1,'        \/\/ capabilities object into values that we can use.  This is also a helpful'],[-1,'        \/\/ reference when configuring this layer directly.'],[0,'        if (this.layerInfo) {'],[-1,'            \/\/ alias the object'],[0,'            var info = this.layerInfo;'],[-1,'            '],[-1,'            \/\/ build our extents'],[0,'            var startingTileExtent = new OpenLayers.Bounds('],[-1,'                info.fullExtent.xmin, '],[-1,'                info.fullExtent.ymin, '],[-1,'                info.fullExtent.xmax, '],[-1,'                info.fullExtent.ymax  '],[-1,'            );'],[-1,''],[-1,'            \/\/ set our projection based on the given spatial reference.'],[-1,'            \/\/ esri uses slightly different IDs, so this may not be comprehensive'],[0,'            this.projection = \'EPSG:\' + info.spatialReference.wkid;'],[0,'            this.sphericalMercator = (info.spatialReference.wkid == 102100);'],[-1,'            '],[-1,'            \/\/ convert esri units into openlayers units (basic feet or meters only)'],[0,'            this.units = (info.units == \&quot;esriFeet\&quot;) ? \'ft\' : \'m\';'],[-1,''],[-1,'            \/\/ optional extended section based on whether or not the server returned'],[-1,'            \/\/ specific tile information'],[0,'            if (!!info.tileInfo) {            '],[-1,'                \/\/ either set the tiles based on rows\/columns, or specific width\/height'],[0,'                this.tileSize = new OpenLayers.Size('],[-1,'                    info.tileInfo.width || info.tileInfo.cols, '],[-1,'                    info.tileInfo.height || info.tileInfo.rows'],[-1,'                );'],[-1,'                '],[-1,'                \/\/ this must be set when manually configuring this layer'],[0,'                this.tileOrigin = new OpenLayers.LonLat('],[-1,'                    info.tileInfo.origin.x, '],[-1,'                    info.tileInfo.origin.y'],[-1,'                );'],[-1,''],[0,'                var upperLeft = new OpenLayers.Geometry.Point('],[-1,'                    startingTileExtent.left, '],[-1,'                    startingTileExtent.top'],[-1,'                );'],[-1,'                '],[0,'                var bottomRight = new OpenLayers.Geometry.Point('],[-1,'                    startingTileExtent.right, '],[-1,'                    startingTileExtent.bottom'],[-1,'                );            '],[-1,'                '],[0,'                if (this.useScales) {'],[0,'                    this.scales = [];'],[-1,'                } else {'],[0,'                    this.resolutions = [];'],[-1,'                }'],[-1,'                '],[0,'                this.lods = [];'],[0,'                for(var key in info.tileInfo.lods) {'],[0,'                    if (info.tileInfo.lods.hasOwnProperty(key)) {'],[0,'                        var lod = info.tileInfo.lods[key];'],[0,'                        if (this.useScales) {'],[0,'                            this.scales.push(lod.scale);'],[-1,'                        } else {'],[0,'                            this.resolutions.push(lod.resolution);'],[-1,'                        }'],[-1,'                    '],[0,'                        var start = this.getContainingTileCoords(upperLeft, lod.resolution);'],[0,'                        lod.startTileCol = start.x;'],[0,'                        lod.startTileRow = start.y;'],[-1,'                    '],[0,'                        var end = this.getContainingTileCoords(bottomRight, lod.resolution);'],[0,'                        lod.endTileCol = end.x;'],[0,'                        lod.endTileRow = end.y;    '],[0,'                        this.lods.push(lod);'],[-1,'                    }'],[-1,'                }'],[-1,''],[0,'                this.maxExtent = this.calculateMaxExtentWithLOD(this.lods[0]);'],[0,'                this.serverResolutions = this.resolutions;'],[0,'                if (this.overrideDPI &amp;&amp; info.tileInfo.dpi) {'],[-1,'                    \/\/ see comment above for \'overrideDPI\''],[0,'                    OpenLayers.DOTS_PER_INCH = info.tileInfo.dpi;'],[-1,'                }'],[-1,'            } '],[-1,'       }'],[-1,'    }, '],[-1,''],[-1,'   \/** '],[-1,'    * Method: getContainingTileCoords'],[-1,'    * Calculates the x\/y pixel corresponding to the position of the tile'],[-1,'    *     that contains the given point and for the for the given resolution.'],[-1,'    * '],[-1,'    * Parameters:'],[-1,'    * point - {&lt;OpenLayers.Geometry.Point&gt;} '],[-1,'    * res - {Float} The resolution for which to compute the extent.'],[-1,'    * '],[-1,'    * Returns: '],[-1,'    * {&lt;OpenLayers.Pixel&gt;} The x\/y pixel corresponding to the position '],[-1,'    * of the upper left tile for the given resolution.'],[-1,'    *\/'],[-1,'    getContainingTileCoords: function(point, res) {'],[0,'        return new OpenLayers.Pixel('],[-1,'           Math.max(Math.floor((point.x - this.tileOrigin.lon) \/ (this.tileSize.w * res)),0),'],[-1,'           Math.max(Math.floor((this.tileOrigin.lat - point.y) \/ (this.tileSize.h * res)),0)'],[-1,'        );'],[-1,'    },'],[-1,'    '],[-1,'   \/** '],[-1,'    * Method: calculateMaxExtentWithLOD'],[-1,'    * Given a Level of Detail object from the server, this function'],[-1,'    *     calculates the actual max extent'],[-1,'    * '],[-1,'    * Parameters: '],[-1,'    * lod - {Object} a Level of Detail Object from the server capabilities object '],[-1,'            representing a particular zoom level'],[-1,'    * '],[-1,'    * Returns: '],[-1,'    * {&lt;OpenLayers.Bounds&gt;} The actual extent of the tiles for the given zoom level'],[-1,'    *\/'],[-1,'   calculateMaxExtentWithLOD: function(lod) {'],[-1,'        \/\/ the max extent we\'re provided with just overlaps some tiles'],[-1,'        \/\/ our real extent is the bounds of all the tiles we touch'],[-1,''],[0,'        var numTileCols = (lod.endTileCol - lod.startTileCol) + 1;'],[0,'        var numTileRows = (lod.endTileRow - lod.startTileRow) + 1;        '],[-1,''],[0,'        var minX = this.tileOrigin.lon + (lod.startTileCol * this.tileSize.w * lod.resolution);'],[0,'        var maxX = minX + (numTileCols * this.tileSize.w * lod.resolution);'],[-1,''],[0,'        var maxY = this.tileOrigin.lat - (lod.startTileRow * this.tileSize.h * lod.resolution);'],[0,'        var minY = maxY - (numTileRows * this.tileSize.h * lod.resolution);'],[0,'        return new OpenLayers.Bounds(minX, minY, maxX, maxY);'],[-1,'   },'],[-1,'    '],[-1,'   \/** '],[-1,'    * Method: calculateMaxExtentWithExtent'],[-1,'    * Given a \'suggested\' max extent from the server, this function uses'],[-1,'    *     information about the actual tile sizes to determine the actual'],[-1,'    *     extent of the layer.'],[-1,'    * '],[-1,'    * Parameters: '],[-1,'    * extent - {&lt;OpenLayers.Bounds&gt;} The \'suggested\' extent for the layer'],[-1,'    * res - {Float} The resolution for which to compute the extent.'],[-1,'    * '],[-1,'    * Returns: '],[-1,'    * {&lt;OpenLayers.Bounds&gt;} The actual extent of the tiles for the given zoom level'],[-1,'    *\/'],[-1,'   calculateMaxExtentWithExtent: function(extent, res) {'],[0,'        var upperLeft = new OpenLayers.Geometry.Point(extent.left, extent.top);'],[0,'        var bottomRight = new OpenLayers.Geometry.Point(extent.right, extent.bottom);'],[0,'        var start = this.getContainingTileCoords(upperLeft, res);'],[0,'        var end = this.getContainingTileCoords(bottomRight, res);'],[0,'        var lod = {'],[-1,'            resolution: res,'],[-1,'            startTileCol: start.x,'],[-1,'            startTileRow: start.y,'],[-1,'            endTileCol: end.x,'],[-1,'            endTileRow: end.y'],[-1,'        };'],[0,'        return this.calculateMaxExtentWithLOD(lod);'],[-1,'   },'],[-1,'    '],[-1,'    \/** '],[-1,'    * Method: getUpperLeftTileCoord'],[-1,'    * Calculates the x\/y pixel corresponding to the position '],[-1,'    *     of the upper left tile for the given resolution.'],[-1,'    * '],[-1,'    * Parameters: '],[-1,'    * res - {Float} The resolution for which to compute the extent.'],[-1,'    * '],[-1,'    * Returns: '],[-1,'    * {&lt;OpenLayers.Pixel&gt;} The x\/y pixel corresponding to the position '],[-1,'    * of the upper left tile for the given resolution.'],[-1,'    *\/'],[-1,'    getUpperLeftTileCoord: function(res) {'],[0,'        var upperLeft = new OpenLayers.Geometry.Point('],[-1,'            this.maxExtent.left,'],[-1,'            this.maxExtent.top);'],[0,'        return this.getContainingTileCoords(upperLeft, res);'],[-1,'    },'],[-1,''],[-1,'    \/** '],[-1,'    * Method: getLowerRightTileCoord'],[-1,'    * Calculates the x\/y pixel corresponding to the position '],[-1,'    *     of the lower right tile for the given resolution.'],[-1,'    *  '],[-1,'    * Parameters: '],[-1,'    * res - {Float} The resolution for which to compute the extent.'],[-1,'    * '],[-1,'    * Returns: '],[-1,'    * {&lt;OpenLayers.Pixel&gt;} The x\/y pixel corresponding to the position'],[-1,'    * of the lower right tile for the given resolution.'],[-1,'    *\/'],[-1,'    getLowerRightTileCoord: function(res) {'],[0,'        var bottomRight = new OpenLayers.Geometry.Point('],[-1,'            this.maxExtent.right,'],[-1,'            this.maxExtent.bottom);'],[0,'        return this.getContainingTileCoords(bottomRight, res);'],[-1,'    },'],[-1,'    '],[-1,'   \/** '],[-1,'    * Method: getMaxExtentForResolution'],[-1,'    * Since the max extent of a set of tiles can change from zoom level'],[-1,'    *     to zoom level, we need to be able to calculate that max extent '],[-1,'    *     for a given resolution.'],[-1,'    *'],[-1,'    * Parameters: '],[-1,'    * res - {Float} The resolution for which to compute the extent.'],[-1,'    * '],[-1,'    * Returns: '],[-1,'    * {&lt;OpenLayers.Bounds&gt;} The extent for this resolution'],[-1,'    *\/ '],[-1,'    getMaxExtentForResolution: function(res) {'],[0,'        var start = this.getUpperLeftTileCoord(res);'],[0,'        var end = this.getLowerRightTileCoord(res);'],[-1,''],[0,'        var numTileCols = (end.x - start.x) + 1;'],[0,'        var numTileRows = (end.y - start.y) + 1;'],[-1,''],[0,'        var minX = this.tileOrigin.lon + (start.x * this.tileSize.w * res);'],[0,'        var maxX = minX + (numTileCols * this.tileSize.w * res);'],[-1,'        '],[0,'        var maxY = this.tileOrigin.lat - (start.y * this.tileSize.h * res);'],[0,'        var minY = maxY - (numTileRows * this.tileSize.h * res);'],[0,'        return new OpenLayers.Bounds(minX, minY, maxX, maxY);'],[-1,'    },'],[-1,'    '],[-1,'   \/** '],[-1,'    * APIMethod: clone '],[-1,'    * Returns an exact clone of this OpenLayers.Layer.ArcGISCache'],[-1,'    * '],[-1,'    * Parameters: '],[-1,'    * [obj] - {Object} optional object to assign the cloned instance to.'],[-1,'    *  '],[-1,'    * Returns: '],[-1,'    * {&lt;OpenLayers.Layer.ArcGISCache&gt;} clone of this instance '],[-1,'    *\/ '],[-1,'    clone: function (obj) { '],[0,'        if (obj == null) { '],[0,'            obj = new OpenLayers.Layer.ArcGISCache(this.name, this.url, this.options);'],[-1,'        }'],[0,'        return OpenLayers.Layer.XYZ.prototype.clone.apply(this, [obj]);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: initGriddedTiles'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    initGriddedTiles: function(bounds) {'],[0,'        delete this._tileOrigin;'],[0,'        OpenLayers.Layer.XYZ.prototype.initGriddedTiles.apply(this, arguments);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getMaxExtent'],[-1,'     * Get this layer\'s maximum extent.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Bounds&gt;}'],[-1,'     *\/'],[-1,'    getMaxExtent: function() {'],[0,'        var resolution = this.map.getResolution();'],[0,'        return this.maxExtent = this.getMaxExtentForResolution(resolution);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getTileOrigin'],[-1,'     * Determine the origin for aligning the grid of tiles.  '],[-1,'     *     The origin will be derived from the layer\'s &lt;maxExtent&gt; property. '],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.LonLat&gt;} The tile origin.'],[-1,'     *\/'],[-1,'    getTileOrigin: function() {'],[0,'        if (!this._tileOrigin) {'],[0,'            var extent = this.getMaxExtent();'],[0,'            this._tileOrigin = new OpenLayers.LonLat(extent.left, extent.bottom);'],[-1,'        }'],[0,'        return this._tileOrigin;'],[-1,'    },'],[-1,''],[-1,'   \/**'],[-1,'    * Method: getURL'],[-1,'    * Determine the URL for a tile given the tile bounds.  This is should support'],[-1,'    *     urls that access tiles through an ArcGIS Server MapServer or directly through'],[-1,'    *     the hex folder structure using HTTP.  Just be sure to set the useArcGISServer'],[-1,'    *     property appropriately!  This is basically the same as '],[-1,'    *     \'OpenLayers.Layer.TMS.getURL\',  but with the addition of hex addressing,'],[-1,'    *     and tile rounding.'],[-1,'    *'],[-1,'    * Parameters:'],[-1,'    * bounds - {&lt;OpenLayers.Bounds&gt;}'],[-1,'    *'],[-1,'    * Returns:'],[-1,'    * {String} The URL for a tile based on given bounds.'],[-1,'    *\/'],[-1,'    getURL: function (bounds) {'],[0,'        var res = this.getResolution(); '],[-1,''],[-1,'        \/\/ tile center'],[0,'        var originTileX = (this.tileOrigin.lon + (res * this.tileSize.w\/2)); '],[0,'        var originTileY = (this.tileOrigin.lat - (res * this.tileSize.h\/2));'],[-1,''],[0,'        var center = bounds.getCenterLonLat();'],[0,'        var point = { x: center.lon, y: center.lat };'],[0,'        var x = (Math.round(Math.abs((center.lon - originTileX) \/ (res * this.tileSize.w)))); '],[0,'        var y = (Math.round(Math.abs((originTileY - center.lat) \/ (res * this.tileSize.h)))); '],[0,'        var z = this.map.getZoom();'],[-1,''],[-1,'        \/\/ this prevents us from getting pink tiles (non-existant tiles)'],[0,'        if (this.lods) {        '],[0,'            var lod = this.lods[this.map.getZoom()];'],[0,'            if ((x &lt; lod.startTileCol || x &gt; lod.endTileCol) '],[-1,'                || (y &lt; lod.startTileRow || y &gt; lod.endTileRow)) {'],[0,'                    return null;'],[-1,'            }'],[-1,'        }'],[-1,'        else {'],[0,'            var start = this.getUpperLeftTileCoord(res);'],[0,'            var end = this.getLowerRightTileCoord(res);'],[0,'            if ((x &lt; start.x || x &gt;= end.x)'],[-1,'                || (y &lt; start.y || y &gt;= end.y)) {'],[0,'                    return null;'],[-1,'            }        '],[-1,'        }'],[-1,''],[-1,'        \/\/ Construct the url string'],[0,'        var url = this.url;'],[0,'        var s = \'\' + x + y + z;'],[-1,''],[0,'        if (OpenLayers.Util.isArray(url)) {'],[0,'            url = this.selectUrl(s, url);'],[-1,'        }'],[-1,''],[-1,'        \/\/ Accessing tiles through ArcGIS Server uses a different path'],[-1,'        \/\/ structure than direct access via the folder structure.'],[0,'        if (this.useArcGISServer) {'],[-1,'            \/\/ AGS MapServers have pretty url access to tiles'],[0,'            url = url + \'\/tile\/${z}\/${y}\/${x}\';'],[-1,'        } else {'],[-1,'            \/\/ The tile images are stored using hex values on disk.'],[0,'            x = \'C\' + OpenLayers.Number.zeroPad(x, 8, 16);'],[0,'            y = \'R\' + OpenLayers.Number.zeroPad(y, 8, 16);'],[0,'            z = \'L\' + OpenLayers.Number.zeroPad(z, 2, 10);'],[0,'            url = url + \'\/${z}\/${y}\/${x}.\' + this.type;'],[-1,'        }'],[-1,''],[-1,'        \/\/ Write the values into our formatted url'],[0,'        url = OpenLayers.String.format(url, {\'x\': x, \'y\': y, \'z\': z});'],[-1,''],[0,'        return OpenLayers.Util.urlAppend('],[-1,'            url, OpenLayers.Util.getParameterString(this.params)'],[-1,'        );'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \'OpenLayers.Layer.ArcGISCache\' '],[-1,'}); '],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/WMSGetFeatureInfo.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Handler\/Click.js'],[-1,' * @requires OpenLayers\/Handler\/Hover.js'],[-1,' * @requires OpenLayers\/Request.js'],[-1,' * @requires OpenLayers\/Format\/WMSGetFeatureInfo.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.WMSGetFeatureInfo'],[-1,' * The WMSGetFeatureInfo control uses a WMS query to get information about a point on the map.  The'],[-1,' * information may be in a display-friendly format such as HTML, or a machine-friendly format such'],[-1,' * as GML, depending on the server\'s capabilities and the client\'s configuration.  This control'],[-1,' * handles click or hover events, attempts to parse the results using an OpenLayers.Format, and'],[-1,' * fires a \'getfeatureinfo\' event with the click position, the raw body of the response, and an'],[-1,' * array of features if it successfully read the response.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.WMSGetFeatureInfo = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'   \/**'],[-1,'     * APIProperty: hover'],[-1,'     * {Boolean} Send GetFeatureInfo requests when mouse stops moving.'],[-1,'     *     Default is false.'],[-1,'     *\/'],[-1,'    hover: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: drillDown'],[-1,'     * {Boolean} Drill down over all WMS layers in the map. When'],[-1,'     *     using drillDown mode, hover is not possible, and an infoFormat that'],[-1,'     *     returns parseable features is required. Default is false.'],[-1,'     *\/'],[-1,'    drillDown: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: maxFeatures'],[-1,'     * {Integer} Maximum number of features to return from a WMS query. This'],[-1,'     *     sets the feature_count parameter on WMS GetFeatureInfo'],[-1,'     *     requests.'],[-1,'     *\/'],[-1,'    maxFeatures: 10,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: clickCallback'],[-1,'     * {String} The click callback to register in the'],[-1,'     *     {&lt;OpenLayers.Handler.Click&gt;} object created when the hover'],[-1,'     *     option is set to false. Default is \&quot;click\&quot;.'],[-1,'     *\/'],[-1,'    clickCallback: \&quot;click\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: output'],[-1,'     * {String} Either \&quot;features\&quot; or \&quot;object\&quot;. When triggering a getfeatureinfo'],[-1,'     *     request should we pass on an array of features or an object with with'],[-1,'     *     a \&quot;features\&quot; property and other properties (such as the url of the'],[-1,'     *     WMS). Default is \&quot;features\&quot;.'],[-1,'     *\/'],[-1,'    output: \&quot;features\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layers'],[-1,'     * {Array(&lt;OpenLayers.Layer.WMS&gt;)} The layers to query for feature info.'],[-1,'     *     If omitted, all map WMS layers with a url that matches this &lt;url&gt; or'],[-1,'     *     &lt;layerUrls&gt; will be considered.'],[-1,'     *\/'],[-1,'    layers: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: queryVisible'],[-1,'     * {Boolean} If true, filter out hidden layers when searching the map for'],[-1,'     *     layers to query.  Default is false.'],[-1,'     *\/'],[-1,'    queryVisible: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: url'],[-1,'     * {String} The URL of the WMS service to use.  If not provided, the url'],[-1,'     *     of the first eligible layer will be used.'],[-1,'     *\/'],[-1,'    url: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: layerUrls'],[-1,'     * {Array(String)} Optional list of urls for layers that should be queried.'],[-1,'     *     This can be used when the layer url differs from the url used for'],[-1,'     *     making GetFeatureInfo requests (in the case of a layer using cached'],[-1,'     *     tiles).'],[-1,'     *\/'],[-1,'    layerUrls: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: infoFormat'],[-1,'     * {String} The mimetype to request from the server. If you are using'],[-1,'     *     drillDown mode and have multiple servers that do not share a common'],[-1,'     *     infoFormat, you can override the control\'s infoFormat by providing an'],[-1,'     *     INFO_FORMAT parameter in your &lt;OpenLayers.Layer.WMS&gt; instance(s).'],[-1,'     *\/'],[-1,'    infoFormat: \'text\/html\','],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: vendorParams'],[-1,'     * {Object} Additional parameters that will be added to the request, for'],[-1,'     *     WMS implementations that support them. This could e.g. look like'],[-1,'     * (start code)'],[-1,'     * {'],[-1,'     *     radius: 5'],[-1,'     * }'],[-1,'     * (end)'],[-1,'     *\/'],[-1,'    vendorParams: {},'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: format'],[-1,'     * {&lt;OpenLayers.Format&gt;} A format for parsing GetFeatureInfo responses.'],[-1,'     *     Default is &lt;OpenLayers.Format.WMSGetFeatureInfo&gt;.'],[-1,'     *\/'],[-1,'    format: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: formatOptions'],[-1,'     * {Object} Optional properties to set on the format (if one is not provided'],[-1,'     *     in the &lt;format&gt; property.'],[-1,'     *\/'],[-1,'    formatOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: handlerOptions'],[-1,'     * {Object} Additional options for the handlers used by this control, e.g.'],[-1,'     * (start code)'],[-1,'     * {'],[-1,'     *     \&quot;click\&quot;: {delay: 100},'],[-1,'     *     \&quot;hover\&quot;: {delay: 300}'],[-1,'     * }'],[-1,'     * (end)'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: handler'],[-1,'     * {Object} Reference to the &lt;OpenLayers.Handler&gt; for this control'],[-1,'     *\/'],[-1,'    handler: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: hoverRequest'],[-1,'     * {&lt;OpenLayers.Request&gt;} contains the currently running hover request'],[-1,'     *     (if any).'],[-1,'     *\/'],[-1,'    hoverRequest: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to those from &lt;OpenLayers.Control.events&gt;):'],[-1,'     * beforegetfeatureinfo - Triggered before the request is sent.'],[-1,'     *      The event object has an *xy* property with the position of the'],[-1,'     *      mouse click or hover event that triggers the request.'],[-1,'     * nogetfeatureinfo - no queryable layers were found.'],[-1,'     * getfeatureinfo - Triggered when a GetFeatureInfo response is received.'],[-1,'     *      The event object has a *text* property with the body of the'],[-1,'     *      response (String), a *features* property with an array of the'],[-1,'     *      parsed features, an *xy* property with the position of the mouse'],[-1,'     *      click or hover event that triggered the request, and a *request*'],[-1,'     *      property with the request itself. If drillDown is set to true and'],[-1,'     *      multiple requests were issued to collect feature info from all'],[-1,'     *      layers, *text* and *request* will only contain the response body'],[-1,'     *      and request object of the last request.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: &lt;OpenLayers.Control.WMSGetFeatureInfo&gt;'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object}'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        options = options || {};'],[0,'        options.handlerOptions = options.handlerOptions || {};'],[-1,''],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[-1,''],[0,'        if(!this.format) {'],[0,'            this.format = new OpenLayers.Format.WMSGetFeatureInfo('],[-1,'                options.formatOptions'],[-1,'            );'],[-1,'        }'],[-1,''],[0,'        if(this.drillDown === true) {'],[0,'            this.hover = false;'],[-1,'        }'],[-1,''],[0,'        if(this.hover) {'],[0,'            this.handler = new OpenLayers.Handler.Hover('],[-1,'                   this, {'],[-1,'                       \'move\': this.cancelHover,'],[-1,'                       \'pause\': this.getInfoForHover'],[-1,'                   },'],[-1,'                   OpenLayers.Util.extend(this.handlerOptions.hover || {}, {'],[-1,'                       \'delay\': 250'],[-1,'                   }));'],[-1,'        } else {'],[0,'            var callbacks = {};'],[0,'            callbacks[this.clickCallback] = this.getInfoForClick;'],[0,'            this.handler = new OpenLayers.Handler.Click('],[-1,'                this, callbacks, this.handlerOptions.click || {});'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getInfoForClick'],[-1,'     * Called on click'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;}'],[-1,'     *\/'],[-1,'    getInfoForClick: function(evt) {'],[0,'        this.events.triggerEvent(\&quot;beforegetfeatureinfo\&quot;, {xy: evt.xy});'],[-1,'        \/\/ Set the cursor to \&quot;wait\&quot; to tell the user we\'re working on their'],[-1,'        \/\/ click.'],[0,'        OpenLayers.Element.addClass(this.map.viewPortDiv, \&quot;olCursorWait\&quot;);'],[0,'        this.request(evt.xy, {});'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getInfoForHover'],[-1,'     * Pause callback for the hover handler'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Object}'],[-1,'     *\/'],[-1,'    getInfoForHover: function(evt) {'],[0,'        this.events.triggerEvent(\&quot;beforegetfeatureinfo\&quot;, {xy: evt.xy});'],[0,'        this.request(evt.xy, {hover: true});'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: cancelHover'],[-1,'     * Cancel callback for the hover handler'],[-1,'     *\/'],[-1,'    cancelHover: function() {'],[0,'        if (this.hoverRequest) {'],[0,'            this.hoverRequest.abort();'],[0,'            this.hoverRequest = null;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: findLayers'],[-1,'     * Internal method to get the layers, independent of whether we are'],[-1,'     *     inspecting the map or using a client-provided array'],[-1,'     *\/'],[-1,'    findLayers: function() {'],[-1,''],[0,'        var candidates = this.layers || this.map.layers;'],[0,'        var layers = [];'],[0,'        var layer, url;'],[0,'        for(var i = candidates.length - 1; i &gt;= 0; --i) {'],[0,'            layer = candidates[i];'],[0,'            if(layer instanceof OpenLayers.Layer.WMS &amp;&amp;'],[-1,'               (!this.queryVisible || layer.getVisibility())) {'],[0,'                url = OpenLayers.Util.isArray(layer.url) ? layer.url[0] : layer.url;'],[-1,'                \/\/ if the control was not configured with a url, set it'],[-1,'                \/\/ to the first layer url'],[0,'                if(this.drillDown === false &amp;&amp; !this.url) {'],[0,'                    this.url = url;'],[-1,'                }'],[0,'                if(this.drillDown === true || this.urlMatches(url)) {'],[0,'                    layers.push(layer);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return layers;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: urlMatches'],[-1,'     * Test to see if the provided url matches either the control &lt;url&gt; or one'],[-1,'     *     of the &lt;layerUrls&gt;.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * url - {String} The url to test.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The provided url matches the control &lt;url&gt; or one of the'],[-1,'     *     &lt;layerUrls&gt;.'],[-1,'     *\/'],[-1,'    urlMatches: function(url) {'],[0,'        var matches = OpenLayers.Util.isEquivalentUrl(this.url, url);'],[0,'        if(!matches &amp;&amp; this.layerUrls) {'],[0,'            for(var i=0, len=this.layerUrls.length; i&lt;len; ++i) {'],[0,'                if(OpenLayers.Util.isEquivalentUrl(this.layerUrls[i], url)) {'],[0,'                    matches = true;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return matches;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: buildWMSOptions'],[-1,'     * Build an object with the relevant WMS options for the GetFeatureInfo request'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * url - {String} The url to be used for sending the request'],[-1,'     * layers - {Array(&lt;OpenLayers.Layer.WMS)} An array of layers'],[-1,'     * clickPosition - {&lt;OpenLayers.Pixel&gt;} The position on the map where the mouse'],[-1,'     *     event occurred.'],[-1,'     * format - {String} The format from the corresponding GetMap request'],[-1,'     *\/'],[-1,'    buildWMSOptions: function(url, layers, clickPosition, format) {'],[0,'        var layerNames = [], styleNames = [];'],[0,'        for (var i = 0, len = layers.length; i &lt; len; i++) {'],[0,'            if (layers[i].params.LAYERS != null) {'],[0,'                layerNames = layerNames.concat(layers[i].params.LAYERS);'],[0,'                styleNames = styleNames.concat(this.getStyleNames(layers[i]));'],[-1,'            }'],[-1,'        }'],[0,'        var firstLayer = layers[0];'],[-1,'        \/\/ use the firstLayer\'s projection if it matches the map projection -'],[-1,'        \/\/ this assumes that all layers will be available in this projection'],[0,'        var projection = this.map.getProjection();'],[0,'        var layerProj = firstLayer.projection;'],[0,'        if (layerProj &amp;&amp; layerProj.equals(this.map.getProjectionObject())) {'],[0,'            projection = layerProj.getCode();'],[-1,'        }'],[0,'        var params = OpenLayers.Util.extend({'],[-1,'            service: \&quot;WMS\&quot;,'],[-1,'            version: firstLayer.params.VERSION,'],[-1,'            request: \&quot;GetFeatureInfo\&quot;,'],[-1,'            exceptions: firstLayer.params.EXCEPTIONS,'],[-1,'            bbox: this.map.getExtent().toBBOX(null,'],[-1,'                firstLayer.reverseAxisOrder()),'],[-1,'            feature_count: this.maxFeatures,'],[-1,'            height: this.map.getSize().h,'],[-1,'            width: this.map.getSize().w,'],[-1,'            format: format,'],[-1,'            info_format: firstLayer.params.INFO_FORMAT || this.infoFormat'],[-1,'        }, (parseFloat(firstLayer.params.VERSION) &gt;= 1.3) ?'],[-1,'            {'],[-1,'                crs: projection,'],[-1,'                i: parseInt(clickPosition.x),'],[-1,'                j: parseInt(clickPosition.y)'],[-1,'            } :'],[-1,'            {'],[-1,'                srs: projection,'],[-1,'                x: parseInt(clickPosition.x),'],[-1,'                y: parseInt(clickPosition.y)'],[-1,'            }'],[-1,'        );'],[0,'        if (layerNames.length != 0) {'],[0,'            params = OpenLayers.Util.extend({'],[-1,'                layers: layerNames,'],[-1,'                query_layers: layerNames,'],[-1,'                styles: styleNames'],[-1,'            }, params);'],[-1,'        }'],[0,'        OpenLayers.Util.applyDefaults(params, this.vendorParams);'],[0,'        return {'],[-1,'            url: url,'],[-1,'            params: OpenLayers.Util.upperCaseObject(params),'],[-1,'            callback: function(request) {'],[0,'                this.handleResponse(clickPosition, request, url);'],[-1,'            },'],[-1,'            scope: this'],[-1,'        };'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getStyleNames'],[-1,'     * Gets the STYLES parameter for the layer. Make sure the STYLES parameter'],[-1,'     * matches the LAYERS parameter'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.WMS&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array(String)} The STYLES parameter'],[-1,'     *\/'],[-1,'    getStyleNames: function(layer) {'],[-1,'        \/\/ in the event of a WMS layer bundling multiple layers but not'],[-1,'        \/\/ specifying styles,we need the same number of commas to specify'],[-1,'        \/\/ the default style for each of the layers.  We can\'t just leave it'],[-1,'        \/\/ blank as we may be including other layers that do specify styles.'],[0,'        var styleNames;'],[0,'        if (layer.params.STYLES) {'],[0,'            styleNames = layer.params.STYLES;'],[-1,'        } else {'],[0,'            if (OpenLayers.Util.isArray(layer.params.LAYERS)) {'],[0,'                styleNames = new Array(layer.params.LAYERS.length);'],[-1,'            } else { \/\/ Assume it\'s a String'],[0,'                styleNames = layer.params.LAYERS.replace(\/[^,]\/g, \&quot;\&quot;);'],[-1,'            }'],[-1,'        }'],[0,'        return styleNames;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: request'],[-1,'     * Sends a GetFeatureInfo request to the WMS'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * clickPosition - {&lt;OpenLayers.Pixel&gt;} The position on the map where the'],[-1,'     *     mouse event occurred.'],[-1,'     * options - {Object} additional options for this method.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * - *hover* {Boolean} true if we do the request for the hover handler'],[-1,'     *\/'],[-1,'    request: function(clickPosition, options) {'],[0,'        var layers = this.findLayers();'],[0,'        if(layers.length == 0) {'],[0,'            this.events.triggerEvent(\&quot;nogetfeatureinfo\&quot;);'],[-1,'            \/\/ Reset the cursor.'],[0,'            OpenLayers.Element.removeClass(this.map.viewPortDiv, \&quot;olCursorWait\&quot;);'],[0,'            return;'],[-1,'        }'],[-1,''],[0,'        options = options || {};'],[0,'        if(this.drillDown === false) {'],[0,'            var wmsOptions = this.buildWMSOptions(this.url, layers,'],[-1,'                clickPosition, layers[0].params.FORMAT);'],[0,'            var request = OpenLayers.Request.GET(wmsOptions);'],[-1,''],[0,'            if (options.hover === true) {'],[0,'                this.hoverRequest = request;'],[-1,'            }'],[-1,'        } else {'],[0,'            this._requestCount = 0;'],[0,'            this._numRequests = 0;'],[0,'            this.features = [];'],[-1,'            \/\/ group according to service url to combine requests'],[0,'            var services = {}, url;'],[0,'            for(var i=0, len=layers.length; i&lt;len; i++) {'],[0,'                var layer = layers[i];'],[0,'                var service, found = false;'],[0,'                url = OpenLayers.Util.isArray(layer.url) ? layer.url[0] : layer.url;'],[0,'                if(url in services) {'],[0,'                    services[url].push(layer);'],[-1,'                } else {'],[0,'                    this._numRequests++;'],[0,'                    services[url] = [layer];'],[-1,'                }'],[-1,'            }'],[0,'            var layers;'],[0,'            for (var url in services) {'],[0,'                layers = services[url];'],[0,'                var wmsOptions = this.buildWMSOptions(url, layers,'],[-1,'                    clickPosition, layers[0].params.FORMAT);'],[0,'                OpenLayers.Request.GET(wmsOptions);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: triggerGetFeatureInfo'],[-1,'     * Trigger the getfeatureinfo event when all is done'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * request - {XMLHttpRequest} The request object'],[-1,'     * xy - {&lt;OpenLayers.Pixel&gt;} The position on the map where the'],[-1,'     *     mouse event occurred.'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} or'],[-1,'     *     {Array({Object}) when output is \&quot;object\&quot;. The object has a url and a'],[-1,'     *     features property which contains an array of features.'],[-1,'     *\/'],[-1,'    triggerGetFeatureInfo: function(request, xy, features) {'],[0,'        this.events.triggerEvent(\&quot;getfeatureinfo\&quot;, {'],[-1,'            text: request.responseText,'],[-1,'            features: features,'],[-1,'            request: request,'],[-1,'            xy: xy'],[-1,'        });'],[-1,''],[-1,'        \/\/ Reset the cursor.'],[0,'        OpenLayers.Element.removeClass(this.map.viewPortDiv, \&quot;olCursorWait\&quot;);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleResponse'],[-1,'     * Handler for the GetFeatureInfo response.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * xy - {&lt;OpenLayers.Pixel&gt;} The position on the map where the'],[-1,'     *     mouse event occurred.'],[-1,'     * request - {XMLHttpRequest} The request object.'],[-1,'     * url - {String} The url which was used for this request.'],[-1,'     *\/'],[-1,'    handleResponse: function(xy, request, url) {'],[-1,''],[0,'        var doc = request.responseXML;'],[0,'        if(!doc || !doc.documentElement) {'],[0,'            doc = request.responseText;'],[-1,'        }'],[0,'        var features = this.format.read(doc);'],[0,'        if (this.drillDown === false) {'],[0,'            this.triggerGetFeatureInfo(request, xy, features);'],[-1,'        } else {'],[0,'            this._requestCount++;'],[0,'            if (this.output === \&quot;object\&quot;) {'],[0,'                this._features = (this._features || []).concat('],[-1,'                    {url: url, features: features}'],[-1,'                );'],[-1,'            } else {'],[0,'            this._features = (this._features || []).concat(features);'],[-1,'            }'],[0,'            if (this._requestCount === this._numRequests) {'],[0,'                this.triggerGetFeatureInfo(request, xy, this._features.concat());'],[0,'                delete this._features;'],[0,'                delete this._requestCount;'],[0,'                delete this._numRequests;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.WMSGetFeatureInfo\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMSCapabilities\/v1_3_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WMSCapabilities\/v1_3.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMSCapabilities\/v1_3_0'],[-1,' * Read WMS Capabilities version 1.3.0. '],[-1,' * SLD 1.1.0 adds in the extra operations DescribeLayer and GetLegendGraphic, '],[-1,' * see: http:\/\/schemas.opengis.net\/sld\/1.1.0\/sld_capabilities.xsd'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WMSCapabilities.v1_3&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMSCapabilities.v1_3_0 = OpenLayers.Class('],[-1,'    OpenLayers.Format.WMSCapabilities.v1_3, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} The specific parser version.'],[-1,'     *\/'],[-1,'    version: \&quot;1.3.0\&quot;,'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMSCapabilities.v1_3_0\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WFS.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/GML.js'],[-1,' * @requires OpenLayers\/Console.js'],[-1,' * @requires OpenLayers\/Lang.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WFS'],[-1,' * Read\/Write WFS. '],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.GML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WFS = OpenLayers.Class(OpenLayers.Format.GML, {'],[-1,'    '],[-1,'    \/** '],[-1,'     * Property: layer'],[-1,'     * {&lt;OpenLayers.Layer&gt;}'],[-1,'     *\/'],[-1,'    layer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: wfsns'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    wfsns: \&quot;http:\/\/www.opengis.net\/wfs\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: ogcns'],[-1,'     * {String}'],[-1,'     *\/'],[-1,'    ogcns: \&quot;http:\/\/www.opengis.net\/ogc\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WFS'],[-1,'     * Create a WFS-T formatter. This requires a layer: that layer should'],[-1,'     * have two properties: geometry_column and typename. The parser'],[-1,'     * for this format is subclassed entirely from GML: There is a writer '],[-1,'     * only, which uses most of the code from the GML layer, and wraps'],[-1,'     * it in transactional elements.'],[-1,'     * '],[-1,'     * Parameters: '],[-1,'     * options - {Object} '],[-1,'     * layer - {&lt;OpenLayers.Layer&gt;} '],[-1,'     *\/'],[-1,'    initialize: function(options, layer) {'],[0,'        OpenLayers.Format.GML.prototype.initialize.apply(this, [options]);'],[0,'        this.layer = layer;'],[0,'        if (this.layer.featureNS) {'],[0,'            this.featureNS = this.layer.featureNS;'],[-1,'        }    '],[0,'        if (this.layer.options.geometry_column) {'],[0,'            this.geometryName = this.layer.options.geometry_column;'],[-1,'        }'],[0,'        if (this.layer.options.typename) {'],[0,'            this.featureName = this.layer.options.typename;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: write '],[-1,'     * Takes a feature list, and generates a WFS-T Transaction '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} '],[-1,'     *\/'],[-1,'    write: function(features) {'],[-1,'    '],[0,'        var transaction = this.createElementNS(this.wfsns, \'wfs:Transaction\');'],[0,'        transaction.setAttribute(\&quot;version\&quot;,\&quot;1.0.0\&quot;);'],[0,'        transaction.setAttribute(\&quot;service\&quot;,\&quot;WFS\&quot;);'],[0,'        for (var i=0; i &lt; features.length; i++) {'],[0,'            switch (features[i].state) {'],[-1,'                case OpenLayers.State.INSERT:'],[0,'                    transaction.appendChild(this.insert(features[i]));'],[0,'                    break;'],[-1,'                case OpenLayers.State.UPDATE:'],[0,'                    transaction.appendChild(this.update(features[i]));'],[0,'                    break;'],[-1,'                case OpenLayers.State.DELETE:'],[0,'                    transaction.appendChild(this.remove(features[i]));'],[0,'                    break;'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this,[transaction]);'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * Method: createFeatureXML'],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/ '],[-1,'    createFeatureXML: function(feature) {'],[0,'        var geometryNode = this.buildGeometryNode(feature.geometry);'],[0,'        var geomContainer = this.createElementNS(this.featureNS, \&quot;feature:\&quot; + this.geometryName);'],[0,'        geomContainer.appendChild(geometryNode);'],[0,'        var featureContainer = this.createElementNS(this.featureNS, \&quot;feature:\&quot; + this.featureName);'],[0,'        featureContainer.appendChild(geomContainer);'],[0,'        for(var attr in feature.attributes) {'],[0,'            var attrText = this.createTextNode(feature.attributes[attr]); '],[0,'            var nodename = attr;'],[0,'            if (attr.search(\&quot;:\&quot;) != -1) {'],[0,'                nodename = attr.split(\&quot;:\&quot;)[1];'],[-1,'            }    '],[0,'            var attrContainer = this.createElementNS(this.featureNS, \&quot;feature:\&quot; + nodename);'],[0,'            attrContainer.appendChild(attrText);'],[0,'            featureContainer.appendChild(attrContainer);'],[-1,'        }    '],[0,'        return featureContainer;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: insert '],[-1,'     * Takes a feature, and generates a WFS-T Transaction \&quot;Insert\&quot; '],[-1,'     *'],[-1,'     * Parameters: '],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *\/'],[-1,'    insert: function(feature) {'],[0,'        var insertNode = this.createElementNS(this.wfsns, \'wfs:Insert\');'],[0,'        insertNode.appendChild(this.createFeatureXML(feature));'],[0,'        return insertNode;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: update'],[-1,'     * Takes a feature, and generates a WFS-T Transaction \&quot;Update\&quot; '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *\/'],[-1,'    update: function(feature) {'],[0,'        if (!feature.fid) { OpenLayers.Console.userError(OpenLayers.i18n(\&quot;noFID\&quot;)); }'],[0,'        var updateNode = this.createElementNS(this.wfsns, \'wfs:Update\');'],[0,'        updateNode.setAttribute(\&quot;typeName\&quot;, this.featurePrefix + \':\' + this.featureName); '],[0,'        updateNode.setAttribute(\&quot;xmlns:\&quot; + this.featurePrefix, this.featureNS); '],[-1,''],[0,'        var propertyNode = this.createElementNS(this.wfsns, \'wfs:Property\');'],[0,'        var nameNode = this.createElementNS(this.wfsns, \'wfs:Name\');'],[-1,'        '],[0,'        var txtNode = this.createTextNode(this.geometryName);'],[0,'        nameNode.appendChild(txtNode);'],[0,'        propertyNode.appendChild(nameNode);'],[-1,'        '],[0,'        var valueNode = this.createElementNS(this.wfsns, \'wfs:Value\');'],[-1,'        '],[0,'        var geometryNode = this.buildGeometryNode(feature.geometry);'],[-1,'        '],[0,'        if(feature.layer){'],[0,'            geometryNode.setAttribute('],[-1,'                \&quot;srsName\&quot;, feature.layer.projection.getCode()'],[-1,'            );'],[-1,'        }'],[-1,'        '],[0,'        valueNode.appendChild(geometryNode);'],[-1,'        '],[0,'        propertyNode.appendChild(valueNode);'],[0,'        updateNode.appendChild(propertyNode);'],[-1,'        '],[-1,'         \/\/ add in attributes'],[0,'        for(var propName in feature.attributes) {'],[0,'            propertyNode = this.createElementNS(this.wfsns, \'wfs:Property\');'],[0,'            nameNode = this.createElementNS(this.wfsns, \'wfs:Name\');'],[0,'            nameNode.appendChild(this.createTextNode(propName));'],[0,'            propertyNode.appendChild(nameNode);'],[0,'            valueNode = this.createElementNS(this.wfsns, \'wfs:Value\');'],[0,'            valueNode.appendChild(this.createTextNode(feature.attributes[propName]));'],[0,'            propertyNode.appendChild(valueNode);'],[0,'            updateNode.appendChild(propertyNode);'],[-1,'        }'],[-1,'        '],[-1,'        '],[0,'        var filterNode = this.createElementNS(this.ogcns, \'ogc:Filter\');'],[0,'        var filterIdNode = this.createElementNS(this.ogcns, \'ogc:FeatureId\');'],[0,'        filterIdNode.setAttribute(\&quot;fid\&quot;, feature.fid);'],[0,'        filterNode.appendChild(filterIdNode);'],[0,'        updateNode.appendChild(filterNode);'],[-1,''],[0,'        return updateNode;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: remove '],[-1,'     * Takes a feature, and generates a WFS-T Transaction \&quot;Delete\&quot; '],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} '],[-1,'     *\/'],[-1,'    remove: function(feature) {'],[0,'        if (!feature.fid) { '],[0,'            OpenLayers.Console.userError(OpenLayers.i18n(\&quot;noFID\&quot;)); '],[0,'            return false; '],[-1,'        }'],[0,'        var deleteNode = this.createElementNS(this.wfsns, \'wfs:Delete\');'],[0,'        deleteNode.setAttribute(\&quot;typeName\&quot;, this.featurePrefix + \':\' + this.featureName); '],[0,'        deleteNode.setAttribute(\&quot;xmlns:\&quot; + this.featurePrefix, this.featureNS); '],[-1,''],[0,'        var filterNode = this.createElementNS(this.ogcns, \'ogc:Filter\');'],[0,'        var filterIdNode = this.createElementNS(this.ogcns, \'ogc:FeatureId\');'],[0,'        filterIdNode.setAttribute(\&quot;fid\&quot;, feature.fid);'],[0,'        filterNode.appendChild(filterIdNode);'],[0,'        deleteNode.appendChild(filterNode);'],[-1,''],[0,'        return deleteNode;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Remove ciruclar ref to layer '],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        this.layer = null;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WFS\&quot; '],[-1,'});    '],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/UTFGrid.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Handler\/Hover.js'],[-1,' * @requires OpenLayers\/Handler\/Click.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.UTFGrid'],[-1,' *'],[-1,' * This Control provides behavior associated with UTFGrid Layers.'],[-1,' * These \'hit grids\' provide underlying feature attributes without'],[-1,' * calling the server (again). This control allows Mousemove, Hovering '],[-1,' * and Click events to trigger callbacks that use the attributes in '],[-1,' * whatever way you need. '],[-1,' *'],[-1,' * The most common example may be a UTFGrid layer containing feature'],[-1,' * attributes that are displayed in a div as you mouseover.'],[-1,' *'],[-1,' * Example Code:'],[-1,' *'],[-1,' * (start code)'],[-1,' * var world_utfgrid = new OpenLayers.Layer.UTFGrid( '],[-1,' *     \'UTFGrid Layer\', '],[-1,' *     \&quot;http:\/\/tiles\/world_utfgrid\/${z}\/${x}\/${y}.json\&quot;'],[-1,' * );'],[-1,' * map.addLayer(world_utfgrid);'],[-1,' * '],[-1,' * var control = new OpenLayers.Control.UTFGrid({'],[-1,' *     layers: [world_utfgrid],'],[-1,' *     handlerMode: \'move\','],[-1,' *     callback: function(infoLookup) {'],[-1,' *         \/\/ do something with returned data'],[-1,' *'],[-1,' *     }'],[-1,' * })'],[-1,' * (end code)'],[-1,' *'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.UTFGrid = OpenLayers.Class(OpenLayers.Control, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: autoActivate'],[-1,'     * {Boolean} Activate the control when it is added to a map.  Default is'],[-1,'     *     true.'],[-1,'     *\/'],[-1,'    autoActivate: true,'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: Layers'],[-1,'     * List of layers to consider. Must be Layer.UTFGrids'],[-1,'     * `null` is the default indicating all UTFGrid Layers are queried.'],[-1,'     * {Array} &lt;OpenLayers.Layer.UTFGrid&gt; '],[-1,'     *\/'],[-1,'    layers: null,'],[-1,''],[-1,'    \/* Property: defaultHandlerOptions'],[-1,'     * The default opts passed to the handler constructors'],[-1,'     *\/'],[-1,'    defaultHandlerOptions: {'],[-1,'        \'delay\': 300,'],[-1,'        \'pixelTolerance\': 4,'],[-1,'        \'stopMove\': false,'],[-1,'        \'single\': true,'],[-1,'        \'double\': false,'],[-1,'        \'stopSingle\': false,'],[-1,'        \'stopDouble\': false'],[-1,'    },'],[-1,''],[-1,'    \/* APIProperty: handlerMode'],[-1,'     * Defaults to \'click\'. Can be \'hover\' or \'move\'.'],[-1,'     *\/'],[-1,'    handlerMode: \'click\','],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: setHandler'],[-1,'     * sets this.handlerMode and calls resetHandler()'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * hm - {String} Handler Mode string; \'click\', \'hover\' or \'move\'.'],[-1,'     *\/'],[-1,'    setHandler: function(hm) {'],[0,'        this.handlerMode = hm;'],[0,'        this.resetHandler();'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: resetHandler'],[-1,'     * Deactivates the old hanlder and creates a new'],[-1,'     * &lt;OpenLayers.Handler&gt; based on the mode specified in'],[-1,'     * this.handlerMode'],[-1,'     *'],[-1,'     *\/'],[-1,'    resetHandler: function() {'],[0,'        if (this.handler) {'],[0,'            this.handler.deactivate();'],[0,'            this.handler.destroy();'],[0,'            this.handler = null;'],[-1,'        }'],[-1,'   '],[0,'        if (this.handlerMode == \'hover\') {'],[-1,'            \/\/ Handle this event on hover'],[0,'            this.handler = new OpenLayers.Handler.Hover('],[-1,'                this,'],[-1,'                {\'pause\': this.handleEvent, \'move\': this.reset},'],[-1,'                this.handlerOptions'],[-1,'            );'],[0,'        } else if (this.handlerMode == \'click\') {'],[-1,'            \/\/ Handle this event on click'],[0,'            this.handler = new OpenLayers.Handler.Click('],[-1,'                this, {'],[-1,'                    \'click\': this.handleEvent'],[-1,'                }, this.handlerOptions'],[-1,'            );'],[0,'        } else if (this.handlerMode == \'move\') {'],[0,'            this.handler = new OpenLayers.Handler.Hover('],[-1,'                this,'],[-1,'                \/\/ Handle this event while hovering OR moving'],[-1,'                {\'pause\': this.handleEvent, \'move\': this.handleEvent},'],[-1,'                this.handlerOptions'],[-1,'            );'],[-1,'        }'],[0,'        if (this.handler) {'],[0,'            return true;'],[-1,'        } else {'],[0,'            return false;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: &lt;OpenLayers.Control.UTFGrid&gt;'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} '],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        options = options || {};'],[0,'        options.handlerOptions = options.handlerOptions || this.defaultHandlerOptions;'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[0,'        this.resetHandler();'],[-1,'    }, '],[-1,''],[-1,'    \/**'],[-1,'     * Method: handleEvent'],[-1,'     * Internal method called when specified event is triggered.'],[-1,'     * '],[-1,'     * This method does several things:'],[-1,'     *'],[-1,'     * Gets the lonLat of the event.'],[-1,'     *'],[-1,'     * Loops through the appropriate hit grid layers and gathers the attributes.'],[-1,'     *'],[-1,'     * Passes the attributes to the callback'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {&lt;OpenLayers.Event&gt;} '],[-1,'     *\/'],[-1,'    handleEvent: function(evt) {'],[0,'        if (evt == null) {'],[0,'            this.reset();'],[0,'            return;'],[-1,'        }'],[-1,''],[0,'        var lonLat = this.map.getLonLatFromPixel(evt.xy);'],[0,'        if (!lonLat) { '],[0,'            return;'],[-1,'        }    '],[-1,'        '],[0,'        var layers = this.findLayers();'],[0,'        if (layers.length &gt; 0) {'],[0,'            var infoLookup = {};'],[0,'            var layer, idx;'],[0,'            for (var i=0, len=layers.length; i&lt;len; i++) {'],[0,'                layer = layers[i];'],[0,'                idx = OpenLayers.Util.indexOf(this.map.layers, layer);'],[0,'                infoLookup[idx] = layer.getFeatureInfo(lonLat);'],[-1,'            }'],[0,'            this.callback(infoLookup, lonLat, evt.xy);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: callback'],[-1,'     * Function to be called when a mouse event corresponds with a location that'],[-1,'     *     includes data in one of the configured UTFGrid layers.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * infoLookup - {Object} Keys of this object are layer indexes and can be'],[-1,'     *     used to resolve a layer in the map.layers array.  The structure of'],[-1,'     *     the property values depend on the data included in the underlying'],[-1,'     *     UTFGrid and may be any valid JSON type.  '],[-1,'     *\/'],[-1,'    callback: function(infoLookup) {'],[-1,'        \/\/ to be provided in the constructor'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: reset'],[-1,'     * Calls the callback with null.'],[-1,'     *\/'],[-1,'    reset: function(evt) {'],[0,'        this.callback(null);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: findLayers'],[-1,'     * Internal method to get the layers, independent of whether we are'],[-1,'     *     inspecting the map or using a client-provided array'],[-1,'     *'],[-1,'     * The default value of this.layers is null; this causes the '],[-1,'     * findLayers method to return ALL UTFGrid layers encountered.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * None'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array} Layers to handle on each event'],[-1,'     *\/'],[-1,'    findLayers: function() {'],[0,'        var candidates = this.layers || this.map.layers;'],[0,'        var layers = [];'],[0,'        var layer;'],[0,'        for (var i=candidates.length-1; i&gt;=0; --i) {'],[0,'            layer = candidates[i];'],[0,'            if (layer instanceof OpenLayers.Layer.UTFGrid ) { '],[0,'                layers.push(layer);'],[-1,'            }'],[-1,'        }'],[0,'        return layers;'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.UTFGrid\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/CQL.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WKT.js'],[-1,' * @requires OpenLayers\/Filter\/Comparison.js'],[-1,' * @requires OpenLayers\/Filter\/Logical.js'],[-1,' * @requires OpenLayers\/Filter\/Spatial.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.CQL'],[-1,' * Read CQL strings to get &lt;OpenLayers.Filter&gt; objects.  Write '],[-1,' *     &lt;OpenLayers.Filter&gt; objects to get CQL strings. Create a new parser with '],[-1,' *     the &lt;OpenLayers.Format.CQL&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.CQL = (function() {'],[-1,'    '],[1,'    var tokens = ['],[-1,'        \&quot;PROPERTY\&quot;, \&quot;COMPARISON\&quot;, \&quot;VALUE\&quot;, \&quot;LOGICAL\&quot;'],[-1,'    ],'],[-1,''],[-1,'    patterns = {'],[-1,'        PROPERTY: \/^[_a-zA-Z]\\w*\/,'],[-1,'        COMPARISON: \/^(=|&lt;&gt;|&lt;=|&lt;|&gt;=|&gt;|LIKE)\/i,'],[-1,'        IS_NULL: \/^IS NULL\/i,'],[-1,'        COMMA: \/^,\/,'],[-1,'        LOGICAL: \/^(AND|OR)\/i,'],[-1,'        VALUE: \/^(\'([^\']|\'\')*\'|\\d+(\\.\\d*)?|\\.\\d+)\/,'],[-1,'        LPAREN: \/^\\(\/,'],[-1,'        RPAREN: \/^\\)\/,'],[-1,'        SPATIAL: \/^(BBOX|INTERSECTS|DWITHIN|WITHIN|CONTAINS)\/i,'],[-1,'        NOT: \/^NOT\/i,'],[-1,'        BETWEEN: \/^BETWEEN\/i,'],[-1,'        GEOMETRY: function(text) {'],[0,'            var type = \/^(POINT|LINESTRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)\/.exec(text);'],[0,'            if (type) {'],[0,'                var len = text.length;'],[0,'                var idx = text.indexOf(\&quot;(\&quot;, type[0].length);'],[0,'                if (idx &gt; -1) {'],[0,'                    var depth = 1;'],[0,'                    while (idx &lt; len &amp;&amp; depth &gt; 0) {'],[0,'                        idx++;'],[0,'                        switch(text.charAt(idx)) {'],[-1,'                            case \'(\':'],[0,'                                depth++;'],[0,'                                break;'],[-1,'                            case \')\':'],[0,'                                depth--;'],[0,'                                break;'],[-1,'                            default:'],[-1,'                                \/\/ in default case, do nothing'],[-1,'                        }'],[-1,'                    }'],[-1,'                }'],[0,'                return [text.substr(0, idx+1)];'],[-1,'            }'],[-1,'        },'],[-1,'        END: \/^$\/'],[-1,'    },'],[-1,''],[-1,'    follows = {'],[-1,'        LPAREN: [\'GEOMETRY\', \'SPATIAL\', \'PROPERTY\', \'VALUE\', \'LPAREN\'],'],[-1,'        RPAREN: [\'NOT\', \'LOGICAL\', \'END\', \'RPAREN\'],'],[-1,'        PROPERTY: [\'COMPARISON\', \'BETWEEN\', \'COMMA\', \'IS_NULL\'],'],[-1,'        BETWEEN: [\'VALUE\'],'],[-1,'        IS_NULL: [\'END\'],'],[-1,'        COMPARISON: [\'VALUE\'],'],[-1,'        COMMA: [\'GEOMETRY\', \'VALUE\', \'PROPERTY\'],'],[-1,'        VALUE: [\'LOGICAL\', \'COMMA\', \'RPAREN\', \'END\'],'],[-1,'        SPATIAL: [\'LPAREN\'],'],[-1,'        LOGICAL: [\'NOT\', \'VALUE\', \'SPATIAL\', \'PROPERTY\', \'LPAREN\'],'],[-1,'        NOT: [\'PROPERTY\', \'LPAREN\'],'],[-1,'        GEOMETRY: [\'COMMA\', \'RPAREN\']'],[-1,'    },'],[-1,''],[-1,'    operators = {'],[-1,'        \'=\': OpenLayers.Filter.Comparison.EQUAL_TO,'],[-1,'        \'&lt;&gt;\': OpenLayers.Filter.Comparison.NOT_EQUAL_TO,'],[-1,'        \'&lt;\': OpenLayers.Filter.Comparison.LESS_THAN,'],[-1,'        \'&lt;=\': OpenLayers.Filter.Comparison.LESS_THAN_OR_EQUAL_TO,'],[-1,'        \'&gt;\': OpenLayers.Filter.Comparison.GREATER_THAN,'],[-1,'        \'&gt;=\': OpenLayers.Filter.Comparison.GREATER_THAN_OR_EQUAL_TO,'],[-1,'        \'LIKE\': OpenLayers.Filter.Comparison.LIKE,'],[-1,'        \'BETWEEN\': OpenLayers.Filter.Comparison.BETWEEN,'],[-1,'        \'IS NULL\': OpenLayers.Filter.Comparison.IS_NULL'],[-1,'    },'],[-1,''],[-1,'    operatorReverse = {},'],[-1,''],[-1,'    logicals = {'],[-1,'        \'AND\': OpenLayers.Filter.Logical.AND,'],[-1,'        \'OR\': OpenLayers.Filter.Logical.OR'],[-1,'    },'],[-1,''],[-1,'    logicalReverse = {},'],[-1,''],[-1,'    precedence = {'],[-1,'        \'RPAREN\': 3,'],[-1,'        \'LOGICAL\': 2,'],[-1,'        \'COMPARISON\': 1'],[-1,'    };'],[-1,''],[1,'    var i;'],[1,'    for (i in operators) {'],[9,'        if (operators.hasOwnProperty(i)) {'],[9,'            operatorReverse[operators[i]] = i;'],[-1,'        }'],[-1,'    }'],[-1,''],[1,'    for (i in logicals) {'],[2,'        if (logicals.hasOwnProperty(i)) {'],[2,'            logicalReverse[logicals[i]] = i;'],[-1,'        }'],[-1,'    }'],[-1,''],[1,'    function tryToken(text, pattern) {'],[0,'        if (pattern instanceof RegExp) {'],[0,'            return pattern.exec(text);'],[-1,'        } else {'],[0,'            return pattern(text);'],[-1,'        }'],[-1,'    }'],[-1,''],[1,'    function nextToken(text, tokens) {'],[0,'        var i, token, len = tokens.length;'],[0,'        for (i=0; i&lt;len; i++) {'],[0,'            token = tokens[i];'],[0,'            var pat = patterns[token];'],[0,'            var matches = tryToken(text, pat);'],[0,'            if (matches) {'],[0,'                var match = matches[0];'],[0,'                var remainder = text.substr(match.length).replace(\/^\\s*\/, \&quot;\&quot;);'],[0,'                return {'],[-1,'                    type: token,'],[-1,'                    text: match,'],[-1,'                    remainder: remainder'],[-1,'                };'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        var msg = \&quot;ERROR: In parsing: [\&quot; + text + \&quot;], expected one of: \&quot;;'],[0,'        for (i=0; i&lt;len; i++) {'],[0,'            token = tokens[i];'],[0,'            msg += \&quot;\\n    \&quot; + token + \&quot;: \&quot; + patterns[token];'],[-1,'        }'],[-1,''],[0,'        throw new Error(msg);'],[-1,'    }'],[-1,''],[1,'    function tokenize(text) {'],[0,'        var results = [];'],[0,'        var token, expect = [\&quot;NOT\&quot;, \&quot;GEOMETRY\&quot;, \&quot;SPATIAL\&quot;, \&quot;PROPERTY\&quot;, \&quot;LPAREN\&quot;];'],[-1,''],[0,'        do {'],[0,'            token = nextToken(text, expect);'],[0,'            text = token.remainder;'],[0,'            expect = follows[token.type];'],[0,'            if (token.type != \&quot;END\&quot; &amp;&amp; !expect) {'],[0,'                throw new Error(\&quot;No follows list for \&quot; + token.type);'],[-1,'            }'],[0,'            results.push(token);'],[-1,'        } while (token.type != \&quot;END\&quot;);'],[-1,''],[0,'        return results;'],[-1,'    }'],[-1,''],[1,'    function buildAst(tokens) {'],[0,'        var operatorStack = [],'],[-1,'            postfix = [];'],[-1,''],[0,'        while (tokens.length) {'],[0,'            var tok = tokens.shift();'],[0,'            switch (tok.type) {'],[-1,'                case \&quot;PROPERTY\&quot;:'],[-1,'                case \&quot;GEOMETRY\&quot;:'],[-1,'                case \&quot;VALUE\&quot;:'],[0,'                    postfix.push(tok);'],[0,'                    break;'],[-1,'                case \&quot;COMPARISON\&quot;:'],[-1,'                case \&quot;BETWEEN\&quot;:'],[-1,'                case \&quot;IS_NULL\&quot;:'],[-1,'                case \&quot;LOGICAL\&quot;:'],[0,'                    var p = precedence[tok.type];'],[-1,''],[0,'                    while (operatorStack.length &gt; 0 &amp;&amp;'],[-1,'                        (precedence[operatorStack[operatorStack.length - 1].type] &lt;= p)'],[-1,'                    ) {'],[0,'                        postfix.push(operatorStack.pop());'],[-1,'                    }'],[-1,''],[0,'                    operatorStack.push(tok);'],[0,'                    break;'],[-1,'                case \&quot;SPATIAL\&quot;:'],[-1,'                case \&quot;NOT\&quot;:'],[-1,'                case \&quot;LPAREN\&quot;:'],[0,'                    operatorStack.push(tok);'],[0,'                    break;'],[-1,'                case \&quot;RPAREN\&quot;:'],[0,'                    while (operatorStack.length &gt; 0 &amp;&amp;'],[-1,'                        (operatorStack[operatorStack.length - 1].type != \&quot;LPAREN\&quot;)'],[-1,'                    ) {'],[0,'                        postfix.push(operatorStack.pop());'],[-1,'                    }'],[0,'                    operatorStack.pop(); \/\/ toss out the LPAREN'],[-1,''],[0,'                    if (operatorStack.length &gt; 0 &amp;&amp;'],[-1,'                        operatorStack[operatorStack.length-1].type == \&quot;SPATIAL\&quot;) {'],[0,'                        postfix.push(operatorStack.pop());'],[-1,'                    }'],[-1,'                case \&quot;COMMA\&quot;:'],[-1,'                case \&quot;END\&quot;:'],[0,'                    break;'],[-1,'                default:'],[0,'                    throw new Error(\&quot;Unknown token type \&quot; + tok.type);'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        while (operatorStack.length &gt; 0) {'],[0,'            postfix.push(operatorStack.pop());'],[-1,'        }'],[-1,''],[0,'        function buildTree() {'],[0,'            var tok = postfix.pop();'],[0,'            switch (tok.type) {'],[-1,'                case \&quot;LOGICAL\&quot;:'],[0,'                    var rhs = buildTree(),'],[-1,'                        lhs = buildTree();'],[0,'                    return new OpenLayers.Filter.Logical({'],[-1,'                        filters: [lhs, rhs],'],[-1,'                        type: logicals[tok.text.toUpperCase()]'],[-1,'                    });'],[-1,'                case \&quot;NOT\&quot;:'],[0,'                    var operand = buildTree();'],[0,'                    return new OpenLayers.Filter.Logical({'],[-1,'                        filters: [operand],'],[-1,'                        type: OpenLayers.Filter.Logical.NOT'],[-1,'                    });'],[-1,'                case \&quot;BETWEEN\&quot;:'],[0,'                    var min, max, property;'],[0,'                    postfix.pop(); \/\/ unneeded AND token here'],[0,'                    max = buildTree();'],[0,'                    min = buildTree();'],[0,'                    property = buildTree();'],[0,'                    return new OpenLayers.Filter.Comparison({'],[-1,'                        property: property,'],[-1,'                        lowerBoundary: min,'],[-1,'                        upperBoundary: max,'],[-1,'                        type: OpenLayers.Filter.Comparison.BETWEEN'],[-1,'                    });'],[-1,'                case \&quot;COMPARISON\&quot;:'],[0,'                    var value = buildTree(),'],[-1,'                        property = buildTree();'],[0,'                    return new OpenLayers.Filter.Comparison({'],[-1,'                        property: property,'],[-1,'                        value: value,'],[-1,'                        type: operators[tok.text.toUpperCase()]'],[-1,'                    });'],[-1,'                case \&quot;IS_NULL\&quot;:'],[0,'                    var property = buildTree();'],[0,'                    return new OpenLayers.Filter.Comparison({'],[-1,'                        property: property,'],[-1,'                        type: operators[tok.text.toUpperCase()]'],[-1,'                    });'],[-1,'                case \&quot;VALUE\&quot;:'],[0,'                    var match = tok.text.match(\/^\'(.*)\'$\/);'],[0,'                    if (match) {'],[0,'                        return match[1].replace(\/\'\'\/g, \&quot;\'\&quot;);'],[-1,'                    } else {'],[0,'                        return Number(tok.text);'],[-1,'                    }'],[-1,'                case \&quot;SPATIAL\&quot;:'],[0,'                    switch(tok.text.toUpperCase()) {'],[-1,'                        case \&quot;BBOX\&quot;:'],[0,'                            var maxy = buildTree(),'],[-1,'                                maxx = buildTree(),'],[-1,'                                miny = buildTree(),'],[-1,'                                minx = buildTree(),'],[-1,'                                prop = buildTree();'],[-1,''],[0,'                            return new OpenLayers.Filter.Spatial({'],[-1,'                                type: OpenLayers.Filter.Spatial.BBOX,'],[-1,'                                property: prop,'],[-1,'                                value: OpenLayers.Bounds.fromArray('],[-1,'                                    [minx, miny, maxx, maxy]'],[-1,'                                )'],[-1,'                            });'],[-1,'                        case \&quot;INTERSECTS\&quot;:'],[0,'                            var value = buildTree(),'],[-1,'                                property = buildTree();'],[0,'                            return new OpenLayers.Filter.Spatial({'],[-1,'                                type: OpenLayers.Filter.Spatial.INTERSECTS,'],[-1,'                                property: property,'],[-1,'                                value: value'],[-1,'                            });'],[-1,'                        case \&quot;WITHIN\&quot;:'],[0,'                            var value = buildTree(),'],[-1,'                                property = buildTree();'],[0,'                            return new OpenLayers.Filter.Spatial({'],[-1,'                                type: OpenLayers.Filter.Spatial.WITHIN,'],[-1,'                                property: property,'],[-1,'                                value: value'],[-1,'                            });'],[-1,'                        case \&quot;CONTAINS\&quot;:'],[0,'                            var value = buildTree(),'],[-1,'                                property = buildTree();'],[0,'                            return new OpenLayers.Filter.Spatial({'],[-1,'                                type: OpenLayers.Filter.Spatial.CONTAINS,'],[-1,'                                property: property,'],[-1,'                                value: value'],[-1,'                            });'],[-1,'                        case \&quot;DWITHIN\&quot;:'],[0,'                            var distance = buildTree(),'],[-1,'                                value = buildTree(),'],[-1,'                                property = buildTree();'],[0,'                            return new OpenLayers.Filter.Spatial({'],[-1,'                                type: OpenLayers.Filter.Spatial.DWITHIN,'],[-1,'                                value: value,'],[-1,'                                property: property,'],[-1,'                                distance: Number(distance)'],[-1,'                            });'],[-1,'                    }'],[-1,'                case \&quot;GEOMETRY\&quot;:'],[0,'                    return OpenLayers.Geometry.fromWKT(tok.text);'],[-1,'                default:'],[0,'                    return tok.text;'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        var result = buildTree();'],[0,'        if (postfix.length &gt; 0) {'],[0,'            var msg = \&quot;Remaining tokens after building AST: \\n\&quot;;'],[0,'            for (var i = postfix.length - 1; i &gt;= 0; i--) {'],[0,'                msg += postfix[i].type + \&quot;: \&quot; + postfix[i].text + \&quot;\\n\&quot;;'],[-1,'            }'],[0,'            throw new Error(msg);'],[-1,'        }'],[-1,''],[0,'        return result;'],[-1,'    }'],[-1,''],[1,'    return OpenLayers.Class(OpenLayers.Format, {'],[-1,'        \/**'],[-1,'         * APIMethod: read'],[-1,'         * Generate a filter from a CQL string.'],[-1,''],[-1,'         * Parameters:'],[-1,'         * text - {String} The CQL text.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {&lt;OpenLayers.Filter&gt;} A filter based on the CQL text.'],[-1,'         *\/'],[-1,'        read: function(text) { '],[0,'            var result = buildAst(tokenize(text));'],[0,'            if (this.keepData) {'],[0,'                this.data = result;'],[-1,'            }'],[0,'            return result;'],[-1,'        },'],[-1,''],[-1,'        \/**'],[-1,'         * APIMethod: write'],[-1,'         * Convert a filter into a CQL string.'],[-1,''],[-1,'         * Parameters:'],[-1,'         * filter - {&lt;OpenLayers.Filter&gt;} The filter.'],[-1,'         *'],[-1,'         * Returns:'],[-1,'         * {String} A CQL string based on the filter.'],[-1,'         *\/'],[-1,'        write: function(filter) {'],[0,'            if (filter instanceof OpenLayers.Geometry) {'],[0,'                return filter.toString();'],[-1,'            }'],[0,'            switch (filter.CLASS_NAME) {'],[-1,'                case \&quot;OpenLayers.Filter.Spatial\&quot;:'],[0,'                    switch(filter.type) {'],[-1,'                        case OpenLayers.Filter.Spatial.BBOX:'],[0,'                            return \&quot;BBOX(\&quot; +'],[-1,'                                filter.property + \&quot;,\&quot; +'],[-1,'                                filter.value.toBBOX() +'],[-1,'                                \&quot;)\&quot;;'],[-1,'                        case OpenLayers.Filter.Spatial.DWITHIN:'],[0,'                            return \&quot;DWITHIN(\&quot; +'],[-1,'                                filter.property + \&quot;, \&quot; +'],[-1,'                                this.write(filter.value) + \&quot;, \&quot; +'],[-1,'                                filter.distance + \&quot;)\&quot;;'],[-1,'                        case OpenLayers.Filter.Spatial.WITHIN:'],[0,'                            return \&quot;WITHIN(\&quot; +'],[-1,'                                filter.property + \&quot;, \&quot; +'],[-1,'                                this.write(filter.value) + \&quot;)\&quot;;'],[-1,'                        case OpenLayers.Filter.Spatial.INTERSECTS:'],[0,'                            return \&quot;INTERSECTS(\&quot; +'],[-1,'                                filter.property + \&quot;, \&quot; +'],[-1,'                                this.write(filter.value) + \&quot;)\&quot;;'],[-1,'                        case OpenLayers.Filter.Spatial.CONTAINS:'],[0,'                            return \&quot;CONTAINS(\&quot; +'],[-1,'                                filter.property + \&quot;, \&quot; +'],[-1,'                                this.write(filter.value) + \&quot;)\&quot;;'],[-1,'                        default:'],[0,'                            throw new Error(\&quot;Unknown spatial filter type: \&quot; + filter.type);'],[-1,'                    }'],[-1,'                case \&quot;OpenLayers.Filter.Logical\&quot;:'],[0,'                    if (filter.type == OpenLayers.Filter.Logical.NOT) {'],[-1,'                        \/\/ TODO: deal with precedence of logical operators to '],[-1,'                        \/\/ avoid extra parentheses (not urgent)'],[0,'                        return \&quot;NOT (\&quot; + this.write(filter.filters[0]) + \&quot;)\&quot;;'],[-1,'                    } else {'],[0,'                        var res = \&quot;(\&quot;;'],[0,'                        var first = true;'],[0,'                        for (var i = 0; i &lt; filter.filters.length; i++) {'],[0,'                            if (first) {'],[0,'                                first = false;'],[-1,'                            } else {'],[0,'                                res += \&quot;) \&quot; + logicalReverse[filter.type] + \&quot; (\&quot;;'],[-1,'                            }'],[0,'                            res += this.write(filter.filters[i]);'],[-1,'                        }'],[0,'                        return res + \&quot;)\&quot;;'],[-1,'                    }'],[-1,'                case \&quot;OpenLayers.Filter.Comparison\&quot;:'],[0,'                    if (filter.type == OpenLayers.Filter.Comparison.BETWEEN) {'],[0,'                        return filter.property + \&quot; BETWEEN \&quot; + '],[-1,'                            this.write(filter.lowerBoundary) + \&quot; AND \&quot; + '],[-1,'                            this.write(filter.upperBoundary);'],[-1,'                    } else {'],[0,'                        return (filter.value !== null) ? filter.property +'],[-1,'                            \&quot; \&quot; + operatorReverse[filter.type] + \&quot; \&quot; + '],[-1,'                            this.write(filter.value) : filter.property +'],[-1,'                            \&quot; \&quot; + operatorReverse[filter.type];'],[-1,'                    }'],[-1,'                case undefined:'],[0,'                    if (typeof filter === \&quot;string\&quot;) {'],[0,'                        return \&quot;\'\&quot; + filter.replace(\/\'\/g, \&quot;\'\'\&quot;) + \&quot;\'\&quot;;'],[0,'                    } else if (typeof filter === \&quot;number\&quot;) {'],[0,'                        return String(filter);'],[-1,'                    }'],[-1,'                default:'],[0,'                    throw new Error(\&quot;Can\'t encode: \&quot; + filter.CLASS_NAME + \&quot; \&quot; + filter);'],[-1,'            }'],[-1,'        },'],[-1,''],[-1,'        CLASS_NAME: \&quot;OpenLayers.Format.CQL\&quot;'],[-1,''],[-1,'    });'],[-1,'})();'],[-1,''],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/Split.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Handler\/Path.js'],[-1,' * @requires OpenLayers\/Layer\/Vector.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.Split'],[-1,' * Acts as a split feature agent while editing vector features.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.Split = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: events'],[-1,'     * {&lt;OpenLayers.Events&gt;} Events instance for listeners and triggering'],[-1,'     *     control specific events.'],[-1,'     *'],[-1,'     * Register a listener for a particular event with the following syntax:'],[-1,'     * (code)'],[-1,'     * control.events.register(type, obj, listener);'],[-1,'     * (end)'],[-1,'     *'],[-1,'     * Supported event types (in addition to those from &lt;OpenLayers.Control.events&gt;):'],[-1,'     * beforesplit - Triggered before a split occurs.  Listeners receive an'],[-1,'     *     event object with *source* and *target* properties.'],[-1,'     * split - Triggered when a split occurs.  Listeners receive an event with'],[-1,'     *     an *original* property and a *features* property.  The original'],[-1,'     *     is a reference to the target feature that the sketch or modified'],[-1,'     *     feature intersects.  The features property is a list of all features'],[-1,'     *     that result from this single split.  This event is triggered before'],[-1,'     *     the resulting features are added to the layer (while the layer still'],[-1,'     *     has a reference to the original).'],[-1,'     * aftersplit - Triggered after all splits resulting from a single sketch'],[-1,'     *     or feature modification have occurred.  The original features'],[-1,'     *     have been destroyed and features that result from the split'],[-1,'     *     have already been added to the layer.  Listeners receive an event'],[-1,'     *     with a *source* and *features* property.  The source references the'],[-1,'     *     sketch or modified feature used as a splitter.  The features'],[-1,'     *     property is a list of all resulting features.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: layer'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;} The target layer with features to be split.'],[-1,'     *     Set at construction or after construction with &lt;setLayer&gt;.'],[-1,'     *\/'],[-1,'    layer: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: source'],[-1,'     * {&lt;OpenLayers.Layer.Vector&gt;} Optional source layer.  Any newly created'],[-1,'     *     or modified features from this layer will be used to split features'],[-1,'     *     on the target layer.  If not provided, a temporary sketch layer will'],[-1,'     *     be created.'],[-1,'     *\/'],[-1,'    source: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: sourceOptions'],[-1,'     * {Options} If a temporary sketch layer is created, these layer options'],[-1,'     *     will be applied.'],[-1,'     *\/'],[-1,'    sourceOptions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: tolerance'],[-1,'     * {Number} Distance between the calculated intersection and a vertex on'],[-1,'     *     the source geometry below which the existing vertex will be used'],[-1,'     *     for the split.  Default is null.'],[-1,'     *\/'],[-1,'    tolerance: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: edge'],[-1,'     * {Boolean} Allow splits given intersection of edges only.  Default is'],[-1,'     *     true.  If false, a vertex on the source must be within the'],[-1,'     *     &lt;tolerance&gt; distance of the calculated intersection for a split'],[-1,'     *     to occur.'],[-1,'     *\/'],[-1,'    edge: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: deferDelete'],[-1,'     * {Boolean} Instead of removing features from the layer, set feature'],[-1,'     *     states of split features to DELETE.  This assumes a save strategy'],[-1,'     *     or other component is in charge of removing features from the'],[-1,'     *     layer.  Default is false.  If false, split features will be'],[-1,'     *     immediately deleted from the layer.'],[-1,'     *\/'],[-1,'    deferDelete: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: mutual'],[-1,'     * {Boolean} If source and target layers are the same, split source'],[-1,'     *     features and target features where they intersect.  Default is'],[-1,'     *     true.  If false, only target features will be split.'],[-1,'     *\/'],[-1,'    mutual: true,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: targetFilter'],[-1,'     * {&lt;OpenLayers.Filter&gt;} Optional filter that will be evaluated'],[-1,'     *     to determine if a feature from the target layer is eligible for'],[-1,'     *     splitting.'],[-1,'     *\/'],[-1,'    targetFilter: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: sourceFilter'],[-1,'     * {&lt;OpenLayers.Filter&gt;} Optional filter that will be evaluated'],[-1,'     *     to determine if a feature from the source layer is eligible for'],[-1,'     *     splitting.'],[-1,'     *\/'],[-1,'    sourceFilter: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: handler'],[-1,'     * {&lt;OpenLayers.Handler.Path&gt;} The temporary sketch handler created if'],[-1,'     *     no source layer is provided.'],[-1,'     *\/'],[-1,'    handler: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.Split'],[-1,'     * Creates a new split control. A control is constructed with a target'],[-1,'     *     layer and an optional source layer. While the control is active,'],[-1,'     *     creating new features or modifying existing features on the source'],[-1,'     *     layer will result in splitting any eligible features on the target'],[-1,'     *     layer.  If no source layer is provided, a temporary sketch layer will'],[-1,'     *     be created to create lines for splitting features on the target.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An object containing all configuration properties for'],[-1,'     *     the control.'],[-1,'     *'],[-1,'     * Valid options:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;} The target layer.  Features from this'],[-1,'     *     layer will be split by new or modified features on the source layer'],[-1,'     *     or temporary sketch layer.'],[-1,'     * source - {&lt;OpenLayers.Layer.Vector&gt;} Optional source layer.  If provided'],[-1,'     *     newly created features or modified features will be used to split'],[-1,'     *     features on the target layer.  If not provided, a temporary sketch'],[-1,'     *     layer will be created for drawing lines.'],[-1,'     * tolerance - {Number} Optional value for the distance between a source'],[-1,'     *     vertex and the calculated intersection below which the split will'],[-1,'     *     occur at the vertex.'],[-1,'     * edge - {Boolean} Allow splits given intersection of edges only.  Default'],[-1,'     *     is true.  If false, a vertex on the source must be within the'],[-1,'     *     &lt;tolerance&gt; distance of the calculated intersection for a split'],[-1,'     *     to occur.'],[-1,'     * mutual - {Boolean} If source and target are the same, split source'],[-1,'     *     features and target features where they intersect.  Default is'],[-1,'     *     true.  If false, only target features will be split.'],[-1,'     * targetFilter - {&lt;OpenLayers.Filter&gt;} Optional filter that will be evaluated'],[-1,'     *     to determine if a feature from the target layer is eligible for'],[-1,'     *     splitting.'],[-1,'     * sourceFilter - {&lt;OpenLayers.Filter&gt;} Optional filter that will be evaluated'],[-1,'     *     to determine if a feature from the target layer is eligible for'],[-1,'     *     splitting.'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, [options]);'],[0,'        this.options = options || {}; \/\/ TODO: this could be done by the super'],[-1,'        '],[-1,'        \/\/ set the source layer if provided'],[0,'        if(this.options.source) {'],[0,'            this.setSource(this.options.source);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: setSource'],[-1,'     * Set the source layer for edits layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layer - {&lt;OpenLayers.Layer.Vector&gt;}  The new source layer layer.  If'],[-1,'     *     null, a temporary sketch layer will be created.'],[-1,'     *\/'],[-1,'    setSource: function(layer) {'],[0,'        if(this.active) {'],[0,'            this.deactivate();'],[0,'            if(this.handler) {'],[0,'                this.handler.destroy();'],[0,'                delete this.handler;'],[-1,'            }'],[0,'            this.source = layer;'],[0,'            this.activate();'],[-1,'        } else {'],[0,'            this.source = layer;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: activate'],[-1,'     * Activate the control.  Activating the control registers listeners for'],[-1,'     *     editing related events so that during feature creation and'],[-1,'     *     modification, features in the target will be considered for'],[-1,'     *     splitting.'],[-1,'     *\/'],[-1,'    activate: function() {'],[0,'        var activated = OpenLayers.Control.prototype.activate.call(this);'],[0,'        if(activated) {'],[0,'            if(!this.source) {'],[0,'                if(!this.handler) {'],[0,'                    this.handler = new OpenLayers.Handler.Path(this,'],[-1,'                        {done: function(geometry) {'],[0,'                            this.onSketchComplete({'],[-1,'                                feature: new OpenLayers.Feature.Vector(geometry)'],[-1,'                            });'],[-1,'                        }},'],[-1,'                        {layerOptions: this.sourceOptions}'],[-1,'                    );'],[-1,'                }'],[0,'                this.handler.activate();'],[0,'            } else if(this.source.events) {'],[0,'                this.source.events.on({'],[-1,'                    sketchcomplete: this.onSketchComplete,'],[-1,'                    afterfeaturemodified: this.afterFeatureModified,'],[-1,'                    scope: this'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[0,'        return activated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: deactivate'],[-1,'     * Deactivate the control.  Deactivating the control unregisters listeners'],[-1,'     *     so feature editing may proceed without engaging the split agent.'],[-1,'     *\/'],[-1,'    deactivate: function() {'],[0,'        var deactivated = OpenLayers.Control.prototype.deactivate.call(this);'],[0,'        if(deactivated) {'],[0,'            if(this.source &amp;&amp; this.source.events) {'],[0,'                this.source.events.un({'],[-1,'                    sketchcomplete: this.onSketchComplete,'],[-1,'                    afterfeaturemodified: this.afterFeatureModified,'],[-1,'                    scope: this'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[0,'        return deactivated;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onSketchComplete'],[-1,'     * Registered as a listener for the sketchcomplete event on the editable'],[-1,'     *     layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Object} The sketch complete event.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} Stop the sketch from being added to the layer (it has been'],[-1,'     *     split).'],[-1,'     *\/'],[-1,'    onSketchComplete: function(event) {'],[0,'        this.feature = null;'],[0,'        return !this.considerSplit(event.feature);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: afterFeatureModified'],[-1,'     * Registered as a listener for the afterfeaturemodified event on the'],[-1,'     *     editable layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * event - {Object} The after feature modified event.'],[-1,'     *\/'],[-1,'    afterFeatureModified: function(event) {'],[0,'        if(event.modified) {'],[0,'            var feature = event.feature;'],[0,'            if (typeof feature.geometry.split === \&quot;function\&quot;) {'],[0,'                this.feature = event.feature;'],[0,'                this.considerSplit(event.feature);'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: removeByGeometry'],[-1,'     * Remove a feature from a list based on the given geometry.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {Array(&lt;OpenLayers.Feature.Vector&gt;)} A list of features.'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;} A geometry.'],[-1,'     *\/'],[-1,'    removeByGeometry: function(features, geometry) {'],[0,'        for(var i=0, len=features.length; i&lt;len; ++i) {'],[0,'            if(features[i].geometry === geometry) {'],[0,'                features.splice(i, 1);'],[0,'                break;'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: isEligible'],[-1,'     * Test if a target feature is eligible for splitting.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * target - {&lt;OpenLayers.Feature.Vector&gt;} The target feature.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The target is eligible for splitting.'],[-1,'     *\/'],[-1,'    isEligible: function(target) {'],[0,'        if (!target.geometry) {'],[0,'            return false;'],[-1,'        } else {'],[0,'            return ('],[-1,'                target.state !== OpenLayers.State.DELETE'],[-1,'            ) &amp;&amp; ('],[-1,'                typeof target.geometry.split === \&quot;function\&quot;'],[-1,'            ) &amp;&amp; ('],[-1,'                this.feature !== target'],[-1,'            ) &amp;&amp; ('],[-1,'                !this.targetFilter ||'],[-1,'                this.targetFilter.evaluate(target.attributes)'],[-1,'            );'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: considerSplit'],[-1,'     * Decide whether or not to split target features with the supplied'],[-1,'     *     feature.  If &lt;mutual&gt; is true, both the source and target features'],[-1,'     *     will be split if eligible.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The newly created or modified'],[-1,'     *     feature.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The supplied feature was split (and destroyed).'],[-1,'     *\/'],[-1,'    considerSplit: function(feature) {'],[0,'        var sourceSplit = false;'],[0,'        var targetSplit = false;'],[0,'        if(!this.sourceFilter ||'],[-1,'           this.sourceFilter.evaluate(feature.attributes)) {'],[0,'            var features = this.layer &amp;&amp; this.layer.features || [];'],[0,'            var target, results, proceed;'],[0,'            var additions = [], removals = [];'],[0,'            var mutual = (this.layer === this.source) &amp;&amp; this.mutual;'],[0,'            var options = {'],[-1,'                edge: this.edge,'],[-1,'                tolerance: this.tolerance,'],[-1,'                mutual: mutual'],[-1,'            };'],[0,'            var sourceParts = [feature.geometry];'],[0,'            var targetFeature, targetParts;'],[0,'            var source, parts;'],[0,'            for(var i=0, len=features.length; i&lt;len; ++i) {'],[0,'                targetFeature = features[i];'],[0,'                if(this.isEligible(targetFeature)) {'],[0,'                    targetParts = [targetFeature.geometry];'],[-1,'                    \/\/ work through source geoms - this array may change'],[0,'                    for(var j=0; j&lt;sourceParts.length; ++j) { '],[0,'                        source = sourceParts[j];'],[-1,'                        \/\/ work through target parts - this array may change'],[0,'                        for(var k=0; k&lt;targetParts.length; ++k) {'],[0,'                            target = targetParts[k];'],[0,'                            if(source.getBounds().intersectsBounds(target.getBounds())) {'],[0,'                                results = source.split(target, options);'],[0,'                                if(results) {'],[0,'                                    proceed = this.events.triggerEvent('],[-1,'                                        \&quot;beforesplit\&quot;, {source: feature, target: targetFeature}'],[-1,'                                    );'],[0,'                                    if(proceed !== false) {'],[0,'                                        if(mutual) {'],[0,'                                            parts = results[0];'],[-1,'                                            \/\/ handle parts that result from source splitting'],[0,'                                            if(parts.length &gt; 1) {'],[-1,'                                                \/\/ splice in new source parts'],[0,'                                                parts.unshift(j, 1); \/\/ add args for splice below'],[0,'                                                Array.prototype.splice.apply(sourceParts, parts);'],[0,'                                                j += parts.length - 3;'],[-1,'                                            }'],[0,'                                            results = results[1];'],[-1,'                                        }'],[-1,'                                        \/\/ handle parts that result from target splitting'],[0,'                                        if(results.length &gt; 1) {'],[-1,'                                            \/\/ splice in new target parts'],[0,'                                            results.unshift(k, 1); \/\/ add args for splice below'],[0,'                                            Array.prototype.splice.apply(targetParts, results);'],[0,'                                            k += results.length - 3;'],[-1,'                                        }'],[-1,'                                    }'],[-1,'                                }'],[-1,'                            }'],[-1,'                        }'],[-1,'                    }'],[0,'                    if(targetParts &amp;&amp; targetParts.length &gt; 1) {'],[0,'                        this.geomsToFeatures(targetFeature, targetParts);'],[0,'                        this.events.triggerEvent(\&quot;split\&quot;, {'],[-1,'                            original: targetFeature,'],[-1,'                            features: targetParts'],[-1,'                        });'],[0,'                        Array.prototype.push.apply(additions, targetParts);'],[0,'                        removals.push(targetFeature);'],[0,'                        targetSplit = true;'],[-1,'                    }'],[-1,'                }'],[-1,'            }'],[0,'            if(sourceParts &amp;&amp; sourceParts.length &gt; 1) {'],[0,'                this.geomsToFeatures(feature, sourceParts);'],[0,'                this.events.triggerEvent(\&quot;split\&quot;, {'],[-1,'                    original: feature,'],[-1,'                    features: sourceParts'],[-1,'                });'],[0,'                Array.prototype.push.apply(additions, sourceParts);'],[0,'                removals.push(feature);'],[0,'                sourceSplit = true;'],[-1,'            }'],[0,'            if(sourceSplit || targetSplit) {'],[-1,'                \/\/ remove and add feature events are suppressed'],[-1,'                \/\/ listen for split event on this control instead'],[0,'                if(this.deferDelete) {'],[-1,'                    \/\/ Set state instead of removing.  Take care to avoid'],[-1,'                    \/\/ setting delete for features that have not yet been'],[-1,'                    \/\/ inserted - those should be destroyed immediately.'],[0,'                    var feat, destroys = [];'],[0,'                    for(var i=0, len=removals.length; i&lt;len; ++i) {'],[0,'                        feat = removals[i];'],[0,'                        if(feat.state === OpenLayers.State.INSERT) {'],[0,'                            destroys.push(feat);'],[-1,'                        } else {'],[0,'                            feat.state = OpenLayers.State.DELETE;'],[0,'                            this.layer.drawFeature(feat);'],[-1,'                        }'],[-1,'                    }'],[0,'                    this.layer.destroyFeatures(destroys, {silent: true});'],[0,'                    for(var i=0, len=additions.length; i&lt;len; ++i) {'],[0,'                        additions[i].state = OpenLayers.State.INSERT;'],[-1,'                    }'],[-1,'                } else {'],[0,'                    this.layer.destroyFeatures(removals, {silent: true});'],[-1,'                }'],[0,'                this.layer.addFeatures(additions, {silent: true});'],[0,'                this.events.triggerEvent(\&quot;aftersplit\&quot;, {'],[-1,'                    source: feature,'],[-1,'                    features: additions'],[-1,'                });'],[-1,'            }'],[-1,'        }'],[0,'        return sourceSplit;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: geomsToFeatures'],[-1,'     * Create new features given a template feature and a list of geometries.'],[-1,'     *     The list of geometries is modified in place.  The result will be'],[-1,'     *     a list of new features.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;} The feature to be cloned.'],[-1,'     * geoms - {Array(&lt;OpenLayers.Geometry&gt;)} List of goemetries.  This will'],[-1,'     *     become a list of new features.'],[-1,'     *\/'],[-1,'    geomsToFeatures: function(feature, geoms) {'],[0,'        var clone = feature.clone();'],[0,'        delete clone.geometry;'],[0,'        var newFeature;'],[0,'        for(var i=0, len=geoms.length; i&lt;len; ++i) {'],[-1,'            \/\/ turn results list from geoms to features'],[0,'            newFeature = clone.clone();'],[0,'            newFeature.geometry = geoms[i];'],[0,'            newFeature.state = OpenLayers.State.INSERT;'],[0,'            geoms[i] = newFeature;'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: destroy'],[-1,'     * Clean up the control.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if(this.active) {'],[0,'            this.deactivate(); \/\/ TODO: this should be handled by the super'],[-1,'        }'],[0,'        OpenLayers.Control.prototype.destroy.call(this);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.Split\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Protocol\/SOS\/v1_0_0.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Protocol\/SOS.js'],[-1,' * @requires OpenLayers\/Format\/SOSGetFeatureOfInterest.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Protocol.SOS.v1_0_0'],[-1,' * An SOS v1.0.0 Protocol for vector layers.  Create a new instance with the'],[-1,' *     &lt;OpenLayers.Protocol.SOS.v1_0_0&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Protocol&gt;'],[-1,' *\/'],[1,' OpenLayers.Protocol.SOS.v1_0_0 = OpenLayers.Class(OpenLayers.Protocol, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: fois'],[-1,'     * {Array(String)} Array of features of interest (foi)'],[-1,'     *\/'],[-1,'    fois: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: formatOptions'],[-1,'     * {Object} Optional options for the format.  If a format is not provided,'],[-1,'     *     this property can be used to extend the default format options.'],[-1,'     *\/'],[-1,'    formatOptions: null,'],[-1,'   '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Protocol.SOS'],[-1,'     * A class for giving layers an SOS protocol.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} Optional object whose properties will be set on the'],[-1,'     *     instance.'],[-1,'     *'],[-1,'     * Valid options properties:'],[-1,'     * url - {String} URL to send requests to (required).'],[-1,'     * fois - {Array} The features of interest (required).'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Protocol.prototype.initialize.apply(this, [options]);'],[0,'        if(!options.format) {'],[0,'            this.format = new OpenLayers.Format.SOSGetFeatureOfInterest('],[-1,'                this.formatOptions);'],[-1,'        }'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     * Clean up the protocol.'],[-1,'     *\/'],[-1,'    destroy: function() {'],[0,'        if(this.options &amp;&amp; !this.options.format) {'],[0,'            this.format.destroy();'],[-1,'        }'],[0,'        this.format = null;'],[0,'        OpenLayers.Protocol.prototype.destroy.apply(this);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Construct a request for reading new sensor positions. This is done by'],[-1,'     *     issuing one GetFeatureOfInterest request.'],[-1,'     *\/'],[-1,'    read: function(options) {'],[0,'        options = OpenLayers.Util.extend({}, options);'],[0,'        OpenLayers.Util.applyDefaults(options, this.options || {});'],[0,'        var response = new OpenLayers.Protocol.Response({requestType: \&quot;read\&quot;});'],[0,'        var format = this.format;'],[0,'        var data = OpenLayers.Format.XML.prototype.write.apply(format,'],[-1,'            [format.writeNode(\&quot;sos:GetFeatureOfInterest\&quot;, {fois: this.fois})]'],[-1,'        );'],[0,'        response.priv = OpenLayers.Request.POST({'],[-1,'            url: options.url,'],[-1,'            callback: this.createCallback(this.handleRead, response, options),'],[-1,'            data: data'],[-1,'        });'],[0,'        return response;'],[-1,'    },'],[-1,'   '],[-1,'    \/**'],[-1,'     * Method: handleRead'],[-1,'     * Deal with response from the read request.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * response - {&lt;OpenLayers.Protocol.Response&gt;} The response object to pass'],[-1,'     *     to the user callback.'],[-1,'     * options - {Object} The user options passed to the read call.'],[-1,'     *\/'],[-1,'    handleRead: function(response, options) {'],[0,'        if(options.callback) {'],[0,'            var request = response.priv;'],[0,'            if(request.status &gt;= 200 &amp;&amp; request.status &lt; 300) {'],[-1,'                \/\/ success'],[0,'                response.features = this.parseFeatures(request);'],[0,'                response.code = OpenLayers.Protocol.Response.SUCCESS;'],[-1,'            } else {'],[-1,'                \/\/ failure'],[0,'                response.code = OpenLayers.Protocol.Response.FAILURE;'],[-1,'            }'],[0,'            options.callback.call(options.scope, response);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: parseFeatures'],[-1,'     * Read HTTP response body and return features'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * request - {XMLHttpRequest} The request object'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Array({&lt;OpenLayers.Feature.Vector&gt;})} Array of features'],[-1,'     *\/'],[-1,'    parseFeatures: function(request) {'],[0,'        var doc = request.responseXML;'],[0,'        if(!doc || !doc.documentElement) {'],[0,'            doc = request.responseText;'],[-1,'        }'],[0,'        if(!doc || doc.length &lt;= 0) {'],[0,'            return null;'],[-1,'        }'],[0,'        return this.format.read(doc);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Protocol.SOS.v1_0_0\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/KaMapCache.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' * @requires OpenLayers\/Layer\/KaMap.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.KaMapCache'],[-1,' * '],[-1,' * This class is designed to talk directly to a web-accessible ka-Map'],[-1,' * cache generated by the precache2.php script.'],[-1,' * '],[-1,' * To create a a new KaMapCache layer, you must indicate also the \&quot;i\&quot; parameter'],[-1,' * (that will be used to calculate the file extension), and another special'],[-1,' * parameter, object names \&quot;metaTileSize\&quot;, with \&quot;h\&quot; (height) and \&quot;w\&quot; (width)'],[-1,' * properties.'],[-1,' * '],[-1,' *     \/\/ Create a new kaMapCache layer. '],[-1,' *     var kamap_base = new OpenLayers.Layer.KaMapCache('],[-1,' *         \&quot;Satellite\&quot;,'],[-1,' *         \&quot;http:\/\/www.example.org\/web\/acessible\/cache\&quot;,'],[-1,' *         {g: \&quot;satellite\&quot;, map: \&quot;world\&quot;, i: \'png24\', metaTileSize: {w: 5, h: 5} }'],[-1,' *       );'],[-1,' *    '],[-1,' *     \/\/ Create an kaMapCache overlay layer (using \&quot;isBaseLayer: false\&quot;). '],[-1,' *     \/\/ Forces the output to be a \&quot;gif\&quot;, using the \&quot;i\&quot; parameter.'],[-1,' *     var kamap_overlay = new OpenLayers.Layer.KaMapCache('],[-1,' *         \&quot;Streets\&quot;,'],[-1,' *         \&quot;http:\/\/www.example.org\/web\/acessible\/cache\&quot;,'],[-1,' *         {g: \&quot;streets\&quot;, map: \&quot;world\&quot;, i: \&quot;gif\&quot;, metaTileSize: {w: 5, h: 5} },'],[-1,' *         {isBaseLayer: false}'],[-1,' *       );'],[-1,' *'],[-1,' * The cache URLs must look like: '],[-1,' *   var\/cache\/World\/50000\/Group_Name\/def\/t-440320\/l20480'],[-1,' * '],[-1,' * This means that the cache generated via tile.php will *not* work with'],[-1,' *     this class, and should instead use the KaMap layer.'],[-1,' *'],[-1,' * More information is available in Ticket #1518.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.KaMap&gt;'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.KaMapCache = OpenLayers.Class(OpenLayers.Layer.KaMap, {'],[-1,''],[-1,'    \/**'],[-1,'     * Constant: IMAGE_EXTENSIONS'],[-1,'     * {Object} Simple hash map to convert format to extension.'],[-1,'     *\/'],[-1,'    IMAGE_EXTENSIONS: {'],[-1,'        \'jpeg\': \'jpg\','],[-1,'        \'gif\' : \'gif\','],[-1,'        \'png\' : \'png\','],[-1,'        \'png8\' : \'png\','],[-1,'        \'png24\' : \'png\','],[-1,'        \'dithered\' : \'png\''],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constant: DEFAULT_FORMAT'],[-1,'     * {Object} Simple hash map to convert format to extension.'],[-1,'     *\/'],[-1,'    DEFAULT_FORMAT: \'jpeg\','],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.KaMapCache'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * name - {String}'],[-1,'     * url - {String}'],[-1,'     * params - {Object} Parameters to be sent to the HTTP server in the'],[-1,'     *    query string for the tile. The format can be set via the \'i\''],[-1,'     *    parameter (defaults to jpg) , and the map should be set via '],[-1,'     *    the \'map\' parameter. It has been reported that ka-Map may behave'],[-1,'     *    inconsistently if your format parameter does not match the format'],[-1,'     *    parameter configured in your config.php. (See ticket #327 for more'],[-1,'     *    information.)'],[-1,'     * options - {Object} Additional options for the layer. Any of the '],[-1,'     *     APIProperties listed on this layer, and any layer types it'],[-1,'     *     extends, can be overridden through the options parameter. '],[-1,'     *\/'],[-1,'    initialize: function(name, url, params, options) {'],[0,'        OpenLayers.Layer.KaMap.prototype.initialize.apply(this, arguments);'],[0,'        this.extension = this.IMAGE_EXTENSIONS[this.params.i.toLowerCase() || this.DEFAULT_FORMAT];'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     * '],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} A string with the layer\'s url and parameters and also the '],[-1,'     *          passed-in bounds and appropriate tile size specified as '],[-1,'     *          parameters'],[-1,'     *\/'],[-1,'    getURL: function (bounds) {'],[0,'        bounds = this.adjustBounds(bounds);'],[0,'        var mapRes = this.map.getResolution();'],[0,'        var scale = Math.round((this.map.getScale() * 10000)) \/ 10000;'],[0,'        var pX = Math.round(bounds.left \/ mapRes);'],[0,'        var pY = -Math.round(bounds.top \/ mapRes);'],[-1,''],[0,'        var metaX = Math.floor(pX \/ this.tileSize.w \/ this.params.metaTileSize.w) * this.tileSize.w * this.params.metaTileSize.w;'],[0,'        var metaY = Math.floor(pY \/ this.tileSize.h \/ this.params.metaTileSize.h) * this.tileSize.h * this.params.metaTileSize.h;'],[-1,'    '],[0,'        var components = ['],[-1,'            \&quot;\/\&quot;,'],[-1,'            this.params.map,'],[-1,'            \&quot;\/\&quot;,'],[-1,'            scale,'],[-1,'            \&quot;\/\&quot;,'],[-1,'            this.params.g.replace(\/\\s\/g, \'_\'),'],[-1,'            \&quot;\/def\/t\&quot;, '],[-1,'            metaY,'],[-1,'            \&quot;\/l\&quot;,'],[-1,'            metaX,'],[-1,'            \&quot;\/t\&quot;,'],[-1,'            pY,'],[-1,'            \&quot;l\&quot;,'],[-1,'            pX,'],[-1,'            \&quot;.\&quot;,'],[-1,'            this.extension'],[-1,'          ];'],[-1,''],[0,'        var url = this.url;'],[-1,''],[0,'        if (OpenLayers.Util.isArray(url)) {'],[0,'            url = this.selectUrl(components.join(\'\'), url);'],[-1,'        }'],[0,'        return url + components.join(\&quot;\&quot;);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.KaMapCache\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Layer\/TileCache.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Layer\/Grid.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Layer.TileCache'],[-1,' * A read only TileCache layer.  Used to requests tiles cached by TileCache in'],[-1,' *     a web accessible cache.  This means that you have to pre-populate your'],[-1,' *     cache before this layer can be used.  It is meant only to read tiles'],[-1,' *     created by TileCache, and not to make calls to TileCache for tile'],[-1,' *     creation.  Create a new instance with the'],[-1,' *     &lt;OpenLayers.Layer.TileCache&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Layer.Grid&gt;'],[-1,' *\/'],[1,'OpenLayers.Layer.TileCache = OpenLayers.Class(OpenLayers.Layer.Grid, {'],[-1,''],[-1,'    \/** '],[-1,'     * APIProperty: isBaseLayer'],[-1,'     * {Boolean} Treat this layer as a base layer.  Default is true.'],[-1,'     *\/'],[-1,'    isBaseLayer: true,'],[-1,'    '],[-1,'    \/** '],[-1,'     * APIProperty: format'],[-1,'     * {String} Mime type of the images returned.  Default is image\/png.'],[-1,'     *\/'],[-1,'    format: \'image\/png\','],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: serverResolutions'],[-1,'     * {Array} A list of all resolutions available on the server.  Only set this'],[-1,'     *     property if the map resolutions differ from the server. This'],[-1,'     *     property serves two purposes. (a) &lt;serverResolutions&gt; can include'],[-1,'     *     resolutions that the server supports and that you don\'t want to'],[-1,'     *     provide with this layer. (b) The map can work with resolutions'],[-1,'     *     that aren\'t supported by the server, i.e. that aren\'t in'],[-1,'     *     &lt;serverResolutions&gt;. When the map is displayed in such a resolution'],[-1,'     *     data for the closest server-supported resolution is loaded and the'],[-1,'     *     layer div is stretched as necessary.'],[-1,'     *\/'],[-1,'    serverResolutions: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Layer.TileCache'],[-1,'     * Create a new read only TileCache layer.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String} Name of the layer displayed in the interface'],[-1,'     * url - {String} Location of the web accessible cache (not the location of'],[-1,'     *     your tilecache script!)'],[-1,'     * layername - {String} Layer name as defined in the TileCache '],[-1,'     *     configuration'],[-1,'     * options - {Object} Optional object with properties to be set on the'],[-1,'     *     layer.  Note that you should speficy your resolutions to match'],[-1,'     *     your TileCache configuration.  This can be done by setting'],[-1,'     *     the resolutions array directly (here or on the map), by setting'],[-1,'     *     maxResolution and numZoomLevels, or by using scale based properties.'],[-1,'     *\/'],[-1,'    initialize: function(name, url, layername, options) {'],[0,'        this.layername = layername;'],[0,'        OpenLayers.Layer.Grid.prototype.initialize.apply(this,'],[-1,'                                                         [name, url, {}, options]);'],[0,'        this.extension = this.format.split(\'\/\')[1].toLowerCase();'],[0,'        this.extension = (this.extension == \'jpg\') ? \'jpeg\' : this.extension;'],[-1,'    },    '],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: clone'],[-1,'     * obj - {Object} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Layer.TileCache&gt;} An exact clone of this '],[-1,'     *     &lt;OpenLayers.Layer.TileCache&gt;'],[-1,'     *\/'],[-1,'    clone: function (obj) {'],[-1,'        '],[0,'        if (obj == null) {'],[0,'            obj = new OpenLayers.Layer.TileCache(this.name,'],[-1,'                                                 this.url,'],[-1,'                                                 this.layername,'],[-1,'                                                 this.getOptions());'],[-1,'        }'],[-1,''],[-1,'        \/\/get all additions from superclasses'],[0,'        obj = OpenLayers.Layer.Grid.prototype.clone.apply(this, [obj]);'],[-1,''],[-1,'        \/\/ copy\/set any non-init, non-simple values here'],[-1,''],[0,'        return obj;'],[-1,'    },    '],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getURL'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * bounds - {&lt;OpenLayers.Bounds&gt;} '],[-1,'     * '],[-1,'     * Returns:'],[-1,'     * {String} A string with the layer\'s url and parameters and also the '],[-1,'     *     passed-in bounds and appropriate tile size specified as parameters.'],[-1,'     *\/'],[-1,'    getURL: function(bounds) {'],[0,'        var res = this.getServerResolution();'],[0,'        var bbox = this.maxExtent;'],[0,'        var size = this.tileSize;'],[0,'        var tileX = Math.round((bounds.left - bbox.left) \/ (res * size.w));'],[0,'        var tileY = Math.round((bounds.bottom - bbox.bottom) \/ (res * size.h));'],[0,'        var tileZ = this.serverResolutions != null ?'],[-1,'            OpenLayers.Util.indexOf(this.serverResolutions, res) :'],[-1,'            this.map.getZoom();'],[-1,''],[0,'        var components = ['],[-1,'            this.layername,'],[-1,'            OpenLayers.Number.zeroPad(tileZ, 2),'],[-1,'            OpenLayers.Number.zeroPad(parseInt(tileX \/ 1000000), 3),'],[-1,'            OpenLayers.Number.zeroPad((parseInt(tileX \/ 1000) % 1000), 3),'],[-1,'            OpenLayers.Number.zeroPad((parseInt(tileX) % 1000), 3),'],[-1,'            OpenLayers.Number.zeroPad(parseInt(tileY \/ 1000000), 3),'],[-1,'            OpenLayers.Number.zeroPad((parseInt(tileY \/ 1000) % 1000), 3),'],[-1,'            OpenLayers.Number.zeroPad((parseInt(tileY) % 1000), 3) + \'.\' + this.extension'],[-1,'        ];'],[0,'        var path = components.join(\'\/\'); '],[0,'        var url = this.url;'],[0,'        if (OpenLayers.Util.isArray(url)) {'],[0,'            url = this.selectUrl(path, url);'],[-1,'        }'],[0,'        url = (url.charAt(url.length - 1) == \'\/\') ? url : url + \'\/\';'],[0,'        return url + path;'],[-1,'    },'],[-1,'    '],[-1,'    CLASS_NAME: \&quot;OpenLayers.Layer.TileCache\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMSCapabilities\/v1_1_1.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WMSCapabilities\/v1_1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMSCapabilities\/v1_1_1'],[-1,' * Read WMS Capabilities version 1.1.1.'],[-1,' *'],[-1,' * Note on &lt;ScaleHint&gt; parsing: If the \'min\' attribute is set to \&quot;0\&quot;, no'],[-1,' * maxScale will be set on the layer object. If the \'max\' attribute is set to'],[-1,' * \&quot;Infinity\&quot;, no minScale will be set. This makes it easy to create proper'],[-1,' * {&lt;OpenLayers.Layer.WMS&gt;} configurations directly from the layer object'],[-1,' * literals returned by this format, because no minScale\/maxScale modifications'],[-1,' * need to be made.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WMSCapabilities.v1_1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMSCapabilities.v1_1_1 = OpenLayers.Class('],[-1,'    OpenLayers.Format.WMSCapabilities.v1_1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} The specific parser version.'],[-1,'     *\/'],[-1,'    version: \&quot;1.1.1\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMSCapabilities.v1_1_1'],[-1,'     * Create a new parser for WMS capabilities version 1.1.1.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wms\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;SRS\&quot;: function(node, obj) {'],[0,'                obj.srs[this.getChildValue(node)] = true;'],[-1,'            }'],[-1,'        }, OpenLayers.Format.WMSCapabilities.v1_1.prototype.readers[\&quot;wms\&quot;])'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMSCapabilities.v1_1_1\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/WMSCapabilities\/v1_1_1_WMSC.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/WMSCapabilities\/v1_1_1.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.WMSCapabilities\/v1_1_1_WMSC'],[-1,' * Read WMS-C Capabilities version 1.1.1.'],[-1,' * '],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.WMSCapabilities.v1_1_1&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC = OpenLayers.Class('],[-1,'    OpenLayers.Format.WMSCapabilities.v1_1_1, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: version'],[-1,'     * {String} The specific parser version.'],[-1,'     *\/'],[-1,'    version: \&quot;1.1.1\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: profile'],[-1,'     * {String} The specific profile'],[-1,'     *\/'],[-1,'    profile: \&quot;WMSC\&quot;,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.WMSCapabilities.v1_1_1'],[-1,'     * Create a new parser for WMS-C capabilities version 1.1.1.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,''],[-1,'    \/**'],[-1,'     * Property: readers'],[-1,'     * Contains public functions, grouped by namespace prefix, that will'],[-1,'     *     be applied when a namespaced node is found matching the function'],[-1,'     *     name.  The function will be applied in the scope of this parser'],[-1,'     *     with two arguments: the node being read and a context object passed'],[-1,'     *     from the parent.'],[-1,'     *\/'],[-1,'    readers: {'],[-1,'        \&quot;wms\&quot;: OpenLayers.Util.applyDefaults({'],[-1,'            \&quot;VendorSpecificCapabilities\&quot;: function(node, obj) {'],[0,'                obj.vendorSpecific = {tileSets: []};'],[0,'                this.readChildNodes(node, obj.vendorSpecific);'],[-1,'            },'],[-1,'            \&quot;TileSet\&quot;: function(node, vendorSpecific) {'],[0,'                var tileset = {srs: {}, bbox: {}, resolutions: []};'],[0,'                this.readChildNodes(node, tileset);'],[0,'                vendorSpecific.tileSets.push(tileset);'],[-1,'            },'],[-1,'            \&quot;Resolutions\&quot;: function(node, tileset) {'],[0,'                var res = this.getChildValue(node).split(\&quot; \&quot;);'],[0,'                for (var i=0, len=res.length; i&lt;len; i++) {'],[0,'                    if (res[i] != \&quot;\&quot;) {'],[0,'                        tileset.resolutions.push(parseFloat(res[i]));'],[-1,'                    }'],[-1,'                }'],[-1,'            },'],[-1,'            \&quot;Width\&quot;: function(node, tileset) {'],[0,'                tileset.width = parseInt(this.getChildValue(node));'],[-1,'            },'],[-1,'            \&quot;Height\&quot;: function(node, tileset) {'],[0,'                tileset.height = parseInt(this.getChildValue(node));'],[-1,'            },'],[-1,'            \&quot;Layers\&quot;: function(node, tileset) {'],[0,'                tileset.layers = this.getChildValue(node);'],[-1,'            },'],[-1,'            \&quot;Styles\&quot;: function(node, tileset) {'],[0,'                tileset.styles = this.getChildValue(node);'],[-1,'            }'],[-1,'        }, OpenLayers.Format.WMSCapabilities.v1_1_1.prototype.readers[\&quot;wms\&quot;])'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.WMSCapabilities.v1_1_1_WMSC\&quot; '],[-1,''],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/LayerSwitcher.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Lang.js'],[-1,' * @requires OpenLayers\/Console.js'],[-1,' * @requires OpenLayers\/Util.js'],[-1,' * @requires OpenLayers\/Events\/buttonclick.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.LayerSwitcher'],[-1,' * The LayerSwitcher control displays a table of contents for the map. This'],[-1,' * allows the user interface to switch between BaseLasyers and to show or hide'],[-1,' * Overlays. By default the switcher is shown minimized on the right edge of'],[-1,' * the map, the user may expand it by clicking on the handle.'],[-1,' *'],[-1,' * To create the LayerSwitcher outside of the map, pass the Id of a html div'],[-1,' * as the first argument to the constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.LayerSwitcher ='],[-1,'  OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: roundedCorner'],[-1,'     * {Boolean} If true the Rico library is used for rounding the corners'],[-1,'     *     of the layer switcher div, defaults to false. *Deprecated*. Use'],[-1,'     *     CSS3\'s border-radius instead. If this option is set to true the'],[-1,'     *     Rico\/Corner.js script must be loaded in the page, and therefore'],[-1,'     *     listed in the build profile.'],[-1,'     *'],[-1,'     *\/'],[-1,'    roundedCorner: false,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: roundedCornerColor'],[-1,'     * {String} The color of the rounded corners, only applies if roundedCorner'],[-1,'     *     is true, defaults to \&quot;darkblue\&quot;.'],[-1,'     *\/'],[-1,'    roundedCornerColor: \&quot;darkblue\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layerStates'],[-1,'     * {Array(Object)} Basically a copy of the \&quot;state\&quot; of the map\'s layers'],[-1,'     *     the last time the control was drawn. We have this in order to avoid'],[-1,'     *     unnecessarily redrawing the control.'],[-1,'     *\/'],[-1,'    layerStates: null,'],[-1,''],[-1,'  \/\/ DOM Elements'],[-1,''],[-1,'    \/**'],[-1,'     * Property: layersDiv'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    layersDiv: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: baseLayersDiv'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    baseLayersDiv: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: baseLayers'],[-1,'     * {Array(Object)}'],[-1,'     *\/'],[-1,'    baseLayers: null,'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Property: dataLbl'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    dataLbl: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: dataLayersDiv'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    dataLayersDiv: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: dataLayers'],[-1,'     * {Array(Object)}'],[-1,'     *\/'],[-1,'    dataLayers: null,'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Property: minimizeDiv'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    minimizeDiv: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: maximizeDiv'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    maximizeDiv: null,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: ascending'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    ascending: true,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.LayerSwitcher'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object}'],[-1,'     *\/'],[-1,'    initialize: function(options) {'],[0,'        OpenLayers.Control.prototype.initialize.apply(this, arguments);'],[0,'        this.layerStates = [];'],[-1,''],[0,'        if(this.roundedCorner) {'],[0,'            OpenLayers.Console.warn(\'roundedCorner option is deprecated\');'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * APIMethod: destroy'],[-1,'     *\/'],[-1,'    destroy: function() {'],[-1,''],[-1,'        \/\/clear out layers info and unregister their events'],[0,'        this.clearLayersArray(\&quot;base\&quot;);'],[0,'        this.clearLayersArray(\&quot;data\&quot;);'],[-1,''],[0,'        this.map.events.un({'],[-1,'            buttonclick: this.onButtonClick,'],[-1,'            addlayer: this.redraw,'],[-1,'            changelayer: this.redraw,'],[-1,'            removelayer: this.redraw,'],[-1,'            changebaselayer: this.redraw,'],[-1,'            scope: this'],[-1,'        });'],[0,'        this.events.unregister(\&quot;buttonclick\&quot;, this, this.onButtonClick);'],[-1,''],[0,'        OpenLayers.Control.prototype.destroy.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setMap'],[-1,'     *'],[-1,'     * Properties:'],[-1,'     * map - {&lt;OpenLayers.Map&gt;}'],[-1,'     *\/'],[-1,'    setMap: function(map) {'],[0,'        OpenLayers.Control.prototype.setMap.apply(this, arguments);'],[-1,''],[0,'        this.map.events.on({'],[-1,'            addlayer: this.redraw,'],[-1,'            changelayer: this.redraw,'],[-1,'            removelayer: this.redraw,'],[-1,'            changebaselayer: this.redraw,'],[-1,'            scope: this'],[-1,'        });'],[0,'        if (this.outsideViewport) {'],[0,'            this.events.attachToElement(this.div);'],[0,'            this.events.register(\&quot;buttonclick\&quot;, this, this.onButtonClick);'],[-1,'        } else {'],[0,'            this.map.events.register(\&quot;buttonclick\&quot;, this, this.onButtonClick);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} A reference to the DIV DOMElement containing the'],[-1,'     *     switcher tabs.'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        OpenLayers.Control.prototype.draw.apply(this);'],[-1,''],[-1,'        \/\/ create layout divs'],[0,'        this.loadContents();'],[-1,''],[-1,'        \/\/ set mode to minimize'],[0,'        if(!this.outsideViewport) {'],[0,'            this.minimizeControl();'],[-1,'        }'],[-1,''],[-1,'        \/\/ populate div with current info'],[0,'        this.redraw();'],[-1,''],[0,'        return this.div;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: onButtonClick'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event}'],[-1,'     *\/'],[-1,'    onButtonClick: function(evt) {'],[0,'        var button = evt.buttonElement;'],[0,'        if (button === this.minimizeDiv) {'],[0,'            this.minimizeControl();'],[0,'        } else if (button === this.maximizeDiv) {'],[0,'            this.maximizeControl();'],[0,'        } else if (button._layerSwitcher === this.id) {'],[0,'            if (button[\&quot;for\&quot;]) {'],[0,'                button = document.getElementById(button[\&quot;for\&quot;]);'],[-1,'            }'],[0,'            if (!button.disabled) {'],[0,'                if (button.type == \&quot;radio\&quot;) {'],[0,'                    button.checked = true;'],[0,'                    this.map.setBaseLayer(this.map.getLayer(button._layer));'],[-1,'                } else {'],[0,'                    button.checked = !button.checked;'],[0,'                    this.updateMap();'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: clearLayersArray'],[-1,'     * User specifies either \&quot;base\&quot; or \&quot;data\&quot;. we then clear all the'],[-1,'     *     corresponding listeners, the div, and reinitialize a new array.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * layersType - {String}'],[-1,'     *\/'],[-1,'    clearLayersArray: function(layersType) {'],[0,'        this[layersType + \&quot;LayersDiv\&quot;].innerHTML = \&quot;\&quot;;'],[0,'        this[layersType + \&quot;Layers\&quot;] = [];'],[-1,'    },'],[-1,''],[-1,''],[-1,'    \/**'],[-1,'     * Method: checkRedraw'],[-1,'     * Checks if the layer state has changed since the last redraw() call.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean} The layer state changed since the last redraw() call.'],[-1,'     *\/'],[-1,'    checkRedraw: function() {'],[0,'        var redraw = false;'],[0,'        if ( !this.layerStates.length ||'],[-1,'             (this.map.layers.length != this.layerStates.length) ) {'],[0,'            redraw = true;'],[-1,'        } else {'],[0,'            for (var i=0, len=this.layerStates.length; i&lt;len; i++) {'],[0,'                var layerState = this.layerStates[i];'],[0,'                var layer = this.map.layers[i];'],[0,'                if ( (layerState.name != layer.name) ||'],[-1,'                     (layerState.inRange != layer.inRange) ||'],[-1,'                     (layerState.id != layer.id) ||'],[-1,'                     (layerState.visibility != layer.visibility) ) {'],[0,'                    redraw = true;'],[0,'                    break;'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return redraw;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: redraw'],[-1,'     * Goes through and takes the current state of the Map and rebuilds the'],[-1,'     *     control to display that state. Groups base layers into a'],[-1,'     *     radio-button group and lists each data layer with a checkbox.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} A reference to the DIV DOMElement containing the control'],[-1,'     *\/'],[-1,'    redraw: function() {'],[-1,'        \/\/if the state hasn\'t changed since last redraw, no need'],[-1,'        \/\/ to do anything. Just return the existing div.'],[0,'        if (!this.checkRedraw()) {'],[0,'            return this.div;'],[-1,'        }'],[-1,''],[-1,'        \/\/clear out previous layers'],[0,'        this.clearLayersArray(\&quot;base\&quot;);'],[0,'        this.clearLayersArray(\&quot;data\&quot;);'],[-1,''],[0,'        var containsOverlays = false;'],[0,'        var containsBaseLayers = false;'],[-1,''],[-1,'        \/\/ Save state -- for checking layer if the map state changed.'],[-1,'        \/\/ We save this before redrawing, because in the process of redrawing'],[-1,'        \/\/ we will trigger more visibility changes, and we want to not redraw'],[-1,'        \/\/ and enter an infinite loop.'],[0,'        var len = this.map.layers.length;'],[0,'        this.layerStates = new Array(len);'],[0,'        for (var i=0; i &lt;len; i++) {'],[0,'            var layer = this.map.layers[i];'],[0,'            this.layerStates[i] = {'],[-1,'                \'name\': layer.name,'],[-1,'                \'visibility\': layer.visibility,'],[-1,'                \'inRange\': layer.inRange,'],[-1,'                \'id\': layer.id'],[-1,'            };'],[-1,'        }'],[-1,''],[0,'        var layers = this.map.layers.slice();'],[0,'        if (!this.ascending) { layers.reverse(); }'],[0,'        for(var i=0, len=layers.length; i&lt;len; i++) {'],[0,'            var layer = layers[i];'],[0,'            var baseLayer = layer.isBaseLayer;'],[-1,''],[0,'            if (layer.displayInLayerSwitcher) {'],[-1,''],[0,'                if (baseLayer) {'],[0,'                    containsBaseLayers = true;'],[-1,'                } else {'],[0,'                    containsOverlays = true;'],[-1,'                }'],[-1,''],[-1,'                \/\/ only check a baselayer if it is *the* baselayer, check data'],[-1,'                \/\/  layers if they are visible'],[0,'                var checked = (baseLayer) ? (layer == this.map.baseLayer)'],[-1,'                                          : layer.getVisibility();'],[-1,''],[-1,'                \/\/ create input element'],[0,'                var inputElem = document.createElement(\&quot;input\&quot;),'],[-1,'                    \/\/ The input shall have an id attribute so we can use'],[-1,'                    \/\/ labels to interact with them.'],[-1,'                    inputId = OpenLayers.Util.createUniqueID('],[-1,'                        this.id + \&quot;_input_\&quot;'],[-1,'                    );'],[-1,''],[0,'                inputElem.id = inputId;'],[0,'                inputElem.name = (baseLayer) ? this.id + \&quot;_baseLayers\&quot; : layer.name;'],[0,'                inputElem.type = (baseLayer) ? \&quot;radio\&quot; : \&quot;checkbox\&quot;;'],[0,'                inputElem.value = layer.name;'],[0,'                inputElem.checked = checked;'],[0,'                inputElem.defaultChecked = checked;'],[0,'                inputElem.className = \&quot;olButton\&quot;;'],[0,'                inputElem._layer = layer.id;'],[0,'                inputElem._layerSwitcher = this.id;'],[-1,''],[0,'                if (!baseLayer &amp;&amp; !layer.inRange) {'],[0,'                    inputElem.disabled = true;'],[-1,'                }'],[-1,''],[-1,'                \/\/ create span'],[0,'                var labelSpan = document.createElement(\&quot;label\&quot;);'],[-1,'                \/\/ this isn\'t the DOM attribute \'for\', but an arbitrary name we'],[-1,'                \/\/ use to find the appropriate input element in &lt;onButtonClick&gt;'],[0,'                labelSpan[\&quot;for\&quot;] = inputElem.id;'],[0,'                OpenLayers.Element.addClass(labelSpan, \&quot;labelSpan olButton\&quot;);'],[0,'                labelSpan._layer = layer.id;'],[0,'                labelSpan._layerSwitcher = this.id;'],[0,'                if (!baseLayer &amp;&amp; !layer.inRange) {'],[0,'                    labelSpan.style.color = \&quot;gray\&quot;;'],[-1,'                }'],[0,'                labelSpan.innerHTML = layer.name;'],[0,'                labelSpan.style.verticalAlign = (baseLayer) ? \&quot;bottom\&quot;'],[-1,'                                                            : \&quot;baseline\&quot;;'],[-1,'                \/\/ create line break'],[0,'                var br = document.createElement(\&quot;br\&quot;);'],[-1,''],[-1,''],[0,'                var groupArray = (baseLayer) ? this.baseLayers'],[-1,'                                             : this.dataLayers;'],[0,'                groupArray.push({'],[-1,'                    \'layer\': layer,'],[-1,'                    \'inputElem\': inputElem,'],[-1,'                    \'labelSpan\': labelSpan'],[-1,'                });'],[-1,''],[-1,''],[0,'                var groupDiv = (baseLayer) ? this.baseLayersDiv'],[-1,'                                           : this.dataLayersDiv;'],[0,'                groupDiv.appendChild(inputElem);'],[0,'                groupDiv.appendChild(labelSpan);'],[0,'                groupDiv.appendChild(br);'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ if no overlays, dont display the overlay label'],[0,'        this.dataLbl.style.display = (containsOverlays) ? \&quot;\&quot; : \&quot;none\&quot;;'],[-1,''],[-1,'        \/\/ if no baselayers, dont display the baselayer label'],[0,'        this.baseLbl.style.display = (containsBaseLayers) ? \&quot;\&quot; : \&quot;none\&quot;;'],[-1,''],[0,'        return this.div;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: updateMap'],[-1,'     * Cycles through the loaded data and base layer input arrays and makes'],[-1,'     *     the necessary calls to the Map object such that that the map\'s'],[-1,'     *     visual state corresponds to what the user has selected in'],[-1,'     *     the control.'],[-1,'     *\/'],[-1,'    updateMap: function() {'],[-1,''],[-1,'        \/\/ set the newly selected base layer'],[0,'        for(var i=0, len=this.baseLayers.length; i&lt;len; i++) {'],[0,'            var layerEntry = this.baseLayers[i];'],[0,'            if (layerEntry.inputElem.checked) {'],[0,'                this.map.setBaseLayer(layerEntry.layer, false);'],[-1,'            }'],[-1,'        }'],[-1,''],[-1,'        \/\/ set the correct visibilities for the overlays'],[0,'        for(var i=0, len=this.dataLayers.length; i&lt;len; i++) {'],[0,'            var layerEntry = this.dataLayers[i];'],[0,'            layerEntry.layer.setVisibility(layerEntry.inputElem.checked);'],[-1,'        }'],[-1,''],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: maximizeControl'],[-1,'     * Set up the labels and divs for the control'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * e - {Event}'],[-1,'     *\/'],[-1,'    maximizeControl: function(e) {'],[-1,''],[-1,'        \/\/ set the div\'s width and height to empty values, so'],[-1,'        \/\/ the div dimensions can be controlled by CSS'],[0,'        this.div.style.width = \&quot;\&quot;;'],[0,'        this.div.style.height = \&quot;\&quot;;'],[-1,''],[0,'        this.showControls(false);'],[-1,''],[0,'        if (e != null) {'],[0,'            OpenLayers.Event.stop(e);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: minimizeControl'],[-1,'     * Hide all the contents of the control, shrink the size,'],[-1,'     *     add the maximize icon'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * e - {Event}'],[-1,'     *\/'],[-1,'    minimizeControl: function(e) {'],[-1,''],[-1,'        \/\/ to minimize the control we set its div\'s width'],[-1,'        \/\/ and height to 0px, we cannot just set \&quot;display\&quot;'],[-1,'        \/\/ to \&quot;none\&quot; because it would hide the maximize'],[-1,'        \/\/ div'],[0,'        this.div.style.width = \&quot;0px\&quot;;'],[0,'        this.div.style.height = \&quot;0px\&quot;;'],[-1,''],[0,'        this.showControls(true);'],[-1,''],[0,'        if (e != null) {'],[0,'            OpenLayers.Event.stop(e);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: showControls'],[-1,'     * Hide\/Show all LayerSwitcher controls depending on whether we are'],[-1,'     *     minimized or not'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * minimize - {Boolean}'],[-1,'     *\/'],[-1,'    showControls: function(minimize) {'],[-1,''],[0,'        this.maximizeDiv.style.display = minimize ? \&quot;\&quot; : \&quot;none\&quot;;'],[0,'        this.minimizeDiv.style.display = minimize ? \&quot;none\&quot; : \&quot;\&quot;;'],[-1,''],[0,'        this.layersDiv.style.display = minimize ? \&quot;none\&quot; : \&quot;\&quot;;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: loadContents'],[-1,'     * Set up the labels and divs for the control'],[-1,'     *\/'],[-1,'    loadContents: function() {'],[-1,''],[-1,'        \/\/ layers list div'],[0,'        this.layersDiv = document.createElement(\&quot;div\&quot;);'],[0,'        this.layersDiv.id = this.id + \&quot;_layersDiv\&quot;;'],[0,'        OpenLayers.Element.addClass(this.layersDiv, \&quot;layersDiv\&quot;);'],[-1,''],[0,'        this.baseLbl = document.createElement(\&quot;div\&quot;);'],[0,'        this.baseLbl.innerHTML = OpenLayers.i18n(\&quot;Base Layer\&quot;);'],[0,'        OpenLayers.Element.addClass(this.baseLbl, \&quot;baseLbl\&quot;);'],[-1,''],[0,'        this.baseLayersDiv = document.createElement(\&quot;div\&quot;);'],[0,'        OpenLayers.Element.addClass(this.baseLayersDiv, \&quot;baseLayersDiv\&quot;);'],[-1,''],[0,'        this.dataLbl = document.createElement(\&quot;div\&quot;);'],[0,'        this.dataLbl.innerHTML = OpenLayers.i18n(\&quot;Overlays\&quot;);'],[0,'        OpenLayers.Element.addClass(this.dataLbl, \&quot;dataLbl\&quot;);'],[-1,''],[0,'        this.dataLayersDiv = document.createElement(\&quot;div\&quot;);'],[0,'        OpenLayers.Element.addClass(this.dataLayersDiv, \&quot;dataLayersDiv\&quot;);'],[-1,''],[0,'        if (this.ascending) {'],[0,'            this.layersDiv.appendChild(this.baseLbl);'],[0,'            this.layersDiv.appendChild(this.baseLayersDiv);'],[0,'            this.layersDiv.appendChild(this.dataLbl);'],[0,'            this.layersDiv.appendChild(this.dataLayersDiv);'],[-1,'        } else {'],[0,'            this.layersDiv.appendChild(this.dataLbl);'],[0,'            this.layersDiv.appendChild(this.dataLayersDiv);'],[0,'            this.layersDiv.appendChild(this.baseLbl);'],[0,'            this.layersDiv.appendChild(this.baseLayersDiv);'],[-1,'        }'],[-1,''],[0,'        this.div.appendChild(this.layersDiv);'],[-1,''],[0,'        if(this.roundedCorner) {'],[0,'            OpenLayers.Rico.Corner.round(this.div, {'],[-1,'                corners: \&quot;tl bl\&quot;,'],[-1,'                bgColor: \&quot;transparent\&quot;,'],[-1,'                color: this.roundedCornerColor,'],[-1,'                blend: false'],[-1,'            });'],[0,'            OpenLayers.Rico.Corner.changeOpacity(this.layersDiv, 0.75);'],[-1,'        }'],[-1,''],[-1,'        \/\/ maximize button div'],[0,'        var img = OpenLayers.Util.getImageLocation(\'layer-switcher-maximize.png\');'],[0,'        this.maximizeDiv = OpenLayers.Util.createAlphaImageDiv('],[-1,'                                    \&quot;OpenLayers_Control_MaximizeDiv\&quot;,'],[-1,'                                    null,'],[-1,'                                    null,'],[-1,'                                    img,'],[-1,'                                    \&quot;absolute\&quot;);'],[0,'        OpenLayers.Element.addClass(this.maximizeDiv, \&quot;maximizeDiv olButton\&quot;);'],[0,'        this.maximizeDiv.style.display = \&quot;none\&quot;;'],[-1,''],[0,'        this.div.appendChild(this.maximizeDiv);'],[-1,''],[-1,'        \/\/ minimize button div'],[0,'        var img = OpenLayers.Util.getImageLocation(\'layer-switcher-minimize.png\');'],[0,'        this.minimizeDiv = OpenLayers.Util.createAlphaImageDiv('],[-1,'                                    \&quot;OpenLayers_Control_MinimizeDiv\&quot;,'],[-1,'                                    null,'],[-1,'                                    null,'],[-1,'                                    img,'],[-1,'                                    \&quot;absolute\&quot;);'],[0,'        OpenLayers.Element.addClass(this.minimizeDiv, \&quot;minimizeDiv olButton\&quot;);'],[0,'        this.minimizeDiv.style.display = \&quot;none\&quot;;'],[-1,''],[0,'        this.div.appendChild(this.minimizeDiv);'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.LayerSwitcher\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Tile\/Image\/IFrame.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Tile\/Image.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Constant: OpenLayers.Tile.Image.IFrame'],[-1,' * Mixin for tiles that use form-encoded POST requests to get images from'],[-1,' * remote services. Images will be loaded using HTTP-POST into an IFrame.'],[-1,' *'],[-1,' * This mixin will be applied to &lt;OpenLayers.Tile.Image&gt; instances'],[-1,' * configured with &lt;OpenLayers.Tile.Image.maxGetUrlLength&gt; set.'],[-1,' *\/'],[1,'OpenLayers.Tile.Image.IFrame = {'],[-1,''],[-1,'    \/**'],[-1,'     * Property: useIFrame'],[-1,'     * {Boolean} true if we are currently using an IFrame to render POST'],[-1,'     * responses, false if we are using an img element to render GET responses.'],[-1,'     *\/ '],[-1,'    useIFrame: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: blankImageUrl'],[-1,'     * {String} Using a data scheme url is not supported by all browsers, but'],[-1,'     * we don\'t care because we either set it as css backgroundImage, or the'],[-1,'     * image\'s display style is set to \&quot;none\&quot; when we use it.'],[-1,'     *\/'],[-1,'    blankImageUrl: \&quot;data:image\/gif;base64,R0lGODlhAQABAIAAAAAAAP\/\/\/yH5BAEAAAAALAAAAAABAAEAQAIBRAA7\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * Set useIFrame in the instance, and operate the image\/iframe switch.'],[-1,'     * Then call Tile.Image.draw.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {Boolean}'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        var draw = OpenLayers.Tile.Image.prototype.shouldDraw.call(this);'],[0,'        if(draw) {'],[-1,''],[-1,'            \/\/ this.url isn\'t set to the currect value yet, so we call getURL'],[-1,'            \/\/ on the layer and store the result in a local variable'],[0,'            var url = this.layer.getURL(this.bounds);'],[-1,''],[0,'            var usedIFrame = this.useIFrame;'],[0,'            this.useIFrame = this.maxGetUrlLength !== null &amp;&amp;'],[-1,'                             !this.layer.async &amp;&amp;'],[-1,'                             url.length &gt; this.maxGetUrlLength;'],[-1,''],[0,'            var fromIFrame = usedIFrame &amp;&amp; !this.useIFrame;'],[0,'            var toIFrame = !usedIFrame &amp;&amp; this.useIFrame;'],[-1,''],[0,'            if(fromIFrame || toIFrame) {'],[-1,''],[-1,'                \/\/ Switching between GET (image) and POST (iframe).'],[-1,''],[-1,'                \/\/ We remove the imgDiv (really either an image or an iframe)'],[-1,'                \/\/ from the frame and set it to null to make sure initImage'],[-1,'                \/\/ will call getImage.'],[-1,''],[0,'                if(this.imgDiv &amp;&amp; this.imgDiv.parentNode === this.frame) {'],[0,'                    this.frame.removeChild(this.imgDiv);'],[-1,'                }'],[0,'                this.imgDiv = null;'],[-1,''],[-1,'                \/\/ And if we had an iframe we also remove the event pane.'],[-1,''],[0,'                if(fromIFrame) {'],[0,'                    this.frame.removeChild(this.frame.firstChild);'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[0,'        return OpenLayers.Tile.Image.prototype.draw.apply(this, arguments);'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: getImage'],[-1,'     * Creates the content for the frame on the tile.'],[-1,'     *\/'],[-1,'    getImage: function() {'],[0,'        if (this.useIFrame === true) {'],[0,'            if (!this.frame.childNodes.length) {'],[0,'                var eventPane = document.createElement(\&quot;div\&quot;),'],[-1,'                    style = eventPane.style;'],[0,'                style.position = \&quot;absolute\&quot;;'],[0,'                style.width = \&quot;100%\&quot;;'],[0,'                style.height = \&quot;100%\&quot;;'],[0,'                style.zIndex = 1;'],[0,'                style.backgroundImage = \&quot;url(\&quot; + this.blankImageUrl + \&quot;)\&quot;;'],[0,'                this.frame.appendChild(eventPane);'],[-1,'            }'],[-1,''],[0,'            var id = this.id + \'_iFrame\', iframe;'],[0,'            if (parseFloat(navigator.appVersion.split(\&quot;MSIE\&quot;)[1]) &lt; 9) {'],[-1,'                \/\/ Older IE versions do not set the name attribute of an iFrame '],[-1,'                \/\/ properly via DOM manipulation, so we need to do it on our own with'],[-1,'                \/\/ this hack.'],[0,'                iframe = document.createElement(\'&lt;iframe name=\&quot;\'+id+\'\&quot;&gt;\');'],[-1,''],[-1,'                \/\/ IFrames in older IE versions are not transparent, if you set'],[-1,'                \/\/ the backgroundColor transparent. This is a workaround to get '],[-1,'                \/\/ transparent iframes.'],[0,'                iframe.style.backgroundColor = \'#FFFFFF\';'],[0,'                iframe.style.filter          = \'chroma(color=#FFFFFF)\';'],[-1,'            }'],[-1,'            else {'],[0,'                iframe = document.createElement(\'iframe\');'],[0,'                iframe.style.backgroundColor = \'transparent\';'],[-1,''],[-1,'                \/\/ iframe.name needs to be an unique id, otherwise it '],[-1,'                \/\/ could happen that other iframes are overwritten.'],[0,'                iframe.name = id;'],[-1,'            }'],[-1,''],[-1,'            \/\/ some special properties to avoid scaling the images and scrollbars '],[-1,'            \/\/ in the iframe'],[0,'            iframe.scrolling      = \'no\';'],[0,'            iframe.marginWidth    = \'0px\';'],[0,'            iframe.marginHeight   = \'0px\';'],[0,'            iframe.frameBorder    = \'0\';'],[-1,''],[0,'            iframe.style.position = \&quot;absolute\&quot;;'],[0,'            iframe.style.width    = \&quot;100%\&quot;;'],[0,'            iframe.style.height   = \&quot;100%\&quot;;'],[-1,''],[0,'            if (this.layer.opacity &lt; 1) {'],[0,'                OpenLayers.Util.modifyDOMElement(iframe, null, null, null,'],[-1,'                    null, null, null, this.layer.opacity);'],[-1,'            }'],[0,'            this.frame.appendChild(iframe);'],[0,'            this.imgDiv = iframe;'],[0,'            return iframe;'],[-1,'        } else {'],[0,'            return OpenLayers.Tile.Image.prototype.getImage.apply(this, arguments);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: createRequestForm'],[-1,'     * Create the html &lt;form&gt; element with width, height, bbox and all '],[-1,'     * parameters specified in the layer params.'],[-1,'     *'],[-1,'     * Returns: '],[-1,'     * {DOMElement} The form element which sends the HTTP-POST request to the'],[-1,'     *              WMS. '],[-1,'     *\/'],[-1,'    createRequestForm: function() {'],[-1,'        \/\/ creation of the form element'],[0,'        var form = document.createElement(\'form\');'],[0,'        form.method = \'POST\';'],[0,'        var cacheId = this.layer.params[\&quot;_OLSALT\&quot;];'],[0,'        cacheId = (cacheId ? cacheId + \&quot;_\&quot; : \&quot;\&quot;) + this.bounds.toBBOX();'],[0,'        form.action = OpenLayers.Util.urlAppend(this.layer.url, cacheId);'],[0,'        form.target = this.id + \'_iFrame\';'],[-1,''],[-1,'        \/\/ adding all parameters in layer params as hidden fields to the html'],[-1,'        \/\/ form element'],[0,'        var imageSize = this.layer.getImageSize(),'],[-1,'            params = OpenLayers.Util.getParameters(this.url),'],[-1,'            field;'],[-1,'            '],[0,'        for(var par in params) {'],[0,'            field = document.createElement(\'input\');'],[0,'            field.type  = \'hidden\';'],[0,'            field.name  = par;'],[0,'            field.value = params[par];'],[0,'            form.appendChild(field);'],[-1,'        }   '],[-1,''],[0,'        return form;'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: setImgSrc'],[-1,'     * Sets the source for the tile image'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * url - {String}'],[-1,'     *\/'],[-1,'    setImgSrc: function(url) {'],[0,'        if (this.useIFrame === true) {'],[0,'            if (url) {'],[0,'                var form = this.createRequestForm();'],[0,'                this.frame.appendChild(form);'],[0,'                form.submit();'],[0,'                this.frame.removeChild(form);'],[0,'            } else if (this.imgDiv.parentNode === this.frame) {'],[-1,'                \/\/ we don\'t reuse iframes to avoid caching issues'],[0,'                this.frame.removeChild(this.imgDiv);'],[0,'                this.imgDiv = null;'],[-1,'            }'],[-1,'        } else {'],[0,'            OpenLayers.Tile.Image.prototype.setImgSrc.apply(this, arguments);'],[-1,'        }'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: onImageLoad'],[-1,'     * Handler for the image onload event'],[-1,'     *\/'],[-1,'    onImageLoad: function() {'],[-1,'        \/\/TODO de-uglify opacity handling'],[0,'        OpenLayers.Tile.Image.prototype.onImageLoad.apply(this, arguments);'],[0,'        if (this.useIFrame === true) {'],[0,'            this.imgDiv.style.opacity = 1;'],[0,'            this.frame.style.opacity = this.layer.opacity;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    \/**'],[-1,'     * Method: createBackBuffer'],[-1,'     * Override createBackBuffer to do nothing when we use an iframe. Moving an'],[-1,'     * iframe from one element to another makes it necessary to reload the iframe'],[-1,'     * because its content is lost. So we just give up.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement}'],[-1,'     *\/'],[-1,'    createBackBuffer: function() {'],[0,'        var backBuffer;'],[0,'        if(this.useIFrame === false) {'],[0,'            backBuffer = OpenLayers.Tile.Image.prototype.createBackBuffer.call(this);'],[-1,'        }'],[0,'        return backBuffer;'],[-1,'    }'],[-1,'};'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Format\/Atom.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Format\/XML.js'],[-1,' * @requires OpenLayers\/Format\/GML\/v3.js'],[-1,' * @requires OpenLayers\/Feature\/Vector.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Format.Atom'],[-1,' * Read\/write Atom feeds. Create a new instance with the'],[-1,' *     &lt;OpenLayers.Format.AtomFeed&gt; constructor.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Format.XML&gt;'],[-1,' *\/'],[1,'OpenLayers.Format.Atom = OpenLayers.Class(OpenLayers.Format.XML, {'],[-1,'    '],[-1,'    \/**'],[-1,'     * Property: namespaces'],[-1,'     * {Object} Mapping of namespace aliases to namespace URIs.  Properties'],[-1,'     *     of this object should not be set individually.  Read-only.  All'],[-1,'     *     XML subclasses should have their own namespaces object.  Use'],[-1,'     *     &lt;setNamespace&gt; to add or set a namespace alias after construction.'],[-1,'     *\/'],[-1,'    namespaces: {'],[-1,'        atom: \&quot;http:\/\/www.w3.org\/2005\/Atom\&quot;,'],[-1,'        georss: \&quot;http:\/\/www.georss.org\/georss\&quot;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: feedTitle'],[-1,'     * {String} Atom feed elements require a title.  Default is \&quot;untitled\&quot;.'],[-1,'     *\/'],[-1,'    feedTitle: \&quot;untitled\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: defaultEntryTitle'],[-1,'     * {String} Atom entry elements require a title.  In cases where one is'],[-1,'     *     not provided in the feature attributes, this will be used.  Default'],[-1,'     *     is \&quot;untitled\&quot;.'],[-1,'     *\/'],[-1,'    defaultEntryTitle: \&quot;untitled\&quot;,'],[-1,''],[-1,'    \/**'],[-1,'     * Property: gmlParse'],[-1,'     * {Object} GML Format object for parsing features'],[-1,'     * Non-API and only created if necessary'],[-1,'     *\/'],[-1,'    gmlParser: null,'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIProperty: xy'],[-1,'     * {Boolean} Order of the GML coordinate: true:(x,y) or false:(y,x)'],[-1,'     * For GeoRSS the default is (y,x), therefore: false'],[-1,'     *\/'],[-1,'    xy: false,'],[-1,'    '],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Format.AtomEntry'],[-1,'     * Create a new parser for Atom.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * options - {Object} An optional object whose properties will be set on'],[-1,'     *     this instance.'],[-1,'     *\/'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: read'],[-1,'     * Return a list of features from an Atom feed or entry document.'],[-1,'     '],[-1,'     * Parameters:'],[-1,'     * doc - {Element} or {String}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * Array({&lt;OpenLayers.Feature.Vector&gt;})'],[-1,'     *\/'],[-1,'    read: function(doc) {'],[0,'        if (typeof doc == \&quot;string\&quot;) {'],[0,'            doc = OpenLayers.Format.XML.prototype.read.apply(this, [doc]);'],[-1,'        }'],[0,'        return this.parseFeatures(doc);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * APIMethod: write'],[-1,'     * Serialize or more feature nodes to Atom documents.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * features - {&lt;OpenLayers.Feature.Vector&gt;} or Array({&lt;OpenLayers.Feature.Vector&gt;})'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} an Atom entry document if passed one feature node, or a feed'],[-1,'     * document if passed an array of feature nodes.'],[-1,'     *\/'],[-1,'    write: function(features) {'],[0,'        var doc;'],[0,'        if (OpenLayers.Util.isArray(features)) {'],[0,'            doc = this.createElementNSPlus(\&quot;atom:feed\&quot;);'],[0,'            doc.appendChild('],[-1,'                this.createElementNSPlus(\&quot;atom:title\&quot;, {'],[-1,'                    value: this.feedTitle'],[-1,'                })'],[-1,'            );'],[0,'            for (var i=0, ii=features.length; i&lt;ii; i++) {'],[0,'                doc.appendChild(this.buildEntryNode(features[i]));'],[-1,'            }'],[-1,'        }'],[-1,'        else {'],[0,'            doc = this.buildEntryNode(features);'],[-1,'        }'],[0,'        return OpenLayers.Format.XML.prototype.write.apply(this, [doc]);'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: buildContentNode'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * content - {Object}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} an Atom content node.'],[-1,'     *'],[-1,'     * TODO: types other than text.'],[-1,'     *\/'],[-1,'    buildContentNode: function(content) {'],[0,'        var node = this.createElementNSPlus(\&quot;atom:content\&quot;, {'],[-1,'            attributes: {'],[-1,'                type: content.type || null'],[-1,'            }'],[-1,'        });'],[0,'        if (content.src) {'],[0,'            node.setAttribute(\&quot;src\&quot;, content.src);'],[-1,'        } else {'],[0,'            if (content.type == \&quot;text\&quot; || content.type == null) {'],[0,'                node.appendChild('],[-1,'                    this.createTextNode(content.value)'],[-1,'                );'],[0,'            } else if (content.type == \&quot;html\&quot;) {'],[0,'                if (typeof content.value != \&quot;string\&quot;) {'],[0,'                    throw \&quot;HTML content must be in form of an escaped string\&quot;;'],[-1,'                }'],[0,'                node.appendChild('],[-1,'                    this.createTextNode(content.value)'],[-1,'                );'],[0,'            } else if (content.type == \&quot;xhtml\&quot;) {'],[0,'                node.appendChild(content.value);'],[0,'            } else if (content.type == \&quot;xhtml\&quot; ||'],[-1,'                           content.type.match(\/(\\+|\\\/)xml$\/)) {'],[0,'                node.appendChild(content.value);'],[-1,'            }'],[-1,'            else { \/\/ MUST be a valid Base64 encoding'],[0,'                node.appendChild('],[-1,'                    this.createTextNode(content.value)'],[-1,'                );'],[-1,'            }'],[-1,'        }'],[0,'        return node;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: buildEntryNode'],[-1,'     * Build an Atom entry node from a feature object.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * feature - {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} an Atom entry node.'],[-1,'     *'],[-1,'     * These entries are geared for publication using AtomPub.'],[-1,'     *'],[-1,'     * TODO: support extension elements'],[-1,'     *\/'],[-1,'    buildEntryNode: function(feature) {'],[0,'        var attrib = feature.attributes;'],[0,'        var atomAttrib = attrib.atom || {};'],[0,'        var entryNode = this.createElementNSPlus(\&quot;atom:entry\&quot;);'],[-1,'        '],[-1,'        \/\/ atom:author'],[0,'        if (atomAttrib.authors) {'],[0,'            var authors = OpenLayers.Util.isArray(atomAttrib.authors) ?'],[-1,'                atomAttrib.authors : [atomAttrib.authors];'],[0,'            for (var i=0, ii=authors.length; i&lt;ii; i++) {'],[0,'                entryNode.appendChild('],[-1,'                    this.buildPersonConstructNode('],[-1,'                        \&quot;author\&quot;, authors[i]'],[-1,'                    )'],[-1,'                );'],[-1,'            }'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atom:category'],[0,'        if (atomAttrib.categories) {'],[0,'            var categories = OpenLayers.Util.isArray(atomAttrib.categories) ?'],[-1,'                atomAttrib.categories : [atomAttrib.categories];'],[0,'            var category;'],[0,'            for (var i=0, ii=categories.length; i&lt;ii; i++) {'],[0,'                category = categories[i];'],[0,'                entryNode.appendChild('],[-1,'                    this.createElementNSPlus(\&quot;atom:category\&quot;, {'],[-1,'                        attributes: {'],[-1,'                            term: category.term,'],[-1,'                            scheme: category.scheme || null,'],[-1,'                            label: category.label || null'],[-1,'                        }'],[-1,'                    })'],[-1,'                );'],[-1,'            }'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atom:content'],[0,'        if (atomAttrib.content) {'],[0,'            entryNode.appendChild(this.buildContentNode(atomAttrib.content));'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atom:contributor'],[0,'        if (atomAttrib.contributors) {'],[0,'            var contributors = OpenLayers.Util.isArray(atomAttrib.contributors) ?'],[-1,'                atomAttrib.contributors : [atomAttrib.contributors];'],[0,'            for (var i=0, ii=contributors.length; i&lt;ii; i++) {'],[0,'                entryNode.appendChild('],[-1,'                    this.buildPersonConstructNode('],[-1,'                        \&quot;contributor\&quot;,'],[-1,'                        contributors[i]'],[-1,'                        )'],[-1,'                    );'],[-1,'            }'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atom:id'],[0,'        if (feature.fid) {'],[0,'            entryNode.appendChild('],[-1,'                this.createElementNSPlus(\&quot;atom:id\&quot;, {'],[-1,'                    value: feature.fid'],[-1,'                })'],[-1,'            );'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atom:link'],[0,'        if (atomAttrib.links) {'],[0,'            var links = OpenLayers.Util.isArray(atomAttrib.links) ?'],[-1,'                atomAttrib.links : [atomAttrib.links];'],[0,'            var link;'],[0,'            for (var i=0, ii=links.length; i&lt;ii; i++) {'],[0,'                link = links[i];'],[0,'                entryNode.appendChild('],[-1,'                    this.createElementNSPlus(\&quot;atom:link\&quot;, {'],[-1,'                        attributes: {'],[-1,'                            href: link.href,'],[-1,'                            rel: link.rel || null,'],[-1,'                            type: link.type || null,'],[-1,'                            hreflang: link.hreflang || null,'],[-1,'                            title: link.title || null,'],[-1,'                            length: link.length || null'],[-1,'                        }'],[-1,'                    })'],[-1,'                );'],[-1,'            }'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atom:published'],[0,'        if (atomAttrib.published) {'],[0,'            entryNode.appendChild('],[-1,'                this.createElementNSPlus(\&quot;atom:published\&quot;, {'],[-1,'                    value: atomAttrib.published'],[-1,'                })'],[-1,'            );'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atom:rights'],[0,'        if (atomAttrib.rights) {'],[0,'            entryNode.appendChild('],[-1,'                this.createElementNSPlus(\&quot;atom:rights\&quot;, {'],[-1,'                    value: atomAttrib.rights'],[-1,'                })'],[-1,'            );'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atom:source not implemented'],[-1,'        '],[-1,'        \/\/ atom:summary'],[0,'        if (atomAttrib.summary || attrib.description) {'],[0,'            entryNode.appendChild('],[-1,'                this.createElementNSPlus(\&quot;atom:summary\&quot;, {'],[-1,'                    value: atomAttrib.summary || attrib.description'],[-1,'                })'],[-1,'            );'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atom:title'],[0,'        entryNode.appendChild('],[-1,'            this.createElementNSPlus(\&quot;atom:title\&quot;, {'],[-1,'                value: atomAttrib.title || attrib.title || this.defaultEntryTitle'],[-1,'            })'],[-1,'        );'],[-1,'        '],[-1,'        \/\/ atom:updated'],[0,'        if (atomAttrib.updated) {'],[0,'            entryNode.appendChild('],[-1,'                this.createElementNSPlus(\&quot;atom:updated\&quot;, {'],[-1,'                    value: atomAttrib.updated'],[-1,'                })'],[-1,'            );'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ georss:where'],[0,'        if (feature.geometry) {'],[0,'            var whereNode = this.createElementNSPlus(\&quot;georss:where\&quot;);'],[0,'            whereNode.appendChild('],[-1,'                this.buildGeometryNode(feature.geometry)'],[-1,'            );'],[0,'            entryNode.appendChild(whereNode);'],[-1,'        }'],[-1,'        '],[0,'        return entryNode;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: initGmlParser'],[-1,'     * Creates a GML parser.'],[-1,'     *\/'],[-1,'    initGmlParser: function() {'],[0,'        this.gmlParser = new OpenLayers.Format.GML.v3({'],[-1,'            xy: this.xy,'],[-1,'            featureNS: \&quot;http:\/\/example.com#feature\&quot;,'],[-1,'            internalProjection: this.internalProjection,'],[-1,'            externalProjection: this.externalProjection'],[-1,'        });'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: buildGeometryNode'],[-1,'     * builds a GeoRSS node with a given geometry'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * geometry - {&lt;OpenLayers.Geometry&gt;}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} A gml node.'],[-1,'     *\/'],[-1,'    buildGeometryNode: function(geometry) {'],[0,'        if (!this.gmlParser) {'],[0,'            this.initGmlParser();'],[-1,'        }'],[0,'        var node = this.gmlParser.writeNode(\&quot;feature:_geometry\&quot;, geometry);'],[0,'        return node.firstChild;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: buildPersonConstructNode'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * name - {String}'],[-1,'     * value - {Object}'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {DOMElement} an Atom person construct node.'],[-1,'     *'],[-1,'     * Example:'],[-1,'     * &gt;&gt;&gt; buildPersonConstructNode(\&quot;author\&quot;, {name: \&quot;John Smith\&quot;})'],[-1,'     * {&lt;author&gt;&lt;name&gt;John Smith&lt;\/name&gt;&lt;\/author&gt;}'],[-1,'     *'],[-1,'     * TODO: how to specify extension elements? Add to the oNames array?'],[-1,'     *\/'],[-1,'    buildPersonConstructNode: function(name, value) {'],[0,'        var oNames = [\&quot;uri\&quot;, \&quot;email\&quot;];'],[0,'        var personNode = this.createElementNSPlus(\&quot;atom:\&quot; + name);'],[0,'        personNode.appendChild('],[-1,'            this.createElementNSPlus(\&quot;atom:name\&quot;, {'],[-1,'                value: value.name'],[-1,'            })'],[-1,'        );'],[0,'        for (var i=0, ii=oNames.length; i&lt;ii; i++) {'],[0,'            if (value[oNames[i]]) {'],[0,'                personNode.appendChild('],[-1,'                    this.createElementNSPlus(\&quot;atom:\&quot; + oNames[i], {'],[-1,'                        value: value[oNames[i]]'],[-1,'                    })'],[-1,'                );'],[-1,'            }'],[-1,'        }'],[0,'        return personNode;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: getFirstChildValue'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement}'],[-1,'     * nsuri - {String} Child node namespace uri (\&quot;*\&quot; for any).'],[-1,'     * name - {String} Child node name.'],[-1,'     * def - {String} Optional string default to return if no child found.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {String} The value of the first child with the given tag name.  Returns'],[-1,'     *     default value or empty string if none found.'],[-1,'     *\/'],[-1,'    getFirstChildValue: function(node, nsuri, name, def) {'],[0,'        var value;'],[0,'        var nodes = this.getElementsByTagNameNS(node, nsuri, name);'],[0,'        if (nodes &amp;&amp; nodes.length &gt; 0) {'],[0,'            value = this.getChildValue(nodes[0], def);'],[-1,'        } else {'],[0,'            value = def;'],[-1,'        }'],[0,'        return value;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseFeature'],[-1,'     * Parse feature from an Atom entry node..'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} An Atom entry or feed node.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * {&lt;OpenLayers.Feature.Vector&gt;}'],[-1,'     *\/'],[-1,'    parseFeature: function(node) {'],[0,'        var atomAttrib = {};'],[0,'        var value = null;'],[0,'        var nodes = null;'],[0,'        var attval = null;'],[0,'        var atomns = this.namespaces.atom;'],[-1,'        '],[-1,'        \/\/ atomAuthor*'],[0,'        this.parsePersonConstructs(node, \&quot;author\&quot;, atomAttrib);'],[-1,'        '],[-1,'        \/\/ atomCategory*'],[0,'        nodes = this.getElementsByTagNameNS(node, atomns, \&quot;category\&quot;);'],[0,'        if (nodes.length &gt; 0) {'],[0,'            atomAttrib.categories = [];'],[-1,'        }'],[0,'        for (var i=0, ii=nodes.length; i&lt;ii; i++) {'],[0,'            value = {};'],[0,'            value.term = nodes[i].getAttribute(\&quot;term\&quot;);'],[0,'            attval = nodes[i].getAttribute(\&quot;scheme\&quot;);'],[0,'            if (attval) { value.scheme = attval; }'],[0,'            attval = nodes[i].getAttribute(\&quot;label\&quot;);'],[0,'            if (attval) { value.label = attval; }'],[0,'            atomAttrib.categories.push(value);'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atomContent?'],[0,'        nodes = this.getElementsByTagNameNS(node, atomns, \&quot;content\&quot;);'],[0,'        if (nodes.length &gt; 0) {'],[0,'            value = {};'],[0,'            attval = nodes[0].getAttribute(\&quot;type\&quot;);'],[0,'            if (attval) {'],[0,'                value.type = attval;'],[-1,'            }'],[0,'            attval = nodes[0].getAttribute(\&quot;src\&quot;);'],[0,'            if (attval) {'],[0,'                value.src = attval;'],[-1,'            } else {'],[0,'                if (value.type == \&quot;text\&quot; || '],[-1,'                    value.type == \&quot;html\&quot; || '],[-1,'                    value.type == null ) {'],[0,'                    value.value = this.getFirstChildValue('],[-1,'                                        node,'],[-1,'                                        atomns,'],[-1,'                                        \&quot;content\&quot;,'],[-1,'                                        null'],[-1,'                                        );'],[0,'                } else if (value.type == \&quot;xhtml\&quot; ||'],[-1,'                           value.type.match(\/(\\+|\\\/)xml$\/)) {'],[0,'                    value.value = this.getChildEl(nodes[0]);'],[-1,'                } else { \/\/ MUST be base64 encoded'],[0,'                    value.value = this.getFirstChildValue('],[-1,'                                        node,'],[-1,'                                        atomns,'],[-1,'                                        \&quot;content\&quot;,'],[-1,'                                        null'],[-1,'                                        );'],[-1,'                }'],[0,'                atomAttrib.content = value;'],[-1,'            }'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atomContributor*'],[0,'        this.parsePersonConstructs(node, \&quot;contributor\&quot;, atomAttrib);'],[-1,'        '],[-1,'        \/\/ atomId'],[0,'        atomAttrib.id = this.getFirstChildValue(node, atomns, \&quot;id\&quot;, null);'],[-1,'        '],[-1,'        \/\/ atomLink*'],[0,'        nodes = this.getElementsByTagNameNS(node, atomns, \&quot;link\&quot;);'],[0,'        if (nodes.length &gt; 0) {'],[0,'            atomAttrib.links = new Array(nodes.length);'],[-1,'        }'],[0,'        var oAtts = [\&quot;rel\&quot;, \&quot;type\&quot;, \&quot;hreflang\&quot;, \&quot;title\&quot;, \&quot;length\&quot;];'],[0,'        for (var i=0, ii=nodes.length; i&lt;ii; i++) {'],[0,'            value = {};'],[0,'            value.href = nodes[i].getAttribute(\&quot;href\&quot;);'],[0,'            for (var j=0, jj=oAtts.length; j&lt;jj; j++) {'],[0,'                attval = nodes[i].getAttribute(oAtts[j]);'],[0,'                if (attval) {'],[0,'                    value[oAtts[j]] = attval;'],[-1,'                }'],[-1,'            }'],[0,'            atomAttrib.links[i] = value;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atomPublished?'],[0,'        value = this.getFirstChildValue(node, atomns, \&quot;published\&quot;, null);'],[0,'        if (value) {'],[0,'            atomAttrib.published = value;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atomRights?'],[0,'        value = this.getFirstChildValue(node, atomns, \&quot;rights\&quot;, null);'],[0,'        if (value) {'],[0,'            atomAttrib.rights = value;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atomSource? -- not implemented'],[-1,'        '],[-1,'        \/\/ atomSummary?'],[0,'        value = this.getFirstChildValue(node, atomns, \&quot;summary\&quot;, null);'],[0,'        if (value) {'],[0,'            atomAttrib.summary = value;'],[-1,'        }'],[-1,'        '],[-1,'        \/\/ atomTitle'],[0,'        atomAttrib.title = this.getFirstChildValue('],[-1,'                                node, atomns, \&quot;title\&quot;, null'],[-1,'                                );'],[-1,'        '],[-1,'        \/\/ atomUpdated'],[0,'        atomAttrib.updated = this.getFirstChildValue('],[-1,'                                node, atomns, \&quot;updated\&quot;, null'],[-1,'                                );'],[-1,'        '],[0,'        var featureAttrib = {'],[-1,'            title: atomAttrib.title,'],[-1,'            description: atomAttrib.summary,'],[-1,'            atom: atomAttrib'],[-1,'        };'],[0,'        var geometry = this.parseLocations(node)[0];'],[0,'        var feature = new OpenLayers.Feature.Vector(geometry, featureAttrib);'],[0,'        feature.fid = atomAttrib.id;'],[0,'        return feature;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseFeatures'],[-1,'     * Return features from an Atom entry or feed.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} An Atom entry or feed node.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * Array({&lt;OpenLayers.Feature.Vector&gt;})'],[-1,'     *\/'],[-1,'    parseFeatures: function(node) {'],[0,'        var features = [];'],[0,'        var entries = this.getElementsByTagNameNS('],[-1,'            node, this.namespaces.atom, \&quot;entry\&quot;'],[-1,'        );'],[0,'        if (entries.length == 0) {'],[0,'            entries = [node];'],[-1,'        }'],[0,'        for (var i=0, ii=entries.length; i&lt;ii; i++) {'],[0,'            features.push(this.parseFeature(entries[i]));'],[-1,'        }'],[0,'        return features;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parseLocations'],[-1,'     * Parse the locations from an Atom entry or feed.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} An Atom entry or feed node.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * Array({&lt;OpenLayers.Geometry&gt;})'],[-1,'     *\/'],[-1,'    parseLocations: function(node) {'],[0,'        var georssns = this.namespaces.georss;'],[-1,''],[0,'        var locations = {components: []};'],[0,'        var where = this.getElementsByTagNameNS(node, georssns, \&quot;where\&quot;);'],[0,'        if (where &amp;&amp; where.length &gt; 0) {'],[0,'            if (!this.gmlParser) {'],[0,'                this.initGmlParser();'],[-1,'            }'],[0,'            for (var i=0, ii=where.length; i&lt;ii; i++) {'],[0,'                this.gmlParser.readChildNodes(where[i], locations);'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        var components = locations.components;'],[0,'        var point = this.getElementsByTagNameNS(node, georssns, \&quot;point\&quot;);'],[0,'        if (point &amp;&amp; point.length &gt; 0) {'],[0,'            for (var i=0, ii=point.length; i&lt;ii; i++) {'],[0,'                var xy = OpenLayers.String.trim('],[-1,'                            point[i].firstChild.nodeValue'],[-1,'                            ).split(\/\\s+\/);'],[0,'                if (xy.length !=2) {'],[0,'                    xy = OpenLayers.String.trim('],[-1,'                                point[i].firstChild.nodeValue'],[-1,'                                ).split(\/\\s*,\\s*\/);'],[-1,'                }'],[0,'                components.push(new OpenLayers.Geometry.Point(xy[1], xy[0]));'],[-1,'            }'],[-1,'        }'],[-1,''],[0,'        var line = this.getElementsByTagNameNS(node, georssns, \&quot;line\&quot;);'],[0,'        if (line &amp;&amp; line.length &gt; 0) {'],[0,'            var coords;'],[0,'            var p;'],[0,'            var points;'],[0,'            for (var i=0, ii=line.length; i&lt;ii; i++) {'],[0,'                coords = OpenLayers.String.trim('],[-1,'                                line[i].firstChild.nodeValue'],[-1,'                                ).split(\/\\s+\/);'],[0,'                points = [];'],[0,'                for (var j=0, jj=coords.length; j&lt;jj; j+=2) {'],[0,'                    p = new OpenLayers.Geometry.Point(coords[j+1], coords[j]);'],[0,'                    points.push(p);'],[-1,'                }'],[0,'                components.push('],[-1,'                    new OpenLayers.Geometry.LineString(points)'],[-1,'                );'],[-1,'            }'],[-1,'        }        '],[-1,''],[0,'        var polygon = this.getElementsByTagNameNS(node, georssns, \&quot;polygon\&quot;);'],[0,'        if (polygon &amp;&amp; polygon.length &gt; 0) {'],[0,'            var coords;'],[0,'            var p;'],[0,'            var points;'],[0,'            for (var i=0, ii=polygon.length; i&lt;ii; i++) {'],[0,'                coords = OpenLayers.String.trim('],[-1,'                            polygon[i].firstChild.nodeValue'],[-1,'                            ).split(\/\\s+\/);'],[0,'                points = [];'],[0,'                for (var j=0, jj=coords.length; j&lt;jj; j+=2) {'],[0,'                    p = new OpenLayers.Geometry.Point(coords[j+1], coords[j]);'],[0,'                    points.push(p);'],[-1,'                }'],[0,'                components.push('],[-1,'                    new OpenLayers.Geometry.Polygon('],[-1,'                        [new OpenLayers.Geometry.LinearRing(points)]'],[-1,'                    )'],[-1,'                );'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        if (this.internalProjection &amp;&amp; this.externalProjection) {'],[0,'            for (var i=0, ii=components.length; i&lt;ii; i++) {'],[0,'                if (components[i]) {'],[0,'                    components[i].transform('],[-1,'                        this.externalProjection,'],[-1,'                        this.internalProjection'],[-1,'                    );'],[-1,'                }'],[-1,'            }'],[-1,'        }'],[-1,'        '],[0,'        return components;'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: parsePersonConstruct'],[-1,'     * Parse Atom person constructs from an Atom entry node.'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * node - {DOMElement} An Atom entry or feed node.'],[-1,'     * name - {String} Construcy name (\&quot;author\&quot; or \&quot;contributor\&quot;)'],[-1,'     * data = {Object} Object in which to put parsed persons.'],[-1,'     *'],[-1,'     * Returns:'],[-1,'     * An {Object}.'],[-1,'     *\/'],[-1,'    parsePersonConstructs: function(node, name, data) {'],[0,'        var persons = [];'],[0,'        var atomns = this.namespaces.atom;'],[0,'        var nodes = this.getElementsByTagNameNS(node, atomns, name);'],[0,'        var oAtts = [\&quot;uri\&quot;, \&quot;email\&quot;];'],[0,'        for (var i=0, ii=nodes.length; i&lt;ii; i++) {'],[0,'            var value = {};'],[0,'            value.name = this.getFirstChildValue('],[-1,'                            nodes[i],'],[-1,'                            atomns,'],[-1,'                            \&quot;name\&quot;,'],[-1,'                            null'],[-1,'                            );'],[0,'            for (var j=0, jj=oAtts.length; j&lt;jj; j++) {'],[0,'                var attval = this.getFirstChildValue('],[-1,'                            nodes[i],'],[-1,'                            atomns,'],[-1,'                            oAtts[j],'],[-1,'                            null);'],[0,'                if (attval) {'],[0,'                    value[oAtts[j]] = attval;'],[-1,'                }'],[-1,'            }'],[0,'            persons.push(value);'],[-1,'        }'],[0,'        if (persons.length &gt; 0) {'],[0,'            data[name + \&quot;s\&quot;] = persons;'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Format.Atom\&quot;'],[-1,'});'],[-1,'\/* ======================================================================'],[-1,'    OpenLayers\/Control\/KeyboardDefaults.js'],[-1,'   ====================================================================== *\/'],[-1,''],[-1,'\/* Copyright (c) 2006-2013 by OpenLayers Contributors (see authors.txt for'],[-1,' * full list of contributors). Published under the 2-clause BSD license.'],[-1,' * See license.txt in the OpenLayers distribution or repository for the'],[-1,' * full text of the license. *\/'],[-1,''],[-1,'\/**'],[-1,' * @requires OpenLayers\/Control.js'],[-1,' * @requires OpenLayers\/Handler\/Keyboard.js'],[-1,' * @requires OpenLayers\/Events.js'],[-1,' *\/'],[-1,''],[-1,'\/**'],[-1,' * Class: OpenLayers.Control.KeyboardDefaults'],[-1,' * The KeyboardDefaults control adds panning and zooming functions, controlled'],[-1,' * with the keyboard. By default arrow keys pan, +\/- keys zoom &amp; Page Up\/Page'],[-1,' * Down\/Home\/End scroll by three quarters of a page.'],[-1,' * '],[-1,' * This control has no visible appearance.'],[-1,' *'],[-1,' * Inherits from:'],[-1,' *  - &lt;OpenLayers.Control&gt;'],[-1,' *\/'],[1,'OpenLayers.Control.KeyboardDefaults = OpenLayers.Class(OpenLayers.Control, {'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: autoActivate'],[-1,'     * {Boolean} Activate the control when it is added to a map.  Default is'],[-1,'     *     true.'],[-1,'     *\/'],[-1,'    autoActivate: true,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: slideFactor'],[-1,'     * Pixels to slide by.'],[-1,'     *\/'],[-1,'    slideFactor: 75,'],[-1,''],[-1,'    \/**'],[-1,'     * APIProperty: observeElement'],[-1,'     * {DOMelement|String} The DOM element to handle keys for. You'],[-1,'     *     can use the map div here, to have the navigation keys'],[-1,'     *     work when the map div has the focus. If undefined the'],[-1,'     *     document is used.'],[-1,'     *\/'],[-1,'    observeElement: null,'],[-1,''],[-1,'    \/**'],[-1,'     * Constructor: OpenLayers.Control.KeyboardDefaults'],[-1,'     *\/'],[-1,'        '],[-1,'    \/**'],[-1,'     * Method: draw'],[-1,'     * Create handler.'],[-1,'     *\/'],[-1,'    draw: function() {'],[0,'        var observeElement = this.observeElement || document;'],[0,'        this.handler = new OpenLayers.Handler.Keyboard( this,'],[-1,'                {\&quot;keydown\&quot;: this.defaultKeyPress},'],[-1,'                {observeElement: observeElement}'],[-1,'        );'],[-1,'    },'],[-1,'    '],[-1,'    \/**'],[-1,'     * Method: defaultKeyPress'],[-1,'     * When handling the key event, we only use evt.keyCode. This holds '],[-1,'     * some drawbacks, though we get around them below. When interpretting'],[-1,'     * the keycodes below (including the comments associated with them),'],[-1,'     * consult the URL below. For instance, the Safari browser returns'],[-1,'     * \&quot;IE keycodes\&quot;, and so is supported by any keycode labeled \&quot;IE\&quot;.'],[-1,'     * '],[-1,'     * Very informative URL:'],[-1,'     *    http:\/\/unixpapa.com\/js\/key.html'],[-1,'     *'],[-1,'     * Parameters:'],[-1,'     * evt - {Event} '],[-1,'     *\/'],[-1,'    defaultKeyPress: function (evt) {'],[0,'        var size, handled = true;'],[-1,''],[0,'        var target = OpenLayers.Event.element(evt);'],[0,'        if (target  &amp;&amp;'],[-1,'            (target.tagName == \'INPUT\' ||'],[-1,'             target.tagName == \'TEXTAREA\' ||'],[-1,'             target.tagName == \'SELECT\')) {'],[0,'            return;'],[-1,'        }'],[-1,''],[0,'        switch (evt.keyCode) {'],[-1,'            case OpenLayers.Event.KEY_LEFT:'],[0,'                this.map.pan(-this.slideFactor, 0);'],[0,'                break;'],[-1,'            case OpenLayers.Event.KEY_RIGHT: '],[0,'                this.map.pan(this.slideFactor, 0);'],[0,'                break;'],[-1,'            case OpenLayers.Event.KEY_UP:'],[0,'                this.map.pan(0, -this.slideFactor);'],[0,'                break;'],[-1,'            case OpenLayers.Event.KEY_DOWN:'],[0,'                this.map.pan(0, this.slideFactor);'],[0,'                break;'],[-1,'            '],[-1,'            case 33: \/\/ Page Up. Same in all browsers.'],[0,'                size = this.map.getSize();'],[0,'                this.map.pan(0, -0.75*size.h);'],[0,'                break;'],[-1,'            case 34: \/\/ Page Down. Same in all browsers.'],[0,'                size = this.map.getSize();'],[0,'                this.map.pan(0, 0.75*size.h);'],[0,'                break; '],[-1,'            case 35: \/\/ End. Same in all browsers.'],[0,'                size = this.map.getSize();'],[0,'                this.map.pan(0.75*size.w, 0);'],[0,'                break; '],[-1,'            case 36: \/\/ Home. Same in all browsers.'],[0,'                size = this.map.getSize();'],[0,'                this.map.pan(-0.75*size.w, 0);'],[0,'                break; '],[-1,''],[-1,'            case 43:  \/\/ +\/= (ASCII), keypad + (ASCII, Opera)'],[-1,'            case 61:  \/\/ +\/= (Mozilla, Opera, some ASCII)'],[-1,'            case 187: \/\/ +\/= (IE)'],[-1,'            case 107: \/\/ keypad + (IE, Mozilla)'],[0,'                this.map.zoomIn();'],[0,'                break; '],[-1,'            case 45:  \/\/ -\/_ (ASCII, Opera), keypad - (ASCII, Opera)'],[-1,'            case 109: \/\/ -\/_ (Mozilla), keypad - (Mozilla, IE)'],[-1,'            case 189: \/\/ -\/_ (IE)'],[-1,'            case 95:  \/\/ -\/_ (some ASCII)'],[0,'                this.map.zoomOut();'],[0,'                break; '],[-1,'            default:'],[0,'                handled = false;'],[-1,'        }'],[0,'        if (handled) {'],[-1,'            \/\/ prevent browser default not to move the page'],[-1,'            \/\/ when moving the page with the keyboard'],[0,'            OpenLayers.Event.stop(evt);'],[-1,'        }'],[-1,'    },'],[-1,''],[-1,'    CLASS_NAME: \&quot;OpenLayers.Control.KeyboardDefaults\&quot;'],[-1,'});']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('e92a76b33f1b2ed8b48c7fa469ceb4ac'); return false;">
                <td><a href="#">src/<strong>ZoekFormulier.js</strong></a></td>
                <td class="statements">15</td>
                <td class="executed">1</td>
                <td class="coverage">
                        6&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 6%; background-color: rgb(219, 92, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_e92a76b33f1b2ed8b48c7fa469ceb4ac" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_e92a76b33f1b2ed8b48c7fa469ceb4ac">[[-1,'\/*'],[-1,' * Copyright (c) 2013, Dienst Landelijk Gebied - Ministerie van Economische Zaken'],[-1,' * '],[-1,' * Gepubliceerd onder de BSD 2-clause licentie, '],[-1,' * zie https:\/\/github.com\/MinELenI\/CBSviewer\/blob\/master\/LICENSE.md voor de volledige licentie. '],[-1,' *\/'],[-1,'\/**'],[-1,' * Functies voor het zoekformulier zoals gedefinieerd in zoekformulier.jsp.'],[-1,' * '],[-1,' * @fileoverview zorgt voor afhandeling van het adreszoek formulier.'],[-1,' * @author mprins'],[-1,' * @requires jQuery'],[-1,' * @requires jQueryUI'],[-1,' * @requires zoekformulier.jsp'],[-1,' * @requires Viewer.js'],[-1,' * @class {ZoekFormulier}'],[-1,' *\/'],[1,'var ZoekFormulier = {'],[-1,'\t\/**'],[-1,'\t * Aanhaken van autocomplete handler aan input veld van zoek formulier.'],[-1,'\t * '],[-1,'\t * @constructor'],[-1,'\t *\/'],[-1,'\tinit : function(viewer) {'],[-1,'\t\t\/\/ de zoekknop, method en action van formulier verwijderen, die hebben geen funtie meer in de RIA'],[0,'\t\tjQuery(\'input:submit\').attr(\&quot;disabled\&quot;, true);'],[0,'\t\tjQuery(\'#zoekFormulier\').removeAttr(\'action\');'],[0,'\t\tjQuery(\'#zoekFormulier\').removeAttr(\'method\');'],[-1,''],[-1,'\t\t\/\/ verborgen velden instellen voor RIA functies'],[0,'\t\tjQuery(\'#zoekFormulier\').find(\'input[name=\&quot;coreonly\&quot;]\').val(\'false\');'],[0,'\t\tjQuery(\'#zoekFormulier\').find(\'input[name=\&quot;forward\&quot;]\').val(\'false\');'],[-1,''],[-1,'\t\t\/\/ aanhaken auto complete'],[0,'\t\tjQuery(\'#adres\').autocomplete({'],[-1,'\t\t\tsource : function(request, response) {'],[-1,'\t\t\t\tjQuery.ajax({'],[-1,'\t\t\t\t\turl : \'adres\','],[-1,'\t\t\t\t\tdata : {'],[-1,'\t\t\t\t\t\tadres : request.term,'],[-1,'\t\t\t\t\t\tforward : false,'],[-1,'\t\t\t\t\t\tformat : \'json\','],[-1,'\t\t\t\t\t\tcoreonly : false'],[-1,'\t\t\t\t\t},'],[-1,'\t\t\t\t\tdataType : \'json\''],[0,'\t\t\t\t}).success(function(data) {'],[0,'\t\t\t\t\tvar results = jQuery.map(data, function(val, i) {'],[0,'\t\t\t\t\t\treturn {'],[-1,'\t\t\t\t\t\t\tlabel : val.addressString,'],[-1,'\t\t\t\t\t\t\tx : val.xCoord,'],[-1,'\t\t\t\t\t\t\ty : val.yCoord,'],[-1,'\t\t\t\t\t\t\tr : val.radius'],[-1,'\t\t\t\t\t\t};'],[-1,'\t\t\t\t\t});'],[0,'\t\t\t\t\tresponse(results);'],[-1,'\t\t\t\t});'],[-1,'\t\t\t},'],[-1,'\t\t\tselect : function(event, ui) {'],[-1,'\t\t\t\t\/\/ console.debug(ui.item ? \&quot;Gekozen: \&quot; + ui.item.value + \&quot;'],[-1,'\t\t\t\t\/\/ (x,y,r) :\&quot; + ui.item.x + \&quot;,\&quot;'],[-1,'\t\t\t\t\/\/ + ui.item.y + \&quot;,\&quot; + ui.item.r : \&quot;Niets gekozen, de input was'],[-1,'\t\t\t\t\/\/ \&quot; + this.value);'],[0,'\t\t\t\tif (ui.item) {'],[0,'\t\t\t\t\tViewer.zoomTo(ui.item.x, ui.item.y, ui.item.r, true);'],[-1,'\t\t\t\t\t\/\/Viewer.featureInfo(ui.item.x, ui.item.y);'],[-1,'\t\t\t\t}'],[-1,'\t\t\t},'],[-1,'\t\t\t\/\/ alleen items uit de lijst mogen ingevuld\/gekozen worden'],[-1,'\t\t\tchange : function(event, ui) {'],[0,'\t\t\t\tif (!ui.item) {'],[0,'\t\t\t\t\tjQuery(this).val(\'\');'],[-1,'\t\t\t\t}'],[-1,'\t\t\t},'],[-1,'\t\t\tminLength : 4 \/* characters *\/,'],[-1,'\t\t\tdelay : 400 \/* milliseconds *\/,'],[-1,'\t\t\tautoFocus : false'],[-1,'\t\t});'],[-1,'\t}'],[-1,'};']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('17b5036a513a04e115d4deb01b68a3ef'); return false;">
                <td><a href="#">src/<strong>Viewer.js</strong></a></td>
                <td class="statements">140</td>
                <td class="executed">10</td>
                <td class="coverage">
                        7&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 7%; background-color: rgb(219, 95, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_17b5036a513a04e115d4deb01b68a3ef" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_17b5036a513a04e115d4deb01b68a3ef">[[-1,'\/*'],[-1,' * Copyright (c) 2012-2013, Dienst Landelijk Gebied - Ministerie van Economische Zaken'],[-1,' * '],[-1,' * Gepubliceerd onder de BSD 2-clause licentie, '],[-1,' * zie https:\/\/github.com\/MinELenI\/CBSviewer\/blob\/master\/LICENSE.md voor de volledige licentie. '],[-1,' *\/'],[-1,'\/**'],[-1,' * Viewer.'],[-1,' * '],[-1,' * @author mprins'],[-1,' * @return {Viewer} Viewer object'],[-1,' * @class Viewer, de viewer component.'],[-1,' *\/'],[1,'var Viewer = function() {'],[-1,'\t\/**'],[-1,'\t * Map object, initially null.'],[-1,'\t * '],[-1,'\t * @private'],[-1,'\t * @type {OpenLayers.Map}'],[-1,'\t *\/'],[1,'\tvar _map = null;'],[-1,''],[-1,'\t\/**'],[-1,'\t * Toggle vlag voor fullsize functie.'],[-1,'\t * '],[-1,'\t * @type {Boolean}'],[-1,'\t * @private'],[-1,'\t *\/'],[1,'\tvar _fullSize = false;'],[-1,'\t\/**'],[-1,'\t * Window resize timout flag.'],[-1,'\t * '],[-1,'\t * @type {Boolean}'],[-1,'\t * @private'],[-1,'\t *\/'],[1,'\tvar _resizeTimeOut = false;'],[-1,''],[-1,'\t\/**'],[-1,'\t * Opacity van de voorgrond (WMS) laag.'],[-1,'\t * '],[-1,'\t * @type {Number}'],[-1,'\t * @private'],[-1,'\t *\/'],[1,'\tvar _opacity = 0.8;'],[-1,''],[-1,'\t\/**'],[-1,'\t * update het informatie element met feature info.'],[-1,'\t * '],[-1,'\t * @param {OpenLayers.Event}'],[-1,'\t *            evt Het featureinfo event'],[-1,'\t * @private'],[-1,'\t *\/'],[1,'\tfunction _showInfo(evt) {'],[0,'\t\tif (evt.text !== undefined) {'],[0,'\t\t\tjQuery(\'#\' + config.featureInfoDiv).html(evt.text);'],[0,'\t\t\tjQuery(\'#\' + config.featureInfoDiv).change();'],[-1,'\t\t}'],[-1,'\t}'],[-1,''],[-1,'\t\/**'],[-1,'\t * zorgt voor correct afhandelen van viewport resize.'],[-1,'\t * '],[-1,'\t * @private'],[-1,'\t *\/'],[1,'\tfunction _resize() {'],[0,'\t\tif (_fullSize) {'],[0,'\t\t\tvar borderW = parseInt(jQuery(\'#\' + this.config.mapDiv).css(\'borderLeftWidth\'), 10)'],[-1,'\t\t\t\t\t+ parseInt(jQuery(\'#\' + this.config.mapDiv).css(\'borderRightWidth\'), 10);'],[0,'\t\t\tvar borderH = parseInt(jQuery(\'#\' + this.config.mapDiv).css(\'borderTopWidth\'), 10)'],[-1,'\t\t\t\t\t+ parseInt(jQuery(\'#\' + this.config.mapDiv).css(\'borderBottomWidth\'), 10);'],[-1,'\t\t\t\/\/ inhoud padding set in css'],[0,'\t\t\tvar headerH = parseInt(jQuery(\'#\' + this.config.mapDiv).parent().parent().css(\'padding-top\'), 10);'],[0,'\t\t\tvar footerH = parseInt(jQuery(\'#\' + this.config.mapDiv).parent().parent().css(\'padding-bottom\'), 10);'],[-1,''],[0,'\t\t\tvar w = jQuery(\'#\' + this.config.mapDiv).parent().width() - borderW;'],[0,'\t\t\tvar h = jQuery(window).height() - headerH - footerH - borderH;'],[-1,''],[0,'\t\t\tjQuery(\'#\' + this.config.mapDiv).width(w).height(h);'],[-1,'\t\t\t\/\/ todo: compute height and remove from here'],[0,'\t\t\tjQuery(\'#legenda\').css(\'max-height\', jQuery(window).height() - 500);'],[-1,''],[0,'\t\t\t_map.updateSize();'],[0,'\t\t\tvar vectors = _map.getLayersByClass(\&quot;OpenLayers.Layer.Vector\&quot;);'],[0,'\t\t\tif (vectors.length &gt; 0) {'],[-1,'\t\t\t\t\/\/ in dit geval is er een kaartlaag met een featureinfo lokatie'],[-1,'\t\t\t\t\/\/ verschuif naar die lokatie'],[0,'\t\t\t\tvar bounds = vectors[0].getDataExtent();'],[0,'\t\t\t\t_map.panTo(bounds.getCenterLonLat());'],[-1,'\t\t\t}'],[-1,'\t\t}'],[-1,'\t}'],[-1,''],[-1,'\t\/**'],[-1,'\t * Stelt de doorzichtigheid van de voorgrond kaart in.'],[-1,'\t * '],[-1,'\t * @param alpha'],[-1,'\t *            float waarde tussen 0 1n 1'],[-1,'\t * @private'],[-1,'\t *\/'],[1,'\tfunction _setOpacity(alpha) {'],[0,'\t\talpha = parseFloat(alpha);'],[0,'\t\tif (0.09 &lt; alpha &amp;&amp; alpha &lt; 0.91) {'],[0,'\t\t\t_opacity = alpha;'],[0,'\t\t\tvar lyrs = _map.getLayersByClass(\'OpenLayers.Layer.WMS\');'],[0,'\t\t\tfor ( var lyr = 0; lyr &lt; lyrs.length; lyr++) {'],[0,'\t\t\t\tif (!lyrs[lyr].isBaseLayer) {'],[0,'\t\t\t\t\tlyrs[lyr].setOpacity(_opacity);'],[-1,'\t\t\t\t}'],[-1,'\t\t\t}'],[-1,'\t\t}'],[-1,'\t}'],[-1,''],[-1,'\t\/**'],[-1,'\t * event handler voor na de zoomTo functie van deze viewer.'],[-1,'\t * '],[-1,'\t * @param lonlat'],[-1,'\t *            {OpenLayers.LonLat} de zoomlokatie'],[-1,'\t * '],[-1,'\t * @private'],[-1,'\t *\/'],[1,'\tfunction _afterZoomTo(lonlat) {'],[0,'\t\t_map.getControlsByClass(\'ClickDrawControl\')[0].trigger({'],[-1,'\t\t\txy : _map.getPixelFromLonLat(lonlat)'],[-1,'\t\t});'],[-1,''],[0,'\t\t_map.getControlsByClass(\'WMSGetFeatureInfo\')[0].deactivate();'],[0,'\t\t_map.getControlsByClass(\'WMSGetFeatureInfo\')[0].activate();'],[0,'\t\t_map.events.triggerEvent(\'click\', {'],[-1,'\t\t\txy : _map.getPixelFromLonLat(lonlat)'],[-1,'\t\t});'],[-1,''],[0,'\t\t_map.events.unregister(\'zoomend\', _map, _afterZoomTo);'],[-1,'\t}'],[-1,''],[-1,'\t\/**'],[-1,'\t * Publieke interface van deze klasse.'],[-1,'\t * '],[-1,'\t * @return {Viewer} publieke methodes'],[-1,'\t *\/'],[1,'\treturn {'],[-1,'\t\t\/**'],[-1,'\t\t * Constructor, attach to the DOM.'],[-1,'\t\t * '],[-1,'\t\t * @param {object}'],[-1,'\t\t *            config Configratie object'],[-1,'\t\t * @constructor'],[-1,'\t\t *\/'],[-1,'\t\tinit : function(config) {'],[0,'\t\t\tthis.config = config;'],[0,'\t\t\tOpenLayers.ImgPath = config.imgPath;'],[0,'\t\t\tOpenLayers.IMAGE_RELOAD_ATTEMPTS = 2;'],[0,'\t\t\tOpenLayers.Number.decimalSeparator = \&quot;,\&quot;;'],[-1,''],[-1,'\t\t\t\/\/ merge any controls met default'],[0,'\t\t\tjQuery.extend(true, this.config, {'],[-1,'\t\t\t\tmap : {'],[-1,'\t\t\t\t\tcontrols : [],'],[-1,'\t\t\t\t\ttileManager : new OpenLayers.TileManager(),'],[-1,'\t\t\t\t\ttheme : null'],[-1,'\t\t\t\t}'],[-1,'\t\t\t});'],[0,'\t\t\tjQuery(window).unload(function() {'],[0,'\t\t\t\tViewer.destroy();'],[-1,'\t\t\t});'],[-1,''],[0,'\t\t\tjQuery(\'#\' + this.config.mapDiv).width(this.config.map.width).height(this.config.map.height);'],[-1,''],[0,'\t\t\t_map = new OpenLayers.Map(this.config.mapDiv, this.config.map);'],[0,'\t\t\tthis.addBaseMap();'],[0,'\t\t\tthis.addControls();'],[0,'\t\t\t_map.zoomTo(this.config.map.initialZoom);'],[-1,''],[-1,'\t\t\t\/\/ toggle knop voor omschakelen basemap'],[0,'\t\t\tvar aToggle = \'&lt;a class=\&quot;lufo\&quot; href=\&quot;#\&quot; id=\&quot;toggleBaseMap\&quot; title=\&quot;\''],[-1,'\t\t\t\t\t+ OpenLayers.i18n(\'KEY_TOGGLE_BASEMAP_TITLE\') + \'\&quot; onclick=\&quot;Viewer.toggleBaseMap();\&quot;&gt;\''],[-1,'\t\t\t\t\t+ OpenLayers.i18n(\'KEY_TOGGLE_BASEMAP_LUFO\') + \'&lt;\/a&gt;\';'],[0,'\t\t\tjQuery(\'#\' + config.mapDiv).prepend(aToggle);'],[-1,''],[0,'\t\t\tif (this.config.toggleSize) {'],[-1,'\t\t\t\t\/\/ toggle knop voor vergroten\/verkleinen van de kaart'],[0,'\t\t\t\tvar aToggleMapSize = \'&lt;a class=\&quot;max\&quot; href=\&quot;#\&quot; id=\&quot;toggleSize\&quot; title=\&quot;\''],[-1,'\t\t\t\t\t\t+ OpenLayers.i18n(\'KEY_TOGGLE_SIZE\') + \'\&quot; onclick=\&quot;Viewer.toggleFullSize();\&quot;&gt;&lt;\/a&gt;\';'],[0,'\t\t\t\tjQuery(\'#\' + config.mapDiv).prepend(aToggleMapSize);'],[-1,'\t\t\t}'],[0,'\t\t\tif (this.config.fullSize) {'],[0,'\t\t\t\tthis.toggleFullSize();'],[-1,'\t\t\t}'],[0,'\t\t\tjQuery(window).resize(function() {'],[-1,'\t\t\t\t\/\/ aanhaken bij window resize'],[0,'\t\t\t\tif (_resizeTimeOut) {'],[0,'\t\t\t\t\tclearTimeout(_resizeTimeOut);'],[-1,'\t\t\t\t}'],[0,'\t\t\t\t_resizeTimeOut = setTimeout(_resize, 200); \/\/ 200 is time in'],[-1,'\t\t\t\t\/\/ miliseconds'],[-1,'\t\t\t});'],[-1,''],[0,'\t\t\tif (this.config.fgAlphaSlider) {'],[-1,'\t\t\t\t\/\/ removed &lt;span id=\&quot;slidervalue\&quot;&gt;&lt;\/span&gt; according new cbs'],[-1,'\t\t\t\t\/\/ style'],[0,'\t\t\t\tvar aSlider = jQuery(\'&lt;div id=\&quot;sliderFGMap\&quot;&gt;&lt;\/div&gt;\').prependTo(jQuery(\'#\' + config.mapDiv)).slider({'],[-1,'\t\t\t\t\tvalue : _opacity * 100,'],[-1,'\t\t\t\t\trange : \'min\','],[-1,'\t\t\t\t\tmin : 10,'],[-1,'\t\t\t\t\tmax : 90,'],[-1,'\t\t\t\t\tstep : 10,'],[-1,'\t\t\t\t\tanimate : \&quot;slow\&quot;,'],[-1,'\t\t\t\t\tslide : function(event, ui) {'],[0,'\t\t\t\t\t\t_setOpacity(ui.value \/ 100);'],[-1,'\t\t\t\t\t\t\/*'],[-1,'\t\t\t\t\t\t * jQuery(\'#slidervalue\').html(OpenLayers.i18n(\'KEY_TRANSP_SLIDER_LABEL\', {'],[-1,'\t\t\t\t\t\t * \'0\' : (100 - ui.value) }));'],[-1,'\t\t\t\t\t\t *\/'],[0,'\t\t\t\t\t\tjQuery(this).find(\'a:first\').text(ui.value);'],[-1,'\t\t\t\t\t\t\/\/ move tooltip'],[-1,'\t\t\t\t\t\t\/*'],[-1,'\t\t\t\t\t\t * if (ui.value &gt; 50) { jQuery(\'#slidervalue\').css({'],[-1,'\t\t\t\t\t\t * \'left\' : \'50%\' }); } else {'],[-1,'\t\t\t\t\t\t * jQuery(\'#slidervalue\').css({ \'left\' : ui.value + \'%\''],[-1,'\t\t\t\t\t\t * }); }'],[-1,'\t\t\t\t\t\t *\/'],[-1,'\t\t\t\t\t}'],[-1,'\t\t\t\t});'],[-1,'\t\t\t\t\/\/ instellen initiele waarde op tooltip'],[-1,'\t\t\t\t\/*'],[-1,'\t\t\t\t * jQuery(\'#slidervalue\').html(OpenLayers.i18n(\'KEY_TRANSP_SLIDER_LABEL\', {'],[-1,'\t\t\t\t * \'0\' : 100 - (_opacity * 100) }));'],[-1,'\t\t\t\t *\/'],[-1,'\t\t\t\t\/\/ en slider'],[0,'\t\t\t\tjQuery(\'#sliderFGMap\').find(\'a:first\').text((_opacity * 100));'],[-1,'\t\t\t}'],[-1,'\t\t},'],[-1,''],[-1,'\t\t\/**'],[-1,'\t\t * Accessor voor de kaart.'],[-1,'\t\t * '],[-1,'\t\t * @return {OpenLayers.Map} object van deze Viewer of null als het'],[-1,'\t\t *         object niet is geinitialiseerd'],[-1,'\t\t * @deprecated probeer deze niet te gebruiken'],[-1,'\t\t *\/'],[-1,'\t\tgetMap : function() {'],[0,'\t\t\t(window.console &amp;&amp; console.warn(\'Deprecated method called: Viewer::getMap().\'));'],[0,'\t\t\treturn _map;'],[-1,'\t\t},'],[-1,''],[-1,'\t\t\/**'],[-1,'\t\t * verplaats en zoom de kaart naar de gevraagde locatie.'],[-1,'\t\t * '],[-1,'\t\t * @param {number}'],[-1,'\t\t *            x de x coordinaat'],[-1,'\t\t * @param {number}'],[-1,'\t\t *            y de y coordinaat'],[-1,'\t\t * @param {number}'],[-1,'\t\t *            radius straal van het gebied'],[-1,'\t\t * @param {boolean}'],[-1,'\t\t *            withFeatureInfo voert een featureInfo request uit na'],[-1,'\t\t *            uitvoeren van de zoom en pan actie.'],[-1,'\t\t *\/'],[-1,'\t\tzoomTo : function(x, y, radius, withFeatureInfo) {'],[0,'\t\t\tvar lonlat = new OpenLayers.LonLat(x, y);'],[0,'\t\t\t_map.panTo(lonlat);'],[0,'\t\t\t_map.zoomTo(_map.getZoomForExtent(new OpenLayers.Bounds(x - radius, y - radius, x + radius, y + radius)));'],[-1,''],[0,'\t\t\tif (withFeatureInfo) {'],[-1,'\t\t\t\t\/\/ met een zoomend werkt het soms raar, maar met wachten op'],[-1,'\t\t\t\t\/\/ loadend van het eerste wms thema gaat het vaker mis'],[0,'\t\t\t\t_map.events.register(\'zoomend\', _map, _afterZoomTo(lonlat));'],[-1,'\t\t\t\t\/\/ var lyrs = _map.getLayersByClass(\'OpenLayers.Layer.WMS\'),'],[-1,'\t\t\t\t\/\/ lyr;'],[-1,'\t\t\t\t\/\/ for (lyr = 0; lyr &lt; lyrs.length; lyr++) {'],[-1,'\t\t\t\t\/\/ if (!lyrs[lyr].isBaseLayer) {'],[-1,'\t\t\t\t\/\/ lyrs[lyr].events.register(\'loadend\', lyrs[lyr],'],[-1,'\t\t\t\t\/\/ _afterZoomTo(lonlat, lyrs[lyr]));'],[-1,'\t\t\t\t\/\/ break;'],[-1,'\t\t\t\t\/\/ }'],[-1,'\t\t\t\t\/\/ }'],[-1,'\t\t\t}'],[-1,'\t\t},'],[-1,''],[-1,'\t\t\/**'],[-1,'\t\t * Controls aan de kaart hangen.'],[-1,'\t\t * '],[-1,'\t\t * @private'],[-1,'\t\t *\/'],[-1,'\t\taddControls : function() {'],[0,'\t\t\t_map.addControl(new UpdateLegendControl({'],[-1,'\t\t\t\tdiv : jQuery(\'#\' + this.config.legendDiv)[0]'],[-1,'\t\t\t}));'],[0,'\t\t\t_map.addControl(new OpenLayers.Control.KeyboardDefaults({'],[-1,'\t\t\t\t\/* alleen actief als de kaart focus heeft *\/'],[-1,'\t\t\t\tobserveElement : this.config.mapDiv'],[-1,'\t\t\t}));'],[0,'\t\t\t_map.addControl(new OpenLayers.Control.Zoom());'],[0,'\t\t\t_map.addControl(new OpenLayers.Control.Navigation());'],[0,'\t\t\t_map.addControl(new OpenLayers.Control.KeyboardClick({'],[-1,'\t\t\t\t\/* alleen actief als de kaart focus heeft *\/'],[-1,'\t\t\t\tobserveElement : this.config.mapDiv'],[-1,'\t\t\t}));'],[0,'\t\t\t_map.addControl(new WMSGetFeatureInfo({'],[-1,'\t\t\t\teventListeners : {'],[-1,'\t\t\t\t\tgetfeatureinfo : _showInfo'],[-1,'\t\t\t\t}'],[-1,'\t\t\t}));'],[0,'\t\t\t_map.addControl(new ClickDrawControl());'],[0,'\t\t\t_map.addControl(new OpenLayers.Control.ScaleLine({'],[-1,'\t\t\t\tmaxWidth : 200,'],[-1,'\t\t\t\tbottomOutUnits : \'\' \/\/ geen mi\/ft'],[-1,'\t\t\t}));'],[0,'\t\t\t_map.addControl(new OverviewMap({'],[-1,'\t\t\t\tmapOptions : {'],[-1,'\t\t\t\t\tmaxExtent : this.config.map.restrictedExtent,'],[-1,'\t\t\t\t\tresolutions : this.config.map.resolutions,'],[-1,'\t\t\t\t\tprojection : this.config.map.projection'],[-1,'\t\t\t\t}'],[-1,'\t\t\t}));'],[-1,'\t\t},'],[-1,''],[-1,'\t\t\/**'],[-1,'\t\t * cleanup. Moet aangeroepen voor dat een eventueel DOM element van de'],[-1,'\t\t * pagina wordt verwijderd. Wordt automatische aangeroepen bij verlaten'],[-1,'\t\t * van de pagina.'],[-1,'\t\t *\/'],[-1,'\t\tdestroy : function() {'],[0,'\t\t\tif (_map !== null) {'],[0,'\t\t\t\t_map.destroy();'],[0,'\t\t\t\t_map = null;'],[-1,'\t\t\t}'],[-1,'\t\t},'],[-1,''],[-1,'\t\t\/**'],[-1,'\t\t * Stelt de doorzichtigheid van de voorgrond kaart in.'],[-1,'\t\t * '],[-1,'\t\t * @param opacity'],[-1,'\t\t *            float waarde tussen 0 1n 1'],[-1,'\t\t * @returns'],[-1,'\t\t *\/'],[-1,'\t\tsetOpacity : function(opacity) {'],[0,'\t\t\t_setOpacity(opacity);'],[-1,'\t\t},'],[-1,''],[-1,'\t\t\/**'],[-1,'\t\t * Voeg WMS toe aan de kaart. Uitgangspunt is dat de WMS transparante'],[-1,'\t\t * PNG ondersteund. eerder geladen WMS lagen worden verwijderd'],[-1,'\t\t * '],[-1,'\t\t * @param {object}'],[-1,'\t\t *            wmsConfig Een object met WMS parameters. &lt;code&gt;'],[-1,'\t\t * {'],[-1,'\t\t * \'name\' : \'cbs_inwoners_2010_per_hectare\','],[-1,'\t\t * \'url\' : \'http:\/\/geodata.nationaalgeoregister.nl\/cbsvierkanten100m2010\/ows\','],[-1,'\t\t * \'layers\' : \'cbsvierkanten100m2010:cbs_inwoners_2000_per_hectare\','],[-1,'\t\t * \'styles\' : \'cbsvierkant100m_inwoners_2000\''],[-1,'\t\t * }'],[-1,'\t\t * &lt;\/code&gt;'],[-1,'\t\t *\/'],[-1,'\t\tloadWMS : function(wmsConfig) {'],[0,'\t\t\tthis.removeOverlays();'],[0,'\t\t\tvar layer = new OpenLayers.Layer.WMS(wmsConfig.name, wmsConfig.url, {'],[-1,'\t\t\t\tlayers : wmsConfig.layers,'],[-1,'\t\t\t\tstyles : wmsConfig.styles,'],[-1,'\t\t\t\tversion : \'1.3.0\','],[-1,'\t\t\t\tformat : \'image\/png\','],[-1,'\t\t\t\ttransparent : true'],[-1,'\t\t\t}, {'],[-1,'\t\t\t\tisBaseLayer : false,'],[-1,'\t\t\t\tvisibility : true,'],[-1,'\t\t\t\tsingleTile : false,'],[-1,'\t\t\t\topacity : _opacity'],[-1,'\t\t\t});'],[0,'\t\t\t_map.addLayer(layer);'],[0,'\t\t\tvar fInfoControl = _map.getControlsByClass(\'WMSGetFeatureInfo\');'],[0,'\t\t\tfInfoControl[0].url = wmsConfig.url;'],[-1,'\t\t},'],[-1,''],[-1,'\t\t\/**'],[-1,'\t\t * verwijder de WMS uit de kaart (behalve als het een base layer is).'],[-1,'\t\t * '],[-1,'\t\t * @param {string}'],[-1,'\t\t *            wmsLyrName naam van de WMS service'],[-1,'\t\t *\/'],[-1,'\t\tremoveWMS : function(wmsLyrName) {'],[0,'\t\t\tvar lyrs = _map.getLayersByName(wmsLyrName);'],[0,'\t\t\tfor ( var lyr = 0; lyr &lt; lyrs.length; lyr++) {'],[0,'\t\t\t\tif (!lyrs[lyr].isBaseLayer) {'],[0,'\t\t\t\t\t_map.removeLayer(lyrs[lyr]);'],[0,'\t\t\t\t\tlyrs[lyr].destroy();'],[-1,'\t\t\t\t}'],[-1,'\t\t\t}'],[-1,'\t\t},'],[-1,''],[-1,'\t\t\/**'],[-1,'\t\t * verwijder alle overlays. Voorlopig alleen type {OpenLayers.Layer.WMS}'],[-1,'\t\t *\/'],[-1,'\t\tremoveOverlays : function() {'],[-1,'\t\t\t\/\/ reset featureinfo text'],[0,'\t\t\tjQuery(\'#\' + config.featureInfoDiv).html(OpenLayers.i18n(\'KEY_INFO_GEEN_FEATURES\'));'],[-1,'\t\t\t\/\/ verwijder ikoontjes die de controls tekenen'],[0,'\t\t\tvar lyrs = _map.getLayersByName(\'ClickDrawControl\'), lyr;'],[0,'\t\t\tfor (lyr = 0; lyr &lt; lyrs.length; lyr++) {'],[0,'\t\t\t\tlyrs[lyr].removeAllFeatures();'],[-1,'\t\t\t}'],[0,'\t\t\tlyrs = _map.getLayersByName(\'OpenLayers.Handler.KeyboardPoint\');'],[0,'\t\t\tfor (lyr = 0; lyr &lt; lyrs.length; lyr++) {'],[0,'\t\t\t\tlyrs[lyr].removeAllFeatures();'],[-1,'\t\t\t}'],[-1,''],[-1,'\t\t\t\/\/ verwijder WMS lagen'],[0,'\t\t\tlyrs = _map.getLayersByClass(\'OpenLayers.Layer.WMS\');'],[0,'\t\t\tfor (lyr = 0; lyr &lt; lyrs.length; lyr++) {'],[0,'\t\t\t\tif (!lyrs[lyr].isBaseLayer) {'],[0,'\t\t\t\t\t_map.removeLayer(lyrs[lyr]);'],[0,'\t\t\t\t\tlyrs[lyr].destroy();'],[-1,'\t\t\t\t}'],[-1,'\t\t\t}'],[-1,'\t\t},'],[-1,''],[-1,'\t\t\/**'],[-1,'\t\t * Afmeting van de kaart aanpassen aan schermbreedte.'],[-1,'\t\t * '],[-1,'\t\t * @todo hoogte instellen werkt niet omdat de parent hoogte de afmeting'],[-1,'\t\t *       van de child heeft.'],[-1,'\t\t *\/'],[-1,'\t\ttoggleFullSize : function() {'],[0,'\t\t\tif (_fullSize) {'],[-1,'\t\t\t\t\/\/ terugzetten'],[0,'\t\t\t\tjQuery(\'#\' + this.config.mapDiv).width(this.config.map.width).height(this.config.map.height);'],[0,'\t\t\t\tjQuery(\'#toggleSize\').toggleClass(\'restore max\');'],[0,'\t\t\t\t_fullSize = false;'],[0,'\t\t\t\t_map.updateSize();'],[-1,''],[0,'\t\t\t\tvar vectors = _map.getLayersByClass(\&quot;OpenLayers.Layer.Vector\&quot;);'],[0,'\t\t\t\tif (vectors.length &gt; 0) {'],[-1,'\t\t\t\t\t\/\/ in dit geval is er een kaartlaag met een featureinfo'],[-1,'\t\t\t\t\t\/\/ lokatie verschuif naar die lokatie'],[0,'\t\t\t\t\tvar bounds = vectors[0].getDataExtent();'],[0,'\t\t\t\t\t_map.panTo(bounds.getCenterLonLat());'],[-1,'\t\t\t\t}'],[-1,'\t\t\t} else {'],[-1,'\t\t\t\t\/\/ vergroten'],[0,'\t\t\t\tvar borderW = parseInt(jQuery(\'#\' + this.config.mapDiv).css(\'borderLeftWidth\'), 10)'],[-1,'\t\t\t\t\t\t+ parseInt(jQuery(\'#\' + this.config.mapDiv).css(\'borderRightWidth\'), 10);'],[0,'\t\t\t\tvar borderH = parseInt(jQuery(\'#\' + this.config.mapDiv).css(\'borderTopWidth\'), 10)'],[-1,'\t\t\t\t\t\t+ parseInt(jQuery(\'#\' + this.config.mapDiv).css(\'borderBottomWidth\'), 10);'],[-1,'\t\t\t\t\/\/ inhoud padding set in css'],[0,'\t\t\t\tvar headerH = parseInt(jQuery(\'#\' + this.config.mapDiv).parent().parent().css(\'padding-top\'), 10);'],[0,'\t\t\t\tvar footerH = parseInt(jQuery(\'#\' + this.config.mapDiv).parent().parent().css(\'padding-bottom\'), 10);'],[-1,''],[0,'\t\t\t\tvar w = jQuery(\'#\' + this.config.mapDiv).parent().width() - borderW;'],[0,'\t\t\t\tvar h = jQuery(window).height() - headerH - footerH - borderH;'],[-1,''],[0,'\t\t\t\tjQuery(\'#\' + this.config.mapDiv).width(w).height(h);'],[0,'\t\t\t\tjQuery(\'#toggleSize\').toggleClass(\'restore max\');'],[0,'\t\t\t\t_fullSize = true;'],[0,'\t\t\t\t_map.updateSize();'],[-1,'\t\t\t}'],[-1,'\t\t},'],[-1,''],[-1,'\t\t\/**'],[-1,'\t\t * Stel de kaart in voor afdrukken.'],[-1,'\t\t * '],[-1,'\t\t * @returns'],[-1,'\t\t *\/'],[-1,'\t\tprintPrepare : function() {'],[0,'\t\t\tif (_fullSize) {'],[0,'\t\t\t\tthis.toggleFullSize();'],[-1,'\t\t\t}'],[-1,'\t\t},'],[-1,''],[-1,'\t\t\/**'],[-1,'\t\t * Toggle basemap.'],[-1,'\t\t *\/'],[-1,'\t\ttoggleBaseMap : function() {'],[0,'\t\t\tvar topo = _map.getLayersByName(\'topo\')[0];'],[0,'\t\t\tvar lufo = _map.getLayersByName(\'lufo\')[0];'],[0,'\t\t\tif (topo.getVisibility()) {'],[0,'\t\t\t\t_map.setBaseLayer(lufo);'],[0,'\t\t\t\tjQuery(\'#toggleBaseMap\').text(OpenLayers.i18n(\'KEY_TOGGLE_BASEMAP_TOPO\'));'],[-1,'\t\t\t} else {'],[0,'\t\t\t\t_map.setBaseLayer(topo);'],[0,'\t\t\t\tjQuery(\'#toggleBaseMap\').text(OpenLayers.i18n(\'KEY_TOGGLE_BASEMAP_LUFO\'));'],[-1,'\t\t\t}'],[0,'\t\t\tjQuery(\'#toggleBaseMap\').toggleClass(\'lufo topo\');'],[-1,'\t\t},'],[-1,''],[-1,'\t\t\/**'],[-1,'\t\t * set up basemaps.'],[-1,'\t\t * '],[-1,'\t\t * @private'],[-1,'\t\t *\/'],[-1,'\t\taddBaseMap : function() {'],[-1,'\t\t\t\/\/ topo'],[0,'\t\t\t_map.addLayer(new OpenLayers.Layer.WMTS(jQuery.extend(true, this.config.map.topoWMTS, {'],[-1,'\t\t\t\tname : \'topo\''],[-1,'\t\t\t})));'],[-1,'\t\t\t\/\/ luchtfoto'],[0,'\t\t\t_map.addLayer(new OpenLayers.Layer.WMTS(jQuery.extend(true, this.config.map.aerialWMTS, {'],[-1,'\t\t\t\tname : \'lufo\''],[-1,'\t\t\t})));'],[-1,'\t\t}'],[-1,'\t};'],[-1,'}();']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('64edc58991351b29d1b406553a04122b'); return false;">
                <td><a href="#">src\test\js\lib/<strong>jasmin_util.js</strong></a></td>
                <td class="statements">7</td>
                <td class="executed">1</td>
                <td class="coverage">
                        14&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 14%; background-color: rgb(219, 115, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_64edc58991351b29d1b406553a04122b" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_64edc58991351b29d1b406553a04122b">[[1,'beforeEach(function() {'],[0,'\tthis.addMatchers({'],[-1,'\t\t\/**'],[-1,'\t\t * A matcher that tests for instanceof.'],[-1,'\t\t * '],[-1,'\t\t * @param type'],[-1,'\t\t * @returns {Boolean} true when actual is an instance of expected'],[-1,'\t\t *\/'],[-1,'\t\ttoBeInstanceOf : function(type) {'],[0,'\t\t\tvar actual = this.actual;'],[0,'\t\t\tvar notText = this.isNot ? \&quot;not\&quot; : \&quot;\&quot;;'],[-1,''],[0,'\t\t\tthis.message = function() {'],[0,'\t\t\t\treturn \&quot;Expected \&quot; + actual + \&quot; to \&quot; + notText + \&quot; be instance of \&quot; + expected;'],[-1,'\t\t\t};'],[-1,''],[0,'\t\t\treturn this.actual instanceof type;'],[-1,'\t\t}'],[-1,'\t});'],[-1,'});']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('a32f73baa96a52a9037584bee02501d8'); return false;">
                <td><a href="#">src/<strong>WMSGetFeatureInfo.js</strong></a></td>
                <td class="statements">4</td>
                <td class="executed">1</td>
                <td class="coverage">
                        25&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 25%; background-color: rgb(219, 147, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_a32f73baa96a52a9037584bee02501d8" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_a32f73baa96a52a9037584bee02501d8">[[-1,'\/*'],[-1,' * Copyright (c) 2012, Dienst Landelijk Gebied - Ministerie van Economische Zaken'],[-1,' * '],[-1,' * Gepubliceerd onder de BSD 2-clause licentie, '],[-1,' * zie https:\/\/github.com\/MinELenI\/CBSviewer\/blob\/master\/LICENSE.md voor de volledige licentie. '],[-1,' *\/'],[-1,'\/**'],[-1,' * Custom WMSGetFeatureInfo control.'],[-1,' * '],[-1,' * @author mprins'],[-1,' * @class {WMSGetFeatureInfo}'],[-1,' * @extends {OpenLayers.Control.WMSGetFeatureInfo}'],[-1,' *\/'],[1,'WMSGetFeatureInfo = OpenLayers.Class(OpenLayers.Control.WMSGetFeatureInfo, {'],[-1,''],[-1,'\t\/** @override *\/'],[-1,'\tqueryVisible : true,'],[-1,'\t\/** @override *\/'],[-1,'\tmaxFeatures : 20,'],[-1,'\t\/** @override *\/'],[-1,'\tinfoFormat : \'text\/html\','],[-1,'\t\/** @override *\/'],[-1,'\tautoActivate : true,'],[-1,''],[-1,'\t\/** @constructor *\/'],[-1,'\tinitialize : function(options) {'],[0,'\t\toptions = options || {};'],[0,'\t\toptions.handlerOptions = options.handlerOptions || {};'],[0,'\t\tOpenLayers.Control.WMSGetFeatureInfo.prototype.initialize.apply(this, [ options ]);'],[-1,'\t},'],[-1,''],[-1,'\tCLASS_NAME : \'WMSGetFeatureInfo\''],[-1,'});']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('5b0152bc25db9ee06cab3e1b805fff7a'); return false;">
                <td><a href="#">src\main\webapp\lib/<strong>jquery-1.9.1.min.js</strong></a></td>
                <td class="statements">3</td>
                <td class="executed">1</td>
                <td class="coverage">
                        33&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 33%; background-color: rgb(219, 170, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_5b0152bc25db9ee06cab3e1b805fff7a" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_5b0152bc25db9ee06cab3e1b805fff7a">[[-1,'\/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org\/license'],[-1,'\/\/@ sourceMappingURL=jquery.min.map'],[228,'*\/(function(e,t){var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p=\&quot;1.9.1\&quot;,f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=\/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)\/.source,w=\/\\S+\/g,T=\/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$\/g,N=\/^(?:(&lt;[\\w\\W]+&gt;)[^&gt;]*|#([\\w-]*))$\/,C=\/^&lt;(\\w+)\\s*\\\/?&gt;(?:&lt;\\\/\\1&gt;|)$\/,k=\/^[\\],:{}\\s]*$\/,E=\/(?:^|:|,)(?:\\s*\\[)+\/g,S=\/\\\\(?:[\&quot;\\\\\\\/bfnrt]|u[\\da-fA-F]{4})\/g,A=\/\&quot;[^\&quot;\\\\\\r\\n]*\&quot;|true|false|null|-?(?:\\d+\\.|)\\d+(?:[eE][+-]?\\d+|)\/g,j=\/^-ms-\/,D=\/-([\\da-z])\/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||\&quot;load\&quot;===e.type||\&quot;complete\&quot;===o.readyState)&amp;&amp;(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener(\&quot;DOMContentLoaded\&quot;,H,!1),e.removeEventListener(\&quot;load\&quot;,H,!1)):(o.detachEvent(\&quot;onreadystatechange\&quot;,H),e.detachEvent(\&quot;onload\&quot;,H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if(\&quot;string\&quot;==typeof e){if(i=\&quot;&lt;\&quot;===e.charAt(0)&amp;&amp;\&quot;&gt;\&quot;===e.charAt(e.length-1)&amp;&amp;e.length&gt;=3?[null,e,null]:N.exec(e),!i||!i[1]&amp;&amp;n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&amp;&amp;n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&amp;&amp;b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&amp;&amp;a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&amp;&amp;(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:\&quot;\&quot;,length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0&gt;e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0&gt;e?t:0);return this.pushStack(n&gt;=0&amp;&amp;t&gt;n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for(\&quot;boolean\&quot;==typeof s&amp;&amp;(c=s,s=arguments[1]||{},u=2),\&quot;object\&quot;==typeof s||b.isFunction(s)||(s={}),l===u&amp;&amp;(s=this,--u);l&gt;u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&amp;&amp;(c&amp;&amp;r&amp;&amp;(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&amp;&amp;b.isArray(e)?e:[]):a=e&amp;&amp;b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&amp;&amp;(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&amp;&amp;(e.$=u),t&amp;&amp;e.jQuery===b&amp;&amp;(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&amp;&amp;--b.readyWait&gt;0||(n.resolveWith(o,[b]),b.fn.trigger&amp;&amp;b(o).trigger(\&quot;ready\&quot;).off(\&quot;ready\&quot;))}},isFunction:function(e){return\&quot;function\&quot;===b.type(e)},isArray:Array.isArray||function(e){return\&quot;array\&quot;===b.type(e)},isWindow:function(e){return null!=e&amp;&amp;e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&amp;&amp;isFinite(e)},type:function(e){return null==e?e+\&quot;\&quot;:\&quot;object\&quot;==typeof e||\&quot;function\&quot;==typeof e?l[m.call(e)]||\&quot;object\&quot;:typeof e},isPlainObject:function(e){if(!e||\&quot;object\&quot;!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&amp;&amp;!y.call(e,\&quot;constructor\&quot;)&amp;&amp;!y.call(e.constructor.prototype,\&quot;isPrototypeOf\&quot;))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||\&quot;string\&quot;!=typeof e)return null;\&quot;boolean\&quot;==typeof t&amp;&amp;(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&amp;&amp;[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&amp;&amp;b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&amp;&amp;e.JSON.parse?e.JSON.parse(n):null===n?n:\&quot;string\&quot;==typeof n&amp;&amp;(n=b.trim(n),n&amp;&amp;k.test(n.replace(S,\&quot;@\&quot;).replace(A,\&quot;]\&quot;).replace(E,\&quot;\&quot;)))?Function(\&quot;return \&quot;+n)():(b.error(\&quot;Invalid JSON: \&quot;+n),t)},parseXML:function(n){var r,i;if(!n||\&quot;string\&quot;!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,\&quot;text\/xml\&quot;)):(r=new ActiveXObject(\&quot;Microsoft.XMLDOM\&quot;),r.async=\&quot;false\&quot;,r.loadXML(n))}catch(o){r=t}return r&amp;&amp;r.documentElement&amp;&amp;!r.getElementsByTagName(\&quot;parsererror\&quot;).length||b.error(\&quot;Invalid XML: \&quot;+n),r},noop:function(){},globalEval:function(t){t&amp;&amp;b.trim(t)&amp;&amp;(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,\&quot;ms-\&quot;).replace(D,L)},nodeName:function(e,t){return e.nodeName&amp;&amp;e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a){for(;o&gt;i;i++)if(r=t.apply(e[i],n),r===!1)break}else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a){for(;o&gt;i;i++)if(r=t.call(e[i],i,e[i]),r===!1)break}else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&amp;&amp;!v.call(\&quot;\\ufeff\\u00a0\&quot;)?function(e){return null==e?\&quot;\&quot;:v.call(e)}:function(e){return null==e?\&quot;\&quot;:(e+\&quot;\&quot;).replace(T,\&quot;\&quot;)},makeArray:function(e,t){var n=t||[];return null!=e&amp;&amp;(M(Object(e))?b.merge(n,\&quot;string\&quot;==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0&gt;n?Math.max(0,r+n):n:0;r&gt;n;n++)if(n in t&amp;&amp;t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if(\&quot;number\&quot;==typeof r)for(;r&gt;o;o++)e[i++]=n[o];else while(n[o]!==t)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a&gt;o;o++)r=!!t(e[o],o),n!==r&amp;&amp;i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o&gt;i;i++)r=t(e[i],i,n),null!=r&amp;&amp;(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&amp;&amp;(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return\&quot;string\&quot;==typeof n&amp;&amp;(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if(\&quot;object\&quot;===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&amp;&amp;(o=!0,b.isFunction(i)||(s=!0),c&amp;&amp;(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l&gt;u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),\&quot;complete\&quot;===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener(\&quot;DOMContentLoaded\&quot;,H,!1),e.addEventListener(\&quot;load\&quot;,H,!1);else{o.attachEvent(\&quot;onreadystatechange\&quot;,H),e.attachEvent(\&quot;onload\&quot;,H);var r=!1;try{r=null==e.frameElement&amp;&amp;o.documentElement}catch(i){}r&amp;&amp;r.doScroll&amp;&amp;function a(){if(!b.isReady){try{r.doScroll(\&quot;left\&quot;)}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each(\&quot;Boolean Number String Function Array Date RegExp Object Error\&quot;.split(\&quot; \&quot;),function(e,t){l[\&quot;[object \&quot;+t+\&quot;]\&quot;]=t.toLowerCase()});function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&amp;&amp;t?!0:\&quot;array\&quot;===n||\&quot;function\&quot;!==n&amp;&amp;(0===t||\&quot;number\&quot;==typeof t&amp;&amp;t&gt;0&amp;&amp;t-1 in e)}r=b(o);var _={};function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}b.Callbacks=function(e){e=\&quot;string\&quot;==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&amp;&amp;[],c=function(t){for(r=e.memory&amp;&amp;t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&amp;&amp;o&gt;a;a++)if(u[a].apply(t[0],t[1])===!1&amp;&amp;e.stopOnFalse){r=!1;break}n=!1,u&amp;&amp;(l?l.length&amp;&amp;c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);\&quot;function\&quot;===r?e.unique&amp;&amp;p.has(n)||u.push(n):n&amp;&amp;n.length&amp;&amp;\&quot;string\&quot;!==r&amp;&amp;i(n)})})(arguments),n?o=u.length:r&amp;&amp;(s=t,c(r))}return this},remove:function(){return u&amp;&amp;b.each(arguments,function(e,t){var r;while((r=b.inArray(t,u,r))&gt;-1)u.splice(r,1),n&amp;&amp;(o&gt;=r&amp;&amp;o--,a&gt;=r&amp;&amp;a--)}),this},has:function(e){return e?b.inArray(e,u)&gt;-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&amp;&amp;!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[[\&quot;resolve\&quot;,\&quot;done\&quot;,b.Callbacks(\&quot;once memory\&quot;),\&quot;resolved\&quot;],[\&quot;reject\&quot;,\&quot;fail\&quot;,b.Callbacks(\&quot;once memory\&quot;),\&quot;rejected\&quot;],[\&quot;notify\&quot;,\&quot;progress\&quot;,b.Callbacks(\&quot;memory\&quot;)]],n=\&quot;pending\&quot;,r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&amp;&amp;e[t];i[o[1]](function(){var e=s&amp;&amp;s.apply(this,arguments);e&amp;&amp;b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+\&quot;With\&quot;](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&amp;&amp;a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+\&quot;With\&quot;](this===i?r:this,arguments),this},i[o[0]+\&quot;With\&quot;]=a.fireWith}),r.promise(i),e&amp;&amp;e.call(i,i),i},when:function(e){var t=0,n=h.call(arguments),r=n.length,i=1!==r||e&amp;&amp;b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length&gt;1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,u,l;if(r&gt;1)for(s=Array(r),u=Array(r),l=Array(r);r&gt;t;t++)n[t]&amp;&amp;b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement(\&quot;div\&quot;);if(d.setAttribute(\&quot;className\&quot;,\&quot;t\&quot;),d.innerHTML=\&quot;  &lt;link\/&gt;&lt;table&gt;&lt;\/table&gt;&lt;a href=\'\/a\'&gt;a&lt;\/a&gt;&lt;input type=\'checkbox\'\/&gt;\&quot;,n=d.getElementsByTagName(\&quot;*\&quot;),r=d.getElementsByTagName(\&quot;a\&quot;)[0],!n||!r||!n.length)return{};s=o.createElement(\&quot;select\&quot;),l=s.appendChild(o.createElement(\&quot;option\&quot;)),a=d.getElementsByTagName(\&quot;input\&quot;)[0],r.style.cssText=\&quot;top:1px;float:left;opacity:.5\&quot;,t={getSetAttribute:\&quot;t\&quot;!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName(\&quot;tbody\&quot;).length,htmlSerialize:!!d.getElementsByTagName(\&quot;link\&quot;).length,style:\/top\/.test(r.getAttribute(\&quot;style\&quot;)),hrefNormalized:\&quot;\/a\&quot;===r.getAttribute(\&quot;href\&quot;),opacity:\/^0.5\/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement(\&quot;form\&quot;).enctype,html5Clone:\&quot;&lt;:nav&gt;&lt;\/:nav&gt;\&quot;!==o.createElement(\&quot;nav\&quot;).cloneNode(!0).outerHTML,boxModel:\&quot;CSS1Compat\&quot;===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement(\&quot;input\&quot;),a.setAttribute(\&quot;value\&quot;,\&quot;\&quot;),t.input=\&quot;\&quot;===a.getAttribute(\&quot;value\&quot;),a.value=\&quot;t\&quot;,a.setAttribute(\&quot;type\&quot;,\&quot;radio\&quot;),t.radioValue=\&quot;t\&quot;===a.value,a.setAttribute(\&quot;checked\&quot;,\&quot;t\&quot;),a.setAttribute(\&quot;name\&quot;,\&quot;t\&quot;),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&amp;&amp;(d.attachEvent(\&quot;onclick\&quot;,function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c=\&quot;on\&quot;+f,\&quot;t\&quot;),t[f+\&quot;Bubbles\&quot;]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip=\&quot;content-box\&quot;,d.cloneNode(!0).style.backgroundClip=\&quot;\&quot;,t.clearCloneStyle=\&quot;content-box\&quot;===d.style.backgroundClip,b(function(){var n,r,a,s=\&quot;padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;\&quot;,u=o.getElementsByTagName(\&quot;body\&quot;)[0];u&amp;&amp;(n=o.createElement(\&quot;div\&quot;),n.style.cssText=\&quot;border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px\&quot;,u.appendChild(n).appendChild(d),d.innerHTML=\&quot;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;\/td&gt;&lt;td&gt;t&lt;\/td&gt;&lt;\/tr&gt;&lt;\/table&gt;\&quot;,a=d.getElementsByTagName(\&quot;td\&quot;),a[0].style.cssText=\&quot;padding:0;margin:0;border:0;display:none\&quot;,p=0===a[0].offsetHeight,a[0].style.display=\&quot;\&quot;,a[1].style.display=\&quot;none\&quot;,t.reliableHiddenOffsets=p&amp;&amp;0===a[0].offsetHeight,d.innerHTML=\&quot;\&quot;,d.style.cssText=\&quot;box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;\&quot;,t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&amp;&amp;(t.pixelPosition=\&quot;1%\&quot;!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable=\&quot;4px\&quot;===(e.getComputedStyle(d,null)||{width:\&quot;4px\&quot;}).width,r=d.appendChild(o.createElement(\&quot;div\&quot;)),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width=\&quot;0\&quot;,d.style.width=\&quot;1px\&quot;,t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&amp;&amp;(d.innerHTML=\&quot;\&quot;,d.style.cssText=s+\&quot;width:1px;padding:1px;display:inline;zoom:1\&quot;,t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display=\&quot;block\&quot;,d.innerHTML=\&quot;&lt;div&gt;&lt;\/div&gt;\&quot;,d.firstChild.style.width=\&quot;5px\&quot;,t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&amp;&amp;(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=\/(?:\\{[\\s\\S]*\\}|\\[[\\s\\S]*\\])$\/,B=\/([A-Z])\/g;function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u=\&quot;string\&quot;==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&amp;&amp;s;if(f&amp;&amp;p[f]&amp;&amp;(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),(\&quot;object\&quot;==typeof n||\&quot;function\&quot;==typeof n)&amp;&amp;(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&amp;&amp;(o[b.camelCase(n)]=r),u?(a=o[n],null==a&amp;&amp;(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&amp;&amp;(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(\&quot; \&quot;));for(r=0,i=t.length;i&gt;r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&amp;&amp;(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}b.extend({cache:{},expando:\&quot;jQuery\&quot;+(p+Math.random()).replace(\/\\D\/g,\&quot;\&quot;),noData:{embed:!0,object:\&quot;clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\&quot;,applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&amp;&amp;!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&amp;&amp;1!==e.nodeType&amp;&amp;9!==e.nodeType)return!1;var t=e.nodeName&amp;&amp;b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&amp;&amp;e.getAttribute(\&quot;classid\&quot;)===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&amp;&amp;(s=b.data(o),1===o.nodeType&amp;&amp;!b._data(o,\&quot;parsedAttrs\&quot;))){for(r=o.attributes;r.length&gt;a;a++)i=r[a].name,i.indexOf(\&quot;data-\&quot;)||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,\&quot;parsedAttrs\&quot;,!0)}return s}return\&quot;object\&quot;==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length&gt;1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function W(e,n,r){if(r===t&amp;&amp;1===e.nodeType){var i=\&quot;data-\&quot;+n.replace(B,\&quot;-$1\&quot;).toLowerCase();if(r=e.getAttribute(i),\&quot;string\&quot;==typeof r){try{r=\&quot;true\&quot;===r?!0:\&quot;false\&quot;===r?!1:\&quot;null\&quot;===r?null:+r+\&quot;\&quot;===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if((\&quot;data\&quot;!==t||!b.isEmptyObject(e[t]))&amp;&amp;\&quot;toJSON\&quot;!==t)return!1;return!0}b.extend({queue:function(e,n,r){var i;return e?(n=(n||\&quot;fx\&quot;)+\&quot;queue\&quot;,i=b._data(e,n),r&amp;&amp;(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||\&quot;fx\&quot;;var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};\&quot;inprogress\&quot;===i&amp;&amp;(i=n.shift(),r--),o.cur=i,i&amp;&amp;(\&quot;fx\&quot;===t&amp;&amp;n.unshift(\&quot;inprogress\&quot;),delete o.stop,i.call(e,a,o)),!r&amp;&amp;o&amp;&amp;o.empty.fire()},_queueHooks:function(e,t){var n=t+\&quot;queueHooks\&quot;;return b._data(e,n)||b._data(e,n,{empty:b.Callbacks(\&quot;once memory\&quot;).add(function(){b._removeData(e,t+\&quot;queue\&quot;),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return\&quot;string\&quot;!=typeof e&amp;&amp;(n=e,e=\&quot;fx\&quot;,r--),r&gt;arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),\&quot;fx\&quot;===e&amp;&amp;\&quot;inprogress\&quot;!==t[0]&amp;&amp;b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||\&quot;fx\&quot;,this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||\&quot;fx\&quot;,[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};\&quot;string\&quot;!=typeof e&amp;&amp;(n=e,e=t),e=e||\&quot;fx\&quot;;while(s--)r=b._data(a[s],e+\&quot;queueHooks\&quot;),r&amp;&amp;r.empty&amp;&amp;(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=\/[\\t\\r\\n]\/g,U=\/\\r\/g,V=\/^(?:input|select|textarea|button|object)$\/i,Y=\/^(?:a|area)$\/i,J=\/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$\/i,G=\/^(?:checked|selected)$\/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length&gt;1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length&gt;1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=\&quot;string\&quot;==typeof e&amp;&amp;e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||\&quot;\&quot;).match(w)||[];s&gt;a;a++)if(n=this[a],r=1===n.nodeType&amp;&amp;(n.className?(\&quot; \&quot;+n.className+\&quot; \&quot;).replace(X,\&quot; \&quot;):\&quot; \&quot;)){o=0;while(i=t[o++])0&gt;r.indexOf(\&quot; \&quot;+i+\&quot; \&quot;)&amp;&amp;(r+=i+\&quot; \&quot;);n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||\&quot;string\&quot;==typeof e&amp;&amp;e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||\&quot;\&quot;).match(w)||[];s&gt;a;a++)if(n=this[a],r=1===n.nodeType&amp;&amp;(n.className?(\&quot; \&quot;+n.className+\&quot; \&quot;).replace(X,\&quot; \&quot;):\&quot;\&quot;)){o=0;while(i=t[o++])while(r.indexOf(\&quot; \&quot;+i+\&quot; \&quot;)&gt;=0)r=r.replace(\&quot; \&quot;+i+\&quot; \&quot;,\&quot; \&quot;);n.className=e?b.trim(r):\&quot;\&quot;}return this},toggleClass:function(e,t){var n=typeof e,r=\&quot;boolean\&quot;==typeof t;return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(\&quot;string\&quot;===n){var o,a=0,s=b(this),u=t,l=e.match(w)||[];while(o=l[a++])u=r?u:!s.hasClass(o),s[u?\&quot;addClass\&quot;:\&quot;removeClass\&quot;](o)}else(n===i||\&quot;boolean\&quot;===n)&amp;&amp;(this.className&amp;&amp;b._data(this,\&quot;__className__\&quot;,this.className),this.className=this.className||e===!1?\&quot;\&quot;:b._data(this,\&quot;__className__\&quot;)||\&quot;\&quot;)})},hasClass:function(e){var t=\&quot; \&quot;+e+\&quot; \&quot;,n=0,r=this.length;for(;r&gt;n;n++)if(1===this[n].nodeType&amp;&amp;(\&quot; \&quot;+this[n].className+\&quot; \&quot;).replace(X,\&quot; \&quot;).indexOf(t)&gt;=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];{if(arguments.length)return i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&amp;&amp;(o=i?e.call(this,n,a.val()):e,null==o?o=\&quot;\&quot;:\&quot;number\&quot;==typeof o?o+=\&quot;\&quot;:b.isArray(o)&amp;&amp;(o=b.map(o,function(e){return null==e?\&quot;\&quot;:e+\&quot;\&quot;})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&amp;&amp;\&quot;set\&quot;in r&amp;&amp;r.set(this,o,\&quot;value\&quot;)!==t||(this.value=o))});if(o)return r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&amp;&amp;\&quot;get\&quot;in r&amp;&amp;(n=r.get(o,\&quot;value\&quot;))!==t?n:(n=o.value,\&quot;string\&quot;==typeof n?n.replace(U,\&quot;\&quot;):null==n?\&quot;\&quot;:n)}}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,o=\&quot;select-one\&quot;===e.type||0&gt;i,a=o?null:[],s=o?i+1:r.length,u=0&gt;i?s:o?i:0;for(;s&gt;u;u++)if(n=r[u],!(!n.selected&amp;&amp;u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute(\&quot;disabled\&quot;))||n.parentNode.disabled&amp;&amp;b.nodeName(n.parentNode,\&quot;optgroup\&quot;))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find(\&quot;option\&quot;).each(function(){this.selected=b.inArray(b(this).val(),n)&gt;=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;if(e&amp;&amp;3!==u&amp;&amp;8!==u&amp;&amp;2!==u)return typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&amp;&amp;(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&amp;&amp;a&amp;&amp;\&quot;get\&quot;in o&amp;&amp;null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&amp;&amp;(s=e.getAttribute(n)),null==s?t:s):null!==r?o&amp;&amp;a&amp;&amp;\&quot;set\&quot;in o&amp;&amp;(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+\&quot;\&quot;),r):(b.removeAttr(e,n),t))},removeAttr:function(e,t){var n,r,i=0,o=t&amp;&amp;t.match(w);if(o&amp;&amp;1===e.nodeType)while(n=o[i++])r=b.propFix[n]||n,J.test(n)?!Q&amp;&amp;G.test(n)?e[b.camelCase(\&quot;default-\&quot;+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,\&quot;\&quot;),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&amp;&amp;\&quot;radio\&quot;===t&amp;&amp;b.nodeName(e,\&quot;input\&quot;)){var n=e.value;return e.setAttribute(\&quot;type\&quot;,t),n&amp;&amp;(e.value=n),t}}}},propFix:{tabindex:\&quot;tabIndex\&quot;,readonly:\&quot;readOnly\&quot;,\&quot;for\&quot;:\&quot;htmlFor\&quot;,\&quot;class\&quot;:\&quot;className\&quot;,maxlength:\&quot;maxLength\&quot;,cellspacing:\&quot;cellSpacing\&quot;,cellpadding:\&quot;cellPadding\&quot;,rowspan:\&quot;rowSpan\&quot;,colspan:\&quot;colSpan\&quot;,usemap:\&quot;useMap\&quot;,frameborder:\&quot;frameBorder\&quot;,contenteditable:\&quot;contentEditable\&quot;},prop:function(e,n,r){var i,o,a,s=e.nodeType;if(e&amp;&amp;3!==s&amp;&amp;8!==s&amp;&amp;2!==s)return a=1!==s||!b.isXMLDoc(e),a&amp;&amp;(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&amp;&amp;\&quot;set\&quot;in o&amp;&amp;(i=o.set(e,r,n))!==t?i:e[n]=r:o&amp;&amp;\&quot;get\&quot;in o&amp;&amp;null!==(i=o.get(e,n))?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode(\&quot;tabindex\&quot;);return n&amp;&amp;n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&amp;&amp;e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i=\&quot;boolean\&quot;==typeof r&amp;&amp;e.getAttribute(n),o=\&quot;boolean\&quot;==typeof r?K&amp;&amp;Q?null!=i:G.test(n)?e[b.camelCase(\&quot;default-\&quot;+n)]:!!i:e.getAttributeNode(n);return o&amp;&amp;o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&amp;&amp;Q||!G.test(n)?e.setAttribute(!Q&amp;&amp;b.propFix[n]||n,n):e[b.camelCase(\&quot;default-\&quot;+n)]=e[n]=!0,n}},K&amp;&amp;Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,\&quot;input\&quot;)?e.defaultValue:r&amp;&amp;r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,\&quot;input\&quot;)?(e.defaultValue=n,t):I&amp;&amp;I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&amp;&amp;(\&quot;id\&quot;===n||\&quot;name\&quot;===n||\&quot;coords\&quot;===n?\&quot;\&quot;!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+=\&quot;\&quot;,\&quot;value\&quot;===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,\&quot;\&quot;===t?!1:t,n)}},b.each([\&quot;width\&quot;,\&quot;height\&quot;],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return\&quot;\&quot;===r?(e.setAttribute(n,\&quot;auto\&quot;),r):t}})})),b.support.hrefNormalized||(b.each([\&quot;href\&quot;,\&quot;src\&quot;,\&quot;width\&quot;,\&quot;height\&quot;],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each([\&quot;href\&quot;,\&quot;src\&quot;],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+\&quot;\&quot;}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&amp;&amp;(t.selectedIndex,t.parentNode&amp;&amp;t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype=\&quot;encoding\&quot;),b.support.checkOn||b.each([\&quot;radio\&quot;,\&quot;checkbox\&quot;],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute(\&quot;value\&quot;)?\&quot;on\&quot;:e.value}}}),b.each([\&quot;radio\&quot;,\&quot;checkbox\&quot;],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)&gt;=0:t}})});var Z=\/^(?:input|select|textarea)$\/i,et=\/^key\/,tt=\/^(?:mouse|contextmenu)|click\/,nt=\/^(?:focusinfocus|focusoutblur)$\/,rt=\/^([^.]*)(?:\\.(.+)|)$\/;function it(){return!0}function ot(){return!1}b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){r.handler&amp;&amp;(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&amp;&amp;b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||\&quot;\&quot;).match(w)||[\&quot;\&quot;],l=n.length;while(l--)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||\&quot;\&quot;).split(\&quot;.\&quot;).sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&amp;&amp;b.expr.match.needsContext.test(a),namespace:m.join(\&quot;.\&quot;)},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&amp;&amp;p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&amp;&amp;e.attachEvent(\&quot;on\&quot;+g,f))),p.add&amp;&amp;(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&amp;&amp;b._data(e);if(m&amp;&amp;(c=m.events)){t=(t||\&quot;\&quot;).match(w)||[\&quot;\&quot;],l=t.length;while(l--)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||\&quot;\&quot;).split(\&quot;.\&quot;).sort(),d){p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&amp;&amp;RegExp(\&quot;(^|\\\\.)\&quot;+h.join(\&quot;\\\\.(?:.*\\\\.|)\&quot;)+\&quot;(\\\\.|$)\&quot;),u=o=f.length;while(o--)a=f[o],!i&amp;&amp;g!==a.origType||n&amp;&amp;n.guid!==a.guid||s&amp;&amp;!s.test(a.namespace)||r&amp;&amp;r!==a.selector&amp;&amp;(\&quot;**\&quot;!==r||!a.selector)||(f.splice(o,1),a.selector&amp;&amp;f.delegateCount--,p.remove&amp;&amp;p.remove.call(e,a));u&amp;&amp;!f.length&amp;&amp;(p.teardown&amp;&amp;p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&amp;&amp;(delete m.handle,b._removeData(e,\&quot;events\&quot;))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,\&quot;type\&quot;)?n.type:n,m=y.call(n,\&quot;namespace\&quot;)?n.namespace.split(\&quot;.\&quot;):[];if(l=f=i=i||o,3!==i.nodeType&amp;&amp;8!==i.nodeType&amp;&amp;!nt.test(g+b.event.triggered)&amp;&amp;(g.indexOf(\&quot;.\&quot;)&gt;=0&amp;&amp;(m=g.split(\&quot;.\&quot;),g=m.shift(),m.sort()),u=0&gt;g.indexOf(\&quot;:\&quot;)&amp;&amp;\&quot;on\&quot;+g,n=n[b.expando]?n:new b.Event(g,\&quot;object\&quot;==typeof n&amp;&amp;n),n.isTrigger=!0,n.namespace=m.join(\&quot;.\&quot;),n.namespace_re=n.namespace?RegExp(\&quot;(^|\\\\.)\&quot;+m.join(\&quot;\\\\.(?:.*\\\\.|)\&quot;)+\&quot;(\\\\.|$)\&quot;):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&amp;&amp;!p.noBubble&amp;&amp;!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&amp;&amp;h.push(f.defaultView||f.parentWindow||e)}d=0;while((l=h[d++])&amp;&amp;!n.isPropagationStopped())n.type=d&gt;1?c:p.bindType||g,s=(b._data(l,\&quot;events\&quot;)||{})[n.type]&amp;&amp;b._data(l,\&quot;handle\&quot;),s&amp;&amp;s.apply(l,r),s=u&amp;&amp;l[u],s&amp;&amp;b.acceptData(l)&amp;&amp;s.apply&amp;&amp;s.apply(l,r)===!1&amp;&amp;n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&amp;&amp;p._default.apply(i.ownerDocument,r)!==!1||\&quot;click\&quot;===g&amp;&amp;b.nodeName(i,\&quot;a\&quot;)||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&amp;&amp;(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&amp;&amp;(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,\&quot;events\&quot;)||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){s=b.event.handlers.call(this,e,l),n=0;while((o=s[n++])&amp;&amp;!e.isPropagationStopped()){e.currentTarget=o.elem,a=0;while((i=o.handlers[a++])&amp;&amp;!e.isImmediatePropagationStopped())(!e.namespace_re||e.namespace_re.test(i.namespace))&amp;&amp;(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&amp;&amp;(e.result=r)===!1&amp;&amp;(e.preventDefault(),e.stopPropagation()))}return c.postDispatch&amp;&amp;c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&amp;&amp;l.nodeType&amp;&amp;(!e.button||\&quot;click\&quot;!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&amp;&amp;(l.disabled!==!0||\&quot;click\&quot;!==e.type)){for(o=[],a=0;u&gt;a;a++)i=n[a],r=i.selector+\&quot; \&quot;,o[r]===t&amp;&amp;(o[r]=i.needsContext?b(r,this).index(l)&gt;=0:b.find(r,this,null,[l]).length),o[r]&amp;&amp;o.push(i);o.length&amp;&amp;s.push({elem:l,handlers:o})}return n.length&gt;u&amp;&amp;s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;while(t--)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&amp;&amp;(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:\&quot;altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\&quot;.split(\&quot; \&quot;),fixHooks:{},keyHooks:{props:\&quot;char charCode key keyCode\&quot;.split(\&quot; \&quot;),filter:function(e,t){return null==e.which&amp;&amp;(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:\&quot;button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\&quot;.split(\&quot; \&quot;),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&amp;&amp;null!=n.clientX&amp;&amp;(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&amp;&amp;a.scrollLeft||r&amp;&amp;r.scrollLeft||0)-(a&amp;&amp;a.clientLeft||r&amp;&amp;r.clientLeft||0),e.pageY=n.clientY+(a&amp;&amp;a.scrollTop||r&amp;&amp;r.scrollTop||0)-(a&amp;&amp;a.clientTop||r&amp;&amp;r.clientTop||0)),!e.relatedTarget&amp;&amp;u&amp;&amp;(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&amp;s?1:2&amp;s?3:4&amp;s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,\&quot;input\&quot;)&amp;&amp;\&quot;checkbox\&quot;===this.type&amp;&amp;this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&amp;&amp;this.focus)try{return this.focus(),!1}catch(e){}},delegateType:\&quot;focusin\&quot;},blur:{trigger:function(){return this===o.activeElement&amp;&amp;this.blur?(this.blur(),!1):t},delegateType:\&quot;focusout\&quot;},beforeunload:{postDispatch:function(e){e.result!==t&amp;&amp;(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&amp;&amp;n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&amp;&amp;e.removeEventListener(t,n,!1)}:function(e,t,n){var r=\&quot;on\&quot;+t;e.detachEvent&amp;&amp;(typeof e[r]===i&amp;&amp;(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&amp;&amp;e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&amp;&amp;e.getPreventDefault()?it:ot):this.type=e,n&amp;&amp;b.extend(this,n),this.timeStamp=e&amp;&amp;e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&amp;&amp;(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&amp;&amp;(e.stopPropagation&amp;&amp;e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:\&quot;mouseover\&quot;,mouseleave:\&quot;mouseout\&quot;},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;'],[0,'return(!i||i!==r&amp;&amp;!b.contains(r,i))&amp;&amp;(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,\&quot;form\&quot;)?!1:(b.event.add(this,\&quot;click._submit keypress._submit\&quot;,function(e){var n=e.target,r=b.nodeName(n,\&quot;input\&quot;)||b.nodeName(n,\&quot;button\&quot;)?n.form:t;r&amp;&amp;!b._data(r,\&quot;submitBubbles\&quot;)&amp;&amp;(b.event.add(r,\&quot;submit._submit\&quot;,function(e){e._submit_bubble=!0}),b._data(r,\&quot;submitBubbles\&quot;,!0))}),t)},postDispatch:function(e){e._submit_bubble&amp;&amp;(delete e._submit_bubble,this.parentNode&amp;&amp;!e.isTrigger&amp;&amp;b.event.simulate(\&quot;submit\&quot;,this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,\&quot;form\&quot;)?!1:(b.event.remove(this,\&quot;._submit\&quot;),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?((\&quot;checkbox\&quot;===this.type||\&quot;radio\&quot;===this.type)&amp;&amp;(b.event.add(this,\&quot;propertychange._change\&quot;,function(e){\&quot;checked\&quot;===e.originalEvent.propertyName&amp;&amp;(this._just_changed=!0)}),b.event.add(this,\&quot;click._change\&quot;,function(e){this._just_changed&amp;&amp;!e.isTrigger&amp;&amp;(this._just_changed=!1),b.event.simulate(\&quot;change\&quot;,this,e,!0)})),!1):(b.event.add(this,\&quot;beforeactivate._change\&quot;,function(e){var t=e.target;Z.test(t.nodeName)&amp;&amp;!b._data(t,\&quot;changeBubbles\&quot;)&amp;&amp;(b.event.add(t,\&quot;change._change\&quot;,function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate(\&quot;change\&quot;,this.parentNode,e,!0)}),b._data(t,\&quot;changeBubbles\&quot;,!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||\&quot;radio\&quot;!==n.type&amp;&amp;\&quot;checkbox\&quot;!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,\&quot;._change\&quot;),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:\&quot;focusin\&quot;,blur:\&quot;focusout\&quot;},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&amp;&amp;o.addEventListener(e,r,!0)},teardown:function(){0===--n&amp;&amp;o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if(\&quot;object\&quot;==typeof e){\&quot;string\&quot;!=typeof n&amp;&amp;(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&amp;&amp;null==i?(i=n,r=n=t):null==i&amp;&amp;(\&quot;string\&quot;==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&amp;&amp;(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&amp;&amp;e.preventDefault&amp;&amp;e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+\&quot;.\&quot;+i.namespace:i.origType,i.selector,i.handler),this;if(\&quot;object\&quot;==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||\&quot;function\&quot;==typeof n)&amp;&amp;(r=n,n=t),r===!1&amp;&amp;(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\&quot;**\&quot;):this.off(t,e||\&quot;**\&quot;,n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x=\&quot;sizzle\&quot;+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1&lt;&lt;31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){var t=0,n=this.length;for(;n&gt;t;t++)if(this[t]===e)return t;return-1},_=\&quot;[\\\\x20\\\\t\\\\r\\\\n\\\\f]\&quot;,F=\&quot;(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\&quot;,O=F.replace(\&quot;w\&quot;,\&quot;w#\&quot;),B=\&quot;([*^$|!~]?=)\&quot;,P=\&quot;\\\\[\&quot;+_+\&quot;*(\&quot;+F+\&quot;)\&quot;+_+\&quot;*(?:\&quot;+B+_+\&quot;*(?:([\'\\\&quot;])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|(\&quot;+O+\&quot;)|)|)\&quot;+_+\&quot;*\\\\]\&quot;,R=\&quot;:(\&quot;+F+\&quot;)(?:\\\\((([\'\\\&quot;])((?:\\\\\\\\.|[^\\\\\\\\])*?)\\\\3|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\&quot;+P.replace(3,8)+\&quot;)*)|.*)\\\\)|)\&quot;,W=RegExp(\&quot;^\&quot;+_+\&quot;+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\&quot;+_+\&quot;+$\&quot;,\&quot;g\&quot;),$=RegExp(\&quot;^\&quot;+_+\&quot;*,\&quot;+_+\&quot;*\&quot;),I=RegExp(\&quot;^\&quot;+_+\&quot;*([\\\\x20\\\\t\\\\r\\\\n\\\\f&gt;+~])\&quot;+_+\&quot;*\&quot;),z=RegExp(R),X=RegExp(\&quot;^\&quot;+O+\&quot;$\&quot;),U={ID:RegExp(\&quot;^#(\&quot;+F+\&quot;)\&quot;),CLASS:RegExp(\&quot;^\\\\.(\&quot;+F+\&quot;)\&quot;),NAME:RegExp(\&quot;^\\\\[name=[\'\\\&quot;]?(\&quot;+F+\&quot;)[\'\\\&quot;]?\\\\]\&quot;),TAG:RegExp(\&quot;^(\&quot;+F.replace(\&quot;w\&quot;,\&quot;w*\&quot;)+\&quot;)\&quot;),ATTR:RegExp(\&quot;^\&quot;+P),PSEUDO:RegExp(\&quot;^\&quot;+R),CHILD:RegExp(\&quot;^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\&quot;+_+\&quot;*(even|odd|(([+-]|)(\\\\d*)n|)\&quot;+_+\&quot;*(?:([+-]|)\&quot;+_+\&quot;*(\\\\d+)|))\&quot;+_+\&quot;*\\\\)|)\&quot;,\&quot;i\&quot;),needsContext:RegExp(\&quot;^\&quot;+_+\&quot;*[&gt;+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\&quot;+_+\&quot;*((?:-\\\\d)?\\\\d*)\&quot;+_+\&quot;*\\\\)|)(?=[^-]|$)\&quot;,\&quot;i\&quot;)},V=\/[\\x20\\t\\r\\n\\f]*[+~]\/,Y=\/^[^{]+\\{\\s*\\[native code\/,J=\/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$\/,G=\/^(?:input|select|textarea|button)$\/i,Q=\/^h\\d$\/i,K=\/\'|\\\\\/g,Z=\/\\=[\\x20\\t\\r\\n\\f]*([^\'\&quot;\\]]*)[\\x20\\t\\r\\n\\f]*\\]\/g,et=\/\\\\([\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|.)\/g,tt=function(e,t){var n=\&quot;0x\&quot;+t-65536;return n!==n?t:0&gt;n?String.fromCharCode(n+65536):String.fromCharCode(55296|n&gt;&gt;10,56320|1023&amp;n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}function rt(e){return Y.test(e+\&quot;\&quot;)}function it(){var e,t=[];return e=function(n,r){return t.push(n+=\&quot; \&quot;)&gt;i.cacheLength&amp;&amp;delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement(\&quot;div\&quot;);try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&amp;&amp;c(t),t=t||p,n=n||[],!e||\&quot;string\&quot;!=typeof e)return n;if(1!==(s=t.nodeType)&amp;&amp;9!==s)return[];if(!d&amp;&amp;!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&amp;&amp;(o=t.ownerDocument.getElementById(a))&amp;&amp;y(t,o)&amp;&amp;o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&amp;&amp;T.getByClassName&amp;&amp;t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&amp;&amp;!h.test(e)){if(f=!0,g=x,m=t,v=9===s&amp;&amp;e,1===s&amp;&amp;\&quot;object\&quot;!==t.nodeName.toLowerCase()){l=ft(e),(f=t.getAttribute(\&quot;id\&quot;))?g=f.replace(K,\&quot;\\\\$&amp;\&quot;):t.setAttribute(\&quot;id\&quot;,g),g=\&quot;[id=\'\&quot;+g+\&quot;\'] \&quot;,u=l.length;while(u--)l[u]=g+dt(l[u]);m=V.test(e)&amp;&amp;t.parentNode||t,v=l.join(\&quot;,\&quot;)}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute(\&quot;id\&quot;)}}}return wt(e.replace(W,\&quot;$1\&quot;),t,n,r)}a=st.isXML=function(e){var t=e&amp;&amp;(e.ownerDocument||e).documentElement;return t?\&quot;HTML\&quot;!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&amp;&amp;9===n.nodeType&amp;&amp;n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment(\&quot;\&quot;)),!e.getElementsByTagName(\&quot;*\&quot;).length}),T.attributes=at(function(e){e.innerHTML=\&quot;&lt;select&gt;&lt;\/select&gt;\&quot;;var t=typeof e.lastChild.getAttribute(\&quot;multiple\&quot;);return\&quot;boolean\&quot;!==t&amp;&amp;\&quot;string\&quot;!==t}),T.getByClassName=at(function(e){return e.innerHTML=\&quot;&lt;div class=\'hidden e\'&gt;&lt;\/div&gt;&lt;div class=\'hidden\'&gt;&lt;\/div&gt;\&quot;,e.getElementsByClassName&amp;&amp;e.getElementsByClassName(\&quot;e\&quot;).length?(e.lastChild.className=\&quot;e\&quot;,2===e.getElementsByClassName(\&quot;e\&quot;).length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML=\&quot;&lt;a name=\'\&quot;+x+\&quot;\'&gt;&lt;\/a&gt;&lt;div name=\'\&quot;+x+\&quot;\'&gt;&lt;\/div&gt;\&quot;,f.insertBefore(e,f.firstChild);var t=n.getElementsByName&amp;&amp;n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML=\&quot;&lt;a href=\'#\'&gt;&lt;\/a&gt;\&quot;,e.firstChild&amp;&amp;typeof e.firstChild.getAttribute!==A&amp;&amp;\&quot;#\&quot;===e.firstChild.getAttribute(\&quot;href\&quot;)})?{}:{href:function(e){return e.getAttribute(\&quot;href\&quot;,2)},type:function(e){return e.getAttribute(\&quot;type\&quot;)}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&amp;&amp;!d){var n=t.getElementById(e);return n&amp;&amp;n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute(\&quot;id\&quot;)===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&amp;&amp;!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&amp;&amp;r.getAttributeNode(\&quot;id\&quot;).value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&amp;&amp;e.getAttributeNode(\&quot;id\&quot;);return n&amp;&amp;n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if(\&quot;*\&quot;===e){while(n=o[i++])1===n.nodeType&amp;&amp;r.push(n);return r}return o},i.find.NAME=T.getByName&amp;&amp;function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&amp;&amp;function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[\&quot;:focus\&quot;],(T.qsa=rt(n.querySelectorAll))&amp;&amp;(at(function(e){e.innerHTML=\&quot;&lt;select&gt;&lt;option selected=\'\'&gt;&lt;\/option&gt;&lt;\/select&gt;\&quot;,e.querySelectorAll(\&quot;[selected]\&quot;).length||h.push(\&quot;\\\\[\&quot;+_+\&quot;*(?:checked|disabled|ismap|multiple|readonly|selected|value)\&quot;),e.querySelectorAll(\&quot;:checked\&quot;).length||h.push(\&quot;:checked\&quot;)}),at(function(e){e.innerHTML=\&quot;&lt;input type=\'hidden\' i=\'\'\/&gt;\&quot;,e.querySelectorAll(\&quot;[i^=\'\']\&quot;).length&amp;&amp;h.push(\&quot;[*^$]=\&quot;+_+\&quot;*(?:\\\&quot;\\\&quot;|\'\')\&quot;),e.querySelectorAll(\&quot;:enabled\&quot;).length||h.push(\&quot;:enabled\&quot;,\&quot;:disabled\&quot;),e.querySelectorAll(\&quot;*,:x\&quot;),h.push(\&quot;,.*:\&quot;)})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&amp;&amp;at(function(e){T.disconnectedMatch=m.call(e,\&quot;div\&quot;),m.call(e,\&quot;[s!=\'\']:x\&quot;),g.push(\&quot;!=\&quot;,R)}),h=RegExp(h.join(\&quot;|\&quot;)),g=RegExp(g.join(\&quot;|\&quot;)),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&amp;&amp;t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&amp;&amp;16&amp;e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&amp;&amp;e.compareDocumentPosition&amp;&amp;e.compareDocumentPosition(t))?1&amp;r||e.parentNode&amp;&amp;11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&amp;r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);r=e;while(r=r.parentNode)s.unshift(r);r=t;while(r=r.parentNode)l.unshift(r);while(s[i]===l[i])i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&amp;&amp;c(e),t=t.replace(Z,\&quot;=\'$1\']\&quot;),!(!T.matchesSelector||d||g&amp;&amp;g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&amp;&amp;11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length&gt;0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&amp;&amp;c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&amp;&amp;c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&amp;&amp;e[t]===!0?t:n&amp;&amp;n.specified?n.value:null},st.error=function(e){throw Error(\&quot;Syntax error, unrecognized expression: \&quot;+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&amp;&amp;(i=n.push(r));while(i--)e.splice(n[i],1)}return e};function ut(e,t){var n=t&amp;&amp;e,r=n&amp;&amp;(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return\&quot;input\&quot;===n&amp;&amp;t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return(\&quot;input\&quot;===n||\&quot;button\&quot;===n)&amp;&amp;t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&amp;&amp;(n[i]=!(r[i]=n[i]))})})}o=st.getText=function(e){var t,n=\&quot;\&quot;,r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\&quot;string\&quot;==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{\&quot;&gt;\&quot;:{dir:\&quot;parentNode\&quot;,first:!0},\&quot; \&quot;:{dir:\&quot;parentNode\&quot;},\&quot;+\&quot;:{dir:\&quot;previousSibling\&quot;,first:!0},\&quot;~\&quot;:{dir:\&quot;previousSibling\&quot;}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||\&quot;\&quot;).replace(et,tt),\&quot;~=\&quot;===e[2]&amp;&amp;(e[3]=\&quot; \&quot;+e[3]+\&quot; \&quot;),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\&quot;nth\&quot;===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\&quot;even\&quot;===e[3]||\&quot;odd\&quot;===e[3])),e[5]=+(e[7]+e[8]||\&quot;odd\&quot;===e[3])):e[3]&amp;&amp;st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&amp;&amp;e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&amp;&amp;z.test(n)&amp;&amp;(t=ft(n,!0))&amp;&amp;(t=n.indexOf(\&quot;)\&quot;,n.length-t)-n.length)&amp;&amp;(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return\&quot;*\&quot;===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&amp;&amp;t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+\&quot; \&quot;];return t||(t=RegExp(\&quot;(^|\&quot;+_+\&quot;)\&quot;+e+\&quot;(\&quot;+_+\&quot;|$)\&quot;))&amp;&amp;k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&amp;&amp;e.getAttribute(\&quot;class\&quot;)||\&quot;\&quot;)})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?\&quot;!=\&quot;===t:t?(i+=\&quot;\&quot;,\&quot;=\&quot;===t?i===n:\&quot;!=\&quot;===t?i!==n:\&quot;^=\&quot;===t?n&amp;&amp;0===i.indexOf(n):\&quot;*=\&quot;===t?n&amp;&amp;i.indexOf(n)&gt;-1:\&quot;$=\&quot;===t?n&amp;&amp;i.slice(-n.length)===n:\&quot;~=\&quot;===t?(\&quot; \&quot;+i+\&quot; \&quot;).indexOf(n)&gt;-1:\&quot;|=\&quot;===t?i===n||i.slice(0,n.length+1)===n+\&quot;-\&quot;:!1):!0}},CHILD:function(e,t,n,r,i){var o=\&quot;nth\&quot;!==e.slice(0,3),a=\&quot;last\&quot;!==e.slice(-4),s=\&quot;of-type\&quot;===t;return 1===r&amp;&amp;0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?\&quot;nextSibling\&quot;:\&quot;previousSibling\&quot;,m=t.parentNode,y=s&amp;&amp;t.nodeName.toLowerCase(),v=!u&amp;&amp;!s;if(m){if(o){while(g){p=t;while(p=p[g])if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g=\&quot;only\&quot;===e&amp;&amp;!h&amp;&amp;\&quot;nextSibling\&quot;}return!0}if(h=[a?m.firstChild:m.lastChild],a&amp;&amp;v){c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&amp;&amp;l[1],f=l[0]===N&amp;&amp;l[2],p=d&amp;&amp;m.childNodes[d];while(p=++d&amp;&amp;p&amp;&amp;p[g]||(f=d=0)||h.pop())if(1===p.nodeType&amp;&amp;++f&amp;&amp;p===t){c[e]=[N,d,f];break}}else if(v&amp;&amp;(l=(t[x]||(t[x]={}))[e])&amp;&amp;l[0]===N)f=l[1];else while(p=++d&amp;&amp;p&amp;&amp;p[g]||(f=d=0)||h.pop())if((s?p.nodeName.toLowerCase()===y:1===p.nodeType)&amp;&amp;++f&amp;&amp;(v&amp;&amp;((p[x]||(p[x]={}))[e]=[N,f]),p===t))break;return f-=i,f===r||0===f%r&amp;&amp;f\/r&gt;=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error(\&quot;unsupported pseudo: \&quot;+e);return r[x]?r(t):r.length&gt;1?(n=[e,e,\&quot;\&quot;,t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){var i,o=r(e,t),a=o.length;while(a--)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,\&quot;$1\&quot;));return r[x]?ot(function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&amp;&amp;(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length&gt;0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)&gt;-1}}),lang:ot(function(e){return X.test(e||\&quot;\&quot;)||st.error(\&quot;unsupported lang: \&quot;+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute(\&quot;xml:lang\&quot;)||t.getAttribute(\&quot;lang\&quot;):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+\&quot;-\&quot;);while((t=t.parentNode)&amp;&amp;1===t.nodeType);return!1}}),target:function(t){var n=e.location&amp;&amp;e.location.hash;return n&amp;&amp;n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&amp;&amp;(!p.hasFocus||p.hasFocus())&amp;&amp;!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return\&quot;input\&quot;===t&amp;&amp;!!e.checked||\&quot;option\&quot;===t&amp;&amp;!!e.selected},selected:function(e){return e.parentNode&amp;&amp;e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName&gt;\&quot;@\&quot;||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\&quot;input\&quot;===t&amp;&amp;\&quot;button\&quot;===e.type||\&quot;button\&quot;===t},text:function(e){var t;return\&quot;input\&quot;===e.nodeName.toLowerCase()&amp;&amp;\&quot;text\&quot;===e.type&amp;&amp;(null==(t=e.getAttribute(\&quot;type\&quot;))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0&gt;n?n+t:n]}),even:pt(function(e,t){var n=0;for(;t&gt;n;n+=2)e.push(n);return e}),odd:pt(function(e,t){var n=1;for(;t&gt;n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){var r=0&gt;n?n+t:n;for(;--r&gt;=0;)e.push(r);return e}),gt:pt(function(e,t,n){var r=0&gt;n?n+t:n;for(;t&gt;++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);function ft(e,t){var n,r,o,a,s,u,l,c=E[e+\&quot; \&quot;];if(c)return t?0:c.slice(0);s=e,u=[],l=i.preFilter;while(s){(!n||(r=$.exec(s)))&amp;&amp;(r&amp;&amp;(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&amp;&amp;(n=r.shift(),o.push({value:n,type:r[0].replace(W,\&quot; \&quot;)}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&amp;&amp;!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){var t=0,n=e.length,r=\&quot;\&quot;;for(;n&gt;t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&amp;&amp;\&quot;parentNode\&quot;===i,a=C++;return t.first?function(t,n,r){while(t=t[i])if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+\&quot; \&quot;+a;if(s){while(t=t[i])if((1===t.nodeType||o)&amp;&amp;e(t,n,s))return!0}else while(t=t[i])if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&amp;&amp;l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length&gt;1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var o,a=[],s=0,u=e.length,l=null!=t;for(;u&gt;s;s++)(o=e[s])&amp;&amp;(!n||n(o,r,i))&amp;&amp;(a.push(o),l&amp;&amp;t.push(s));return a}function yt(e,t,n,r,i,o){return r&amp;&amp;!r[x]&amp;&amp;(r=yt(r)),i&amp;&amp;!i[x]&amp;&amp;(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||\&quot;*\&quot;,s.nodeType?[s]:s,[]),m=!e||!o&amp;&amp;t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&amp;&amp;n(m,y,s,u),r){l=mt(y,d),r(l,[],s,u),c=l.length;while(c--)(p=l[c])&amp;&amp;(y[d[c]]=!(m[d[c]]=p))}if(o){if(i||e){if(i){l=[],c=y.length;while(c--)(p=y[c])&amp;&amp;l.push(m[c]=p);i(null,y=[],l,u)}c=y.length;while(c--)(p=y[c])&amp;&amp;(l=i?M.call(o,p):f[c])&gt;-1&amp;&amp;(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[\&quot; \&quot;],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)&gt;-1},s,!0),f=[function(e,n,r){return!a&amp;&amp;(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];for(;o&gt;u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o&gt;r;r++)if(i.relative[e[r].type])break;return yt(u&gt;1&amp;&amp;gt(f),u&gt;1&amp;&amp;dt(e.slice(0,u-1)).replace(W,\&quot;$1\&quot;),n,r&gt;u&amp;&amp;vt(e.slice(u,r)),o&gt;r&amp;&amp;vt(e=e.slice(r)),o&gt;r&amp;&amp;dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length&gt;0,a=e.length&gt;0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b=\&quot;0\&quot;,x=s&amp;&amp;[],w=null!=d,T=l,C=s||a&amp;&amp;i.find.TAG(\&quot;*\&quot;,d&amp;&amp;u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&amp;&amp;(l=u!==p&amp;&amp;u,r=n);null!=(h=C[b]);b++){if(a&amp;&amp;h){g=0;while(m=e[g++])if(m(h,u,c)){f.push(h);break}w&amp;&amp;(N=k,r=++n)}o&amp;&amp;((h=!m&amp;&amp;h)&amp;&amp;v--,s&amp;&amp;x.push(h))}if(v+=b,o&amp;&amp;b!==v){g=0;while(m=t[g++])m(x,y,u,c);if(s){if(v&gt;0)while(b--)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&amp;&amp;!s&amp;&amp;y.length&gt;0&amp;&amp;v+t.length&gt;1&amp;&amp;st.uniqueSort(f)}return w&amp;&amp;(N=k,l=T),x};return o?ot(s):s}s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+\&quot; \&quot;];if(!o){t||(t=ft(e)),n=t.length;while(n--)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o};function xt(e,t,n){var r=0,i=t.length;for(;i&gt;r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&amp;&amp;1===p.length){if(a=p[0]=p[0].slice(0),a.length&gt;2&amp;&amp;\&quot;ID\&quot;===(u=a[0]).type&amp;&amp;9===t.nodeType&amp;&amp;!d&amp;&amp;i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}o=U.needsContext.test(e)?0:a.length;while(o--){if(u=a[o],i.relative[l=u.type])break;if((c=i.find[l])&amp;&amp;(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&amp;&amp;t.parentNode||t))){if(a.splice(o,1),e=r.length&amp;&amp;dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}}return s(e,p)(r,t,d,n,V.test(e)),n}i.pseudos.nth=i.pseudos.eq;function Tt(){}i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[\&quot;:\&quot;]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=\/Until$\/,st=\/^(?:parents|prev(?:Until|All))\/,ut=\/^.[^:#\\[\\.,]*$\/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if(\&quot;string\&quot;!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i&gt;t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i&gt;t;t++)b.find(e,this[t],n);return n=this.pushStack(i&gt;1?b.unique(n):n),n.selector=(this.selector?this.selector+\&quot; \&quot;:\&quot;\&quot;)+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r&gt;t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&amp;&amp;(\&quot;string\&quot;==typeof e?lt.test(e)?b(e,this.context).index(this[0])&gt;=0:b.filter(e,this).length&gt;0:this.filter(e).length&gt;0)},closest:function(e,t){var n,r=0,i=this.length,o=[],a=lt.test(e)||\&quot;string\&quot;!=typeof e?b(e,t||this.context):0;for(;i&gt;r;r++){n=this[r];while(n&amp;&amp;n.ownerDocument&amp;&amp;n!==t&amp;&amp;11!==n.nodeType){if(a?a.index(n)&gt;-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}}return this.pushStack(o.length&gt;1?b.unique(o):o)},index:function(e){return e?\&quot;string\&quot;==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&amp;&amp;this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=\&quot;string\&quot;==typeof e?b(e,t):b.makeArray(e&amp;&amp;e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack;function pt(e,t){do e=e[t];while(e&amp;&amp;1!==e.nodeType);return e}b.each({parent:function(e){var t=e.parentNode;return t&amp;&amp;11!==t.nodeType?t:null},parents:function(e){return b.dir(e,\&quot;parentNode\&quot;)},parentsUntil:function(e,t,n){return b.dir(e,\&quot;parentNode\&quot;,n)},next:function(e){return pt(e,\&quot;nextSibling\&quot;)},prev:function(e){return pt(e,\&quot;previousSibling\&quot;)},nextAll:function(e){return b.dir(e,\&quot;nextSibling\&quot;)},prevAll:function(e){return b.dir(e,\&quot;previousSibling\&quot;)},nextUntil:function(e,t,n){return b.dir(e,\&quot;nextSibling\&quot;,n)},prevUntil:function(e,t,n){return b.dir(e,\&quot;previousSibling\&quot;,n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,\&quot;iframe\&quot;)?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&amp;&amp;\&quot;string\&quot;==typeof r&amp;&amp;(i=b.filter(r,i)),i=this.length&gt;1&amp;&amp;!ct[e]?b.unique(i):i,this.length&gt;1&amp;&amp;st.test(e)&amp;&amp;(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&amp;&amp;(e=\&quot;:not(\&quot;+e+\&quot;)\&quot;),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],o=e[n];while(o&amp;&amp;9!==o.nodeType&amp;&amp;(r===t||1!==o.nodeType||!b(o).is(r)))1===o.nodeType&amp;&amp;i.push(o),o=o[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)1===e.nodeType&amp;&amp;e!==t&amp;&amp;n.push(e);return n}});function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if(\&quot;string\&quot;==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)&gt;=0===n})}function dt(e){var t=ht.split(\&quot;|\&quot;),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}var ht=\&quot;abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\&quot;,gt=\/ jQuery\\d+=\&quot;(?:null|\\d+)\&quot;\/g,mt=RegExp(\&quot;&lt;(?:\&quot;+ht+\&quot;)[\\\\s\/&gt;]\&quot;,\&quot;i\&quot;),yt=\/^\\s+\/,vt=\/&lt;(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^&gt;]*)\\\/&gt;\/gi,bt=\/&lt;([\\w:]+)\/,xt=\/&lt;tbody\/i,wt=\/&lt;|&amp;#?\\w+;\/,Tt=\/&lt;(?:script|style|link)\/i,Nt=\/^(?:checkbox|radio)$\/i,Ct=\/checked\\s*(?:[^=]|=\\s*.checked.)\/i,kt=\/^$|\\\/(?:java|ecma)script\/i,Et=\/^true\\\/(.*)\/,St=\/^\\s*&lt;!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)&gt;\\s*$\/g,At={option:[1,\&quot;&lt;select multiple=\'multiple\'&gt;\&quot;,\&quot;&lt;\/select&gt;\&quot;],legend:[1,\&quot;&lt;fieldset&gt;\&quot;,\&quot;&lt;\/fieldset&gt;\&quot;],area:[1,\&quot;&lt;map&gt;\&quot;,\&quot;&lt;\/map&gt;\&quot;],param:[1,\&quot;&lt;object&gt;\&quot;,\&quot;&lt;\/object&gt;\&quot;],thead:[1,\&quot;&lt;table&gt;\&quot;,\&quot;&lt;\/table&gt;\&quot;],tr:[2,\&quot;&lt;table&gt;&lt;tbody&gt;\&quot;,\&quot;&lt;\/tbody&gt;&lt;\/table&gt;\&quot;],col:[2,\&quot;&lt;table&gt;&lt;tbody&gt;&lt;\/tbody&gt;&lt;colgroup&gt;\&quot;,\&quot;&lt;\/colgroup&gt;&lt;\/table&gt;\&quot;],td:[3,\&quot;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;\&quot;,\&quot;&lt;\/tr&gt;&lt;\/tbody&gt;&lt;\/table&gt;\&quot;],_default:b.support.htmlSerialize?[0,\&quot;\&quot;,\&quot;\&quot;]:[1,\&quot;X&lt;div&gt;\&quot;,\&quot;&lt;\/div&gt;\&quot;]},jt=dt(o),Dt=jt.appendChild(o.createElement(\&quot;div\&quot;));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&amp;&amp;this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&amp;&amp;t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&amp;&amp;1===e.firstChild.nodeType)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,\&quot;body\&quot;)||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&amp;&amp;this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&amp;&amp;this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&amp;&amp;this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&amp;&amp;this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length&gt;0)&amp;&amp;(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&amp;&amp;(t&amp;&amp;b.contains(n.ownerDocument,n)&amp;&amp;Mt(Ot(n,\&quot;script\&quot;)),n.parentNode.removeChild(n)));return this},empty:function(){var e,t=0;for(;null!=(e=this[t]);t++){1===e.nodeType&amp;&amp;b.cleanData(Ot(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&amp;&amp;b.nodeName(e,\&quot;select\&quot;)&amp;&amp;(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,\&quot;\&quot;):t;if(!(\&quot;string\&quot;!=typeof e||Tt.test(e)||!b.support.htmlSerialize&amp;&amp;mt.test(e)||!b.support.leadingWhitespace&amp;&amp;yt.test(e)||At[(bt.exec(e)||[\&quot;\&quot;,\&quot;\&quot;])[1].toLowerCase()])){e=e.replace(vt,\&quot;&lt;$1&gt;&lt;\/$2&gt;\&quot;);try{for(;i&gt;r;r++)n=this[r]||{},1===n.nodeType&amp;&amp;(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&amp;&amp;this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||\&quot;string\&quot;==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&amp;&amp;(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1&gt;=p||\&quot;string\&quot;!=typeof g||b.support.checkClone)&amp;&amp;Ct.test(g))return this.each(function(i){var o=d.eq(i);m&amp;&amp;(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&amp;&amp;(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&amp;&amp;(l=i),i)){for(n=n&amp;&amp;b.nodeName(i,\&quot;tr\&quot;),s=b.map(Ot(l,\&quot;script\&quot;),Ht),a=s.length;p&gt;c;c++)o=l,c!==h&amp;&amp;(o=b.clone(o,!0,!0),a&amp;&amp;b.merge(s,Ot(o,\&quot;script\&quot;))),r.call(n&amp;&amp;b.nodeName(this[c],\&quot;table\&quot;)?Lt(this[c],\&quot;tbody\&quot;):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a&gt;c;c++)o=s[c],kt.test(o.type||\&quot;\&quot;)&amp;&amp;!b._data(o,\&quot;globalEval\&quot;)&amp;&amp;b.contains(u,o)&amp;&amp;(o.src?b.ajax({url:o.src,type:\&quot;GET\&quot;,dataType:\&quot;script\&quot;,async:!1,global:!1,\&quot;throws\&quot;:!0}):b.globalEval((o.text||o.textContent||o.innerHTML||\&quot;\&quot;).replace(St,\&quot;\&quot;)));l=i=null}return this}});function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode(\&quot;type\&quot;);return e.type=(t&amp;&amp;t.specified)+\&quot;\/\&quot;+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute(\&quot;type\&quot;),e}function Mt(e,t){var n,r=0;for(;null!=(n=e[r]);r++)b._data(n,\&quot;globalEval\&quot;,!t||b._data(t[r],\&quot;globalEval\&quot;))}function _t(e,t){if(1===t.nodeType&amp;&amp;b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i&gt;r;r++)b.event.add(t,n,s[n][r])}a.data&amp;&amp;(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&amp;&amp;t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}\&quot;script\&quot;===n&amp;&amp;t.text!==e.text?(Ht(t).text=e.text,qt(t)):\&quot;object\&quot;===n?(t.parentNode&amp;&amp;(t.outerHTML=e.outerHTML),b.support.html5Clone&amp;&amp;e.innerHTML&amp;&amp;!b.trim(t.innerHTML)&amp;&amp;(t.innerHTML=e.innerHTML)):\&quot;input\&quot;===n&amp;&amp;Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&amp;&amp;(t.value=e.value)):\&quot;option\&quot;===n?t.defaultSelected=t.selected=e.defaultSelected:(\&quot;input\&quot;===n||\&quot;textarea\&quot;===n)&amp;&amp;(t.defaultValue=e.defaultValue)}}b.each({appendTo:\&quot;append\&quot;,prependTo:\&quot;prepend\&quot;,insertBefore:\&quot;before\&quot;,insertAfter:\&quot;after\&quot;,replaceAll:\&quot;replaceWith\&quot;},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],o=b(e),a=o.length-1;for(;a&gt;=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}});function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||\&quot;*\&quot;):typeof e.querySelectorAll!==i?e.querySelectorAll(n||\&quot;*\&quot;):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&amp;&amp;b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&amp;&amp;(e.defaultChecked=e.checked)}b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test(\&quot;&lt;\&quot;+e.nodeName+\&quot;&gt;\&quot;)?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&amp;&amp;b.support.noCloneChecked||1!==e.nodeType&amp;&amp;11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&amp;&amp;Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,\&quot;script\&quot;),r.length&gt;0&amp;&amp;Mt(r,!u&amp;&amp;Ot(e,\&quot;script\&quot;)),r=s=i=null,o},buildFragment:function(e,t,n,r){var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;for(;p&gt;h;h++)if(o=e[h],o||0===o)if(\&quot;object\&quot;===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){s=s||f.appendChild(t.createElement(\&quot;div\&quot;)),u=(bt.exec(o)||[\&quot;\&quot;,\&quot;\&quot;])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,\&quot;&lt;$1&gt;&lt;\/$2&gt;\&quot;)+c[2],i=c[0];while(i--)s=s.lastChild;if(!b.support.leadingWhitespace&amp;&amp;yt.test(o)&amp;&amp;d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody){o=\&quot;table\&quot;!==u||xt.test(o)?\&quot;&lt;table&gt;\&quot;!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&amp;&amp;o.childNodes.length;while(i--)b.nodeName(l=o.childNodes[i],\&quot;tbody\&quot;)&amp;&amp;!l.childNodes.length&amp;&amp;o.removeChild(l)'],[0,'}b.merge(d,s.childNodes),s.textContent=\&quot;\&quot;;while(s.firstChild)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));s&amp;&amp;f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,\&quot;input\&quot;),Bt),h=0;while(o=d[h++])if((!r||-1===b.inArray(o,r))&amp;&amp;(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),\&quot;script\&quot;),a&amp;&amp;Mt(s),n)){i=0;while(o=s[i++])kt.test(o.type||\&quot;\&quot;)&amp;&amp;n.push(o)}return s=null,f},cleanData:function(e,t){var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;for(;null!=(n=e[s]);s++)if((t||b.acceptData(n))&amp;&amp;(o=n[u],a=o&amp;&amp;l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&amp;&amp;(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=\/alpha\\([^)]*\\)\/i,It=\/opacity\\s*=\\s*([^)]*)\/,zt=\/^(top|right|bottom|left)$\/,Xt=\/^(none|table(?!-c[ea]).+)\/,Ut=\/^margin\/,Vt=RegExp(\&quot;^(\&quot;+x+\&quot;)(.*)$\&quot;,\&quot;i\&quot;),Yt=RegExp(\&quot;^(\&quot;+x+\&quot;)(?!px)[a-z%]+$\&quot;,\&quot;i\&quot;),Jt=RegExp(\&quot;^([+-])=(\&quot;+x+\&quot;)\&quot;,\&quot;i\&quot;),Gt={BODY:\&quot;block\&quot;},Qt={position:\&quot;absolute\&quot;,visibility:\&quot;hidden\&quot;,display:\&quot;block\&quot;},Kt={letterSpacing:0,fontWeight:400},Zt=[\&quot;Top\&quot;,\&quot;Right\&quot;,\&quot;Bottom\&quot;,\&quot;Left\&quot;],en=[\&quot;Webkit\&quot;,\&quot;O\&quot;,\&quot;Moz\&quot;,\&quot;ms\&quot;];function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,\&quot;none\&quot;===b.css(e,\&quot;display\&quot;)||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,o=[],a=0,s=e.length;for(;s&gt;a;a++)r=e[a],r.style&amp;&amp;(o[a]=b._data(r,\&quot;olddisplay\&quot;),n=r.style.display,t?(o[a]||\&quot;none\&quot;!==n||(r.style.display=\&quot;\&quot;),\&quot;\&quot;===r.style.display&amp;&amp;nn(r)&amp;&amp;(o[a]=b._data(r,\&quot;olddisplay\&quot;,un(r.nodeName)))):o[a]||(i=nn(r),(n&amp;&amp;\&quot;none\&quot;!==n||!i)&amp;&amp;b._data(r,\&quot;olddisplay\&quot;,i?n:b.css(r,\&quot;display\&quot;))));for(a=0;s&gt;a;a++)r=e[a],r.style&amp;&amp;(t&amp;&amp;\&quot;none\&quot;!==r.style.display&amp;&amp;\&quot;\&quot;!==r.style.display||(r.style.display=t?o[a]||\&quot;\&quot;:\&quot;none\&quot;));return e}b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i&gt;s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length&gt;1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t=\&quot;boolean\&quot;==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,\&quot;opacity\&quot;);return\&quot;\&quot;===n?\&quot;1\&quot;:n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\&quot;float\&quot;:b.support.cssFloat?\&quot;cssFloat\&quot;:\&quot;styleFloat\&quot;},style:function(e,n,r,i){if(e&amp;&amp;3!==e.nodeType&amp;&amp;8!==e.nodeType&amp;&amp;e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&amp;&amp;\&quot;get\&quot;in s&amp;&amp;(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,\&quot;string\&quot;===a&amp;&amp;(o=Jt.exec(r))&amp;&amp;(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a=\&quot;number\&quot;),!(null==r||\&quot;number\&quot;===a&amp;&amp;isNaN(r)||(\&quot;number\&quot;!==a||b.cssNumber[u]||(r+=\&quot;px\&quot;),b.support.clearCloneStyle||\&quot;\&quot;!==r||0!==n.indexOf(\&quot;background\&quot;)||(l[n]=\&quot;inherit\&quot;),s&amp;&amp;\&quot;set\&quot;in s&amp;&amp;(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&amp;&amp;\&quot;get\&quot;in s&amp;&amp;(a=s.get(e,!0,r)),a===t&amp;&amp;(a=Wt(e,n,i)),\&quot;normal\&quot;===a&amp;&amp;n in Kt&amp;&amp;(a=Kt[n]),\&quot;\&quot;===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&amp;&amp;(\&quot;\&quot;!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&amp;&amp;Ut.test(n)&amp;&amp;(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&amp;&amp;(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&amp;&amp;l&amp;&amp;l[n]&amp;&amp;(u=l[n]),Yt.test(u)&amp;&amp;!zt.test(n)&amp;&amp;(i=l.left,o=e.runtimeStyle,a=o&amp;&amp;o.left,a&amp;&amp;(o.left=e.currentStyle.left),l.left=\&quot;fontSize\&quot;===n?\&quot;1em\&quot;:u,u=l.pixelLeft+\&quot;px\&quot;,l.left=i,a&amp;&amp;(o.left=a)),\&quot;\&quot;===u?\&quot;auto\&quot;:u});function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||\&quot;px\&quot;):t}function an(e,t,n,r,i){var o=n===(r?\&quot;border\&quot;:\&quot;content\&quot;)?4:\&quot;width\&quot;===t?1:0,a=0;for(;4&gt;o;o+=2)\&quot;margin\&quot;===n&amp;&amp;(a+=b.css(e,n+Zt[o],!0,i)),r?(\&quot;content\&quot;===n&amp;&amp;(a-=b.css(e,\&quot;padding\&quot;+Zt[o],!0,i)),\&quot;margin\&quot;!==n&amp;&amp;(a-=b.css(e,\&quot;border\&quot;+Zt[o]+\&quot;Width\&quot;,!0,i))):(a+=b.css(e,\&quot;padding\&quot;+Zt[o],!0,i),\&quot;padding\&quot;!==n&amp;&amp;(a+=b.css(e,\&quot;border\&quot;+Zt[o]+\&quot;Width\&quot;,!0,i)));return a}function sn(e,t,n){var r=!0,i=\&quot;width\&quot;===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&amp;&amp;\&quot;border-box\&quot;===b.css(e,\&quot;boxSizing\&quot;,!1,o);if(0&gt;=i||null==i){if(i=Wt(e,t,o),(0&gt;i||null==i)&amp;&amp;(i=e.style[t]),Yt.test(i))return i;r=a&amp;&amp;(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?\&quot;border\&quot;:\&quot;content\&quot;),r,o)+\&quot;px\&quot;}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),\&quot;none\&quot;!==n&amp;&amp;n||(Pt=(Pt||b(\&quot;&lt;iframe frameborder=\'0\' width=\'0\' height=\'0\'\/&gt;\&quot;).css(\&quot;cssText\&quot;,\&quot;display:block !important\&quot;)).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write(\&quot;&lt;!doctype html&gt;&lt;html&gt;&lt;body&gt;\&quot;),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],\&quot;display\&quot;);return n.remove(),r}b.each([\&quot;height\&quot;,\&quot;width\&quot;],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&amp;&amp;Xt.test(b.css(e,\&quot;display\&quot;))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&amp;&amp;Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&amp;&amp;\&quot;border-box\&quot;===b.css(e,\&quot;boxSizing\&quot;,!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&amp;&amp;e.currentStyle?e.currentStyle.filter:e.style.filter)||\&quot;\&quot;)?.01*parseFloat(RegExp.$1)+\&quot;\&quot;:t?\&quot;1\&quot;:\&quot;\&quot;},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?\&quot;alpha(opacity=\&quot;+100*t+\&quot;)\&quot;:\&quot;\&quot;,o=r&amp;&amp;r.filter||n.filter||\&quot;\&quot;;n.zoom=1,(t&gt;=1||\&quot;\&quot;===t)&amp;&amp;\&quot;\&quot;===b.trim(o.replace($t,\&quot;\&quot;))&amp;&amp;n.removeAttribute&amp;&amp;(n.removeAttribute(\&quot;filter\&quot;),\&quot;\&quot;===t||r&amp;&amp;!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+\&quot; \&quot;+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:\&quot;inline-block\&quot;},Wt,[e,\&quot;marginRight\&quot;]):t}}),!b.support.pixelPosition&amp;&amp;b.fn.position&amp;&amp;b.each([\&quot;top\&quot;,\&quot;left\&quot;],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+\&quot;px\&quot;:r):t}}})}),b.expr&amp;&amp;b.expr.filters&amp;&amp;(b.expr.filters.hidden=function(e){return 0&gt;=e.offsetWidth&amp;&amp;0&gt;=e.offsetHeight||!b.support.reliableHiddenOffsets&amp;&amp;\&quot;none\&quot;===(e.style&amp;&amp;e.style.display||b.css(e,\&quot;display\&quot;))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:\&quot;\&quot;,padding:\&quot;\&quot;,border:\&quot;Width\&quot;},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},o=\&quot;string\&quot;==typeof n?n.split(\&quot; \&quot;):[n];for(;4&gt;r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=\/%20\/g,pn=\/\\[\\]$\/,fn=\/\\r?\\n\/g,dn=\/^(?:submit|button|image|reset|file)$\/i,hn=\/^(?:input|select|textarea|keygen)\/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,\&quot;elements\&quot;);return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&amp;&amp;!b(this).is(\&quot;:disabled\&quot;)&amp;&amp;hn.test(this.nodeName)&amp;&amp;!dn.test(e)&amp;&amp;(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,\&quot;\\r\\n\&quot;)}}):{name:t.name,value:n.replace(fn,\&quot;\\r\\n\&quot;)}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?\&quot;\&quot;:t,i[i.length]=encodeURIComponent(e)+\&quot;=\&quot;+encodeURIComponent(t)};if(n===t&amp;&amp;(n=b.ajaxSettings&amp;&amp;b.ajaxSettings.traditional),b.isArray(e)||e.jquery&amp;&amp;!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join(\&quot;&amp;\&quot;).replace(cn,\&quot;+\&quot;)};function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+\&quot;[\&quot;+(\&quot;object\&quot;==typeof i?t:\&quot;\&quot;)+\&quot;]\&quot;,i,n,r)});else if(n||\&quot;object\&quot;!==b.type(t))r(e,t);else for(i in t)gn(e+\&quot;[\&quot;+i+\&quot;]\&quot;,t[i],n,r)}b.each(\&quot;blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\&quot;.split(\&quot; \&quot;),function(e,t){b.fn[t]=function(e,n){return arguments.length&gt;0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=\/\\?\/,xn=\/#.*$\/,wn=\/([?&amp;])_=[^&amp;]*\/,Tn=\/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$\/gm,Nn=\/^(?:about|app|app-storage|.+-extension|file|res|widget):$\/,Cn=\/^(?:GET|HEAD)$\/,kn=\/^\\\/\\\/\/,En=\/^([\\w.+-]+:)(?:\\\/\\\/([^\\\/?#:]*)(?::(\\d+)|)|)\/,Sn=b.fn.load,An={},jn={},Dn=\&quot;*\/\&quot;.concat(\&quot;*\&quot;);try{yn=a.href}catch(Ln){yn=o.createElement(\&quot;a\&quot;),yn.href=\&quot;\&quot;,yn=yn.href}mn=En.exec(yn.toLowerCase())||[];function Hn(e){return function(t,n){\&quot;string\&quot;!=typeof t&amp;&amp;(n=t,t=\&quot;*\&quot;);var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))while(r=o[i++])\&quot;+\&quot;===r[0]?(r=r.slice(1)||\&quot;*\&quot;,(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){var o={},a=e===jn;function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return\&quot;string\&quot;!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}return s(n.dataTypes[0])||!o[\&quot;*\&quot;]&amp;&amp;s(\&quot;*\&quot;)}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&amp;&amp;((o[i]?e:r||(r={}))[i]=n[i]);return r&amp;&amp;b.extend(!0,e,r),e}b.fn.load=function(e,n,r){if(\&quot;string\&quot;!=typeof e&amp;&amp;Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(\&quot; \&quot;);return u&gt;=0&amp;&amp;(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&amp;&amp;\&quot;object\&quot;==typeof n&amp;&amp;(a=\&quot;POST\&quot;),s.length&gt;0&amp;&amp;b.ajax({url:e,type:a,dataType:\&quot;html\&quot;,data:n}).done(function(e){o=arguments,s.html(i?b(\&quot;&lt;div&gt;\&quot;).append(b.parseHTML(e)).find(i):e)}).complete(r&amp;&amp;function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each([\&quot;ajaxStart\&quot;,\&quot;ajaxStop\&quot;,\&quot;ajaxComplete\&quot;,\&quot;ajaxError\&quot;,\&quot;ajaxSuccess\&quot;,\&quot;ajaxSend\&quot;],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each([\&quot;get\&quot;,\&quot;post\&quot;],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&amp;&amp;(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:\&quot;GET\&quot;,isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:\&quot;application\/x-www-form-urlencoded; charset=UTF-8\&quot;,accepts:{\&quot;*\&quot;:Dn,text:\&quot;text\/plain\&quot;,html:\&quot;text\/html\&quot;,xml:\&quot;application\/xml, text\/xml\&quot;,json:\&quot;application\/json, text\/javascript\&quot;},contents:{xml:\/xml\/,html:\/html\/,json:\/json\/},responseFields:{xml:\&quot;responseXML\&quot;,text:\&quot;responseText\&quot;},converters:{\&quot;* text\&quot;:e.String,\&quot;text html\&quot;:!0,\&quot;text json\&quot;:b.parseJSON,\&quot;text xml\&quot;:b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){\&quot;object\&quot;==typeof e&amp;&amp;(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&amp;&amp;(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks(\&quot;once memory\&quot;),m=p.statusCode||{},y={},v={},x=0,T=\&quot;canceled\&quot;,N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2&gt;x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&amp;&amp;l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+\&quot;\&quot;).replace(xn,\&quot;\&quot;).replace(kn,mn[1]+\&quot;\/\/\&quot;),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||\&quot;*\&quot;).toLowerCase().match(w)||[\&quot;\&quot;],null==p.crossDomain&amp;&amp;(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&amp;&amp;r[2]===mn[2]&amp;&amp;(r[3]||(\&quot;http:\&quot;===r[1]?80:443))==(mn[3]||(\&quot;http:\&quot;===mn[1]?80:443)))),p.data&amp;&amp;p.processData&amp;&amp;\&quot;string\&quot;!=typeof p.data&amp;&amp;(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&amp;&amp;0===b.active++&amp;&amp;b.event.trigger(\&quot;ajaxStart\&quot;),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&amp;&amp;(o=p.url+=(bn.test(o)?\&quot;&amp;\&quot;:\&quot;?\&quot;)+p.data,delete p.data),p.cache===!1&amp;&amp;(p.url=wn.test(o)?o.replace(wn,\&quot;$1_=\&quot;+vn++):o+(bn.test(o)?\&quot;&amp;\&quot;:\&quot;?\&quot;)+\&quot;_=\&quot;+vn++)),p.ifModified&amp;&amp;(b.lastModified[o]&amp;&amp;N.setRequestHeader(\&quot;If-Modified-Since\&quot;,b.lastModified[o]),b.etag[o]&amp;&amp;N.setRequestHeader(\&quot;If-None-Match\&quot;,b.etag[o])),(p.data&amp;&amp;p.hasContent&amp;&amp;p.contentType!==!1||n.contentType)&amp;&amp;N.setRequestHeader(\&quot;Content-Type\&quot;,p.contentType),N.setRequestHeader(\&quot;Accept\&quot;,p.dataTypes[0]&amp;&amp;p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+(\&quot;*\&quot;!==p.dataTypes[0]?\&quot;, \&quot;+Dn+\&quot;; q=0.01\&quot;:\&quot;\&quot;):p.accepts[\&quot;*\&quot;]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&amp;&amp;(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T=\&quot;abort\&quot;;for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&amp;&amp;d.trigger(\&quot;ajaxSend\&quot;,[N,p]),p.async&amp;&amp;p.timeout&gt;0&amp;&amp;(s=setTimeout(function(){N.abort(\&quot;timeout\&quot;)},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2&gt;x))throw C;k(-1,C)}}else k(-1,\&quot;No Transport\&quot;);function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&amp;&amp;(x=2,s&amp;&amp;clearTimeout(s),l=t,a=i||\&quot;\&quot;,N.readyState=e&gt;0?4:0,r&amp;&amp;(w=_n(p,N,r)),e&gt;=200&amp;&amp;300&gt;e||304===e?(p.ifModified&amp;&amp;(T=N.getResponseHeader(\&quot;Last-Modified\&quot;),T&amp;&amp;(b.lastModified[o]=T),T=N.getResponseHeader(\&quot;etag\&quot;),T&amp;&amp;(b.etag[o]=T)),204===e?(c=!0,C=\&quot;nocontent\&quot;):304===e?(c=!0,C=\&quot;notmodified\&quot;):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&amp;&amp;(C=\&quot;error\&quot;,0&gt;e&amp;&amp;(e=0))),N.status=e,N.statusText=(n||C)+\&quot;\&quot;,c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&amp;&amp;d.trigger(c?\&quot;ajaxSuccess\&quot;:\&quot;ajaxError\&quot;,[N,p,c?y:v]),g.fireWith(f,[N,C]),u&amp;&amp;(d.trigger(\&quot;ajaxComplete\&quot;,[N,p]),--b.active||b.event.trigger(\&quot;ajaxStop\&quot;)))}return N},getScript:function(e,n){return b.get(e,t,n,\&quot;script\&quot;)},getJSON:function(e,t,n){return b.get(e,t,n,\&quot;json\&quot;)}});function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&amp;&amp;(n[c[s]]=r[s]);while(\&quot;*\&quot;===l[0])l.shift(),o===t&amp;&amp;(o=e.mimeType||n.getResponseHeader(\&quot;Content-Type\&quot;));if(o)for(s in u)if(u[s]&amp;&amp;u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+\&quot; \&quot;+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&amp;&amp;l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&amp;&amp;(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if(\&quot;*\&quot;!==r){if(\&quot;*\&quot;!==l&amp;&amp;l!==r){if(i=a[l+\&quot; \&quot;+r]||a[\&quot;* \&quot;+r],!i)for(n in a)if(o=n.split(\&quot; \&quot;),o[1]===r&amp;&amp;(i=a[l+\&quot; \&quot;+o[0]]||a[\&quot;* \&quot;+o[0]])){i===!0?i=a[n]:a[n]!==!0&amp;&amp;(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&amp;&amp;e[\&quot;throws\&quot;])t=i(t);else try{t=i(t)}catch(c){return{state:\&quot;parsererror\&quot;,error:i?c:\&quot;No conversion from \&quot;+l+\&quot; to \&quot;+r}}}l=r}return{state:\&quot;success\&quot;,data:t}}b.ajaxSetup({accepts:{script:\&quot;text\/javascript, application\/javascript, application\/ecmascript, application\/x-ecmascript\&quot;},contents:{script:\/(?:java|ecma)script\/},converters:{\&quot;text script\&quot;:function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter(\&quot;script\&quot;,function(e){e.cache===t&amp;&amp;(e.cache=!1),e.crossDomain&amp;&amp;(e.type=\&quot;GET\&quot;,e.global=!1)}),b.ajaxTransport(\&quot;script\&quot;,function(e){if(e.crossDomain){var n,r=o.head||b(\&quot;head\&quot;)[0]||o.documentElement;return{send:function(t,i){n=o.createElement(\&quot;script\&quot;),n.async=!0,e.scriptCharset&amp;&amp;(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||\/loaded|complete\/.test(n.readyState))&amp;&amp;(n.onload=n.onreadystatechange=null,n.parentNode&amp;&amp;n.parentNode.removeChild(n),n=null,t||i(200,\&quot;success\&quot;))},r.insertBefore(n,r.firstChild)},abort:function(){n&amp;&amp;n.onload(t,!0)}}}});var On=[],Bn=\/(=)\\?(?=&amp;|$)|\\?\\?\/;b.ajaxSetup({jsonp:\&quot;callback\&quot;,jsonpCallback:function(){var e=On.pop()||b.expando+\&quot;_\&quot;+vn++;return this[e]=!0,e}}),b.ajaxPrefilter(\&quot;json jsonp\&quot;,function(n,r,i){var o,a,s,u=n.jsonp!==!1&amp;&amp;(Bn.test(n.url)?\&quot;url\&quot;:\&quot;string\&quot;==typeof n.data&amp;&amp;!(n.contentType||\&quot;\&quot;).indexOf(\&quot;application\/x-www-form-urlencoded\&quot;)&amp;&amp;Bn.test(n.data)&amp;&amp;\&quot;data\&quot;);return u||\&quot;jsonp\&quot;===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,\&quot;$1\&quot;+o):n.jsonp!==!1&amp;&amp;(n.url+=(bn.test(n.url)?\&quot;&amp;\&quot;:\&quot;?\&quot;)+n.jsonp+\&quot;=\&quot;+o),n.converters[\&quot;script json\&quot;]=function(){return s||b.error(o+\&quot; was not called\&quot;),s[0]},n.dataTypes[0]=\&quot;json\&quot;,a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&amp;&amp;(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&amp;&amp;b.isFunction(a)&amp;&amp;a(s[0]),s=a=t}),\&quot;script\&quot;):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&amp;&amp;function(){var e;for(e in Pn)Pn[e](t,!0)};function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject(\&quot;Microsoft.XMLHTTP\&quot;)}catch(t){}}b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&amp;&amp;In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&amp;&amp;\&quot;withCredentials\&quot;in Rn,Rn=b.support.ajax=!!Rn,Rn&amp;&amp;b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&amp;&amp;u.overrideMimeType&amp;&amp;u.overrideMimeType(n.mimeType),n.crossDomain||i[\&quot;X-Requested-With\&quot;]||(i[\&quot;X-Requested-With\&quot;]=\&quot;XMLHttpRequest\&quot;);try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&amp;&amp;n.data||null),r=function(e,i){var s,l,c,p;try{if(r&amp;&amp;(i||4===u.readyState))if(r=t,a&amp;&amp;(u.onreadystatechange=b.noop,$n&amp;&amp;delete Pn[a]),i)4!==u.readyState&amp;&amp;u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),\&quot;string\&quot;==typeof u.responseText&amp;&amp;(p.text=u.responseText);try{c=u.statusText}catch(f){c=\&quot;\&quot;}s||!n.isLocal||n.crossDomain?1223===s&amp;&amp;(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&amp;&amp;o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&amp;&amp;(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&amp;&amp;r(t,!0)}}}});var Xn,Un,Vn=\/^(?:toggle|show|hide)$\/,Yn=RegExp(\&quot;^(?:([+-])=|)(\&quot;+x+\&quot;)([a-z%]*)$\&quot;,\&quot;i\&quot;),Jn=\/queueHooks$\/,Gn=[nr],Qn={\&quot;*\&quot;:[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?\&quot;\&quot;:\&quot;px\&quot;),\&quot;px\&quot;!==r&amp;&amp;s){s=b.css(i.elem,e,!0)||n||1;do u=u||\&quot;.5\&quot;,s\/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()\/a)&amp;&amp;1!==u&amp;&amp;--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Qn[t]||[]).concat(Qn[\&quot;*\&quot;]),i=0,o=r.length;for(;o&gt;i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n\/l.duration||0,o=1-r,a=0,u=l.tweens.length;for(;u&gt;a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1&gt;o&amp;&amp;u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r&gt;n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a&gt;o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&amp;&amp;l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&amp;&amp;(o=n[1],n=e[i]=n[0]),i!==r&amp;&amp;(e[r]=n,delete e[i]),a=b.cssHooks[r],a&amp;&amp;\&quot;expand\&quot;in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=[\&quot;*\&quot;]):e=e.split(\&quot; \&quot;);var n,r=0,i=e.length;for(;i&gt;r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}});function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&amp;&amp;nn(e);n.queue||(c=b._queueHooks(e,\&quot;fx\&quot;),null==c.unqueued&amp;&amp;(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,\&quot;fx\&quot;).length||c.empty.fire()})})),1===e.nodeType&amp;&amp;(\&quot;height\&quot;in t||\&quot;width\&quot;in t)&amp;&amp;(n.overflow=[d.overflow,d.overflowX,d.overflowY],\&quot;inline\&quot;===b.css(e,\&quot;display\&quot;)&amp;&amp;\&quot;none\&quot;===b.css(e,\&quot;float\&quot;)&amp;&amp;(b.support.inlineBlockNeedsLayout&amp;&amp;\&quot;inline\&quot;!==un(e.nodeName)?d.zoom=1:d.display=\&quot;inline-block\&quot;)),n.overflow&amp;&amp;(d.overflow=\&quot;hidden\&quot;,b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||\&quot;toggle\&quot;===a,a===(m?\&quot;hide\&quot;:\&quot;show\&quot;))continue;g.push(i)}if(o=g.length){s=b._data(e,\&quot;fxshow\&quot;)||b._data(e,\&quot;fxshow\&quot;,{}),\&quot;hidden\&quot;in s&amp;&amp;(m=s.hidden),u&amp;&amp;(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,\&quot;fxshow\&quot;);for(t in h)b.style(e,t,h[t])});for(i=0;o&gt;i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&amp;&amp;(l.end=l.start,l.start=\&quot;width\&quot;===r||\&quot;height\&quot;===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||\&quot;swing\&quot;,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?\&quot;\&quot;:\&quot;px\&quot;)},cur:function(){var e=rr.propHooks[this.prop];return e&amp;&amp;e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&amp;&amp;this.options.step.call(this.elem,this.now,this),n&amp;&amp;n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&amp;&amp;null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,\&quot;\&quot;),t&amp;&amp;\&quot;auto\&quot;!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&amp;&amp;(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&amp;&amp;e.elem.parentNode&amp;&amp;(e.elem[e.prop]=e.now)}},b.each([\&quot;toggle\&quot;,\&quot;show\&quot;,\&quot;hide\&quot;],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||\&quot;boolean\&quot;==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css(\&quot;opacity\&quot;,0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,\&quot;finish\&quot;))&amp;&amp;t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return\&quot;string\&quot;!=typeof e&amp;&amp;(r=n,n=e,e=t),n&amp;&amp;e!==!1&amp;&amp;this.queue(e||\&quot;fx\&quot;,[]),this.each(function(){var t=!0,n=null!=e&amp;&amp;e+\&quot;queueHooks\&quot;,o=b.timers,a=b._data(this);if(n)a[n]&amp;&amp;a[n].stop&amp;&amp;i(a[n]);else for(n in a)a[n]&amp;&amp;a[n].stop&amp;&amp;Jn.test(n)&amp;&amp;i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&amp;&amp;o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&amp;&amp;b.dequeue(this,e)})},finish:function(e){return e!==!1&amp;&amp;(e=e||\&quot;fx\&quot;),this.each(function(){var t,n=b._data(this),r=n[e+\&quot;queue\&quot;],i=n[e+\&quot;queueHooks\&quot;],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&amp;&amp;i.cur&amp;&amp;i.cur.finish&amp;&amp;i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&amp;&amp;o[t].queue===e&amp;&amp;(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a&gt;t;t++)r[t]&amp;&amp;r[t].finish&amp;&amp;r[t].finish.call(this);delete n.finish})}});function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4&gt;i;i+=2-t)n=Zt[i],r[\&quot;margin\&quot;+n]=r[\&quot;padding\&quot;+n]=e;return t&amp;&amp;(r.opacity=r.width=e),r}b.each({slideDown:ir(\&quot;show\&quot;),slideUp:ir(\&quot;hide\&quot;),slideToggle:ir(\&quot;toggle\&quot;),fadeIn:{opacity:\&quot;show\&quot;},fadeOut:{opacity:\&quot;hide\&quot;},fadeToggle:{opacity:\&quot;toggle\&quot;}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&amp;&amp;\&quot;object\&quot;==typeof e?b.extend({},e):{complete:n||!n&amp;&amp;t||b.isFunction(e)&amp;&amp;e,duration:e,easing:n&amp;&amp;t||t&amp;&amp;!b.isFunction(t)&amp;&amp;t};return r.duration=b.fx.off?0:\&quot;number\&quot;==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&amp;&amp;(r.queue=\&quot;fx\&quot;),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&amp;&amp;r.old.call(this),r.queue&amp;&amp;b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)\/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length&gt;r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&amp;&amp;b.timers.push(e)&amp;&amp;b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&amp;&amp;b.expr.filters&amp;&amp;(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&amp;&amp;a.ownerDocument;if(s)return n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&amp;&amp;(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o},b.offset={setOffset:function(e,t,n){var r=b.css(e,\&quot;position\&quot;);\&quot;static\&quot;===r&amp;&amp;(e.style.position=\&quot;relative\&quot;);var i=b(e),o=i.offset(),a=b.css(e,\&quot;top\&quot;),s=b.css(e,\&quot;left\&quot;),u=(\&quot;absolute\&quot;===r||\&quot;fixed\&quot;===r)&amp;&amp;b.inArray(\&quot;auto\&quot;,[a,s])&gt;-1,l={},c={},p,f;u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&amp;&amp;(t=t.call(e,n,o)),null!=t.top&amp;&amp;(l.top=t.top-o.top+p),null!=t.left&amp;&amp;(l.left=t.left-o.left+f),\&quot;using\&quot;in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return\&quot;fixed\&quot;===b.css(r,\&quot;position\&quot;)?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],\&quot;html\&quot;)||(n=e.offset()),n.top+=b.css(e[0],\&quot;borderTopWidth\&quot;,!0),n.left+=b.css(e[0],\&quot;borderLeftWidth\&quot;,!0)),{top:t.top-n.top-b.css(r,\&quot;marginTop\&quot;,!0),left:t.left-n.left-b.css(r,\&quot;marginLeft\&quot;,!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.documentElement;while(e&amp;&amp;!b.nodeName(e,\&quot;html\&quot;)&amp;&amp;\&quot;static\&quot;===b.css(e,\&quot;position\&quot;))e=e.offsetParent;return e||o.documentElement})}}),b.each({scrollLeft:\&quot;pageXOffset\&quot;,scrollTop:\&quot;pageYOffset\&quot;},function(e,n){var r=\/Y\/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}});function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}b.each({Height:\&quot;height\&quot;,Width:\&quot;width\&quot;},function(e,n){b.each({padding:\&quot;inner\&quot;+e,content:n,\&quot;\&quot;:\&quot;outer\&quot;+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&amp;&amp;(r||\&quot;boolean\&quot;!=typeof i),s=r||(i===!0||o===!0?\&quot;margin\&quot;:\&quot;border\&quot;);return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement[\&quot;client\&quot;+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body[\&quot;scroll\&quot;+e],o[\&quot;scroll\&quot;+e],n.body[\&quot;offset\&quot;+e],o[\&quot;offset\&quot;+e],o[\&quot;client\&quot;+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,\&quot;function\&quot;==typeof define&amp;&amp;define.amd&amp;&amp;define.amd.jQuery&amp;&amp;define(\&quot;jquery\&quot;,[],function(){return b})})(window);']]</p></td>
            </tr><tr  onclick="__coverage_toggleSection('f6af2669e989ebc8e40b53fc68c2b8f6'); return false;">
                <td><a href="#">src\main\webapp\lib/<strong>jquery-ui-1.10.2.custom.min.js</strong></a></td>
                <td class="statements">1</td>
                <td class="executed">1</td>
                <td class="coverage">
                        100&thinsp;%
                </td>
                <td class="bar-container">
                        <div class="bar">
                            <span style="width: 100%; background-color: rgb(174, 219, 75);"></span>
                        </div>
                </td>
            </tr>
            <tr id="__src_f6af2669e989ebc8e40b53fc68c2b8f6" style="display: none;">
                <td class="line-coverage-cell" colspan="5"><p id="__data_f6af2669e989ebc8e40b53fc68c2b8f6">[[-1,'\/*! jQuery UI - v1.10.2 - 2013-03-25'],[-1,'* http:\/\/jqueryui.com'],[-1,'* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.autocomplete.js, jquery.ui.menu.js, jquery.ui.slider.js'],[-1,'* Copyright 2013 jQuery Foundation and other contributors Licensed MIT *\/'],[-1,''],[1,'(function(e,t){function i(t,i){var a,n,r,o=t.nodeName.toLowerCase();return\&quot;area\&quot;===o?(a=t.parentNode,n=a.name,t.href&amp;&amp;n&amp;&amp;\&quot;map\&quot;===a.nodeName.toLowerCase()?(r=e(\&quot;img[usemap=#\&quot;+n+\&quot;]\&quot;)[0],!!r&amp;&amp;s(r)):!1):(\/input|select|textarea|button|object\/.test(o)?!t.disabled:\&quot;a\&quot;===o?t.href||i:i)&amp;&amp;s(t)}function s(t){return e.expr.filters.visible(t)&amp;&amp;!e(t).parents().addBack().filter(function(){return\&quot;hidden\&quot;===e.css(this,\&quot;visibility\&quot;)}).length}var a=0,n=\/^ui-id-\\d+$\/;e.ui=e.ui||{},e.extend(e.ui,{version:\&quot;1.10.2\&quot;,keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return\&quot;number\&quot;==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&amp;&amp;s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&amp;&amp;\/(static|relative)\/.test(this.css(\&quot;position\&quot;))||\/absolute\/.test(this.css(\&quot;position\&quot;))?this.parents().filter(function(){return\/(relative|absolute|fixed)\/.test(e.css(this,\&quot;position\&quot;))&amp;&amp;\/(auto|scroll)\/.test(e.css(this,\&quot;overflow\&quot;)+e.css(this,\&quot;overflow-y\&quot;)+e.css(this,\&quot;overflow-x\&quot;))}).eq(0):this.parents().filter(function(){return\/(auto|scroll)\/.test(e.css(this,\&quot;overflow\&quot;)+e.css(this,\&quot;overflow-y\&quot;)+e.css(this,\&quot;overflow-x\&quot;))}).eq(0),\/fixed\/.test(this.css(\&quot;position\&quot;))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css(\&quot;zIndex\&quot;,i);if(this.length)for(var s,a,n=e(this[0]);n.length&amp;&amp;n[0]!==document;){if(s=n.css(\&quot;position\&quot;),(\&quot;absolute\&quot;===s||\&quot;relative\&quot;===s||\&quot;fixed\&quot;===s)&amp;&amp;(a=parseInt(n.css(\&quot;zIndex\&quot;),10),!isNaN(a)&amp;&amp;0!==a))return a;n=n.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id=\&quot;ui-id-\&quot;+ ++a)})},removeUniqueId:function(){return this.each(function(){n.test(this.id)&amp;&amp;e(this).removeAttr(\&quot;id\&quot;)})}}),e.extend(e.expr[\&quot;:\&quot;],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,\&quot;tabindex\&quot;)))},tabbable:function(t){var s=e.attr(t,\&quot;tabindex\&quot;),a=isNaN(s);return(a||s&gt;=0)&amp;&amp;i(t,!a)}}),e(\&quot;&lt;a&gt;\&quot;).outerWidth(1).jquery||e.each([\&quot;Width\&quot;,\&quot;Height\&quot;],function(i,s){function a(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,\&quot;padding\&quot;+this))||0,s&amp;&amp;(i-=parseFloat(e.css(t,\&quot;border\&quot;+this+\&quot;Width\&quot;))||0),a&amp;&amp;(i-=parseFloat(e.css(t,\&quot;margin\&quot;+this))||0)}),i}var n=\&quot;Width\&quot;===s?[\&quot;Left\&quot;,\&quot;Right\&quot;]:[\&quot;Top\&quot;,\&quot;Bottom\&quot;],r=s.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn[\&quot;inner\&quot;+s]=function(i){return i===t?o[\&quot;inner\&quot;+s].call(this):this.each(function(){e(this).css(r,a(this,i)+\&quot;px\&quot;)})},e.fn[\&quot;outer\&quot;+s]=function(t,i){return\&quot;number\&quot;!=typeof t?o[\&quot;outer\&quot;+s].call(this,t):this.each(function(){e(this).css(r,a(this,t,!0,i)+\&quot;px\&quot;)})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e(\&quot;&lt;a&gt;\&quot;).data(\&quot;a-b\&quot;,\&quot;a\&quot;).removeData(\&quot;a-b\&quot;).data(\&quot;a-b\&quot;)&amp;&amp;(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!\/msie [\\w.]+\/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart=\&quot;onselectstart\&quot;in document.createElement(\&quot;div\&quot;),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?\&quot;selectstart\&quot;:\&quot;mousedown\&quot;)+\&quot;.ui-disableSelection\&quot;,function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(\&quot;.ui-disableSelection\&quot;)}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var a,n=e.ui[t].prototype;for(a in s)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,s[a]])},call:function(e,t,i){var s,a=e.plugins[t];if(a&amp;&amp;e.element[0].parentNode&amp;&amp;11!==e.element[0].parentNode.nodeType)for(s=0;a.length&gt;s;s++)e.options[a[s][0]]&amp;&amp;a[s][1].apply(e.element,i)}},hasScroll:function(t,i){if(\&quot;hidden\&quot;===e(t).css(\&quot;overflow\&quot;))return!1;var s=i&amp;&amp;\&quot;left\&quot;===i?\&quot;scrollLeft\&quot;:\&quot;scrollTop\&quot;,a=!1;return t[s]&gt;0?!0:(t[s]=1,a=t[s]&gt;0,t[s]=0,a)}})})(jQuery);(function(e,t){var i=0,s=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler(\&quot;remove\&quot;)}catch(a){}n(t)},e.widget=function(i,s,n){var a,r,o,h,l={},u=i.split(\&quot;.\&quot;)[0];i=i.split(\&quot;.\&quot;)[1],a=u+\&quot;-\&quot;+i,n||(n=s,s=e.Widget),e.expr[\&quot;:\&quot;][a.toLowerCase()]=function(t){return!!e.data(t,a)},e[u]=e[u]||{},r=e[u][i],o=e[u][i]=function(e,i){return this._createWidget?(arguments.length&amp;&amp;this._createWidget(e,i),t):new o(e,i)},e.extend(o,r,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),h=new s,h.options=e.widget.extend({},h.options),e.each(n,function(i,n){return e.isFunction(n)?(l[i]=function(){var e=function(){return s.prototype[i].apply(this,arguments)},t=function(e){return s.prototype[i].apply(this,e)};return function(){var i,s=this._super,a=this._superApply;return this._super=e,this._superApply=t,i=n.apply(this,arguments),this._super=s,this._superApply=a,i}}(),t):(l[i]=n,t)}),o.prototype=e.widget.extend(h,{widgetEventPrefix:r?h.widgetEventPrefix:i},l,{constructor:o,namespace:u,widgetName:i,widgetFullName:a}),r?(e.each(r._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+\&quot;.\&quot;+s.widgetName,o,i._proto)}),delete r._childConstructors):s._childConstructors.push(o),e.widget.bridge(i,o)},e.widget.extend=function(i){for(var n,a,r=s.call(arguments,1),o=0,h=r.length;h&gt;o;o++)for(n in r[o])a=r[o][n],r[o].hasOwnProperty(n)&amp;&amp;a!==t&amp;&amp;(i[n]=e.isPlainObject(a)?e.isPlainObject(i[n])?e.widget.extend({},i[n],a):e.widget.extend({},a):a);return i},e.widget.bridge=function(i,n){var a=n.prototype.widgetFullName||i;e.fn[i]=function(r){var o=\&quot;string\&quot;==typeof r,h=s.call(arguments,1),l=this;return r=!o&amp;&amp;h.length?e.widget.extend.apply(null,[r].concat(h)):r,o?this.each(function(){var s,n=e.data(this,a);return n?e.isFunction(n[r])&amp;&amp;\&quot;_\&quot;!==r.charAt(0)?(s=n[r].apply(n,h),s!==n&amp;&amp;s!==t?(l=s&amp;&amp;s.jquery?l.pushStack(s.get()):s,!1):t):e.error(\&quot;no such method \'\&quot;+r+\&quot;\' for \&quot;+i+\&quot; widget instance\&quot;):e.error(\&quot;cannot call methods on \&quot;+i+\&quot; prior to initialization; \&quot;+\&quot;attempted to call method \'\&quot;+r+\&quot;\'\&quot;)}):this.each(function(){var t=e.data(this,a);t?t.option(r||{})._init():e.data(this,a,new n(r,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:\&quot;widget\&quot;,widgetEventPrefix:\&quot;\&quot;,defaultElement:\&quot;&lt;div&gt;\&quot;,options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace=\&quot;.\&quot;+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&amp;&amp;(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&amp;&amp;this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger(\&quot;create\&quot;,null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr(\&quot;aria-disabled\&quot;).removeClass(this.widgetFullName+\&quot;-disabled \&quot;+\&quot;ui-state-disabled\&quot;),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass(\&quot;ui-state-hover\&quot;),this.focusable.removeClass(\&quot;ui-state-focus\&quot;)},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var n,a,r,o=i;if(0===arguments.length)return e.widget.extend({},this.options);if(\&quot;string\&quot;==typeof i)if(o={},n=i.split(\&quot;.\&quot;),i=n.shift(),n.length){for(a=o[i]=e.widget.extend({},this.options[i]),r=0;n.length-1&gt;r;r++)a[n[r]]=a[n[r]]||{},a=a[n[r]];if(i=n.pop(),s===t)return a[i]===t?null:a[i];a[i]=s}else{if(s===t)return this.options[i]===t?null:this.options[i];o[i]=s}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,\&quot;disabled\&quot;===e&amp;&amp;(this.widget().toggleClass(this.widgetFullName+\&quot;-disabled ui-state-disabled\&quot;,!!t).attr(\&quot;aria-disabled\&quot;,t),this.hoverable.removeClass(\&quot;ui-state-hover\&quot;),this.focusable.removeClass(\&quot;ui-state-focus\&quot;)),this},enable:function(){return this._setOption(\&quot;disabled\&quot;,!1)},disable:function(){return this._setOption(\&quot;disabled\&quot;,!0)},_on:function(i,s,n){var a,r=this;\&quot;boolean\&quot;!=typeof i&amp;&amp;(n=s,s=i,i=!1),n?(s=a=e(s),this.bindings=this.bindings.add(s)):(n=s,s=this.element,a=this.widget()),e.each(n,function(n,o){function h(){return i||r.options.disabled!==!0&amp;&amp;!e(this).hasClass(\&quot;ui-state-disabled\&quot;)?(\&quot;string\&quot;==typeof o?r[o]:o).apply(r,arguments):t}\&quot;string\&quot;!=typeof o&amp;&amp;(h.guid=o.guid=o.guid||h.guid||e.guid++);var l=n.match(\/^(\\w+)\\s*(.*)$\/),u=l[1]+r.eventNamespace,c=l[2];c?a.delegate(c,u,h):s.bind(u,h)})},_off:function(e,t){t=(t||\&quot;\&quot;).split(\&quot; \&quot;).join(this.eventNamespace+\&quot; \&quot;)+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return(\&quot;string\&quot;==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass(\&quot;ui-state-hover\&quot;)},mouseleave:function(t){e(t.currentTarget).removeClass(\&quot;ui-state-hover\&quot;)}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass(\&quot;ui-state-focus\&quot;)},focusout:function(t){e(t.currentTarget).removeClass(\&quot;ui-state-focus\&quot;)}})},_trigger:function(t,i,s){var n,a,r=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(r)&amp;&amp;r.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:\&quot;fadeIn\&quot;,hide:\&quot;fadeOut\&quot;},function(t,i){e.Widget.prototype[\&quot;_\&quot;+t]=function(s,n,a){\&quot;string\&quot;==typeof n&amp;&amp;(n={effect:n});var r,o=n?n===!0||\&quot;number\&quot;==typeof n?i:n.effect||i:t;n=n||{},\&quot;number\&quot;==typeof n&amp;&amp;(n={duration:n}),r=!e.isEmptyObject(n),n.complete=a,n.delay&amp;&amp;s.delay(n.delay),r&amp;&amp;e.effects&amp;&amp;e.effects.effect[o]?s[t](n):o!==t&amp;&amp;s[o]?s[o](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&amp;&amp;a.call(s[0]),i()})}})})(jQuery);(function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget(\&quot;ui.mouse\&quot;,{version:\&quot;1.10.2\&quot;,options:{cancel:\&quot;input,textarea,button,select,option\&quot;,distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind(\&quot;mousedown.\&quot;+this.widgetName,function(e){return t._mouseDown(e)}).bind(\&quot;click.\&quot;+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+\&quot;.preventClickEvent\&quot;)?(e.removeData(i.target,t.widgetName+\&quot;.preventClickEvent\&quot;),i.stopImmediatePropagation(),!1):undefined}),this.started=!1},_mouseDestroy:function(){this.element.unbind(\&quot;.\&quot;+this.widgetName),this._mouseMoveDelegate&amp;&amp;e(document).unbind(\&quot;mousemove.\&quot;+this.widgetName,this._mouseMoveDelegate).unbind(\&quot;mouseup.\&quot;+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&amp;&amp;this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a=\&quot;string\&quot;==typeof this.options.cancel&amp;&amp;i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return n&amp;&amp;!a&amp;&amp;this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&amp;&amp;this._mouseDelayMet(i)&amp;&amp;(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+\&quot;.preventClickEvent\&quot;)&amp;&amp;e.removeData(i.target,this.widgetName+\&quot;.preventClickEvent\&quot;),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},e(document).bind(\&quot;mousemove.\&quot;+this.widgetName,this._mouseMoveDelegate).bind(\&quot;mouseup.\&quot;+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&amp;&amp;(!document.documentMode||9&gt;document.documentMode)&amp;&amp;!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&amp;&amp;this._mouseDelayMet(t)&amp;&amp;(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind(\&quot;mousemove.\&quot;+this.widgetName,this._mouseMoveDelegate).unbind(\&quot;mouseup.\&quot;+this.widgetName,this._mouseUpDelegate),this._mouseStarted&amp;&amp;(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&amp;&amp;e.data(t.target,this.widgetName+\&quot;.preventClickEvent\&quot;,!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))&gt;=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);(function(t,e){function i(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e\/100:1),parseFloat(t[1])*(p.test(t[1])?i\/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var a,o=Math.max,r=Math.abs,h=Math.round,l=\/left|center|right\/,c=\/top|center|bottom\/,u=\/[\\+\\-]\\d+(\\.[\\d]+)?%?\/,d=\/^\\w+\/,p=\/%$\/,f=t.fn.position;t.position={scrollbarWidth:function(){if(a!==e)return a;var i,s,n=t(\&quot;&lt;div style=\'display:block;width:50px;height:50px;overflow:hidden;\'&gt;&lt;div style=\'height:100px;width:auto;\'&gt;&lt;\/div&gt;&lt;\/div&gt;\&quot;),o=n.children()[0];return t(\&quot;body\&quot;).append(n),i=o.offsetWidth,n.css(\&quot;overflow\&quot;,\&quot;scroll\&quot;),s=o.offsetWidth,i===s&amp;&amp;(s=n[0].clientWidth),n.remove(),a=i-s},getScrollInfo:function(e){var i=e.isWindow?\&quot;\&quot;:e.element.css(\&quot;overflow-x\&quot;),s=e.isWindow?\&quot;\&quot;:e.element.css(\&quot;overflow-y\&quot;),n=\&quot;scroll\&quot;===i||\&quot;auto\&quot;===i&amp;&amp;e.width&lt;e.element[0].scrollWidth,a=\&quot;scroll\&quot;===s||\&quot;auto\&quot;===s&amp;&amp;e.height&lt;e.element[0].scrollHeight;return{width:a?t.position.scrollbarWidth():0,height:n?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return f.apply(this,arguments);e=t.extend({},e);var a,p,m,g,v,_,b=t(e.of),y=t.position.getWithinInfo(e.within),w=t.position.getScrollInfo(y),x=(e.collision||\&quot;flip\&quot;).split(\&quot; \&quot;),k={};return _=n(b),b[0].preventDefault&amp;&amp;(e.at=\&quot;left top\&quot;),p=_.width,m=_.height,g=_.offset,v=t.extend({},g),t.each([\&quot;my\&quot;,\&quot;at\&quot;],function(){var t,i,s=(e[this]||\&quot;\&quot;).split(\&quot; \&quot;);1===s.length&amp;&amp;(s=l.test(s[0])?s.concat([\&quot;center\&quot;]):c.test(s[0])?[\&quot;center\&quot;].concat(s):[\&quot;center\&quot;,\&quot;center\&quot;]),s[0]=l.test(s[0])?s[0]:\&quot;center\&quot;,s[1]=c.test(s[1])?s[1]:\&quot;center\&quot;,t=u.exec(s[0]),i=u.exec(s[1]),k[this]=[t?t[0]:0,i?i[0]:0],e[this]=[d.exec(s[0])[0],d.exec(s[1])[0]]}),1===x.length&amp;&amp;(x[1]=x[0]),\&quot;right\&quot;===e.at[0]?v.left+=p:\&quot;center\&quot;===e.at[0]&amp;&amp;(v.left+=p\/2),\&quot;bottom\&quot;===e.at[1]?v.top+=m:\&quot;center\&quot;===e.at[1]&amp;&amp;(v.top+=m\/2),a=i(k.at,p,m),v.left+=a[0],v.top+=a[1],this.each(function(){var n,l,c=t(this),u=c.outerWidth(),d=c.outerHeight(),f=s(this,\&quot;marginLeft\&quot;),_=s(this,\&quot;marginTop\&quot;),D=u+f+s(this,\&quot;marginRight\&quot;)+w.width,T=d+_+s(this,\&quot;marginBottom\&quot;)+w.height,C=t.extend({},v),M=i(k.my,c.outerWidth(),c.outerHeight());\&quot;right\&quot;===e.my[0]?C.left-=u:\&quot;center\&quot;===e.my[0]&amp;&amp;(C.left-=u\/2),\&quot;bottom\&quot;===e.my[1]?C.top-=d:\&quot;center\&quot;===e.my[1]&amp;&amp;(C.top-=d\/2),C.left+=M[0],C.top+=M[1],t.support.offsetFractions||(C.left=h(C.left),C.top=h(C.top)),n={marginLeft:f,marginTop:_},t.each([\&quot;left\&quot;,\&quot;top\&quot;],function(i,s){t.ui.position[x[i]]&amp;&amp;t.ui.position[x[i]][s](C,{targetWidth:p,targetHeight:m,elemWidth:u,elemHeight:d,collisionPosition:n,collisionWidth:D,collisionHeight:T,offset:[a[0]+M[0],a[1]+M[1]],my:e.my,at:e.at,within:y,elem:c})}),e.using&amp;&amp;(l=function(t){var i=g.left-C.left,s=i+p-u,n=g.top-C.top,a=n+m-d,h={target:{element:b,left:g.left,top:g.top,width:p,height:m},element:{element:c,left:C.left,top:C.top,width:u,height:d},horizontal:0&gt;s?\&quot;left\&quot;:i&gt;0?\&quot;right\&quot;:\&quot;center\&quot;,vertical:0&gt;a?\&quot;top\&quot;:n&gt;0?\&quot;bottom\&quot;:\&quot;middle\&quot;};u&gt;p&amp;&amp;p&gt;r(i+s)&amp;&amp;(h.horizontal=\&quot;center\&quot;),d&gt;m&amp;&amp;m&gt;r(n+a)&amp;&amp;(h.vertical=\&quot;middle\&quot;),h.important=o(r(i),r(s))&gt;o(r(n),r(a))?\&quot;horizontal\&quot;:\&quot;vertical\&quot;,e.using.call(this,t,h)}),c.offset(t.extend(C,{using:l}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=t.left-e.collisionPosition.marginLeft,h=n-r,l=r+e.collisionWidth-a-n;e.collisionWidth&gt;a?h&gt;0&amp;&amp;0&gt;=l?(i=t.left+h+e.collisionWidth-a-n,t.left+=h-i):t.left=l&gt;0&amp;&amp;0&gt;=h?n:h&gt;l?n+a-e.collisionWidth:n:h&gt;0?t.left+=h:l&gt;0?t.left-=l:t.left=o(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,a=e.within.height,r=t.top-e.collisionPosition.marginTop,h=n-r,l=r+e.collisionHeight-a-n;e.collisionHeight&gt;a?h&gt;0&amp;&amp;0&gt;=l?(i=t.top+h+e.collisionHeight-a-n,t.top+=h-i):t.top=l&gt;0&amp;&amp;0&gt;=h?n:h&gt;l?n+a-e.collisionHeight:n:h&gt;0?t.top+=h:l&gt;0?t.top-=l:t.top=o(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,a=n.offset.left+n.scrollLeft,o=n.width,h=n.isWindow?n.scrollLeft:n.offset.left,l=t.left-e.collisionPosition.marginLeft,c=l-h,u=l+e.collisionWidth-o-h,d=\&quot;left\&quot;===e.my[0]?-e.elemWidth:\&quot;right\&quot;===e.my[0]?e.elemWidth:0,p=\&quot;left\&quot;===e.at[0]?e.targetWidth:\&quot;right\&quot;===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0&gt;c?(i=t.left+d+p+f+e.collisionWidth-o-a,(0&gt;i||r(c)&gt;i)&amp;&amp;(t.left+=d+p+f)):u&gt;0&amp;&amp;(s=t.left-e.collisionPosition.marginLeft+d+p+f-h,(s&gt;0||u&gt;r(s))&amp;&amp;(t.left+=d+p+f))},top:function(t,e){var i,s,n=e.within,a=n.offset.top+n.scrollTop,o=n.height,h=n.isWindow?n.scrollTop:n.offset.top,l=t.top-e.collisionPosition.marginTop,c=l-h,u=l+e.collisionHeight-o-h,d=\&quot;top\&quot;===e.my[1],p=d?-e.elemHeight:\&quot;bottom\&quot;===e.my[1]?e.elemHeight:0,f=\&quot;top\&quot;===e.at[1]?e.targetHeight:\&quot;bottom\&quot;===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0&gt;c?(s=t.top+p+f+m+e.collisionHeight-o-a,t.top+p+f+m&gt;c&amp;&amp;(0&gt;s||r(c)&gt;s)&amp;&amp;(t.top+=p+f+m)):u&gt;0&amp;&amp;(i=t.top-e.collisionPosition.marginTop+p+f+m-h,t.top+p+f+m&gt;u&amp;&amp;(i&gt;0||u&gt;r(i))&amp;&amp;(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,a,o=document.getElementsByTagName(\&quot;body\&quot;)[0],r=document.createElement(\&quot;div\&quot;);e=document.createElement(o?\&quot;div\&quot;:\&quot;body\&quot;),s={visibility:\&quot;hidden\&quot;,width:0,height:0,border:0,margin:0,background:\&quot;none\&quot;},o&amp;&amp;t.extend(s,{position:\&quot;absolute\&quot;,left:\&quot;-1000px\&quot;,top:\&quot;-1000px\&quot;});for(a in s)e.style[a]=s[a];e.appendChild(r),i=o||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText=\&quot;position: absolute; left: 10.7432222px;\&quot;,n=t(r).offset().left,t.support.offsetFractions=n&gt;10&amp;&amp;11&gt;n,e.innerHTML=\&quot;\&quot;,i.removeChild(e)}()})(jQuery);(function(e){var t=0;e.widget(\&quot;ui.autocomplete\&quot;,{version:\&quot;1.10.2\&quot;,defaultElement:\&quot;&lt;input&gt;\&quot;,options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:\&quot;left top\&quot;,at:\&quot;left bottom\&quot;,collision:\&quot;none\&quot;},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a=\&quot;textarea\&quot;===n,o=\&quot;input\&quot;===n;this.isMultiLine=a?!0:o?!1:this.element.prop(\&quot;isContentEditable\&quot;),this.valueMethod=this.element[a||o?\&quot;val\&quot;:\&quot;text\&quot;],this.isNewMenu=!0,this.element.addClass(\&quot;ui-autocomplete-input\&quot;).attr(\&quot;autocomplete\&quot;,\&quot;off\&quot;),this._on(this.element,{keydown:function(n){if(this.element.prop(\&quot;readOnly\&quot;))return t=!0,s=!0,i=!0,undefined;t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move(\&quot;previousPage\&quot;,n);break;case a.PAGE_DOWN:t=!0,this._move(\&quot;nextPage\&quot;,n);break;case a.UP:t=!0,this._keyEvent(\&quot;previous\&quot;,n);break;case a.DOWN:t=!0,this._keyEvent(\&quot;next\&quot;,n);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&amp;&amp;(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&amp;&amp;this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(\&quot;:visible\&quot;)&amp;&amp;(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,s.preventDefault(),undefined;if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move(\&quot;previousPage\&quot;,s);break;case n.PAGE_DOWN:this._move(\&quot;nextPage\&quot;,s);break;case n.UP:this._keyEvent(\&quot;previous\&quot;,s);break;case n.DOWN:this._keyEvent(\&quot;next\&quot;,s)}}},input:function(e){return s?(s=!1,e.preventDefault(),undefined):(this._searchTimeout(e),undefined)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?(delete this.cancelBlur,undefined):(clearTimeout(this.searching),this.close(e),this._change(e),undefined)}}),this._initSource(),this.menu=e(\&quot;&lt;ul&gt;\&quot;).addClass(\&quot;ui-autocomplete ui-front\&quot;).appendTo(this._appendTo()).menu({input:e(),role:null}).hide().data(\&quot;ui-menu\&quot;),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(\&quot;.ui-menu-item\&quot;).length||this._delay(function(){var t=this;this.document.one(\&quot;mousedown\&quot;,function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&amp;&amp;(this.isNewMenu=!1,t.originalEvent&amp;&amp;\/^mouse\/.test(t.originalEvent.type)))return this.menu.blur(),this.document.one(\&quot;mousemove\&quot;,function(){e(t.target).trigger(t.originalEvent)}),undefined;var s=i.item.data(\&quot;ui-autocomplete-item\&quot;);!1!==this._trigger(\&quot;focus\&quot;,t,{item:s})?t.originalEvent&amp;&amp;\/^key\/.test(t.originalEvent.type)&amp;&amp;this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(e,t){var i=t.item.data(\&quot;ui-autocomplete-item\&quot;),s=this.previous;this.element[0]!==this.document[0].activeElement&amp;&amp;(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger(\&quot;select\&quot;,e,{item:i})&amp;&amp;this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e(\&quot;&lt;span&gt;\&quot;,{role:\&quot;status\&quot;,\&quot;aria-live\&quot;:\&quot;polite\&quot;}).addClass(\&quot;ui-helper-hidden-accessible\&quot;).insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr(\&quot;autocomplete\&quot;)}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass(\&quot;ui-autocomplete-input\&quot;).removeAttr(\&quot;autocomplete\&quot;),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),\&quot;source\&quot;===e&amp;&amp;this._initSource(),\&quot;appendTo\&quot;===e&amp;&amp;this.menu.element.appendTo(this._appendTo()),\&quot;disabled\&quot;===e&amp;&amp;t&amp;&amp;this.xhr&amp;&amp;this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&amp;&amp;(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(\&quot;.ui-front\&quot;)),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):\&quot;string\&quot;==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&amp;&amp;s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:\&quot;json\&quot;,success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&amp;&amp;(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length&lt;this.options.minLength?this.close(t):this._trigger(\&quot;search\&quot;,t)!==!1?this._search(e):undefined},_search:function(e){this.pending++,this.element.addClass(\&quot;ui-autocomplete-loading\&quot;),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,i=++t;return function(s){i===t&amp;&amp;e.__response(s),e.pending--,e.pending||e.element.removeClass(\&quot;ui-autocomplete-loading\&quot;)}},__response:function(e){e&amp;&amp;(e=this._normalize(e)),this._trigger(\&quot;response\&quot;,null,{content:e}),!this.options.disabled&amp;&amp;e&amp;&amp;e.length&amp;&amp;!this.cancelSearch?(this._suggest(e),this._trigger(\&quot;open\&quot;)):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(\&quot;:visible\&quot;)&amp;&amp;(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger(\&quot;close\&quot;,e))},_change:function(e){this.previous!==this._value()&amp;&amp;this._trigger(\&quot;change\&quot;,e,{item:this.selectedItem})},_normalize:function(t){return t.length&amp;&amp;t[0].label&amp;&amp;t[0].value?t:e.map(t,function(t){return\&quot;string\&quot;==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&amp;&amp;this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width(\&quot;\&quot;).outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data(\&quot;ui-autocomplete-item\&quot;,t)},_renderItem:function(t,i){return e(\&quot;&lt;li&gt;\&quot;).append(e(\&quot;&lt;a&gt;\&quot;).text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(\&quot;:visible\&quot;)?this.menu.isFirstItem()&amp;&amp;\/^previous\/.test(e)||this.menu.isLastItem()&amp;&amp;\/^next\/.test(e)?(this._value(this.term),this.menu.blur(),undefined):(this.menu[e](t),undefined):(this.search(null,t),undefined)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(\&quot;:visible\&quot;))&amp;&amp;(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(\/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]\/g,\&quot;\\\\$&amp;\&quot;)},filter:function(t,i){var s=RegExp(e.ui.autocomplete.escapeRegex(i),\&quot;i\&quot;);return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget(\&quot;ui.autocomplete\&quot;,e.ui.autocomplete,{options:{messages:{noResults:\&quot;No search results.\&quot;,results:function(e){return e+(e&gt;1?\&quot; results are\&quot;:\&quot; result is\&quot;)+\&quot; available, use up and down arrow keys to navigate.\&quot;}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&amp;&amp;e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})})(jQuery);(function(t){t.widget(\&quot;ui.menu\&quot;,{version:\&quot;1.10.2\&quot;,defaultElement:\&quot;&lt;ul&gt;\&quot;,delay:300,options:{icons:{submenu:\&quot;ui-icon-carat-1-e\&quot;},menus:\&quot;ul\&quot;,position:{my:\&quot;left top\&quot;,at:\&quot;right top\&quot;},role:\&quot;menu\&quot;,blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass(\&quot;ui-menu ui-widget ui-widget-content ui-corner-all\&quot;).toggleClass(\&quot;ui-menu-icons\&quot;,!!this.element.find(\&quot;.ui-icon\&quot;).length).attr({role:this.options.role,tabIndex:0}).bind(\&quot;click\&quot;+this.eventNamespace,t.proxy(function(t){this.options.disabled&amp;&amp;t.preventDefault()},this)),this.options.disabled&amp;&amp;this.element.addClass(\&quot;ui-state-disabled\&quot;).attr(\&quot;aria-disabled\&quot;,\&quot;true\&quot;),this._on({\&quot;mousedown .ui-menu-item &gt; a\&quot;:function(t){t.preventDefault()},\&quot;click .ui-state-disabled &gt; a\&quot;:function(t){t.preventDefault()},\&quot;click .ui-menu-item:has(a)\&quot;:function(e){var i=t(e.target).closest(\&quot;.ui-menu-item\&quot;);!this.mouseHandled&amp;&amp;i.not(\&quot;.ui-state-disabled\&quot;).length&amp;&amp;(this.mouseHandled=!0,this.select(e),i.has(\&quot;.ui-menu\&quot;).length?this.expand(e):this.element.is(\&quot;:focus\&quot;)||(this.element.trigger(\&quot;focus\&quot;,[!0]),this.active&amp;&amp;1===this.active.parents(\&quot;.ui-menu\&quot;).length&amp;&amp;clearTimeout(this.timer)))},\&quot;mouseenter .ui-menu-item\&quot;:function(e){var i=t(e.currentTarget);i.siblings().children(\&quot;.ui-state-active\&quot;).removeClass(\&quot;ui-state-active\&quot;),this.focus(e,i)},mouseleave:\&quot;collapseAll\&quot;,\&quot;mouseleave .ui-menu\&quot;:\&quot;collapseAll\&quot;,focus:function(t,e){var i=this.active||this.element.children(\&quot;.ui-menu-item\&quot;).eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:\&quot;_keydown\&quot;}),this.refresh(),this._on(this.document,{click:function(e){t(e.target).closest(\&quot;.ui-menu\&quot;).length||this.collapseAll(e),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr(\&quot;aria-activedescendant\&quot;).find(\&quot;.ui-menu\&quot;).addBack().removeClass(\&quot;ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons\&quot;).removeAttr(\&quot;role\&quot;).removeAttr(\&quot;tabIndex\&quot;).removeAttr(\&quot;aria-labelledby\&quot;).removeAttr(\&quot;aria-expanded\&quot;).removeAttr(\&quot;aria-hidden\&quot;).removeAttr(\&quot;aria-disabled\&quot;).removeUniqueId().show(),this.element.find(\&quot;.ui-menu-item\&quot;).removeClass(\&quot;ui-menu-item\&quot;).removeAttr(\&quot;role\&quot;).removeAttr(\&quot;aria-disabled\&quot;).children(\&quot;a\&quot;).removeUniqueId().removeClass(\&quot;ui-corner-all ui-state-hover\&quot;).removeAttr(\&quot;tabIndex\&quot;).removeAttr(\&quot;role\&quot;).removeAttr(\&quot;aria-haspopup\&quot;).children().each(function(){var e=t(this);e.data(\&quot;ui-menu-submenu-carat\&quot;)&amp;&amp;e.remove()}),this.element.find(\&quot;.ui-menu-divider\&quot;).removeClass(\&quot;ui-menu-divider ui-widget-content\&quot;)},_keydown:function(e){function i(t){return t.replace(\/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]\/g,\&quot;\\\\$&amp;\&quot;)}var s,n,a,o,r,h=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move(\&quot;first\&quot;,\&quot;first\&quot;,e);break;case t.ui.keyCode.END:this._move(\&quot;last\&quot;,\&quot;last\&quot;,e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&amp;&amp;!this.active.is(\&quot;.ui-state-disabled\&quot;)&amp;&amp;this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:h=!1,n=this.previousFilter||\&quot;\&quot;,a=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),a===n?o=!0:a=n+a,r=RegExp(\&quot;^\&quot;+i(a),\&quot;i\&quot;),s=this.activeMenu.children(\&quot;.ui-menu-item\&quot;).filter(function(){return r.test(t(this).children(\&quot;a\&quot;).text())}),s=o&amp;&amp;-1!==s.index(this.active.next())?this.active.nextAll(\&quot;.ui-menu-item\&quot;):s,s.length||(a=String.fromCharCode(e.keyCode),r=RegExp(\&quot;^\&quot;+i(a),\&quot;i\&quot;),s=this.activeMenu.children(\&quot;.ui-menu-item\&quot;).filter(function(){return r.test(t(this).children(\&quot;a\&quot;).text())})),s.length?(this.focus(e,s),s.length&gt;1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}h&amp;&amp;e.preventDefault()},_activate:function(t){this.active.is(\&quot;.ui-state-disabled\&quot;)||(this.active.children(\&quot;a[aria-haspopup=\'true\']\&quot;).length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);s.filter(\&quot;:not(.ui-menu)\&quot;).addClass(\&quot;ui-menu ui-widget ui-widget-content ui-corner-all\&quot;).hide().attr({role:this.options.role,\&quot;aria-hidden\&quot;:\&quot;true\&quot;,\&quot;aria-expanded\&quot;:\&quot;false\&quot;}).each(function(){var e=t(this),s=e.prev(\&quot;a\&quot;),n=t(\&quot;&lt;span&gt;\&quot;).addClass(\&quot;ui-menu-icon ui-icon \&quot;+i).data(\&quot;ui-menu-submenu-carat\&quot;,!0);s.attr(\&quot;aria-haspopup\&quot;,\&quot;true\&quot;).prepend(n),e.attr(\&quot;aria-labelledby\&quot;,s.attr(\&quot;id\&quot;))}),e=s.add(this.element),e.children(\&quot;:not(.ui-menu-item):has(a)\&quot;).addClass(\&quot;ui-menu-item\&quot;).attr(\&quot;role\&quot;,\&quot;presentation\&quot;).children(\&quot;a\&quot;).uniqueId().addClass(\&quot;ui-corner-all\&quot;).attr({tabIndex:-1,role:this._itemRole()}),e.children(\&quot;:not(.ui-menu-item)\&quot;).each(function(){var e=t(this);\/[^\\-\\u2014\\u2013\\s]\/.test(e.text())||e.addClass(\&quot;ui-widget-content ui-menu-divider\&quot;)}),e.children(\&quot;.ui-state-disabled\&quot;).attr(\&quot;aria-disabled\&quot;,\&quot;true\&quot;),this.active&amp;&amp;!t.contains(this.element[0],this.active[0])&amp;&amp;this.blur()},_itemRole:function(){return{menu:\&quot;menuitem\&quot;,listbox:\&quot;option\&quot;}[this.options.role]},_setOption:function(t,e){\&quot;icons\&quot;===t&amp;&amp;this.element.find(\&quot;.ui-menu-icon\&quot;).removeClass(this.options.icons.submenu).addClass(e.submenu),this._super(t,e)},focus:function(t,e){var i,s;this.blur(t,t&amp;&amp;\&quot;focus\&quot;===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children(\&quot;a\&quot;).addClass(\&quot;ui-state-focus\&quot;),this.options.role&amp;&amp;this.element.attr(\&quot;aria-activedescendant\&quot;,s.attr(\&quot;id\&quot;)),this.active.parent().closest(\&quot;.ui-menu-item\&quot;).children(\&quot;a:first\&quot;).addClass(\&quot;ui-state-active\&quot;),t&amp;&amp;\&quot;keydown\&quot;===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(\&quot;.ui-menu\&quot;),i.length&amp;&amp;\/^mouse\/.test(t.type)&amp;&amp;this._startOpening(i),this.activeMenu=e.parent(),this._trigger(\&quot;focus\&quot;,t,{item:e})},_scrollIntoView:function(e){var i,s,n,a,o,r;this._hasScroll()&amp;&amp;(i=parseFloat(t.css(this.activeMenu[0],\&quot;borderTopWidth\&quot;))||0,s=parseFloat(t.css(this.activeMenu[0],\&quot;paddingTop\&quot;))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=e.height(),0&gt;n?this.activeMenu.scrollTop(a+n):n+r&gt;o&amp;&amp;this.activeMenu.scrollTop(a+n-o+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&amp;&amp;(this.active.children(\&quot;a\&quot;).removeClass(\&quot;ui-state-focus\&quot;),this.active=null,this._trigger(\&quot;blur\&quot;,t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),\&quot;true\&quot;===t.attr(\&quot;aria-hidden\&quot;)&amp;&amp;(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(\&quot;.ui-menu\&quot;).not(e.parents(\&quot;.ui-menu\&quot;)).hide().attr(\&quot;aria-hidden\&quot;,\&quot;true\&quot;),e.show().removeAttr(\&quot;aria-hidden\&quot;).attr(\&quot;aria-expanded\&quot;,\&quot;true\&quot;).position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&amp;&amp;e.target).closest(this.element.find(\&quot;.ui-menu\&quot;));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(\&quot;.ui-menu\&quot;).hide().attr(\&quot;aria-hidden\&quot;,\&quot;true\&quot;).attr(\&quot;aria-expanded\&quot;,\&quot;false\&quot;).end().find(\&quot;a.ui-state-active\&quot;).removeClass(\&quot;ui-state-active\&quot;)},collapse:function(t){var e=this.active&amp;&amp;this.active.parent().closest(\&quot;.ui-menu-item\&quot;,this.element);e&amp;&amp;e.length&amp;&amp;(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&amp;&amp;this.active.children(\&quot;.ui-menu \&quot;).children(\&quot;.ui-menu-item\&quot;).first();e&amp;&amp;e.length&amp;&amp;(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move(\&quot;next\&quot;,\&quot;first\&quot;,t)},previous:function(t){this._move(\&quot;prev\&quot;,\&quot;last\&quot;,t)},isFirstItem:function(){return this.active&amp;&amp;!this.active.prevAll(\&quot;.ui-menu-item\&quot;).length},isLastItem:function(){return this.active&amp;&amp;!this.active.nextAll(\&quot;.ui-menu-item\&quot;).length},_move:function(t,e,i){var s;this.active&amp;&amp;(s=\&quot;first\&quot;===t||\&quot;last\&quot;===t?this.active[\&quot;first\&quot;===t?\&quot;prevAll\&quot;:\&quot;nextAll\&quot;](\&quot;.ui-menu-item\&quot;).eq(-1):this.active[t+\&quot;All\&quot;](\&quot;.ui-menu-item\&quot;).eq(0)),s&amp;&amp;s.length&amp;&amp;this.active||(s=this.activeMenu.children(\&quot;.ui-menu-item\&quot;)[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;return this.active?(this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(\&quot;.ui-menu-item\&quot;).each(function(){return i=t(this),0&gt;i.offset().top-s-n}),this.focus(e,i)):this.focus(e,this.activeMenu.children(\&quot;.ui-menu-item\&quot;)[this.active?\&quot;last\&quot;:\&quot;first\&quot;]())),undefined):(this.next(e),undefined)},previousPage:function(e){var i,s,n;return this.active?(this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(\&quot;.ui-menu-item\&quot;).each(function(){return i=t(this),i.offset().top-s+n&gt;0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(\&quot;.ui-menu-item\&quot;).first())),undefined):(this.next(e),undefined)},_hasScroll:function(){return this.element.outerHeight()&lt;this.element.prop(\&quot;scrollHeight\&quot;)},select:function(e){this.active=this.active||t(e.target).closest(\&quot;.ui-menu-item\&quot;);var i={item:this.active};this.active.has(\&quot;.ui-menu\&quot;).length||this.collapseAll(e,!0),this._trigger(\&quot;select\&quot;,e,i)}})})(jQuery);(function(t){var e=5;t.widget(\&quot;ui.slider\&quot;,t.ui.mouse,{version:\&quot;1.10.2\&quot;,widgetEventPrefix:\&quot;slide\&quot;,options:{animate:!1,distance:0,max:100,min:0,orientation:\&quot;horizontal\&quot;,range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass(\&quot;ui-slider ui-slider-\&quot;+this.orientation+\&quot; ui-widget\&quot;+\&quot; ui-widget-content\&quot;+\&quot; ui-corner-all\&quot;),this._refresh(),this._setOption(\&quot;disabled\&quot;,this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var e,i,s=this.options,n=this.element.find(\&quot;.ui-slider-handle\&quot;).addClass(\&quot;ui-state-default ui-corner-all\&quot;),a=\&quot;&lt;a class=\'ui-slider-handle ui-state-default ui-corner-all\' href=\'#\'&gt;&lt;\/a&gt;\&quot;,o=[];for(i=s.values&amp;&amp;s.values.length||1,n.length&gt;i&amp;&amp;(n.slice(i).remove(),n=n.slice(0,i)),e=n.length;i&gt;e;e++)o.push(a);this.handles=n.add(t(o.join(\&quot;\&quot;)).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(e){t(this).data(\&quot;ui-slider-handle-index\&quot;,e)})},_createRange:function(){var e=this.options,i=\&quot;\&quot;;e.range?(e.range===!0&amp;&amp;(e.values?e.values.length&amp;&amp;2!==e.values.length?e.values=[e.values[0],e.values[0]]:t.isArray(e.values)&amp;&amp;(e.values=e.values.slice(0)):e.values=[this._valueMin(),this._valueMin()]),this.range&amp;&amp;this.range.length?this.range.removeClass(\&quot;ui-slider-range-min ui-slider-range-max\&quot;).css({left:\&quot;\&quot;,bottom:\&quot;\&quot;}):(this.range=t(\&quot;&lt;div&gt;&lt;\/div&gt;\&quot;).appendTo(this.element),i=\&quot;ui-slider-range ui-widget-header ui-corner-all\&quot;),this.range.addClass(i+(\&quot;min\&quot;===e.range||\&quot;max\&quot;===e.range?\&quot; ui-slider-range-\&quot;+e.range:\&quot;\&quot;))):this.range=t([])},_setupEvents:function(){var t=this.handles.add(this.range).filter(\&quot;a\&quot;);this._off(t),this._on(t,this._handleEvents),this._hoverable(t),this._focusable(t)},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass(\&quot;ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all\&quot;),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,a,o,r,h,l,u=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-u.values(e));(n&gt;i||n===i&amp;&amp;(e===u._lastChangedValue||u.values(e)===c.min))&amp;&amp;(n=i,a=t(this),o=e)}),r=this._start(e,o),r===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,a.addClass(\&quot;ui-state-active\&quot;).focus(),h=a.offset(),l=!t(e.target).parents().addBack().is(\&quot;.ui-slider-handle\&quot;),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-h.left-a.width()\/2,top:e.pageY-h.top-a.height()\/2-(parseInt(a.css(\&quot;borderTopWidth\&quot;),10)||0)-(parseInt(a.css(\&quot;borderBottomWidth\&quot;),10)||0)+(parseInt(a.css(\&quot;marginTop\&quot;),10)||0)},this.handles.hasClass(\&quot;ui-state-hover\&quot;)||this._slide(e,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass(\&quot;ui-state-active\&quot;),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=\&quot;vertical\&quot;===this.options.orientation?\&quot;vertical\&quot;:\&quot;horizontal\&quot;},_normValueFromMouse:function(t){var e,i,s,n,a;return\&quot;horizontal\&quot;===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i\/e,s&gt;1&amp;&amp;(s=1),0&gt;s&amp;&amp;(s=0),\&quot;vertical\&quot;===this.orientation&amp;&amp;(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&amp;&amp;this.options.values.length&amp;&amp;(i.value=this.values(e),i.values=this.values()),this._trigger(\&quot;start\&quot;,t,i)},_slide:function(t,e,i){var s,n,a;this.options.values&amp;&amp;this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&amp;&amp;this.options.range===!0&amp;&amp;(0===e&amp;&amp;i&gt;s||1===e&amp;&amp;s&gt;i)&amp;&amp;(i=s),i!==this.values(e)&amp;&amp;(n=this.values(),n[e]=i,a=this._trigger(\&quot;slide\&quot;,t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),a!==!1&amp;&amp;this.values(e,i,!0))):i!==this.value()&amp;&amp;(a=this._trigger(\&quot;slide\&quot;,t,{handle:this.handles[e],value:i}),a!==!1&amp;&amp;this.value(i))},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&amp;&amp;this.options.values.length&amp;&amp;(i.value=this.values(e),i.values=this.values()),this._trigger(\&quot;stop\&quot;,t,i)},_change:function(t,e){if(!this._keySliding&amp;&amp;!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&amp;&amp;this.options.values.length&amp;&amp;(i.value=this.values(e),i.values=this.values()),this._lastChangedValue=e,this._trigger(\&quot;change\&quot;,t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),this._change(null,0),undefined):this._value()},values:function(e,i){var s,n,a;if(arguments.length&gt;1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),this._change(null,e),undefined;if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&amp;&amp;this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],a=0;s.length&gt;a;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch(\&quot;range\&quot;===e&amp;&amp;this.options.range===!0&amp;&amp;(\&quot;min\&quot;===i?(this.options.value=this._values(0),this.options.values=null):\&quot;max\&quot;===i&amp;&amp;(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),t.isArray(this.options.values)&amp;&amp;(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case\&quot;orientation\&quot;:this._detectOrientation(),this.element.removeClass(\&quot;ui-slider-horizontal ui-slider-vertical\&quot;).addClass(\&quot;ui-slider-\&quot;+this.orientation),this._refreshValue();break;case\&quot;value\&quot;:this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case\&quot;values\&quot;:for(this._animateOff=!0,this._refreshValue(),s=0;n&gt;s;s+=1)this._change(null,s);this._animateOff=!1;break;case\&quot;min\&quot;:case\&quot;max\&quot;:this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case\&quot;range\&quot;:this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);if(this.options.values&amp;&amp;this.options.values.length){for(i=this.options.values.slice(),s=0;i.length&gt;s;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(t){if(this._valueMin()&gt;=t)return this._valueMin();if(t&gt;=this._valueMax())return this._valueMax();var e=this.options.step&gt;0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)&gt;=e&amp;&amp;(s+=i&gt;0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,a,o=this.options.range,r=this.options,h=this,l=this._animateOff?!1:r.animate,u={};this.options.values&amp;&amp;this.options.values.length?this.handles.each(function(s){i=100*((h.values(s)-h._valueMin())\/(h._valueMax()-h._valueMin())),u[\&quot;horizontal\&quot;===h.orientation?\&quot;left\&quot;:\&quot;bottom\&quot;]=i+\&quot;%\&quot;,t(this).stop(1,1)[l?\&quot;animate\&quot;:\&quot;css\&quot;](u,r.animate),h.options.range===!0&amp;&amp;(\&quot;horizontal\&quot;===h.orientation?(0===s&amp;&amp;h.range.stop(1,1)[l?\&quot;animate\&quot;:\&quot;css\&quot;]({left:i+\&quot;%\&quot;},r.animate),1===s&amp;&amp;h.range[l?\&quot;animate\&quot;:\&quot;css\&quot;]({width:i-e+\&quot;%\&quot;},{queue:!1,duration:r.animate})):(0===s&amp;&amp;h.range.stop(1,1)[l?\&quot;animate\&quot;:\&quot;css\&quot;]({bottom:i+\&quot;%\&quot;},r.animate),1===s&amp;&amp;h.range[l?\&quot;animate\&quot;:\&quot;css\&quot;]({height:i-e+\&quot;%\&quot;},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?100*((s-n)\/(a-n)):0,u[\&quot;horizontal\&quot;===this.orientation?\&quot;left\&quot;:\&quot;bottom\&quot;]=i+\&quot;%\&quot;,this.handle.stop(1,1)[l?\&quot;animate\&quot;:\&quot;css\&quot;](u,r.animate),\&quot;min\&quot;===o&amp;&amp;\&quot;horizontal\&quot;===this.orientation&amp;&amp;this.range.stop(1,1)[l?\&quot;animate\&quot;:\&quot;css\&quot;]({width:i+\&quot;%\&quot;},r.animate),\&quot;max\&quot;===o&amp;&amp;\&quot;horizontal\&quot;===this.orientation&amp;&amp;this.range[l?\&quot;animate\&quot;:\&quot;css\&quot;]({width:100-i+\&quot;%\&quot;},{queue:!1,duration:r.animate}),\&quot;min\&quot;===o&amp;&amp;\&quot;vertical\&quot;===this.orientation&amp;&amp;this.range.stop(1,1)[l?\&quot;animate\&quot;:\&quot;css\&quot;]({height:i+\&quot;%\&quot;},r.animate),\&quot;max\&quot;===o&amp;&amp;\&quot;vertical\&quot;===this.orientation&amp;&amp;this.range[l?\&quot;animate\&quot;:\&quot;css\&quot;]({height:100-i+\&quot;%\&quot;},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,a,o,r=t(i.target).data(\&quot;ui-slider-handle-index\&quot;);switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&amp;&amp;(this._keySliding=!0,t(i.target).addClass(\&quot;ui-state-active\&quot;),s=this._start(i,r),s===!1))return}switch(o=this.options.step,n=a=this.options.values&amp;&amp;this.options.values.length?this.values(r):this.value(),i.keyCode){case t.ui.keyCode.HOME:a=this._valueMin();break;case t.ui.keyCode.END:a=this._valueMax();break;case t.ui.keyCode.PAGE_UP:a=this._trimAlignValue(n+(this._valueMax()-this._valueMin())\/e);break;case t.ui.keyCode.PAGE_DOWN:a=this._trimAlignValue(n-(this._valueMax()-this._valueMin())\/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(n===this._valueMax())return;a=this._trimAlignValue(n+o);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(n===this._valueMin())return;a=this._trimAlignValue(n-o)}this._slide(i,r,a)},click:function(t){t.preventDefault()},keyup:function(e){var i=t(e.target).data(\&quot;ui-slider-handle-index\&quot;);this._keySliding&amp;&amp;(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass(\&quot;ui-state-active\&quot;))}}})})(jQuery);']]</p></td>
            </tr>
        </tbody>
    </table>
    <div class="footer">Generated using <a href="http://timurstrekalov.github.com/saga/">Saga</a> version 1.4.1</div>
</body>
</html>